<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: Ronin::Cacheable</title>
  </head>
  <body>
    <div id="content">
      <div class="section module Ronin_Cacheable">
  <h1 class="title">Module: Ronin::Cacheable</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary class public">
    <h1>Public Class Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#cache_all-class_method' title='cache_all'>cache_all</a></span><span class='args'>(path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Cache all objects defined in the file at the specified <em>path</em>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#included-class_method' title='included'>included</a></span><span class='args'>(base)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#load_all_from-class_method' title='load_all_from'>load_all_from</a></span><span class='args'>(path,&amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Loads all cacheable objects from the specified <em>path</em>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#models-class_method' title='models'>models</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
List of cacheable models.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#cache%21-instance_method' title='#cache!'>#cache!</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes any previously cached copies of the object and caches it into the
database.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#load_original%21-instance_method' title='#load_original!'>#load_original!</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Load the code from the cached file for the object.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#prepare_cache-instance_method' title='#prepare_cache'>#prepare_cache</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Prepares the object for caching.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#sync%21-instance_method' title='#sync!'>#sync!</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes any previous cached copies of the object and caches it into the
database, only if the file where the object was originally cached from was
modified.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails class public">
  <h1>Public Class Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>cache_all</h3>
</div><div id="cache_all-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cache_all</span><span class='args'>(path)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Cache all objects defined in the file at the specified <em>path</em>.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


149
150
151
152
153
154
155</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/ronin/cacheable.rb', line 149</span>

<span class='def def kw'>def</span> <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='cache_all identifier id'>cache_all</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>

  <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='load_all_from identifier id'>load_all_from</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cache! fid id'>cache!</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>included</h3>
</div><div id="included-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>included</span><span class='args'>(base)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/ronin/cacheable.rb', line 30</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='included identifier id'>included</span><span class='lparen token'>(</span><span class='base identifier id'>base</span><span class='rparen token'>)</span>
  <span class='base identifier id'>base</span><span class='dot token'>.</span><span class='module_eval identifier id'>module_eval</span> <span class='do do kw'>do</span>
    <span class='include identifier id'>include</span> <span class='Contextify constant id'>Contextify</span>
    <span class='include identifier id'>include</span> <span class='Ronin constant id'>Ronin</span><span class='colon2 op'>::</span><span class='Model constant id'>Model</span>

    <span class='comment val'># The path to the file where the object was defined in</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:cached_path</span><span class='comma token'>,</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Types constant id'>Types</span><span class='colon2 op'>::</span><span class='FilePath constant id'>FilePath</span>

    <span class='comment val'># The timestamp of the cached file</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:cached_timestamp</span><span class='comma token'>,</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Types constant id'>Types</span><span class='colon2 op'>::</span><span class='EpochTime constant id'>EpochTime</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Initializes the cacheable object.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='comma token'>,</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
      <span class='@original_loaded ivar id'>@original_loaded</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
      <span class='@cache_prepared ivar id'>@cache_prepared</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>

      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='comma token'>,</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Returns the first instance of the model that matches the given</span>
    <span class='comment val'># query _arguments_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='rparen token'>)</span>
      <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='obj identifier id'>obj</span> <span class='assign token'>=</span> <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
        <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='string val'>'@cache_prepared'</span><span class='comma token'>,</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='obj identifier id'>obj</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Returns all instances of the model that matches the given query</span>
    <span class='comment val'># _arguments_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='rparen token'>)</span>
      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
        <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='string val'>'@cache_prepared'</span><span class='comma token'>,</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Loads an object from the file at the specified _path_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_from identifier id'>load_from</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
      <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
      <span class='obj identifier id'>obj</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_context identifier id'>load_context</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>

      <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='string val'>'@original_loaded'</span><span class='comma token'>,</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
      <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span>
      <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cached_timestamp identifier id'>cached_timestamp</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
      <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='prepare_cache identifier id'>prepare_cache</span>
      <span class='return return kw'>return</span> <span class='obj identifier id'>obj</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Caches an object from the file at the specified _path_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cache identifier id'>cache</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
      <span class='obj identifier id'>obj</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_from identifier id'>load_from</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

      <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cache! fid id'>cache!</span>
      <span class='return return kw'>return</span> <span class='obj identifier id'>obj</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Loads all objects with the matching _attributes_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_all identifier id'>load_all</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span> <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='load_original identifier id'>load_original</span> <span class='rbrace token'>}</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Loads the first object with the matching _attributes_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_first identifier id'>load_first</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='load_original! fid id'>load_original!</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='unless unless kw'>unless</span> <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='models identifier id'>models</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='base identifier id'>base</span><span class='rparen token'>)</span>
    <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='models identifier id'>models</span> <span class='lshft op'>&lt;&lt;</span> <span class='base identifier id'>base</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>load_all_from</h3>
</div><div id="load_all_from-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>load_all_from</span><span class='args'>(path,&amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Loads all cacheable objects from the specified <em>path</em>. If a
<em>block</em> is given, it will be passed each loaded object.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/ronin/cacheable.rb', line 128</span>

<span class='def def kw'>def</span> <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='load_all_from identifier id'>load_all_from</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='objs identifier id'>objs</span> <span class='assign token'>=</span> <span class='Contextify constant id'>Contextify</span><span class='dot token'>.</span><span class='load_contexts identifier id'>load_contexts</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='Cacheable constant id'>Cacheable</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='objs identifier id'>objs</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='string val'>'@original_loaded'</span><span class='comma token'>,</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cached_timestamp identifier id'>cached_timestamp</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='prepare_cache identifier id'>prepare_cache</span>

    <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block identifier id'>block</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='objs identifier id'>objs</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>models</h3>
</div><div id="models-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>models</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
List of cacheable models.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


120
121
122</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/ronin/cacheable.rb', line 120</span>

<span class='def def kw'>def</span> <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='models identifier id'>models</span>
  <span class='@@ronin_cacheable_models ivar id'>@@ronin_cacheable_models</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div><div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>cache!</h3>
</div><div id="cache%21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cache!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes any previously cached copies of the object and caches it into the
database. Returns <tt>true</tt> if the object was successfully cached,
returns <tt>false</tt> otherwise.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


176
177
178
179
180
181
182
183
184
185
186</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/ronin/cacheable.rb', line 176</span>

<span class='def def kw'>def</span> <span class='cache! fid id'>cache!</span>
  <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span>
    <span class='comment val'># delete any existing objects</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='symbol val'>:cached_path</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='destroy! fid id'>destroy!</span>

    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_timestamp identifier id'>cached_timestamp</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span>
    <span class='return return kw'>return</span> <span class='save! fid id'>save!</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>load_original!</h3>
</div><div id="load_original%21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>load_original!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Load the code from the cached file for the object.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


160
161
162
163
164
165
166
167
168
169</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/ronin/cacheable.rb', line 160</span>

<span class='def def kw'>def</span> <span class='load_original! fid id'>load_original!</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='lparen token'>(</span><span class='@original_loaded ivar id'>@original_loaded</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='block identifier id'>block</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='load_context_block identifier id'>load_context_block</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span>

    <span class='instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block identifier id'>block</span>
    <span class='@original_loaded ivar id'>@original_loaded</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>prepare_cache</h3>
</div><div id="prepare_cache-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>prepare_cache</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Prepares the object for caching.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


217
218
219
220
221
222</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/ronin/cacheable.rb', line 217</span>

<span class='def def kw'>def</span> <span class='prepare_cache identifier id'>prepare_cache</span>
  <span class='unless unless kw'>unless</span> <span class='@cache_prepared ivar id'>@cache_prepared</span>
    <span class='instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='lparen token'>(</span><span class='@cache_block ivar id'>@cache_block</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@cache_block ivar id'>@cache_block</span>
    <span class='@cache_prepared ivar id'>@cache_prepared</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>sync!</h3>
</div><div id="sync%21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>sync!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes any previous cached copies of the object and caches it into the
database, only if the file where the object was originally cached from was
modified. The object will also be destroyed if the file where the object
was originally cached from is missing. Returns <tt>true</tt> if the object
was successfully synced, returns <tt>false</tt> otherwise.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/ronin/cacheable.rb', line 196</span>

<span class='def def kw'>def</span> <span class='sync! fid id'>sync!</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span> <span class='andop op'>&amp;&amp;</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_timestamp identifier id'>cached_timestamp</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span>
      <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span> <span class='gt op'>&gt;</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_timestamp identifier id'>cached_timestamp</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='cache identifier id'>cache</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='return return kw'>return</span> <span class='false false kw'>false</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='destroy identifier id'>destroy</span>
    <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>