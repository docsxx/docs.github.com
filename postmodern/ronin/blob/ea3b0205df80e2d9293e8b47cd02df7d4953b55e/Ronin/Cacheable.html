<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>postmodern's ronin - Module: Ronin::Cacheable - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/postmodern/commits/ronin/master" rel="alternate" title="Recent Commits to ronin:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    GitHubRepo.init("postmodern", "ronin", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='postmodern/ronin/blob/ea3b0205df80e2d9293e8b47cd02df7d4953b55e' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='postmodern/ronin/blob/ea3b0205df80e2d9293e8b47cd02df7d4953b55e' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("postmodern", "ronin", "ea3b0205df80e2d9293e8b47cd02df7d4953b55e", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/postmodern/ronin/tree/">Source</a></li>
            <li class=""><a href="http://github.com/postmodern/ronin/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/postmodern/ronin/network">Network</a></li>            
            <li class=""><a href="http://github.com/postmodern/ronin/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/postmodern/ronin">Wiki</a></li>
            <li class=""><a href="http://github.com/postmodern/ronin/graphs">Graphs</a></li>                    
            <li class="active"><a href="/postmodern/ronin">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/postmodern">postmodern</a> / <b><a href="http://github.com/postmodern/ronin/tree">ronin</a></b>        
                <a id="namespaces_button" rel="postmodern/ronin/blob/ea3b0205df80e2d9293e8b47cd02df7d4953b55e" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="postmodern/ronin/blob/ea3b0205df80e2d9293e8b47cd02df7d4953b55e" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Ronin_Cacheable">
  <h1>Module: Ronin::Cacheable</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#cache_all-class_method">cache_all</span><span class='args'>(path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Cache all objects defined in the file at the specified <em>path</em>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#included-class_method">included</span><span class='args'>(base)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#load_all_from-class_method">load_all_from</span><span class='args'>(path, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Loads all cacheable objects from the specified <em>path</em>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#models-class_method">models</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
List of cacheable models.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#cache-21-instance_method">#cache!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes any previously cached copies of the object and caches it into the
database.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#load_original-21-instance_method">#load_original!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Load the code from the cached file for the object.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#original_loaded-3F-instance_method">#original_loaded?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns <tt>true</tt> if the original code has been loaded, returns
<tt>false</tt> otherwise.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#prepare_cache-instance_method">#prepare_cache</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Prepares the object for caching.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#prepared_for_cache-3F-instance_method">#prepared_for_cache?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns <tt>true</tt> if the object has been prepared to be cached, returns
<tt>false</tt> otherwise.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#sync-21-instance_method">#sync!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes any previous cached copies of the object and caches it into the
database, only if the file where the object was originally cached from was
modified.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>cache_all</h3>
</div><div id="cache_all-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cache_all</span><span class='args'>(path)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Cache all objects defined in the file at the specified <em>path</em>.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ronin/cacheable.rb', line 149</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/postmodern/ronin/blob/master/lib/ronin/cacheable.rb#L149">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">149
150
151
152
153
154
155</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='cache_all identifier id'>cache_all</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>

  <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='load_all_from identifier id'>load_all_from</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cache! fid id'>cache!</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>included</h3>
</div><div id="included-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>included</span><span class='args'>(base)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ronin/cacheable.rb', line 30</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/postmodern/ronin/blob/master/lib/ronin/cacheable.rb#L30">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='included identifier id'>included</span><span class='lparen token'>(</span><span class='base identifier id'>base</span><span class='rparen token'>)</span>
  <span class='base identifier id'>base</span><span class='dot token'>.</span><span class='module_eval identifier id'>module_eval</span> <span class='do do kw'>do</span>
    <span class='include identifier id'>include</span> <span class='Contextify constant id'>Contextify</span>
    <span class='include identifier id'>include</span> <span class='Ronin constant id'>Ronin</span><span class='colon2 op'>::</span><span class='Model constant id'>Model</span>

    <span class='comment val'># The path to the file where the object was defined in</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:cached_path</span><span class='comma token'>,</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Types constant id'>Types</span><span class='colon2 op'>::</span><span class='FilePath constant id'>FilePath</span>

    <span class='comment val'># The timestamp of the cached file</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:cached_timestamp</span><span class='comma token'>,</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Types constant id'>Types</span><span class='colon2 op'>::</span><span class='EpochTime constant id'>EpochTime</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Initializes the cacheable object.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='comma token'>,</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
      <span class='@original_loaded ivar id'>@original_loaded</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
      <span class='@cache_prepared ivar id'>@cache_prepared</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>

      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='comma token'>,</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Returns the first instance of the model that matches the given</span>
    <span class='comment val'># query _arguments_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='rparen token'>)</span>
      <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='obj identifier id'>obj</span> <span class='assign token'>=</span> <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
        <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='string val'>'@cache_prepared'</span><span class='comma token'>,</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='obj identifier id'>obj</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Returns all instances of the model that matches the given query</span>
    <span class='comment val'># _arguments_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='rparen token'>)</span>
      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='arguments identifier id'>arguments</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
        <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='string val'>'@cache_prepared'</span><span class='comma token'>,</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Loads an object from the file at the specified _path_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_from identifier id'>load_from</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
      <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
      <span class='obj identifier id'>obj</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_context identifier id'>load_context</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>

      <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='string val'>'@original_loaded'</span><span class='comma token'>,</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
      <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span>
      <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cached_timestamp identifier id'>cached_timestamp</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
      <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='prepare_cache identifier id'>prepare_cache</span>
      <span class='return return kw'>return</span> <span class='obj identifier id'>obj</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Caches an object from the file at the specified _path_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cache identifier id'>cache</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
      <span class='obj identifier id'>obj</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_from identifier id'>load_from</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

      <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cache! fid id'>cache!</span>
      <span class='return return kw'>return</span> <span class='obj identifier id'>obj</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Loads all objects with the matching _attributes_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_all identifier id'>load_all</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span> <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='load_original! fid id'>load_original!</span> <span class='rbrace token'>}</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#</span>
    <span class='comment val'># Loads the first object with the matching _attributes_.</span>
    <span class='comment val'>#</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='load_first identifier id'>load_first</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='load_original! fid id'>load_original!</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='unless unless kw'>unless</span> <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='models identifier id'>models</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='base identifier id'>base</span><span class='rparen token'>)</span>
    <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='models identifier id'>models</span> <span class='lshft op'>&lt;&lt;</span> <span class='base identifier id'>base</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>load_all_from</h3>
</div><div id="load_all_from-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>load_all_from</span><span class='args'>(path, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Loads all cacheable objects from the specified <em>path</em>. If a
<em>block</em> is given, it will be passed each loaded object.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ronin/cacheable.rb', line 128</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/postmodern/ronin/blob/master/lib/ronin/cacheable.rb#L128">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='load_all_from identifier id'>load_all_from</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='objs identifier id'>objs</span> <span class='assign token'>=</span> <span class='Contextify constant id'>Contextify</span><span class='dot token'>.</span><span class='load_contexts identifier id'>load_contexts</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='Cacheable constant id'>Cacheable</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='objs identifier id'>objs</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='string val'>'@original_loaded'</span><span class='comma token'>,</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='cached_timestamp identifier id'>cached_timestamp</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
    <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='prepare_cache identifier id'>prepare_cache</span>

    <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block identifier id'>block</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='objs identifier id'>objs</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>models</h3>
</div><div id="models-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>models</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
List of cacheable models.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ronin/cacheable.rb', line 120</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/postmodern/ronin/blob/master/lib/ronin/cacheable.rb#L120">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">120
121
122</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Cacheable constant id'>Cacheable</span><span class='dot token'>.</span><span class='models identifier id'>models</span>
  <span class='@@ronin_cacheable_models ivar id'>@@ronin_cacheable_models</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>cache!</h3>
</div><div id="cache-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cache!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes any previously cached copies of the object and caches it into the
database. Returns <tt>true</tt> if the object was successfully cached,
returns <tt>false</tt> otherwise.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ronin/cacheable.rb', line 184</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/postmodern/ronin/blob/master/lib/ronin/cacheable.rb#L184">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">184
185
186
187
188
189
190
191
192
193
194</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='cache! fid id'>cache!</span>
  <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span>
    <span class='comment val'># delete any existing objects</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='symbol val'>:cached_path</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='destroy! fid id'>destroy!</span>

    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_timestamp identifier id'>cached_timestamp</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span>
    <span class='return return kw'>return</span> <span class='save! fid id'>save!</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>load_original!</h3>
</div><div id="load_original-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>load_original!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Load the code from the cached file for the object.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ronin/cacheable.rb', line 168</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/postmodern/ronin/blob/master/lib/ronin/cacheable.rb#L168">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">168
169
170
171
172
173
174
175
176
177</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='load_original! fid id'>load_original!</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='lparen token'>(</span><span class='@original_loaded ivar id'>@original_loaded</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='block identifier id'>block</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='load_context_block identifier id'>load_context_block</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span>

    <span class='instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block identifier id'>block</span>
    <span class='@original_loaded ivar id'>@original_loaded</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>original_loaded?</h3>
</div><div id="original_loaded-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>original_loaded?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns <tt>true</tt> if the original code has been loaded, returns
<tt>false</tt> otherwise.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ronin/cacheable.rb', line 161</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/postmodern/ronin/blob/master/lib/ronin/cacheable.rb#L161">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">161
162
163</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='original_loaded? fid id'>original_loaded?</span>
  <span class='@original_loaded ivar id'>@original_loaded</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>prepare_cache</h3>
</div><div id="prepare_cache-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>prepare_cache</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Prepares the object for caching.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ronin/cacheable.rb', line 233</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/postmodern/ronin/blob/master/lib/ronin/cacheable.rb#L233">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">233
234
235
236
237
238</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='prepare_cache identifier id'>prepare_cache</span>
  <span class='unless unless kw'>unless</span> <span class='@cache_prepared ivar id'>@cache_prepared</span>
    <span class='instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='lparen token'>(</span><span class='@cache_block ivar id'>@cache_block</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@cache_block ivar id'>@cache_block</span>
    <span class='@cache_prepared ivar id'>@cache_prepared</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>prepared_for_cache?</h3>
</div><div id="prepared_for_cache-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>prepared_for_cache?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns <tt>true</tt> if the object has been prepared to be cached, returns
<tt>false</tt> otherwise.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ronin/cacheable.rb', line 226</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/postmodern/ronin/blob/master/lib/ronin/cacheable.rb#L226">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">226
227
228</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='prepared_for_cache? fid id'>prepared_for_cache?</span>
  <span class='@cache_prepared ivar id'>@cache_prepared</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>sync!</h3>
</div><div id="sync-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>sync!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes any previous cached copies of the object and caches it into the
database, only if the file where the object was originally cached from was
modified. The object will also be destroyed if the file where the object
was originally cached from is missing. Returns <tt>true</tt> if the object
was successfully synced, returns <tt>false</tt> otherwise.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ronin/cacheable.rb', line 204</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/postmodern/ronin/blob/master/lib/ronin/cacheable.rb#L204">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='sync! fid id'>sync!</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span> <span class='andop op'>&amp;&amp;</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_timestamp identifier id'>cached_timestamp</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span>
      <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span> <span class='gt op'>&gt;</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_timestamp identifier id'>cached_timestamp</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='cache identifier id'>cache</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='cached_path identifier id'>cached_path</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='return return kw'>return</span> <span class='false false kw'>false</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='destroy identifier id'>destroy</span>
    <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>