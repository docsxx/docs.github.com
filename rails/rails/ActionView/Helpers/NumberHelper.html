<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: ActionView::Helpers::NumberHelper</title>
  </head>
  <body>
    <div id="content">
      <div class="section module ActionView_Helpers_NumberHelper">
  <h1 class="title">Module: ActionView::Helpers::NumberHelper</h1>
  <div class="section docstring">
  <p>
Provides methods for converting numbers into formatted strings. Methods are
provided for phone numbers, currency, percentage, precision, positional
notation, and file size.
</p>

</div><div class="section constants">
  
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#number_to_currency-instance_method' title='#number_to_currency'>#number_to_currency</a></span><span class='args'>(number, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Formats a <tt>number</tt> into a currency string (e.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#number_to_human_size-instance_method' title='#number_to_human_size'>#number_to_human_size</a></span><span class='args'>(number, *args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Formats the bytes in <tt>size</tt> into a more understandable
representation (e.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#number_to_percentage-instance_method' title='#number_to_percentage'>#number_to_percentage</a></span><span class='args'>(number, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Formats a <tt>number</tt> as a percentage string (e.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#number_to_phone-instance_method' title='#number_to_phone'>#number_to_phone</a></span><span class='args'>(number, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Formats a <tt>number</tt> into a US phone number (e.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#number_with_delimiter-instance_method' title='#number_with_delimiter'>#number_with_delimiter</a></span><span class='args'>(number, *args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Formats a <tt>number</tt> with grouped thousands using <tt>delimiter</tt>
(e.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#number_with_precision-instance_method' title='#number_with_precision'>#number_with_precision</a></span><span class='args'>(number, *args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Formats a <tt>number</tt> with the specified level of <tt>:precision</tt>
(e.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>number_to_currency</h3>
</div><div id="number_to_currency-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>number_to_currency</span><span class='args'>(number, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Formats a <tt>number</tt> into a currency string (e.g., $13.65). You can
customize the format in the <tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><tt>:precision</tt> - Sets the level of precision (defaults to 2).

</li>
<li><tt>:unit</tt> - Sets the denomination of the currency (defaults to
&quot;$&quot;).

</li>
<li><tt>:separator</tt> - Sets the separator between the units (defaults to
&quot;.&quot;).

</li>
<li><tt>:delimiter</tt> - Sets the thousands delimiter (defaults to
&quot;,&quot;).

</li>
<li><tt>:format</tt> - Sets the format of the output string (defaults to
&quot;%u%n&quot;). The field types are:

<pre class="code">
  <span class='u identifier id'>u</span>  <span class='The constant id'>The</span> <span class='currency identifier id'>currency</span> <span class='unit identifier id'>unit</span>
  <span class='n identifier id'>n</span>  <span class='The constant id'>The</span> <span class='number identifier id'>number</span>
</pre>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='number_to_currency identifier id'>number_to_currency</span><span class='lparen token'>(</span><span class='float val'>1234567890.50</span><span class='rparen token'>)</span>                    <span class='comment val'># =&gt; $1,234,567,890.50</span>
 <span class='number_to_currency identifier id'>number_to_currency</span><span class='lparen token'>(</span><span class='float val'>1234567890.506</span><span class='rparen token'>)</span>                   <span class='comment val'># =&gt; $1,234,567,890.51</span>
 <span class='number_to_currency identifier id'>number_to_currency</span><span class='lparen token'>(</span><span class='float val'>1234567890.506</span><span class='comma token'>,</span> <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>3</span><span class='rparen token'>)</span>  <span class='comment val'># =&gt; $1,234,567,890.506</span>

 <span class='number_to_currency identifier id'>number_to_currency</span><span class='lparen token'>(</span><span class='float val'>1234567890.50</span><span class='comma token'>,</span> <span class='symbol val'>:unit</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;&amp;pound;&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;,&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
 <span class='comment val'># =&gt; &amp;pound;1234567890,50</span>
 <span class='number_to_currency identifier id'>number_to_currency</span><span class='lparen token'>(</span><span class='float val'>1234567890.50</span><span class='comma token'>,</span> <span class='symbol val'>:unit</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;&amp;pound;&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;,&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:format</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%n %u&quot;</span><span class='rparen token'>)</span>
 <span class='comment val'># =&gt; 1234567890,50 &amp;pound;</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 73</span>

<span class='def def kw'>def</span> <span class='number_to_currency identifier id'>number_to_currency</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='symbolize_keys! fid id'>symbolize_keys!</span>

  <span class='defaults identifier id'>defaults</span>  <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.format'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='currency identifier id'>currency</span>  <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.currency.format'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='defaults identifier id'>defaults</span>  <span class='assign token'>=</span> <span class='defaults identifier id'>defaults</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='currency identifier id'>currency</span><span class='rparen token'>)</span>

  <span class='precision identifier id'>precision</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:precision</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:precision</span><span class='rbrack token'>]</span>
  <span class='unit identifier id'>unit</span>      <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:unit</span><span class='rbrack token'>]</span>      <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:unit</span><span class='rbrack token'>]</span>
  <span class='separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span>
  <span class='delimiter identifier id'>delimiter</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span>
  <span class='format identifier id'>format</span>    <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:format</span><span class='rbrack token'>]</span>    <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:format</span><span class='rbrack token'>]</span>
  <span class='separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='string val'>''</span> <span class='if if_mod kw'>if</span> <span class='precision identifier id'>precision</span> <span class='eq op'>==</span> <span class='integer val'>0</span>

  <span class='begin begin kw'>begin</span>
    <span class='format identifier id'>format</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/%n/</span><span class='comma token'>,</span> <span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='comma token'>,</span>
      <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='precision identifier id'>precision</span><span class='comma token'>,</span>
      <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='delimiter identifier id'>delimiter</span><span class='comma token'>,</span>
      <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='separator identifier id'>separator</span><span class='rparen token'>)</span>
    <span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/%u/</span><span class='comma token'>,</span> <span class='unit identifier id'>unit</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span>
    <span class='number identifier id'>number</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>number_to_human_size</h3>
</div><div id="number_to_human_size-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>number_to_human_size</span><span class='args'>(number, *args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Formats the bytes in <tt>size</tt> into a more understandable
representation (e.g., giving it 1500 yields 1.5 KB). This method is useful
for reporting file sizes to users. This method returns nil if <tt>size</tt>
cannot be converted into a number. You can customize the format in the
<tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><tt>:precision</tt> - Sets the level of precision (defaults to 1).

</li>
<li><tt>:separator</tt> - Sets the separator between the units (defaults to
&quot;.&quot;).

</li>
<li><tt>:delimiter</tt> - Sets the thousands delimiter (defaults to
&quot;&quot;).

</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>123</span><span class='rparen token'>)</span>                                          <span class='comment val'># =&gt; 123 Bytes</span>
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>1234</span><span class='rparen token'>)</span>                                         <span class='comment val'># =&gt; 1.2 KB</span>
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>12345</span><span class='rparen token'>)</span>                                        <span class='comment val'># =&gt; 12.1 KB</span>
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>1234567</span><span class='rparen token'>)</span>                                      <span class='comment val'># =&gt; 1.2 MB</span>
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>1234567890</span><span class='rparen token'>)</span>                                   <span class='comment val'># =&gt; 1.1 GB</span>
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>1234567890123</span><span class='rparen token'>)</span>                                <span class='comment val'># =&gt; 1.1 TB</span>
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>1234567</span><span class='comma token'>,</span> <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span><span class='rparen token'>)</span>                     <span class='comment val'># =&gt; 1.18 MB</span>
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>483989</span><span class='comma token'>,</span> <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span>                      <span class='comment val'># =&gt; 473 KB</span>
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>1234567</span><span class='comma token'>,</span> <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span><span class='comma token'>,</span> <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>','</span><span class='rparen token'>)</span>  <span class='comment val'># =&gt; 1,18 MB</span>
</pre>
<p>
You can still use <tt>number_to_human_size</tt> with the old API that
accepts the <tt>precision</tt> as its optional second parameter:
</p>
<pre class="code">
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>1234567</span><span class='comma token'>,</span> <span class='integer val'>2</span><span class='rparen token'>)</span>    <span class='comment val'># =&gt; 1.18 MB</span>
 <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='integer val'>483989</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='rparen token'>)</span>     <span class='comment val'># =&gt; 473 KB</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 253</span>

<span class='def def kw'>def</span> <span class='number_to_human_size identifier id'>number_to_human_size</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>

  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='extract_options! fid id'>extract_options!</span>
  <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='symbolize_keys! fid id'>symbolize_keys!</span>

  <span class='defaults identifier id'>defaults</span> <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.format'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='human identifier id'>human</span>    <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.human.format'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='defaults identifier id'>defaults</span> <span class='assign token'>=</span> <span class='defaults identifier id'>defaults</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='human identifier id'>human</span><span class='rparen token'>)</span>

  <span class='unless unless kw'>unless</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='ActiveSupport constant id'>ActiveSupport</span><span class='colon2 op'>::</span><span class='Deprecation constant id'>Deprecation</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span><span class='lparen token'>(</span><span class='string val'>'number_to_human_size takes an option hash '</span> <span class='plus op'>+</span>
      <span class='string val'>'instead of a separate precision argument.'</span><span class='comma token'>,</span> <span class='caller identifier id'>caller</span><span class='rparen token'>)</span>
    <span class='precision identifier id'>precision</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:precision</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>

  <span class='precision identifier id'>precision</span> <span class='opasgn op'>||=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:precision</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:precision</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='separator identifier id'>separator</span> <span class='opasgn op'>||=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='delimiter identifier id'>delimiter</span> <span class='opasgn op'>||=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>

  <span class='storage_units_format identifier id'>storage_units_format</span> <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.human.storage_units.format'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>

  <span class='if if kw'>if</span> <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span> <span class='lt op'>&lt;</span> <span class='integer val'>1024</span>
    <span class='unit identifier id'>unit</span> <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.human.storage_units.units.byte'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:count</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>
    <span class='storage_units_format identifier id'>storage_units_format</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/%n/</span><span class='comma token'>,</span> <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/%u/</span><span class='comma token'>,</span> <span class='unit identifier id'>unit</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='max_exp identifier id'>max_exp</span>  <span class='assign token'>=</span> <span class='STORAGE_UNITS constant id'>STORAGE_UNITS</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='minus op'>-</span> <span class='integer val'>1</span>
    <span class='number identifier id'>number</span>   <span class='assign token'>=</span> <span class='Float constant id'>Float</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='rparen token'>)</span>
    <span class='exponent identifier id'>exponent</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='Math constant id'>Math</span><span class='dot token'>.</span><span class='log identifier id'>log</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='rparen token'>)</span> <span class='div op'>/</span> <span class='Math constant id'>Math</span><span class='dot token'>.</span><span class='log identifier id'>log</span><span class='lparen token'>(</span><span class='integer val'>1024</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span> <span class='comment val'># Convert to base 1024</span>
    <span class='exponent identifier id'>exponent</span> <span class='assign token'>=</span> <span class='max_exp identifier id'>max_exp</span> <span class='if if_mod kw'>if</span> <span class='exponent identifier id'>exponent</span> <span class='gt op'>&gt;</span> <span class='max_exp identifier id'>max_exp</span> <span class='comment val'># we need this to avoid overflow for the highest unit</span>
    <span class='number identifier id'>number</span>  <span class='opasgn op'>/=</span> <span class='integer val'>1024</span> <span class='pow op'>**</span> <span class='exponent identifier id'>exponent</span>

    <span class='unit_key identifier id'>unit_key</span> <span class='assign token'>=</span> <span class='STORAGE_UNITS constant id'>STORAGE_UNITS</span><span class='lbrack token'>[</span><span class='exponent identifier id'>exponent</span><span class='rbrack token'>]</span>
    <span class='unit identifier id'>unit</span> <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:&quot;number.human.storage_units.units.#{unit_key}&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:count</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>

    <span class='begin begin kw'>begin</span>
      <span class='escaped_separator identifier id'>escaped_separator</span> <span class='assign token'>=</span> <span class='Regexp constant id'>Regexp</span><span class='dot token'>.</span><span class='escape identifier id'>escape</span><span class='lparen token'>(</span><span class='separator identifier id'>separator</span><span class='rparen token'>)</span>
      <span class='formatted_number identifier id'>formatted_number</span> <span class='assign token'>=</span> <span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='comma token'>,</span>
        <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='precision identifier id'>precision</span><span class='comma token'>,</span>
        <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='separator identifier id'>separator</span><span class='comma token'>,</span>
        <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='delimiter identifier id'>delimiter</span>
      <span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='dregexp node'>/(\d)(#{escaped_separator}[1-9]*)?0+\z/</span><span class='comma token'>,</span> <span class='string val'>'\1\2'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='dregexp node'>/#{escaped_separator}\z/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>
      <span class='storage_units_format identifier id'>storage_units_format</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/%n/</span><span class='comma token'>,</span> <span class='formatted_number identifier id'>formatted_number</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/%u/</span><span class='comma token'>,</span> <span class='unit identifier id'>unit</span><span class='rparen token'>)</span>
    <span class='rescue rescue kw'>rescue</span>
      <span class='number identifier id'>number</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>number_to_percentage</h3>
</div><div id="number_to_percentage-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>number_to_percentage</span><span class='args'>(number, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Formats a <tt>number</tt> as a percentage string (e.g., 65%). You can
customize the format in the <tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><tt>:precision</tt> - Sets the level of precision (defaults to 3).

</li>
<li><tt>:separator</tt> - Sets the separator between the units (defaults to
&quot;.&quot;).

</li>
<li><tt>:delimiter</tt> - Sets the thousands delimiter (defaults to
&quot;&quot;).

</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='number_to_percentage identifier id'>number_to_percentage</span><span class='lparen token'>(</span><span class='integer val'>100</span><span class='rparen token'>)</span>                                        <span class='comment val'># =&gt; 100.000%</span>
 <span class='number_to_percentage identifier id'>number_to_percentage</span><span class='lparen token'>(</span><span class='integer val'>100</span><span class='comma token'>,</span> <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span>                       <span class='comment val'># =&gt; 100%</span>
 <span class='number_to_percentage identifier id'>number_to_percentage</span><span class='lparen token'>(</span><span class='integer val'>1000</span><span class='comma token'>,</span> <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'.'</span><span class='comma token'>,</span> <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>','</span><span class='rparen token'>)</span> <span class='comment val'># =&gt; 1.000,000%</span>
 <span class='number_to_percentage identifier id'>number_to_percentage</span><span class='lparen token'>(</span><span class='float val'>302.24398923423</span><span class='comma token'>,</span> <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>5</span><span class='rparen token'>)</span>           <span class='comment val'># =&gt; 302.24399%</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 111</span>

<span class='def def kw'>def</span> <span class='number_to_percentage identifier id'>number_to_percentage</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='symbolize_keys! fid id'>symbolize_keys!</span>

  <span class='defaults identifier id'>defaults</span>   <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.format'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='percentage identifier id'>percentage</span> <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.percentage.format'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='defaults identifier id'>defaults</span>  <span class='assign token'>=</span> <span class='defaults identifier id'>defaults</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='percentage identifier id'>percentage</span><span class='rparen token'>)</span>

  <span class='precision identifier id'>precision</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:precision</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:precision</span><span class='rbrack token'>]</span>
  <span class='separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span>
  <span class='delimiter identifier id'>delimiter</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span>

  <span class='begin begin kw'>begin</span>
    <span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='comma token'>,</span>
      <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='precision identifier id'>precision</span><span class='comma token'>,</span>
      <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='separator identifier id'>separator</span><span class='comma token'>,</span>
      <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='delimiter identifier id'>delimiter</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>&quot;%&quot;</span>
  <span class='rescue rescue kw'>rescue</span>
    <span class='number identifier id'>number</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>number_to_phone</h3>
</div><div id="number_to_phone-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>number_to_phone</span><span class='args'>(number, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Formats a <tt>number</tt> into a US phone number (e.g., (555) 123-9876).
You can customize the format in the <tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><tt>:area_code</tt> - Adds parentheses around the area code.

</li>
<li><tt>:delimiter</tt> - Specifies the delimiter to use (defaults to
&quot;-&quot;).

</li>
<li><tt>:extension</tt> - Specifies an extension to add to the end of the
generated number.

</li>
<li><tt>:country_code</tt> - Sets the country code for the phone number.

</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='number_to_phone identifier id'>number_to_phone</span><span class='lparen token'>(</span><span class='integer val'>5551234</span><span class='rparen token'>)</span>                                           <span class='comment val'># =&gt; 555-1234</span>
 <span class='number_to_phone identifier id'>number_to_phone</span><span class='lparen token'>(</span><span class='integer val'>1235551234</span><span class='rparen token'>)</span>                                        <span class='comment val'># =&gt; 123-555-1234</span>
 <span class='number_to_phone identifier id'>number_to_phone</span><span class='lparen token'>(</span><span class='integer val'>1235551234</span><span class='comma token'>,</span> <span class='symbol val'>:area_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>                    <span class='comment val'># =&gt; (123) 555-1234</span>
 <span class='number_to_phone identifier id'>number_to_phone</span><span class='lparen token'>(</span><span class='integer val'>1235551234</span><span class='comma token'>,</span> <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span>                     <span class='comment val'># =&gt; 123 555 1234</span>
 <span class='number_to_phone identifier id'>number_to_phone</span><span class='lparen token'>(</span><span class='integer val'>1235551234</span><span class='comma token'>,</span> <span class='symbol val'>:area_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:extension</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>555</span><span class='rparen token'>)</span> <span class='comment val'># =&gt; (123) 555-1234 x 555</span>
 <span class='number_to_phone identifier id'>number_to_phone</span><span class='lparen token'>(</span><span class='integer val'>1235551234</span><span class='comma token'>,</span> <span class='symbol val'>:country_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span><span class='rparen token'>)</span>                    <span class='comment val'># =&gt; +1-123-555-1234</span>

 <span class='number_to_phone identifier id'>number_to_phone</span><span class='lparen token'>(</span><span class='integer val'>1235551234</span><span class='comma token'>,</span> <span class='symbol val'>:country_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='symbol val'>:extension</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1343</span><span class='comma token'>,</span> <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;.&quot;</span><span class='rparen token'>)</span>
 <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='float val'>+1.123</span><span class='float val'>.555.1234</span> <span class='x identifier id'>x</span> <span class='integer val'>1343</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 27</span>

<span class='def def kw'>def</span> <span class='number_to_phone identifier id'>number_to_phone</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='number identifier id'>number</span>       <span class='assign token'>=</span> <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span> <span class='unless unless_mod kw'>unless</span> <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='options identifier id'>options</span>      <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='symbolize_keys identifier id'>symbolize_keys</span>
  <span class='area_code identifier id'>area_code</span>    <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:area_code</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='nil nil kw'>nil</span>
  <span class='delimiter identifier id'>delimiter</span>    <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='string val'>&quot;-&quot;</span>
  <span class='extension identifier id'>extension</span>    <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:extension</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span> <span class='orop op'>||</span> <span class='nil nil kw'>nil</span>
  <span class='country_code identifier id'>country_code</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:country_code</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='nil nil kw'>nil</span>

  <span class='begin begin kw'>begin</span>
    <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
    <span class='str identifier id'>str</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;+#{country_code}#{delimiter}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='country_code identifier id'>country_code</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
    <span class='str identifier id'>str</span> <span class='lshft op'>&lt;&lt;</span> <span class='if if kw'>if</span> <span class='area_code identifier id'>area_code</span>
      <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/([0-9]{1,3})([0-9]{3})([0-9]{4}$)/</span><span class='comma token'>,</span><span class='dstring node'>&quot;(\\1) \\2#{delimiter}\\3&quot;</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/([0-9]{0,3})([0-9]{3})([0-9]{4})$/</span><span class='comma token'>,</span><span class='dstring node'>&quot;\\1#{delimiter}\\2#{delimiter}\\3&quot;</span><span class='rparen token'>)</span>
      <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='starts_with? fid id'>starts_with?</span><span class='lparen token'>(</span><span class='string val'>'-'</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='slice! fid id'>slice!</span><span class='lparen token'>(</span><span class='float val'>1</span><span class='dot2 op'>..</span><span class='integer val'>-1</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='number identifier id'>number</span>
    <span class='end end kw'>end</span>
    <span class='str identifier id'>str</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot; x #{extension}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='extension identifier id'>extension</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
    <span class='str identifier id'>str</span>
  <span class='rescue rescue kw'>rescue</span>
    <span class='number identifier id'>number</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>number_with_delimiter</h3>
</div><div id="number_with_delimiter-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>number_with_delimiter</span><span class='args'>(number, *args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Formats a <tt>number</tt> with grouped thousands using <tt>delimiter</tt>
(e.g., 12,324). You can customize the format in the <tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><tt>:delimiter</tt> - Sets the thousands delimiter (defaults to
&quot;,&quot;).

</li>
<li><tt>:separator</tt> - Sets the separator between the units (defaults to
&quot;.&quot;).

</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='number_with_delimiter identifier id'>number_with_delimiter</span><span class='lparen token'>(</span><span class='integer val'>12345678</span><span class='rparen token'>)</span>                        <span class='comment val'># =&gt; 12,345,678</span>
 <span class='number_with_delimiter identifier id'>number_with_delimiter</span><span class='lparen token'>(</span><span class='float val'>12345678.05</span><span class='rparen token'>)</span>                     <span class='comment val'># =&gt; 12,345,678.05</span>
 <span class='number_with_delimiter identifier id'>number_with_delimiter</span><span class='lparen token'>(</span><span class='integer val'>12345678</span><span class='comma token'>,</span> <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;.&quot;</span><span class='rparen token'>)</span>     <span class='comment val'># =&gt; 12.345.678</span>
 <span class='number_with_delimiter identifier id'>number_with_delimiter</span><span class='lparen token'>(</span><span class='integer val'>12345678</span><span class='comma token'>,</span> <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;,&quot;</span><span class='rparen token'>)</span>     <span class='comment val'># =&gt; 12,345,678</span>
 <span class='number_with_delimiter identifier id'>number_with_delimiter</span><span class='lparen token'>(</span><span class='float val'>98765432.98</span><span class='comma token'>,</span> <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot; &quot;</span><span class='comma token'>,</span> <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;,&quot;</span><span class='rparen token'>)</span>
 <span class='comment val'># =&gt; 98 765 432,98</span>
</pre>
<p>
You can still use <tt>number_with_delimiter</tt> with the old API that
accepts the <tt>delimiter</tt> as its optional second and the
<tt>separator</tt> as its optional third parameter:
</p>
<pre class="code">
 <span class='number_with_delimiter identifier id'>number_with_delimiter</span><span class='lparen token'>(</span><span class='integer val'>12345678</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span>                     <span class='comment val'># =&gt; 12 345.678</span>
 <span class='number_with_delimiter identifier id'>number_with_delimiter</span><span class='lparen token'>(</span><span class='float val'>12345678.05</span><span class='comma token'>,</span> <span class='string val'>&quot;.&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;,&quot;</span><span class='rparen token'>)</span>             <span class='comment val'># =&gt; 12.345.678,05</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 152</span>

<span class='def def kw'>def</span> <span class='number_with_delimiter identifier id'>number_with_delimiter</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='extract_options! fid id'>extract_options!</span>
  <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='symbolize_keys! fid id'>symbolize_keys!</span>

  <span class='defaults identifier id'>defaults</span> <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.format'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

  <span class='unless unless kw'>unless</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='ActiveSupport constant id'>ActiveSupport</span><span class='colon2 op'>::</span><span class='Deprecation constant id'>Deprecation</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span><span class='lparen token'>(</span><span class='string val'>'number_with_delimiter takes an option hash '</span> <span class='plus op'>+</span>
      <span class='string val'>'instead of separate delimiter and precision arguments.'</span><span class='comma token'>,</span> <span class='caller identifier id'>caller</span><span class='rparen token'>)</span>
    <span class='delimiter identifier id'>delimiter</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span>
    <span class='separator identifier id'>separator</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>

  <span class='delimiter identifier id'>delimiter</span> <span class='opasgn op'>||=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='separator identifier id'>separator</span> <span class='opasgn op'>||=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>

  <span class='begin begin kw'>begin</span>
    <span class='parts identifier id'>parts</span> <span class='assign token'>=</span> <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'.'</span><span class='rparen token'>)</span>
    <span class='parts identifier id'>parts</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/(\d)(?=(\d\d\d)+(?!\d))/</span><span class='comma token'>,</span> <span class='dstring node'>&quot;\\1#{delimiter}&quot;</span><span class='rparen token'>)</span>
    <span class='parts identifier id'>parts</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='separator identifier id'>separator</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span>
    <span class='number identifier id'>number</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>number_with_precision</h3>
</div><div id="number_with_precision-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>number_with_precision</span><span class='args'>(number, *args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Formats a <tt>number</tt> with the specified level of <tt>:precision</tt>
(e.g., 112.32 has a precision of 2). You can customize the format in the
<tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><tt>:precision</tt> - Sets the level of precision (defaults to 3).

</li>
<li><tt>:separator</tt> - Sets the separator between the units (defaults to
&quot;.&quot;).

</li>
<li><tt>:delimiter</tt> - Sets the thousands delimiter (defaults to
&quot;&quot;).

</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='float val'>111.2345</span><span class='rparen token'>)</span>                    <span class='comment val'># =&gt; 111.235</span>
 <span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='float val'>111.2345</span><span class='comma token'>,</span> <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span><span class='rparen token'>)</span>   <span class='comment val'># =&gt; 111.23</span>
 <span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='integer val'>13</span><span class='comma token'>,</span> <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>5</span><span class='rparen token'>)</span>         <span class='comment val'># =&gt; 13.00000</span>
 <span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='float val'>389.32314</span><span class='comma token'>,</span> <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span>  <span class='comment val'># =&gt; 389</span>
 <span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='float val'>1111.2345</span><span class='comma token'>,</span> <span class='symbol val'>:precision</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span><span class='comma token'>,</span> <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>','</span><span class='comma token'>,</span> <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'.'</span><span class='rparen token'>)</span>
 <span class='comment val'># =&gt; 1.111,23</span>
</pre>
<p>
You can still use <tt>number_with_precision</tt> with the old API that
accepts the <tt>precision</tt> as its optional second parameter:
</p>
<pre class="code">
  <span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='float val'>111.2345</span><span class='comma token'>,</span> <span class='integer val'>2</span><span class='rparen token'>)</span>   <span class='comment val'># =&gt; 111.23</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 196</span>

<span class='def def kw'>def</span> <span class='number_with_precision identifier id'>number_with_precision</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='extract_options! fid id'>extract_options!</span>
  <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='symbolize_keys! fid id'>symbolize_keys!</span>

  <span class='defaults identifier id'>defaults</span>           <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.format'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='precision_defaults identifier id'>precision_defaults</span> <span class='assign token'>=</span> <span class='I18n constant id'>I18n</span><span class='dot token'>.</span><span class='translate identifier id'>translate</span><span class='lparen token'>(</span><span class='symbol val'>:'number.precision.format'</span><span class='comma token'>,</span> <span class='symbol val'>:locale</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:locale</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                                                  <span class='symbol val'>:raise</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='defaults identifier id'>defaults</span>           <span class='assign token'>=</span> <span class='defaults identifier id'>defaults</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='precision_defaults identifier id'>precision_defaults</span><span class='rparen token'>)</span>

  <span class='unless unless kw'>unless</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='ActiveSupport constant id'>ActiveSupport</span><span class='colon2 op'>::</span><span class='Deprecation constant id'>Deprecation</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span><span class='lparen token'>(</span><span class='string val'>'number_with_precision takes an option hash '</span> <span class='plus op'>+</span>
      <span class='string val'>'instead of a separate precision argument.'</span><span class='comma token'>,</span> <span class='caller identifier id'>caller</span><span class='rparen token'>)</span>
    <span class='precision identifier id'>precision</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:precision</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>

  <span class='precision identifier id'>precision</span> <span class='opasgn op'>||=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:precision</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:precision</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='separator identifier id'>separator</span> <span class='opasgn op'>||=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:separator</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='delimiter identifier id'>delimiter</span> <span class='opasgn op'>||=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='defaults identifier id'>defaults</span><span class='lbrack token'>[</span><span class='symbol val'>:delimiter</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>

  <span class='begin begin kw'>begin</span>
    <span class='rounded_number identifier id'>rounded_number</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='rparen token'>)</span> <span class='mult op'>*</span> <span class='lparen token'>(</span><span class='integer val'>10</span> <span class='pow op'>**</span> <span class='precision identifier id'>precision</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='round identifier id'>round</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span> <span class='div op'>/</span> <span class='integer val'>10</span> <span class='pow op'>**</span> <span class='precision identifier id'>precision</span>
    <span class='number_with_delimiter identifier id'>number_with_delimiter</span><span class='lparen token'>(</span><span class='dstring node'>&quot;%01.#{precision}f&quot;</span> <span class='mod op'>%</span> <span class='rounded_number identifier id'>rounded_number</span><span class='comma token'>,</span>
      <span class='symbol val'>:separator</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='separator identifier id'>separator</span><span class='comma token'>,</span>
      <span class='symbol val'>:delimiter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='delimiter identifier id'>delimiter</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span>
    <span class='number identifier id'>number</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>