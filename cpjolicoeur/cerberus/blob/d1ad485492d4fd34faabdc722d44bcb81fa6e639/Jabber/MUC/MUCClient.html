<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>cpjolicoeur's cerberus - Class: Jabber::MUC::MUCClient - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/cpjolicoeur/commits/cerberus/master" rel="alternate" title="Recent Commits to cerberus:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("cpjolicoeur", "cerberus", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("cpjolicoeur", "cerberus", "d1ad485492d4fd34faabdc722d44bcb81fa6e639", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/cpjolicoeur/cerberus/tree/">Source</a></li>
            <li class=""><a href="http://github.com/cpjolicoeur/cerberus/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/cpjolicoeur/cerberus/network">Network</a></li>            
            <li class=""><a href="http://github.com/cpjolicoeur/cerberus/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/cpjolicoeur/cerberus">Wiki</a></li>
            <li class=""><a href="http://github.com/cpjolicoeur/cerberus/graphs">Graphs</a></li>                    
            <li class="active"><a href="/cpjolicoeur/cerberus">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/cpjolicoeur">cpjolicoeur</a> / <b><a href="http://github.com/cpjolicoeur/cerberus/tree">cerberus</a></b>        
                <a id="namespaces_button" rel="cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Jabber_MUC_MUCClient">
  <h1>Class: Jabber::MUC::MUCClient</h1>
  <div class="section docstring">
  <p>
The MUCClient Helper handles low-level stuff of the Multi-User Chat (JEP
0045).
</p>
<p>
Use one instance per room.
</p>
<p>
Note that one client cannot join a single room multiple times. At least the
clients&#8217; resources must be different. This is a protocol design
issue. But don&#8217;t consider it as a bug, it is just a clone-preventing
feature.
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">jid</td>
          <td class="readwrite">
            [<span id='jid-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
MUC JID
</p>
<table>
<tr><td valign="top">jid:</td><td>[JID] room@component/nick.

</td></tr>
</table>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">my_jid</td>
          <td class="readwrite">
            [<span id='my_jid-instance_method'>R</span><span id='my_jid=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sender JID, set this to use MUCClient from Components
</p>
<table>
<tr><td valign="top">my_jid:</td><td>[JID] Defaults to nil.

</td></tr>
</table>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">roster</td>
          <td class="readwrite">
            [<span id='roster-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
MUC room roster
</p>
<table>
<tr><td valign="top">roster:</td><td>[Hash] of [String] Nick =&gt; [Presence].

</td></tr>
</table>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(stream)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Initialize a MUCClient
</p>
<p>
Call MUCClient#join <b>after</b> you have registered your callbacks to
avoid reception of stanzas after joining and before registration of
callbacks.
</p>
<table>
<tr><td valign="top">stream:</td><td>[Stream] to operate on

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 45</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L45">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='stream identifier id'>stream</span><span class='rparen token'>)</span>
  <span class='comment val'># Attributes initialization</span>
  <span class='@stream ivar id'>@stream</span> <span class='assign token'>=</span> <span class='stream identifier id'>stream</span>
  <span class='@my_jid ivar id'>@my_jid</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='@jid ivar id'>@jid</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='@roster ivar id'>@roster</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='@roster_lock ivar id'>@roster_lock</span> <span class='assign token'>=</span> <span class='Mutex constant id'>Mutex</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

  <span class='@active ivar id'>@active</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>

  <span class='@join_cbs ivar id'>@join_cbs</span> <span class='assign token'>=</span> <span class='CallbackList constant id'>CallbackList</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='@leave_cbs ivar id'>@leave_cbs</span> <span class='assign token'>=</span> <span class='CallbackList constant id'>CallbackList</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='@presence_cbs ivar id'>@presence_cbs</span> <span class='assign token'>=</span> <span class='CallbackList constant id'>CallbackList</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='@message_cbs ivar id'>@message_cbs</span> <span class='assign token'>=</span> <span class='CallbackList constant id'>CallbackList</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='@private_message_cbs ivar id'>@private_message_cbs</span> <span class='assign token'>=</span> <span class='CallbackList constant id'>CallbackList</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#active-3F-instance_method">#active?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is the MUC client active?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_join_callback-instance_method">#add_join_callback</span><span class='args'>(prio = 0, ref = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Add a callback for &lt;presence/&gt; stanzas indicating availability of a
MUC participant.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_leave_callback-instance_method">#add_leave_callback</span><span class='args'>(prio = 0, ref = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Add a callback for &lt;presence/&gt; stanzas indicating unavailability of a
MUC participant.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_message_callback-instance_method">#add_message_callback</span><span class='args'>(prio = 0, ref = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Add a callback for &lt;message/&gt; stanza directed to the whole room.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_presence_callback-instance_method">#add_presence_callback</span><span class='args'>(prio = 0, ref = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Add a callback for a &lt;presence/&gt; stanza which is neither a join nor a
leave.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_private_message_callback-instance_method">#add_private_message_callback</span><span class='args'>(prio = 0, ref = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Add a callback for &lt;message/&gt; stanza with type=&#8217;chat&#8217;.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#configure-instance_method">#configure</span><span class='args'>(options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Use this method to configure a MUC room of which you are the owner.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#exit-instance_method">#exit</span><span class='args'>(reason = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Exit the room.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#from_room-3F-instance_method">#from_room?</span><span class='args'>(jid)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Does this JID belong to that room?
</p>
<table>
<tr><td valign="top">jid:</td><td>[JID]

</td></tr>
<tr><td valign="top">result:</td><td>[true] or [false].

</td></tr>
</table>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get_room_configuration-instance_method">#get_room_configuration</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#join-instance_method">#join</span><span class='args'>(jid, password = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Join a room.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#nick-instance_method">#nick</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The MUCClient&#8217;s own nick (= resource)
</p>
<table>
<tr><td valign="top">result:</td><td>[String] Nickname.

</td></tr>
</table>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#nick-3D-instance_method">#nick=</span><span class='args'>(new_nick)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Change nick.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#owner-3F-instance_method">#owner?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#room-instance_method">#room</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The room name (= node)
</p>
<table>
<tr><td valign="top">result:</td><td>[String] Room name.

</td></tr>
</table>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#send-instance_method">#send</span><span class='args'>(stanza, to = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Send a stanza to the room.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#send_affiliations-instance_method">#send_affiliations</span><span class='args'>(items)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Push a list of new affiliations to the room
</p>
<table>
<tr><td valign="top">items:</td><td>[Array] of, or single [IqQueryMUCAdminItem].

</td></tr>
</table>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#submit_room_configuration-instance_method">#submit_room_configuration</span><span class='args'>(options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>active?</h3>
</div><div id="active-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>active?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is the MUC client active?
</p>
<p>
This is false after initialization, true after joining and false after
exit/kick
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 161</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L161">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">161
162
163</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='active? fid id'>active?</span>
  <span class='@active ivar id'>@active</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>add_join_callback</h3>
</div><div id="add_join_callback-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_join_callback</span><span class='args'>(prio = 0, ref = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Add a callback for &lt;presence/&gt; stanzas indicating availability of a
MUC participant
</p>
<p>
This callback will <b>not</b> be called for initial presences when a client
joins a room, but only for the presences afterwards.
</p>
<p>
The callback will be called from MUCClient#handle_presence with one
argument: the &lt;presence/&gt; stanza. Note that this stanza will have
been already inserted into MUCClient#roster.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 268</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L268">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">268
269
270</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_join_callback identifier id'>add_join_callback</span><span class='lparen token'>(</span><span class='prio identifier id'>prio</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@join_cbs ivar id'>@join_cbs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='prio identifier id'>prio</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span><span class='comma token'>,</span> <span class='block identifier id'>block</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>add_leave_callback</h3>
</div><div id="add_leave_callback-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_leave_callback</span><span class='args'>(prio = 0, ref = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Add a callback for &lt;presence/&gt; stanzas indicating unavailability of a
MUC participant
</p>
<p>
The callback will be called with one argument: the &lt;presence/&gt;
stanza.
</p>
<p>
Note that this is called just <b>before</b> the stanza is removed from
MUCClient#roster, so it is still possible to see the last presence in the
given block.
</p>
<p>
If the presence&#8217;s origin is your MUC JID, the MUCClient will be
deactivated <b>afterwards</b>.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 284</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L284">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">284
285
286</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_leave_callback identifier id'>add_leave_callback</span><span class='lparen token'>(</span><span class='prio identifier id'>prio</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@leave_cbs ivar id'>@leave_cbs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='prio identifier id'>prio</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span><span class='comma token'>,</span> <span class='block identifier id'>block</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>add_message_callback</h3>
</div><div id="add_message_callback-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_message_callback</span><span class='args'>(prio = 0, ref = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Add a callback for &lt;message/&gt; stanza directed to the whole room.
</p>
<p>
See MUCClient#add_private_message_callback for private messages between MUC
participants.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 301</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L301">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">301
302
303</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_message_callback identifier id'>add_message_callback</span><span class='lparen token'>(</span><span class='prio identifier id'>prio</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@message_cbs ivar id'>@message_cbs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='prio identifier id'>prio</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span><span class='comma token'>,</span> <span class='block identifier id'>block</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>add_presence_callback</h3>
</div><div id="add_presence_callback-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_presence_callback</span><span class='args'>(prio = 0, ref = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Add a callback for a &lt;presence/&gt; stanza which is neither a join nor a
leave. This will be called when a room participant simply changes his
status.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 292</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L292">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">292
293
294</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_presence_callback identifier id'>add_presence_callback</span><span class='lparen token'>(</span><span class='prio identifier id'>prio</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@presence_cbs ivar id'>@presence_cbs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='prio identifier id'>prio</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span><span class='comma token'>,</span> <span class='block identifier id'>block</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>add_private_message_callback</h3>
</div><div id="add_private_message_callback-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_private_message_callback</span><span class='args'>(prio = 0, ref = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Add a callback for &lt;message/&gt; stanza with type=&#8217;chat&#8217;.
</p>
<p>
These stanza are normally not broadcasted to all room occupants but are
some sort of private messaging.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 310</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L310">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">310
311
312</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_private_message_callback identifier id'>add_private_message_callback</span><span class='lparen token'>(</span><span class='prio identifier id'>prio</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@private_message_cbs ivar id'>@private_message_cbs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='prio identifier id'>prio</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span><span class='comma token'>,</span> <span class='block identifier id'>block</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>configure</h3>
</div><div id="configure-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>configure</span><span class='args'>(options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Use this method to configure a MUC room of which you are the owner.
</p>
<table>
<tr><td valign="top">options:</td><td>[Hash] where keys are the features of the room you wish

</td></tr>
</table>
<p>
to configure. See
http://www.xmpp.org/extensions/xep-0045.html#registrar-formtype-owner
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 399</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L399">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">399
400
401
402</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='configure identifier id'>configure</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='get_room_configuration identifier id'>get_room_configuration</span>
  <span class='submit_room_configuration identifier id'>submit_room_configuration</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>exit</h3>
</div><div id="exit-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>exit</span><span class='args'>(reason = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Exit the room
</p>
<ul>
<li>Sends presence with type=&#8217;unavailable&#8217; with an optional reason
in <tt>&lt;status/&gt;</tt>,

</li>
<li>then waits for a reply from the MUC component (will be processed by
leave-callbacks),

</li>
<li>then deletes callbacks from the stream.

</li>
</ul>
<table>
<tr><td valign="top">reason:</td><td>[String] Optional custom exit message

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 130</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L130">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='exit identifier id'>exit</span><span class='lparen token'>(</span><span class='reason identifier id'>reason</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='active? fid id'>active?</span>
    <span class='raise identifier id'>raise</span> <span class='string val'>&quot;MUCClient hasn't yet joined&quot;</span>
  <span class='end end kw'>end</span>

  <span class='pres identifier id'>pres</span> <span class='assign token'>=</span> <span class='Presence constant id'>Presence</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='pres identifier id'>pres</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='assign token'>=</span> <span class='symbol val'>:unavailable</span>
  <span class='pres identifier id'>pres</span><span class='dot token'>.</span><span class='to identifier id'>to</span> <span class='assign token'>=</span> <span class='jid identifier id'>jid</span>
  <span class='pres identifier id'>pres</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='assign token'>=</span> <span class='@my_jid ivar id'>@my_jid</span>
  <span class='pres identifier id'>pres</span><span class='dot token'>.</span><span class='status identifier id'>status</span> <span class='assign token'>=</span> <span class='reason identifier id'>reason</span> <span class='if if_mod kw'>if</span> <span class='reason identifier id'>reason</span>
  <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='pres identifier id'>pres</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span>
    <span class='Jabber constant id'>Jabber</span><span class='colon2 op'>::</span><span class='debuglog identifier id'>debuglog</span> <span class='dstring node'>&quot;exit: #{r.to_s.inspect}&quot;</span>
    <span class='if if kw'>if</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Presence constant id'>Presence</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='eq op'>==</span> <span class='symbol val'>:unavailable</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='eq op'>==</span> <span class='jid identifier id'>jid</span>
      <span class='@leave_cbs ivar id'>@leave_cbs</span><span class='dot token'>.</span><span class='process identifier id'>process</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='rparen token'>)</span>
      <span class='true true kw'>true</span>
    <span class='else else kw'>else</span>
      <span class='false false kw'>false</span>
    <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>

  <span class='deactivate identifier id'>deactivate</span>

  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>from_room?</h3>
</div><div id="from_room-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>from_room?</span><span class='args'>(jid)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Does this JID belong to that room?
</p>
<table>
<tr><td valign="top">jid:</td><td>[JID]

</td></tr>
<tr><td valign="top">result:</td><td>[true] or [false]

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 318</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L318">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">318
319
320</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='from_room? fid id'>from_room?</span><span class='lparen token'>(</span><span class='jid identifier id'>jid</span><span class='rparen token'>)</span>
  <span class='@jid ivar id'>@jid</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span> <span class='eq op'>==</span> <span class='jid identifier id'>jid</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get_room_configuration</h3>
</div><div id="get_room_configuration-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get_room_configuration</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 404</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L404">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='get_room_configuration identifier id'>get_room_configuration</span>
  <span class='raise identifier id'>raise</span> <span class='string val'>'You are not the owner'</span> <span class='unless unless_mod kw'>unless</span> <span class='owner? fid id'>owner?</span>

  <span class='iq identifier id'>iq</span> <span class='assign token'>=</span> <span class='Iq constant id'>Iq</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:get</span><span class='comma token'>,</span> <span class='jid identifier id'>jid</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span><span class='rparen token'>)</span>
  <span class='iq identifier id'>iq</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='assign token'>=</span> <span class='my_jid identifier id'>my_jid</span>
  <span class='iq identifier id'>iq</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='IqQueryMUCOwner constant id'>IqQueryMUCOwner</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='rparen token'>)</span>

  <span class='fields identifier id'>fields</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

  <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='send_with_id identifier id'>send_with_id</span><span class='lparen token'>(</span><span class='iq identifier id'>iq</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='answer identifier id'>answer</span><span class='bitor op'>|</span>
    <span class='raise identifier id'>raise</span> <span class='string val'>&quot;Configuration not possible for this room&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='query identifier id'>query</span> <span class='andop op'>&amp;&amp;</span> <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='query identifier id'>query</span><span class='dot token'>.</span><span class='x identifier id'>x</span><span class='lparen token'>(</span><span class='Dataforms constant id'>Dataforms</span><span class='colon2 op'>::</span><span class='XData constant id'>XData</span><span class='rparen token'>)</span>

    <span class='answer identifier id'>answer</span><span class='dot token'>.</span><span class='query identifier id'>query</span><span class='dot token'>.</span><span class='x identifier id'>x</span><span class='lparen token'>(</span><span class='Dataforms constant id'>Dataforms</span><span class='colon2 op'>::</span><span class='XData constant id'>XData</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='fields identifier id'>fields</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='field identifier id'>field</span><span class='bitor op'>|</span>
      <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='var identifier id'>var</span> <span class='assign token'>=</span> <span class='field identifier id'>field</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span><span class='lbrack token'>[</span><span class='string val'>'var'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
        <span class='fields identifier id'>fields</span> <span class='lshft op'>&lt;&lt;</span> <span class='var identifier id'>var</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='fields identifier id'>fields</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>join</h3>
</div><div id="join-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>join</span><span class='args'>(jid, password = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Join a room
</p>
<p>
This registers its own callbacks on the stream provided to initialize and
sends initial presence to the room. May throw ServerError if joining fails.
</p>
<table>
<tr><td valign="top">jid:</td><td>[JID] room@component/nick

</td></tr>
<tr><td valign="top">password:</td><td>[String] Optional password

</td></tr>
<tr><td valign="top">return:</td><td>[MUCClient] self (chain-able)

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 72</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L72">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='jid identifier id'>jid</span><span class='comma token'>,</span> <span class='password identifier id'>password</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='active? fid id'>active?</span>
    <span class='raise identifier id'>raise</span> <span class='string val'>&quot;MUCClient already active&quot;</span>
  <span class='end end kw'>end</span>

  <span class='@jid ivar id'>@jid</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='jid identifier id'>jid</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='JID constant id'>JID</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='jid identifier id'>jid</span> <span class='colon op'>:</span> <span class='JID constant id'>JID</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='jid identifier id'>jid</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='activate identifier id'>activate</span>

  <span class='comment val'># Joining</span>
  <span class='pres identifier id'>pres</span> <span class='assign token'>=</span> <span class='Presence constant id'>Presence</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='pres identifier id'>pres</span><span class='dot token'>.</span><span class='to identifier id'>to</span> <span class='assign token'>=</span> <span class='@jid ivar id'>@jid</span>
  <span class='pres identifier id'>pres</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='assign token'>=</span> <span class='@my_jid ivar id'>@my_jid</span>
  <span class='xmuc identifier id'>xmuc</span> <span class='assign token'>=</span> <span class='XMUC constant id'>XMUC</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='xmuc identifier id'>xmuc</span><span class='dot token'>.</span><span class='password identifier id'>password</span> <span class='assign token'>=</span> <span class='password identifier id'>password</span>
  <span class='pres identifier id'>pres</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='xmuc identifier id'>xmuc</span><span class='rparen token'>)</span>

  <span class='comment val'># We don't use Stream#send_with_id here as it's unknown</span>
  <span class='comment val'># if the MUC component *always* uses our stanza id.</span>
  <span class='error identifier id'>error</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='pres identifier id'>pres</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='from_room? fid id'>from_room?</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='dot token'>.</span><span class='from identifier id'>from</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Presence constant id'>Presence</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='eq op'>==</span> <span class='symbol val'>:error</span>
      <span class='comment val'># Error from room</span>
      <span class='error identifier id'>error</span> <span class='assign token'>=</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='error identifier id'>error</span>
      <span class='true true kw'>true</span>
    <span class='comment val'># type='unavailable' may occur when the MUC kills our previous instance,</span>
    <span class='comment val'># but all join-failures should be type='error'</span>
    <span class='elsif elsif kw'>elsif</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='eq op'>==</span> <span class='jid identifier id'>jid</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Presence constant id'>Presence</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='neq op'>!=</span> <span class='symbol val'>:unavailable</span>
      <span class='comment val'># Our own presence reflected back - success</span>
      <span class='if if kw'>if</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='x identifier id'>x</span><span class='lparen token'>(</span><span class='XMUCUser constant id'>XMUCUser</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='lparen token'>(</span><span class='i identifier id'>i</span> <span class='assign token'>=</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='x identifier id'>x</span><span class='lparen token'>(</span><span class='XMUCUser constant id'>XMUCUser</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='items identifier id'>items</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rparen token'>)</span>
        <span class='@affiliation ivar id'>@affiliation</span> <span class='assign token'>=</span> <span class='i identifier id'>i</span><span class='dot token'>.</span><span class='affiliation identifier id'>affiliation</span>  <span class='comment val'># we're interested in if it's :owner</span>
        <span class='@role ivar id'>@role</span> <span class='assign token'>=</span> <span class='i identifier id'>i</span><span class='dot token'>.</span><span class='role identifier id'>role</span>                <span class='comment val'># :moderator ?</span>
      <span class='end end kw'>end</span>

      <span class='handle_presence identifier id'>handle_presence</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='comma token'>,</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>
      <span class='true true kw'>true</span>
    <span class='else else kw'>else</span>
      <span class='comment val'># Everything else</span>
      <span class='false false kw'>false</span>
    <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>

  <span class='if if kw'>if</span> <span class='error identifier id'>error</span>
    <span class='deactivate identifier id'>deactivate</span>
    <span class='raise identifier id'>raise</span> <span class='ServerError constant id'>ServerError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='error identifier id'>error</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>nick</h3>
</div><div id="nick-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>nick</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The MUCClient&#8217;s own nick (= resource)
</p>
<table>
<tr><td valign="top">result:</td><td>[String] Nickname

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 169</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L169">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">169
170
171</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='nick identifier id'>nick</span>
  <span class='@jid ivar id'>@jid</span> <span class='question op'>?</span> <span class='@jid ivar id'>@jid</span><span class='dot token'>.</span><span class='resource identifier id'>resource</span> <span class='colon op'>:</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>nick=</h3>
</div><div id="nick-3D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>nick=</span><span class='args'>(new_nick)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Change nick
</p>
<p>
Threading is, again, suggested. This method waits for two &lt;presence/&gt;
stanzas, one indicating unavailabilty of the old transient JID, one
indicating availability of the new transient JID.
</p>
<p>
If the service denies nick-change, ServerError will be raised.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 182</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L182">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='nick= identifier id'>nick=</span><span class='lparen token'>(</span><span class='new_nick identifier id'>new_nick</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='active? fid id'>active?</span>
    <span class='raise identifier id'>raise</span> <span class='string val'>&quot;MUCClient not active&quot;</span>
  <span class='end end kw'>end</span>

  <span class='new_jid identifier id'>new_jid</span> <span class='assign token'>=</span> <span class='JID constant id'>JID</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='@jid ivar id'>@jid</span><span class='dot token'>.</span><span class='node identifier id'>node</span><span class='comma token'>,</span> <span class='@jid ivar id'>@jid</span><span class='dot token'>.</span><span class='domain identifier id'>domain</span><span class='comma token'>,</span> <span class='new_nick identifier id'>new_nick</span><span class='rparen token'>)</span>

  <span class='comment val'># Joining</span>
  <span class='pres identifier id'>pres</span> <span class='assign token'>=</span> <span class='Presence constant id'>Presence</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='pres identifier id'>pres</span><span class='dot token'>.</span><span class='to identifier id'>to</span> <span class='assign token'>=</span> <span class='new_jid identifier id'>new_jid</span>
  <span class='pres identifier id'>pres</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='assign token'>=</span> <span class='@my_jid ivar id'>@my_jid</span>

  <span class='error identifier id'>error</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='comment val'># Keeping track of the two stanzas enables us to process stanzas</span>
  <span class='comment val'># which don't arrive in the order specified by JEP-0045</span>
  <span class='presence_unavailable identifier id'>presence_unavailable</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='presence_available identifier id'>presence_available</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='comment val'># We don't use Stream#send_with_id here as it's unknown</span>
  <span class='comment val'># if the MUC component *always* uses our stanza id.</span>
  <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='pres identifier id'>pres</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='from_room? fid id'>from_room?</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='dot token'>.</span><span class='from identifier id'>from</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Presence constant id'>Presence</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='eq op'>==</span> <span class='symbol val'>:error</span>
      <span class='comment val'># Error from room</span>
      <span class='error identifier id'>error</span> <span class='assign token'>=</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='error identifier id'>error</span>
    <span class='elsif elsif kw'>elsif</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='eq op'>==</span> <span class='@jid ivar id'>@jid</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Presence constant id'>Presence</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='eq op'>==</span> <span class='symbol val'>:unavailable</span> <span class='and and kw'>and</span>
          <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='x identifier id'>x</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='x identifier id'>x</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='XMUCUser constant id'>XMUCUser</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='x identifier id'>x</span><span class='dot token'>.</span><span class='status_code identifier id'>status_code</span> <span class='eq op'>==</span> <span class='integer val'>303</span>
      <span class='comment val'># Old JID is offline, but wait for the new JID and let stanza be handled</span>
      <span class='comment val'># by the standard callback</span>
      <span class='presence_unavailable identifier id'>presence_unavailable</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
      <span class='handle_presence identifier id'>handle_presence</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='rparen token'>)</span>
    <span class='elsif elsif kw'>elsif</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='eq op'>==</span> <span class='new_jid identifier id'>new_jid</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Presence constant id'>Presence</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='neq op'>!=</span> <span class='symbol val'>:unavailable</span>
      <span class='comment val'># Our own presence reflected back - success</span>
      <span class='presence_available identifier id'>presence_available</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
      <span class='handle_presence identifier id'>handle_presence</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='if if kw'>if</span> <span class='error identifier id'>error</span> <span class='or or kw'>or</span> <span class='lparen token'>(</span><span class='presence_available identifier id'>presence_available</span> <span class='and and kw'>and</span> <span class='presence_unavailable identifier id'>presence_unavailable</span><span class='rparen token'>)</span>
      <span class='true true kw'>true</span>
    <span class='else else kw'>else</span>
      <span class='false false kw'>false</span>
    <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>

  <span class='if if kw'>if</span> <span class='error identifier id'>error</span>
    <span class='raise identifier id'>raise</span> <span class='ServerError constant id'>ServerError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='error identifier id'>error</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Apply new JID</span>
  <span class='@jid ivar id'>@jid</span> <span class='assign token'>=</span> <span class='new_jid identifier id'>new_jid</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>owner?</h3>
</div><div id="owner-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>owner?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 390</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L390">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">390
391
392</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='owner? fid id'>owner?</span>
  <span class='@affiliation ivar id'>@affiliation</span> <span class='eq op'>==</span> <span class='symbol val'>:owner</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>room</h3>
</div><div id="room-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>room</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The room name (= node)
</p>
<table>
<tr><td valign="top">result:</td><td>[String] Room name

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 236</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L236">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">236
237
238</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='room identifier id'>room</span>
  <span class='@jid ivar id'>@jid</span> <span class='question op'>?</span> <span class='@jid ivar id'>@jid</span><span class='dot token'>.</span><span class='node identifier id'>node</span> <span class='colon op'>:</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>send</h3>
</div><div id="send-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>send</span><span class='args'>(stanza, to = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Send a stanza to the room
</p>
<p>
If stanza is a Jabber::Message, <tt>stanza.type</tt> will be automatically
set to :groupchat if directed to room or :chat if directed to participant.
</p>
<table>
<tr><td valign="top">stanza:</td><td>[XMPPStanza] to send

</td></tr>
<tr><td valign="top">to:</td><td>[String] Stanza destination recipient, or room if <tt>nil</tt>

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 248</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L248">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">248
249
250
251
252
253
254
255</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='stanza identifier id'>stanza</span><span class='comma token'>,</span> <span class='to identifier id'>to</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='stanza identifier id'>stanza</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span> <span class='Message constant id'>Message</span>
    <span class='stanza identifier id'>stanza</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='assign token'>=</span> <span class='to identifier id'>to</span> <span class='integer val'>? </span><span class='symbol val'>:chat</span> <span class='colon op'>:</span> <span class='symbol val'>:groupchat</span>
  <span class='end end kw'>end</span>
  <span class='stanza identifier id'>stanza</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='assign token'>=</span> <span class='@my_jid ivar id'>@my_jid</span>
  <span class='stanza identifier id'>stanza</span><span class='dot token'>.</span><span class='to identifier id'>to</span> <span class='assign token'>=</span> <span class='JID constant id'>JID</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='jid identifier id'>jid</span><span class='dot token'>.</span><span class='node identifier id'>node</span><span class='comma token'>,</span> <span class='jid identifier id'>jid</span><span class='dot token'>.</span><span class='domain identifier id'>domain</span><span class='comma token'>,</span> <span class='to identifier id'>to</span><span class='rparen token'>)</span>
  <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='stanza identifier id'>stanza</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>send_affiliations</h3>
</div><div id="send_affiliations-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>send_affiliations</span><span class='args'>(items)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Push a list of new affiliations to the room
</p>
<table>
<tr><td valign="top">items:</td><td>[Array] of, or single [IqQueryMUCAdminItem]

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 448</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L448">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">448
449
450
451
452
453
454
455
456
457
458
459</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='send_affiliations identifier id'>send_affiliations</span><span class='lparen token'>(</span><span class='items identifier id'>items</span><span class='rparen token'>)</span>
  <span class='iq identifier id'>iq</span> <span class='assign token'>=</span> <span class='Iq constant id'>Iq</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:set</span><span class='comma token'>,</span> <span class='jid identifier id'>jid</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span><span class='rparen token'>)</span>
  <span class='iq identifier id'>iq</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='assign token'>=</span> <span class='my_jid identifier id'>my_jid</span>
  <span class='iq identifier id'>iq</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='IqQueryMUCAdmin constant id'>IqQueryMUCAdmin</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='rparen token'>)</span>

  <span class='items identifier id'>items</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='item identifier id'>item</span><span class='rbrack token'>]</span> <span class='unless unless_mod kw'>unless</span> <span class='items identifier id'>items</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span> <span class='Array constant id'>Array</span>
  <span class='items identifier id'>items</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='item identifier id'>item</span><span class='bitor op'>|</span>
    <span class='iq identifier id'>iq</span><span class='dot token'>.</span><span class='query identifier id'>query</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='item identifier id'>item</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span>

  <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='send_with_id identifier id'>send_with_id</span><span class='lparen token'>(</span><span class='iq identifier id'>iq</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>submit_room_configuration</h3>
</div><div id="submit_room_configuration-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>submit_room_configuration</span><span class='args'>(options)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb', line 426</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/cpjolicoeur/cerberus/blob/d1ad485492d4fd34faabdc722d44bcb81fa6e639/lib/vendor/xmpp4r/lib/xmpp4r/muc/helper/mucclient.rb#L426">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='submit_room_configuration identifier id'>submit_room_configuration</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='comment val'># fill out the reply form</span>
  <span class='iq identifier id'>iq</span> <span class='assign token'>=</span> <span class='Iq constant id'>Iq</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:set</span><span class='comma token'>,</span> <span class='jid identifier id'>jid</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span><span class='rparen token'>)</span>
  <span class='iq identifier id'>iq</span><span class='dot token'>.</span><span class='from identifier id'>from</span> <span class='assign token'>=</span> <span class='my_jid identifier id'>my_jid</span>
  <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='IqQueryMUCOwner constant id'>IqQueryMUCOwner</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='form identifier id'>form</span> <span class='assign token'>=</span> <span class='Dataforms constant id'>Dataforms</span><span class='colon2 op'>::</span><span class='XData constant id'>XData</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='form identifier id'>form</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='assign token'>=</span> <span class='symbol val'>:submit</span>
  <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='var identifier id'>var</span><span class='comma token'>,</span> <span class='values identifier id'>values</span><span class='bitor op'>|</span>
    <span class='field identifier id'>field</span> <span class='assign token'>=</span> <span class='Dataforms constant id'>Dataforms</span><span class='colon2 op'>::</span><span class='XDataField constant id'>XDataField</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
    <span class='values identifier id'>values</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='values identifier id'>values</span><span class='rbrack token'>]</span> <span class='unless unless_mod kw'>unless</span> <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span>
    <span class='field identifier id'>field</span><span class='dot token'>.</span><span class='var identifier id'>var</span><span class='comma token'>,</span> <span class='field identifier id'>field</span><span class='dot token'>.</span><span class='values identifier id'>values</span> <span class='assign token'>=</span> <span class='var identifier id'>var</span><span class='comma token'>,</span> <span class='values identifier id'>values</span>
    <span class='form identifier id'>form</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='field identifier id'>field</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='form identifier id'>form</span><span class='rparen token'>)</span>
  <span class='iq identifier id'>iq</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='rparen token'>)</span>

  <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='send_with_id identifier id'>send_with_id</span><span class='lparen token'>(</span><span class='iq identifier id'>iq</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>