<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>brownbeagle's gitauth - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/brownbeagle/commits/gitauth/master" rel="alternate" title="Recent Commits to gitauth:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("brownbeagle", "gitauth", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='brownbeagle/gitauth/blob/32db57e6f474ee2ead5713cfeef3162a02080b16' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='brownbeagle/gitauth/blob/32db57e6f474ee2ead5713cfeef3162a02080b16' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("brownbeagle", "gitauth", "32db57e6f474ee2ead5713cfeef3162a02080b16", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/brownbeagle/gitauth/tree/">Source</a></li>
            <li class=""><a href="http://github.com/brownbeagle/gitauth/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/brownbeagle/gitauth/network">Network</a></li>            
            <li class=""><a href="http://github.com/brownbeagle/gitauth/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/brownbeagle/gitauth">Wiki</a></li>
            <li class=""><a href="http://github.com/brownbeagle/gitauth/graphs">Graphs</a></li>                    
            <li class="active"><a href="/brownbeagle/gitauth">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/brownbeagle">brownbeagle</a> / <b><a href="http://github.com/brownbeagle/gitauth/tree">gitauth</a></b>        
                <a id="namespaces_button" rel="brownbeagle/gitauth/blob/32db57e6f474ee2ead5713cfeef3162a02080b16" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="brownbeagle/gitauth/blob/32db57e6f474ee2ead5713cfeef3162a02080b16" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h2>GitAuth - SSH-based authentication for Shared Git Repositories.</h2>
<p>
If you&#8217;ve heard of Gitosis before, GitAuth is like Gitosis but A) in
Ruby, B) slightly simpler to get going and C) doesn&#8217;t use a git
repository to manage users.
</p>
<p>
At the moment configuration / adding users is done via a single command -
<tt>gitauth</tt>. For usage, see below.
</p>
<h3>License</h3>
<p>
GitAuth is licensed under AGPL, with parts of the code being derived from
Gitorius - http://gitorious.org/
</p>
<h3>Installing GitAuth</h3>
<p>
Getting started is relatively simple. First of, you&#8217;ll need to log
onto the remote server / your git host. Next, you&#8217;ll need to install
the gem:
</p>
<pre class="code">
  <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='brownbeagle identifier id'>brownbeagle</span><span class='minus op'>-</span><span class='gitauth identifier id'>gitauth</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='source identifier id'>source</span><span class='assign token'>=</span><span class='https identifier id'>https</span><span class='symbol val'>:/</span><span class='regexp val'>/gems.github.com/</span>
</pre>
<p>
Once that&#8217;s done, the <tt>gitauth</tt> and <tt>gitauth-shell</tt> commands
should be in your path. Next, you&#8217;ll want to (in most cases anyway)
use a specific <tt>git</tt> user to host repositories.
</p>
<p>
Using the example of ubuntu, we&#8217;ll add a git user under which all
actions will now take place (note, this is essentially the same as
gitosis):
</p>
<pre class="code">
  <span class='sudo identifier id'>sudo</span> <span class='adduser identifier id'>adduser</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='disabled identifier id'>disabled</span><span class='minus op'>-</span><span class='password identifier id'>password</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='shell identifier id'>shell</span> <span class='regexp val'>/bin/</span><span class='bash identifier id'>bash</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='group identifier id'>group</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='home identifier id'>home</span> <span class='regexp val'>/home/</span><span class='git identifier id'>git</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='system identifier id'>system</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='gecos identifier id'>gecos</span> <span class='string val'>'gitauth user for version control'</span> <span class='git identifier id'>git</span>
</pre>
<p>
Now, whenever you run the <tt>gitauth</tt> executable, you&#8217;ll do so
as the user you just created above. For simplicity purposes, I added the
the following to my zsh profile so I always had it available. If you
don&#8217;t wish to, just use as you would without the alias:
</p>
<pre class="code">
  <span class='alias alias kw'>alias</span> <span class='asgit= identifier id'>asgit=</span><span class='string val'>'sudo -H -u git'</span>
</pre>
<p>
And finally, to create a settings file and initialize .ssh and
authorized_keys, perform the following:
</p>
<pre class="code">
  <span class='asgit identifier id'>asgit</span> <span class='gitauth identifier id'>gitauth</span> <span class='install identifier id'>install</span>
</pre>
<p>
Note that when it asks you for the gitauth shell path, the default will
lock it to the current gitauth version SO if you want it to stay up to date
between gem versions point it to the path for always-current executable
(e.g. on Ubuntu 9.04 w/ apt-get ruby + gems,
<tt>/var/lib/gems/1.8/bin/gitauth-shell</tt>)
</p>
<p>
Also, Note that if you append a path to a public key to the end of the
install command, it will initialize a new <tt>admin</tt> user who can also
login via SSH. e.g.
</p>
<pre class="code">
  <span class='asgit identifier id'>asgit</span> <span class='gitauth identifier id'>gitauth</span> <span class='install identifier id'>install</span> <span class='id_rsa identifier id'>id_rsa</span><span class='dot token'>.</span><span class='pub identifier id'>pub</span>
</pre>
<p>
Would initialize an admin user with the given public key.
</p>
<p>
Note that from now on, all gitauth keys should be run either logged in as
git (via the admin user and ssh) or by being prefixed with asgit or
&quot;sudo -H -u git&quot;
</p>
<h3>Adding Users</h3>
<p>
Whenever you want to add a user, it&#8217;s ass imple as:
</p>
<pre class="code">
  <span class='gitauth identifier id'>gitauth</span> <span class='adduser identifier id'>adduser</span> <span class='user identifier id'>user</span><span class='minus op'>-</span><span class='name identifier id'>name</span> <span class='path identifier id'>path</span><span class='minus op'>-</span><span class='to identifier id'>to</span><span class='minus op'>-</span><span class='public identifier id'>public</span><span class='minus op'>-</span><span class='key identifier id'>key</span>
</pre>
<p>
Note that if the --admin option is specified, the user will be able to
log in to the shell via SSH and will also be able to access any repository.
</p>
<h3>Adding Repositories</h3>
<p>
Adding a repository is a two step process. First, you create it:
</p>
<pre class="code">
  <span class='gitauth identifier id'>gitauth</span> <span class='addrepo identifier id'>addrepo</span> <span class='repo identifier id'>repo</span><span class='minus op'>-</span><span class='name identifier id'>name</span>
</pre>
<p>
Then, for every user who needs access, you do:
</p>
<pre class="code">
  <span class='gitauth identifier id'>gitauth</span> <span class='permissions identifier id'>permissions</span> <span class='repo identifier id'>repo</span><span class='minus op'>-</span><span class='name identifier id'>name</span> <span class='user identifier id'>user</span><span class='minus op'>-</span><span class='name identifier id'>name</span> <span class='permission identifier id'>permission</span><span class='minus op'>-</span><span class='type identifier id'>type</span>
</pre>
<p>
Where permission type is read, write or all. If permission type isn&#8217;t
specified, it will default to all.
</p>
<h3>Accessing repos:</h3>
<p>
Finally, once you&#8217;ve added users / repos, using them is as simple as
doing the following on each users computer:
</p>
<pre class="code">
  <span class='git identifier id'>git</span> <span class='clone identifier id'>clone</span> <span class='git identifier id'>git</span><span class='@your ivar id'>@your</span><span class='minus op'>-</span><span class='remote identifier id'>remote</span><span class='minus op'>-</span><span class='host identifier id'>host</span><span class='symbol val'>:repo</span><span class='minus op'>-</span><span class='name identifier id'>name</span>
</pre>
<p>
Or
</p>
<pre class="code">
  <span class='git identifier id'>git</span> <span class='clone identifier id'>clone</span> <span class='git identifier id'>git</span><span class='@your ivar id'>@your</span><span class='minus op'>-</span><span class='remote identifier id'>remote</span><span class='minus op'>-</span><span class='host identifier id'>host</span><span class='symbol val'>:repo</span><span class='minus op'>-</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
</pre>
<p>
Either form working just as well.
</p>
<p>
Note that for the first time you push, you will need to use the full form:
</p>
<pre class="code">
  <span class='git identifier id'>git</span> <span class='push identifier id'>push</span> <span class='origin identifier id'>origin</span> <span class='master identifier id'>master</span>
</pre>
<p>
As it starts as an empty repo.
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>