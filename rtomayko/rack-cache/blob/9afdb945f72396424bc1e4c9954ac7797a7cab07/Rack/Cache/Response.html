<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>rtomayko's rack-cache - Class: Rack::Cache::Response - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/rtomayko/commits/rack-cache/master" rel="alternate" title="Recent Commits to rack-cache:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("rtomayko", "rack-cache", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("rtomayko", "rack-cache", "9afdb945f72396424bc1e4c9954ac7797a7cab07", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/rtomayko/rack-cache/tree/">Source</a></li>
            <li class=""><a href="http://github.com/rtomayko/rack-cache/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/rtomayko/rack-cache/network">Network</a></li>            
            <li class=""><a href="http://github.com/rtomayko/rack-cache/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/rtomayko/rack-cache">Wiki</a></li>
            <li class=""><a href="http://github.com/rtomayko/rack-cache/graphs">Graphs</a></li>                    
            <li class="active"><a href="/rtomayko/rack-cache">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/rtomayko">rtomayko</a> / <b><a href="http://github.com/rtomayko/rack-cache/tree">rack-cache</a></b>        
                <a id="namespaces_button" rel="rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Rack_Cache_Response">
  <h1>Class: Rack::Cache::Response</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p>Rack::Response::Helpers</p>
</div><div class="section docstring">
  <p>
Provides access to the response generated by the downstream application.
The <tt>response</tt>, <tt>original_response</tt>, and <tt>entry</tt>
objects exposed by the Core caching engine are instances of this class.
</p>
<p>
Response objects respond to a variety of convenience methods, including
those defined in Rack::Response::Helpers, Rack::Cache::Headers, and
Rack::Cache::ResponseHeaders.
</p>
<p>
Note that Rack::Cache::Response is not a subclass of Rack::Response and
does not perform many of the same initialization and finalization tasks.
For example, the body is not slurped during initialization and there are no
facilities for generating response output.
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">body</td>
          <td class="readwrite">
            [<span id='body-instance_method'>R</span><span id='body%3D-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Rack response tuple accessors.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">headers</td>
          <td class="readwrite">
            [<span id='headers-instance_method'>R</span><span id='headers%3D-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Rack response tuple accessors.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">now</td>
          <td class="readwrite">
            [<span id='now-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The time when the Response object was instantiated.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">status</td>
          <td class="readwrite">
            [<span id='status-instance_method'>R</span><span id='status%3D-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Rack response tuple accessors.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(status, headers, body)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Create a Response instance given the response status code, header hash, and
body.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 32</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L32">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">32
33
34
35
36
37
38</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='status identifier id'>status</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='comma token'>,</span> <span class='body identifier id'>body</span><span class='rparen token'>)</span>
  <span class='@status ivar id'>@status</span> <span class='assign token'>=</span> <span class='status identifier id'>status</span>
  <span class='@headers ivar id'>@headers</span> <span class='assign token'>=</span> <span class='Rack constant id'>Rack</span><span class='colon2 op'>::</span><span class='Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='HeaderHash constant id'>HeaderHash</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='headers identifier id'>headers</span><span class='rparen token'>)</span>
  <span class='@body ivar id'>@body</span> <span class='assign token'>=</span> <span class='body identifier id'>body</span>
  <span class='@now ivar id'>@now</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
  <span class='@headers ivar id'>@headers</span><span class='lbrack token'>[</span><span class='string val'>'Date'</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='@now ivar id'>@now</span><span class='dot token'>.</span><span class='httpdate identifier id'>httpdate</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#age-instance_method">#age</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The age of the response.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#cache_control-instance_method">#cache_control</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Set the Cache-Control header to the values specified by the Hash.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#cacheable-3F-instance_method">#cacheable?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Determine if the response is worth caching under any circumstance.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#client_ttl-instance_method">#client_ttl</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Set the response&#8217;s time-to-live for private/client caches.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#date-instance_method">#date</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The date, as specified by the Date header.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#etag-instance_method">#etag</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The literal value of ETag HTTP header or nil if no ETag is specified.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#etag_matches-3F-instance_method">#etag_matches?</span><span class='args'>(etag)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Determine if response&#8217;s ETag matches the etag value provided.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#expire-21-instance_method">#expire!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Mark the response stale by setting the Age header to be equal to the
maximum age of the response.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#expires-instance_method">#expires</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The value of the Expires header as a Time object.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#fresh-3F-instance_method">#fresh?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Determine if the response is &quot;fresh&quot;.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#initialize_copy-instance_method">#initialize_copy</span><span class='args'>(other)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#last_modified-instance_method">#last_modified</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The String value of the Last-Modified header exactly as it appears in the
response (i.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#last_modified_at-3F-instance_method">#last_modified_at?</span><span class='args'>(time_value)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Determine if the response was last modified at the time provided.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#max_age-instance_method">#max_age</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The number of seconds after which the response should no longer be
considered fresh.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#must_revalidate-3F-instance_method">#must_revalidate?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Indicates that the cache must not serve a stale response in any
circumstance without first revalidating with the origin.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#not_modified-21-instance_method">#not_modified!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Modify the response so that it conforms to the rules defined for &#8216;304
Not Modified&#8217;.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#private-instance_method">#private</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Mark the response &quot;private&quot;, making it ineligible for serving
other clients.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#shared_max_age-instance_method">#shared_max_age</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Like #max_age= but sets the s-maxage directive, which applies only to
shared caches.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_a-instance_method">#to_a</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Return the status, headers, and body in a three-tuple.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#ttl-instance_method">#ttl</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Set the response&#8217;s time-to-live for shared caches to the specified
number of seconds.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#validateable-3F-instance_method">#validateable?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Determine if the response includes headers that can be used to validate the
response with the origin using a conditional GET request.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#vary-instance_method">#vary</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The literal value of the Vary header, or nil when no header is present.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#vary-3F-instance_method">#vary?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Does the response include a Vary header?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#vary_header_names-instance_method">#vary_header_names</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
An array of header names given in the Vary header or an empty array when no
Vary header is present.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>age</h3>
</div><div id="age-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>age</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The age of the response.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 148</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L148">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">148
149
150</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='age identifier id'>age</span>
  <span class='lparen token'>(</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'Age'</span><span class='rbrack token'>]</span> <span class='orop op'>||</span>  <span class='lbrack token'>[</span><span class='lparen token'>(</span><span class='now identifier id'>now</span> <span class='minus op'>-</span> <span class='date identifier id'>date</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='max identifier id'>max</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>cache_control</h3>
</div><div id="cache_control-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cache_control</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Set the Cache-Control header to the values specified by the Hash. See the
#cache_control method for information on expected Hash structure.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 68</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L68">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">68
69
70
71
72
73
74
75
76
77
78
79
80</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='cache_control= identifier id'>cache_control=</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='colon op'>:</span><span class='to_hash identifier id'>to_hash</span>
    <span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='clear identifier id'>clear</span>
    <span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='merge! fid id'>merge!</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='orop op'>||</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='string val'>'Cache-Control'</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'Cache-Control'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>cacheable?</h3>
</div><div id="cacheable-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cacheable?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Determine if the response is worth caching under any circumstance.
Responses marked &quot;private&quot; with an explicit Cache-Control
directive are considered uncacheable
</p>
<p>
Responses with neither a freshness lifetime (Expires, max-age) nor cache
validator (Last-Modified, ETag) are considered uncacheable.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 102</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L102">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">102
103
104
105
106</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='cacheable? fid id'>cacheable?</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='unless unless_mod kw'>unless</span> <span class='CACHEABLE_RESPONSE_CODES constant id'>CACHEABLE_RESPONSE_CODES</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='status identifier id'>status</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='no_store? fid id'>no_store?</span> <span class='orop op'>||</span> <span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
  <span class='validateable? fid id'>validateable?</span> <span class='orop op'>||</span> <span class='fresh? fid id'>fresh?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>client_ttl</h3>
</div><div id="client_ttl-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>client_ttl</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Set the response&#8217;s time-to-live for private/client caches. This
adjusts the Cache-Control/max-age directive.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 196</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L196">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">196
197
198</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='client_ttl= identifier id'>client_ttl=</span><span class='lparen token'>(</span><span class='seconds identifier id'>seconds</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='max_age identifier id'>max_age</span> <span class='assign token'>=</span> <span class='age identifier id'>age</span> <span class='plus op'>+</span> <span class='seconds identifier id'>seconds</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>date</h3>
</div><div id="date-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>date</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The date, as specified by the Date header. When no Date header is present,
set the Date header to Time.now and return.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 138</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L138">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">138
139
140
141
142
143
144
145</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='date identifier id'>date</span>
  <span class='if if kw'>if</span> <span class='date identifier id'>date</span> <span class='assign token'>=</span> <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'Date'</span><span class='rbrack token'>]</span>
    <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='httpdate identifier id'>httpdate</span><span class='lparen token'>(</span><span class='date identifier id'>date</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'Date'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='now identifier id'>now</span><span class='dot token'>.</span><span class='httpdate identifier id'>httpdate</span> <span class='unless unless_mod kw'>unless</span> <span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='frozen? fid id'>frozen?</span>
    <span class='now identifier id'>now</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>etag</h3>
</div><div id="etag-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>etag</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The literal value of ETag HTTP header or nil if no ETag is specified.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 207</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L207">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">207
208
209</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='etag identifier id'>etag</span>
  <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'ETag'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>etag_matches?</h3>
</div><div id="etag_matches-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>etag_matches?</span><span class='args'>(etag)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Determine if response&#8217;s ETag matches the etag value provided. Return
false when either value is nil.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 220</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L220">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">220
221
222</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='etag_matches? fid id'>etag_matches?</span><span class='lparen token'>(</span><span class='etag identifier id'>etag</span><span class='rparen token'>)</span>
  <span class='etag identifier id'>etag</span> <span class='andop op'>&amp;&amp;</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='etag identifier id'>etag</span> <span class='eq op'>==</span> <span class='etag identifier id'>etag</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>expire!</h3>
</div><div id="expire-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>expire!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Mark the response stale by setting the Age header to be equal to the
maximum age of the response.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 132</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L132">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">132
133
134</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='expire! fid id'>expire!</span>
  <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'Age'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='max_age identifier id'>max_age</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='if if_mod kw'>if</span> <span class='fresh? fid id'>fresh?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>expires</h3>
</div><div id="expires-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>expires</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The value of the Expires header as a Time object.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 164</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L164">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">164
165
166</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='expires identifier id'>expires</span>
  <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'Expires'</span><span class='rbrack token'>]</span> <span class='andop op'>&amp;&amp;</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='httpdate identifier id'>httpdate</span><span class='lparen token'>(</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'Expires'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>fresh?</h3>
</div><div id="fresh-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>fresh?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Determine if the response is &quot;fresh&quot;. Fresh responses may be
served from cache without any interaction with the origin. A response is
considered fresh when it includes a Cache-Control/max-age indicator or
Expiration header and the calculated age is less than the freshness
lifetime.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 92</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L92">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">92
93
94</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='fresh? fid id'>fresh?</span>
  <span class='ttl identifier id'>ttl</span> <span class='andop op'>&amp;&amp;</span> <span class='ttl identifier id'>ttl</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>initialize_copy</h3>
</div><div id="initialize_copy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize_copy</span><span class='args'>(other)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 40</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L40">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">40
41
42
43</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize_copy identifier id'>initialize_copy</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
  <span class='super super kw'>super</span>
  <span class='@headers ivar id'>@headers</span> <span class='assign token'>=</span> <span class='other identifier id'>other</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>last_modified</h3>
</div><div id="last_modified-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>last_modified</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The String value of the Last-Modified header exactly as it appears in the
response (i.e., no date parsing / conversion is performed).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 202</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L202">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">202
203
204</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='last_modified identifier id'>last_modified</span>
  <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'Last-Modified'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>last_modified_at?</h3>
</div><div id="last_modified_at-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>last_modified_at?</span><span class='args'>(time_value)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Determine if the response was last modified at the time provided.
time_value is the exact string provided in an origin response&#8217;s
Last-Modified header.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 214</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L214">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">214
215
216</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='last_modified_at? fid id'>last_modified_at?</span><span class='lparen token'>(</span><span class='time_value identifier id'>time_value</span><span class='rparen token'>)</span>
  <span class='time_value identifier id'>time_value</span> <span class='andop op'>&amp;&amp;</span> <span class='last_modified identifier id'>last_modified</span> <span class='eq op'>==</span> <span class='time_value identifier id'>time_value</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>max_age</h3>
</div><div id="max_age-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>max_age</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The number of seconds after which the response should no longer be
considered fresh. Sets the Cache-Control max-age directive.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 157</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L157">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">157
158
159</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='max_age= identifier id'>max_age=</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cache_control identifier id'>cache_control</span> <span class='assign token'>=</span> <span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='string val'>'max-age'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>must_revalidate?</h3>
</div><div id="must_revalidate-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>must_revalidate?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Indicates that the cache must not serve a stale response in any
circumstance without first revalidating with the origin. When present, the
TTL of the response should not be overriden to be greater than the value
provided by the origin.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 126</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L126">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">126
127
128</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='must_revalidate? fid id'>must_revalidate?</span>
  <span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='must_revalidate identifier id'>must_revalidate</span> <span class='orop op'>||</span> <span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='proxy_revalidate identifier id'>proxy_revalidate</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>not_modified!</h3>
</div><div id="not_modified-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>not_modified!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Modify the response so that it conforms to the rules defined for &#8216;304
Not Modified&#8217;. This sets the status, removes the body, and discards
any headers that MUST NOT be included in 304 responses.
</p>
<p>
http://tools.ietf.org/html/rfc2616#section-10.3.5
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 242</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L242">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">242
243
244
245
246
247</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='not_modified! fid id'>not_modified!</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='status identifier id'>status</span> <span class='assign token'>=</span> <span class='integer val'>304</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='body identifier id'>body</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='NOT_MODIFIED_OMIT_HEADERS constant id'>NOT_MODIFIED_OMIT_HEADERS</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='bitor op'>|</span> <span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>private</h3>
</div><div id="private-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>private</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Mark the response &quot;private&quot;, making it ineligible for serving
other clients.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 116</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L116">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">116
117
118
119
120</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='private= identifier id'>private=</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span> <span class='integer val'>? </span><span class='true true kw'>true</span> <span class='colon op'>:</span> <span class='nil nil kw'>nil</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cache_control identifier id'>cache_control</span> <span class='assign token'>=</span> <span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span>
    <span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='string val'>'public'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='notop op'>!</span><span class='value identifier id'>value</span><span class='comma token'>,</span> <span class='string val'>'private'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>shared_max_age</h3>
</div><div id="shared_max_age-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>shared_max_age</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Like #max_age= but sets the s-maxage directive, which applies only to
shared caches.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 176</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L176">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">176
177
178</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='shared_max_age= identifier id'>shared_max_age=</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cache_control identifier id'>cache_control</span> <span class='assign token'>=</span> <span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='string val'>'s-maxage'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_a</h3>
</div><div id="to_a-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_a</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Return the status, headers, and body in a three-tuple.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 46</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L46">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">46
47
48</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_a identifier id'>to_a</span>
  <span class='lbrack token'>[</span><span class='status identifier id'>status</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='to_hash identifier id'>to_hash</span><span class='comma token'>,</span> <span class='body identifier id'>body</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>ttl</h3>
</div><div id="ttl-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>ttl</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Set the response&#8217;s time-to-live for shared caches to the specified
number of seconds. This adjusts the Cache-Control/s-maxage directive.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 184</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L184">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">184
185
186</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='ttl= identifier id'>ttl=</span><span class='lparen token'>(</span><span class='seconds identifier id'>seconds</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='shared_max_age identifier id'>shared_max_age</span> <span class='assign token'>=</span> <span class='age identifier id'>age</span> <span class='plus op'>+</span> <span class='seconds identifier id'>seconds</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>validateable?</h3>
</div><div id="validateable-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>validateable?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Determine if the response includes headers that can be used to validate the
response with the origin using a conditional GET request.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 110</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L110">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">110
111
112</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='validateable? fid id'>validateable?</span>
  <span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='string val'>'Last-Modified'</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='string val'>'ETag'</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>vary</h3>
</div><div id="vary-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>vary</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The literal value of the Vary header, or nil when no header is present.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 250</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L250">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">250
251
252</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='vary identifier id'>vary</span>
  <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'Vary'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>vary?</h3>
</div><div id="vary-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>vary?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Does the response include a Vary header?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 255</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L255">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">255
256
257</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='vary? fid id'>vary?</span>
  <span class='notop op'>!</span> <span class='vary identifier id'>vary</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>vary_header_names</h3>
</div><div id="vary_header_names-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>vary_header_names</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
An array of header names given in the Vary header or an empty array when no
Vary header is present.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/response.rb', line 261</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/response.rb#L261">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">261
262
263
264</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='vary_header_names identifier id'>vary_header_names</span>
  <span class='return return kw'>return</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span> <span class='unless unless_mod kw'>unless</span> <span class='vary identifier id'>vary</span> <span class='assign token'>=</span> <span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'Vary'</span><span class='rbrack token'>]</span>
  <span class='vary identifier id'>vary</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>/[\s,]+/</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>