<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>rtomayko's rack-cache - Class: Rack::Cache::CacheControl - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/rtomayko/commits/rack-cache/master" rel="alternate" title="Recent Commits to rack-cache:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("rtomayko", "rack-cache", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("rtomayko", "rack-cache", "9afdb945f72396424bc1e4c9954ac7797a7cab07", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/rtomayko/rack-cache/tree/">Source</a></li>
            <li class=""><a href="http://github.com/rtomayko/rack-cache/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/rtomayko/rack-cache/network">Network</a></li>            
            <li class=""><a href="http://github.com/rtomayko/rack-cache/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/rtomayko/rack-cache">Wiki</a></li>
            <li class=""><a href="http://github.com/rtomayko/rack-cache/graphs">Graphs</a></li>                    
            <li class="active"><a href="/rtomayko/rack-cache">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/rtomayko">rtomayko</a> / <b><a href="http://github.com/rtomayko/rack-cache/tree">rack-cache</a></b>        
                <a id="namespaces_button" rel="rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Rack_Cache_CacheControl">
  <h1>Class: Rack::Cache::CacheControl</h1>
  <div class="section inheritance">
  <ul>
  <li>Hash</li><ul><li>Rack::Cache::CacheControl</li>
  </ul></ul>
</div><div class="section docstring">
  <p>
Parses a Cache-Control header and exposes the directives as a Hash.
Directives that do not have values are set to <tt>true</tt>.
</p>

</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(value = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/cachecontrol.rb', line 7</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/cachecontrol.rb#L7">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">7
8
9</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#max_age-instance_method">#max_age</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The expiration time of an entity MAY be specified by the origin server
using the Expires header (see section 14.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#must_revalidate-3F-instance_method">#must_revalidate?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Because a cache MAY be configured to ignore a server&#8217;s specified
expiration time, and because a client request MAY include a max- stale
directive (which has a similar effect), the protocol also includes a
mechanism for the origin server to require revalidation of a cache entry on
any subsequent use.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#no_cache-3F-instance_method">#no_cache?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
When set in a response, a cache MUST NOT use the response to satisfy a
subsequent request without successful revalidation with the origin server.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#no_store-3F-instance_method">#no_store?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Indicates that the response MUST NOT be stored under any circumstances.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#private-3F-instance_method">#private?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Indicates that all or part of the response message is intended for a single
user and MUST NOT be cached by a shared cache.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#proxy_revalidate-3F-instance_method">#proxy_revalidate?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The proxy-revalidate directive has the same meaning as the must- revalidate
directive, except that it does not apply to non-shared user agent caches.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#public-3F-instance_method">#public?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Indicates that the response MAY be cached by any cache, even if it would
normally be non-cacheable or cacheable only within a non- shared cache.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#shared_max_age-instance_method">#shared_max_age</span><span class='args'></span>
        <span class='block'></span>
        
          <span class='alias'>#s_maxage</span>
        
      </th>
      <td class="docstring">
        <p>
If a response includes an s-maxage directive, then for a shared cache (but
not for a private cache), the maximum age specified by this directive
overrides the maximum age specified by either the max-age directive or the
Expires header.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_s-instance_method">#to_s</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>max_age</h3>
</div><div id="max_age-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>max_age</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The expiration time of an entity MAY be specified by the origin server
using the Expires header (see section 14.21). Alternatively, it MAY be
specified using the max-age directive in a response. When the max-age
cache-control directive is present in a cached response, the response is
stale if its current age is greater than the age value given (in seconds)
at the time of a new request for that resource. The max-age directive on a
response implies that the response is cacheable (i.e., &quot;public&quot;)
unless some other, more restrictive cache directive is also present.
</p>
<p>
If a response includes both an Expires header and a max-age directive, the
max-age directive overrides the Expires header, even if the Expires header
is more restrictive. This rule allows an origin server to provide, for a
given response, a longer expiration time to an HTTP/1.1 (or later) cache
than to an HTTP/1.0 cache. This might be useful if certain HTTP/1.0 caches
improperly calculate ages or expiration times, perhaps due to
desynchronized clocks.
</p>
<p>
Many HTTP/1.0 cache implementations will treat an Expires value that is
less than or equal to the response Date value as being equivalent to the
Cache-Control response directive &quot;no-cache&quot;. If an HTTP/1.1 cache
receives such a response, and the response does not include a Cache-Control
header field, it SHOULD consider the response to be non-cacheable in order
to retain compatibility with HTTP/1.0 servers.
</p>
<p>
When the max-age directive is included in the request, it indicates that
the client is willing to accept a response whose age is no greater than the
specified time in seconds.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/cachecontrol.rb', line 110</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/cachecontrol.rb#L110">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">110
111
112</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='max_age identifier id'>max_age</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='string val'>'max-age'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>  <span class='if if_mod kw'>if</span> <span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='string val'>'max-age'</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>must_revalidate?</h3>
</div><div id="must_revalidate-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>must_revalidate?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Because a cache MAY be configured to ignore a server&#8217;s specified
expiration time, and because a client request MAY include a max- stale
directive (which has a similar effect), the protocol also includes a
mechanism for the origin server to require revalidation of a cache entry on
any subsequent use. When the must-revalidate directive is present in a
response received by a cache, that cache MUST NOT use the entry after it
becomes stale to respond to a subsequent request without first revalidating
it with the origin server. (I.e., the cache MUST do an end-to-end
revalidation every time, if, based solely on the origin server&#8217;s
Expires or max-age value, the cached response is stale.)
</p>
<p>
The must-revalidate directive is necessary to support reliable operation
for certain protocol features. In all circumstances an HTTP/1.1 cache MUST
obey the must-revalidate directive; in particular, if the cache cannot
reach the origin server for any reason, it MUST generate a 504 (Gateway
Timeout) response.
</p>
<p>
Servers SHOULD send the must-revalidate directive if and only if failure to
revalidate a request on the entity could result in incorrect operation,
such as a silently unexecuted financial transaction. Recipients MUST NOT
take any automated action that violates this directive, and MUST NOT
automatically provide an unvalidated copy of the entity if revalidation
fails.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/cachecontrol.rb', line 152</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/cachecontrol.rb#L152">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">152
153
154</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='must_revalidate? fid id'>must_revalidate?</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='string val'>'must-revalidate'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>no_cache?</h3>
</div><div id="no_cache-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>no_cache?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
When set in a response, a cache MUST NOT use the response to satisfy a
subsequent request without successful revalidation with the origin server.
This allows an origin server to prevent caching even by caches that have
been configured to return stale responses to client requests.
</p>
<p>
Note that this does not necessary imply that the response may not be stored
by the cache, only that the cache cannot serve it without first making a
conditional GET request with the origin server.
</p>
<p>
When set in a request, the server MUST NOT use a cached copy for its
response. This has quite different semantics compared to the no-cache
directive on responses. When the client specifies no-cache, it causes an
end-to-end reload, forcing each cache to update their cached copies.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/cachecontrol.rb', line 49</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/cachecontrol.rb#L49">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">49
50
51</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='no_cache? fid id'>no_cache?</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='string val'>'no-cache'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>no_store?</h3>
</div><div id="no_store-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>no_store?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Indicates that the response MUST NOT be stored under any circumstances.
</p>
<p>
The purpose of the no-store directive is to prevent the inadvertent release
or retention of sensitive information (for example, on backup tapes). The
no-store directive applies to the entire message, and MAY be sent either in
a response or in a request. If sent in a request, a cache MUST NOT store
any part of either this request or any response to it. If sent in a
response, a cache MUST NOT store any part of either this response or the
request that elicited it. This directive applies to both non- shared and
shared caches. &quot;MUST NOT store&quot; in this context means that the
cache MUST NOT intentionally store the information in non-volatile storage,
and MUST make a best-effort attempt to remove the information from volatile
storage as promptly as possible after forwarding it.
</p>
<p>
The purpose of this directive is to meet the stated requirements of certain
users and service authors who are concerned about accidental releases of
information via unanticipated accesses to cache data structures. While the
use of this directive might improve privacy in some cases, we caution that
it is NOT in any way a reliable or sufficient mechanism for ensuring
privacy. In particular, malicious or compromised caches might not recognize
or obey this directive, and communications networks might be vulnerable to
eavesdropping.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/cachecontrol.rb', line 78</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/cachecontrol.rb#L78">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">78
79
80</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='no_store? fid id'>no_store?</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='string val'>'no-store'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>private?</h3>
</div><div id="private-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>private?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Indicates that all or part of the response message is intended for a single
user and MUST NOT be cached by a shared cache. This allows an origin server
to state that the specified parts of the response are intended for only one
user and are not a valid response for requests by other users. A private
(non-shared) cache MAY cache the response.
</p>
<p>
Note: This usage of the word private only controls where the response may
be cached, and cannot ensure the privacy of the message content.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/cachecontrol.rb', line 32</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/cachecontrol.rb#L32">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">32
33
34</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='private? fid id'>private?</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='string val'>'private'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>proxy_revalidate?</h3>
</div><div id="proxy_revalidate-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>proxy_revalidate?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The proxy-revalidate directive has the same meaning as the must- revalidate
directive, except that it does not apply to non-shared user agent caches.
It can be used on a response to an authenticated request to permit the
user&#8217;s cache to store and later return the response without needing
to revalidate it (since it has already been authenticated once by that
user), while still requiring proxies that service many users to revalidate
each time (in order to make sure that each user has been authenticated).
Note that such authenticated responses also need the public cache control
directive in order to allow them to be cached at all.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/cachecontrol.rb', line 166</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/cachecontrol.rb#L166">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">166
167
168</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='proxy_revalidate? fid id'>proxy_revalidate?</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='string val'>'proxy-revalidate'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>public?</h3>
</div><div id="public-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>public?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Indicates that the response MAY be cached by any cache, even if it would
normally be non-cacheable or cacheable only within a non- shared cache.
</p>
<p>
A response may be considered public without this directive if the private
directive is not set and the request does not include an Authorization
header.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/cachecontrol.rb', line 18</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/cachecontrol.rb#L18">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">18
19
20</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='public? fid id'>public?</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='string val'>'public'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>shared_max_age</h3>
</div><div id="shared_max_age-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>shared_max_age</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="s_maxage-instance_method">s_maxage</tt>
  
</p>
</div><div class="section docstring">
  <p>
If a response includes an s-maxage directive, then for a shared cache (but
not for a private cache), the maximum age specified by this directive
overrides the maximum age specified by either the max-age directive or the
Expires header. The s-maxage directive also implies the semantics of the
proxy-revalidate directive. i.e., that the shared cache must not use the
entry after it becomes stale to respond to a subsequent request without
first revalidating it with the origin server. The s-maxage directive is
always ignored by a private cache.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/cachecontrol.rb', line 123</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/cachecontrol.rb#L123">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">123
124
125</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='shared_max_age identifier id'>shared_max_age</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='string val'>'s-maxage'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>  <span class='if if_mod kw'>if</span> <span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='string val'>'s-maxage'</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_s</h3>
</div><div id="to_s-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_s</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/cache/cachecontrol.rb', line 170</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rtomayko/rack-cache/blob/9afdb945f72396424bc1e4c9954ac7797a7cab07/lib/rack/cache/cachecontrol.rb#L170">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">170
171
172
173
174
175
176
177
178
179
180</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_s identifier id'>to_s</span>
  <span class='bools identifier id'>bools</span><span class='comma token'>,</span> <span class='vals identifier id'>vals</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span><span class='value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='value identifier id'>value</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>
      <span class='bools identifier id'>bools</span> <span class='lshft op'>&lt;&lt;</span> <span class='key identifier id'>key</span>
    <span class='elsif elsif kw'>elsif</span> <span class='value identifier id'>value</span>
      <span class='vals identifier id'>vals</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{key}=#{value}&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='lparen token'>(</span><span class='bools identifier id'>bools</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span> <span class='plus op'>+</span> <span class='vals identifier id'>vals</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>', '</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>