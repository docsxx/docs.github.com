<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Class: ActiveMerchant::Billing::AuthorizeNetGateway</title>
  </head>
  <body>
    <div id="content">
      <div class="section class ActiveMerchant_Billing_AuthorizeNetGateway">
  <h1 class="title">Class: ActiveMerchant::Billing::AuthorizeNetGateway</h1>
  <div class="section inheritance">
  <ul>
  <li><a href='Gateway.html' title='ActiveMerchant::Billing::Gateway'>ActiveMerchant::Billing::Gateway</a></li><ul><li>ActiveMerchant::Billing::AuthorizeNetGateway</li>
  </ul></ul>
</div><div class="section docstring">
  <p>
For more information on the Authorize.Net Gateway please visit their
{Integration Center}[http://developer.authorize.net/]
</p>
<p>
The login and password are not the username and password you use to login
to the Authorize.Net Merchant Interface. Instead, you will use the API
Login ID as the login and Transaction Key as the password.
</p>
<h4>How to Get Your API Login ID and Transaction Key</h4>
<ol>
<li>Log into the Merchant Interface

</li>
<li>Select Settings from the Main Menu

</li>
<li>Click on API Login ID and Transaction Key in the Security section

</li>
<li>Type in the answer to the secret question configured on setup

</li>
<li>Click Submit

</li>
</ol>
<h4>Automated Recurring Billing (ARB)</h4>
<p>
Automated Recurring Billing (ARB) is an optional service for submitting and
managing recurring, or subscription-based, transactions.
</p>
<p>
To use recurring, update_recurring, and cancel_recurring ARB must be
enabled for your account.
</p>
<p>
Information about ARB is available on the {Authorize.Net
website}[http://www.authorize.net/solutions/merchantsolutions/merchantservices/automatedrecurringbilling/].
Information about the ARB API is available at the {Authorize.Net
Integration Center}[http://developer.authorize.net/]
</p>

</div><div class="section constants">
  <div class="thisclass">
  <h1>Constants</h1>
  <dl>
    
      <dt id="API_VERSION-constant">API_VERSION</dt>
      <dd>'3.1'</dd>
    
      <dt id="AUTHORIZE_NET_ARB_NAMESPACE-constant">AUTHORIZE_NET_ARB_NAMESPACE</dt>
      <dd>'AnetApi/xml/v1/schema/AnetApiSchema.xsd'</dd>
    
      <dt id="AVS_ERRORS-constant">AVS_ERRORS</dt>
      <dd>%w( A E N R W Z )</dd>
    
      <dt id="CARD_CODE_ERRORS-constant">CARD_CODE_ERRORS</dt>
      <dd>%w( N S )</dd>
    
      <dt id="RECURRING_ACTIONS-constant">RECURRING_ACTIONS</dt>
      <dd>{        :create =&gt; 'ARBCreateSubscription',        :update =&gt; 'ARBUpdateSubscription',        :cancel =&gt; 'ARBCancelSubscription'      }</dd>
    
  </dl>
</div>
<div class="inherited">
  
  <div>
    <h1>Constants Inherited from <a href='Gateway.html' title='ActiveMerchant::Billing::Gateway'>ActiveMerchant::Billing::Gateway</a></h1>
    <p><span class='name'><a href='Gateway.html#DEBIT_CARDS-constant' title='DEBIT_CARDS'>DEBIT_CARDS</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
</div><div class="section constructor">
<h1>Constructor Summary</h1>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates a new AuthorizeNetGateway
</p>
<p>
The gateway requires that a valid login and password be passed in the
<tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><tt>:login</tt> &#8212; The Authorize.Net API Login ID (REQUIRED)

</li>
<li><tt>:password</tt> &#8212; The Authorize.Net Transaction Key. (REQUIRED)

</li>
<li><tt>:test</tt> &#8212; <tt>true</tt> or <tt>false</tt>. If true, perform
transactions against the test server. Otherwise, perform transactions
against the production server.

</li>
</ul>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


71
72
73
74
75</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/active_merchant/billing/gateways/authorize_net.rb', line 71</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='requires! fid id'>requires!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='symbol val'>:login</span><span class='comma token'>,</span> <span class='symbol val'>:password</span><span class='rparen token'>)</span>
  <span class='@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span>
  <span class='super super kw'>super</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary class public">
    <div class="inherited">
  
  <div>
    <h1>Public Class Methods Inherited from <a href='Gateway.html' title='ActiveMerchant::Billing::Gateway'>ActiveMerchant::Billing::Gateway</a></h1>
    <p><span class='name'><a href='Gateway.html#card_brand-class_method' title='card_brand'>card_brand</a></span>, <span class='name'><a href='Gateway.html#inherited-class_method' title='inherited'>inherited</a></span>, <span class='name'><a href='Gateway.html#supports%3F-class_method' title='supports?'>supports?</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
  <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#authorize-instance_method' title='#authorize'>#authorize</a></span><span class='args'>(money, creditcard, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Performs an authorization, which reserves the funds on the customer&#8217;s
credit card, but does not charge the card.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#cancel_recurring-instance_method' title='#cancel_recurring'>#cancel_recurring</a></span><span class='args'>(subscription_id)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Cancel a recurring payment.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#capture-instance_method' title='#capture'>#capture</a></span><span class='args'>(money, authorization, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Captures the funds from an authorized transaction.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#credit-instance_method' title='#credit'>#credit</a></span><span class='args'>(money, identification, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Credit an account.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#purchase-instance_method' title='#purchase'>#purchase</a></span><span class='args'>(money, creditcard, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Perform a purchase, which is essentially an authorization and capture in a
single operation.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#recurring-instance_method' title='#recurring'>#recurring</a></span><span class='args'>(money, creditcard, options={})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Create a recurring payment.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#update_recurring-instance_method' title='#update_recurring'>#update_recurring</a></span><span class='args'>(options={})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Update a recurring payment&#8217;s details.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#void-instance_method' title='#void'>#void</a></span><span class='args'>(authorization, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Void a previous transaction.
</p>

        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h1>Public Instance Methods Inherited from <a href='Gateway.html' title='ActiveMerchant::Billing::Gateway'>ActiveMerchant::Billing::Gateway</a></h1>
    <p><span class='name'><a href='Gateway.html#amount-instance_method' title='amount'>amount</a></span>, <span class='name'><a href='Gateway.html#card_brand-instance_method' title='card_brand'>card_brand</a></span>, <span class='name'><a href='Gateway.html#currency-instance_method' title='currency'>currency</a></span>, <span class='name'><a href='Gateway.html#name-instance_method' title='name'>name</a></span>, <span class='name'><a href='Gateway.html#requires_start_date_or_issue_number%3F-instance_method' title='requires_start_date_or_issue_number?'>requires_start_date_or_issue_number?</a></span>, <span class='name'><a href='Gateway.html#test%3F-instance_method' title='test?'>test?</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>authorize</h3>
</div><div id="authorize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>authorize</span><span class='args'>(money, creditcard, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Performs an authorization, which reserves the funds on the customer&#8217;s
credit card, but does not charge the card.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>money</tt> &#8212; The amount to be authorized. Either an Integer value
in cents or a Money object.

</li>
<li><tt>creditcard</tt> &#8212; The CreditCard details for the transaction.

</li>
<li><tt>options</tt> &#8212; A hash of optional parameters.

</li>
</ul>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


85
86
87
88
89
90
91
92
93
94</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/active_merchant/billing/gateways/authorize_net.rb', line 85</span>

<span class='def def kw'>def</span> <span class='authorize identifier id'>authorize</span><span class='lparen token'>(</span><span class='money identifier id'>money</span><span class='comma token'>,</span> <span class='creditcard identifier id'>creditcard</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='post identifier id'>post</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='add_invoice identifier id'>add_invoice</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='add_creditcard identifier id'>add_creditcard</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='creditcard identifier id'>creditcard</span><span class='rparen token'>)</span>
  <span class='add_address identifier id'>add_address</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='add_customer_data identifier id'>add_customer_data</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='add_duplicate_window identifier id'>add_duplicate_window</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='rparen token'>)</span>

  <span class='commit identifier id'>commit</span><span class='lparen token'>(</span><span class='string val'>'AUTH_ONLY'</span><span class='comma token'>,</span> <span class='money identifier id'>money</span><span class='comma token'>,</span> <span class='post identifier id'>post</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>cancel_recurring</h3>
</div><div id="cancel_recurring-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cancel_recurring</span><span class='args'>(subscription_id)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Cancel a recurring payment.
</p>
<p>
This transaction cancels an existing Automated Recurring Billing (ARB)
subscription. Your account must have ARB enabled and the subscription must
have already been created previously by calling recurring()
</p>
<h4>Parameters</h4>
<ul>
<li><tt>subscription_id</tt> &#8212; A string containing the
<tt>subscription_id</tt> of the recurring payment already in place for a
given credit card. (REQUIRED)

</li>
</ul>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


225
226
227
228</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/active_merchant/billing/gateways/authorize_net.rb', line 225</span>

<span class='def def kw'>def</span> <span class='cancel_recurring identifier id'>cancel_recurring</span><span class='lparen token'>(</span><span class='subscription_id identifier id'>subscription_id</span><span class='rparen token'>)</span>
  <span class='request identifier id'>request</span> <span class='assign token'>=</span> <span class='build_recurring_request identifier id'>build_recurring_request</span><span class='lparen token'>(</span><span class='symbol val'>:cancel</span><span class='comma token'>,</span> <span class='symbol val'>:subscription_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='subscription_id identifier id'>subscription_id</span><span class='rparen token'>)</span>
  <span class='recurring_commit identifier id'>recurring_commit</span><span class='lparen token'>(</span><span class='symbol val'>:cancel</span><span class='comma token'>,</span> <span class='request identifier id'>request</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>capture</h3>
</div><div id="capture-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>capture</span><span class='args'>(money, authorization, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Captures the funds from an authorized transaction.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>money</tt> &#8212; The amount to be captured. Either an Integer value
in cents or a Money object.

</li>
<li><tt>authorization</tt> &#8212; The authorization returned from the previous
authorize request.

</li>
</ul>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


120
121
122
123
124</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/active_merchant/billing/gateways/authorize_net.rb', line 120</span>

<span class='def def kw'>def</span> <span class='capture identifier id'>capture</span><span class='lparen token'>(</span><span class='money identifier id'>money</span><span class='comma token'>,</span> <span class='authorization identifier id'>authorization</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='post identifier id'>post</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:trans_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='authorization identifier id'>authorization</span><span class='rbrace token'>}</span>
  <span class='add_customer_data identifier id'>add_customer_data</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='commit identifier id'>commit</span><span class='lparen token'>(</span><span class='string val'>'PRIOR_AUTH_CAPTURE'</span><span class='comma token'>,</span> <span class='money identifier id'>money</span><span class='comma token'>,</span> <span class='post identifier id'>post</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>credit</h3>
</div><div id="credit-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>credit</span><span class='args'>(money, identification, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Credit an account.
</p>
<p>
This transaction is also referred to as a Refund and indicates to the
gateway that money should flow from the merchant to the customer.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>money</tt> &#8212; The amount to be credited to the customer. Either an
Integer value in cents or a Money object.

</li>
<li><tt>identification</tt> &#8212; The ID of the original transaction against
which the credit is being issued.

</li>
<li><tt>options</tt> &#8212; A hash of parameters.

</li>
</ul>
<h4>Options</h4>
<ul>
<li><tt>:card_number</tt> &#8212; The credit card number the credit is being
issued to. (REQUIRED)

</li>
</ul>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


150
151
152
153
154
155
156
157
158
159</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/active_merchant/billing/gateways/authorize_net.rb', line 150</span>

<span class='def def kw'>def</span> <span class='credit identifier id'>credit</span><span class='lparen token'>(</span><span class='money identifier id'>money</span><span class='comma token'>,</span> <span class='identification identifier id'>identification</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='requires! fid id'>requires!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='symbol val'>:card_number</span><span class='rparen token'>)</span>

  <span class='post identifier id'>post</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='symbol val'>:trans_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='identification identifier id'>identification</span><span class='comma token'>,</span>
           <span class='symbol val'>:card_num</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:card_number</span><span class='rbrack token'>]</span>
         <span class='rbrace token'>}</span>
  <span class='add_invoice identifier id'>add_invoice</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>

  <span class='commit identifier id'>commit</span><span class='lparen token'>(</span><span class='string val'>'CREDIT'</span><span class='comma token'>,</span> <span class='money identifier id'>money</span><span class='comma token'>,</span> <span class='post identifier id'>post</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>purchase</h3>
</div><div id="purchase-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>purchase</span><span class='args'>(money, creditcard, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Perform a purchase, which is essentially an authorization and capture in a
single operation.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>money</tt> &#8212; The amount to be purchased. Either an Integer value
in cents or a Money object.

</li>
<li><tt>creditcard</tt> &#8212; The CreditCard details for the transaction.

</li>
<li><tt>options</tt> &#8212; A hash of optional parameters.

</li>
</ul>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


103
104
105
106
107
108
109
110
111
112</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/active_merchant/billing/gateways/authorize_net.rb', line 103</span>

<span class='def def kw'>def</span> <span class='purchase identifier id'>purchase</span><span class='lparen token'>(</span><span class='money identifier id'>money</span><span class='comma token'>,</span> <span class='creditcard identifier id'>creditcard</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='post identifier id'>post</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='add_invoice identifier id'>add_invoice</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='add_creditcard identifier id'>add_creditcard</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='creditcard identifier id'>creditcard</span><span class='rparen token'>)</span>
  <span class='add_address identifier id'>add_address</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='add_customer_data identifier id'>add_customer_data</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='add_duplicate_window identifier id'>add_duplicate_window</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='rparen token'>)</span>

  <span class='commit identifier id'>commit</span><span class='lparen token'>(</span><span class='string val'>'AUTH_CAPTURE'</span><span class='comma token'>,</span> <span class='money identifier id'>money</span><span class='comma token'>,</span> <span class='post identifier id'>post</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>recurring</h3>
</div><div id="recurring-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>recurring</span><span class='args'>(money, creditcard, options={})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Create a recurring payment.
</p>
<p>
This transaction creates a new Automated Recurring Billing (ARB)
subscription. Your account must have ARB enabled.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>money</tt> &#8212; The amount to be charged to the customer at each
interval. Either an Integer value in cents or a Money object.

</li>
<li><tt>creditcard</tt> &#8212; The CreditCard details for the transaction.

</li>
<li><tt>options</tt> &#8212; A hash of parameters.

</li>
</ul>
<h4>Options</h4>
<ul>
<li><tt>:interval</tt> &#8212; A hash containing information about the interval
of time between payments. Must contain the keys <tt>:length</tt> and
<tt>:unit</tt>. <tt>:unit</tt> can be either <tt>:months</tt> or
<tt>:days</tt>. If <tt>:unit</tt> is <tt>:months</tt> then
<tt>:interval</tt> must be an integer between 1 and 12 inclusive. If
<tt>:unit</tt> is <tt>:days</tt> then <tt>:interval</tt> must be an integer
between 7 and 365 inclusive. For example, to charge the customer once every
three months the hash would be +{ :unit =&gt; :months, :interval =&gt; 3 }+
(REQUIRED)

</li>
<li><tt>:duration</tt> &#8212; A hash containing keys for the
<tt>:start_date</tt> the subscription begins (also the date the initial
billing occurs) and the total number of billing <tt>:occurences</tt> or
payments for the subscription. (REQUIRED)

</li>
</ul>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


182
183
184
185
186
187
188
189
190
191
192
193</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/active_merchant/billing/gateways/authorize_net.rb', line 182</span>

<span class='def def kw'>def</span> <span class='recurring identifier id'>recurring</span><span class='lparen token'>(</span><span class='money identifier id'>money</span><span class='comma token'>,</span> <span class='creditcard identifier id'>creditcard</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='requires! fid id'>requires!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='symbol val'>:interval</span><span class='comma token'>,</span> <span class='symbol val'>:duration</span><span class='comma token'>,</span> <span class='symbol val'>:billing_address</span><span class='rparen token'>)</span>
  <span class='requires! fid id'>requires!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:interval</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:length</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='symbol val'>:unit</span><span class='comma token'>,</span> <span class='symbol val'>:days</span><span class='comma token'>,</span> <span class='symbol val'>:months</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='requires! fid id'>requires!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:duration</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:start_date</span><span class='comma token'>,</span> <span class='symbol val'>:occurrences</span><span class='rparen token'>)</span>
  <span class='requires! fid id'>requires!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:billing_address</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:first_name</span><span class='comma token'>,</span> <span class='symbol val'>:last_name</span><span class='rparen token'>)</span>

  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:credit_card</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='creditcard identifier id'>creditcard</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:amount</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='money identifier id'>money</span>

  <span class='request identifier id'>request</span> <span class='assign token'>=</span> <span class='build_recurring_request identifier id'>build_recurring_request</span><span class='lparen token'>(</span><span class='symbol val'>:create</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='recurring_commit identifier id'>recurring_commit</span><span class='lparen token'>(</span><span class='symbol val'>:create</span><span class='comma token'>,</span> <span class='request identifier id'>request</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>update_recurring</h3>
</div><div id="update_recurring-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>update_recurring</span><span class='args'>(options={})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Update a recurring payment&#8217;s details.
</p>
<p>
This transaction updates an existing Automated Recurring Billing (ARB)
subscription. Your account must have ARB enabled and the subscription must
have already been created previously by calling +recurring()+. The ability
to change certain details about a recurring payment is dependent on
transaction history and cannot be determined until after calling
+update_recurring()+. See the ARB XML Guide for such conditions.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>options</tt> &#8212; A hash of parameters.

</li>
</ul>
<h4>Options</h4>
<ul>
<li><tt>:subscription_id</tt> &#8212; A string containing the
<tt>:subscription_id</tt> of the recurring payment already in place for a
given credit card. (REQUIRED)

</li>
</ul>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


210
211
212
213
214</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/active_merchant/billing/gateways/authorize_net.rb', line 210</span>

<span class='def def kw'>def</span> <span class='update_recurring identifier id'>update_recurring</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='requires! fid id'>requires!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='symbol val'>:subscription_id</span><span class='rparen token'>)</span>
  <span class='request identifier id'>request</span> <span class='assign token'>=</span> <span class='build_recurring_request identifier id'>build_recurring_request</span><span class='lparen token'>(</span><span class='symbol val'>:update</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='recurring_commit identifier id'>recurring_commit</span><span class='lparen token'>(</span><span class='symbol val'>:update</span><span class='comma token'>,</span> <span class='request identifier id'>request</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>void</h3>
</div><div id="void-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>void</span><span class='args'>(authorization, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Void a previous transaction
</p>
<h4>Parameters</h4>
<ul>
<li><tt>authorization</tt> - The authorization returned from the previous
authorize request.

</li>
</ul>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


131
132
133
134</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/active_merchant/billing/gateways/authorize_net.rb', line 131</span>

<span class='def def kw'>def</span> <span class='void identifier id'>void</span><span class='lparen token'>(</span><span class='authorization identifier id'>authorization</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='post identifier id'>post</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:trans_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='authorization identifier id'>authorization</span><span class='rbrace token'>}</span>
  <span class='commit identifier id'>commit</span><span class='lparen token'>(</span><span class='string val'>'VOID'</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='post identifier id'>post</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>