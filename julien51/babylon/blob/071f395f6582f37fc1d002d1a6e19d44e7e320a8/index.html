<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>julien51's babylon - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/julien51/commits/babylon/master" rel="alternate" title="Recent Commits to babylon:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("julien51", "babylon", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='julien51/babylon/blob/071f395f6582f37fc1d002d1a6e19d44e7e320a8' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='julien51/babylon/blob/071f395f6582f37fc1d002d1a6e19d44e7e320a8' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("julien51", "babylon", "071f395f6582f37fc1d002d1a6e19d44e7e320a8", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/julien51/babylon/tree/">Source</a></li>
            <li class=""><a href="http://github.com/julien51/babylon/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/julien51/babylon/network">Network</a></li>            
            <li class=""><a href="http://github.com/julien51/babylon/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/julien51/babylon">Wiki</a></li>
            <li class=""><a href="http://github.com/julien51/babylon/graphs">Graphs</a></li>                    
            <li class="active"><a href="/julien51/babylon">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/julien51">julien51</a> / <b><a href="http://github.com/julien51/babylon/tree">babylon</a></b>        
                <a id="namespaces_button" rel="julien51/babylon/blob/071f395f6582f37fc1d002d1a6e19d44e7e320a8" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="julien51/babylon/blob/071f395f6582f37fc1d002d1a6e19d44e7e320a8" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Babylon</h1>
<h2>DESCRIPTION:</h2>
<p>
Babylon is a framework to build XMPP Applications in Ruby. The framework
uses EventMachine to handle network connections.
</p>
<p>
This framework can use both an XMPP Component (XEP-0114) and an XMPP Client
(and XMPP Servers should come soon). However, we strongly discourage any
production application using a regular client.
</p>
<h2>FEATURES/PROBLEMS:</h2>
<p>
Please link &quot;report/request
here.&quot;:http://github.com/julien51/babylon/issues
</p>
<p>
The current version is a good candidate for version 0.1. We will probably
not add any important features before that release, but we need some help
with the tests and documentation.
</p>
<h2>ROADMAP :</h2>
<ul>
<li>Implement the ServerConnection for S2S

</li>
<li>Implement templates for disco-info&#8230; and common XEPs

</li>
<li>Delete route priorities? And rely on the order only? (As Rails does)

</li>
<li>Review doc

</li>
<li>Write tests

</li>
<li>Evangelize!

</li>
</ul>
<p>
You can help with at least one of these points, don&#8217;t turn your back
on Babylon!
</p>
<h2>DOCUMENTATION :</h2>
<p>
You can find it on our &quot;Rubyforge
page&quot;:http://babylon.rubyforge.org/ Feel free to fork the
&quot;github&quot;:http://github.com/julien51/babylon/tree/master repo and
add some documentation if you think anything is missing.
</p>
<p>
__You can&#8217;t be a bad coder, a bad tester and a bad documenter at the
same time ;)__
</p>
<h2>SYNOPSIS :</h2>
<p>
You can build applications directly with Babylon, or you can use the
Babylon::ClientConnection and Babylon::ComponentConnection to create simple
apps, but you will then have to handle stanza routing and creation
yourself. You can also use these classes in external gems.
</p>
<h3>To create an Application with Babylon:</h3>
<ol>
<li>Install the gem

</li>
<li>The app contains a generator that will &quot;build&quot; a scaffold for
your application.

<pre class="code">
 <span class='$&gt; gvar id'>$&gt;</span> <span class='babylon identifier id'>babylon</span> <span class='application identifier id'>application</span> <span class='__myapp__ identifier id'>__myapp__</span>
</pre>
</li>
<li>Use the generator or write your own controllers :

<pre class="code">
 <span class='$&gt; gvar id'>$&gt;</span> <span class='babylon identifier id'>babylon</span> <span class='controller identifier id'>controller</span> <span class='__messages__ identifier id'>__messages__</span> <span class='__echo__ identifier id'>__echo__</span><span class='symbol val'>:__10__</span><span class='symbol val'>:__</span><span class='div op'>/</span><span class='regexp val'>/stream:message[@type='chat']/</span><span class='body__ identifier id'>body__</span><span class='comma token'>,</span><span class='__subscribed__ identifier id'>__subscribed__</span><span class='symbol val'>:__0__</span><span class='symbol val'>:__</span><span class='div op'>/</span><span class='regexp val'>/stream:presence[@type='subscribe']__
</span></pre>
</li>
</ol>
<p>
This will generate a <em>MessagesController</em> class with 2 methods :
<em>echo</em> and <em>subscribed</em>.
</p>
<pre class="code">
 <span class='minus op'>-</span> <span class='string val'>&quot;echo&quot;</span> <span class='will identifier id'>will</span> <span class='be identifier id'>be</span> <span class='called identifier id'>called</span> <span class='when when kw'>when</span> <span class='the identifier id'>the</span> <span class='component identifier id'>component</span> <span class='receives identifier id'>receives</span> <span class='message identifier id'>message</span> <span class='stanzas identifier id'>stanzas</span> <span class='of identifier id'>of</span> <span class='type identifier id'>type</span> <span class='string val'>'chat'</span><span class='comma token'>,</span>
 <span class='minus op'>-</span> <span class='string val'>&quot;subscribed&quot;</span> <span class='will identifier id'>will</span> <span class='be identifier id'>be</span> <span class='called identifier id'>called</span> <span class='for for kw'>for</span> <span class='presence identifier id'>presence</span> <span class='stanzas identifier id'>stanzas</span> <span class='of identifier id'>of</span> <span class='type identifier id'>type</span> <span class='string val'>'subscribe'</span><span class='dot token'>.</span>
</pre>
<p>
10 and 0 are the priority : useful when a stanza matches 2 XPath.
</p>
<p>
Each of these actions will be called with stanza objects. You have to
define your own objects in __stanzas/echo.rb__ and
__stanzas/subscribed.rb__ By implementing them, you can choose which
elements and attributes you want to have access to. These attributes will
be populated upon instantiation of the Stanza objects.
</p>
<p>
This will also generate 2 &#8216;views&#8217; used to build your responses
stanzas.
</p>
<p>
And finally, this will write 2 routes in the config/routes.rb
</p>
<ol>
<li>Customize your controllers, stanzas and views!

</li>
<li>Make sure that the XMPP settings are correct in config/config.yaml.

</li>
<li>And finally start the component :

<pre class="code">
 <span class='script identifier id'>script</span><span class='div op'>/</span><span class='component identifier id'>component</span>
</pre>
</li>
</ol>
<h3>To use the Connection Classes only (Client or Component), you can just call the following :</h3>
<p>
Babylon::ClientConnection.connect(params, handler) or,
Babylon::ComponentConnection.connect(params, handler)
</p>
<p>
where params is a hash for all the necessary information to connect, and
handler is an object that will receive the callbacks. Right now 3 callbacks
are supported:
</p>
<p>
on_connected(connection), on_disconnected and on_stanza(stanza)
</p>
<h2>ADDITIONAL INFORMATION :</h2>
<p>
Feel free to pull, branch, improve and commit the <tt>code|specs|tests|docs</tt> :
we will merge it if it&#8217;s a step ahead!
</p>
<p>
Babylon&#8217;s edge versions are located at Github :
http://github.com/julien51/babylon/tree/master
</p>
<h2>REQUIREMENTS :</h2>
<p>
Gems : Eventmachine, nokogiri (please, use build from the guthub repo,
since 1.2.3 is not supported by Babylon), YAML, log4r, sax-machine,
templater, daemons
</p>
<h2>LICENSE:</h2>
<p>
(The MIT License)
</p>
<p>
Copyright &#169; 2009 Julien Genestoux http://notifixio.us
</p>
<p>
Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&#8216;Software&#8217;), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to the
following conditions:
</p>
<p>
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
</p>
<p>
THE SOFTWARE IS PROVIDED &#8216;AS IS&#8217;, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>