<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jimweirich's flexmock - Class: FlexMock::PartialMockProxy - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jimweirich/commits/flexmock/master" rel="alternate" title="Recent Commits to flexmock:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jimweirich", "flexmock", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jimweirich", "flexmock", "4ac3b827938d4a771fb2e92a9fed52b83a96550a", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jimweirich/flexmock/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jimweirich/flexmock/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jimweirich/flexmock/network">Network</a></li>            
            <li class=""><a href="http://github.com/jimweirich/flexmock/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jimweirich/flexmock">Wiki</a></li>
            <li class=""><a href="http://github.com/jimweirich/flexmock/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jimweirich/flexmock">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jimweirich">jimweirich</a> / <b><a href="http://github.com/jimweirich/flexmock/tree">flexmock</a></b>        
                <a id="namespaces_button" rel="jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class FlexMock_PartialMockProxy">
  <h1>Class: FlexMock::PartialMockProxy</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="PartialMockProxy/Ordering.html" title="FlexMock::Ordering">FlexMock::Ordering</a></p>
</div><div class="section docstring">
  <p>
#########################################################################
PartialMockProxy is used to mate the mock framework to an existing object.
The object is &quot;enhanced&quot; with a reference to a mock object
(stored in <tt>@flexmock_mock</tt>). When the <tt>should_receive</tt>
method is sent to the proxy, it overrides the existing object&#8217;s
method by creating singleton method that forwards to the mock. When testing
is complete, PartialMockProxy will erase the mocking infrastructure from
the object being mocked (e.g. remove instance variables and mock singleton
methods).
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">mock</td>
          <td class="readwrite">
            [<span id='mock-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>mock</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="MOCK_METHODS-constant">MOCK_METHODS</dt>
      <dd>[
  :should_receive, :new_instances, 
  :flexmock_get,   :flexmock_teardown, :flexmock_verify
]</dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(obj, mock, safe_mode)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Initialize a PartialMockProxy object.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/partial_mock.rb', line 40</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/partial_mock.rb#L40">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='comma token'>,</span> <span class='mock identifier id'>mock</span><span class='comma token'>,</span> <span class='safe_mode identifier id'>safe_mode</span><span class='rparen token'>)</span>
  <span class='@obj ivar id'>@obj</span> <span class='assign token'>=</span> <span class='obj identifier id'>obj</span>
  <span class='@mock ivar id'>@mock</span> <span class='assign token'>=</span> <span class='mock identifier id'>mock</span>
  <span class='@method_definitions ivar id'>@method_definitions</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='@methods_proxied ivar id'>@methods_proxied</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='unless unless kw'>unless</span> <span class='safe_mode identifier id'>safe_mode</span>
    <span class='add_mock_method identifier id'>add_mock_method</span><span class='lparen token'>(</span><span class='@obj ivar id'>@obj</span><span class='comma token'>,</span> <span class='symbol val'>:should_receive</span><span class='rparen token'>)</span>
    <span class='MOCK_METHODS constant id'>MOCK_METHODS</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='sym identifier id'>sym</span><span class='bitor op'>|</span>
      <span class='unless unless kw'>unless</span> <span class='@obj ivar id'>@obj</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='sym identifier id'>sym</span><span class='rparen token'>)</span>
        <span class='add_mock_method identifier id'>add_mock_method</span><span class='lparen token'>(</span><span class='@obj ivar id'>@obj</span><span class='comma token'>,</span> <span class='sym identifier id'>sym</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_mock_method-instance_method">#add_mock_method</span><span class='args'>(obj, method_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#any_instance-instance_method">#any_instance</span><span class='args'>(&amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
any_instance is present for backwards compatibility with version 0.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#flexmock_container-instance_method">#flexmock_container</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Forward to the mock&#8217;s container.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#flexmock_container-3D-instance_method">#flexmock_container=</span><span class='args'>(container)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Set the proxy&#8217;s mock container.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#flexmock_expectations_for-instance_method">#flexmock_expectations_for</span><span class='args'>(method_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Forward the request for the expectation director to the mock.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#flexmock_get-instance_method">#flexmock_get</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the mock object for the partial mock.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#flexmock_teardown-instance_method">#flexmock_teardown</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Remove all traces of the mocking framework from the existing object.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#flexmock_verify-instance_method">#flexmock_verify</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Verify that the mock has been properly called.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#new_instances-instance_method">#new_instances</span><span class='args'>(*allocators, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq:
</p>
<pre class="code">
  <span class='new_instances identifier id'>new_instances</span><span class='dot token'>.</span>
</pre>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_receive-instance_method">#should_receive</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq:
</p>
<pre class="code">
   <span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='symbol val'>:method_name</span><span class='rparen token'>)</span>
   <span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='symbol val'>:method1</span><span class='comma token'>,</span> <span class='method2 identifier id'>method2</span><span class='comma token'>,</span> <span class='dot token'>.</span>
</pre>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="PartialMockProxy/Ordering.html" title="FlexMock::Ordering">FlexMock::Ordering</a></h2>
    <p><span class='name'><a href="Ordering.html#flexmock_allocate_order-instance_method" title="flexmock_allocate_order">flexmock_allocate_order</a></span>, <span class='name'><a href="Ordering.html#flexmock_current_order-instance_method" title="flexmock_current_order">flexmock_current_order</a></span>, <span class='name'><a href="Ordering.html#flexmock_current_order%3D-instance_method" title="flexmock_current_order=">flexmock_current_order=</a></span>, <span class='name'><a href="Ordering.html#flexmock_groups-instance_method" title="flexmock_groups">flexmock_groups</a></span>, <span class='name'><a href="Ordering.html#flexmock_validate_order-instance_method" title="flexmock_validate_order">flexmock_validate_order</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>add_mock_method</h3>
</div><div id="add_mock_method-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_mock_method</span><span class='args'>(obj, method_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/partial_mock.rb', line 91</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/partial_mock.rb#L91">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">91
92
93
94
95
96
97
98
99</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_mock_method identifier id'>add_mock_method</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='comma token'>,</span> <span class='method_name identifier id'>method_name</span><span class='rparen token'>)</span>
  <span class='stow_existing_definition identifier id'>stow_existing_definition</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='rparen token'>)</span>
  <span class='eval_line identifier id'>eval_line</span> <span class='assign token'>=</span> <span class='__LINE__ __line__ kw'>__LINE__</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
  <span class='eval identifier id'>eval</span> <span class='dstring node'>%{
    def obj.#{method_name}(*args, &amp;block)
      @flexmock_proxy.#{method_name}(*args, &amp;block)
    end
  }</span><span class='comma token'>,</span> <span class='binding identifier id'>binding</span><span class='comma token'>,</span> <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='eval_line identifier id'>eval_line</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>any_instance</h3>
</div><div id="any_instance-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>any_instance</span><span class='args'>(&amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><p class="section deprecated">
  <strong>Deprecated.</strong> <em></em>
</p>

<div class="section docstring">
  <p>
any_instance is present for backwards compatibility with version 0.5.0.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/deprecated_methods.rb', line 53</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/deprecated_methods.rb#L53">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">53
54
55
56</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='any_instance identifier id'>any_instance</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;any_instance is deprecated, use new_instances instead.&quot;</span>
  <span class='new_instances identifier id'>new_instances</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>flexmock_container</h3>
</div><div id="flexmock_container-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>flexmock_container</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Forward to the mock&#8217;s container.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/partial_mock.rb', line 165</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/partial_mock.rb#L165">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">165
166
167</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='flexmock_container identifier id'>flexmock_container</span>
  <span class='@mock ivar id'>@mock</span><span class='dot token'>.</span><span class='flexmock_container identifier id'>flexmock_container</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>flexmock_container=</h3>
</div><div id="flexmock_container-3D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>flexmock_container=</span><span class='args'>(container)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Set the proxy&#8217;s mock container. This set value is ignored because the
proxy always uses the container of its mock.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/partial_mock.rb', line 171</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/partial_mock.rb#L171">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">171
172</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='flexmock_container= identifier id'>flexmock_container=</span><span class='lparen token'>(</span><span class='container identifier id'>container</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>flexmock_expectations_for</h3>
</div><div id="flexmock_expectations_for-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>flexmock_expectations_for</span><span class='args'>(method_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Forward the request for the expectation director to the mock.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/partial_mock.rb', line 175</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/partial_mock.rb#L175">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">175
176
177</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='flexmock_expectations_for identifier id'>flexmock_expectations_for</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='rparen token'>)</span>
  <span class='@mock ivar id'>@mock</span><span class='dot token'>.</span><span class='flexmock_expectations_for identifier id'>flexmock_expectations_for</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>flexmock_get</h3>
</div><div id="flexmock_get-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>flexmock_get</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the mock object for the partial mock.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/partial_mock.rb', line 56</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/partial_mock.rb#L56">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">56
57
58</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='flexmock_get identifier id'>flexmock_get</span>
  <span class='@mock ivar id'>@mock</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>flexmock_teardown</h3>
</div><div id="flexmock_teardown-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>flexmock_teardown</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Remove all traces of the mocking framework from the existing object.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/partial_mock.rb', line 153</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/partial_mock.rb#L153">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">153
154
155
156
157
158
159
160
161
162</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='flexmock_teardown identifier id'>flexmock_teardown</span>
  <span class='if if kw'>if</span> <span class='notop op'>!</span> <span class='detached? fid id'>detached?</span>
    <span class='@methods_proxied ivar id'>@methods_proxied</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='method_name identifier id'>method_name</span><span class='bitor op'>|</span>
      <span class='remove_current_method identifier id'>remove_current_method</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='rparen token'>)</span>
      <span class='restore_original_definition identifier id'>restore_original_definition</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='@obj ivar id'>@obj</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='string val'>&quot;@flexmock_proxy&quot;</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
    <span class='@obj ivar id'>@obj</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>flexmock_verify</h3>
</div><div id="flexmock_verify-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>flexmock_verify</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Verify that the mock has been properly called. After verification, detach
the mocking infrastructure from the existing object.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/partial_mock.rb', line 148</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/partial_mock.rb#L148">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">148
149
150</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='flexmock_verify identifier id'>flexmock_verify</span>
  <span class='@mock ivar id'>@mock</span><span class='dot token'>.</span><span class='flexmock_verify identifier id'>flexmock_verify</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>new_instances</h3>
</div><div id="new_instances-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>new_instances</span><span class='args'>(*allocators, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq:
</p>
<pre class="code">
  <span class='new_instances identifier id'>new_instances</span><span class='dot token'>.</span><span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='dot3 op'>...</span><span class='rparen token'>)</span>
  <span class='new_instances identifier id'>new_instances</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='instance identifier id'>instance</span><span class='bitor op'>|</span>  <span class='instance identifier id'>instance</span><span class='dot token'>.</span><span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='dot3 op'>...</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
</pre>
<p>
new_instances is a short cut method for overriding the behavior of any new
instances created via a mocked class object.
</p>
<p>
By default, new_instances will mock the behaviour of the :new method. If
you wish to mock a different set of class methods, just pass a list of
symbols to as arguments. (previous versions also mocked :allocate by
default. If you need :allocate to be mocked, just request it explicitly).
</p>
<p>
For example, to stub only objects created by :make (and not :new), use:
</p>
<pre class="code">
   <span class='flexmock identifier id'>flexmock</span><span class='lparen token'>(</span><span class='ClassName constant id'>ClassName</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='new_instances identifier id'>new_instances</span><span class='lparen token'>(</span><span class='symbol val'>:make</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='dot3 op'>...</span><span class='rparen token'>)</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/partial_mock.rb', line 119</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/partial_mock.rb#L119">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='new_instances identifier id'>new_instances</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='allocators identifier id'>allocators</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='fail identifier id'>fail</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;new_instances requires a Class to stub&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='Class constant id'>Class</span> <span class='eqq op'>===</span> <span class='@obj ivar id'>@obj</span>
  <span class='allocators identifier id'>allocators</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='symbol val'>:new</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='allocators identifier id'>allocators</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='ExpectationRecorder constant id'>ExpectationRecorder</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='allocators identifier id'>allocators</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='allocate_method identifier id'>allocate_method</span><span class='bitor op'>|</span>
    <span class='comment val'># HACK: Without the following lambda, Ruby 1.9 will not bind</span>
    <span class='comment val'># the allocate_method parameter correctly.</span>
    <span class='lambda identifier id'>lambda</span> <span class='lbrace token'>{</span> <span class='rbrace token'>}</span> 
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='allocate_method identifier id'>allocate_method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='and_return identifier id'>and_return</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='bitor op'>|</span>
      <span class='new_obj identifier id'>new_obj</span> <span class='assign token'>=</span> <span class='invoke_original identifier id'>invoke_original</span><span class='lparen token'>(</span><span class='allocate_method identifier id'>allocate_method</span><span class='comma token'>,</span> <span class='args identifier id'>args</span><span class='rparen token'>)</span>
      <span class='mock identifier id'>mock</span> <span class='assign token'>=</span> <span class='flexmock_container identifier id'>flexmock_container</span><span class='dot token'>.</span><span class='flexmock identifier id'>flexmock</span><span class='lparen token'>(</span><span class='new_obj identifier id'>new_obj</span><span class='rparen token'>)</span>
      <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='mock identifier id'>mock</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
      <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='apply identifier id'>apply</span><span class='lparen token'>(</span><span class='mock identifier id'>mock</span><span class='rparen token'>)</span>
      <span class='new_obj identifier id'>new_obj</span>
    <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
  <span class='result identifier id'>result</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_receive</h3>
</div><div id="should_receive-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_receive</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq:
</p>
<pre class="code">
   <span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='symbol val'>:method_name</span><span class='rparen token'>)</span>
   <span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='symbol val'>:method1</span><span class='comma token'>,</span> <span class='method2 identifier id'>method2</span><span class='comma token'>,</span> <span class='dot3 op'>...</span><span class='rparen token'>)</span>
   <span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='symbol val'>:meth1</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='result1 identifier id'>result1</span><span class='comma token'>,</span> <span class='symbol val'>:meth2</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='result2 identifier id'>result2</span><span class='comma token'>,</span> <span class='dot3 op'>...</span><span class='rparen token'>)</span>
</pre>
<p>
Declare that the partial mock should receive a message with the given name.
</p>
<p>
If more than one method name is given, then the mock object should expect
to receive all the listed melthods. If a hash of method name/value pairs is
given, then the each method will return the associated result. Any
expectations applied to the result of <tt>should_receive</tt> will be
applied to all the methods defined in the argument list.
</p>
<p>
An expectation object for the method name is returned as the result of this
method. Further expectation constraints can be added by chaining to the
result.
</p>
<p>
See Expectation for a list of declarators that can be used.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/flexmock/partial_mock.rb', line 80</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jimweirich/flexmock/blob/4ac3b827938d4a771fb2e92a9fed52b83a96550a/lib/flexmock/partial_mock.rb#L80">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">80
81
82
83
84
85
86
87
88
89</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='ContainerHelper constant id'>ContainerHelper</span><span class='dot token'>.</span><span class='parse_should_args identifier id'>parse_should_args</span><span class='lparen token'>(</span><span class='@mock ivar id'>@mock</span><span class='comma token'>,</span> <span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='sym identifier id'>sym</span><span class='bitor op'>|</span>
    <span class='unless unless kw'>unless</span> <span class='@methods_proxied ivar id'>@methods_proxied</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='sym identifier id'>sym</span><span class='rparen token'>)</span>
      <span class='hide_existing_method identifier id'>hide_existing_method</span><span class='lparen token'>(</span><span class='sym identifier id'>sym</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='ex identifier id'>ex</span> <span class='assign token'>=</span> <span class='@mock ivar id'>@mock</span><span class='dot token'>.</span><span class='should_receive identifier id'>should_receive</span><span class='lparen token'>(</span><span class='sym identifier id'>sym</span><span class='rparen token'>)</span>
    <span class='ex identifier id'>ex</span><span class='dot token'>.</span><span class='mock identifier id'>mock</span> <span class='assign token'>=</span> <span class='self self kw'>self</span>
    <span class='ex identifier id'>ex</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>