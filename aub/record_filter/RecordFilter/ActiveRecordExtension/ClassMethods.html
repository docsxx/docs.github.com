<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: RecordFilter::ActiveRecordExtension::ClassMethods</title>
  </head>
  <body>
    <div id="content">
      <div class="section module RecordFilter_ActiveRecordExtension_ClassMethods">
  <h1 class="title">Module: RecordFilter::ActiveRecordExtension::ClassMethods</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a title="#filter" href="#filter-instance_method">#filter</a></span><span class='args'>(&amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Create a filter on the fly to find a set of results that matches the given
criteria.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a title="#named_filter" href="#named_filter-instance_method">#named_filter</a></span><span class='args'>(name, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Create a new named filter, which defines a function on the callee class
that provides easy access to the query defined by the filter.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a title="#named_filters" href="#named_filters-instance_method">#named_filters</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Retreive a list of named filters that apply to a specific class, including
ones that were defined in its superclasses.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>filter</h3>
</div><div id="filter-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>filter</span><span class='args'>(&amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Create a filter on the fly to find a set of results that matches the given
criteria. This method, which can be called on any ActiveRecord::Base
subclass, accepts a block that defines the contents of the filter and
returns a Filter object that contains a list of the objects resulting from
the query. See the documentation for RecordFilter::DSL for more information
on how to specify the filter.
</p>
<h4>Parameters</h4>
<table>
<tr><td valign="top">block&lt;Proc&gt;:</td><td>A block that specifies the contents of the filter.

</td></tr>
</table>
<h4>Returns</h4>
<table>
<tr><td valign="top">Filter:</td><td>The Filter object resulting from the query, which can be treated as an
array of the results.

</td></tr>
</table>
<h4>Example</h4>
<pre class="code">
  <span class='Blog constant id'>Blog</span><span class='dot token'>.</span><span class='filter identifier id'>filter</span> <span class='do do kw'>do</span>
    <span class='having identifier id'>having</span><span class='lparen token'>(</span><span class='symbol val'>:posts</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='with identifier id'>with</span><span class='lparen token'>(</span><span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


30
31
32</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/record_filter/active_record.rb', line 30</span>

<span class='def def kw'>def</span> <span class='filter identifier id'>filter</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='Filter constant id'>Filter</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>named_filter</h3>
</div><div id="named_filter-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>named_filter</span><span class='args'>(name, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Create a new named filter, which defines a function on the callee class
that provides easy access to the query defined by the filter. Any number of
named filters can be created on a class, and they can also be chained to
create complex queries out of simple building blocks. In addition, named
filters can accept any number of arguments in order to allow customization
of their behavior when used. For more details on how to specify the
contents of named filters, see the documentation for RecordFilter::DSL.
</p>
<pre class="code">
  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='named_filter identifier id'>named_filter</span><span class='lparen token'>(</span><span class='symbol val'>:without_permalink</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='with identifier id'>with</span><span class='lparen token'>(</span><span class='symbol val'>:permalink</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='named_filter identifier id'>named_filter</span><span class='lparen token'>(</span><span class='symbol val'>:created_after</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='time identifier id'>time</span><span class='bitor op'>|</span>
    <span class='with identifier id'>with</span><span class='lparen token'>(</span><span class='symbol val'>:created_at</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gt identifier id'>gt</span><span class='lparen token'>(</span><span class='time identifier id'>time</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='without_permalink identifier id'>without_permalink</span>                             <span class='comment val'># :conditions =&gt; ['permalink IS NULL']</span>
  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='created_after identifier id'>created_after</span><span class='lparen token'>(</span><span class='float val'>3</span><span class='dot token'>.</span><span class='hours identifier id'>hours</span><span class='dot token'>.</span><span class='ago identifier id'>ago</span><span class='rparen token'>)</span>                    <span class='comment val'># :conditions =&gt; ['created_at &gt; ?', 3.hours.ago]</span>
  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='without_permalink identifier id'>without_permalink</span><span class='dot token'>.</span><span class='created_after identifier id'>created_after</span><span class='lparen token'>(</span><span class='float val'>3</span><span class='dot token'>.</span><span class='hours identifier id'>hours</span><span class='dot token'>.</span><span class='ago identifier id'>ago</span><span class='rparen token'>)</span>  <span class='comment val'># :conditions =&gt; ['permalink IS NULL AND created_at &gt; ?', 3.hours.ago]</span>
</pre>
<h4>Raises</h4>
<table>
<tr><td valign="top">InvalidFilterNameException:</td><td>There is already a named filter with the given name on this class or one of
its superclasses.

</td></tr>
</table>
<h4>Returns</h4>
<p>
nil
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/record_filter/active_record.rb', line 61</span>

<span class='def def kw'>def</span> <span class='named_filter identifier id'>named_filter</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='named_filters identifier id'>named_filters</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
    <span class='raise identifier id'>raise</span> <span class='InvalidFilterNameException constant id'>InvalidFilterNameException</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;A named filter with the name #{name} already exists on the class #{self.name}.&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='local_named_filters identifier id'>local_named_filters</span> <span class='lshft op'>&lt;&lt;</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span> 
  <span class='DSL constant id'>DSL</span><span class='colon2 op'>::</span><span class='DSLFactory constant id'>DSLFactory</span><span class='colon2 op'>::</span><span class='subclass identifier id'>subclass</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='module_eval identifier id'>module_eval</span> <span class='do do kw'>do</span>
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='lparen token'>(</span><span class='class class kw'>class</span> <span class='lshft op'>&lt;&lt;</span> <span class='self self kw'>self</span><span class='semicolon token'>;</span> <span class='self self kw'>self</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span> <span class='do do kw'>do</span>
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='bitor op'>|</span>
      <span class='Filter constant id'>Filter</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>named_filters</h3>
</div><div id="named_filters-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>named_filters</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Retreive a list of named filters that apply to a specific class, including
ones that were defined in its superclasses.
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">Array:</td><td>A list of the names of the named filters, as symbols.

</td></tr>
</table>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


85
86
87
88
89</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/record_filter/active_record.rb', line 85</span>

<span class='def def kw'>def</span> <span class='named_filters identifier id'>named_filters</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='local_named_filters identifier id'>local_named_filters</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='concat identifier id'>concat</span><span class='lparen token'>(</span><span class='superclass identifier id'>superclass</span><span class='dot token'>.</span><span class='named_filters identifier id'>named_filters</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='superclass identifier id'>superclass</span> <span class='andop op'>&amp;&amp;</span> <span class='superclass identifier id'>superclass</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:named_filters</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='result identifier id'>result</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>