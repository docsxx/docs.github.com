<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jtprince's mspire - Class: ProteinSummary - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jtprince/commits/mspire/master" rel="alternate" title="Recent Commits to mspire:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jtprince", "mspire", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jtprince", "mspire", "80153ba0b61f60bde6c4215c335658cc8856d3de", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jtprince/mspire/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jtprince/mspire/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jtprince/mspire/network">Network</a></li>            
            <li class=""><a href="http://github.com/jtprince/mspire/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jtprince/mspire">Wiki</a></li>
            <li class=""><a href="http://github.com/jtprince/mspire/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jtprince/mspire">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jtprince">jtprince</a> / <b><a href="http://github.com/jtprince/mspire/tree">mspire</a></b>        
                <a id="namespaces_button" rel="jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class ProteinSummary">
  <h1>Class: ProteinSummary</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a title="ProteinSummary::HTML" href="ProteinSummary/HTML.html">ProteinSummary::HTML</a></p>
</div><div class="section docstring">
  <p>
def margin
</p>
<pre class="code">
   <span class='self self kw'>self</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/^\s*\|/</span><span class='comma token'>,</span><span class='string val'>''</span><span class='rparen token'>)</span>
 <span class='end end kw'>end</span>
</pre>
<p>
end
</p>

</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#accession-instance_method">#accession</span><span class='args'>(name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
attempts to get the NCBI gi code.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#bioworks_output-instance_method">#bioworks_output</span><span class='args'>(spec_id, outfn, file = nil, false_flag_re = nil, fppr_output_as_html = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
takes spec_id object the outfn is the output filename opt is an OpenStruct
that holds opt.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#bioworks_script_info-instance_method">#bioworks_script_info</span><span class='args'>(obj)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_from_command_line_args-instance_method">#create_from_command_line_args</span><span class='args'>(argv)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_precision_argv-instance_method">#create_precision_argv</span><span class='args'>(file, opt)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#error_info-instance_method">#error_info</span><span class='args'>(prot_file_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Takes the -prot.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#file_as_decoy_to_html-instance_method">#file_as_decoy_to_html</span><span class='args'>(string)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
transforms the output string of file_as_decoy into html.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#file_info-instance_method">#file_info</span><span class='args'>(file)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#filter_and_sort-instance_method">#filter_and_sort</span><span class='args'>(uniq_prots, flag = nil, prefix = false)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
filters on the false positive regex and sorts by prot probability.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#flag_to_regex-instance_method">#flag_to_regex</span><span class='args'>(flag, prefix = false)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#mspire_version-instance_method">#mspire_version</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#num_prots_above_fppr-instance_method">#num_prots_above_fppr</span><span class='args'>(prots, desired_fppr)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
assumes that these are sorted on probability desired_fppr is a float
returns [number_of_prots, actual_fppr].
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#num_prots_to_html-instance_method">#num_prots_to_html</span><span class='args'>(desired_cutoff, actual_cutoff, num_proteins)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#output_peptide_counts_file-instance_method">#output_peptide_counts_file</span><span class='args'>(prots, filename)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
given a list of proteins, output a tab delimited textfile with protein name
and the total number of peptides found.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#peptide_cell-instance_method">#peptide_cell</span><span class='args'>(prot_num, peptide_sequences)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
given a list of peptide sequences creates javascript to hide/show them.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#prefix_as_decoy_to_html-instance_method">#prefix_as_decoy_to_html</span><span class='args'>(string)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
transforms the output string of file_as_decoy into html.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#print_html_pieces-instance_method">#print_html_pieces</span><span class='args'>(file, *pieces)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#proph_output-instance_method">#proph_output</span><span class='args'>(file, outfn, opt, fppr_output_as_html)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#protproph_script_info-instance_method">#protproph_script_info</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#ref_html-instance_method">#ref_html</span><span class='args'>(gi, name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#script_info-instance_method">#script_info</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#table_rows-instance_method">#table_rows</span><span class='args'>(uniq_prots, prefix, false_positive_rate_percent, num_cols, desired_fppr, actual_percent_fp, annotations = nil, peptide_count_filename = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
#readable_previous_fppr_rate_percent = sprintf(&quot;%.
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a title="ProteinSummary::HTML" href="ProteinSummary/HTML.html">ProteinSummary::HTML</a></h2>
    <p><span class='name'><a title="at" href="ProteinSummary/HTML.html#at-instance_method">at</a></span>, <span class='name'><a title="header" href="ProteinSummary/HTML.html#header-instance_method">header</a></span>, <span class='name'><a title="style" href="ProteinSummary/HTML.html#style-instance_method">style</a></span>, <span class='name'><a title="table" href="ProteinSummary/HTML.html#table-instance_method">table</a></span>, <span class='name'><a title="tds" href="ProteinSummary/HTML.html#tds-instance_method">tds</a></span>, <span class='name'><a title="ths" href="ProteinSummary/HTML.html#ths-instance_method">ths</a></span>, <span class='name'><a title="tr" href="ProteinSummary/HTML.html#tr-instance_method">tr</a></span>, <span class='name'><a title="trailer" href="ProteinSummary/HTML.html#trailer-instance_method">trailer</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>accession</h3>
</div><div id="accession-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>accession</span><span class='args'>(name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
attempts to get the NCBI gi code
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 141</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L141">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">141
142
143
144
145
146
147</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='accession identifier id'>accession</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='string val'>'|'</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='comma token'>,</span><span class='integer val'>3</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>'gi|'</span><span class='rparen token'>)</span>
    <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'|'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>
    <span class='name identifier id'>name</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>bioworks_output</h3>
</div><div id="bioworks_output-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>bioworks_output</span><span class='args'>(spec_id, outfn, file = nil, false_flag_re = nil, fppr_output_as_html = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
takes spec_id object the outfn is the output filename opt is an OpenStruct
that holds opt.f = the false prefix
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 350</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L350">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='bioworks_output identifier id'>bioworks_output</span><span class='lparen token'>(</span><span class='spec_id identifier id'>spec_id</span><span class='comma token'>,</span> <span class='outfn identifier id'>outfn</span><span class='comma token'>,</span> <span class='file identifier id'>file</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='false_flag_re identifier id'>false_flag_re</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='fppr_output_as_html identifier id'>fppr_output_as_html</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='fppr_output_as_html identifier id'>fppr_output_as_html</span> <span class='opasgn op'>||=</span> <span class='string val'>''</span>
  <span class='header_anchors identifier id'>header_anchors</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'#'</span><span class='comma token'>,</span> <span class='string val'>'number'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'prob'</span><span class='comma token'>,</span><span class='string val'>'protein probability (for Bioworks, lower is better)'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'ref'</span><span class='comma token'>,</span> <span class='string val'>'gi number if available (or complete reference)'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'annotation'</span><span class='comma token'>,</span> <span class='string val'>'annotation from the fasta file'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'%cov'</span><span class='comma token'>,</span> <span class='string val'>'percent of protein sequence covered by corresponding peptides'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'peps'</span><span class='comma token'>,</span> <span class='string val'>'unique peptides identified (at any confidence) Click number to show/hide.'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'#peps'</span><span class='comma token'>,</span> <span class='string val'>'total number of peptides seen (not unique)'</span><span class='rparen token'>)</span><span class='rbrack token'>]</span>
  <span class='num_cols identifier id'>num_cols</span> <span class='assign token'>=</span> <span class='header_anchors identifier id'>header_anchors</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='theaders identifier id'>theaders</span> <span class='assign token'>=</span> <span class='ths identifier id'>ths</span><span class='lparen token'>(</span><span class='header_anchors identifier id'>header_anchors</span><span class='rparen token'>)</span>
  <span class='proteins identifier id'>proteins</span> <span class='assign token'>=</span> <span class='spec_id identifier id'>spec_id</span><span class='dot token'>.</span><span class='prots identifier id'>prots</span>
  <span class='protein_num identifier id'>protein_num</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='rows identifier id'>rows</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
  <span class='proteins identifier id'>proteins</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prot identifier id'>prot</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='false_flag_re identifier id'>false_flag_re</span> <span class='andop op'>&amp;&amp;</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='reference identifier id'>reference</span> <span class='match op'>=~</span> <span class='false_flag_re identifier id'>false_flag_re</span>
      <span class='next next kw'>next</span>
    <span class='end end kw'>end</span>
    <span class='uniq_peps identifier id'>uniq_peps</span> <span class='assign token'>=</span> <span class='Hash constant id'>Hash</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='h identifier id'>h</span><span class='comma token'>,</span><span class='k identifier id'>k</span><span class='bitor op'>|</span> <span class='h identifier id'>h</span><span class='lbrack token'>[</span><span class='k identifier id'>k</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span><span class='semicolon token'>;</span> <span class='rbrace token'>}</span>
    <span class='protein_num identifier id'>protein_num</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
    <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='peps identifier id'>peps</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='pep identifier id'>pep</span><span class='bitor op'>|</span>
      <span class='uniq_peps identifier id'>uniq_peps</span><span class='lbrack token'>[</span><span class='pep identifier id'>pep</span><span class='dot token'>.</span><span class='sequence identifier id'>sequence</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'.'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='end end kw'>end</span>
    <span class='pieces identifier id'>pieces</span> <span class='assign token'>=</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='reference identifier id'>reference</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>' '</span><span class='rparen token'>)</span>
    <span class='long_prot_name identifier id'>long_prot_name</span> <span class='assign token'>=</span> <span class='pieces identifier id'>pieces</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span> 
    <span class='annotation identifier id'>annotation</span> <span class='assign token'>=</span> <span class='pieces identifier id'>pieces</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>' '</span><span class='rparen token'>)</span>
    <span class='accession identifier id'>accession</span> <span class='assign token'>=</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='accession identifier id'>accession</span>
    <span class='if if kw'>if</span> <span class='accession identifier id'>accession</span> <span class='eq op'>==</span> <span class='string val'>'0'</span> <span class='semicolon token'>;</span> <span class='accession identifier id'>accession</span> <span class='assign token'>=</span> <span class='long_prot_name identifier id'>long_prot_name</span> <span class='end end kw'>end</span>
    <span class='rows identifier id'>rows</span> <span class='lshft op'>&lt;&lt;</span> <span class='tr identifier id'>tr</span><span class='lbrace token'>{</span> <span class='tds identifier id'>tds</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='protein_num identifier id'>protein_num</span><span class='comma token'>,</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='protein_probability identifier id'>protein_probability</span><span class='comma token'>,</span> <span class='ref_html identifier id'>ref_html</span><span class='lparen token'>(</span><span class='accession identifier id'>accession</span><span class='comma token'>,</span> <span class='long_prot_name identifier id'>long_prot_name</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='annotation identifier id'>annotation</span><span class='comma token'>,</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='coverage identifier id'>coverage</span><span class='comma token'>,</span> <span class='peptide_cell identifier id'>peptide_cell</span><span class='lparen token'>(</span><span class='protein_num identifier id'>protein_num</span><span class='comma token'>,</span> <span class='uniq_peps identifier id'>uniq_peps</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='peps identifier id'>peps</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
  <span class='table_string identifier id'>table_string</span> <span class='assign token'>=</span> <span class='table identifier id'>table</span> <span class='do do kw'>do</span> 
    <span class='tr identifier id'>tr</span><span class='lbrace token'>{</span><span class='theaders identifier id'>theaders</span><span class='rbrace token'>}</span> <span class='plus op'>+</span> <span class='rows identifier id'>rows</span>
  <span class='end end kw'>end</span>
  <span class='print_html_pieces identifier id'>print_html_pieces</span><span class='lparen token'>(</span><span class='outfn identifier id'>outfn</span><span class='comma token'>,</span> <span class='header identifier id'>header</span><span class='comma token'>,</span> <span class='fppr_output_as_html identifier id'>fppr_output_as_html</span><span class='comma token'>,</span> <span class='file_info identifier id'>file_info</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='bioworks_script_info identifier id'>bioworks_script_info</span><span class='lparen token'>(</span><span class='spec_id identifier id'>spec_id</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='table_string identifier id'>table_string</span><span class='comma token'>,</span> <span class='trailer identifier id'>trailer</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span> <span class='comment val'># bioworks_output</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>bioworks_script_info</h3>
</div><div id="bioworks_script_info-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>bioworks_script_info</span><span class='args'>(obj)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 253</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L253">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">253
254
255
256
257
258
259</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='bioworks_script_info identifier id'>bioworks_script_info</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='rparen token'>)</span>
  <span class='version identifier id'>version</span> <span class='assign token'>=</span> <span class='string val'>&quot;3.2??&quot;</span>
  <span class='if if kw'>if</span> <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='version identifier id'>version</span>
    <span class='version identifier id'>version</span> <span class='assign token'>=</span> <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='version identifier id'>version</span>
  <span class='end end kw'>end</span>
  <span class='script_info identifier id'>script_info</span><span class='lbrace token'>{</span><span class='dstring node'>&quot;Bioworks version #{version}&quot;</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_from_command_line_args</h3>
</div><div id="create_from_command_line_args-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_from_command_line_args</span><span class='args'>(argv)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 410</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L410">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create_from_command_line_args identifier id'>create_from_command_line_args</span><span class='lparen token'>(</span><span class='argv identifier id'>argv</span><span class='rparen token'>)</span>
  <span class='@orig_argv ivar id'>@orig_argv</span> <span class='assign token'>=</span> <span class='argv identifier id'>argv</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>

  <span class='opt identifier id'>opt</span> <span class='assign token'>=</span> <span class='OpenStruct constant id'>OpenStruct</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='DEF_PREFIX constant id'>DEF_PREFIX</span>
  <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='OptionParser constant id'>OptionParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='op identifier id'>op</span><span class='bitor op'>|</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='banner identifier id'>banner</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;usage: #{File.basename(__FILE__)} [options] &lt;file&gt;.xml ...&quot;</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span> <span class='string val'>&quot;    where file = bioworks -or- &lt;run&gt;-prot (prophet output)&quot;</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span> <span class='string val'>&quot;    outputs: &lt;file&gt;.summary.html&quot;</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span> <span class='string val'>&quot;&quot;</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-f&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--false &lt;prefix&gt;&quot;</span><span class='comma token'>,</span> <span class='dstring node'>&quot;ignore proteins with flag (def: #{DEF_PREFIX})&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span> <span class='rbrace token'>}</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;--prefix&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;false flag for prefixes only&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='prefix identifier id'>prefix</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span> <span class='rbrace token'>}</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-p&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--precision&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;include the output from precision.rb&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='p identifier id'>p</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span> <span class='rbrace token'>}</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span><span class='lparen token'>(</span><span class='string val'>&quot;             if --precision then -f is used to specify a file or prefix&quot;</span><span class='rparen token'>)</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span><span class='lparen token'>(</span><span class='string val'>&quot;             that indicates the false positives.&quot;</span><span class='rparen token'>)</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;--peptide_count &lt;filename&gt;&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;outputs text file with # peptides per protein&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='peptide_count identifier id'>peptide_count</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span><span class='rbrace token'>}</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span> <span class='string val'>&quot;&quot;</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span> <span class='dstring node'>&quot;Options for #{PRECISION_PROGRAM_BASE}.rb :&quot;</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='dstring node'>&quot;--#{PRECISION_PROGRAM_BASE}&quot;</span><span class='comma token'>,</span> <span class='dstring node'>&quot;include output of #{PRECISION_PROGRAM_BASE}.rb,&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='precision identifier id'>precision</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span><span class='rbrace token'>}</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span><span class='lparen token'>(</span><span class='dstring node'>&quot;                                     type '#{PRECISION_PROGRAM_BASE}.rb' for details&quot;</span><span class='rparen token'>)</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span> <span class='string val'>&quot;&quot;</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span> <span class='string val'>&quot;specific to ProteinProphet (with no concatenated DB):&quot;</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;-c&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;--cutoff percent&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;false positive predictive rate (FPPR)% for given cutoff&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='c identifier id'>c</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span> <span class='rbrace token'>}</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;--cut_at percent&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;only reports proteins within FPPR %&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='cut_at identifier id'>cut_at</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span> <span class='rbrace token'>}</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='string val'>&quot;--get_annotation&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;retrieves annotation by gi code&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='get_annotation identifier id'>get_annotation</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span><span class='rbrace token'>}</span>
    <span class='op identifier id'>op</span><span class='dot token'>.</span><span class='separator identifier id'>separator</span> <span class='string val'>&quot;             (use if your proteins have gi's but no annotation) &quot;</span>
  <span class='end end kw'>end</span>

  <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='parse! fid id'>parse!</span><span class='lparen token'>(</span><span class='argv identifier id'>argv</span><span class='rparen token'>)</span>

  <span class='if if kw'>if</span> <span class='argv identifier id'>argv</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='lt op'>&lt;</span> <span class='integer val'>1</span>
    <span class='puts identifier id'>puts</span> <span class='opts identifier id'>opts</span>
    <span class='return return kw'>return</span>
  <span class='end end kw'>end</span>

  <span class='fppr_output_as_html identifier id'>fppr_output_as_html</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='files identifier id'>files</span> <span class='assign token'>=</span> <span class='argv identifier id'>argv</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span>
  <span class='files identifier id'>files</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='file identifier id'>file</span><span class='bitor op'>|</span> 
    <span class='outfn identifier id'>outfn</span> <span class='assign token'>=</span> <span class='file identifier id'>file</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\.xml$/</span><span class='comma token'>,</span> <span class='string val'>'.summary.html'</span><span class='rparen token'>)</span>
    <span class='outfn identifier id'>outfn</span> <span class='assign token'>=</span> <span class='outfn identifier id'>outfn</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\.srg$/</span><span class='comma token'>,</span> <span class='string val'>'.summary.html'</span><span class='rparen token'>)</span>
    <span class='comment val'>## False Positive Rate Calculation:</span>
    <span class='if if kw'>if</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='precision identifier id'>precision</span>
      <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='o identifier id'>o</span> <span class='assign token'>=</span> <span class='outfn identifier id'>outfn</span> <span class='comment val'># won't actually be written over, but used</span>
      <span class='to_use_argv identifier id'>to_use_argv</span> <span class='assign token'>=</span> <span class='create_precision_argv identifier id'>create_precision_argv</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='rparen token'>)</span>
      <span class='lparen token'>(</span><span class='out_string identifier id'>out_string</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='rparen token'>)</span> <span class='assign token'>=</span> <span class='Prec constant id'>Prec</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='dot token'>.</span><span class='precision identifier id'>precision</span><span class='lparen token'>(</span><span class='to_use_argv identifier id'>to_use_argv</span><span class='rparen token'>)</span>
      <span class='fppr_output_as_html identifier id'>fppr_output_as_html</span> <span class='assign token'>=</span> <span class='prefix_as_decoy_to_html identifier id'>prefix_as_decoy_to_html</span><span class='lparen token'>(</span><span class='out_string identifier id'>out_string</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='case case kw'>case</span> <span class='SpecID constant id'>SpecID</span><span class='dot token'>.</span><span class='file_type identifier id'>file_type</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='string val'>&quot;protproph&quot;</span>
      <span class='comment val'>#spec_id = SpecID.new(file)</span>
      <span class='proph_output identifier id'>proph_output</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='comma token'>,</span> <span class='outfn identifier id'>outfn</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='comma token'>,</span> <span class='fppr_output_as_html identifier id'>fppr_output_as_html</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='string val'>&quot;bioworks&quot;</span>
      <span class='spec_id identifier id'>spec_id</span> <span class='assign token'>=</span> <span class='SpecID constant id'>SpecID</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span>

      <span class='false_regex identifier id'>false_regex</span> <span class='assign token'>=</span> <span class='flag_to_regex identifier id'>flag_to_regex</span><span class='lparen token'>(</span><span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='f identifier id'>f</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='prefix identifier id'>prefix</span><span class='rparen token'>)</span>
      <span class='bioworks_output identifier id'>bioworks_output</span><span class='lparen token'>(</span><span class='spec_id identifier id'>spec_id</span><span class='comma token'>,</span> <span class='outfn identifier id'>outfn</span><span class='comma token'>,</span> <span class='file identifier id'>file</span><span class='comma token'>,</span> <span class='false_regex identifier id'>false_regex</span><span class='comma token'>,</span> <span class='fppr_output_as_html identifier id'>fppr_output_as_html</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span> 
      <span class='abort identifier id'>abort</span> <span class='dstring node'>&quot;filetype for #{file} not recognized!&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

<span class='end end kw'>end</span> <span class='comment val'># method create_from_command_line</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_precision_argv</h3>
</div><div id="create_precision_argv-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_precision_argv</span><span class='args'>(file, opt)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 474</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L474">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">474
475
476
477
478
479
480
481</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create_precision_argv identifier id'>create_precision_argv</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='rparen token'>)</span>
  <span class='comment val'># include only those options specific</span>
  <span class='new_argv identifier id'>new_argv</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='file identifier id'>file</span><span class='rbrack token'>]</span>
  <span class='if if kw'>if</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='prefix identifier id'>prefix</span> <span class='semicolon token'>;</span> <span class='new_argv identifier id'>new_argv</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>'--prefix'</span> <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='f identifier id'>f</span> <span class='semicolon token'>;</span> <span class='new_argv identifier id'>new_argv</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>'-f'</span> <span class='lshft op'>&lt;&lt;</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='f identifier id'>f</span> <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='o identifier id'>o</span> <span class='semicolon token'>;</span> <span class='new_argv identifier id'>new_argv</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>'-o'</span> <span class='lshft op'>&lt;&lt;</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='o identifier id'>o</span> <span class='end end kw'>end</span>
  <span class='new_argv identifier id'>new_argv</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>error_info</h3>
</div><div id="error_info-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>error_info</span><span class='args'>(prot_file_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Takes the -prot.xml filename and grabs the png file (if available)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 134</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L134">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">134
135
136
137
138</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='error_info identifier id'>error_info</span><span class='lparen token'>(</span><span class='prot_file_name identifier id'>prot_file_name</span><span class='rparen token'>)</span>
  <span class='img identifier id'>img</span> <span class='assign token'>=</span> <span class='prot_file_name identifier id'>prot_file_name</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='string val'>'.xml'</span><span class='comma token'>,</span> <span class='string val'>'.png'</span><span class='rparen token'>)</span>
  <span class='img_bn identifier id'>img_bn</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='basename identifier id'>basename</span><span class='lparen token'>(</span><span class='img identifier id'>img</span><span class='rparen token'>)</span>
    <span class='dstring node'>&quot;&lt;div id=\&quot;error\&quot;&gt;&lt;img src=\&quot;#{img_bn}\&quot; alt=\&quot;[ Optional: To view error/sensitivity image, put #{img_bn} in the same directory as #{File.basename(prot_file_name)} ]\&quot;/&gt;\n&lt;/div&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>file_as_decoy_to_html</h3>
</div><div id="file_as_decoy_to_html-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>file_as_decoy_to_html</span><span class='args'>(string)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
transforms the output string of file_as_decoy into html
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 391</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L391">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">391
392
393
394
395
396
397
398
399
400</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='file_as_decoy_to_html identifier id'>file_as_decoy_to_html</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>  
  <span class='lines identifier id'>lines</span> <span class='assign token'>=</span> <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span>
  <span class='comment val'>#puts lines ?? is this supposed to be commented out?</span>
  <span class='lines identifier id'>lines</span> <span class='assign token'>=</span> <span class='lines identifier id'>lines</span><span class='dot token'>.</span><span class='reject identifier id'>reject</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span> <span class='obj identifier id'>obj</span> <span class='match op'>=~</span> <span class='regexp val'>/\*{10}/</span> <span class='end end kw'>end</span>
  <span class='lines identifier id'>lines</span><span class='dot token'>.</span><span class='map! fid id'>map!</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span> <span class='dstring node'>&quot;#{line}&lt;br/&gt;&quot;</span> <span class='end end kw'>end</span>
  <span class='dstring node'>&quot;&lt;div class=\&quot;fppr\&quot;&gt;
  &lt;h3&gt;Classification Analysis&lt;/h3&gt;
  #{lines.join(&quot;\n&quot;)} 
  &lt;/div&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>file_info</h3>
</div><div id="file_info-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>file_info</span><span class='args'>(file)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 246</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L246">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">246
247
248
249
250
251</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='file_info identifier id'>file_info</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;&lt;div class=\&quot;file_info\&quot;&gt;&lt;h3&gt;Source File Information&lt;/h3&gt;File: #{File.expand_path(file)}
  &lt;br/&gt;Last Modified: #{File.mtime(file)}
  &lt;br/&gt;Size: #{File.size(file)/1000} KB
  &lt;/div&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>filter_and_sort</h3>
</div><div id="filter_and_sort-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>filter_and_sort</span><span class='args'>(uniq_prots, flag = nil, prefix = false)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
filters on the false positive regex and sorts by prot probability
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 172</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L172">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">172
173
174
175
176
177
178
179
180</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='filter_and_sort identifier id'>filter_and_sort</span><span class='lparen token'>(</span><span class='uniq_prots identifier id'>uniq_prots</span><span class='comma token'>,</span> <span class='flag identifier id'>flag</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='prefix identifier id'>prefix</span><span class='assign token'>=</span><span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='false_flag_re identifier id'>false_flag_re</span> <span class='assign token'>=</span> <span class='flag_to_regex identifier id'>flag_to_regex</span><span class='lparen token'>(</span><span class='flag identifier id'>flag</span><span class='comma token'>,</span> <span class='prefix identifier id'>prefix</span><span class='rparen token'>)</span> 
  <span class='sorted identifier id'>sorted</span> <span class='assign token'>=</span> <span class='uniq_prots identifier id'>uniq_prots</span><span class='dot token'>.</span><span class='sort_by identifier id'>sort_by</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='prt identifier id'>prt</span><span class='bitor op'>|</span> <span class='lbrack token'>[</span><span class='prt identifier id'>prt</span><span class='dot token'>.</span><span class='_probability identifier id'>_probability</span><span class='comma token'>,</span> <span class='prt identifier id'>prt</span><span class='dot token'>.</span><span class='parent identifier id'>parent</span><span class='dot token'>.</span><span class='_probability identifier id'>_probability</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='reverse identifier id'>reverse</span>
  <span class='comment val'>## filter on prefix</span>
  <span class='if if kw'>if</span> <span class='prefix identifier id'>prefix</span>
    <span class='sorted identifier id'>sorted</span> <span class='assign token'>=</span> <span class='sorted identifier id'>sorted</span><span class='dot token'>.</span><span class='reject identifier id'>reject</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='prot identifier id'>prot</span><span class='bitor op'>|</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_protein_name identifier id'>_protein_name</span> <span class='match op'>=~</span> <span class='false_flag_re identifier id'>false_flag_re</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
  <span class='sorted identifier id'>sorted</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>flag_to_regex</h3>
</div><div id="flag_to_regex-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>flag_to_regex</span><span class='args'>(flag, prefix = false)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 149</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L149">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">149
150
151
152
153
154
155
156
157
158
159</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='flag_to_regex identifier id'>flag_to_regex</span><span class='lparen token'>(</span><span class='flag identifier id'>flag</span><span class='comma token'>,</span> <span class='prefix identifier id'>prefix</span><span class='assign token'>=</span><span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='flag identifier id'>flag</span>
    <span class='if if kw'>if</span> <span class='prefix identifier id'>prefix</span>
      <span class='dregexp node'>/^#{Regexp.escape(flag)}/</span>
    <span class='else else kw'>else</span>
      <span class='dregexp node'>/#{Regexp.escape(flag)}/</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>mspire_version</h3>
</div><div id="mspire_version-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>mspire_version</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 275</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L275">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">275
276
277
278
279
280
281
282
283
284</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='mspire_version identifier id'>mspire_version</span>
  <span class='string identifier id'>string</span> <span class='assign token'>=</span> <span class='string val'>&quot;mspire&quot;</span>
  <span class='begin begin kw'>begin</span>
    <span class='if if kw'>if</span> <span class='xstring val'>`gem list --local mspire`</span> <span class='match op'>=~</span> <span class='regexp val'>/mspire \((.*?)\)/</span>
      <span class='string identifier id'>string</span> <span class='lshft op'>&lt;&lt;</span> <span class='lparen token'>(</span><span class='string val'>&quot; v&quot;</span> <span class='plus op'>+</span> <span class='$1 nth_ref id'>$1</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span>
  <span class='end end kw'>end</span>
  <span class='string identifier id'>string</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>num_prots_above_fppr</h3>
</div><div id="num_prots_above_fppr-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>num_prots_above_fppr</span><span class='args'>(prots, desired_fppr)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
assumes that these are sorted on probability desired_fppr is a float
returns [number_of_prots, actual_fppr]
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 185</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L185">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='num_prots_above_fppr identifier id'>num_prots_above_fppr</span><span class='lparen token'>(</span><span class='prots identifier id'>prots</span><span class='comma token'>,</span> <span class='desired_fppr identifier id'>desired_fppr</span><span class='rparen token'>)</span>
  <span class='current_fppr_rate_percent identifier id'>current_fppr_rate_percent</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='integer val'>.0</span>
  <span class='previous_fppr_rate_percent identifier id'>previous_fppr_rate_percent</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='integer val'>.0</span>
  <span class='current_sum_one_minus_prob identifier id'>current_sum_one_minus_prob</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='integer val'>.0</span>
  <span class='proteins_within_fppr identifier id'>proteins_within_fppr</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='actual_fppr identifier id'>actual_fppr</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='already_found identifier id'>already_found</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='prot_cnt identifier id'>prot_cnt</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='prots identifier id'>prots</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prot identifier id'>prot</span><span class='bitor op'>|</span>
    <span class='prot_cnt identifier id'>prot_cnt</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
    <span class='comment val'># SUM(1-probX)/#prots</span>
    <span class='current_sum_one_minus_prob identifier id'>current_sum_one_minus_prob</span> <span class='opasgn op'>+=</span> <span class='float val'>1.0</span> <span class='minus op'>-</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_probability identifier id'>_probability</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span>
    <span class='current_fppr_rate_percent identifier id'>current_fppr_rate_percent</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='current_sum_one_minus_prob identifier id'>current_sum_one_minus_prob</span> <span class='div op'>/</span> <span class='prot_cnt identifier id'>prot_cnt</span><span class='rparen token'>)</span> <span class='mult op'>*</span> <span class='integer val'>100</span>

    <span class='if if kw'>if</span> <span class='current_fppr_rate_percent identifier id'>current_fppr_rate_percent</span> <span class='gt op'>&gt;</span> <span class='desired_fppr identifier id'>desired_fppr</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='already_found identifier id'>already_found</span>
      <span class='actual_fppr identifier id'>actual_fppr</span> <span class='assign token'>=</span> <span class='previous_fppr_rate_percent identifier id'>previous_fppr_rate_percent</span>
      <span class='proteins_within_fppr identifier id'>proteins_within_fppr</span> <span class='assign token'>=</span> <span class='prot_cnt identifier id'>prot_cnt</span>
      <span class='already_found identifier id'>already_found</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='end end kw'>end</span>
    <span class='previous_fppr_rate_percent identifier id'>previous_fppr_rate_percent</span> <span class='assign token'>=</span> <span class='current_fppr_rate_percent identifier id'>current_fppr_rate_percent</span>
  <span class='end end kw'>end</span>
  <span class='lbrack token'>[</span><span class='proteins_within_fppr identifier id'>proteins_within_fppr</span><span class='comma token'>,</span> <span class='actual_fppr identifier id'>actual_fppr</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>num_prots_to_html</h3>
</div><div id="num_prots_to_html-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>num_prots_to_html</span><span class='args'>(desired_cutoff, actual_cutoff, num_proteins)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 380</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L380">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">380
381
382
383
384
385
386
387
388</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='num_prots_to_html identifier id'>num_prots_to_html</span><span class='lparen token'>(</span><span class='desired_cutoff identifier id'>desired_cutoff</span><span class='comma token'>,</span> <span class='actual_cutoff identifier id'>actual_cutoff</span><span class='comma token'>,</span> <span class='num_proteins identifier id'>num_proteins</span><span class='rparen token'>)</span>
  <span class='actual_cutoff identifier id'>actual_cutoff</span> <span class='assign token'>=</span> <span class='sprintf identifier id'>sprintf</span><span class='lparen token'>(</span><span class='string val'>&quot;%.3f&quot;</span><span class='comma token'>,</span> <span class='actual_cutoff identifier id'>actual_cutoff</span><span class='rparen token'>)</span>
  <span class='desired_cutoff identifier id'>desired_cutoff</span> <span class='assign token'>=</span> <span class='sprintf identifier id'>sprintf</span><span class='lparen token'>(</span><span class='string val'>&quot;%.3f&quot;</span><span class='comma token'>,</span> <span class='desired_cutoff identifier id'>desired_cutoff</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;&lt;div class=\&quot;num_proteins\&quot;&gt;&lt;h3&gt;False Positive Predictive Rate [ FP/(TP+FP) ]&lt;/h3&gt;
  Desired FPPR: #{desired_cutoff} %&lt;br/&gt;
  Actual FPPR: #{actual_cutoff} %&lt;br/&gt;
  Number of Proteins at Actual FPPR: #{num_proteins}
  &lt;/div&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>output_peptide_counts_file</h3>
</div><div id="output_peptide_counts_file-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>output_peptide_counts_file</span><span class='args'>(prots, filename)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
given a list of proteins, output a tab delimited textfile with protein name
and the total number of peptides found
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 163</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L163">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">163
164
165
166
167
168
169</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='output_peptide_counts_file identifier id'>output_peptide_counts_file</span><span class='lparen token'>(</span><span class='prots identifier id'>prots</span><span class='comma token'>,</span> <span class='filename identifier id'>filename</span><span class='rparen token'>)</span>
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='string val'>&quot;w&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='fh_out identifier id'>fh_out</span><span class='bitor op'>|</span>
    <span class='prots identifier id'>prots</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prot identifier id'>prot</span><span class='bitor op'>|</span>
      <span class='fh_out identifier id'>fh_out</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='lbrack token'>[</span><span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_protein_name identifier id'>_protein_name</span><span class='comma token'>,</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_total_number_peptides identifier id'>_total_number_peptides</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;\t&quot;</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>peptide_cell</h3>
</div><div id="peptide_cell-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>peptide_cell</span><span class='args'>(prot_num, peptide_sequences)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
given a list of peptide sequences creates javascript to hide/show them
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 343</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L343">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">343
344
345</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='peptide_cell identifier id'>peptide_cell</span><span class='lparen token'>(</span><span class='prot_num identifier id'>prot_num</span><span class='comma token'>,</span> <span class='peptide_sequences identifier id'>peptide_sequences</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;&lt;a href=\&quot;#prot#{prot_num}\&quot; onclick=\&quot;toggle_vis('#{prot_num}');\&quot;&gt;#{peptide_sequences.size}&lt;/a&gt;&lt;div id=\&quot;#{prot_num}\&quot; style=\&quot;display:none;\&quot;&gt;#{peptide_sequences.join(', ')}&lt;/div&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>prefix_as_decoy_to_html</h3>
</div><div id="prefix_as_decoy_to_html-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>prefix_as_decoy_to_html</span><span class='args'>(string)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
transforms the output string of file_as_decoy into html
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 403</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L403">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">403
404
405
406
407
408</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='prefix_as_decoy_to_html identifier id'>prefix_as_decoy_to_html</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>  
  <span class='string val'>&quot;&lt;div class=\&quot;fppr\&quot;&gt;
  &lt;h3&gt;Classification Analysis&lt;/h3&gt;
  &lt;/div&gt;&quot;</span> <span class='plus op'>+</span>
  <span class='string identifier id'>string</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>print_html_pieces</h3>
</div><div id="print_html_pieces-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>print_html_pieces</span><span class='args'>(file, *pieces)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 238</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L238">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">238
239
240
241
242
243
244</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='print_html_pieces identifier id'>print_html_pieces</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='pieces identifier id'>pieces</span><span class='rparen token'>)</span>
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='comma token'>,</span> <span class='string val'>&quot;w&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='out identifier id'>out</span><span class='bitor op'>|</span>
    <span class='pieces identifier id'>pieces</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='piece identifier id'>piece</span><span class='bitor op'>|</span>
      <span class='out identifier id'>out</span><span class='dot token'>.</span><span class='print identifier id'>print</span> <span class='piece identifier id'>piece</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>proph_output</h3>
</div><div id="proph_output-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>proph_output</span><span class='args'>(file, outfn, opt, fppr_output_as_html)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 290</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L290">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='proph_output identifier id'>proph_output</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='comma token'>,</span> <span class='outfn identifier id'>outfn</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='comma token'>,</span> <span class='fppr_output_as_html identifier id'>fppr_output_as_html</span><span class='rparen token'>)</span>
  <span class='header_anchors identifier id'>header_anchors</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'#'</span><span class='comma token'>,</span> <span class='string val'>'number'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'prob'</span><span class='comma token'>,</span><span class='string val'>'protein probability (for Prophet, higher is better)'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'ref'</span><span class='comma token'>,</span> <span class='string val'>'gi number if available (or complete reference)'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'annotation'</span><span class='comma token'>,</span> <span class='string val'>'annotation from the fasta file'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'%cov'</span><span class='comma token'>,</span> <span class='string val'>'percent of protein sequence covered by corresponding peptides'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'peps'</span><span class='comma token'>,</span> <span class='string val'>'unique peptides identified (includes non-contributing peptides). Click number to show/hide'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'#peps'</span><span class='comma token'>,</span> <span class='string val'>'total number of corresponding peptides that contributed to protein probability'</span><span class='rparen token'>)</span><span class='comma token'>,</span>  <span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='string val'>'%ids'</span><span class='comma token'>,</span> <span class='string val'>'fraction of correct dataset peptide identifications corresponding to protein'</span><span class='rparen token'>)</span><span class='rbrack token'>]</span>
  <span class='num_cols identifier id'>num_cols</span> <span class='assign token'>=</span> <span class='header_anchors identifier id'>header_anchors</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='theaders identifier id'>theaders</span> <span class='assign token'>=</span> <span class='ths identifier id'>ths</span><span class='lparen token'>(</span><span class='header_anchors identifier id'>header_anchors</span><span class='rparen token'>)</span>

  <span class='root identifier id'>root</span> <span class='assign token'>=</span> <span class='AXML constant id'>AXML</span><span class='dot token'>.</span><span class='parse_file identifier id'>parse_file</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span>
  <span class='prots identifier id'>prots</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='comment val'>## find the min_prob at a fppr of XX</span>
  <span class='min_prob_redline identifier id'>min_prob_redline</span> <span class='assign token'>=</span> <span class='float val'>1.01</span>  <span class='comment val'># if no fppr is less than what they give, then all are redlined!</span>

  <span class='if if kw'>if</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='c identifier id'>c</span> 
    <span class='actual_percent_fp identifier id'>actual_percent_fp</span> <span class='assign token'>=</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span>
  <span class='elsif elsif kw'>elsif</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='cut_at identifier id'>cut_at</span>
    <span class='actual_percent_fp identifier id'>actual_percent_fp</span> <span class='assign token'>=</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='cut_at identifier id'>cut_at</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span>
  <span class='else else kw'>else</span>
    <span class='actual_percent_fp identifier id'>actual_percent_fp</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
  <span class='root identifier id'>root</span><span class='dot token'>.</span><span class='protein_group identifier id'>protein_group</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='group identifier id'>group</span><span class='bitor op'>|</span>
    <span class='group identifier id'>group</span><span class='dot token'>.</span><span class='protein identifier id'>protein</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prt identifier id'>prt</span><span class='bitor op'>|</span>
      <span class='prots identifier id'>prots</span> <span class='lshft op'>&lt;&lt;</span> <span class='prt identifier id'>prt</span> 
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='uniq_prots identifier id'>uniq_prots</span> <span class='assign token'>=</span> <span class='prots identifier id'>prots</span><span class='dot token'>.</span><span class='hash_by identifier id'>hash_by</span><span class='lparen token'>(</span><span class='symbol val'>:_protein_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span><span class='prot_arr identifier id'>prot_arr</span><span class='bitor op'>|</span> <span class='prot_arr identifier id'>prot_arr</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='rbrace token'>}</span>
  <span class='filtered_sorted_prots identifier id'>filtered_sorted_prots</span> <span class='assign token'>=</span> <span class='filter_and_sort identifier id'>filter_and_sort</span><span class='lparen token'>(</span><span class='uniq_prots identifier id'>uniq_prots</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='f identifier id'>f</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='prefix identifier id'>prefix</span><span class='rparen token'>)</span>

  <span class='comment val'>## num proteins above cutoff (if opt.c)</span>
  <span class='num_prots_html identifier id'>num_prots_html</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='if if kw'>if</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='c identifier id'>c</span> <span class='orop op'>||</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='cut_at identifier id'>cut_at</span>
    <span class='lparen token'>(</span><span class='num_prots identifier id'>num_prots</span><span class='comma token'>,</span> <span class='actual_fppr identifier id'>actual_fppr</span><span class='rparen token'>)</span> <span class='assign token'>=</span> <span class='num_prots_above_fppr identifier id'>num_prots_above_fppr</span><span class='lparen token'>(</span><span class='filtered_sorted_prots identifier id'>filtered_sorted_prots</span><span class='comma token'>,</span> <span class='actual_percent_fp identifier id'>actual_percent_fp</span><span class='rparen token'>)</span>
    <span class='num_prots_html identifier id'>num_prots_html</span> <span class='assign token'>=</span> <span class='num_prots_to_html identifier id'>num_prots_to_html</span><span class='lparen token'>(</span><span class='actual_percent_fp identifier id'>actual_percent_fp</span><span class='comma token'>,</span> <span class='actual_fppr identifier id'>actual_fppr</span><span class='comma token'>,</span> <span class='num_prots identifier id'>num_prots</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='cut_at identifier id'>cut_at</span>
    <span class='filtered_sorted_prots identifier id'>filtered_sorted_prots</span> <span class='assign token'>=</span> <span class='filtered_sorted_prots identifier id'>filtered_sorted_prots</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='comma token'>,</span><span class='num_prots identifier id'>num_prots</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>

  <span class='output_peptide_counts_file identifier id'>output_peptide_counts_file</span><span class='lparen token'>(</span><span class='filtered_sorted_prots identifier id'>filtered_sorted_prots</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='peptide_count identifier id'>peptide_count</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='peptide_count identifier id'>peptide_count</span>

  <span class='comment val'># get an array of annotations (or nil if no option)</span>
  <span class='annotations identifier id'>annotations</span> <span class='assign token'>=</span>
    <span class='if if kw'>if</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='get_annotation identifier id'>get_annotation</span>
      <span class='gis identifier id'>gis</span> <span class='assign token'>=</span> <span class='filtered_sorted_prots identifier id'>filtered_sorted_prots</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='prot identifier id'>prot</span><span class='bitor op'>|</span> <span class='accession identifier id'>accession</span><span class='lparen token'>(</span><span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_protein_name identifier id'>_protein_name</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
      <span class='GI constant id'>GI</span><span class='dot token'>.</span><span class='gi2annot identifier id'>gi2annot</span><span class='lparen token'>(</span><span class='gis identifier id'>gis</span><span class='rparen token'>)</span> 
    <span class='end end kw'>end</span>

  <span class='table_string identifier id'>table_string</span> <span class='assign token'>=</span> <span class='table identifier id'>table</span> <span class='do do kw'>do</span> 
    <span class='tr identifier id'>tr</span><span class='lbrace token'>{</span><span class='theaders identifier id'>theaders</span><span class='rbrace token'>}</span> <span class='plus op'>+</span> <span class='table_rows identifier id'>table_rows</span><span class='lparen token'>(</span><span class='filtered_sorted_prots identifier id'>filtered_sorted_prots</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='f identifier id'>f</span><span class='comma token'>,</span> <span class='actual_percent_fp identifier id'>actual_percent_fp</span><span class='comma token'>,</span> <span class='num_cols identifier id'>num_cols</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span><span class='comma token'>,</span> <span class='actual_percent_fp identifier id'>actual_percent_fp</span><span class='comma token'>,</span> <span class='annotations identifier id'>annotations</span><span class='comma token'>,</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='peptide_count identifier id'>peptide_count</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='er_info identifier id'>er_info</span> <span class='assign token'>=</span> <span class='opt identifier id'>opt</span><span class='dot token'>.</span><span class='precision identifier id'>precision</span> <span class='integer val'>? </span><span class='error_info identifier id'>error_info</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='string val'>&quot;&quot;</span>
  <span class='html_pieces identifier id'>html_pieces</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='outfn identifier id'>outfn</span><span class='comma token'>,</span> <span class='header identifier id'>header</span><span class='comma token'>,</span> <span class='fppr_output_as_html identifier id'>fppr_output_as_html</span><span class='comma token'>,</span> <span class='er_info identifier id'>er_info</span><span class='comma token'>,</span> <span class='file_info identifier id'>file_info</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='protproph_script_info identifier id'>protproph_script_info</span><span class='comma token'>,</span> <span class='num_prots_html identifier id'>num_prots_html</span><span class='comma token'>,</span> <span class='table_string identifier id'>table_string</span><span class='comma token'>,</span> <span class='trailer identifier id'>trailer</span><span class='rbrack token'>]</span>
  <span class='print_html_pieces identifier id'>print_html_pieces</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='html_pieces identifier id'>html_pieces</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span> <span class='comment val'># proph_output</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>protproph_script_info</h3>
</div><div id="protproph_script_info-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>protproph_script_info</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 261</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L261">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">261
262
263
264
265
266
267
268
269
270
271
272
273</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='protproph_script_info identifier id'>protproph_script_info</span>
  <span class='begin begin kw'>begin</span>
    <span class='where identifier id'>where</span> <span class='assign token'>=</span> <span class='xstring val'>`which xinteract`</span>
    <span class='reply identifier id'>reply</span> <span class='assign token'>=</span> <span class='dxstring node'>`#{where}`</span>
  <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span>
    <span class='reply identifier id'>reply</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
  <span class='end end kw'>end</span>
  <span class='prophet identifier id'>prophet</span> <span class='assign token'>=</span> <span class='string val'>&quot;TPP (version unknown)&quot;</span>  <span class='comment val'># put your version here if you can't get it dynamically</span>
  <span class='if if kw'>if</span> <span class='reply identifier id'>reply</span> <span class='match op'>=~</span> <span class='regexp val'>/xinteract.*?\((TPP .*)\)/</span>
    <span class='prophet identifier id'>prophet</span> <span class='assign token'>=</span> <span class='$1 nth_ref id'>$1</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='end end kw'>end</span>
  <span class='script_info identifier id'>script_info</span> <span class='lbrace token'>{</span> <span class='dstring node'>&quot;ProteinProphet from: #{prophet}&quot;</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>ref_html</h3>
</div><div id="ref_html-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>ref_html</span><span class='args'>(gi, name)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 129</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L129">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">129
130
131</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='ref_html identifier id'>ref_html</span><span class='lparen token'>(</span><span class='gi identifier id'>gi</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='rparen token'>)</span>
<span class='dstring node'>&quot;&lt;a href=\&quot;http://www.ncbi.nlm.nih.gov/entrez/viewer.fcgi?db=protein&amp;val=#{gi}\&quot; title=\&quot;#{name}\&quot;&gt;#{gi}&lt;/a&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>script_info</h3>
</div><div id="script_info-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>script_info</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 286</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L286">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">286
287
288</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='script_info identifier id'>script_info</span>
  <span class='dstring node'>&quot;&lt;div class=\&quot;software\&quot;&gt;&lt;h3&gt;Software Information&lt;/h3&gt;#{yield}&lt;br/&gt;Ruby package: #{mspire_version}&lt;br/&gt;Command: #{[File.basename(__FILE__), *@orig_argv].join(&quot; &quot;)}&lt;/div&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>table_rows</h3>
</div><div id="table_rows-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>table_rows</span><span class='args'>(uniq_prots, prefix, false_positive_rate_percent, num_cols, desired_fppr, actual_percent_fp, annotations = nil, peptide_count_filename = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
#readable_previous_fppr_rate_percent = sprintf(&quot;%.2f&quot;,
previous_fppr_rate_percent) returns a string of the table rows
false_positive_rate (give as a %) is the cutoff mark returns the number of
proteins at the desired_fppr (if given)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/protein_summary.rb', line 214</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/80153ba0b61f60bde6c4215c335658cc8856d3de/lib/spec_id/protein_summary.rb#L214">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='table_rows identifier id'>table_rows</span><span class='lparen token'>(</span><span class='uniq_prots identifier id'>uniq_prots</span><span class='comma token'>,</span> <span class='prefix identifier id'>prefix</span><span class='comma token'>,</span> <span class='false_positive_rate_percent identifier id'>false_positive_rate_percent</span><span class='comma token'>,</span> <span class='num_cols identifier id'>num_cols</span><span class='comma token'>,</span> <span class='desired_fppr identifier id'>desired_fppr</span><span class='comma token'>,</span> <span class='actual_percent_fp identifier id'>actual_percent_fp</span><span class='comma token'>,</span> <span class='annotations identifier id'>annotations</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='peptide_count_filename identifier id'>peptide_count_filename</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='prot_cnt identifier id'>prot_cnt</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='an_cnt identifier id'>an_cnt</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
 
  <span class='uniq_prots identifier id'>uniq_prots</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prot identifier id'>prot</span><span class='bitor op'>|</span> 
    <span class='tr identifier id'>tr</span> <span class='do do kw'>do</span>
      <span class='prot_cnt identifier id'>prot_cnt</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
      <span class='gi identifier id'>gi</span> <span class='assign token'>=</span> <span class='accession identifier id'>accession</span><span class='lparen token'>(</span><span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_protein_name identifier id'>_protein_name</span><span class='rparen token'>)</span>

      <span class='if if kw'>if</span> <span class='annotations identifier id'>annotations</span>
        <span class='protein_description identifier id'>protein_description</span> <span class='assign token'>=</span> <span class='annotations identifier id'>annotations</span><span class='lbrack token'>[</span><span class='an_cnt identifier id'>an_cnt</span><span class='rbrack token'>]</span>
        <span class='an_cnt identifier id'>an_cnt</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
      <span class='else else kw'>else</span>
        <span class='if if kw'>if</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='annotation identifier id'>annotation</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
          <span class='protein_description identifier id'>protein_description</span> <span class='assign token'>=</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='annotation identifier id'>annotation</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='_protein_description identifier id'>_protein_description</span>
        <span class='else else kw'>else</span>
          <span class='protein_description identifier id'>protein_description</span> <span class='assign token'>=</span> <span class='string val'>'NA'</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
      <span class='tds identifier id'>tds</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='prot_cnt identifier id'>prot_cnt</span><span class='comma token'>,</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_probability identifier id'>_probability</span><span class='comma token'>,</span> <span class='ref_html identifier id'>ref_html</span><span class='lparen token'>(</span><span class='gi identifier id'>gi</span><span class='comma token'>,</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_protein_name identifier id'>_protein_name</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='protein_description identifier id'>protein_description</span><span class='comma token'>,</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_percent_coverage identifier id'>_percent_coverage</span><span class='comma token'>,</span> <span class='peptide_cell identifier id'>peptide_cell</span><span class='lparen token'>(</span><span class='prot_cnt identifier id'>prot_cnt</span><span class='comma token'>,</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_unique_stripped_peptides identifier id'>_unique_stripped_peptides</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'+'</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_total_number_peptides identifier id'>_total_number_peptides</span><span class='comma token'>,</span> <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='_pct_spectrum_ids identifier id'>_pct_spectrum_ids</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span><span class='dot token'>.</span><span class='join identifier id'>join</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>