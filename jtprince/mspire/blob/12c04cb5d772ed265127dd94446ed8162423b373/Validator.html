<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jtprince's mspire - Class: Validator - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jtprince/commits/mspire/master" rel="alternate" title="Recent Commits to mspire:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jtprince", "mspire", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jtprince", "mspire", "12c04cb5d772ed265127dd94446ed8162423b373", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jtprince/mspire/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jtprince/mspire/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jtprince/mspire/network">Network</a></li>            
            <li class=""><a href="http://github.com/jtprince/mspire/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jtprince/mspire">Wiki</a></li>
            <li class=""><a href="http://github.com/jtprince/mspire/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jtprince/mspire">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jtprince">jtprince</a> / <b><a href="http://github.com/jtprince/mspire/tree">mspire</a></b>        
                <a id="namespaces_button" rel="jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Validator">
  <h1>Class: Validator</h1>
  <div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="Validator_to_string-constant">Validator_to_string</dt>
      <dd>{
  'Validator::AA' =&gt; 'badAA',
  'Validator::AAEst' =&gt; 'badAAEst',
  'Validator::Decoy' =&gt; 'decoy',
  'Validator::Transmem::Protein' =&gt; 'tmm',
  'Validator::TruePos' =&gt; 'tps',
  'Validator::Bias' =&gt; 'bias',
  'Validator::Probability' =&gt; 'prob',
  'Validator::QValue' =&gt; 'qval',
  :bad_aa =&gt; 'badAA',
  :bad_aa_est =&gt; 'badAAEst',
  :decoy =&gt; 'decoy',
  :tmm =&gt; 'tmm',
  :tps =&gt; 'tps',
  :bias =&gt; 'bias',
  :prob =&gt; 'prob',
  :qval =&gt; 'qval',
}</dd>
    
  </dl>
</div>

</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#requires_pephits-3F-class_method">requires_pephits?</span><span class='args'>(spec_id_obj)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
in the absence of digestion, does the spec_id type requires pephits for
validation?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#sensible_validator_hashes-class_method">sensible_validator_hashes</span><span class='args'>(validators)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
takes an array of validators and returns a fresh array where each has been
turned into a sensible hash (with symbols as the keys!).
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#adjust_fps_for_background-instance_method">#adjust_fps_for_background</span><span class='args'>(num_tps, num_fps, background)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
returns an adjusted false positive rate (a float not to drop below 0.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#increment_pephits_precision-instance_method">#increment_pephits_precision</span><span class='args'>(peps)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
if adding pephits in groups at a time, the entire group does not need to be
queried, just the individual hit.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#initialize_increment-instance_method">#initialize_increment</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#sample_stats-instance_method">#sample_stats</span><span class='args'>(array)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
copied from libjtp: vec returns the mean and std_dev.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>requires_pephits?</h3>
</div><div id="requires_pephits-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>requires_pephits?</span><span class='args'>(spec_id_obj)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
in the absence of digestion, does the spec_id type requires pephits for
validation?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/validator.rb', line 6</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/validator.rb#L6">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">6
7
8
9
10
11
12
13</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='requires_pephits? fid id'>requires_pephits?</span><span class='lparen token'>(</span><span class='spec_id_obj identifier id'>spec_id_obj</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='spec_id_obj identifier id'>spec_id_obj</span>
  <span class='when when kw'>when</span> <span class='Proph constant id'>Proph</span><span class='colon2 op'>::</span><span class='ProtSummary constant id'>ProtSummary</span> <span class='colon op'>:</span> <span class='true true kw'>true</span>
  <span class='when when kw'>when</span> <span class='Proph constant id'>Proph</span><span class='colon2 op'>::</span><span class='PepSummary constant id'>PepSummary</span> <span class='colon op'>:</span> <span class='true true kw'>true</span>
  <span class='when when kw'>when</span> <span class='SQTGroup constant id'>SQTGroup</span> <span class='colon op'>:</span> <span class='true true kw'>true</span>
  <span class='else else kw'>else</span> <span class='semicolon token'>;</span> <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>sensible_validator_hashes</h3>
</div><div id="sensible_validator_hashes-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>sensible_validator_hashes</span><span class='args'>(validators)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
takes an array of validators and returns a fresh array where each has been
turned into a sensible hash (with symbols as the keys!)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/validator.rb', line 109</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/validator.rb#L109">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='sensible_validator_hashes identifier id'>sensible_validator_hashes</span><span class='lparen token'>(</span><span class='validators identifier id'>validators</span><span class='rparen token'>)</span>
  <span class='validators identifier id'>validators</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='bitor op'>|</span>
    <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='case case kw'>case</span> <span class='val identifier id'>val</span>
    <span class='when when kw'>when</span> <span class='Validator constant id'>Validator</span><span class='colon2 op'>::</span><span class='TruePos constant id'>TruePos</span>
      <span class='hash identifier id'>hash</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span> <span class='lbrace token'>{</span><span class='symbol val'>:correct_wins</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='correct_wins identifier id'>correct_wins</span><span class='comma token'>,</span> <span class='symbol val'>:file</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='fasta identifier id'>fasta</span><span class='dot token'>.</span><span class='filename identifier id'>filename</span> <span class='rbrace token'>}</span> <span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='Validator constant id'>Validator</span><span class='colon2 op'>::</span><span class='AAEst constant id'>AAEst</span>
      <span class='dstring node'>%w(frequency background calculated_background)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='cat identifier id'>cat</span><span class='bitor op'>|</span>
        <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='Validator constant id'>Validator</span><span class='colon2 op'>::</span><span class='AA constant id'>AA</span>
      <span class='dstring node'>%w(false_to_total_ratio background calculated_background)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='cat identifier id'>cat</span><span class='bitor op'>|</span>
        <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='Validator constant id'>Validator</span><span class='colon2 op'>::</span><span class='Decoy constant id'>Decoy</span>
      <span class='dstring node'>%w(pi_zero correct_wins decoy_on_match)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='cat identifier id'>cat</span><span class='bitor op'>|</span>
        <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
      <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='symbol val'>:constraint</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='constraint identifier id'>constraint</span><span class='dot token'>.</span><span class='inspect identifier id'>inspect</span> <span class='if if_mod kw'>if</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='constraint identifier id'>constraint</span>
    <span class='when when kw'>when</span> <span class='Validator constant id'>Validator</span><span class='colon2 op'>::</span><span class='Bias constant id'>Bias</span>
      <span class='dstring node'>%w(correct_wins proteins_expected background calculated_background false_to_total_ratio)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='cat identifier id'>cat</span><span class='bitor op'>|</span>
        <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
      <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='symbol val'>:file</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='fasta identifier id'>fasta</span><span class='dot token'>.</span><span class='filename identifier id'>filename</span>
    <span class='when when kw'>when</span> <span class='Validator constant id'>Validator</span><span class='colon2 op'>::</span><span class='Transmem constant id'>Transmem</span><span class='colon2 op'>::</span><span class='Protein constant id'>Protein</span>
      <span class='dstring node'>%w(false_to_total_ratio min_num_tms soluble_fraction correct_wins no_include_tm_peps background calculated_background transmem_file)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='cat identifier id'>cat</span><span class='bitor op'>|</span>
        <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='Validator constant id'>Validator</span><span class='colon2 op'>::</span><span class='Probability constant id'>Probability</span>
      <span class='dstring node'>%w(prob_method)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='cat identifier id'>cat</span><span class='bitor op'>|</span>
        <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='cat identifier id'>cat</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='Validator constant id'>Validator</span><span class='colon2 op'>::</span><span class='QValue constant id'>QValue</span>
      <span class='comment val'># no params to add</span>
    <span class='else else kw'>else</span> <span class='semicolon token'>;</span> <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Don't know the validator class #{val}&quot;</span>
    <span class='end end kw'>end</span>
    <span class='klass_as_s identifier id'>klass_as_s</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='symbol val'>:type</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Validator_to_string constant id'>Validator_to_string</span><span class='lbrack token'>[</span><span class='klass_as_s identifier id'>klass_as_s</span><span class='rbrack token'>]</span>
    <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='symbol val'>:class</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='klass_as_s identifier id'>klass_as_s</span>
    <span class='hash identifier id'>hash</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>adjust_fps_for_background</h3>
</div><div id="adjust_fps_for_background-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>adjust_fps_for_background</span><span class='args'>(num_tps, num_fps, background)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
returns an adjusted false positive rate (a float not to drop below 0.0)
based on a background of &#8216;false&#8217;-false positive hits to total
hits. Also sets the @calculated_background attribute. Accepts floats or
ints
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/validator.rb', line 76</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/validator.rb#L76">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">76
77
78
79
80
81
82
83</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='adjust_fps_for_background identifier id'>adjust_fps_for_background</span><span class='lparen token'>(</span><span class='num_tps identifier id'>num_tps</span><span class='comma token'>,</span> <span class='num_fps identifier id'>num_fps</span><span class='comma token'>,</span> <span class='background identifier id'>background</span><span class='rparen token'>)</span>
  <span class='num_fps identifier id'>num_fps</span> <span class='assign token'>=</span> <span class='num_fps identifier id'>num_fps</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span>
  <span class='total_peps identifier id'>total_peps</span> <span class='assign token'>=</span> <span class='num_tps identifier id'>num_tps</span> <span class='plus op'>+</span> <span class='num_fps identifier id'>num_fps</span>
  <span class='@calculated_background ivar id'>@calculated_background</span> <span class='assign token'>=</span> <span class='num_fps identifier id'>num_fps</span> <span class='div op'>/</span> <span class='total_peps identifier id'>total_peps</span>
  <span class='num_fps identifier id'>num_fps</span> <span class='opasgn op'>-=</span> <span class='lparen token'>(</span><span class='total_peps identifier id'>total_peps</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span> <span class='mult op'>*</span> <span class='background identifier id'>background</span><span class='rparen token'>)</span>
  <span class='num_fps identifier id'>num_fps</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='integer val'>.0</span> <span class='if if_mod kw'>if</span> <span class='num_fps identifier id'>num_fps</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span><span class='integer val'>.0</span>
  <span class='num_fps identifier id'>num_fps</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>increment_pephits_precision</h3>
</div><div id="increment_pephits_precision-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>increment_pephits_precision</span><span class='args'>(peps)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
if adding pephits in groups at a time, the entire group does not need to be
queried, just the individual hit. Use this OR pephits_precision (NOT both).
The initial query to this method will begin a running tally that is saved
by the validator. takes either an array or a single pephit (determined by
if it is a SpecID::Pep)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/validator.rb', line 47</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/validator.rb#L47">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='increment_pephits_precision identifier id'>increment_pephits_precision</span><span class='lparen token'>(</span><span class='peps identifier id'>peps</span><span class='rparen token'>)</span>
  <span class='tmp identifier id'>tmp</span> <span class='assign token'>=</span> <span class='$VERBOSE gvar id'>$VERBOSE</span><span class='semicolon token'>;</span> <span class='$VERBOSE gvar id'>$VERBOSE</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='initialize_increment identifier id'>initialize_increment</span> <span class='unless unless_mod kw'>unless</span> <span class='@increment_initialized ivar id'>@increment_initialized</span>
  <span class='$VERBOSE gvar id'>$VERBOSE</span> <span class='assign token'>=</span> <span class='tmp identifier id'>tmp</span>

  <span class='to_submit identifier id'>to_submit</span> <span class='assign token'>=</span> 
    <span class='if if kw'>if</span> <span class='peps identifier id'>peps</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span> <span class='SpecID constant id'>SpecID</span><span class='colon2 op'>::</span><span class='Pep constant id'>Pep</span>
      <span class='lbrack token'>[</span><span class='peps identifier id'>peps</span><span class='rbrack token'>]</span>
    <span class='else else kw'>else</span>
      <span class='peps identifier id'>peps</span>
    <span class='end end kw'>end</span>
  <span class='@increment_total_submitted ivar id'>@increment_total_submitted</span> <span class='opasgn op'>+=</span> <span class='to_submit identifier id'>to_submit</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='lparen token'>(</span><span class='tps identifier id'>tps</span><span class='comma token'>,</span> <span class='fps identifier id'>fps</span><span class='rparen token'>)</span> <span class='assign token'>=</span> <span class='partition identifier id'>partition</span><span class='lparen token'>(</span><span class='to_submit identifier id'>to_submit</span><span class='rparen token'>)</span>
  <span class='@increment_tps ivar id'>@increment_tps</span> <span class='opasgn op'>+=</span> <span class='tps identifier id'>tps</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='@increment_fps ivar id'>@increment_fps</span> <span class='opasgn op'>+=</span> <span class='fps identifier id'>fps</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='lparen token'>(</span><span class='num_tps identifier id'>num_tps</span><span class='comma token'>,</span> <span class='num_fps identifier id'>num_fps</span><span class='rparen token'>)</span> <span class='assign token'>=</span> 
    <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:calc_precision_prep</span><span class='rparen token'>)</span>  <span class='comment val'># for digestion based validators</span>
      <span class='lparen token'>(</span><span class='num_tps identifier id'>num_tps</span><span class='comma token'>,</span> <span class='num_fps identifier id'>num_fps</span><span class='rparen token'>)</span> <span class='assign token'>=</span> <span class='calc_precision_prep identifier id'>calc_precision_prep</span><span class='lparen token'>(</span><span class='@increment_tps ivar id'>@increment_tps</span><span class='comma token'>,</span> <span class='@increment_fps ivar id'>@increment_fps</span><span class='rparen token'>)</span>
      <span class='lbrack token'>[</span><span class='num_tps identifier id'>num_tps</span><span class='comma token'>,</span> <span class='num_fps identifier id'>num_fps</span><span class='rbrack token'>]</span>
    <span class='else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='@increment_tps ivar id'>@increment_tps</span><span class='comma token'>,</span> <span class='@increment_fps ivar id'>@increment_fps</span><span class='rbrack token'>]</span>
    <span class='end end kw'>end</span>
  <span class='calc_precision identifier id'>calc_precision</span><span class='lparen token'>(</span><span class='num_tps identifier id'>num_tps</span><span class='comma token'>,</span> <span class='num_fps identifier id'>num_fps</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>initialize_increment</h3>
</div><div id="initialize_increment-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize_increment</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/validator.rb', line 34</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/validator.rb#L34">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">34
35
36
37
38
39</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize_increment identifier id'>initialize_increment</span>
  <span class='@increment_tps ivar id'>@increment_tps</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='@increment_fps ivar id'>@increment_fps</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='@increment_total_submitted ivar id'>@increment_total_submitted</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='@increment_initialized ivar id'>@increment_initialized</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>sample_stats</h3>
</div><div id="sample_stats-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>sample_stats</span><span class='args'>(array)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
copied from libjtp: vec returns the mean and std_dev
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/validator.rb', line 87</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/validator.rb#L87">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='sample_stats identifier id'>sample_stats</span><span class='lparen token'>(</span><span class='array identifier id'>array</span><span class='rparen token'>)</span>
  <span class='_len identifier id'>_len</span> <span class='assign token'>=</span> <span class='array identifier id'>array</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='_sum identifier id'>_sum</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='integer val'>.0</span>
  <span class='_sum_sq identifier id'>_sum_sq</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='integer val'>.0</span>
  <span class='array identifier id'>array</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='bitor op'>|</span>
    <span class='_sum identifier id'>_sum</span> <span class='opasgn op'>+=</span> <span class='val identifier id'>val</span>
    <span class='_sum_sq identifier id'>_sum_sq</span> <span class='opasgn op'>+=</span> <span class='val identifier id'>val</span> <span class='mult op'>*</span> <span class='val identifier id'>val</span>
  <span class='end end kw'>end</span>
  <span class='std_dev identifier id'>std_dev</span> <span class='assign token'>=</span> <span class='_sum_sq identifier id'>_sum_sq</span> <span class='minus op'>-</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='_sum identifier id'>_sum</span> <span class='mult op'>*</span> <span class='_sum identifier id'>_sum</span><span class='rparen token'>)</span><span class='div op'>/</span><span class='_len identifier id'>_len</span><span class='rparen token'>)</span>
  <span class='std_dev identifier id'>std_dev</span> <span class='opasgn op'>/=</span> <span class='lparen token'>(</span> <span class='lparen token'>(</span><span class='_len identifier id'>_len</span> <span class='gt op'>&gt;</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='lparen token'>(</span><span class='_len identifier id'>_len</span><span class='minus op'>-</span><span class='integer val'>1</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='integer val'>1</span> <span class='rparen token'>)</span>
  <span class='comment val'># on occasion, a very small negative number occurs</span>
  <span class='if if kw'>if</span> <span class='std_dev identifier id'>std_dev</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span><span class='integer val'>.0</span>    
    <span class='std_dev identifier id'>std_dev</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='integer val'>.0</span> 
  <span class='else else kw'>else</span>
    <span class='std_dev identifier id'>std_dev</span> <span class='assign token'>=</span> <span class='Math constant id'>Math</span><span class='dot token'>.</span><span class='sqrt identifier id'>sqrt</span><span class='lparen token'>(</span><span class='std_dev identifier id'>std_dev</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='mean identifier id'>mean</span> <span class='assign token'>=</span> <span class='_sum identifier id'>_sum</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span><span class='div op'>/</span><span class='_len identifier id'>_len</span>
  <span class='lbrack token'>[</span><span class='mean identifier id'>mean</span><span class='comma token'>,</span> <span class='std_dev identifier id'>std_dev</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>