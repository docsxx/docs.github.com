<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jtprince's mspire - Class: Validator::Cmdline - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jtprince/commits/mspire/master" rel="alternate" title="Recent Commits to mspire:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jtprince", "mspire", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jtprince", "mspire", "12c04cb5d772ed265127dd94446ed8162423b373", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jtprince/mspire/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jtprince/mspire/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jtprince/mspire/network">Network</a></li>            
            <li class=""><a href="http://github.com/jtprince/mspire/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jtprince/mspire">Wiki</a></li>
            <li class=""><a href="http://github.com/jtprince/mspire/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jtprince/mspire">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jtprince">jtprince</a> / <b><a href="http://github.com/jtprince/mspire/tree">mspire</a></b>        
                <a id="namespaces_button" rel="jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Validator_Cmdline">
  <h1>Class: Validator::Cmdline</h1>
  <div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="COMMAND_LINE-constant">COMMAND_LINE</dt>
      <dd>{
  :decoy =&gt; [&quot;--decoy /REGEXP/|FILENAME[,PIT,DOM]&quot;, Array, &quot;REGEXP for decoy proteins (catenated searches) or a&quot;,
                                              &quot;FILENAME of separate search on decoys.&quot;, 
                                              &quot;All regular expressions must be surrounded by '/'&quot;,
                                              &quot;(no extended options [trailing modifiers]).&quot;,
                                              &quot;e.g., a run using concatenated reversed proteins that&quot;,
                                              &quot;includes 'REVERSE' in the fasta heading:&quot;,
                                              &quot;    --decoy /REVERSE/&quot;,
                                              &quot;Anything fancier should be quoted:&quot;,
                                              &quot;    --decoy '/^\\s*REVERSE/'&quot;,
                                              &quot;If decoys proteins were searched in a separate file,&quot;,
                                              &quot;then give the FILENAME (e.g., --decoy decoy.srg)&quot;,
                                              &quot;FRIT = Fraction Incorrect Targets (like&quot;,
                                              &quot;the PIT as a fraction) (default: #{DEFAULTS[:decoy][:frit]})&quot;,
                                              &quot;DOM = *true/false, decoy on match&quot;,],
      :tps =&gt; [&quot;--tps &lt;fasta&gt;&quot;, &quot;for a completely defined sample, this is the&quot;,
                                &quot;fasta file containing the true protein hits&quot;],
       # may require digestion:
      :fasta =&gt; [&quot;--fasta FASTA&quot;, &quot;fasta file for phobius transmembrane&quot;,
                                  &quot;(needed if PEPS options is not false)&quot;],
      :digestion =&gt; [&quot;--digestion ORIG_FASTA,PARAMS&quot;, Array, &quot;[not recommended]&quot;,
                                                       &quot;Creates the 'false/total' ratio with in silico&quot;,
                                                       &quot;digestion.  Otherwise, the 3rd-10th best hits (sorted by&quot;,
                                                       &quot;xcorr) are used.&quot;,
                                                       &quot;The following validators will use this&quot;,
                                                       &quot;information (shared between them) if option given&quot;,
                                                       &quot;ORIG_FASTA = the fasta file used to do the run&quot;,
                                                       &quot;PARAMS = the params file used to do the run&quot;,],
      :bias =&gt; [&quot;--bias FASTA[,PE,BKG]&quot;, Array, &quot;FASTA contains proteins expected to be in the sample&quot;,
                                                &quot;PE = *true|false proteins in fasta file expected in sample&quot;,
                                                &quot;BKG = Background frequency of fps (d: #{DEFAULTS[:bias][:bkg]})&quot;,],
      :bad_aa =&gt; [&quot;--bad_aa AA,BKG]&quot;, Array, &quot;An amino acid expected (or not expected) in legitimate hits&quot;,
                                                      &quot;AA = The amino acid (e.g., 'C')&quot;,
                                                      &quot;BKG = Background frequency of genuine pephits (d: #{DEFAULTS[:bad_aa][:bkg]}):&quot;,],
      :bad_aa_est =&gt; [&quot;--bad_aa_est AA,BKG]&quot;, Array, &quot;An amino acid expected (or not expected) in legitimate hits&quot;,
                                                      &quot;AA = The amino acid (e.g., 'C')&quot;,
                                                      &quot;BKG = Background frequency of genuine pephits (d: #{DEFAULTS[:bad_aa_est][:bkg]}):&quot;,],

      :tmm =&gt; [&quot;--tmm &lt;TM[,MIN,SOL,PEPS,BKG]&gt;&quot;, Array, &quot;TM = phobius.small or toppred.out file&quot;,
                                                       &quot;phobius.small:&quot;,
                                                       &quot;http://phobius.cgb.ki.se/&quot;,
                                                       &quot;(select 'Short' output, and save output as file)&quot;,
                                                       &quot;toppred.out:&quot;,
                                                       &quot;http://bioweb.pasteur.fr/seqanal/interfaces/toppred.html&quot;,
                                                       &quot;(output 'toppred.out' in 'New' or 'Xml' format)&quot;,
                                                       &quot;MIN = Int, minimum number transmembrane seqs (def: #{DEFAULTS[:tmm][:min_num_tmm_seqs]})&quot;,
                                                       &quot;SOL = true|false, this is a soluble fraction( def: #{DEFAULTS[:tmm][:expect_soluble]})&quot;,
                                                       &quot;PEPS = Float | false, don't consider tm peps (&gt;= fraction&quot;,
                                                       &quot;                   tm content) (false skips) (def: #{DEFAULTS[:tmm][:no_include_tm_peps]})&quot;,
                                                       &quot;BKG = Float , background contaminating insoluble (def: #{DEFAULTS[:tmm][:bkg]})&quot;],


      # VALIDATION MODIFIERS
      :false_on_tie =&gt; [&quot;--false_on_tie&quot;, &quot;if peptide belongs to correct AND incorrect proteins&quot;,
                                          &quot;it will be counted as correct&quot;],

}</dd>
    
      <dt id="DEFAULTS-constant">DEFAULTS</dt>
      <dd>{
  :tmm =&gt; 
  {
    # file                      
    :min_num_tmm_seqs =&gt; 1,     
    :expect_soluble =&gt; true,   
    :no_include_tm_peps =&gt; 0.8, 
    :bkg =&gt; 0.0,               
  },
  :decoy =&gt; 
  {
    :hits_together =&gt; true,
    :decoy_on_match =&gt; true,
    :frit =&gt; 1.0, # fraction incorrect targets (like PIT)
  },
  :bad_aa =&gt; 
  {
    :false_if_found =&gt; true,
    :bkg =&gt; 0.0, 
  },
  :bad_aa_est =&gt; 
  {
    :false_if_found =&gt; true,
    :bkg =&gt; 0.0, 
  },
  :bias =&gt;
  {
    :bkg =&gt; 0.0,
    :proteins_expected =&gt; true,
  },
  :ties =&gt; true,
}</dd>
    
      <dt id="PrepArgs-constant">PrepArgs</dt>
      <dd>{
  :prob =&gt; lambda {|ar, opts|
  mthd = 
    if ar
      if ar == 'nsp'
        :probability
      elsif ar == 'init'
        :initial_probability
      else
        raise ArgumentError, &quot;--prob [arg], optional arg can only be 'nsp' or 'init'!&quot;
      end
    else
      :probability
    end
  opts[:validators].push([:prob, mthd])
},
  :perc_qval =&gt; lambda {|ar, opts| opts[:validators].push([:perc_qval]) },
  :to_qvalues =&gt; lambda {|ar, opts| opts[:validators].push([:to_qvalues]) },
  :decoy =&gt; lambda {|ar, opts| 
  myargs = [:decoy] 
  first_arg = ar[0]
  val_opts = {}
  val_opts[:constraint] = 
    if first_arg[0,1] == '/' and first_arg[-1,1] == '/'
      # cast as a regular expression of has '/ /'
      Regexp.new(first_arg[1...-1])
    else
      # assume that it is a filename
      raise ArgumentError, &quot;File does not exist: #{first_arg}\n(was this supposed to be a regular expression? if so, should be given: /#{first_arg}/)&quot; unless File.exist?(first_arg)
      first_arg
    end
  val_opts[:frit] = (ar[1] || DEFAULTS[:decoy][:frit]).to_f
  val_opts[:decoy_on_match] = self.boolean(ar[2], DEFAULTS[:decoy][:decoy_on_match])
  myargs.push(val_opts)
  opts[:validators].push(myargs)
},
  :fasta =&gt; lambda {|arg, opts|
  opts[:fasta] = Fasta.new(arg)
},
  :digestion =&gt; lambda {|ar, opts|
  raise(ArgumentError, &quot;need fasta and sequest params!&quot;) if ar.size != 2
  opts[:digestion] = ar.dup
  opts[:digestion_objects] = [Fasta.new(ar[0]), Sequest::Params.new(ar[1])]
},
  :bias =&gt; lambda {|ar, opts|
  myargs = [:bias]
  myargs.push( Fasta.new(ar[0]) )
  val_opts = {}
  val_opts[:proteins_expected] = self.boolean(ar[1], DEFAULTS[:bias][:proteins_expected])
  val_opts[:background] = 
    if ar[2]
      ar[2].to_f
    else
      DEFAULTS[:bias][:bkg]
    end
  if ar[3]
    val_opts[:false_to_total_ratio] = ar[3].to_f
  end
  myargs.push(val_opts)
  opts[:validators].push(myargs)
},
  :bad_aa =&gt; lambda {|ar, opts|
  ## GET the FREQUENCY
  myargs = [:bad_aa] 
  myargs.push( ar[0] )
  val_opts = {}
  val_opts[:background] = 
    if ar[1]
      ar[1].to_f
    else
      DEFAULTS[:bad_aa][:bkg]
    end
  if ar[2]
    val_opts[:false_to_total_ratio] = ar[2].to_f
  end
  myargs.push(val_opts)
  opts[:validators].push(myargs)
},
  :bad_aa_est =&gt; lambda {|ar, opts|
  ## GET the FREQUENCY
  myargs = [:bad_aa_est] 
  myargs.push( ar[0] )
  val_opts = {}
  val_opts[:background] = 
    if ar[1]
      ar[1].to_f
    else
      DEFAULTS[:bad_aa_est][:bkg]
    end
  if ar[2]
    val_opts[:frequency] = ar[2].to_f
  end
  myargs.push(val_opts)
  opts[:validators].push(myargs)
},

  :tmm =&gt;  lambda {|ar, opts|
  myargs = [:tmm]
  myargs.push( ar[0] )
  val_opts = {}
  val_opts[:min_num_tms] =
    if ar[1] ; ar[1].to_i
    else ; DEFAULTS[:tmm][:min_num_tmm_seqs]
    end
  val_opts[:soluble_fraction] = self.boolean(ar[2], DEFAULTS[:tmm][:expect_soluble])
  val_opts[:no_include_tm_peps] =
    if ar[3]
      case ar[3]
      when 'false' ; false
      else ; ar[3].to_f
      end
    else ; DEFAULTS[:tmm][:no_include_tm_peps]
    end
  val_opts[:background] =
    if ar[4] ; ar[4].to_f
    else ; DEFAULTS[:tmm][:bkg]
    end
  if ar[5]
    val_opts[:false_to_total_ratio] = ar[5].to_f
  end
  myargs.push(val_opts)
  opts[:validators].push( myargs )
},
:pephits =&gt; lambda {|v,opts| opts[:pephits] = SpecID.new(v) },
:tps =&gt; lambda {|v,opts| opts[:validators].push([:tps, Fasta.new(v)]) },
:false_on_tie =&gt; lambda {|v,opts| opts[:ties] = false },
}</dd>
    
      <dt id="Validator_symbols_to_classes-constant">Validator_symbols_to_classes</dt>
      <dd>{
  :tmm =&gt; Validator::Transmem::Protein,
  :decoy =&gt; Validator::Decoy,
  :bad_aa =&gt; Validator::AA,
  :bad_aa_est =&gt; Validator::AAEst,
  :tps =&gt; Validator::TruePos,
  :bias =&gt; Validator::Bias,
  :prob =&gt; Validator::Probability,
  :qval =&gt; Validator::QValue,
}</dd>
    
  </dl>
</div>

</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#boolean-class_method">boolean</span><span class='args'>(arg, default)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#prepare_validators-class_method">prepare_validators</span><span class='args'>(opts, false_on_tie, interactive, postfilter, spec_id)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
remove the keys from opts involved in validators and return an array of
validators postfilter is one of :top_per_scan, :top_per_aaseq,
:top_per_aaseq_charge (of which last two are subsets of scan).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#requires_pephits-3F-class_method">requires_pephits?</span><span class='args'>(spec_id_obj)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>boolean</h3>
</div><div id="boolean-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>boolean</span><span class='args'>(arg, default)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/validator/cmdline.rb', line 121</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/validator/cmdline.rb#L121">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">121
122
123
124
125
126
127</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='boolean identifier id'>boolean</span><span class='lparen token'>(</span><span class='arg identifier id'>arg</span><span class='comma token'>,</span> <span class='default identifier id'>default</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='arg identifier id'>arg</span>
  <span class='when when kw'>when</span> <span class='string val'>'true'</span> <span class='semicolon token'>;</span> <span class='true true kw'>true</span>
  <span class='when when kw'>when</span> <span class='string val'>'false'</span> <span class='semicolon token'>;</span> <span class='false false kw'>false</span>
  <span class='else else kw'>else</span> <span class='semicolon token'>;</span> <span class='default identifier id'>default</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>prepare_validators</h3>
</div><div id="prepare_validators-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>prepare_validators</span><span class='args'>(opts, false_on_tie, interactive, postfilter, spec_id)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
remove the keys from opts involved in validators and return an array of
validators postfilter is one of :top_per_scan, :top_per_aaseq,
:top_per_aaseq_charge (of which last two are subsets of scan)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/validator/cmdline.rb', line 277</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/validator/cmdline.rb#L277">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='prepare_validators identifier id'>prepare_validators</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='comma token'>,</span> <span class='false_on_tie identifier id'>false_on_tie</span><span class='comma token'>,</span> <span class='interactive identifier id'>interactive</span><span class='comma token'>,</span> <span class='postfilter identifier id'>postfilter</span><span class='comma token'>,</span> <span class='spec_id identifier id'>spec_id</span><span class='rparen token'>)</span>      

  <span class='validator_args identifier id'>validator_args</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:validators</span><span class='rbrack token'>]</span>
  <span class='if if kw'>if</span> <span class='validator_args identifier id'>validator_args</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='eq op'>==</span> <span class='symbol val'>:to_qvalues</span> <span class='rbrace token'>}</span>
    <span class='prob_val_args_ar identifier id'>prob_val_args_ar</span> <span class='assign token'>=</span> <span class='validator_args identifier id'>validator_args</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='eq op'>==</span> <span class='symbol val'>:prob</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='prob_method identifier id'>prob_method</span> <span class='assign token'>=</span> 
      <span class='if if kw'>if</span> <span class='prob_val_args_ar identifier id'>prob_val_args_ar</span> <span class='andop op'>&amp;&amp;</span> <span class='prob_val_args_ar identifier id'>prob_val_args_ar</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
        <span class='prob_val_args_ar identifier id'>prob_val_args_ar</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
      <span class='else else kw'>else</span>
        <span class='symbol val'>:probability</span>
      <span class='end end kw'>end</span>
    <span class='validator_args identifier id'>validator_args</span><span class='dot token'>.</span><span class='reject! fid id'>reject!</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='eq op'>==</span> <span class='symbol val'>:prob</span> <span class='rbrace token'>}</span>

    <span class='require identifier id'>require</span> <span class='string val'>'vec'</span>
    <span class='require identifier id'>require</span> <span class='string val'>'qvalue'</span>

    <span class='comment val'># get a list of p-values</span>
    <span class='pvals identifier id'>pvals</span> <span class='assign token'>=</span> <span class='spec_id identifier id'>spec_id</span><span class='dot token'>.</span><span class='peps identifier id'>peps</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='pep identifier id'>pep</span><span class='bitor op'>|</span> 
      <span class='val identifier id'>val</span> <span class='assign token'>=</span> <span class='float val'>1.0</span> <span class='minus op'>-</span> <span class='pep identifier id'>pep</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='prob_method identifier id'>prob_method</span><span class='rparen token'>)</span>
      <span class='val identifier id'>val</span> <span class='assign token'>=</span> <span class='float val'>1e-9</span> <span class='if if_mod kw'>if</span> <span class='val identifier id'>val</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
      <span class='val identifier id'>val</span>
    <span class='end end kw'>end</span>
    <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='string val'>&quot;TMP_PVALUES.txt&quot;</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='pvals identifier id'>pvals</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
    <span class='pvals identifier id'>pvals</span> <span class='assign token'>=</span> <span class='VecD constant id'>VecD</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='pvals identifier id'>pvals</span><span class='rparen token'>)</span>
    <span class='comment val'>#qvals = pvals.qvalues(false, :lambda_vals =&gt; 0.30 )</span>
    <span class='qvals identifier id'>qvals</span> <span class='assign token'>=</span> <span class='pvals identifier id'>pvals</span><span class='dot token'>.</span><span class='qvalues identifier id'>qvalues</span>
    <span class='qvals identifier id'>qvals</span><span class='dot token'>.</span><span class='zip identifier id'>zip</span><span class='lparen token'>(</span><span class='spec_id identifier id'>spec_id</span><span class='dot token'>.</span><span class='peps identifier id'>peps</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='qval identifier id'>qval</span><span class='comma token'>,</span><span class='pep identifier id'>pep</span><span class='bitor op'>|</span>
      <span class='pep identifier id'>pep</span><span class='dot token'>.</span><span class='q_value identifier id'>q_value</span> <span class='assign token'>=</span> <span class='qval identifier id'>qval</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='validator_args identifier id'>validator_args</span><span class='dot token'>.</span><span class='map! fid id'>map!</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='eq op'>==</span> <span class='symbol val'>:to_qvalues</span> <span class='orop op'>||</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='eq op'>==</span> <span class='symbol val'>:perc_qval</span>
      <span class='lbrack token'>[</span><span class='symbol val'>:qval</span><span class='rbrack token'>]</span>
    <span class='else else kw'>else</span>
      <span class='v identifier id'>v</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='correct_wins identifier id'>correct_wins</span> <span class='assign token'>=</span> <span class='notop op'>!</span><span class='false_on_tie identifier id'>false_on_tie</span>
  <span class='need_false_to_total_ratio identifier id'>need_false_to_total_ratio</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='need_frequency identifier id'>need_frequency</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='transmem_vals identifier id'>transmem_vals</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='validators identifier id'>validators</span> <span class='assign token'>=</span> <span class='validator_args identifier id'>validator_args</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='args identifier id'>args</span><span class='bitor op'>|</span>
    <span class='tp identifier id'>tp</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span>
    <span class='val_args identifier id'>val_args</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span> <span class='comment val'># protect the original keys</span>
    <span class='val_args identifier id'>val_args</span> <span class='assign token'>=</span> 
      <span class='case case kw'>case</span> <span class='tp identifier id'>tp</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:tmm</span>
        <span class='val_args identifier id'>val_args</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:correct_wins</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='correct_wins identifier id'>correct_wins</span>
        <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='symbol val'>:fasta</span><span class='rparen token'>)</span> 
          <span class='val_args identifier id'>val_args</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:fasta</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:fasta</span><span class='rbrack token'>]</span>
        <span class='end end kw'>end</span>
        <span class='val_args identifier id'>val_args</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:bias</span>
        <span class='val_args identifier id'>val_args</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:correct_wins</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='correct_wins identifier id'>correct_wins</span>
        <span class='val_args identifier id'>val_args</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:tps</span>
        <span class='val_args identifier id'>val_args</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='val_args identifier id'>val_args</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='correct_wins identifier id'>correct_wins</span><span class='rbrack token'>]</span>
        <span class='val_args identifier id'>val_args</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:decoy</span>
        <span class='val_args identifier id'>val_args</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:correct_wins</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='correct_wins identifier id'>correct_wins</span>
        <span class='comment val'># don't delete the key here since we need the decoy = regexp key</span>
        <span class='val_args identifier id'>val_args</span>
      <span class='else else kw'>else</span> <span class='comment val'>## bad_aa, prob, and qval are represented here:</span>
        <span class='val_args identifier id'>val_args</span>
      <span class='end end kw'>end</span>
    <span class='val identifier id'>val</span> <span class='assign token'>=</span> <span class='Validator_symbols_to_classes constant id'>Validator_symbols_to_classes</span><span class='lbrack token'>[</span><span class='tp identifier id'>tp</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='mult op'>*</span><span class='val_args identifier id'>val_args</span> <span class='rparen token'>)</span>
    <span class='comment val'># make some lists of validators based on pre-processing needs:</span>
    <span class='if if kw'>if</span> <span class='tp identifier id'>tp</span> <span class='eq op'>==</span> <span class='symbol val'>:tmm</span>
      <span class='transmem_vals identifier id'>transmem_vals</span> <span class='lshft op'>&lt;&lt;</span> <span class='val identifier id'>val</span>
    <span class='end end kw'>end</span>
    <span class='potential_digestion_classes identifier id'>potential_digestion_classes</span> <span class='assign token'>=</span> <span class='regexp val'>/Transmem|AA|AAEst|Bias/</span>
    <span class='if if kw'>if</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='match op'>=~</span> <span class='potential_digestion_classes identifier id'>potential_digestion_classes</span>
      <span class='if if kw'>if</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='eq op'>==</span> <span class='string val'>'Validator::AAEst'</span>
        <span class='need_frequency identifier id'>need_frequency</span><span class='dot token'>.</span><span class='push identifier id'>push</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='frequency identifier id'>frequency</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
      <span class='elsif elsif kw'>elsif</span> <span class='notop op'>!</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='false_to_total_ratio identifier id'>false_to_total_ratio</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span><span class='rparen token'>)</span>
        <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;using false_to_total_ratio: #{val.false_to_total_ratio}&quot;</span>
      <span class='else else kw'>else</span>
        <span class='need_false_to_total_ratio identifier id'>need_false_to_total_ratio</span> <span class='lshft op'>&lt;&lt;</span> <span class='val identifier id'>val</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='val identifier id'>val</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='need_false_to_total_ratio identifier id'>need_false_to_total_ratio</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span> <span class='or or kw'>or</span> <span class='lparen token'>(</span><span class='need_frequency identifier id'>need_frequency</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='symbol val'>:digestion_objects</span><span class='rparen token'>)</span>
      <span class='comment val'>#raise ArgumentError, &quot;requires --digestion fasta,params argument!&quot; if !opts.key?(:digestion_objects)</span>
      <span class='peps identifier id'>peps</span> <span class='assign token'>=</span> <span class='Digestor constant id'>Digestor</span><span class='dot token'>.</span><span class='digest identifier id'>digest</span><span class='lparen token'>(</span> <span class='mult op'>*</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:digestion_objects</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='rparen token'>)</span>
      <span class='need_false_to_total_ratio identifier id'>need_false_to_total_ratio</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='bitor op'>|</span>
        <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='set_false_to_total_ratio identifier id'>set_false_to_total_ratio</span><span class='lparen token'>(</span> <span class='peps identifier id'>peps</span> <span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
      <span class='if if kw'>if</span> <span class='need_frequency identifier id'>need_frequency</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
        <span class='need_frequency identifier id'>need_frequency</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='bitor op'>|</span>
          <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='set_frequency identifier id'>set_frequency</span><span class='lparen token'>(</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:digestion_objects</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
      <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:digestion_objects</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>  <span class='comment val'>## do the new and improved selection of non-top hits to get false_to_total_ratios and freqs</span>
      <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;...using pephits to calculate background ratios&quot;</span>
      <span class='comment val'># first_index, last_index</span>
      <span class='pephits identifier id'>pephits</span> <span class='assign token'>=</span> 
        <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:pephits</span><span class='rbrack token'>]</span>  <span class='comment val'>## protein prophet (since it needs to get ratios somewhere</span>
          <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;using --pephits&quot;</span>
          <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:pephits</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='peps identifier id'>peps</span>
        <span class='elsif elsif kw'>elsif</span> <span class='requires_pephits? fid id'>requires_pephits?</span><span class='lparen token'>(</span><span class='spec_id identifier id'>spec_id</span><span class='rparen token'>)</span>
          <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;with objects of class '#{spec_id.class}', one of your validators requires --pephits or --digestion&quot;</span>
        <span class='else else kw'>else</span>
          <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;using given spec_id.peps&quot;</span>
          <span class='spec_id identifier id'>spec_id</span><span class='dot token'>.</span><span class='peps identifier id'>peps</span>
        <span class='end end kw'>end</span>

      <span class='not_first_or_second_peps identifier id'>not_first_or_second_peps</span> <span class='assign token'>=</span> <span class='Sequest constant id'>Sequest</span><span class='dot token'>.</span><span class='other_hits_sorted_by_xcorr identifier id'>other_hits_sorted_by_xcorr</span><span class='lparen token'>(</span><span class='pephits identifier id'>pephits</span><span class='comma token'>,</span> <span class='integer val'>2</span><span class='comma token'>,</span> <span class='integer val'>9</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='symbol val'>:base_name</span><span class='comma token'>,</span> <span class='symbol val'>:first_scan</span><span class='comma token'>,</span> <span class='symbol val'>:charge</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='pephits identifier id'>pephits</span> <span class='assign token'>=</span> 
        <span class='case case kw'>case</span> <span class='postfilter identifier id'>postfilter</span>
        <span class='when when kw'>when</span> <span class='symbol val'>:top_per_scan</span> 
          <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;using top_per_scan&quot;</span> <span class='semicolon token'>;</span> <span class='not_first_or_second_peps identifier id'>not_first_or_second_peps</span>
        <span class='when when kw'>when</span> <span class='symbol val'>:top_per_aaseq</span>
          <span class='comment val'># it doesn't matter which one is given since validators are</span>
          <span class='comment val'># based on amino acid sequence</span>
          <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>'using top_per_aaseq'</span>
          <span class='not_first_or_second_peps identifier id'>not_first_or_second_peps</span><span class='dot token'>.</span><span class='hash_by identifier id'>hash_by</span><span class='lparen token'>(</span><span class='symbol val'>:aaseq</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='values identifier id'>values</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='pep identifier id'>pep</span><span class='bitor op'>|</span> <span class='pep identifier id'>pep</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='rbrace token'>}</span>
        <span class='when when kw'>when</span> <span class='symbol val'>:top_per_aaseq_charge</span>
          <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>'using top_per_aaseq_charge'</span>
          <span class='not_first_or_second_peps identifier id'>not_first_or_second_peps</span><span class='dot token'>.</span><span class='hash_by identifier id'>hash_by</span><span class='lparen token'>(</span><span class='symbol val'>:aaseq</span><span class='comma token'>,</span> <span class='symbol val'>:charge</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='values identifier id'>values</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='pep identifier id'>pep</span><span class='bitor op'>|</span> <span class='pep identifier id'>pep</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='rbrace token'>}</span>
        <span class='else else kw'>else</span>
          <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;must have a valid postfilter method, yours: '#{postfilter}'&quot;</span>
        <span class='end end kw'>end</span>

      <span class='need_false_to_total_ratio identifier id'>need_false_to_total_ratio</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='bitor op'>|</span>
        <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='set_false_to_total_ratio identifier id'>set_false_to_total_ratio</span><span class='lparen token'>(</span> <span class='pephits identifier id'>pephits</span> <span class='rparen token'>)</span>
        <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;false_to_total_ratio for #{val.class.to_s}: #{val.false_to_total_ratio}&quot;</span>
      <span class='end end kw'>end</span>
      <span class='if if kw'>if</span> <span class='need_frequency identifier id'>need_frequency</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
        <span class='need_frequency identifier id'>need_frequency</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='bitor op'>|</span>
          <span class='$stderr gvar id'>$stderr</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;Setting frequency!&quot;</span>
          <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='set_frequency identifier id'>set_frequency</span><span class='lparen token'>(</span> <span class='pephits identifier id'>pephits</span> <span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='transmem_vals identifier id'>transmem_vals</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span>   <span class='comment val'>#  and interactive   ## we'd like to just run this for interactive</span>
    <span class='comment val'># This is overkill if we are doing a single filtering job, but it</span>
    <span class='comment val'># ensures that it works in all the ways I'm doing it.  Should</span>
    <span class='comment val'># refactor eventually !!</span>
    <span class='transmem_vals identifier id'>transmem_vals</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='bitor op'>|</span>                      <span class='comment val'>## but, prob uses it too!</span>
      <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='transmem_status_hash identifier id'>transmem_status_hash</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='create_transmem_status_hash identifier id'>create_transmem_status_hash</span><span class='lparen token'>(</span><span class='spec_id identifier id'>spec_id</span><span class='dot token'>.</span><span class='peps identifier id'>peps</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='validators identifier id'>validators</span>

<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>requires_pephits?</h3>
</div><div id="requires_pephits-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>requires_pephits?</span><span class='args'>(spec_id_obj)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/validator/cmdline.rb', line 257</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/validator/cmdline.rb#L257">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">257
258
259
260
261
262
263
264
265
266
267
268
269
270
271</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='requires_pephits? fid id'>requires_pephits?</span><span class='lparen token'>(</span><span class='spec_id_obj identifier id'>spec_id_obj</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='spec_id_obj identifier id'>spec_id_obj</span>
  <span class='when when kw'>when</span> <span class='Proph constant id'>Proph</span><span class='colon2 op'>::</span><span class='ProtSummary constant id'>ProtSummary</span> <span class='colon op'>:</span> <span class='true true kw'>true</span>
  <span class='comment val'># at least currently (subject to change)</span>
  <span class='when when kw'>when</span> <span class='Proph constant id'>Proph</span><span class='colon2 op'>::</span><span class='PepSummary constant id'>PepSummary</span> <span class='colon op'>:</span> <span class='true true kw'>true</span>
  <span class='when when kw'>when</span> <span class='SQTGroup constant id'>SQTGroup</span>
    <span class='if if kw'>if</span> <span class='spec_id_obj identifier id'>spec_id_obj</span><span class='dot token'>.</span><span class='peps identifier id'>peps</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:q_value</span><span class='rparen token'>)</span>  
      <span class='comment val'># its percolator output and we don't have other hits to use</span>
      <span class='true true kw'>true</span>
    <span class='else else kw'>else</span>
      <span class='false false kw'>false</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span> <span class='semicolon token'>;</span> <span class='false false kw'>false</span>
  <span class='end end kw'>end</span> 
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>