<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jtprince's mspire - Class: SRFGroup - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jtprince/commits/mspire/master" rel="alternate" title="Recent Commits to mspire:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jtprince", "mspire", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jtprince", "mspire", "12c04cb5d772ed265127dd94446ed8162423b373", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jtprince/mspire/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jtprince/mspire/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jtprince/mspire/network">Network</a></li>            
            <li class=""><a href="http://github.com/jtprince/mspire/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jtprince/mspire">Wiki</a></li>
            <li class=""><a href="http://github.com/jtprince/mspire/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jtprince/mspire">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jtprince">jtprince</a> / <b><a href="http://github.com/jtprince/mspire/tree">mspire</a></b>        
                <a id="namespaces_button" rel="jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class SRFGroup">
  <h1>Class: SRFGroup</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="SRFGroup/SpecID.html" title="SpecID">SpecID</a></p>
</div><div class="section docstring">
  <p>
class to extract information from &lt;file&gt;_dta.log files
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">filenames</td>
          <td class="readwrite">
            [<span id='filenames-instance_method'>R</span><span id='filenames=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
the srf objects themselves.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">srfs</td>
          <td class="readwrite">
            [<span id='srfs-instance_method'>R</span><span id='srfs=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
the srf objects themselves.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="included">
  
  <div>
    <h2>Constants Included from <a href="SRFGroup/SpecID.html" title="SpecID">SpecID</a></h2>
    <p><span class='name'><a href="SpecID.html#AVG-constant" title="AVG">AVG</a></span>, <span class='name'><a href="SpecID.html#MONO-constant" title="MONO">MONO</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(filenames = nil, filter_hits_by_params = true)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
also inherits :peps and :prots accessor takes an array of filenames or a
single .srg filename see from_srg to load a single .srg file by default,
the hits will be returned filtered by sequest params values. [The raw SRF
data is unfiltered!]
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/srf.rb', line 40</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/spec_id/srf.rb#L40">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='filenames identifier id'>filenames</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='filter_hits_by_params identifier id'>filter_hits_by_params</span><span class='assign token'>=</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
  <span class='@filenames ivar id'>@filenames</span> <span class='assign token'>=</span> <span class='filenames identifier id'>filenames</span>
  <span class='@peps ivar id'>@peps</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@prots ivar id'>@prots</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@srfs ivar id'>@srfs</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

  <span class='comment val'># This is essentially duplicated in SQTGroup (should refactor eventually)</span>
  <span class='global_ref_hash identifier id'>global_ref_hash</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='if if kw'>if</span> <span class='filenames identifier id'>filenames</span>
    <span class='if if kw'>if</span> <span class='filenames identifier id'>filenames</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='String constant id'>String</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='filenames identifier id'>filenames</span> <span class='match op'>=~</span> <span class='regexp val'>/\.srg$/</span>
      <span class='srg_filename identifier id'>srg_filename</span> <span class='assign token'>=</span> <span class='filenames identifier id'>filenames</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
      <span class='@filename ivar id'>@filename</span> <span class='assign token'>=</span> <span class='srg_filename identifier id'>srg_filename</span>
      <span class='filenames identifier id'>filenames</span> <span class='assign token'>=</span> <span class='SRFGroup constant id'>SRFGroup</span><span class='dot token'>.</span><span class='srg_to_paths identifier id'>srg_to_paths</span><span class='lparen token'>(</span><span class='filenames identifier id'>filenames</span><span class='rparen token'>)</span> 
      <span class='filenames identifier id'>filenames</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='file identifier id'>file</span><span class='bitor op'>|</span>
        <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span> <span class='file identifier id'>file</span>
          <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;File: #{file} in #{srg_filename} does not exist!&quot;</span>
          <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;Please modify #{srg_filename} to point to existing files.&quot;</span>
          <span class='abort identifier id'>abort</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='filenames identifier id'>filenames</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='file identifier id'>file</span><span class='bitor op'>|</span>
      <span class='@srfs ivar id'>@srfs</span> <span class='lshft op'>&lt;&lt;</span> <span class='SRF constant id'>SRF</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='comma token'>,</span> <span class='@peps ivar id'>@peps</span><span class='comma token'>,</span> <span class='global_ref_hash identifier id'>global_ref_hash</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='@prots ivar id'>@prots</span> <span class='assign token'>=</span> <span class='global_ref_hash identifier id'>global_ref_hash</span><span class='dot token'>.</span><span class='values identifier id'>values</span>
    <span class='if if kw'>if</span> <span class='filter_hits_by_params identifier id'>filter_hits_by_params</span>
      <span class='filter_by_peptide_mass_tolerance identifier id'>filter_by_peptide_mass_tolerance</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#srg_to_paths-class_method">srg_to_paths</span><span class='args'>(file)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
reads a srg file and delivers the path names.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#filter_by_peptide_mass_tolerance-instance_method">#filter_by_peptide_mass_tolerance</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
1.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#merge_different_sets-instance_method">#merge_different_sets</span><span class='args'>(srfs)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
if srfs were read in separately, then the proteins will need to be merged
by their reference.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_srg-instance_method">#to_srg</span><span class='args'>(srg_filename = 'bioworks.srg')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
returns the filename used if the file exists, the name will be expanded to
full path, otherwise just what is given.
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="SRFGroup/SpecID.html" title="SpecID">SpecID</a></h2>
    <p><span class='name'><a href="SpecID.html#by_tps-instance_method" title="by_tps">by_tps</a></span>, <span class='name'><a href="SpecID.html#classify-instance_method" title="classify">classify</a></span>, <span class='name'><a href="SpecID.html#classify_by_decoy_flag-instance_method" title="classify_by_decoy_flag">classify_by_decoy_flag</a></span>, <span class='name'><a href="SpecID.html#classify_by_regex-instance_method" title="classify_by_regex">classify_by_regex</a></span>, <span class='name'><a href="SpecID.html#inspect-instance_method" title="inspect">inspect</a></span>, <span class='name'><a href="SpecID.html#min_and_best10-instance_method" title="min_and_best10">min_and_best10</a></span>, <span class='name'><a href="SpecID.html#num_hits_and_ppv_for_prob-instance_method" title="num_hits_and_ppv_for_prob">num_hits_and_ppv_for_prob</a></span>, <span class='name'><a href="SpecID.html#num_hits_and_ppv_for_protein_prophet_probabilities-instance_method" title="num_hits_and_ppv_for_protein_prophet_probabilities">num_hits_and_ppv_for_protein_prophet_probabilities</a></span>, <span class='name'><a href="SpecID.html#pep_probs_by_bn_scan-instance_method" title="pep_probs_by_bn_scan">pep_probs_by_bn_scan</a></span>, <span class='name'><a href="SpecID.html#pep_probs_by_bn_scan_charge-instance_method" title="pep_probs_by_bn_scan_charge">pep_probs_by_bn_scan_charge</a></span>, <span class='name'><a href="SpecID.html#pep_probs_by_bn_seq_charge-instance_method" title="pep_probs_by_bn_seq_charge">pep_probs_by_bn_seq_charge</a></span>, <span class='name'><a href="SpecID.html#pep_probs_by_pep_prots-instance_method" title="pep_probs_by_pep_prots">pep_probs_by_pep_prots</a></span>, <span class='name'><a href="SpecID.html#pep_probs_by_scan-instance_method" title="pep_probs_by_scan">pep_probs_by_scan</a></span>, <span class='name'><a href="SpecID.html#pep_probs_by_scan_charge-instance_method" title="pep_probs_by_scan_charge">pep_probs_by_scan_charge</a></span>, <span class='name'><a href="SpecID.html#pep_probs_by_seq_charge-instance_method" title="pep_probs_by_seq_charge">pep_probs_by_seq_charge</a></span>, <span class='name'><a href="SpecID.html#pep_prots-instance_method" title="pep_prots">pep_prots</a></span>, <span class='name'><a href="SpecID.html#probability_proc-instance_method" title="probability_proc">probability_proc</a></span>, <span class='name'><a href="SpecID.html#rank_and_classify-instance_method" title="rank_and_classify">rank_and_classify</a></span>, <span class='name'><a href="SpecID.html#separate_by_prefix-instance_method" title="separate_by_prefix">separate_by_prefix</a></span>, <span class='name'><a href="SpecID.html#sorted_probabilities-instance_method" title="sorted_probabilities">sorted_probabilities</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>srg_to_paths</h3>
</div><div id="srg_to_paths-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>srg_to_paths</span><span class='args'>(file)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
reads a srg file and delivers the path names
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/srf.rb', line 72</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/spec_id/srf.rb#L72">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">72
73
74</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='srg_to_paths identifier id'>srg_to_paths</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span>
  <span class='IO constant id'>IO</span><span class='dot token'>.</span><span class='readlines identifier id'>readlines</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='grep identifier id'>grep</span><span class='lparen token'>(</span><span class='regexp val'>/\w/</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='chomp identifier id'>chomp</span> <span class='rbrace token'>}</span> 
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>filter_by_peptide_mass_tolerance</h3>
</div><div id="filter_by_peptide_mass_tolerance-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>filter_by_peptide_mass_tolerance</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <ol>
<li>sets @prots and returns it: a new list of proteins based on which

</li>
</ol>
<p>
peptides passed.
</p>
<ol>
<li>updates the out_file&#8217;s list of hits based on passing peptides (but
not

</li>
</ol>
<p>
the original hit id; rank is implicit in array ordering)
</p>
<ol>
<li>updates each protein to only include peptides passing thresholds.

</li>
</ol>
<p>
[Note, this process is how .out files are generated!]
</p>
<ol>
<li>recalculates deltacn values completely if number of hits changed (does

</li>
</ol>
<p>
not touch deltacn orig) ASSUMES:
</p>
<ol>
<li type="A">all srfs have identical params objects and each has a

</li>
</ol>
<p>
peptide_mass_tolerance filter attribute.
</p>
<ol>
<li type="A">proteins are already unique (peptides referencing the same protein

</li>
</ol>
<p>
reference the same object already) In practice, this means all srfs were
read in together.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/srf.rb', line 97</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/spec_id/srf.rb#L97">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='filter_by_peptide_mass_tolerance identifier id'>filter_by_peptide_mass_tolerance</span>
  <span class='prots_in_set identifier id'>prots_in_set</span> <span class='assign token'>=</span> <span class='Set constant id'>Set</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='@srfs ivar id'>@srfs</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='params identifier id'>params</span>
  <span class='pmt identifier id'>pmt</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='peptide_mass_tolerance identifier id'>peptide_mass_tolerance</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span>
  <span class='methd identifier id'>methd</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>  <span class='comment val'># the method to </span>

  <span class='case case kw'>case</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='peptide_mass_units identifier id'>peptide_mass_units</span>
  <span class='when when kw'>when</span> <span class='string val'>'0'</span>
    <span class='amu_based identifier id'>amu_based</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='milli_amu identifier id'>milli_amu</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='when when kw'>when</span> <span class='string val'>'1'</span>
    <span class='amu_based identifier id'>amu_based</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='milli_amu identifier id'>milli_amu</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='when when kw'>when</span> <span class='string val'>'2'</span>
    <span class='amu_based identifier id'>amu_based</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>

  <span class='@srfs ivar id'>@srfs</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='srf identifier id'>srf</span><span class='bitor op'>|</span>
    <span class='srf identifier id'>srf</span><span class='dot token'>.</span><span class='filtered_by_precursor_mass_tolerance identifier id'>filtered_by_precursor_mass_tolerance</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='srf identifier id'>srf</span><span class='dot token'>.</span><span class='out_files identifier id'>out_files</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='out_file identifier id'>out_file</span><span class='bitor op'>|</span>
      <span class='hits identifier id'>hits</span> <span class='assign token'>=</span> <span class='out_file identifier id'>out_file</span><span class='dot token'>.</span><span class='hits identifier id'>hits</span>
      <span class='before identifier id'>before</span> <span class='assign token'>=</span> <span class='hits identifier id'>hits</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
      <span class='hits identifier id'>hits</span><span class='dot token'>.</span><span class='reject! fid id'>reject!</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='pep identifier id'>pep</span><span class='bitor op'>|</span>
        <span class='do_not_keep identifier id'>do_not_keep</span> <span class='assign token'>=</span>
          <span class='if if kw'>if</span> <span class='amu_based identifier id'>amu_based</span>
            <span class='if if kw'>if</span> <span class='milli_amu identifier id'>milli_amu</span>
              <span class='lparen token'>(</span><span class='pep identifier id'>pep</span><span class='dot token'>.</span><span class='deltamass identifier id'>deltamass</span><span class='dot token'>.</span><span class='abs identifier id'>abs</span> <span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='pmt identifier id'>pmt</span><span class='div op'>/</span><span class='integer val'>1000</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
            <span class='else else kw'>else</span>
              <span class='lparen token'>(</span><span class='pep identifier id'>pep</span><span class='dot token'>.</span><span class='deltamass identifier id'>deltamass</span><span class='dot token'>.</span><span class='abs identifier id'>abs</span> <span class='gt op'>&gt;</span> <span class='pmt identifier id'>pmt</span><span class='rparen token'>)</span>
            <span class='end end kw'>end</span>
          <span class='else else kw'>else</span>
            <span class='lparen token'>(</span><span class='pep identifier id'>pep</span><span class='dot token'>.</span><span class='ppm identifier id'>ppm</span><span class='dot token'>.</span><span class='abs identifier id'>abs</span> <span class='gt op'>&gt;</span> <span class='pmt identifier id'>pmt</span><span class='rparen token'>)</span>
          <span class='end end kw'>end</span>
        <span class='unless unless kw'>unless</span> <span class='do_not_keep identifier id'>do_not_keep</span>
          <span class='pep identifier id'>pep</span><span class='dot token'>.</span><span class='prots identifier id'>prots</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prot identifier id'>prot</span><span class='bitor op'>|</span>
            <span class='if if kw'>if</span> <span class='prots_in_set identifier id'>prots_in_set</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='prot identifier id'>prot</span><span class='rparen token'>)</span>
              <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='peps identifier id'>peps</span> <span class='lshft op'>&lt;&lt;</span> <span class='pep identifier id'>pep</span>
            <span class='else else kw'>else</span>
              <span class='prots_in_set identifier id'>prots_in_set</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='prot identifier id'>prot</span><span class='rparen token'>)</span>
              <span class='prot identifier id'>prot</span><span class='dot token'>.</span><span class='peps identifier id'>peps</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='pep identifier id'>pep</span><span class='rbrack token'>]</span>
            <span class='end end kw'>end</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>
        <span class='do_not_keep identifier id'>do_not_keep</span>
      <span class='end end kw'>end</span>
      <span class='if if kw'>if</span> <span class='hits identifier id'>hits</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='neq op'>!=</span> <span class='before identifier id'>before</span>
        <span class='SRF constant id'>SRF</span><span class='colon2 op'>::</span><span class='OUT constant id'>OUT</span><span class='colon2 op'>::</span><span class='Pep constant id'>Pep</span><span class='dot token'>.</span><span class='update_deltacns_from_xcorr identifier id'>update_deltacns_from_xcorr</span><span class='lparen token'>(</span><span class='hits identifier id'>hits</span><span class='rparen token'>)</span>
        <span class='out_file identifier id'>out_file</span><span class='dot token'>.</span><span class='num_hits identifier id'>num_hits</span> <span class='assign token'>=</span> <span class='hits identifier id'>hits</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='@prots ivar id'>@prots</span> <span class='assign token'>=</span> <span class='prots_in_set identifier id'>prots_in_set</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span>

<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>merge_different_sets</h3>
</div><div id="merge_different_sets-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>merge_different_sets</span><span class='args'>(srfs)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
if srfs were read in separately, then the proteins will need to be merged
by their reference
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>NotImplementedError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/srf.rb', line 79</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/spec_id/srf.rb#L79">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">79
80
81</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='merge_different_sets identifier id'>merge_different_sets</span><span class='lparen token'>(</span><span class='srfs identifier id'>srfs</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='NotImplementedError constant id'>NotImplementedError</span><span class='comma token'>,</span> <span class='string val'>&quot;need to implement?&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_srg</h3>
</div><div id="to_srg-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_srg</span><span class='args'>(srg_filename = 'bioworks.srg')</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
returns the filename used if the file exists, the name will be expanded to
full path, otherwise just what is given
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/spec_id/srf.rb', line 155</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jtprince/mspire/blob/12c04cb5d772ed265127dd94446ed8162423b373/lib/spec_id/srf.rb#L155">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">155
156
157
158
159
160
161
162
163
164
165
166</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_srg identifier id'>to_srg</span><span class='lparen token'>(</span><span class='srg_filename identifier id'>srg_filename</span><span class='assign token'>=</span><span class='string val'>'bioworks.srg'</span><span class='rparen token'>)</span>
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='srg_filename identifier id'>srg_filename</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span>
    <span class='@filenames ivar id'>@filenames</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='srf_file identifier id'>srf_file</span><span class='bitor op'>|</span>
      <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span> <span class='srf_file identifier id'>srf_file</span>
        <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='srf_file identifier id'>srf_file</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='srf_file identifier id'>srf_file</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='srg_filename identifier id'>srg_filename</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>