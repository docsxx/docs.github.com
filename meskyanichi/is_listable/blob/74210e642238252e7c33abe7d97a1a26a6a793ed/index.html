<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>meskyanichi's is_listable - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/meskyanichi/commits/is_listable/master" rel="alternate" title="Recent Commits to is_listable:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("meskyanichi", "is_listable", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='meskyanichi/is_listable/blob/74210e642238252e7c33abe7d97a1a26a6a793ed' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='meskyanichi/is_listable/blob/74210e642238252e7c33abe7d97a1a26a6a793ed' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("meskyanichi", "is_listable", "74210e642238252e7c33abe7d97a1a26a6a793ed", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/meskyanichi/is_listable/tree/">Source</a></li>
            <li class=""><a href="http://github.com/meskyanichi/is_listable/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/meskyanichi/is_listable/network">Network</a></li>            
            <li class=""><a href="http://github.com/meskyanichi/is_listable/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/meskyanichi/is_listable">Wiki</a></li>
            <li class=""><a href="http://github.com/meskyanichi/is_listable/graphs">Graphs</a></li>                    
            <li class="active"><a href="/meskyanichi/is_listable">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/meskyanichi">meskyanichi</a> / <b><a href="http://github.com/meskyanichi/is_listable/tree">is_listable</a></b>        
                <a id="namespaces_button" rel="meskyanichi/is_listable/blob/74210e642238252e7c33abe7d97a1a26a6a793ed" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="meskyanichi/is_listable/blob/74210e642238252e7c33abe7d97a1a26a6a793ed" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Is Listable</h1>
<p>
&quot;Is Listable&quot; is a gem that provides a way to implement a simple
listing method by using generated view helpers to create up and down
buttons. This will allow you to very quickly get the &quot;Move Up&quot;
and &quot;Move Down&quot; button functionality to move your database
records up and down in order.
</p>
<p>
This plugin depends on the acts_as_list plugin. I have created a gem
version out of it for convenience when installing this gem.
</p>
<h2>Installation</h2>
<pre class="code">
  <span class='gem identifier id'>gem</span> <span class='sources identifier id'>sources</span> <span class='minus op'>-</span><span class='a identifier id'>a</span> <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gems.github.com
  sudo gem install meskyanichi-is_listable
</span></pre>
<h2>Simple Setup</h2>
<h4>Initializing the gems inside &quot;environment.rb&quot;</h4>
<pre class="code">
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>&quot;meskyanichi-is_listable&quot;</span><span class='comma token'>,</span>   <span class='symbol val'>:lib</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;is_listable&quot;</span><span class='comma token'>,</span>  <span class='symbol val'>:source</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'http://gems.github.com'</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>&quot;meskyanichi-acts_as_list&quot;</span><span class='comma token'>,</span>  <span class='symbol val'>:lib</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;acts_as_list&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:source</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'http://gems.github.com'</span>
</pre>
<h4>PostModel</h4>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Post constant id'>Post</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='acts_as_list identifier id'>acts_as_list</span>
  <span class='end end kw'>end</span>
</pre>
<h4>PostsController</h4>
<pre class="code">
  <span class='class class kw'>class</span> <span class='PostsController constant id'>PostsController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>
    <span class='is_listable identifier id'>is_listable</span>
  <span class='end end kw'>end</span>
</pre>
<h4>PostsController#index</h4>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='table identifier id'>table</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='tr identifier id'>tr</span><span class='gt op'>&gt;</span>
      <span class='lt op'>&lt;</span><span class='th identifier id'>th</span> <span class='colspan identifier id'>colspan</span><span class='assign token'>=</span><span class='string val'>&quot;2&quot;</span><span class='gt op'>&gt;</span><span class='Position constant id'>Position</span><span class='lt op'>&lt;</span><span class='regexp val'>/th&gt;
      &lt;th&gt;Name&lt;/</span><span class='th identifier id'>th</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='regexp val'>/tr&gt;
    &lt;% @posts.each do |post| %&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;%= up_button_for_posts(post)&lt;/</span><span class='td identifier id'>td</span><span class='gt op'>&gt;</span>
      <span class='lt op'>&lt;</span><span class='td identifier id'>td</span><span class='gt op'>&gt;</span><span class='lt op'>&lt;</span><span class='string val'>%= down_button_for_posts(post)&lt;/td&gt;
      &lt;td&gt;&lt;%=</span> <span class='post identifier id'>post</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='string val'>%&gt;&lt;/td&gt;</span>
     <span class='lt op'>&lt;</span><span class='regexp val'>/tr&gt;
     &lt;% end %&gt;
  &lt;/</span><span class='table identifier id'>table</span><span class='gt op'>&gt;</span>
</pre>
<p>
This is basically all it takes to already get the gems working their magic.
This will by default assume the posts table in the database has a
&quot;position&quot; column which will determine the records position.
</p>
<h2>Additional Options</h2>
<p>
Here&#8217;s what additional options you can pass to the methods provided
by the Is Listable gem.
</p>
<h3>is_listable</h3>
<p>
The is_listable method takes a hash of options. These are the following
options you can provide:
</p>
<ul>
<li>:column (default: &#8216;position&#8217;)

</li>
<li>:controller (default: the invoked methods&#8217; controller name)

</li>
<li>:model (default: the invoked methods&#8217; controller name, pluralized and
camelcased)

</li>
<li>:scope (default: nil)

</li>
<li>:redirect_to (default: :back)

</li>
</ul>
<p>
View the implementation examples below:
</p>
<h4>:column</h4>
<p>
Specify the column name that represents the position in the database
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='PostsController constant id'>PostsController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>
    <span class='is_listable identifier id'>is_listable</span> <span class='symbol val'>:column</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'position'</span>
  <span class='end end kw'>end</span>
</pre>
<h4>:controller</h4>
<p>
Specify the controller name which the is_listable should be invoked on. 99%
of the time you do not need to provide it, as the is_listable method knows
what controller invoked it.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='PostsController constant id'>PostsController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>
    <span class='is_listable identifier id'>is_listable</span> <span class='symbol val'>:controller</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;posts&quot;</span>
  <span class='end end kw'>end</span>
</pre>
<h4>:model</h4>
<p>
Specify the model name which the is_listable should be invoked on. By
default it will try to use (in this case) the Post model, since it&#8217;s
the singular and camelcased &quot;posts&quot;. If Post is not the model you
wish to the PostController make listable, just provide the :model hash
value of the model you would like to sort.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='PostsController constant id'>PostsController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>
    <span class='is_listable identifier id'>is_listable</span> <span class='symbol val'>:model</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Post&quot;</span>
  <span class='end end kw'>end</span>
</pre>
<h4>:scope</h4>
<p>
Pass in an ActiveRecord object that&#8217;s associated to the model. It is
mainly to prevent user&#8217;s from haxing the web app and then updating
other users&#8217; record position. So this is a very simple solution
that&#8217;ll prevent it from happening.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='PostsController constant id'>PostsController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>
    <span class='is_listable identifier id'>is_listable</span> <span class='symbol val'>:scope</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='current_user identifier id'>current_user</span>
  <span class='end end kw'>end</span>
</pre>
<h4>:redirect_to</h4>
<p>
This option will allow you to specify a location to redirect to after the
sort process has completed. By default it will redirect back to the page
the request came from.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='PostsController constant id'>PostsController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>
    <span class='is_listable identifier id'>is_listable</span> <span class='symbol val'>:redirect_to</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:controller</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;posts&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;index&quot;</span><span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
</pre>
<h3>up_button_for_object and down_button_for_object</h3>
<p>
Once the is_listable method is invoked on a controller, it will generate
two view helpers which will be available to all views. This is a very
simple implementation, and the arguments taken are similar to those of the
link_to and button_to methods provided by Rails.
</p>
<pre class="code">
  <span class='up_button_for_posts identifier id'>up_button_for_posts</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
</pre>
<p>
The first argument you must provide, should be the ActiveRecord object
that&#8217;s, for example, currently inside a @objects.each loop. The
second argument takes a hash of options. Like the link_to() and button_to()
they will accept &quot;url&quot; and &quot;html&quot; attributes.
</p>
<pre class="code">
  <span class='up_button_for_posts identifier id'>up_button_for_posts</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:url</span>        <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span> <span class='symbol val'>:controller</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'posts , :action =&gt; '</span><span class='position identifier id'>position</span><span class='string val'>', :direction =&gt; '</span><span class='higher identifier id'>higher</span><span class='string val'>', :id =&gt; post},
    :html       =&gt; { :id =&gt; &quot;posts_up_button_#{post.id}&quot;, :class =&gt; &quot;posts_up_button&quot; }
  })
</span></pre>
<p>
So like the example above, you can add any additional, or overwrite
existing attributes/options inside the second argument as a hash. Note
that, by default, the view helpers will automatically render out the
id/class attributes on the html button tag the same as in the example
above. So you can easily apply styles to the provided classes and perform
javascript calls on these unique ids namings.
</p>
<pre class="code">
  <span class='down_button_for_posts identifier id'>down_button_for_posts</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:url</span>        <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span> <span class='symbol val'>:controller</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'posts , :action =&gt; '</span><span class='position identifier id'>position</span><span class='string val'>', :direction =&gt; '</span><span class='lower identifier id'>lower</span><span class='string val'>', :id =&gt; post},
    :html       =&gt; { :id =&gt; &quot;posts_down_button_#{post.id}&quot;, :class =&gt; &quot;posts_down_button&quot; }
  })
</span></pre>
<p>
So the work is basically done unless you are trying to accomplish something
a little more complex that the defaults do not provide. But, usually this
is not the case and you can just call the simple method like so:
</p>
<pre class="code">
  <span class='up_button_for_posts identifier id'>up_button_for_posts</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='rparen token'>)</span>
</pre>
<p>
However, what you might want to change frequently is the name/label of the
button. By default the up_button_for_objects and the
down_button_for_objects will either name the button &quot;up&quot; or
&quot;down&quot; depending on which was called. To overwrite the defaults,
you simply provide a name key/value of &quot;name&quot; like so:
</p>
<pre class="code">
  <span class='up_button_for_posts identifier id'>up_button_for_posts</span><span class='lparen token'>(</span><span class='post identifier id'>post</span><span class='comma token'>,</span> <span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Move Up&quot;</span><span class='rparen token'>)</span>
</pre>
<p>
This will change the &quot;Up&quot; label to &quot;Move Up&quot;.
</p>
<h2>Copyright</h2>
<p>
Copyright &#169; 2009 Michael van Rooijen. See LICENSE for details.
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>