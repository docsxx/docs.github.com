<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>why's shoes - Class: Archive::Tar::Minitar::Input - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/why/commits/shoes/master" rel="alternate" title="Recent Commits to shoes:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("why", "shoes", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='why/shoes/blob/cea39a8bf9a5b7057b1824a9fab868d1f8609d69' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='why/shoes/blob/cea39a8bf9a5b7057b1824a9fab868d1f8609d69' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("why", "shoes", "cea39a8bf9a5b7057b1824a9fab868d1f8609d69", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/why/shoes/tree/">Source</a></li>
            <li class=""><a href="http://github.com/why/shoes/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/why/shoes/network">Network</a></li>            
            <li class=""><a href="http://github.com/why/shoes/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/why/shoes">Wiki</a></li>
            <li class=""><a href="http://github.com/why/shoes/graphs">Graphs</a></li>                    
            <li class="active"><a href="/why/shoes">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/why">why</a> / <b><a href="http://github.com/why/shoes/tree">shoes</a></b>        
                <a id="namespaces_button" rel="why/shoes/blob/cea39a8bf9a5b7057b1824a9fab868d1f8609d69" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="why/shoes/blob/cea39a8bf9a5b7057b1824a9fab868d1f8609d69" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Archive_Tar_Minitar_Input">
  <h1>Class: Archive::Tar::Minitar::Input</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p>Enumerable</p>
</div><div class="section docstring">
  <p>
Wraps a Archive::Tar::Minitar::Reader with convenience methods and wrapped
stream management; Input only works with random access data streams. See
Input::new for details.
</p>

</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(input)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates a new Input object. If <tt>input</tt> is a stream object that
responds to #read), then it will simply be wrapped. Otherwise, one will be
created and opened using Kernel#open. When Input#close is called, the
stream object wrapped will be closed.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoes/minitar.rb', line 671</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/why/shoes/blob/cea39a8bf9a5b7057b1824a9fab868d1f8609d69/lib/shoes/minitar.rb#L671">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">671
672
673
674
675
676
677
678</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='input identifier id'>input</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='input identifier id'>input</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:read</span><span class='rparen token'>)</span>
    <span class='@io ivar id'>@io</span> <span class='assign token'>=</span> <span class='input identifier id'>input</span>
  <span class='else else kw'>else</span>
    <span class='@io ivar id'>@io</span> <span class='assign token'>=</span> <span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='input identifier id'>input</span><span class='comma token'>,</span> <span class='string val'>&quot;rb&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='@tarreader ivar id'>@tarreader</span> <span class='assign token'>=</span> <span class='Archive constant id'>Archive</span><span class='colon2 op'>::</span><span class='Tar constant id'>Tar</span><span class='colon2 op'>::</span><span class='Minitar constant id'>Minitar</span><span class='colon2 op'>::</span><span class='Reader constant id'>Reader</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='@io ivar id'>@io</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#open-class_method">open</span><span class='args'>(input)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
With no associated block, <tt>Input::open</tt> is a synonym for <tt>Input::new</tt>.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#close-instance_method">#close</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Closes the Reader object and the wrapped data stream.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#each-instance_method">#each</span><span class='args'>(&amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Iterates through each entry and rewinds to the beginning of the stream when
finished.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#extract_entry-instance_method">#extract_entry</span><span class='args'>(destdir, entry)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Extracts the current <tt>entry</tt> to <tt>destdir</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#tar-instance_method">#tar</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the Reader object for direct access.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>open</h3>
</div><div id="open-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>open</span><span class='args'>(input)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
With no associated block, <tt>Input::open</tt> is a synonym for <tt>Input::new</tt>. If
the optional code block is given, it will be passed the new <em>writer</em>
as an argument and the Input object will automatically be closed when the
block terminates. In this instance, <tt>Input::open</tt> returns the value of the
block.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoes/minitar.rb', line 654</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/why/shoes/blob/cea39a8bf9a5b7057b1824a9fab868d1f8609d69/lib/shoes/minitar.rb#L654">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">654
655
656
657
658
659
660
661
662
663
664
665</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='input identifier id'>input</span><span class='rparen token'>)</span>
  <span class='stream identifier id'>stream</span> <span class='assign token'>=</span> <span class='Input constant id'>Input</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='input identifier id'>input</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='stream identifier id'>stream</span> <span class='unless unless_mod kw'>unless</span> <span class='block_given? fid id'>block_given?</span>

  <span class='begin begin kw'>begin</span>
    <span class='res identifier id'>res</span> <span class='assign token'>=</span> <span class='yield yield kw'>yield</span> <span class='stream identifier id'>stream</span>
  <span class='ensure ensure kw'>ensure</span>
    <span class='stream identifier id'>stream</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
  <span class='end end kw'>end</span>

  <span class='res identifier id'>res</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>close</h3>
</div><div id="close-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>close</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Closes the Reader object and the wrapped data stream.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoes/minitar.rb', line 769</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/why/shoes/blob/cea39a8bf9a5b7057b1824a9fab868d1f8609d69/lib/shoes/minitar.rb#L769">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">769
770
771
772</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='close identifier id'>close</span>
  <span class='@io ivar id'>@io</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
  <span class='@tarreader ivar id'>@tarreader</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>each</h3>
</div><div id="each-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>each</span><span class='args'>(&amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Iterates through each entry and rewinds to the beginning of the stream when
finished.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoes/minitar.rb', line 682</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/why/shoes/blob/cea39a8bf9a5b7057b1824a9fab868d1f8609d69/lib/shoes/minitar.rb#L682">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">682
683
684
685
686</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='each identifier id'>each</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@tarreader ivar id'>@tarreader</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='entry identifier id'>entry</span><span class='bitor op'>|</span> <span class='yield yield kw'>yield</span> <span class='entry identifier id'>entry</span> <span class='rbrace token'>}</span>
<span class='ensure ensure kw'>ensure</span>
  <span class='@tarreader ivar id'>@tarreader</span><span class='dot token'>.</span><span class='rewind identifier id'>rewind</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>extract_entry</h3>
</div><div id="extract_entry-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>extract_entry</span><span class='args'>(destdir, entry)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Extracts the current <tt>entry</tt> to <tt>destdir</tt>. If a block is
provided, it yields an <tt>action</tt> Symbol, the full name of the file
being extracted (<tt>name</tt>), and a Hash of statistical information
(<tt>stats</tt>).
</p>
<p>
The <tt>action</tt> will be one of:
</p>
<table>
<tr><td valign="top"><tt>:dir</tt>:</td><td>The <tt>entry</tt> is a directory.

</td></tr>
<tr><td valign="top"><tt>:file_start</tt>:</td><td>The <tt>entry</tt> is a file; the extract of the file is just beginning.

</td></tr>
<tr><td valign="top"><tt>:file_progress</tt>:</td><td>Yielded every 4096 bytes during the extract of the <tt>entry</tt>.

</td></tr>
<tr><td valign="top"><tt>:file_done</tt>:</td><td>Yielded when the <tt>entry</tt> is completed.

</td></tr>
</table>
<p>
The <tt>stats</tt> hash contains the following keys:
</p>
<table>
<tr><td valign="top"><tt>:current</tt>:</td><td>The current total number of bytes read in the <tt>entry</tt>.

</td></tr>
<tr><td valign="top"><tt>:currinc</tt>:</td><td>The current number of bytes read in this read cycle.

</td></tr>
<tr><td valign="top"><tt>:entry</tt>:</td><td>The entry being extracted; this is a Reader::EntryStream, with all methods
thereof.

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoes/minitar.rb', line 707</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/why/shoes/blob/cea39a8bf9a5b7057b1824a9fab868d1f8609d69/lib/shoes/minitar.rb#L707">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='extract_entry identifier id'>extract_entry</span><span class='lparen token'>(</span><span class='destdir identifier id'>destdir</span><span class='comma token'>,</span> <span class='entry identifier id'>entry</span><span class='rparen token'>)</span> <span class='comment val'># :yields action, name, stats:</span>
  <span class='stats identifier id'>stats</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:current</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='comma token'>,</span>
    <span class='symbol val'>:currinc</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='comma token'>,</span>
    <span class='symbol val'>:entry</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='entry identifier id'>entry</span>
  <span class='rbrace token'>}</span>

  <span class='if if kw'>if</span> <span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span>
    <span class='dest identifier id'>dest</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='destdir identifier id'>destdir</span><span class='comma token'>,</span> <span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span><span class='rparen token'>)</span>

    <span class='yield yield kw'>yield</span> <span class='symbol val'>:dir</span><span class='comma token'>,</span> <span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span><span class='comma token'>,</span> <span class='stats identifier id'>stats</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>

    <span class='if if kw'>if</span> <span class='Archive constant id'>Archive</span><span class='colon2 op'>::</span><span class='Tar constant id'>Tar</span><span class='colon2 op'>::</span><span class='Minitar constant id'>Minitar</span><span class='dot token'>.</span><span class='dir? fid id'>dir?</span><span class='lparen token'>(</span><span class='dest identifier id'>dest</span><span class='rparen token'>)</span>
      <span class='begin begin kw'>begin</span>
        <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='chmod identifier id'>chmod</span><span class='lparen token'>(</span><span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='dest identifier id'>dest</span><span class='rparen token'>)</span>
      <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span>
        <span class='nil nil kw'>nil</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='mkdir_p identifier id'>mkdir_p</span><span class='lparen token'>(</span><span class='dest identifier id'>dest</span><span class='comma token'>,</span> <span class='symbol val'>:mode</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='mode identifier id'>mode</span><span class='rparen token'>)</span>
      <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='chmod identifier id'>chmod</span><span class='lparen token'>(</span><span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='dest identifier id'>dest</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='fsync_dir identifier id'>fsync_dir</span><span class='lparen token'>(</span><span class='dest identifier id'>dest</span><span class='rparen token'>)</span>
    <span class='fsync_dir identifier id'>fsync_dir</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='dest identifier id'>dest</span><span class='comma token'>,</span> <span class='string val'>&quot;..&quot;</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='return return kw'>return</span>
  <span class='else else kw'>else</span> <span class='comment val'># it's a file</span>
    <span class='destdir identifier id'>destdir</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='destdir identifier id'>destdir</span><span class='comma token'>,</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='dirname identifier id'>dirname</span><span class='lparen token'>(</span><span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='mkdir_p identifier id'>mkdir_p</span><span class='lparen token'>(</span><span class='destdir identifier id'>destdir</span><span class='comma token'>,</span> <span class='symbol val'>:mode</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0755</span><span class='rparen token'>)</span>

    <span class='destfile identifier id'>destfile</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='destdir identifier id'>destdir</span><span class='comma token'>,</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='basename identifier id'>basename</span><span class='lparen token'>(</span><span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='chmod identifier id'>chmod</span><span class='lparen token'>(</span><span class='integer val'>0600</span><span class='comma token'>,</span> <span class='destfile identifier id'>destfile</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='nil nil kw'>nil</span>  <span class='comment val'># Errno::ENOENT</span>

    <span class='yield yield kw'>yield</span> <span class='symbol val'>:file_start</span><span class='comma token'>,</span> <span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span><span class='comma token'>,</span> <span class='stats identifier id'>stats</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>

    <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='destfile identifier id'>destfile</span><span class='comma token'>,</span> <span class='string val'>&quot;wb&quot;</span><span class='comma token'>,</span> <span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='mode identifier id'>mode</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='os identifier id'>os</span><span class='bitor op'>|</span>
      <span class='loop identifier id'>loop</span> <span class='do do kw'>do</span>
        <span class='data identifier id'>data</span> <span class='assign token'>=</span> <span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='integer val'>4096</span><span class='rparen token'>)</span>
        <span class='break break kw'>break</span> <span class='unless unless_mod kw'>unless</span> <span class='data identifier id'>data</span>

        <span class='stats identifier id'>stats</span><span class='lbrack token'>[</span><span class='symbol val'>:currinc</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='os identifier id'>os</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='data identifier id'>data</span><span class='rparen token'>)</span>
        <span class='stats identifier id'>stats</span><span class='lbrack token'>[</span><span class='symbol val'>:current</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='stats identifier id'>stats</span><span class='lbrack token'>[</span><span class='symbol val'>:currinc</span><span class='rbrack token'>]</span>

        <span class='yield yield kw'>yield</span> <span class='symbol val'>:file_progress</span><span class='comma token'>,</span> <span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span><span class='comma token'>,</span> <span class='stats identifier id'>stats</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
      <span class='end end kw'>end</span>
      <span class='os identifier id'>os</span><span class='dot token'>.</span><span class='fsync identifier id'>fsync</span>
    <span class='end end kw'>end</span>

    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='chmod identifier id'>chmod</span><span class='lparen token'>(</span><span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='destfile identifier id'>destfile</span><span class='rparen token'>)</span>
    <span class='fsync_dir identifier id'>fsync_dir</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='dirname identifier id'>dirname</span><span class='lparen token'>(</span><span class='destfile identifier id'>destfile</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='fsync_dir identifier id'>fsync_dir</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='dirname identifier id'>dirname</span><span class='lparen token'>(</span><span class='destfile identifier id'>destfile</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='string val'>&quot;..&quot;</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

    <span class='yield yield kw'>yield</span> <span class='symbol val'>:file_done</span><span class='comma token'>,</span> <span class='entry identifier id'>entry</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span><span class='comma token'>,</span> <span class='stats identifier id'>stats</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>tar</h3>
</div><div id="tar-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>tar</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the Reader object for direct access.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoes/minitar.rb', line 764</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/why/shoes/blob/cea39a8bf9a5b7057b1824a9fab868d1f8609d69/lib/shoes/minitar.rb#L764">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">764
765
766</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='tar identifier id'>tar</span>
  <span class='@tarreader ivar id'>@tarreader</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>