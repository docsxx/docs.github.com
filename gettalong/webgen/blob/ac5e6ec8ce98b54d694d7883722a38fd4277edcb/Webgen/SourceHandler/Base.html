<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>gettalong's webgen - Module: Webgen::SourceHandler::Base - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/gettalong/commits/webgen/master" rel="alternate" title="Recent Commits to webgen:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("gettalong", "webgen", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='gettalong/webgen/blob/ac5e6ec8ce98b54d694d7883722a38fd4277edcb' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='gettalong/webgen/blob/ac5e6ec8ce98b54d694d7883722a38fd4277edcb' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("gettalong", "webgen", "ac5e6ec8ce98b54d694d7883722a38fd4277edcb", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/gettalong/webgen/tree/">Source</a></li>
            <li class=""><a href="http://github.com/gettalong/webgen/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/gettalong/webgen/network">Network</a></li>            
            <li class=""><a href="http://github.com/gettalong/webgen/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/gettalong/webgen">Wiki</a></li>
            <li class=""><a href="http://github.com/gettalong/webgen/graphs">Graphs</a></li>                    
            <li class="active"><a href="/gettalong/webgen">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/gettalong">gettalong</a> / <b><a href="http://github.com/gettalong/webgen/tree">webgen</a></b>        
                <a id="namespaces_button" rel="gettalong/webgen/blob/ac5e6ec8ce98b54d694d7883722a38fd4277edcb" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="gettalong/webgen/blob/ac5e6ec8ce98b54d694d7883722a38fd4277edcb" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Webgen_SourceHandler_Base">
  <h1>Module: Webgen::SourceHandler::Base</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="../Loggable.html" title="Webgen::Loggable">Webgen::Loggable</a>, <a href="Base/OutputPathHelpers.html" title="Webgen::SourceHandler::Base::OutputPathHelpers">Webgen::SourceHandler::Base::OutputPathHelpers</a></p>
</div><div class="section docstring">
  <p>
This module should be included in every source handler as it provides the
default methods for creating nodes.
</p>
<h2>Implementing Source Handlers</h2>
<p>
A source handler is a webgen extension that processes source paths to
create nodes and that provides the rendered content of these nodes. The
nodes are later written to the output location. This can range from simply
copying a path from the source to the output location to generating a whole
set of nodes from one input path!
</p>
<p>
The paths that are handled by a source handler are specified via path
patterns (see below). During a webgen run the #create_node method for each
source paths that matches a specified path pattern is called. And when it
is time to write out the node, the #content method is called to retrieve
the rendered content.
</p>
<p>
A source handler must not take any parameters on initialization and when
this module is not mixed in, the methods #create_node and #content need to
be defined. Also, a source handler does not need to reside under the
Webgen::SourceHandler namespace but all shipped ones do.
</p>
<p>
This base class provides useful default implementations of methods that are
used by nearly all source handler classes:
</p>
<ul>
<li>#create_node

</li>
<li>#output_path

</li>
<li>#node_exists?

</li>
</ul>
<p>
It also provides other utility methods:
</p>
<ul>
<li>#page_from_path

</li>
<li>#content

</li>
<li>#parent_node

</li>
</ul>
<h2>Nodes Created for Paths</h2>
<p>
The main functions of a source handler class are to create one or more
nodes for a source path and to provide the content of these nodes. To
achieve this, certain information needs to be set on a created node. If you
use the <tt>create_node</tt> method provided by this base class, you
don&#8217;t need to set them explicitly because this is done by the method:
</p>
<dl>
<dt><tt>node_info[:processor]</tt></dt><dd>Has to be set to the class name of the source handler. This is used by the
Node class: all unknown method calls are forwarded to the node processor.

</dd>
<dt><tt>node_info[:src]</tt></dt><dd>Has to be set to the string version of the path that lead to the creation
of the node.

</dd>
<dt><tt>node_info[:creation_path]</tt></dt><dd>Has to be set to the string version of the path that is used to create the
path.

</dd>
<dt><tt>meta_info[&#8216;no_output&#8217;]</tt></dt><dd>Has to be set to <tt>true</tt> on nodes that are used during a webgen run
but do not produce an output file.

</dd>
<dt><tt>meta_info[&#8216;modified_at&#8217;]</tt></dt><dd>Has to be set to the current time if not already set correctly (ie. if not
a Time object).

</dd>
</dl>
<p>
If <tt>meta_info[&#8216;draft&#8217;]</tt> is set on a path, then no node
should be created in <tt>create_node</tt> and <tt>nil</tt> has to be
returned.
</p>
<p>
Note: The difference between <tt>:src</tt> and <tt>:creation_path</tt> is that a creation
path need not have an existing source path representation. For example,
fragments created from a page source path have a different <tt>:creation_path</tt>
which includes the fragment part.
</p>
<p>
Additional information that is used only for processing purposes should be
stored in the #node_info hash of a node as the #meta_info hash is reserved
for real node meta information and should not be changed once the node is
created.
</p>
<h2>Output Path Names</h2>
<p>
The method for creating an output path name for a source path is stored in
the meta information <tt>output_path</tt>. If you don&#8217;t use the
provided method <tt>output_path</tt>, have a look at its implementation to
see how to an output path gets created. Individual output path creation
methods are stored as methods in the OutputPathHelpers module.
</p>
<h2>Path Patterns and Invocation order</h2>
<p>
Path patterns define which paths are handled by a specific source handler.
These patterns are specified in the <tt>sourcehandler.patterns</tt>
configuration hash as a mapping from the source handler class name to an
array of path patterns. The patterns need to have a format that
<tt>Dir.glob</tt> can handle. You can use the configuration helper
<tt>patterns</tt> to set this (is shown in the example below).
</p>
<p>
Specifying a path pattern does not mean that webgen uses the source
handler. One also needs to provide an entry in the configuration value
<tt>sourcehandler.invoke</tt>. This is a hash that maps the invocation rank
(a number) to an array of source handler class names. The lower the
invocation rank the earlier the specified source handlers are used.
</p>
<p>
The default invocation ranks are:
</p>
<dl>
<dt>1</dt><dd>Early. Normally there is no need to use this rank.

</dd>
<dt>5</dt><dd>Standard. This is the rank the normal source handler should use.

</dd>
<dt>9</dt><dd>Late. This rank should be used by source handlers that operate on/use
already created nodes and need to ensure that these nodes are available.

</dd>
</dl>
<h2>Default Meta Information</h2>
<p>
Each source handler can define default meta information that gets
automatically set on the source paths that are passed to the #create_node
method.
</p>
<p>
The default meta information is specified in the
<tt>sourcehandler.default_meta_info</tt> configuration hash as a mapping
from the source handler class name to the meta information hash.
</p>
<h2>Sample Source Handler Class</h2>
<p>
Following is a simple source handler class example which copies paths from
the source to the output location modifying the extension:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='SimpleCopy constant id'>SimpleCopy</span>

    <span class='include identifier id'>include</span> <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='SourceHandler constant id'>SourceHandler</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='include identifier id'>include</span> <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='WebsiteAccess constant id'>WebsiteAccess</span>

    <span class='def def kw'>def</span> <span class='create_node identifier id'>create_node</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
      <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='ext identifier id'>ext</span> <span class='opasgn op'>+=</span> <span class='string val'>'.copied'</span>
      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='content identifier id'>content</span><span class='lparen token'>(</span><span class='node identifier id'>node</span><span class='rparen token'>)</span>
      <span class='website identifier id'>website</span><span class='dot token'>.</span><span class='blackboard identifier id'>blackboard</span><span class='dot token'>.</span><span class='invoke identifier id'>invoke</span><span class='lparen token'>(</span><span class='symbol val'>:source_paths</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='node identifier id'>node</span><span class='dot token'>.</span><span class='node_info identifier id'>node_info</span><span class='lbrack token'>[</span><span class='symbol val'>:src</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='io identifier id'>io</span>
    <span class='end end kw'>end</span>

  <span class='end end kw'>end</span>

  <span class='WebsiteAccess constant id'>WebsiteAccess</span><span class='dot token'>.</span><span class='website identifier id'>website</span><span class='dot token'>.</span><span class='config identifier id'>config</span><span class='dot token'>.</span><span class='patterns identifier id'>patterns</span><span class='lparen token'>(</span><span class='string val'>'SimpleCopy'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='string val'>'**/*.jpg'</span><span class='comma token'>,</span> <span class='string val'>'**/*.png'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='WebsiteAccess constant id'>WebsiteAccess</span><span class='dot token'>.</span><span class='website identifier id'>website</span><span class='dot token'>.</span><span class='config identifier id'>config</span><span class='dot token'>.</span><span class='sourcehandler identifier id'>sourcehandler</span><span class='dot token'>.</span><span class='invoke identifier id'>invoke</span><span class='lbrack token'>[</span><span class='integer val'>5</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>'SimpleCopy'</span>
</pre>

</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#content-instance_method">#content</span><span class='args'>(node)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Return the content of the given <tt>node</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_node-instance_method">#create_node</span><span class='args'>(path, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Create a node from <tt>path</tt> if it does not already exists or
re-initalize an already existing node.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#node_exists-3F-instance_method">#node_exists?</span><span class='args'>(path, output_path = self.output_path(parent_node(path), path))</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Check if the node alcn and output path which would be created by
#create_node exist.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#output_path-instance_method">#output_path</span><span class='args'>(parent, path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Construct the output name for the given <tt>path</tt> and <tt>parent</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#page_from_path-instance_method">#page_from_path</span><span class='args'>(path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Utility method for creating a Webgen::Page object from the <tt>path</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#parent_node-instance_method">#parent_node</span><span class='args'>(path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Return the parent node for the given <tt>path</tt>.
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="../Loggable.html" title="Webgen::Loggable">Webgen::Loggable</a></h2>
    <p><span class='name'><a href="../Loggable.html#log-instance_method" title="log">log</a></span>, <span class='name'><a href="../Loggable.html#puts-instance_method" title="puts">puts</a></span></p>
  </div>
  
  <div>
    <h2>Public Instance Methods Included from <a href="Base/OutputPathHelpers.html" title="Webgen::SourceHandler::Base::OutputPathHelpers">Webgen::SourceHandler::Base::OutputPathHelpers</a></h2>
    <p><span class='name'><a href="Base/OutputPathHelpers.html#standard_output_path-instance_method" title="standard_output_path">standard_output_path</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>content</h3>
</div><div id="content-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>content</span><span class='args'>(node)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Return the content of the given <tt>node</tt>. If the return value is not
<tt>nil</tt> then the node gets written, otherwise it is ignored.
</p>
<p>
This default <tt>content</tt> method just returns <tt>nil</tt>.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webgen/sourcehandler/base.rb', line 251</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/gettalong/webgen/blob/ac5e6ec8ce98b54d694d7883722a38fd4277edcb/lib/webgen/sourcehandler/base.rb#L251">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">251
252
253</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='content identifier id'>content</span><span class='lparen token'>(</span><span class='node identifier id'>node</span><span class='rparen token'>)</span>
  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_node</h3>
</div><div id="create_node-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_node</span><span class='args'>(path, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Create a node from <tt>path</tt> if it does not already exists or
re-initalize an already existing node. The found node or the newly created
node is returned afterwards. <tt>nil</tt> is returned if no node can be
created (e.g. when <tt>path.meta_info[&#8216;draft&#8217;]</tt> is set).
</p>
<p>
The <tt>options</tt> parameter can be used for providing the optional
parameters:
</p>
<dl>
<dt><tt>:parent</tt></dt><dd>The parent node under which the new node should be created. If this is not
specified (the usual case), the parent node is determined by the
#parent_node method.

</dd>
<dt><tt>:output_path</tt></dt><dd>The output path that should be used for the node. If this is not specified
(the usual case), the output path is determined via the #output_path
method.

</dd>
</dl>
<p>
Some additional node information like <tt>:src</tt> and <tt>:processor</tt>
is set and the meta information is checked for validness. The
created/re-initialized node is yielded if a block is given.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webgen/sourcehandler/base.rb', line 219</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/gettalong/webgen/blob/ac5e6ec8ce98b54d694d7883722a38fd4277edcb/lib/webgen/sourcehandler/base.rb#L219">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create_node identifier id'>create_node</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span><span class='lbrack token'>[</span><span class='string val'>'draft'</span><span class='rbrack token'>]</span>
  <span class='parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:parent</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='parent_node identifier id'>parent_node</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='output_path identifier id'>output_path</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:output_path</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='output_path identifier id'>output_path</span><span class='lparen token'>(</span><span class='parent identifier id'>parent</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='node identifier id'>node</span> <span class='assign token'>=</span> <span class='node_exists? fid id'>node_exists?</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='output_path identifier id'>output_path</span><span class='rparen token'>)</span>

  <span class='if if kw'>if</span> <span class='node identifier id'>node</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span><span class='node identifier id'>node</span><span class='dot token'>.</span><span class='node_info identifier id'>node_info</span><span class='lbrack token'>[</span><span class='symbol val'>:src</span><span class='rbrack token'>]</span> <span class='neq op'>!=</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='source_path identifier id'>source_path</span> <span class='orop op'>||</span> <span class='node identifier id'>node</span><span class='dot token'>.</span><span class='node_info identifier id'>node_info</span><span class='lbrack token'>[</span><span class='symbol val'>:processor</span><span class='rbrack token'>]</span> <span class='neq op'>!=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='log identifier id'>log</span><span class='lparen token'>(</span><span class='symbol val'>:warn</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='dstring node'>&quot;Node already exists: source = #{path.source_path} | path = #{node.path} | alcn = #{node.alcn}&quot;</span><span class='rbrace token'>}</span>
    <span class='return return kw'>return</span> <span class='node identifier id'>node</span> <span class='comment val'>#TODO: think! should nil be returned?</span>
  <span class='elsif elsif kw'>elsif</span> <span class='notop op'>!</span><span class='node identifier id'>node</span>
    <span class='node identifier id'>node</span> <span class='assign token'>=</span> <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='Node constant id'>Node</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='parent identifier id'>parent</span><span class='comma token'>,</span> <span class='output_path identifier id'>output_path</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='cn identifier id'>cn</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span><span class='rparen token'>)</span>
  <span class='elsif elsif kw'>elsif</span> <span class='node identifier id'>node</span><span class='dot token'>.</span><span class='flagged? fid id'>flagged?</span><span class='lparen token'>(</span><span class='symbol val'>:reinit</span><span class='rparen token'>)</span>
    <span class='node identifier id'>node</span><span class='dot token'>.</span><span class='reinit identifier id'>reinit</span><span class='lparen token'>(</span><span class='output_path identifier id'>output_path</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='return return kw'>return</span> <span class='node identifier id'>node</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='node identifier id'>node</span><span class='lbrack token'>[</span><span class='string val'>'modified_at'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Time constant id'>Time</span><span class='rparen token'>)</span>
    <span class='log identifier id'>log</span><span class='lparen token'>(</span><span class='symbol val'>:warn</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='dstring node'>&quot;Meta information 'modified_at' set to current time in &lt;#{node.alcn}&gt; since its value '#{node['modified_at']}' was of type #{node['modified_at'].class}&quot;</span> <span class='rbrace token'>}</span> <span class='unless unless_mod kw'>unless</span> <span class='node identifier id'>node</span><span class='lbrack token'>[</span><span class='string val'>'modified_at'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='node identifier id'>node</span><span class='lbrack token'>[</span><span class='string val'>'modified_at'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
  <span class='end end kw'>end</span>
  <span class='node identifier id'>node</span><span class='dot token'>.</span><span class='node_info identifier id'>node_info</span><span class='lbrack token'>[</span><span class='symbol val'>:src</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='source_path identifier id'>source_path</span>
  <span class='node identifier id'>node</span><span class='dot token'>.</span><span class='node_info identifier id'>node_info</span><span class='lbrack token'>[</span><span class='symbol val'>:creation_path</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='path identifier id'>path</span>
  <span class='node identifier id'>node</span><span class='dot token'>.</span><span class='node_info identifier id'>node_info</span><span class='lbrack token'>[</span><span class='symbol val'>:processor</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='name identifier id'>name</span>
  <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='node identifier id'>node</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
  <span class='node identifier id'>node</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>node_exists?</h3>
</div><div id="node_exists-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>node_exists?</span><span class='args'>(path, output_path = self.output_path(parent_node(path), path))</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Check if the node alcn and output path which would be created by
#create_node exist. The <tt>output_path</tt> to check for can individually
be set.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webgen/sourcehandler/base.rb', line 198</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/gettalong/webgen/blob/ac5e6ec8ce98b54d694d7883722a38fd4277edcb/lib/webgen/sourcehandler/base.rb#L198">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">198
199
200</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='node_exists? fid id'>node_exists?</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='output_path identifier id'>output_path</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='output_path identifier id'>output_path</span><span class='lparen token'>(</span><span class='parent_node identifier id'>parent_node</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='WebsiteAccess constant id'>WebsiteAccess</span><span class='dot token'>.</span><span class='website identifier id'>website</span><span class='dot token'>.</span><span class='tree identifier id'>tree</span><span class='lbrack token'>[</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='alcn identifier id'>alcn</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='notop op'>!</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span><span class='lbrack token'>[</span><span class='string val'>'no_output'</span><span class='rbrack token'>]</span> <span class='andop op'>&amp;&amp;</span> <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='WebsiteAccess constant id'>WebsiteAccess</span><span class='dot token'>.</span><span class='website identifier id'>website</span><span class='dot token'>.</span><span class='tree identifier id'>tree</span><span class='lbrack token'>[</span><span class='output_path identifier id'>output_path</span><span class='comma token'>,</span> <span class='symbol val'>:path</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>output_path</h3>
</div><div id="output_path-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>output_path</span><span class='args'>(parent, path)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Construct the output name for the given <tt>path</tt> and <tt>parent</tt>.
First it is checked if a node with the constructed output name already
exists. If it exists, the language part is forced to be in the output name
and the resulting output name is returned.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webgen/sourcehandler/base.rb', line 175</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/gettalong/webgen/blob/ac5e6ec8ce98b54d694d7883722a38fd4277edcb/lib/webgen/sourcehandler/base.rb#L175">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='output_path identifier id'>output_path</span><span class='lparen token'>(</span><span class='parent identifier id'>parent</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='method identifier id'>method</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span><span class='lbrack token'>[</span><span class='string val'>'output_path'</span><span class='rbrack token'>]</span> <span class='plus op'>+</span> <span class='string val'>'_output_path'</span>
  <span class='use_lang_part identifier id'>use_lang_part</span> <span class='assign token'>=</span> <span class='if if kw'>if</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span><span class='lbrack token'>[</span><span class='string val'>'lang'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='comment val'># unlocalized files never get a lang in the filename!</span>
                    <span class='false false kw'>false</span>
                  <span class='else else kw'>else</span>
                    <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='WebsiteAccess constant id'>WebsiteAccess</span><span class='dot token'>.</span><span class='website identifier id'>website</span><span class='dot token'>.</span><span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='string val'>'sourcehandler.default_lang_in_output_path'</span><span class='rbrack token'>]</span> <span class='orop op'>||</span>
                      <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='WebsiteAccess constant id'>WebsiteAccess</span><span class='dot token'>.</span><span class='website identifier id'>website</span><span class='dot token'>.</span><span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='string val'>'website.lang'</span><span class='rbrack token'>]</span> <span class='neq op'>!=</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span><span class='lbrack token'>[</span><span class='string val'>'lang'</span><span class='rbrack token'>]</span>
                  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='OutputPathHelpers constant id'>OutputPathHelpers</span><span class='dot token'>.</span><span class='public_instance_methods identifier id'>public_instance_methods</span><span class='lparen token'>(</span><span class='false false kw'>false</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:to_s</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='parent identifier id'>parent</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='use_lang_part identifier id'>use_lang_part</span><span class='rparen token'>)</span>
    <span class='name identifier id'>name</span> <span class='opasgn op'>+=</span> <span class='string val'>'/'</span>  <span class='if if_mod kw'>if</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='match op'>=~</span> <span class='regexp val'>/\/$/</span> <span class='andop op'>&amp;&amp;</span> <span class='name identifier id'>name</span> <span class='nmatch op'>!~</span> <span class='regexp val'>/\/$/</span>
    <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='node identifier id'>node</span> <span class='assign token'>=</span> <span class='node_exists? fid id'>node_exists?</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='node identifier id'>node</span><span class='dot token'>.</span><span class='lang identifier id'>lang</span> <span class='neq op'>!=</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span><span class='lbrack token'>[</span><span class='string val'>'lang'</span><span class='rbrack token'>]</span>
      <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='parent identifier id'>parent</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span><span class='lbrack token'>[</span><span class='string val'>'lang'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='integer val'>? </span><span class='false false kw'>false</span> <span class='colon op'>:</span> <span class='true true kw'>true</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
      <span class='name identifier id'>name</span> <span class='opasgn op'>+=</span> <span class='string val'>'/'</span>  <span class='if if_mod kw'>if</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='match op'>=~</span> <span class='regexp val'>/\/$/</span> <span class='andop op'>&amp;&amp;</span> <span class='name identifier id'>name</span> <span class='nmatch op'>!~</span> <span class='regexp val'>/\/$/</span>
    <span class='end end kw'>end</span>
    <span class='name identifier id'>name</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Unknown method for creating output path: #{method}&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>page_from_path</h3>
</div><div id="page_from_path-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>page_from_path</span><span class='args'>(path)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Utility method for creating a Webgen::Page object from the <tt>path</tt>.
Also updates <tt>path.meta_info</tt> with the meta info from the page.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webgen/sourcehandler/base.rb', line 257</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/gettalong/webgen/blob/ac5e6ec8ce98b54d694d7883722a38fd4277edcb/lib/webgen/sourcehandler/base.rb#L257">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">257
258
259
260
261
262
263
264
265</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='page_from_path identifier id'>page_from_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='begin begin kw'>begin</span>
    <span class='page identifier id'>page</span> <span class='assign token'>=</span> <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='Page constant id'>Page</span><span class='dot token'>.</span><span class='from_data identifier id'>from_data</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='io identifier id'>io</span><span class='dot token'>.</span><span class='data identifier id'>data</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='Page constant id'>Page</span><span class='colon2 op'>::</span><span class='FormatError constant id'>FormatError</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Error reading source path &lt;#{path}&gt;: #{e.message}&quot;</span>
  <span class='end end kw'>end</span>
  <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span> <span class='assign token'>=</span> <span class='page identifier id'>page</span><span class='dot token'>.</span><span class='meta_info identifier id'>meta_info</span>
  <span class='page identifier id'>page</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>parent_node</h3>
</div><div id="parent_node-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>parent_node</span><span class='args'>(path)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Return the parent node for the given <tt>path</tt>.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webgen/sourcehandler/base.rb', line 268</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/gettalong/webgen/blob/ac5e6ec8ce98b54d694d7883722a38fd4277edcb/lib/webgen/sourcehandler/base.rb#L268">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">268
269
270
271
272
273
274</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='parent_node identifier id'>parent_node</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='parent_dir identifier id'>parent_dir</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='parent_path identifier id'>parent_path</span> <span class='eq op'>==</span> <span class='string val'>''</span> <span class='question op'>?</span> <span class='string val'>''</span> <span class='colon op'>:</span> <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='Path constant id'>Path</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='parent_path identifier id'>parent_path</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='alcn identifier id'>alcn</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='lparen token'>(</span><span class='parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='Webgen constant id'>Webgen</span><span class='colon2 op'>::</span><span class='WebsiteAccess constant id'>WebsiteAccess</span><span class='dot token'>.</span><span class='website identifier id'>website</span><span class='dot token'>.</span><span class='tree identifier id'>tree</span><span class='lbrack token'>[</span><span class='parent_dir identifier id'>parent_dir</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;The needed parent path &lt;#{parent_dir}&gt; for &lt;#{path.path}&gt; does not exist&quot;</span>
  <span class='end end kw'>end</span>
  <span class='parent identifier id'>parent</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>