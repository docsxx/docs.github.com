<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>georgepalmer's couch_foo - Module: CouchFoo::Callbacks - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/georgepalmer/commits/couch_foo/master" rel="alternate" title="Recent Commits to couch_foo:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("georgepalmer", "couch_foo", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("georgepalmer", "couch_foo", "13a37f5c452f8ebacb4a9caf0e225911cface3a6", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/georgepalmer/couch_foo/tree/">Source</a></li>
            <li class=""><a href="http://github.com/georgepalmer/couch_foo/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/georgepalmer/couch_foo/network">Network</a></li>            
            <li class=""><a href="http://github.com/georgepalmer/couch_foo/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/georgepalmer/couch_foo">Wiki</a></li>
            <li class=""><a href="http://github.com/georgepalmer/couch_foo/graphs">Graphs</a></li>                    
            <li class="active"><a href="/georgepalmer/couch_foo">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/georgepalmer">georgepalmer</a> / <b><a href="http://github.com/georgepalmer/couch_foo/tree">couch_foo</a></b>        
                <a id="namespaces_button" rel="georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module CouchFoo_Callbacks">
  <h1>Module: CouchFoo::Callbacks</h1>
  <div class="section docstring">
  <p>
Callbacks are hooks into the lifecycle of a Couch Foo object that allow you
to trigger logic before or after an alteration of the object state. This
can be used to make sure that associated and dependent objects are deleted
when destroy is called (by overwriting <tt>before_destroy</tt>) or to
massage attributes before they&#8217;re validated (by overwriting
<tt>before_validation</tt>). As an example of the callbacks initiated,
consider the <tt>Base#save</tt> call:
</p>
<ul>
<li>(-) <tt>save</tt>

</li>
<li>(-) <tt>valid</tt>

</li>
<li>(1) <tt>before_validation</tt>

</li>
<li>(2) <tt>before_validation_on_create</tt>

</li>
<li>(-) <tt>validate</tt>

</li>
<li>(-) <tt>validate_on_create</tt>

</li>
<li>(3) <tt>after_validation</tt>

</li>
<li>(4) <tt>after_validation_on_create</tt>

</li>
<li>(5) <tt>before_save</tt>

</li>
<li>(6) <tt>before_create</tt>

</li>
<li>(-) <tt>create</tt>

</li>
<li>(7) <tt>after_create</tt>

</li>
<li>(8) <tt>after_save</tt>

</li>
</ul>
<p>
That&#8217;s a total of eight callbacks, which gives you immense power to
react and prepare for each state in the Couch Foo lifecycle.
</p>
<p>
Examples:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='CreditCard constant id'>CreditCard</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='comment val'># Strip everything but digits, so the user can specify &quot;555 234 34&quot; or</span>
    <span class='comment val'># &quot;5552-3434&quot; or both will mean &quot;55523434&quot;</span>
    <span class='def def kw'>def</span> <span class='before_validation_on_create identifier id'>before_validation_on_create</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='number identifier id'>number</span> <span class='assign token'>=</span> <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/[^0-9]/</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='attribute_present? fid id'>attribute_present?</span><span class='lparen token'>(</span><span class='string val'>&quot;number&quot;</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='class class kw'>class</span> <span class='Subscription constant id'>Subscription</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='before_create identifier id'>before_create</span> <span class='symbol val'>:record_signup</span>

    <span class='private identifier id'>private</span>
      <span class='def def kw'>def</span> <span class='record_signup identifier id'>record_signup</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='signed_up_on identifier id'>signed_up_on</span> <span class='assign token'>=</span> <span class='Date constant id'>Date</span><span class='dot token'>.</span><span class='today identifier id'>today</span>
      <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='class class kw'>class</span> <span class='Firm constant id'>Firm</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='comment val'># Destroys the associated clients and people when the firm is destroyed</span>
    <span class='before_destroy identifier id'>before_destroy</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='record identifier id'>record</span><span class='bitor op'>|</span> <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='destroy_all identifier id'>destroy_all</span> <span class='dstring node'>&quot;firm_id = #{record.id}&quot;</span>   <span class='rbrace token'>}</span>
    <span class='before_destroy identifier id'>before_destroy</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='record identifier id'>record</span><span class='bitor op'>|</span> <span class='Client constant id'>Client</span><span class='dot token'>.</span><span class='destroy_all identifier id'>destroy_all</span> <span class='dstring node'>&quot;client_of = #{record.id}&quot;</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
</pre>
<h2>Inheritable callback queues</h2>
<p>
Besides the overwriteable callback methods, it&#8217;s also possible to
register callbacks through the use of the callback macros. Their main
advantage is that the macros add behavior into a callback queue that is
kept intact down through an inheritance hierarchy. Example:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Topic constant id'>Topic</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='before_destroy identifier id'>before_destroy</span> <span class='symbol val'>:destroy_author</span>
  <span class='end end kw'>end</span>

  <span class='class class kw'>class</span> <span class='Reply constant id'>Reply</span> <span class='lt op'>&lt;</span> <span class='Topic constant id'>Topic</span>
    <span class='before_destroy identifier id'>before_destroy</span> <span class='symbol val'>:destroy_readers</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Now, when <tt>Topic#destroy</tt> is run only <tt>destroy_author</tt> is
called. When <tt>Reply#destroy</tt> is run, both <tt>destroy_author</tt>
and <tt>destroy_readers</tt> are called. Contrast this to the situation
where we&#8217;ve implemented the save behavior through overwriteable
methods:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Topic constant id'>Topic</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='destroy_author identifier id'>destroy_author</span> <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='class class kw'>class</span> <span class='Reply constant id'>Reply</span> <span class='lt op'>&lt;</span> <span class='Topic constant id'>Topic</span>
    <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='destroy_readers identifier id'>destroy_readers</span> <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
In that case, <tt>Reply#destroy</tt> would only run
<tt>destroy_readers</tt> and <em>not</em> <tt>destroy_author</tt>. So, use
the callback macros when you want to ensure that a certain callback is
called for the entire hierarchy, and use the regular overwriteable methods
when you want to leave it up to each descendent to decide whether they want
to call <tt>super</tt> and trigger the inherited callbacks.
</p>
<p>
*IMPORTANT:* In order for inheritance to work for the callback queues, you
must specify the callbacks before specifying the associations. Otherwise,
you might trigger the loading of a child before the parent has registered
the callbacks and they won&#8217;t be inherited.
</p>
<h2>Types of callbacks</h2>
<p>
There are four types of callbacks accepted by the callback macros: Method
references (symbol), callback objects, inline methods (using a proc), and
inline eval methods (using a string). Method references and callback
objects are the recommended approaches, inline methods using a proc are
sometimes appropriate (such as for creating mix-ins), and inline eval
methods are deprecated.
</p>
<p>
The method reference callbacks work by specifying a protected or private
method available in the object, like this:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Topic constant id'>Topic</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='before_destroy identifier id'>before_destroy</span> <span class='symbol val'>:delete_parents</span>

    <span class='private identifier id'>private</span>
      <span class='def def kw'>def</span> <span class='delete_parents identifier id'>delete_parents</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='delete_all identifier id'>delete_all</span> <span class='dstring node'>&quot;parent_id = #{id}&quot;</span>
      <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
The callback objects have methods named after the callback called with the
record as the only parameter, such as:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='BankAccount constant id'>BankAccount</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='before_save identifier id'>before_save</span>      <span class='EncryptionWrapper constant id'>EncryptionWrapper</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;credit_card_number&quot;</span><span class='rparen token'>)</span>
    <span class='after_save identifier id'>after_save</span>       <span class='EncryptionWrapper constant id'>EncryptionWrapper</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;credit_card_number&quot;</span><span class='rparen token'>)</span>
    <span class='after_initialize identifier id'>after_initialize</span> <span class='EncryptionWrapper constant id'>EncryptionWrapper</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;credit_card_number&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='class class kw'>class</span> <span class='EncryptionWrapper constant id'>EncryptionWrapper</span>
    <span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='attribute identifier id'>attribute</span><span class='rparen token'>)</span>
      <span class='@attribute ivar id'>@attribute</span> <span class='assign token'>=</span> <span class='attribute identifier id'>attribute</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='before_save identifier id'>before_save</span><span class='lparen token'>(</span><span class='record identifier id'>record</span><span class='rparen token'>)</span>
      <span class='record identifier id'>record</span><span class='dot token'>.</span><span class='credit_card_number identifier id'>credit_card_number</span> <span class='assign token'>=</span> <span class='encrypt identifier id'>encrypt</span><span class='lparen token'>(</span><span class='record identifier id'>record</span><span class='dot token'>.</span><span class='credit_card_number identifier id'>credit_card_number</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='after_save identifier id'>after_save</span><span class='lparen token'>(</span><span class='record identifier id'>record</span><span class='rparen token'>)</span>
      <span class='record identifier id'>record</span><span class='dot token'>.</span><span class='credit_card_number identifier id'>credit_card_number</span> <span class='assign token'>=</span> <span class='decrypt identifier id'>decrypt</span><span class='lparen token'>(</span><span class='record identifier id'>record</span><span class='dot token'>.</span><span class='credit_card_number identifier id'>credit_card_number</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='alias_method identifier id'>alias_method</span> <span class='symbol val'>:after_find</span><span class='comma token'>,</span> <span class='symbol val'>:after_save</span>

    <span class='private identifier id'>private</span>
      <span class='def def kw'>def</span> <span class='encrypt identifier id'>encrypt</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
        <span class='comment val'># Secrecy is committed</span>
      <span class='end end kw'>end</span>

      <span class='def def kw'>def</span> <span class='decrypt identifier id'>decrypt</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
        <span class='comment val'># Secrecy is unveiled</span>
      <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
So you specify the object you want messaged on a given callback. When that
callback is triggered, the object has a method by the name of the callback
messaged.
</p>
<p>
The callback macros usually accept a symbol for the method they&#8217;re
supposed to run, but you can also pass a &quot;method string&quot;, which
will then be evaluated within the binding of the callback. Example:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Topic constant id'>Topic</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='before_destroy identifier id'>before_destroy</span> <span class='string val'>'self.class.delete_all &quot;:parent_id =&gt; #{id}&quot;'</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Notice that single quotes (&#8217;) are used so the <tt>#{id}</tt> part
isn&#8217;t evaluated until the callback is triggered. Also note that these
inline callbacks can be stacked just like the regular ones:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Topic constant id'>Topic</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='before_destroy identifier id'>before_destroy</span> <span class='string val'>'self.class.delete_all &quot;:parent_id =&gt; #{id}&quot;'</span><span class='comma token'>,</span>
                   <span class='string val'>'puts &quot;Evaluated after parents are destroyed&quot;'</span>
  <span class='end end kw'>end</span>
</pre>
<h2>The <tt>after_find</tt> and <tt>after_initialize</tt> exceptions</h2>
<p>
Because <tt>after_find</tt> and <tt>after_initialize</tt> are called for
each object found and instantiated by a finder, such as
<tt>Base.find(:all)</tt>, we&#8217;ve had to implement a simple performance
constraint (50% more speed on a simple test case). Unlike all the other
callbacks, <tt>after_find</tt> and <tt>after_initialize</tt> will only be
run if an explicit implementation is defined (<tt>def after_find</tt>). In
that case, all of the callback types will be called.
</p>
<h2><tt>before_validation*</tt> returning statements</h2>
<p>
If the returning value of a <tt>before_validation</tt> callback can be
evaluated to <tt>false</tt>, the process will be aborted and
<tt>Base#save</tt> will return <tt>false</tt>. If Base#save! is called it
will raise a RecordNotSaved exception. Nothing will be appended to the
errors object.
</p>
<h2>Canceling callbacks</h2>
<p>
If a <tt>before_*</tt> callback returns <tt>false</tt>, all the later
callbacks and the associated action are cancelled. If an <tt>after_*</tt>
callback returns <tt>false</tt>, all the later callbacks are cancelled.
Callbacks are generally run in the order they are defined, with the
exception of callbacks defined as methods on the model, which are called
last.
</p>

</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="CALLBACKS-constant">CALLBACKS</dt>
      <dd>%w(
  after_find after_initialize before_save after_save before_create after_create before_update after_update 
  before_validation after_validation before_validation_on_create after_validation_on_create 
  before_validation_on_update after_validation_on_update before_destroy after_destroy
)</dd>
    
  </dl>
</div>

</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#included-class_method">included</span><span class='args'>(base)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_create-instance_method">#after_create</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>after</em> &lt;tt&gt;Base.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_destroy-instance_method">#after_destroy</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>after</em> &lt;tt&gt;Base.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_save-instance_method">#after_save</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>after</em> &lt;tt&gt;Base.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_update-instance_method">#after_update</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>after</em> &lt;tt&gt;Base.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_validation-instance_method">#after_validation</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>after</em> &lt;tt&gt;Validations.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_validation_on_create-instance_method">#after_validation_on_create</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>after</em> &lt;tt&gt;Validations.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_validation_on_update-instance_method">#after_validation_on_update</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>after</em> &lt;tt&gt;Validations.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_create-instance_method">#before_create</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>before</em> &lt;tt&gt;Base.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_destroy-instance_method">#before_destroy</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>before</em> &lt;tt&gt;Base.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_save-instance_method">#before_save</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>before</em> &lt;tt&gt;Base.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_update-instance_method">#before_update</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>before</em> &lt;tt&gt;Base.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_validation-instance_method">#before_validation</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>before</em> &lt;tt&gt;Validations.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_validation_on_create-instance_method">#before_validation_on_create</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>before</em> &lt;tt&gt;Validations.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_validation_on_update-instance_method">#before_validation_on_update</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is called <em>before</em> &lt;tt&gt;Validations.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#destroy_with_callbacks-instance_method">#destroy_with_callbacks</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#valid_with_callbacks-3F-instance_method">#valid_with_callbacks?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>included</h3>
</div><div id="included-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>included</span><span class='args'>(base)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 184</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L184">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">184
185
186
187
188
189
190
191
192
193</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='included identifier id'>included</span><span class='lparen token'>(</span><span class='base identifier id'>base</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='base identifier id'>base</span><span class='dot token'>.</span><span class='extend identifier id'>extend</span> <span class='Observable constant id'>Observable</span>

  <span class='lbrack token'>[</span><span class='symbol val'>:create_or_update</span><span class='comma token'>,</span> <span class='symbol val'>:valid?</span><span class='comma token'>,</span> <span class='symbol val'>:create</span><span class='comma token'>,</span> <span class='symbol val'>:update</span><span class='comma token'>,</span> <span class='symbol val'>:destroy</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='method identifier id'>method</span><span class='bitor op'>|</span>
    <span class='base identifier id'>base</span><span class='dot token'>.</span><span class='send identifier id'>send</span> <span class='symbol val'>:alias_method_chain</span><span class='comma token'>,</span> <span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='symbol val'>:callbacks</span>
  <span class='end end kw'>end</span>

  <span class='base identifier id'>base</span><span class='dot token'>.</span><span class='send identifier id'>send</span> <span class='symbol val'>:include</span><span class='comma token'>,</span> <span class='ActiveSupport constant id'>ActiveSupport</span><span class='colon2 op'>::</span><span class='Callbacks constant id'>Callbacks</span>
  <span class='base identifier id'>base</span><span class='dot token'>.</span><span class='define_callbacks identifier id'>define_callbacks</span> <span class='mult op'>*</span><span class='CALLBACKS constant id'>CALLBACKS</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>after_create</h3>
</div><div id="after_create-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_create</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>after</em> <tt>Base.save</tt> on new objects that
haven&#8217;t been saved yet (no record exists).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 216</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L216">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after_create identifier id'>after_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='create_with_callbacks identifier id'>create_with_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_create</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='create_without_callbacks identifier id'>create_without_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_create</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:create_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.save&lt;/tt&gt; on existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_update identifier id'>before_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.save&lt;/tt&gt; on existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_update identifier id'>after_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='update_with_callbacks identifier id'>update_with_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_update</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='update_without_callbacks identifier id'>update_without_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_update</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:update_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='before_validation identifier id'>before_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='after_validation identifier id'>after_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_create identifier id'>before_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_create identifier id'>after_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_destroy</h3>
</div><div id="after_destroy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_destroy</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>after</em> <tt>Base.destroy</tt> (and all the attributes have
been frozen).
</p>
<pre class="code">
 <span class='class class kw'>class</span> <span class='Contact constant id'>Contact</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
   <span class='after_destroy identifier id'>after_destroy</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='record identifier id'>record</span><span class='bitor op'>|</span> <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lparen token'>(</span> <span class='dstring node'>&quot;Contact #{record.id} was destroyed.&quot;</span> <span class='rparen token'>)</span> <span class='rbrace token'>}</span>
 <span class='end end kw'>end</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 285</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L285">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_save</h3>
</div><div id="after_save-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_save</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>after</em> <tt>Base.save</tt> (regardless of whether
it&#8217;s a <tt>create</tt> or <tt>update</tt> save).
</p>
<pre class="code">
 <span class='class class kw'>class</span> <span class='Contact constant id'>Contact</span> <span class='lt op'>&lt;</span> <span class='CouchFoo constant id'>CouchFoo</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
   <span class='after_save identifier id'>after_save</span> <span class='lbrace token'>{</span> <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lparen token'>(</span> <span class='string val'>'New contact saved!'</span> <span class='rparen token'>)</span> <span class='rbrace token'>}</span>
 <span class='end end kw'>end</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 203</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L203">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after_save identifier id'>after_save</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='create_or_update_with_callbacks identifier id'>create_or_update_with_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_save</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='create_or_update_without_callbacks identifier id'>create_or_update_without_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_save</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:create_or_update_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.save&lt;/tt&gt; on new objects that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='before_create identifier id'>before_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.save&lt;/tt&gt; on new objects that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_create identifier id'>after_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='create_with_callbacks identifier id'>create_with_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_create</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='create_without_callbacks identifier id'>create_without_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_create</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:create_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.save&lt;/tt&gt; on existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_update identifier id'>before_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.save&lt;/tt&gt; on existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_update identifier id'>after_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='update_with_callbacks identifier id'>update_with_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_update</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='update_without_callbacks identifier id'>update_without_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_update</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:update_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='before_validation identifier id'>before_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='after_validation identifier id'>after_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_create identifier id'>before_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_create identifier id'>after_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_update</h3>
</div><div id="after_update-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_update</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>after</em> <tt>Base.save</tt> on existing objects that have a
record.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 229</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L229">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after_update identifier id'>after_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='update_with_callbacks identifier id'>update_with_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_update</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='update_without_callbacks identifier id'>update_without_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_update</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:update_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='before_validation identifier id'>before_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='after_validation identifier id'>after_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_create identifier id'>before_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_create identifier id'>after_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_validation</h3>
</div><div id="after_validation-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_validation</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>after</em> <tt>Validations.validate</tt> (which is part of
the <tt>Base.save</tt> call).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 243</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L243">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after_validation identifier id'>after_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_create identifier id'>before_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_create identifier id'>after_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_validation_on_create</h3>
</div><div id="after_validation_on_create-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_validation_on_create</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>after</em> <tt>Validations.validate</tt> (which is part of
the <tt>Base.save</tt> call) on new objects that haven&#8217;t been saved
yet (no record exists).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 251</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L251">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after_validation_on_create identifier id'>after_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_validation_on_update</h3>
</div><div id="after_validation_on_update-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_validation_on_update</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>after</em> <tt>Validations.validate</tt> (which is part of
the <tt>Base.save</tt> call) on existing objects that have a record.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 259</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L259">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_create</h3>
</div><div id="before_create-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_create</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>before</em> <tt>Base.save</tt> on new objects that
haven&#8217;t been saved yet (no record exists).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 213</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L213">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before_create identifier id'>before_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.save&lt;/tt&gt; on new objects that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_create identifier id'>after_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='create_with_callbacks identifier id'>create_with_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_create</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='create_without_callbacks identifier id'>create_without_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_create</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:create_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.save&lt;/tt&gt; on existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_update identifier id'>before_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.save&lt;/tt&gt; on existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_update identifier id'>after_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='update_with_callbacks identifier id'>update_with_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_update</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='update_without_callbacks identifier id'>update_without_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_update</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:update_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='before_validation identifier id'>before_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='after_validation identifier id'>after_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_create identifier id'>before_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_create identifier id'>after_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_destroy</h3>
</div><div id="before_destroy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_destroy</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>before</em> <tt>Base.destroy</tt>.
</p>
<p>
Note: If you need to <em>destroy</em> or <em>nullify</em> associated
records first, use the <tt>:dependent</tt> option on your associations.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 278</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L278">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_save</h3>
</div><div id="before_save-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_save</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>before</em> <tt>Base.save</tt> (regardless of whether
it&#8217;s a <tt>create</tt> or <tt>update</tt> save).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 196</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L196">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before_save identifier id'>before_save</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.save&lt;/tt&gt; (regardless of whether it's a +create+ or +update+ save).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_save { logger.info( 'New contact saved!' ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_save identifier id'>after_save</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='create_or_update_with_callbacks identifier id'>create_or_update_with_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_save</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='create_or_update_without_callbacks identifier id'>create_or_update_without_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_save</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:create_or_update_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.save&lt;/tt&gt; on new objects that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='before_create identifier id'>before_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.save&lt;/tt&gt; on new objects that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_create identifier id'>after_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='create_with_callbacks identifier id'>create_with_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_create</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='create_without_callbacks identifier id'>create_without_callbacks</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_create</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:create_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.save&lt;/tt&gt; on existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_update identifier id'>before_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.save&lt;/tt&gt; on existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_update identifier id'>after_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='update_with_callbacks identifier id'>update_with_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_update</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='update_without_callbacks identifier id'>update_without_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_update</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:update_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='before_validation identifier id'>before_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='after_validation identifier id'>after_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_create identifier id'>before_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_create identifier id'>after_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_update</h3>
</div><div id="before_update-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_update</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>before</em> <tt>Base.save</tt> on existing objects that have
a record.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 226</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L226">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before_update identifier id'>before_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.save&lt;/tt&gt; on existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_update identifier id'>after_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='update_with_callbacks identifier id'>update_with_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_update</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='update_without_callbacks identifier id'>update_without_callbacks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_update</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>
  <span class='private identifier id'>private</span> <span class='symbol val'>:update_with_callbacks</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='before_validation identifier id'>before_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='after_validation identifier id'>after_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_create identifier id'>before_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_create identifier id'>after_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_validation</h3>
</div><div id="before_validation-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_validation</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>before</em> <tt>Validations.validate</tt> (which is part of
the <tt>Base.save</tt> call).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 240</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L240">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before_validation identifier id'>before_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call).</span>
  <span class='def def kw'>def</span> <span class='after_validation identifier id'>after_validation</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_create identifier id'>before_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_create identifier id'>after_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_validation_on_create</h3>
</div><div id="before_validation_on_create-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_validation_on_create</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>before</em> <tt>Validations.validate</tt> (which is part of
the <tt>Base.save</tt> call) on new objects that haven&#8217;t been saved
yet (no record exists).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 247</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L247">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before_validation_on_create identifier id'>before_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on new objects</span>
  <span class='comment val'># that haven't been saved yet (no record exists).</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_create identifier id'>after_validation_on_create</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_validation_on_update</h3>
</div><div id="before_validation_on_update-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_validation_on_update</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is called <em>before</em> <tt>Validations.validate</tt> (which is part of
the <tt>Base.save</tt> call) on existing objects that have a record.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 255</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L255">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before_validation_on_update identifier id'>before_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Validations.validate&lt;/tt&gt; (which is part of the &lt;tt&gt;Base.save&lt;/tt&gt; call) on</span>
  <span class='comment val'># existing objects that have a record.</span>
  <span class='def def kw'>def</span> <span class='after_validation_on_update identifier id'>after_validation_on_update</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Is called _before_ &lt;tt&gt;Base.destroy&lt;/tt&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note: If you need to _destroy_ or _nullify_ associated records first,</span>
  <span class='comment val'># use the &lt;tt&gt;:dependent&lt;/tt&gt; option on your associations.</span>
  <span class='def def kw'>def</span> <span class='before_destroy identifier id'>before_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='comment val'># Is called _after_ &lt;tt&gt;Base.destroy&lt;/tt&gt; (and all the attributes have been frozen).</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  class Contact &lt; CouchFoo::Base</span>
  <span class='comment val'>#    after_destroy { |record| logger.info( &quot;Contact #{record.id} was destroyed.&quot; ) }</span>
  <span class='comment val'>#  end</span>
  <span class='def def kw'>def</span> <span class='after_destroy identifier id'>after_destroy</span><span class='lparen token'>(</span><span class='rparen token'>)</span>  <span class='end end kw'>end</span>
  <span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> <span class='comment val'>#:nodoc:</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
    <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
    <span class='result identifier id'>result</span>
  <span class='end end kw'>end</span>

  <span class='private identifier id'>private</span>
    <span class='def def kw'>def</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>

      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='run_callbacks identifier id'>run_callbacks</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

      <span class='if if kw'>if</span> <span class='result identifier id'>result</span> <span class='neq op'>!=</span> <span class='false false kw'>false</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to_without_attributes? fid id'>respond_to_without_attributes?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
        <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='notify identifier id'>notify</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='changed identifier id'>changed</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='notify_observers identifier id'>notify_observers</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>destroy_with_callbacks</h3>
</div><div id="destroy_with_callbacks-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>destroy_with_callbacks</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 286</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L286">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">286
287
288
289
290
291</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='destroy_with_callbacks identifier id'>destroy_with_callbacks</span> 
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_destroy</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='destroy_without_callbacks identifier id'>destroy_without_callbacks</span>
  <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_destroy</span><span class='rparen token'>)</span>
  <span class='result identifier id'>result</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>valid_with_callbacks?</h3>
</div><div id="valid_with_callbacks-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>valid_with_callbacks?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couch_foo/callbacks.rb', line 261</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/georgepalmer/couch_foo/blob/13a37f5c452f8ebacb4a9caf0e225911cface3a6/lib/couch_foo/callbacks.rb#L261">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">261
262
263
264
265
266
267
268
269
270
271
272</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='valid_with_callbacks? fid id'>valid_with_callbacks?</span> 
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
  <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:before_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='valid_without_callbacks? fid id'>valid_without_callbacks?</span>

  <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='new_record? fid id'>new_record?</span> <span class='then then kw'>then</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_create</span><span class='rparen token'>)</span> <span class='else else kw'>else</span> <span class='callback identifier id'>callback</span><span class='lparen token'>(</span><span class='symbol val'>:after_validation_on_update</span><span class='rparen token'>)</span> <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>