<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>sunlightlabs's ruby-tcorps - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/sunlightlabs/commits/ruby-tcorps/master" rel="alternate" title="Recent Commits to ruby-tcorps:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("sunlightlabs", "ruby-tcorps", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='sunlightlabs/ruby-tcorps/blob/411f45e6a961e28c312a062620dc170424b87995' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='sunlightlabs/ruby-tcorps/blob/411f45e6a961e28c312a062620dc170424b87995' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("sunlightlabs", "ruby-tcorps", "411f45e6a961e28c312a062620dc170424b87995", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/sunlightlabs/ruby-tcorps/tree/">Source</a></li>
            <li class=""><a href="http://github.com/sunlightlabs/ruby-tcorps/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/sunlightlabs/ruby-tcorps/network">Network</a></li>            
            <li class=""><a href="http://github.com/sunlightlabs/ruby-tcorps/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/sunlightlabs/ruby-tcorps">Wiki</a></li>
            <li class=""><a href="http://github.com/sunlightlabs/ruby-tcorps/graphs">Graphs</a></li>                    
            <li class="active"><a href="/sunlightlabs/ruby-tcorps">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/sunlightlabs">sunlightlabs</a> / <b><a href="http://github.com/sunlightlabs/ruby-tcorps/tree">ruby-tcorps</a></b>        
                <a id="namespaces_button" rel="sunlightlabs/ruby-tcorps/blob/411f45e6a961e28c312a062620dc170424b87995" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="sunlightlabs/ruby-tcorps/blob/411f45e6a961e28c312a062620dc170424b87995" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h2>Introduction</h2>

<p>This is a wrapper for the <a href="http://transparencycorps.org">TransparencyCorps</a> API.  TransparencyCorps is a microtask directory that integrates with external applications to encourage and reward volunteer activity.</p>

<p>You would use this in your TransparencyCorps campaign application to notify TransparencyCorps when a user has completed a task, and they should receive points for their effort.</p>

<h2>Usage</h2>

<p>Your campaign will receive a unique task key for each user when they land on your page from TransparencyCorps.  You should hold this key until the task is completed, perhaps in hidden input fields on your forms, or in whatever session store your application might use.</p>

<p>To complete a task and nothing more:</p>

<pre class="code"><span class='TransparencyCorps constant id'>TransparencyCorps</span><span class='dot token'>.</span><span class='complete_task identifier id'>complete_task</span> <span class='string val'>&quot;the_actual_task_key&quot;</span>
<span class='comment val'># =&gt; #&lt;Net::HTTPOK 200 OK readbody=true&gt;</span>
</pre>

<p>Your application may want to seamlessly direct users to a new task once they've completed one.  TransparencyCorps can generate a new task for you at the same time as you mark the current task complete, and will return the URL for the app to redirect itself to as the response body.  You can do this with this wrapper by:</p>

<pre class="code"><span class='TransparencyCorps constant id'>TransparencyCorps</span><span class='dot token'>.</span><span class='complete_task_and_reassign identifier id'>complete_task_and_reassign</span> <span class='string val'>&quot;the_actual_task_key&quot;</span>
<span class='comment val'># =&gt; &quot;http://yoursite.com/yourcampaign?task_key=new_task_key&amp;username=testuser&amp;points=500</span>

<span class='comment val'># or you can get the response body and pull the URL yourself:</span>
<span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='TransparencyCorps constant id'>TransparencyCorps</span><span class='dot token'>.</span><span class='complete_task identifier id'>complete_task</span> <span class='string val'>&quot;the_actual_task_key&quot;</span><span class='comma token'>,</span> <span class='true true kw'>true</span>
<span class='response identifier id'>response</span><span class='dot token'>.</span><span class='body identifier id'>body</span>
<span class='comment val'># =&gt; &quot;http://yoursite.com/yourcampaign?task_key=new_task_key&amp;username=testuser&amp;points=500</span>
</pre>

<p>By default, the wrapper directs requests to http://transparencycorps.org.  If you want to use a different URL, (for testing in a local or staging environment, for instance), assign it a different one.</p>

<pre class="code"><span class='TransparencyCorps constant id'>TransparencyCorps</span><span class='dot token'>.</span><span class='url identifier id'>url</span> <span class='assign token'>=</span> <span class='string val'>&quot;http://localhost:3000&quot;</span>
</pre>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>