<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>iwadon's text-hatena - Class: HTMLSplit - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/iwadon/commits/text-hatena/master" rel="alternate" title="Recent Commits to text-hatena:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("iwadon", "text-hatena", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("iwadon", "text-hatena", "5522916b5c19d53e1733fecab94abf65c108de4e", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/iwadon/text-hatena/tree/">Source</a></li>
            <li class=""><a href="http://github.com/iwadon/text-hatena/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/iwadon/text-hatena/network">Network</a></li>            
            <li class=""><a href="http://github.com/iwadon/text-hatena/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/iwadon/text-hatena">Wiki</a></li>
            <li class=""><a href="http://github.com/iwadon/text-hatena/graphs">Graphs</a></li>                    
            <li class="active"><a href="/iwadon/text-hatena">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/iwadon">iwadon</a> / <b><a href="http://github.com/iwadon/text-hatena/tree">text-hatena</a></b>        
                <a id="namespaces_button" rel="iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class HTMLSplit">
  <h1>Class: HTMLSplit</h1>
  <div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">document</td>
          <td class="readwrite">
            [<span id='document-instance_method'>R</span><span id='document=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            
            
          </td>
        </tr>
      
        <tr>
          <th class="name">empty_tags</td>
          <td class="readwrite">
            [<span id='empty_tags-instance_method'>R</span><span id='empty_tags=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>empty_tags</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="EMPTY-constant">EMPTY</dt>
      <dd>%w(area base basefont bgsound br col frame hr img input isindex 
keygen link meta nextid param spacer wbr)</dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(html = nil, encoding = $KCODE)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/text/hatena/utils/htmlsplit.rb', line 487</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e/lib/text/hatena/utils/htmlsplit.rb#L487">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">487
488
489
490</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='html identifier id'>html</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span> <span class='assign token'>=</span> <span class='$KCODE gvar id'>$KCODE</span><span class='rparen token'>)</span>
  <span class='@empty_tags ivar id'>@empty_tags</span> <span class='assign token'>=</span> <span class='EMPTY constant id'>EMPTY</span>
  <span class='set_html identifier id'>set_html</span><span class='lparen token'>(</span><span class='html identifier id'>html</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='html identifier id'>html</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#make_char-class_method">make_char</span><span class='args'>(encoding, code, unmatch)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#unescapeHTML-class_method">unescapeHTML</span><span class='args'>(string, encoding)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#each-instance_method">#each</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#end_index-instance_method">#end_index</span><span class='args'>(start_index)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#index-instance_method">#index</span><span class='args'>(_class, _start = 0, _end = -1, value = nil, count = 1)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_html-instance_method">#set_html</span><span class='args'>(html, encoding = $KCODE)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_s-instance_method">#to_s</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>make_char</h3>
</div><div id="make_char-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>make_char</span><span class='args'>(encoding, code, unmatch)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/text/hatena/utils/htmlsplit.rb', line 440</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e/lib/text/hatena/utils/htmlsplit.rb#L440">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">440
441
442
443
444
445
446
447
448
449
450
451
452</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='make_char identifier id'>make_char</span><span class='lparen token'>(</span><span class='encoding identifier id'>encoding</span><span class='comma token'>,</span> <span class='code identifier id'>code</span><span class='comma token'>,</span> <span class='unmatch identifier id'>unmatch</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='code identifier id'>code</span> <span class='eq op'>==</span> <span class='integer val'>0x9</span> <span class='orop op'>||</span> <span class='code identifier id'>code</span> <span class='eq op'>==</span> <span class='integer val'>0xa</span> <span class='orop op'>||</span> <span class='code identifier id'>code</span> <span class='eq op'>==</span> <span class='integer val'>0xd</span> <span class='orop op'>||</span> <span class='code identifier id'>code</span> <span class='geq op'>&gt;=</span> <span class='integer val'>0x20</span> <span class='andop op'>&amp;&amp;</span> <span class='code identifier id'>code</span> <span class='leq op'>&lt;=</span> <span class='integer val'>0xff</span>
    <span class='code identifier id'>code</span><span class='dot token'>.</span><span class='chr identifier id'>chr</span>
  <span class='else else kw'>else</span>
    <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='code identifier id'>code</span> <span class='leq op'>&lt;=</span> <span class='integer val'>0xd7ff</span> <span class='orop op'>||</span>
        <span class='code identifier id'>code</span> <span class='geq op'>&gt;=</span> <span class='integer val'>0xe000</span> <span class='andop op'>&amp;&amp;</span> <span class='code identifier id'>code</span> <span class='leq op'>&lt;=</span> <span class='integer val'>0x10ffff</span> <span class='andop op'>&amp;&amp;</span> <span class='code identifier id'>code</span> <span class='neq op'>!=</span> <span class='integer val'>0xfffe</span> <span class='andop op'>&amp;&amp;</span> <span class='code identifier id'>code</span> <span class='neq op'>!=</span> <span class='integer val'>0xffff</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> 
       <span class='encoding identifier id'>encoding</span> <span class='eq op'>==</span> <span class='string val'>&quot;UTF8&quot;</span>
      <span class='lbrack token'>[</span><span class='code identifier id'>code</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='pack identifier id'>pack</span><span class='lparen token'>(</span><span class='string val'>&quot;U&quot;</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='unmatch identifier id'>unmatch</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>unescapeHTML</h3>
</div><div id="unescapeHTML-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>unescapeHTML</span><span class='args'>(string, encoding)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/text/hatena/utils/htmlsplit.rb', line 454</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e/lib/text/hatena/utils/htmlsplit.rb#L454">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='unescapeHTML identifier id'>unescapeHTML</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span><span class='rparen token'>)</span>
  <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/&amp;(.*?);/n</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='match identifier id'>match</span> <span class='assign token'>=</span> <span class='$1 nth_ref id'>$1</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
    <span class='case case kw'>case</span> <span class='match identifier id'>match</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/\Aamp\z/n</span><span class='i identifier id'>i</span>           <span class='then then kw'>then</span> <span class='string val'>'&amp;'</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/\Aquot\z/n</span><span class='i identifier id'>i</span>          <span class='then then kw'>then</span> <span class='string val'>'&quot;'</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/\Aapos\z/n</span><span class='i identifier id'>i</span>          <span class='then then kw'>then</span> <span class='string val'>&quot;'&quot;</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/\Agt\z/n</span><span class='i identifier id'>i</span>            <span class='then then kw'>then</span> <span class='string val'>'&gt;'</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/\Alt\z/n</span><span class='i identifier id'>i</span>            <span class='then then kw'>then</span> <span class='string val'>'&lt;'</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/\A#0*(\d+)\z/n</span>
      <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='make_char identifier id'>make_char</span><span class='lparen token'>(</span><span class='encoding identifier id'>encoding</span><span class='comma token'>,</span> <span class='Integer constant id'>Integer</span><span class='lparen token'>(</span><span class='$1 nth_ref id'>$1</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='dstring node'>&quot;&amp;##{$1};&quot;</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='regexp val'>/\A#x([0-9a-f]+)\z/n</span><span class='i identifier id'>i</span>
      <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='make_char identifier id'>make_char</span><span class='lparen token'>(</span><span class='encoding identifier id'>encoding</span><span class='comma token'>,</span> <span class='$1 nth_ref id'>$1</span><span class='dot token'>.</span><span class='hex identifier id'>hex</span><span class='comma token'>,</span> <span class='dstring node'>&quot;&amp;#x#{$1};&quot;</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='dstring node'>&quot;&amp;#{match};&quot;</span>
    <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>each</h3>
</div><div id="each-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>each</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/text/hatena/utils/htmlsplit.rb', line 750</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e/lib/text/hatena/utils/htmlsplit.rb#L750">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='each identifier id'>each</span>
  <span class='tag identifier id'>tag</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='i identifier id'>i</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='@document ivar id'>@document</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='e identifier id'>e</span><span class='bitor op'>|</span>
    <span class='case case kw'>case</span> <span class='e identifier id'>e</span>
    <span class='when when kw'>when</span> <span class='StartTag constant id'>StartTag</span>
      <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='push identifier id'>push</span> <span class='lbrack token'>[</span><span class='e identifier id'>e</span><span class='comma token'>,</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span>
    <span class='when when kw'>when</span> <span class='EndTag constant id'>EndTag</span>
      <span class='idx identifier id'>idx</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
      <span class='lparen token'>(</span><span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='minus op'>-</span><span class='integer val'>1</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='downto identifier id'>downto</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='j identifier id'>j</span><span class='bitor op'>|</span>
        <span class='if if kw'>if</span> <span class='tag identifier id'>tag</span><span class='lbrack token'>[</span><span class='j identifier id'>j</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='eq op'>==</span><span class='e identifier id'>e</span><span class='dot token'>.</span><span class='name identifier id'>name</span>
          <span class='idx identifier id'>idx</span> <span class='assign token'>=</span> <span class='j identifier id'>j</span>
          <span class='break break kw'>break</span>
        <span class='end end kw'>end</span>
      <span class='rbrace token'>}</span>
      <span class='comment val'>#</span>
      <span class='if if kw'>if</span> <span class='idx identifier id'>idx</span>
        <span class='if if kw'>if</span> <span class='idx identifier id'>idx</span><span class='eq op'>==</span><span class='integer val'>0</span>
          <span class='tag identifier id'>tag</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
        <span class='else else kw'>else</span>
          <span class='tag identifier id'>tag</span> <span class='assign token'>=</span> <span class='tag identifier id'>tag</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='idx identifier id'>idx</span><span class='minus op'>-</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
    <span class='end end kw'>end</span>
    <span class='yield yield kw'>yield</span> <span class='e identifier id'>e</span><span class='comma token'>,</span><span class='tag identifier id'>tag</span>
    <span class='i identifier id'>i</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>end_index</h3>
</div><div id="end_index-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>end_index</span><span class='args'>(start_index)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/text/hatena/utils/htmlsplit.rb', line 824</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e/lib/text/hatena/utils/htmlsplit.rb#L824">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='end_index identifier id'>end_index</span><span class='lparen token'>(</span><span class='start_index identifier id'>start_index</span><span class='rparen token'>)</span>
  <span class='tag identifier id'>tag</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='end_index identifier id'>end_index</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='lparen token'>(</span><span class='start_index identifier id'>start_index</span><span class='dot3 op'>...</span><span class='@document ivar id'>@document</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='idx identifier id'>idx</span><span class='bitor op'>|</span>
    <span class='e identifier id'>e</span><span class='assign token'>=</span> <span class='@document ivar id'>@document</span><span class='lbrack token'>[</span><span class='idx identifier id'>idx</span><span class='rbrack token'>]</span>
    <span class='case case kw'>case</span> <span class='e identifier id'>e</span>
    <span class='when when kw'>when</span> <span class='StartTag constant id'>StartTag</span>
      <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='push identifier id'>push</span> <span class='lbrack token'>[</span><span class='e identifier id'>e</span><span class='comma token'>,</span><span class='idx identifier id'>idx</span><span class='rbrack token'>]</span>
    <span class='when when kw'>when</span> <span class='EndTag constant id'>EndTag</span>
      <span class='i identifier id'>i</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
      <span class='lparen token'>(</span><span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='minus op'>-</span><span class='integer val'>1</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='downto identifier id'>downto</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='j identifier id'>j</span><span class='bitor op'>|</span>
        <span class='if if kw'>if</span> <span class='tag identifier id'>tag</span><span class='lbrack token'>[</span><span class='j identifier id'>j</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='eq op'>==</span><span class='e identifier id'>e</span><span class='dot token'>.</span><span class='name identifier id'>name</span>
          <span class='i identifier id'>i</span> <span class='assign token'>=</span> <span class='j identifier id'>j</span>
          <span class='break break kw'>break</span>
        <span class='end end kw'>end</span>
      <span class='rbrace token'>}</span>
      <span class='comment val'>#</span>
      <span class='if if kw'>if</span> <span class='i identifier id'>i</span>
        <span class='if if kw'>if</span> <span class='i identifier id'>i</span><span class='eq op'>==</span><span class='integer val'>0</span>
          <span class='tag identifier id'>tag</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
        <span class='else else kw'>else</span>
          <span class='tag identifier id'>tag</span> <span class='assign token'>=</span> <span class='tag identifier id'>tag</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='i identifier id'>i</span><span class='minus op'>-</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
      <span class='if if kw'>if</span> <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='eq op'>==</span><span class='integer val'>0</span>
        <span class='end_index identifier id'>end_index</span> <span class='assign token'>=</span> <span class='idx identifier id'>idx</span>
        <span class='break break kw'>break</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
    <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>
  <span class='end_index identifier id'>end_index</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>index</h3>
</div><div id="index-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>index</span><span class='args'>(_class, _start = 0, _end = -1, value = nil, count = 1)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/text/hatena/utils/htmlsplit.rb', line 780</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e/lib/text/hatena/utils/htmlsplit.rb#L780">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='_class identifier id'>_class</span><span class='comma token'>,</span><span class='_start identifier id'>_start</span><span class='assign token'>=</span><span class='integer val'>0</span><span class='comma token'>,</span><span class='_end identifier id'>_end</span><span class='assign token'>=</span><span class='integer val'>-1</span><span class='comma token'>,</span><span class='value identifier id'>value</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span><span class='count identifier id'>count</span><span class='assign token'>=</span><span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='idx identifier id'>idx</span><span class='assign token'>=</span><span class='_start identifier id'>_start</span>
  <span class='found identifier id'>found</span><span class='assign token'>=</span><span class='false false kw'>false</span>
  <span class='@document ivar id'>@document</span><span class='lbrack token'>[</span><span class='_start identifier id'>_start</span><span class='dot2 op'>..</span><span class='_end identifier id'>_end</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='eq op'>==</span><span class='_class identifier id'>_class</span>
      <span class='if if kw'>if</span> <span class='value identifier id'>value</span>
        <span class='case case kw'>case</span> <span class='obj identifier id'>obj</span>
        <span class='when when kw'>when</span> <span class='StartTag constant id'>StartTag</span><span class='comma token'>,</span><span class='EmptyElementTag constant id'>EmptyElementTag</span><span class='comma token'>,</span><span class='EndTag constant id'>EndTag</span>
          <span class='if if kw'>if</span> <span class='value identifier id'>value</span><span class='eqq op'>===</span><span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='name identifier id'>name</span>
            <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='not not kw'>not</span> <span class='iterator? fid id'>iterator?</span><span class='rparen token'>)</span> <span class='or or kw'>or</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='rparen token'>)</span>
              <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='count identifier id'>count</span><span class='opasgn op'>-=</span><span class='integer val'>1</span><span class='rparen token'>)</span><span class='leq op'>&lt;=</span><span class='integer val'>0</span>
                <span class='found identifier id'>found</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
                <span class='break break kw'>break</span>
              <span class='end end kw'>end</span>
            <span class='end end kw'>end</span>
          <span class='end end kw'>end</span>
        <span class='else else kw'>else</span>
          <span class='if if kw'>if</span> <span class='value identifier id'>value</span><span class='eqq op'>===</span><span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='text identifier id'>text</span>
            <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='not not kw'>not</span> <span class='iterator? fid id'>iterator?</span><span class='rparen token'>)</span> <span class='or or kw'>or</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='rparen token'>)</span>
              <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='count identifier id'>count</span><span class='opasgn op'>-=</span><span class='integer val'>1</span><span class='rparen token'>)</span><span class='leq op'>&lt;=</span><span class='integer val'>0</span>
                <span class='found identifier id'>found</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
                <span class='break break kw'>break</span>
              <span class='end end kw'>end</span>
            <span class='end end kw'>end</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>
      <span class='else else kw'>else</span>
        <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='not not kw'>not</span> <span class='iterator? fid id'>iterator?</span><span class='rparen token'>)</span> <span class='or or kw'>or</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='rparen token'>)</span>
          <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='count identifier id'>count</span><span class='opasgn op'>-=</span><span class='integer val'>1</span><span class='rparen token'>)</span><span class='leq op'>&lt;=</span><span class='integer val'>0</span>
            <span class='found identifier id'>found</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
            <span class='break break kw'>break</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='idx identifier id'>idx</span><span class='opasgn op'>+=</span><span class='integer val'>1</span>
  <span class='rbrace token'>}</span>
  <span class='if if kw'>if</span> <span class='found identifier id'>found</span>
    <span class='idx identifier id'>idx</span>
  <span class='else else kw'>else</span>
    <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_html</h3>
</div><div id="set_html-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_html</span><span class='args'>(html, encoding = $KCODE)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/text/hatena/utils/htmlsplit.rb', line 493</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e/lib/text/hatena/utils/htmlsplit.rb#L493">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_html identifier id'>set_html</span><span class='lparen token'>(</span><span class='html identifier id'>html</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span> <span class='assign token'>=</span> <span class='$KCODE gvar id'>$KCODE</span><span class='rparen token'>)</span>
  <span class='@document ivar id'>@document</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>  <span class='comment val'>#パースしたHTMLのリスト</span>
  <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='attr identifier id'>attr</span> <span class='assign token'>=</span> <span class='OrderedHash constant id'>OrderedHash</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='attrname identifier id'>attrname</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
  <span class='comment val'>#</span>
  <span class='html identifier id'>html</span><span class='dot token'>.</span><span class='each_byte identifier id'>each_byte</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span>
    <span class='char identifier id'>char</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='chr identifier id'>chr</span>
    <span class='case case kw'>case</span> <span class='state identifier id'>state</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:TEXT</span>
      <span class='if if kw'>if</span> <span class='c identifier id'>c</span><span class='eq op'>==</span><span class='integer val'>60</span>
        <span class='if if kw'>if</span> <span class='text identifier id'>text</span><span class='dot token'>.</span><span class='length identifier id'>length</span><span class='gt op'>&gt;</span><span class='integer val'>0</span>
          <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='CharacterData constant id'>CharacterData</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
        <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='attr identifier id'>attr</span> <span class='assign token'>=</span> <span class='OrderedHash constant id'>OrderedHash</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TAGNAME</span>
      <span class='else else kw'>else</span>
        <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:TAGNAME</span>
      <span class='if if kw'>if</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
      <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
      <span class='when when kw'>when</span> <span class='string val'>'!'</span>
        <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:DECLARE</span>
      <span class='when when kw'>when</span> <span class='string val'>'%'</span>
        <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:ERUBY</span>
      <span class='when when kw'>when</span> <span class='string val'>'?'</span>
        <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:PHP</span>
        <span class='when when kw'>when</span> <span class='regexp val'>/[a-zA-Z_:\/]/</span>
          <span class='name identifier id'>name</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
        <span class='else else kw'>else</span>
          <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>'&lt;'</span> <span class='plus op'>+</span> <span class='char identifier id'>char</span>
          <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
        <span class='end end kw'>end</span>
      <span class='else else kw'>else</span>
        <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
        <span class='when when kw'>when</span> <span class='string val'>'&gt;'</span>
          <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
          <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
          <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
      <span class='when when kw'>when</span> <span class='regexp val'>/\s/</span>
        <span class='text identifier id'>text</span><span class='assign token'>=</span><span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:SPACE</span>
        <span class='when when kw'>when</span> <span class='regexp val'>/[a-zA-Z0-9\._:-]/</span>
        <span class='name identifier id'>name</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
        <span class='else else kw'>else</span>
          <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
          <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:SPACE</span>
          <span class='redo redo kw'>redo</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:SPACE</span>  <span class='comment val'>#属性間の空白</span>
      <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
      <span class='when when kw'>when</span> <span class='string val'>'&gt;'</span>
        <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
        <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
      <span class='when when kw'>when</span> <span class='string val'>'&lt;'</span>  <span class='comment val'># 閉じない開始タグ</span>
        <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
        <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='attr identifier id'>attr</span> <span class='assign token'>=</span> <span class='OrderedHash constant id'>OrderedHash</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TAGNAME</span>
      <span class='when when kw'>when</span> <span class='regexp val'>/\s/</span>
      <span class='else else kw'>else</span>
        <span class='attrname identifier id'>attrname</span><span class='assign token'>=</span><span class='char identifier id'>char</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:ATTRNAME</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:ATTRNAME</span> <span class='comment val'>#属性名</span>
      <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
      <span class='when when kw'>when</span> <span class='regexp val'>/\s/</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:BEFOREEQUAL</span>
      <span class='when when kw'>when</span> <span class='string val'>'='</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:AFTEREQUAL</span>
      <span class='when when kw'>when</span> <span class='string val'>'&gt;'</span>
        <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='true true kw'>true</span>
        <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
        <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
      <span class='else else kw'>else</span>
        <span class='attrname identifier id'>attrname</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:BEFOREEQUAL</span>  <span class='comment val'>#=</span>
      <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
      <span class='when when kw'>when</span> <span class='string val'>'='</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:AFTEREQUAL</span>
      <span class='when when kw'>when</span> <span class='string val'>'&gt;'</span>
        <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='true true kw'>true</span>
        <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
        <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
      <span class='when when kw'>when</span> <span class='regexp val'>/\s/</span>
      <span class='else else kw'>else</span>
        <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='true true kw'>true</span>
        <span class='attrname identifier id'>attrname</span> <span class='assign token'>=</span> <span class='char identifier id'>char</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:ATTRNAME</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:AFTEREQUAL</span> <span class='comment val'>#=</span>
      <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
      <span class='when when kw'>when</span> <span class='string val'>&quot;'&quot;</span>
        <span class='text identifier id'>text</span><span class='assign token'>=</span><span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:SQVALUE</span>
      <span class='when when kw'>when</span> <span class='string val'>'&quot;'</span>
        <span class='text identifier id'>text</span><span class='assign token'>=</span><span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:DQVALUE</span>
      <span class='when when kw'>when</span> <span class='string val'>'&gt;'</span>
        <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='true true kw'>true</span>
        <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
        <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
      <span class='when when kw'>when</span> <span class='regexp val'>/\s/</span>
      <span class='else else kw'>else</span>
        <span class='text identifier id'>text</span><span class='assign token'>=</span><span class='char identifier id'>char</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:VALUE</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:VALUE</span>    <span class='comment val'>#値</span>
      <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
      <span class='when when kw'>when</span> <span class='regexp val'>/\s/</span>
        <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='unescapeHTML identifier id'>unescapeHTML</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span><span class='rparen token'>)</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:SPACE</span>
      <span class='when when kw'>when</span> <span class='string val'>'&gt;'</span>
        <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='unescapeHTML identifier id'>unescapeHTML</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span><span class='rparen token'>)</span>
        <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
        <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
      <span class='else else kw'>else</span>
        <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:SQVALUE</span>  <span class='comment val'>#'値'</span>
      <span class='if if kw'>if</span> <span class='c identifier id'>c</span><span class='eq op'>==</span><span class='integer val'>39</span>
        <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='unescapeHTML identifier id'>unescapeHTML</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span><span class='rparen token'>)</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:SPACE</span>
      <span class='else else kw'>else</span>
        <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:DQVALUE</span>  <span class='comment val'>#&quot;値&quot;</span>
      <span class='if if kw'>if</span> <span class='c identifier id'>c</span><span class='eq op'>==</span><span class='integer val'>34</span>
        <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='unescapeHTML identifier id'>unescapeHTML</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span><span class='rparen token'>)</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:SPACE</span>
      <span class='else else kw'>else</span>
        <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:COMMENT</span>
      <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
      <span class='when when kw'>when</span> <span class='string val'>'&gt;'</span>
        <span class='if if kw'>if</span> <span class='text identifier id'>text</span><span class='lbrack token'>[</span><span class='integer val'>-2</span><span class='comma token'>,</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='eq op'>==</span><span class='string val'>'--'</span>  <span class='comment val'>#コメント終了  </span>
          <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='text identifier id'>text</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-3</span><span class='rbrack token'>]</span>
          <span class='if if kw'>if</span> <span class='text identifier id'>text</span><span class='match op'>=~</span><span class='regexp val'>/^#[a-z]+/</span> <span class='comment val'>#SSI</span>
            <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='SSI constant id'>SSI</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
          <span class='else else kw'>else</span>
            <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='Comment constant id'>Comment</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
          <span class='end end kw'>end</span>
          <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
          <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
        <span class='else else kw'>else</span>
          <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
        <span class='end end kw'>end</span>
      <span class='else else kw'>else</span>
        <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:ERUBY</span>
      <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
      <span class='when when kw'>when</span> <span class='string val'>'&gt;'</span>
        <span class='if if kw'>if</span> <span class='text identifier id'>text</span><span class='lbrack token'>[</span><span class='integer val'>-1</span><span class='comma token'>,</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='eq op'>==</span><span class='string val'>'%'</span> <span class='comment val'>#eRuby終了  </span>
          <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='text identifier id'>text</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span>
          <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='ERuby constant id'>ERuby</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
          <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
          <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
        <span class='else else kw'>else</span>
          <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
        <span class='end end kw'>end</span>
      <span class='else else kw'>else</span>
        <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:PHP</span>
      <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
      <span class='when when kw'>when</span> <span class='string val'>'&gt;'</span>
        <span class='if if kw'>if</span> <span class='text identifier id'>text</span><span class='lbrack token'>[</span><span class='integer val'>-1</span><span class='comma token'>,</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='eq op'>==</span><span class='string val'>'?'</span> <span class='comment val'>#eRuby終了  </span>
          <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='text identifier id'>text</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span>
          <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='PHP constant id'>PHP</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
          <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
          <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
        <span class='else else kw'>else</span>
          <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
        <span class='end end kw'>end</span>
      <span class='else else kw'>else</span>
        <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:DECLARE</span>
      <span class='case case kw'>case</span> <span class='char identifier id'>char</span>
      <span class='when when kw'>when</span> <span class='string val'>'&gt;'</span>
        <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='Declaration constant id'>Declaration</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
        <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:TEXT</span>
      <span class='else else kw'>else</span>
        <span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='char identifier id'>char</span>
        <span class='if if kw'>if</span> <span class='text identifier id'>text</span><span class='eq op'>==</span><span class='string val'>'--'</span>
          <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>''</span>
          <span class='state identifier id'>state</span> <span class='assign token'>=</span> <span class='symbol val'>:COMMENT</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>
  <span class='comment val'>#EOFの処理</span>
  <span class='case case kw'>case</span> <span class='state identifier id'>state</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:TEXT</span>
    <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='CharacterData constant id'>CharacterData</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='text identifier id'>text</span><span class='dot token'>.</span><span class='length identifier id'>length</span><span class='gt op'>&gt;</span><span class='integer val'>0</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:TAGNAME</span>
    <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='CharacterData constant id'>CharacterData</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'&lt;'</span><span class='plus op'>+</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:SPACE</span> <span class='comment val'>#属性間の空白</span>
    <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:ATTRNAME</span>  <span class='comment val'>#属性名</span>
    <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='true true kw'>true</span>
    <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:BEFOREEQUAL</span> <span class='comment val'>#=</span>
    <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='true true kw'>true</span>
    <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:AFTEREQUAL</span>  <span class='comment val'>#=</span>
    <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='true true kw'>true</span>
    <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:VALUE</span>   <span class='comment val'>#値</span>
    <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='unescapeHTML identifier id'>unescapeHTML</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span><span class='rparen token'>)</span>
    <span class='make_tag identifier id'>make_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:SQVALUE</span> <span class='comment val'>#'値'</span>
    <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='unescapeHTML identifier id'>unescapeHTML</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:DQVALUE</span> <span class='comment val'>#&quot;値&quot;</span>
    <span class='attr identifier id'>attr</span><span class='lbrack token'>[</span><span class='attrname identifier id'>attrname</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='HTMLSplit constant id'>HTMLSplit</span><span class='dot token'>.</span><span class='unescapeHTML identifier id'>unescapeHTML</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='encoding identifier id'>encoding</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:COMMENT</span>
    <span class='if if kw'>if</span> <span class='text identifier id'>text</span><span class='match op'>=~</span><span class='regexp val'>/^#[a-zA-Z]+/</span> <span class='comment val'>#SSI</span>
      <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='SSI constant id'>SSI</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='Comment constant id'>Comment</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:ERUBY</span>
    <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='ERuby constant id'>ERuby</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:PHP</span>
    <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='PHP constant id'>PHP</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:DECLARE</span>
    <span class='@document ivar id'>@document</span> <span class='lshft op'>&lt;&lt;</span> <span class='Declaration constant id'>Declaration</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_s</h3>
</div><div id="to_s-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_s</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/text/hatena/utils/htmlsplit.rb', line 742</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/iwadon/text-hatena/blob/5522916b5c19d53e1733fecab94abf65c108de4e/lib/text/hatena/utils/htmlsplit.rb#L742">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">742
743
744
745
746
747
748</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_s identifier id'>to_s</span>
  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='@document ivar id'>@document</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='e identifier id'>e</span><span class='bitor op'>|</span>
    <span class='s identifier id'>s</span><span class='lshft op'>&lt;&lt;</span><span class='lparen token'>(</span><span class='e identifier id'>e</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span>
  <span class='s identifier id'>s</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 息2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>