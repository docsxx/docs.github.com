<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>oldmoe's reactor - Class: Reactor::Base - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/oldmoe/commits/reactor/master" rel="alternate" title="Recent Commits to reactor:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("oldmoe", "reactor", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("oldmoe", "reactor", "17b32708f5238df337b5f2b70a34a4f0454fee03", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/oldmoe/reactor/tree/">Source</a></li>
            <li class=""><a href="http://github.com/oldmoe/reactor/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/oldmoe/reactor/network">Network</a></li>            
            <li class=""><a href="http://github.com/oldmoe/reactor/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/oldmoe/reactor">Wiki</a></li>
            <li class=""><a href="http://github.com/oldmoe/reactor/graphs">Graphs</a></li>                    
            <li class="active"><a href="/oldmoe/reactor">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/oldmoe">oldmoe</a> / <b><a href="http://github.com/oldmoe/reactor/tree">reactor</a></b>        
                <a id="namespaces_button" rel="oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Reactor_Base">
  <h1>Class: Reactor::Base</h1>
  <div class="section docstring">
  <p>
A small, fast, pure Ruby reactor library
</p>
<p>
Has the following features:
</p>
<pre class="code">
 <span class='minus op'>-</span> <span class='Pure constant id'>Pure</span> <span class='Ruby constant id'>Ruby</span><span class='comma token'>,</span> <span class='no identifier id'>no</span> <span class='compilation identifier id'>compilation</span> <span class='involved identifier id'>involved</span>
 <span class='minus op'>-</span> <span class='Attach constant id'>Attach</span><span class='div op'>/</span><span class='detach identifier id'>detach</span> <span class='IO constant id'>IO</span> <span class='objects identifier id'>objects</span> <span class='for for kw'>for</span> <span class='readability identifier id'>readability</span> <span class='and and kw'>and</span> <span class='writability identifier id'>writability</span> <span class='notifications identifier id'>notifications</span>
 <span class='minus op'>-</span> <span class='Add constant id'>Add</span> <span class='blocks identifier id'>blocks</span> <span class='of identifier id'>of</span> <span class='code identifier id'>code</span> <span class='that identifier id'>that</span> <span class='get identifier id'>get</span> <span class='executed identifier id'>executed</span> <span class='after identifier id'>after</span> <span class='some identifier id'>some</span> <span class='time identifier id'>time</span>
 <span class='minus op'>-</span> <span class='Multiple constant id'>Multiple</span> <span class='reactors identifier id'>reactors</span> <span class='can identifier id'>can</span> <span class='co identifier id'>co</span><span class='minus op'>-</span><span class='exist identifier id'>exist</span> <span class='lparen token'>(</span><span class='each identifier id'>each</span> <span class='in in kw'>in</span> <span class='a identifier id'>a</span> <span class='separate identifier id'>separate</span> <span class='thread identifier id'>thread</span> <span class='of identifier id'>of</span> <span class='course identifier id'>course</span><span class='rparen token'>)</span>
</pre>
<p>
Lacks the following features:
</p>
<pre class="code">
 <span class='minus op'>-</span> <span class='No constant id'>No</span> <span class='Epoll constant id'>Epoll</span> <span class='or or kw'>or</span> <span class='Kqueue constant id'>Kqueue</span> <span class='support identifier id'>support</span> <span class='since identifier id'>since</span> <span class='it identifier id'>it</span> <span class='relies identifier id'>relies</span> <span class='on identifier id'>on</span> <span class='Ruby constant id'>Ruby</span><span class='string val'>'s IO.select
     (Yaki Schloba'</span><span class='s identifier id'>s</span> <span class='Ktools constant id'>Ktools</span> <span class='can identifier id'>can</span> <span class='help identifier id'>help</span> <span class='here identifier id'>here</span><span class='rparen token'>)</span>
 <span class='minus op'>-</span> <span class='While constant id'>While</span> <span class='you identifier id'>you</span> <span class='can identifier id'>can</span> <span class='have identifier id'>have</span> <span class='several identifier id'>several</span> <span class='reactors identifier id'>reactors</span> <span class='in in kw'>in</span> <span class='several identifier id'>several</span> <span class='threads identifier id'>threads</span> <span class='you identifier id'>you</span> <span class='cannot identifier id'>cannot</span> <span class='manipulate identifier id'>manipulate</span>
   <span class='a identifier id'>a</span> <span class='single identifier id'>single</span> <span class='reactor identifier id'>reactor</span> <span class='from identifier id'>from</span> <span class='multiple identifier id'>multiple</span> <span class='threads identifier id'>threads</span><span class='dot token'>.</span>
</pre>
<p>
Rationale
</p>
<pre class="code">
 <span class='minus op'>-</span> <span class='Reactor constant id'>Reactor</span> <span class='libraries identifier id'>libraries</span> <span class='are identifier id'>are</span> <span class='re identifier id'>re</span><span class='minus op'>-</span><span class='implementing identifier id'>implementing</span> <span class='every identifier id'>every</span> <span class='bit identifier id'>bit</span> <span class='of identifier id'>of</span> <span class='Ruby constant id'>Ruby</span><span class='comma token'>,</span>
   <span class='I constant id'>I</span> <span class='would identifier id'>would</span> <span class='like identifier id'>like</span> <span class='to identifier id'>to</span> <span class='see identifier id'>see</span> <span class='that identifier id'>that</span> <span class='effort identifier id'>effort</span> <span class='go identifier id'>go</span> <span class='to identifier id'>to</span> <span class='Ruby constant id'>Ruby</span> <span class='and and kw'>and</span> <span class='its identifier id'>its</span> <span class='standard identifier id'>standard</span> <span class='library identifier id'>library</span>
 <span class='minus op'>-</span> <span class='I constant id'>I</span> <span class='needed identifier id'>needed</span> <span class='better identifier id'>better</span> <span class='integration identifier id'>integration</span> <span class='with identifier id'>with</span> <span class='some identifier id'>some</span> <span class='Ruby constant id'>Ruby</span> <span class='built identifier id'>built</span> <span class='in in kw'>in</span> <span class='classes identifier id'>classes</span><span class='dot token'>.</span>
 <span class='minus op'>-</span> <span class='Some constant id'>Some</span> <span class='people identifier id'>people</span> <span class='consider identifier id'>consider</span> <span class='using identifier id'>using</span> <span class='EventMachine constant id'>EventMachine</span> <span class='with identifier id'>with</span> <span class='Ruby constant id'>Ruby</span> <span class='as identifier id'>as</span> <span class='cheating! fid id'>cheating!</span>
</pre>
<p>
Example TCP server (an echo server)
</p>
<p>
require &#8216;reactor&#8217; require &#8216;socket&#8217;
</p>
<p>
reactor = Reactor::Base.new server =
TCPServer.new(&quot;0.0.0.0&quot;,8080)
</p>
<p>
reactor.attach(:read, server) do |server|
</p>
<pre class="code">
  <span class='connection identifier id'>connection</span> <span class='assign token'>=</span> <span class='server identifier id'>server</span><span class='dot token'>.</span><span class='accept identifier id'>accept</span>
  <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='rparen token'>)</span>
  <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
</pre>
<p>
end
</p>
<p>
reactor.run # blocking call, will run for ever (no signal handling
currently)
</p>
<p>
You can see a working example by running &quot;ruby reactor.rb&quot;
</p>

</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Initializes a new reactor object
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 50</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L50">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">50
51
52
53
54</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span>
  <span class='@selectables ivar id'>@selectables</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:read</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:dirty=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='symbol val'>:ios</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='symbol val'>:callbacks</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='symbol val'>:io_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span><span class='comma token'>,</span> 
                   <span class='symbol val'>:write=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:dirty=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='symbol val'>:ios</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='symbol val'>:callbacks</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='symbol val'>:io_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span><span class='rbrace token'>}</span>
  <span class='@next_procs ivar id'>@next_procs</span><span class='comma token'>,</span> <span class='@timers ivar id'>@timers</span><span class='comma token'>,</span> <span class='@running ivar id'>@running</span> <span class='assign token'>=</span> <span class='Queue constant id'>Queue</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_periodical_timer-instance_method">#add_periodical_timer</span><span class='args'>(time, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Add a block of code that will fire periodically after some time passes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_timer-instance_method">#add_timer</span><span class='args'>(time, periodical = false, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Add a block of code that will fire after some time.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#attach-instance_method">#attach</span><span class='args'>(mode, io, wait_if_attached = true, &amp;callback)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Attach an IO object to the reactor.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#attached-3F-instance_method">#attached?</span><span class='args'>(mode, io)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Ask the reactor if an IO object is attached in some mode.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#detach-instance_method">#detach</span><span class='args'>(mode, io, force = false)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Detach an IO object from the reactor.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#detach_all-instance_method">#detach_all</span><span class='args'>(mode)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Detach all IO objects of a certain mode from the reactor.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#next_tick-instance_method">#next_tick</span><span class='args'>(&amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Register a block to be called at the next reactor tick this particular
method is thread safe.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#on_add_timer-instance_method">#on_add_timer</span><span class='args'>(&amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Supply a callback to on_add_timer that will be called after each add_timer
operation and supplied with the timer object.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#on_attach-instance_method">#on_attach</span><span class='args'>(&amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Supply a callback to on_attach that will be called after each attach
operation and supplied with the mode and io object of the attach method.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#on_detach-instance_method">#on_detach</span><span class='args'>(&amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Supply a callback to on_detach that will be called after each detach
operation and supplied with the mode and io object of the detach method.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#run-instance_method">#run</span><span class='args'></span>
        <span class='block'>{|_self| ... }</span>
        
      </th>
      <td class="docstring">
        <p>
Starts the reactor loop.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#run_once-instance_method">#run_once</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
A single select run, it will fire all expired timers and the callbacks on
IO objects but it will return immediately after that.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#running-3F-instance_method">#running?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is the reactor running?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#stop-instance_method">#stop</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Stops the reactor loop It does not detach any of the attached IO objects,
the reactor can be started again and it will keep notifying on the same set
of attached IO objects.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>add_periodical_timer</h3>
</div><div id="add_periodical_timer-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_periodical_timer</span><span class='args'>(time, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Add a block of code that will fire periodically after some time passes
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 184</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L184">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">184
185
186</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_periodical_timer identifier id'>add_periodical_timer</span><span class='lparen token'>(</span><span class='time identifier id'>time</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='add_timer identifier id'>add_timer</span><span class='lparen token'>(</span><span class='time identifier id'>time</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>add_timer</h3>
</div><div id="add_timer-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_timer</span><span class='args'>(time, periodical = false, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Add a block of code that will fire after some time
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 170</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L170">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">170
171
172
173
174</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_timer identifier id'>add_timer</span><span class='lparen token'>(</span><span class='time identifier id'>time</span><span class='comma token'>,</span> <span class='periodical identifier id'>periodical</span><span class='assign token'>=</span><span class='false false kw'>false</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='timer identifier id'>timer</span> <span class='assign token'>=</span> <span class='Timer constant id'>Timer</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='@timers ivar id'>@timers</span><span class='comma token'>,</span> <span class='time identifier id'>time</span><span class='comma token'>,</span> <span class='periodical identifier id'>periodical</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@on_add_timer ivar id'>@on_add_timer</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='timer identifier id'>timer</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@on_add_timer ivar id'>@on_add_timer</span>
  <span class='timer identifier id'>timer</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>attach</h3>
</div><div id="attach-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>attach</span><span class='args'>(mode, io, wait_if_attached = true, &amp;callback)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Attach an IO object to the reactor.
</p>
<p>
mode can be either :read or :write
</p>
<p>
A block must be provided and it will be used as the callback to handle the
event, once the event fires the block will be called with the IO object and
the reactor passed as block parameters.
</p>
<p>
A third argument (which defaults to true) tells the method what to do if
the IO object is already attached. If it is set to true (default) then the
reactor will append the new call back till the original caller detaches it.
If set to false then the reactor will just override the old callback with
the new one
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 111</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L111">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">111
112
113
114
115
116
117
118
119
120
121
122</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='attach identifier id'>attach</span><span class='lparen token'>(</span><span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='io identifier id'>io</span><span class='comma token'>,</span> <span class='wait_if_attached identifier id'>wait_if_attached</span> <span class='assign token'>=</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='callback identifier id'>callback</span><span class='rparen token'>)</span>
  <span class='selectables identifier id'>selectables</span> <span class='assign token'>=</span> <span class='@selectables ivar id'>@selectables</span><span class='lbrack token'>[</span><span class='mode identifier id'>mode</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='string val'>&quot;mode is not :read or :write&quot;</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='string val'>&quot;you must supply a callback block&quot;</span> <span class='if if_mod kw'>if</span> <span class='callback identifier id'>callback</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='if if kw'>if</span> <span class='wait_if_attached identifier id'>wait_if_attached</span> <span class='andop op'>&amp;&amp;</span> <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:ios</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='io identifier id'>io</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span><span class='rbrack token'>]</span>
    <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:callbacks</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='io identifier id'>io</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='callback identifier id'>callback</span>
  <span class='else else kw'>else</span>
    <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:ios</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='io identifier id'>io</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='io identifier id'>io</span> 
    <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:callbacks</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='io identifier id'>io</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='callback identifier id'>callback</span><span class='rbrack token'>]</span>
    <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:dirty</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>
  <span class='@on_attach ivar id'>@on_attach</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='io identifier id'>io</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@on_attach ivar id'>@on_attach</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>attached?</h3>
</div><div id="attached-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>attached?</span><span class='args'>(mode, io)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Ask the reactor if an IO object is attached in some mode
</p>
<p>
mode can be either :read or :write
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 165</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L165">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">165
166
167</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='attached? fid id'>attached?</span><span class='lparen token'>(</span><span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='io identifier id'>io</span><span class='rparen token'>)</span>
  <span class='@selectables ivar id'>@selectables</span><span class='lbrack token'>[</span><span class='mode identifier id'>mode</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:ios</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>detach</h3>
</div><div id="detach-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>detach</span><span class='args'>(mode, io, force = false)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Detach an IO object from the reactor
</p>
<p>
mode can be either :read or :write
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 134</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L134">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">134
135
136
137
138
139
140
141
142
143
144
145</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='detach identifier id'>detach</span><span class='lparen token'>(</span><span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='io identifier id'>io</span><span class='comma token'>,</span> <span class='force identifier id'>force</span><span class='assign token'>=</span><span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='selectables identifier id'>selectables</span> <span class='assign token'>=</span> <span class='@selectables ivar id'>@selectables</span><span class='lbrack token'>[</span><span class='mode identifier id'>mode</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='string val'>&quot;mode is not :read or :write&quot;</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='unless unless_mod kw'>unless</span> <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:ios</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='io identifier id'>io</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='force identifier id'>force</span> <span class='andop op'>&amp;&amp;</span> <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:callbacks</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='io identifier id'>io</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>1</span>
    <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:callbacks</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='io identifier id'>io</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span>
  <span class='else else kw'>else</span>
    <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:ios</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='io identifier id'>io</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span><span class='rparen token'>)</span>
    <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:callbacks</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='io identifier id'>io</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span><span class='rparen token'>)</span>
    <span class='selectables identifier id'>selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:dirty</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>
  <span class='@on_detach ivar id'>@on_detach</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='io identifier id'>io</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@on_detach ivar id'>@on_detach</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>detach_all</h3>
</div><div id="detach_all-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>detach_all</span><span class='args'>(mode)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Detach all IO objects of a certain mode from the reactor
</p>
<p>
mode can be either :read or :write
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 157</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L157">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">157
158
159
160</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='detach_all identifier id'>detach_all</span><span class='lparen token'>(</span><span class='mode identifier id'>mode</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='string val'>&quot;mode is not :read or :write&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='lbrack token'>[</span><span class='symbol val'>:read</span><span class='comma token'>,</span> <span class='symbol val'>:write</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='mode identifier id'>mode</span>
  <span class='@selectables ivar id'>@selectables</span><span class='lbrack token'>[</span><span class='mode identifier id'>mode</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:ios</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='symbol val'>:callbacks</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='symbol val'>:io_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>next_tick</h3>
</div><div id="next_tick-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>next_tick</span><span class='args'>(&amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Register a block to be called at the next reactor tick this particular
method is thread safe
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 190</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L190">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">190
191
192</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='next_tick identifier id'>next_tick</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span>
  <span class='@next_procs ivar id'>@next_procs</span> <span class='lshft op'>&lt;&lt;</span> <span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>on_add_timer</h3>
</div><div id="on_add_timer-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>on_add_timer</span><span class='args'>(&amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Supply a callback to on_add_timer that will be called after each add_timer
operation and supplied with the timer object
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 179</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L179">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">179
180
181</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='on_add_timer identifier id'>on_add_timer</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@on_add_timer ivar id'>@on_add_timer</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>on_attach</h3>
</div><div id="on_attach-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>on_attach</span><span class='args'>(&amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Supply a callback to on_attach that will be called after each attach
operation and supplied with the mode and io object of the attach method
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 127</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L127">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">127
128
129</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='on_attach identifier id'>on_attach</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@on_attach ivar id'>@on_attach</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>on_detach</h3>
</div><div id="on_detach-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>on_detach</span><span class='args'>(&amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Supply a callback to on_detach that will be called after each detach
operation and supplied with the mode and io object of the detach method
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 150</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L150">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">150
151
152</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='on_detach identifier id'>on_detach</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@on_detach ivar id'>@on_detach</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>run</h3>
</div><div id="run-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>run</span><span class='args'></span>
    <span class='block'>{|_self| ... }</span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Starts the reactor loop
</p>
<p>
If a block is given it is run and the reactor itself is sent as a parameter
The block will be run while the reactor is in the running state but before
the actual loop.
</p>
<p>
Each run of the loop will fire all expired time objects and will wait a few
melliseconds for notifications on the list of IO objects, if any occurs the
corresponding callbacks are fired and the loop resumes, otherwise it
resumes directly
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="yieldparam">
  <h3>Yield Parameters:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="" title="Reactor::Base">Reactor::Base</a></tt>]</span>
      
      
        <span class='name'>_self</span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
the object that the method was called on
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 66</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L66">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">66
67
68
69
70
71
72
73</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='run identifier id'>run</span>
  <span class='@running ivar id'>@running</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='yield yield kw'>yield</span> <span class='self self kw'>self</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
  <span class='loop identifier id'>loop</span> <span class='do do kw'>do</span>
    <span class='break break kw'>break</span> <span class='unless unless_mod kw'>unless</span> <span class='@running ivar id'>@running</span>
    <span class='run_once identifier id'>run_once</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>run_once</h3>
</div><div id="run_once-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>run_once</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
A single select run, it will fire all expired timers and the callbacks on
IO objects but it will return immediately after that. This is useful if you
need to create your own loop to interleave the IO event notifications with
other operations
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 78</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L78">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">78
79
80
81
82
83
84
85
86
87</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='run_once identifier id'>run_once</span>
  <span class='update_list identifier id'>update_list</span><span class='lparen token'>(</span><span class='@selectables ivar id'>@selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:read</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='update_list identifier id'>update_list</span><span class='lparen token'>(</span><span class='@selectables ivar id'>@selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:write</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>            
  <span class='if if kw'>if</span> <span class='res identifier id'>res</span> <span class='assign token'>=</span> <span class='IO constant id'>IO</span><span class='dot token'>.</span><span class='select identifier id'>select</span><span class='lparen token'>(</span><span class='@selectables ivar id'>@selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:read</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:io_list</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='@selectables ivar id'>@selectables</span><span class='lbrack token'>[</span><span class='symbol val'>:write</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:io_list</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='integer val'>.005</span><span class='rparen token'>)</span>
    <span class='fire_ios identifier id'>fire_ios</span><span class='lparen token'>(</span><span class='symbol val'>:read</span><span class='comma token'>,</span> <span class='res identifier id'>res</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='fire_ios identifier id'>fire_ios</span><span class='lparen token'>(</span><span class='symbol val'>:write</span><span class='comma token'>,</span> <span class='res identifier id'>res</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span> 
  <span class='fire_procs identifier id'>fire_procs</span>
  <span class='fire_timers identifier id'>fire_timers</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>running?</h3>
</div><div id="running-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>running?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is the reactor running?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 195</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L195">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">195
196
197</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='running? fid id'>running?</span>
  <span class='@running ivar id'>@running</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>stop</h3>
</div><div id="stop-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>stop</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Stops the reactor loop It does not detach any of the attached IO objects,
the reactor can be started again and it will keep notifying on the same set
of attached IO objects
</p>
<p>
Stop does not stop the reactor immediately, rather it is stopped at the
next cycle, the current cycle continues to completion
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/reactor.rb', line 95</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/oldmoe/reactor/blob/17b32708f5238df337b5f2b70a34a4f0454fee03/lib/reactor.rb#L95">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">95
96
97</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='stop identifier id'>stop</span>
  <span class='@running ivar id'>@running</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>