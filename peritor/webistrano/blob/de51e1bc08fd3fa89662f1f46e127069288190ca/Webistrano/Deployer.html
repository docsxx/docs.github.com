<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>peritor's webistrano - Class: Webistrano::Deployer - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/peritor/commits/webistrano/master" rel="alternate" title="Recent Commits to webistrano:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("peritor", "webistrano", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("peritor", "webistrano", "de51e1bc08fd3fa89662f1f46e127069288190ca", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/peritor/webistrano/tree/">Source</a></li>
            <li class=""><a href="http://github.com/peritor/webistrano/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/peritor/webistrano/network">Network</a></li>            
            <li class=""><a href="http://github.com/peritor/webistrano/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/peritor/webistrano">Wiki</a></li>
            <li class=""><a href="http://github.com/peritor/webistrano/graphs">Graphs</a></li>                    
            <li class="active"><a href="/peritor/webistrano">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/peritor">peritor</a> / <b><a href="http://github.com/peritor/webistrano/tree">webistrano</a></b>        
                <a id="namespaces_button" rel="peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Webistrano_Deployer">
  <h1>Class: Webistrano::Deployer</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p>Capistrano::CLI::Execute, Capistrano::CLI::Options</p>
</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">deployment</td>
          <td class="readwrite">
            [<span id='deployment-instance_method'>R</span><span id='deployment=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
deployment (AR model) that will be deployed.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">logger</td>
          <td class="readwrite">
            [<span id='logger-instance_method'>R</span><span id='logger=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>logger</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">options</td>
          <td class="readwrite">
            [<span id='options-instance_method'>R</span><span id='options=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
holds the capistrano options, see capistrano/lib/capistrano/cli/options.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(deployment)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 14</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L14">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='deployment identifier id'>deployment</span><span class='rparen token'>)</span>
  <span class='@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> 
    <span class='symbol val'>:recipes</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> 
    <span class='symbol val'>:actions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:vars</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> 
    <span class='symbol val'>:pre_vars</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span>
    <span class='symbol val'>:verbose</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>3</span> 
  <span class='rbrace token'>}</span>

  <span class='@deployment ivar id'>@deployment</span> <span class='assign token'>=</span> <span class='deployment identifier id'>deployment</span>
  
  <span class='if if kw'>if</span><span class='lparen token'>(</span><span class='@deployment ivar id'>@deployment</span><span class='dot token'>.</span><span class='task identifier id'>task</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='@deployment ivar id'>@deployment</span><span class='dot token'>.</span><span class='new_record? fid id'>new_record?</span><span class='rparen token'>)</span>
    <span class='comment val'># a read deployment</span>
    <span class='@logger ivar id'>@logger</span> <span class='assign token'>=</span> <span class='Webistrano constant id'>Webistrano</span><span class='colon2 op'>::</span><span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='deployment identifier id'>deployment</span><span class='rparen token'>)</span>
    <span class='@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='level identifier id'>level</span> <span class='assign token'>=</span> <span class='Webistrano constant id'>Webistrano</span><span class='colon2 op'>::</span><span class='Logger constant id'>Logger</span><span class='colon2 op'>::</span><span class='TRACE constant id'>TRACE</span>
    <span class='validate identifier id'>validate</span>
  <span class='else else kw'>else</span>
    <span class='comment val'># a fake deployment in order to access tasks</span>
    <span class='@logger ivar id'>@logger</span> <span class='assign token'>=</span> <span class='Capistrano constant id'>Capistrano</span><span class='colon2 op'>::</span><span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#type_cast-class_method">type_cast</span><span class='args'>(val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
casts a given string to the correct Ruby value e.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#exchange_real_revision-instance_method">#exchange_real_revision</span><span class='args'>(config)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
set :real_revsion on config a version of SCM#query_revision(revision) that
uses Webistrano::Logger and handles errors cleaner.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#execute-21-instance_method">#execute!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
modified version of Capistrano::CLI::Execute&#8217;s execute!.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#handle_error-instance_method">#handle_error</span><span class='args'>(error)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
override in order to use DB logger.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#instantiate_configuration-instance_method">#instantiate_configuration</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
override in order to use DB logger.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#invoke_task-21-instance_method">#invoke_task!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
actual invokment of a given task (through @deployment).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#list_tasks-instance_method">#list_tasks</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
returns a list of all tasks defined for this deployer.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#load_project_template_tasks-instance_method">#load_project_template_tasks</span><span class='args'>(config)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
load the project&#8217;s custom tasks.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#load_stage_custom_recipes-instance_method">#load_stage_custom_recipes</span><span class='args'>(config)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
load custom project recipes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#resolve_references-instance_method">#resolve_references</span><span class='args'>(config, value)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_pid-instance_method">#save_pid</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
saves the process ID of this running deployment in order to be able to kill
it.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_revision-instance_method">#save_revision</span><span class='args'>(config)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
save the revision in the DB if possible.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_project_and_stage_names-instance_method">#set_project_and_stage_names</span><span class='args'>(config)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
sets webistrano_project and webistrano_stage to corrosponding values.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_stage_configuration-instance_method">#set_stage_configuration</span><span class='args'>(config)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
sets the stage configuration on the Capistrano configuration.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_stage_roles-instance_method">#set_stage_roles</span><span class='args'>(config)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
sets the roles on the Capistrano configuration.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_up_config-instance_method">#set_up_config</span><span class='args'>(config)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_webistrano_logger-instance_method">#set_webistrano_logger</span><span class='args'>(config)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
sets the Webistrano::Logger instance on the configuration, so that it gets
used by the SCM#logger.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#validate-instance_method">#validate</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
validates this instance raises on ArgumentError if not valid.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>type_cast</h3>
</div><div id="type_cast-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>type_cast</span><span class='args'>(val)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
casts a given string to the correct Ruby value e.g. &#8216;true&#8217; to
true and &#8217;:sym&#8217; to :sym
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 238</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L238">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  
  <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='strip! fid id'>strip!</span>
  <span class='case case kw'>case</span> <span class='val identifier id'>val</span>
  <span class='when when kw'>when</span> <span class='string val'>'true'</span>
    <span class='true true kw'>true</span>
  <span class='when when kw'>when</span> <span class='string val'>'false'</span>
    <span class='false false kw'>false</span>
  <span class='when when kw'>when</span> <span class='string val'>'nil'</span>
    <span class='nil nil kw'>nil</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/\A\[(.*)\]/</span>
    <span class='$1 nth_ref id'>$1</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>','</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='subval identifier id'>subval</span><span class='bitor op'>|</span> <span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='subval identifier id'>subval</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/\A\{(.*)\}/</span>
    <span class='$1 nth_ref id'>$1</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>','</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='pair identifier id'>pair</span><span class='bitor op'>|</span> <span class='pair identifier id'>pair</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'=&gt;'</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='inject identifier id'>inject</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='hash identifier id'>hash</span><span class='comma token'>,</span> <span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span><span class='bitor op'>|</span>
      <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='hash identifier id'>hash</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span> <span class='comment val'># symbol or string</span>
    <span class='if if kw'>if</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='string val'>':'</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
      <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='slice identifier id'>slice</span><span class='lparen token'>(</span><span class='integer val'>1</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
    <span class='elsif elsif kw'>elsif</span> <span class='match identifier id'>match</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='regexp val'>/'(.*)'/</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='regexp val'>/&quot;(.*)&quot;/</span><span class='rparen token'>)</span>
      <span class='match identifier id'>match</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
    <span class='else else kw'>else</span>
      <span class='val identifier id'>val</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>exchange_real_revision</h3>
</div><div id="exchange_real_revision-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>exchange_real_revision</span><span class='args'>(config)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
set :real_revsion on config a version of SCM#query_revision(revision) that
uses Webistrano::Logger and handles errors cleaner
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 176</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L176">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='exchange_real_revision identifier id'>exchange_real_revision</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  
  <span class='comment val'># check if the scm_command exists if it is set</span>
  <span class='if if kw'>if</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:scm_command</span><span class='rbrack token'>]</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:source</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='local identifier id'>local</span><span class='dot token'>.</span><span class='command identifier id'>command</span><span class='rparen token'>)</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='important identifier id'>important</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Local scm command not found: #{config[:source].local.command}&quot;</span><span class='rparen token'>)</span>
    <span class='throw identifier id'>throw</span> <span class='symbol val'>:abort_called_by_capistrano</span><span class='comma token'>,</span> <span class='symbol val'>:capistrano_abort</span>
  <span class='end end kw'>end</span>
    
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='set identifier id'>set</span><span class='lparen token'>(</span><span class='symbol val'>:real_revision</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:source</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='local identifier id'>local</span><span class='dot token'>.</span><span class='query_revision identifier id'>query_revision</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:revision</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='cmd identifier id'>cmd</span><span class='bitor op'>|</span> 
      <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='with_env identifier id'>with_env</span><span class='lparen token'>(</span><span class='string val'>&quot;LC_ALL&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;C&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
      
        <span class='stdout_output identifier id'>stdout_output</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='stderr_output identifier id'>stderr_output</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        
        <span class='status identifier id'>status</span> <span class='assign token'>=</span> <span class='Open4 constant id'>Open4</span><span class='colon2 op'>::</span><span class='popen4 identifier id'>popen4</span><span class='lparen token'>(</span><span class='cmd identifier id'>cmd</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='pid identifier id'>pid</span><span class='comma token'>,</span> <span class='stdin identifier id'>stdin</span><span class='comma token'>,</span> <span class='stdout identifier id'>stdout</span><span class='comma token'>,</span> <span class='stderr identifier id'>stderr</span><span class='bitor op'>|</span>
          <span class='stdin identifier id'>stdin</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
          <span class='stdout_output identifier id'>stdout_output</span> <span class='assign token'>=</span> <span class='stdout identifier id'>stdout</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>
          <span class='stderr_output identifier id'>stderr_output</span> <span class='assign token'>=</span> <span class='stderr identifier id'>stderr</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>
          <span class='comment val'>#logger.trace(&quot;LOCAL SCM OUT: #{stdout_output}&quot;) unless stdout_output.blank?</span>
          <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='important identifier id'>important</span><span class='lparen token'>(</span><span class='dstring node'>&quot;LOCAL SCM ERROR: #{stderr_output}&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='stderr_output identifier id'>stderr_output</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
        <span class='end end kw'>end</span>

        <span class='if if kw'>if</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='exitstatus identifier id'>exitstatus</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='comment val'># Error</span>
          <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='important identifier id'>important</span><span class='lparen token'>(</span><span class='string val'>&quot;Local scm command failed&quot;</span><span class='rparen token'>)</span>
        
          <span class='comment val'># exit deployment in a hard way as no rollback is need (we never read the revision to deploy)</span>
          <span class='comment val'># an alternative would be to raise Capistrano::Error, this would trigger a rollback</span>
          <span class='throw identifier id'>throw</span> <span class='symbol val'>:abort_called_by_capistrano</span><span class='comma token'>,</span> <span class='symbol val'>:capistrano_abort</span>
        <span class='else else kw'>else</span> <span class='comment val'># OK</span>
          <span class='stdout_output identifier id'>stdout_output</span>
        <span class='end end kw'>end</span>
      
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span> 
  <span class='end end kw'>end</span>

<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>execute!</h3>
</div><div id="execute-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>execute!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
modified version of Capistrano::CLI::Execute&#8217;s execute!
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 57</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L57">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='execute! fid id'>execute!</span>
  <span class='config identifier id'>config</span> <span class='assign token'>=</span> <span class='instantiate_configuration identifier id'>instantiate_configuration</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='level identifier id'>level</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:verbose</span><span class='rbrack token'>]</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='load identifier id'>load</span> <span class='string val'>'deploy'</span>

  <span class='status identifier id'>status</span> <span class='assign token'>=</span> <span class='catch identifier id'>catch</span><span class='lparen token'>(</span><span class='symbol val'>:abort_called_by_capistrano</span><span class='rparen token'>)</span><span class='lbrace token'>{</span>
    <span class='set_webistrano_logger identifier id'>set_webistrano_logger</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
    
    <span class='set_up_config identifier id'>set_up_config</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
    
    <span class='exchange_real_revision identifier id'>exchange_real_revision</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='symbol val'>:scm</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='eq op'>==</span> <span class='string val'>'git'</span><span class='rparen token'>)</span> <span class='comment val'># git cannot do a local query by default</span>
    <span class='save_revision identifier id'>save_revision</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
    <span class='save_pid identifier id'>save_pid</span>
    
    <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='trigger identifier id'>trigger</span><span class='lparen token'>(</span><span class='symbol val'>:load</span><span class='rparen token'>)</span>
    <span class='execute_requested_actions identifier id'>execute_requested_actions</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
    <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='trigger identifier id'>trigger</span><span class='lparen token'>(</span><span class='symbol val'>:exit</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span>
  
  <span class='if if kw'>if</span> <span class='status identifier id'>status</span> <span class='eq op'>==</span> <span class='symbol val'>:capistrano_abort</span>
    <span class='false false kw'>false</span>
  <span class='else else kw'>else</span>
    <span class='config identifier id'>config</span>
  <span class='end end kw'>end</span>
<span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='error identifier id'>error</span>
  <span class='handle_error identifier id'>handle_error</span><span class='lparen token'>(</span><span class='error identifier id'>error</span><span class='rparen token'>)</span>     
  <span class='return return kw'>return</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_error</h3>
</div><div id="handle_error-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_error</span><span class='args'>(error)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
override in order to use DB logger
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 268</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L268">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">268
269
270
271
272
273
274
275
276
277
278</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='handle_error identifier id'>handle_error</span><span class='lparen token'>(</span><span class='error identifier id'>error</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='case case kw'>case</span> <span class='error identifier id'>error</span>
  <span class='when when kw'>when</span> <span class='Net constant id'>Net</span><span class='colon2 op'>::</span><span class='SSH constant id'>SSH</span><span class='colon2 op'>::</span><span class='AuthenticationFailed constant id'>AuthenticationFailed</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='important identifier id'>important</span> <span class='dstring node'>&quot;authentication failed for `#{error.message}'&quot;</span>
  <span class='when when kw'>when</span> <span class='Capistrano constant id'>Capistrano</span><span class='colon2 op'>::</span><span class='Error constant id'>Error</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='important identifier id'>important</span><span class='lparen token'>(</span><span class='error identifier id'>error</span><span class='dot token'>.</span><span class='message identifier id'>message</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span> 
    <span class='comment val'># we did not expect this error, so log the trace</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='important identifier id'>important</span><span class='lparen token'>(</span><span class='error identifier id'>error</span><span class='dot token'>.</span><span class='message identifier id'>message</span> <span class='plus op'>+</span> <span class='string val'>&quot;\n&quot;</span> <span class='plus op'>+</span> <span class='error identifier id'>error</span><span class='dot token'>.</span><span class='backtrace identifier id'>backtrace</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>instantiate_configuration</h3>
</div><div id="instantiate_configuration-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>instantiate_configuration</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
override in order to use DB logger
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 104</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L104">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">104
105
106
107
108</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='instantiate_configuration identifier id'>instantiate_configuration</span> 
  <span class='config identifier id'>config</span> <span class='assign token'>=</span> <span class='Webistrano constant id'>Webistrano</span><span class='colon2 op'>::</span><span class='Configuration constant id'>Configuration</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='logger identifier id'>logger</span> <span class='assign token'>=</span> <span class='logger identifier id'>logger</span>
  <span class='config identifier id'>config</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>invoke_task!</h3>
</div><div id="invoke_task-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>invoke_task!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
actual invokment of a given task (through @deployment)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 43</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L43">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">43
44
45
46
47
48
49
50
51
52
53
54</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='invoke_task! fid id'>invoke_task!</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:actions</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='task identifier id'>task</span>
  
  <span class='case case kw'>case</span> <span class='execute! fid id'>execute!</span>
  <span class='when when kw'>when</span> <span class='false false kw'>false</span>
    <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='complete_with_error! fid id'>complete_with_error!</span>
    <span class='false false kw'>false</span>
  <span class='else else kw'>else</span>
    <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='complete_successfully! fid id'>complete_successfully!</span>
    <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>list_tasks</h3>
</div><div id="list_tasks-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>list_tasks</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
returns a list of all tasks defined for this deployer
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 281</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L281">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">281
282
283
284
285
286
287
288</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='list_tasks identifier id'>list_tasks</span>
  <span class='config identifier id'>config</span> <span class='assign token'>=</span> <span class='instantiate_configuration identifier id'>instantiate_configuration</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='load identifier id'>load</span> <span class='string val'>'deploy'</span>
  
  <span class='set_up_config identifier id'>set_up_config</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='task_list identifier id'>task_list</span><span class='lparen token'>(</span><span class='symbol val'>:all</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>load_project_template_tasks</h3>
</div><div id="load_project_template_tasks-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>load_project_template_tasks</span><span class='args'>(config)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
load the project&#8217;s custom tasks
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 158</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L158">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">158
159
160</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='load_project_template_tasks identifier id'>load_project_template_tasks</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='load identifier id'>load</span><span class='lparen token'>(</span><span class='symbol val'>:string</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='stage identifier id'>stage</span><span class='dot token'>.</span><span class='project identifier id'>project</span><span class='dot token'>.</span><span class='tasks identifier id'>tasks</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>load_stage_custom_recipes</h3>
</div><div id="load_stage_custom_recipes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>load_stage_custom_recipes</span><span class='args'>(config)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
load custom project recipes
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 163</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L163">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">163
164
165
166
167
168
169
170
171
172</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='load_stage_custom_recipes identifier id'>load_stage_custom_recipes</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='begin begin kw'>begin</span>
    <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='stage identifier id'>stage</span><span class='dot token'>.</span><span class='recipes identifier id'>recipes</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='recipe identifier id'>recipe</span><span class='bitor op'>|</span>
      <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lparen token'>(</span><span class='dstring node'>&quot;loading stage recipe '#{recipe.name}' &quot;</span><span class='rparen token'>)</span>
      <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='load identifier id'>load</span><span class='lparen token'>(</span><span class='symbol val'>:string</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='recipe identifier id'>recipe</span><span class='dot token'>.</span><span class='body identifier id'>body</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='rescue rescue kw'>rescue</span> <span class='SyntaxError constant id'>SyntaxError</span><span class='comma token'>,</span> <span class='LoadError constant id'>LoadError</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='raise identifier id'>raise</span> <span class='Capistrano constant id'>Capistrano</span><span class='colon2 op'>::</span><span class='Error constant id'>Error</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Problem loading custom recipe: #{e.message}&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>resolve_references</h3>
</div><div id="resolve_references-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>resolve_references</span><span class='args'>(config, value)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 140</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L140">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='resolve_references identifier id'>resolve_references</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='references identifier id'>references</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='scan identifier id'>scan</span><span class='lparen token'>(</span><span class='regexp val'>/#\{([a-zA-Z_]+)\}/</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='references identifier id'>references</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
    <span class='references identifier id'>references</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='ref identifier id'>ref</span><span class='bitor op'>|</span>
      <span class='conf_param_refence identifier id'>conf_param_refence</span> <span class='assign token'>=</span> <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='effective_and_prompt_config identifier id'>effective_and_prompt_config</span><span class='dot token'>.</span><span class='select identifier id'>select</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='conf identifier id'>conf</span><span class='bitor op'>|</span> <span class='conf identifier id'>conf</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='eq op'>==</span> <span class='ref identifier id'>ref</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
      <span class='if if kw'>if</span> <span class='conf_param_refence identifier id'>conf_param_refence</span>
        <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='sub! fid id'>sub!</span><span class='lparen token'>(</span><span class='dregexp node'>/\#\{#{ref}\}/</span><span class='comma token'>,</span> <span class='conf_param_refence identifier id'>conf_param_refence</span><span class='dot token'>.</span><span class='value identifier id'>value</span><span class='rparen token'>)</span> 
      <span class='elsif elsif kw'>elsif</span> <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='exists? fid id'>exists?</span><span class='lparen token'>(</span><span class='ref identifier id'>ref</span><span class='rparen token'>)</span>
        <span class='build_in_value identifier id'>build_in_value</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='ref identifier id'>ref</span><span class='rparen token'>)</span>
        <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='sub! fid id'>sub!</span><span class='lparen token'>(</span><span class='dregexp node'>/\#\{#{ref}\}/</span><span class='comma token'>,</span> <span class='build_in_value identifier id'>build_in_value</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span> 
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='value identifier id'>value</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_pid</h3>
</div><div id="save_pid-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_pid</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
saves the process ID of this running deployment in order to be able to kill
it
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 98</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L98">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">98
99
100
101</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_pid identifier id'>save_pid</span>
  <span class='@deployment ivar id'>@deployment</span><span class='dot token'>.</span><span class='pid identifier id'>pid</span> <span class='assign token'>=</span> <span class='Process constant id'>Process</span><span class='dot token'>.</span><span class='pid identifier id'>pid</span>
  <span class='@deployment ivar id'>@deployment</span><span class='dot token'>.</span><span class='save! fid id'>save!</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_revision</h3>
</div><div id="save_revision-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_revision</span><span class='args'>(config)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
save the revision in the DB if possible
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 87</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L87">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">87
88
89
90
91
92
93
94</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_revision identifier id'>save_revision</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='symbol val'>:real_revision</span><span class='rparen token'>)</span>
    <span class='@deployment ivar id'>@deployment</span><span class='dot token'>.</span><span class='revision identifier id'>revision</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='symbol val'>:real_revision</span><span class='rparen token'>)</span>
    <span class='@deployment ivar id'>@deployment</span><span class='dot token'>.</span><span class='save! fid id'>save!</span>
  <span class='end end kw'>end</span>
<span class='rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='important identifier id'>important</span> <span class='dstring node'>&quot;Could not save revision: #{e.message}&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_project_and_stage_names</h3>
</div><div id="set_project_and_stage_names-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_project_and_stage_names</span><span class='args'>(config)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
sets webistrano_project and webistrano_stage to corrosponding values
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 231</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L231">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">231
232
233
234</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_project_and_stage_names identifier id'>set_project_and_stage_names</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='set identifier id'>set</span><span class='lparen token'>(</span><span class='symbol val'>:webistrano_project</span><span class='comma token'>,</span> <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='stage identifier id'>stage</span><span class='dot token'>.</span><span class='project identifier id'>project</span><span class='dot token'>.</span><span class='webistrano_project_name identifier id'>webistrano_project_name</span><span class='rparen token'>)</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='set identifier id'>set</span><span class='lparen token'>(</span><span class='symbol val'>:webistrano_stage</span><span class='comma token'>,</span> <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='stage identifier id'>stage</span><span class='dot token'>.</span><span class='webistrano_stage_name identifier id'>webistrano_stage_name</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_stage_configuration</h3>
</div><div id="set_stage_configuration-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_stage_configuration</span><span class='args'>(config)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
sets the stage configuration on the Capistrano configuration
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 129</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L129">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">129
130
131
132
133
134
135
136
137
138</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_stage_configuration identifier id'>set_stage_configuration</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='stage identifier id'>stage</span><span class='dot token'>.</span><span class='non_prompt_configurations identifier id'>non_prompt_configurations</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='effective_conf identifier id'>effective_conf</span><span class='bitor op'>|</span>
    <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='resolve_references identifier id'>resolve_references</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='comma token'>,</span> <span class='effective_conf identifier id'>effective_conf</span><span class='dot token'>.</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='set identifier id'>set</span> <span class='effective_conf identifier id'>effective_conf</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='comma token'>,</span> <span class='Deployer constant id'>Deployer</span><span class='dot token'>.</span><span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='prompt_config identifier id'>prompt_config</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='bitor op'>|</span>
    <span class='v identifier id'>v</span> <span class='assign token'>=</span> <span class='resolve_references identifier id'>resolve_references</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>
    <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='set identifier id'>set</span> <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='comma token'>,</span> <span class='Deployer constant id'>Deployer</span><span class='dot token'>.</span><span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_stage_roles</h3>
</div><div id="set_stage_roles-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_stage_roles</span><span class='args'>(config)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
sets the roles on the Capistrano configuration
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 216</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L216">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">216
217
218
219
220
221
222
223
224
225
226
227
228</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_stage_roles identifier id'>set_stage_roles</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='deploy_to_roles identifier id'>deploy_to_roles</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span>
    
    <span class='comment val'># create role attributes hash</span>
    <span class='role_attr identifier id'>role_attr</span> <span class='assign token'>=</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='role_attribute_hash identifier id'>role_attribute_hash</span>
    
    <span class='if if kw'>if</span> <span class='role_attr identifier id'>role_attr</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
      <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='role identifier id'>role</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='hostname_and_port identifier id'>hostname_and_port</span>
    <span class='else else kw'>else</span>
      <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='role identifier id'>role</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='hostname_and_port identifier id'>hostname_and_port</span><span class='comma token'>,</span> <span class='role_attr identifier id'>role_attr</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_up_config</h3>
</div><div id="set_up_config-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_up_config</span><span class='args'>(config)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 110</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L110">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">110
111
112
113
114
115
116
117
118
119
120</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_up_config identifier id'>set_up_config</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='set_pre_vars identifier id'>set_pre_vars</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='load_recipes identifier id'>load_recipes</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>

  <span class='set_stage_configuration identifier id'>set_stage_configuration</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='set_stage_roles identifier id'>set_stage_roles</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='set_project_and_stage_names identifier id'>set_project_and_stage_names</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='load_project_template_tasks identifier id'>load_project_template_tasks</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='load_stage_custom_recipes identifier id'>load_stage_custom_recipes</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='config identifier id'>config</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_webistrano_logger</h3>
</div><div id="set_webistrano_logger-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_webistrano_logger</span><span class='args'>(config)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
sets the Webistrano::Logger instance on the configuration, so that it gets
used by the SCM#logger
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 124</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L124">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">124
125
126</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_webistrano_logger identifier id'>set_webistrano_logger</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='set identifier id'>set</span> <span class='symbol val'>:logger</span><span class='comma token'>,</span> <span class='logger identifier id'>logger</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>validate</h3>
</div><div id="validate-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>validate</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
validates this instance raises on ArgumentError if not valid
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>ArgumentError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/webistrano/deployer.rb', line 38</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/peritor/webistrano/blob/de51e1bc08fd3fa89662f1f46e127069288190ca/lib/webistrano/deployer.rb#L38">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">38
39
40</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='validate identifier id'>validate</span>
  <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>'The given deployment has no roles and thus can not be deployed!'</span> <span class='if if_mod kw'>if</span> <span class='deployment identifier id'>deployment</span><span class='dot token'>.</span><span class='roles identifier id'>roles</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>