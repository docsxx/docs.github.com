<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Class: Lokii::GsmServer</title>
  </head>
  <body>
    <div id="content">
      <div class="section class Lokii_GsmServer">
  <h1 class="title">Class: Lokii::GsmServer</h1>
  <div class="section inheritance">
  <ul>
  <li><a href='Server.html' title='Lokii::Server'>Lokii::Server</a></li><ul><li>Lokii::GsmServer</li>
  </ul></ul>
</div><div class="section docstring">
  <p>
The gsm server operates against connected gsm modem(s). If the ports
property is specified in the settings it will try to pool connections to
the various ports, otherwise it will attempt to auto-detect
</p>

</div><div class="section attributes">
  <h1>Attributes</h1>

  
    <div class="instance">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">proxies</td>
          <td class="readwrite">
            [<span id='proxies-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>proxies</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#check-instance_method' title='#check'>#check</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#connect-instance_method' title='#connect'>#connect</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#say-instance_method' title='#say'>#say</a></span><span class='args'>(text, number, reply = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h1>Public Instance Methods Inherited from <a href='Server.html' title='Lokii::Server'>Lokii::Server</a></h1>
    <p><span class='name'><a href='Server.html#complete-instance_method' title='complete'>complete</a></span>, <span class='name'><a href='Server.html#daemon%3F-instance_method' title='daemon?'>daemon?</a></span>, <span class='name'><a href='Server.html#disconnect-instance_method' title='disconnect'>disconnect</a></span>, <span class='name'><a href='Server.html#process-instance_method' title='process'>process</a></span>, <span class='name'><a href='Server.html#ready%3F-instance_method' title='ready?'>ready?</a></span>, <span class='name'><a href='Server.html#running%3F-instance_method' title='running?'>running?</a></span>, <span class='name'><a href='Server.html#setup-instance_method' title='setup'>setup</a></span>, <span class='name'><a href='Server.html#stopped%3F-instance_method' title='stopped?'>stopped?</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>check</h3>
</div><div id="check-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>check</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


25
26
27
28
29
30
31</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/lokii/servers/gsm_server.rb', line 25</span>

<span class='def def kw'>def</span> <span class='check identifier id'>check</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='proxies identifier id'>proxies</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='proxy identifier id'>proxy</span><span class='bitor op'>|</span>
    <span class='proxy identifier id'>proxy</span><span class='dot token'>.</span><span class='messages identifier id'>messages</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='message identifier id'>message</span><span class='bitor op'>|</span>
      <span class='handle identifier id'>handle</span><span class='lparen token'>(</span><span class='message identifier id'>message</span><span class='rparen token'>)</span>    
    <span class='rbrace token'>}</span>      
  <span class='rbrace token'>}</span>  
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>connect</h3>
</div><div id="connect-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>connect</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/lokii/servers/gsm_server.rb', line 13</span>

<span class='def def kw'>def</span> <span class='connect identifier id'>connect</span>
  <span class='Lokii constant id'>Lokii</span><span class='colon2 op'>::</span><span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='string val'>&quot;Connecting&quot;</span>
  <span class='modems identifier id'>modems</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='ports identifier id'>ports</span> <span class='assign token'>=</span> <span class='Lokii constant id'>Lokii</span><span class='colon2 op'>::</span><span class='Config constant id'>Config</span><span class='dot token'>.</span><span class='ports identifier id'>ports</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>','</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='ports identifier id'>ports</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='port identifier id'>port</span><span class='bitor op'>|</span> <span class='modems identifier id'>modems</span> <span class='lshft op'>&lt;&lt;</span> <span class='Gsm constant id'>Gsm</span><span class='colon2 op'>::</span><span class='Modem constant id'>Modem</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='port identifier id'>port</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='modems identifier id'>modems</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='Gsm constant id'>Gsm</span><span class='colon2 op'>::</span><span class='Modem constant id'>Modem</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='modems identifier id'>modems</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='modems identifier id'>modems</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='modem identifier id'>modem</span><span class='bitor op'>|</span> <span class='modem identifier id'>modem</span><span class='dot token'>.</span><span class='encoding identifier id'>encoding</span> <span class='assign token'>=</span> <span class='Lokii constant id'>Lokii</span><span class='colon2 op'>::</span><span class='Config constant id'>Config</span><span class='dot token'>.</span><span class='encoding identifier id'>encoding</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrace token'>}</span> <span class='if if_mod kw'>if</span> <span class='Lokii constant id'>Lokii</span><span class='colon2 op'>::</span><span class='Config constant id'>Config</span><span class='dot token'>.</span><span class='encoding identifier id'>encoding</span>
  <span class='modems identifier id'>modems</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='modem identifier id'>modem</span><span class='bitor op'>|</span> <span class='modem identifier id'>modem</span><span class='dot token'>.</span><span class='keep_inbox_empty identifier id'>keep_inbox_empty</span> <span class='assign token'>=</span> <span class='true true kw'>true</span><span class='rbrace token'>}</span>
  <span class='@proxies ivar id'>@proxies</span> <span class='assign token'>=</span> <span class='modems identifier id'>modems</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='modem identifier id'>modem</span><span class='bitor op'>|</span> <span class='Lokii constant id'>Lokii</span><span class='colon2 op'>::</span><span class='GsmProxy constant id'>GsmProxy</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='modem identifier id'>modem</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='@current ivar id'>@current</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
<span class='end end kw'>end</span>      
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>say</h3>
</div><div id="say-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>say</span><span class='args'>(text, number, reply = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


33
34
35
36
37</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/lokii/servers/gsm_server.rb', line 33</span>

<span class='def def kw'>def</span> <span class='say identifier id'>say</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='reply identifier id'>reply</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='@current ivar id'>@current</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
  <span class='@current ivar id'>@current</span> <span class='assign token'>=</span> <span class='integer val'>0</span> <span class='if if_mod kw'>if</span> <span class='@current ivar id'>@current</span> <span class='gt op'>&gt;</span> <span class='proxies identifier id'>proxies</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='minus op'>-</span> <span class='integer val'>1</span> 
  <span class='@proxies ivar id'>@proxies</span><span class='lbrack token'>[</span><span class='@current ivar id'>@current</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='outgoing identifier id'>outgoing</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='text identifier id'>text</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>