<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>bartt's crumblr - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/bartt/commits/crumblr/master" rel="alternate" title="Recent Commits to crumblr:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("bartt", "crumblr", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='bartt/crumblr/blob/ac49346970b8b41def3ff65eca03168d10e11914' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='bartt/crumblr/blob/ac49346970b8b41def3ff65eca03168d10e11914' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("bartt", "crumblr", "ac49346970b8b41def3ff65eca03168d10e11914", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/bartt/crumblr/tree/">Source</a></li>
            <li class=""><a href="http://github.com/bartt/crumblr/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/bartt/crumblr/network">Network</a></li>            
            <li class=""><a href="http://github.com/bartt/crumblr/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/bartt/crumblr">Wiki</a></li>
            <li class=""><a href="http://github.com/bartt/crumblr/graphs">Graphs</a></li>                    
            <li class="active"><a href="/bartt/crumblr">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/bartt">bartt</a> / <b><a href="http://github.com/bartt/crumblr/tree">crumblr</a></b>        
                <a id="namespaces_button" rel="bartt/crumblr/blob/ac49346970b8b41def3ff65eca03168d10e11914" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="bartt/crumblr/blob/ac49346970b8b41def3ff65eca03168d10e11914" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Crumblr</h1>
<p>
A plugin to protect against Cross-Site Request Forgery. From
http://en.wikipedia.org/wiki/Crsf:
</p>
<p>
<em>Cross-site request forgery, also known as one click attack or session
riding and abbreviated as CSRF (Sea-Surf) or XSRF, is a kind of malicious
exploit of websites. Although this type of attack has similarities to
cross-site scripting (XSS), cross-site scripting requires the attacker to
inject unauthorized code into a website, while cross-site request forgery
merely transmits unauthorized commands from a user the website trusts.</em>
</p>
<h2>Prevention</h2>
<p>
For the web site, switching from a persistent authentication method (e.g. a
cookie or HTTP authentication) to a transient authentication method (e.g. a
hidden field provided on every form) will help prevent these attacks. Use
Crumblr to include a secret, user-specific token in forms that is verified
in addition to the cookie.
</p>
<h2>Example usage</h2>
<pre class="code">
  <span class='app identifier id'>app</span><span class='div op'>/</span><span class='controllers identifier id'>controllers</span><span class='div op'>/</span><span class='account_controller identifier id'>account_controller</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span><span class='colon op'>:</span>

    <span class='class class kw'>class</span> <span class='AccountController constant id'>AccountController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>
      <span class='before_filter identifier id'>before_filter</span> <span class='symbol val'>:verify_crumb</span>
      <span class='dot3 op'>...</span>
    <span class='end end kw'>end</span>

  <span class='app identifier id'>app</span><span class='div op'>/</span><span class='views identifier id'>views</span><span class='div op'>/</span><span class='account identifier id'>account</span><span class='div op'>/</span><span class='login identifier id'>login</span><span class='dot token'>.</span><span class='rhtml identifier id'>rhtml</span><span class='colon op'>:</span>

    <span class='lt op'>&lt;</span><span class='string val'>% form_for </span><span class='symbol val'>:form</span><span class='comma token'>,</span> <span class='symbol val'>:url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:action=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;login&quot;</span><span class='rbrace token'>}</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='minus op'>-</span><span class='string val'>%&gt;
      &lt;%= crumb_tags %&gt;</span>
      <span class='dot3 op'>...</span>
    <span class='lt op'>&lt;</span><span class='string val'>% end </span><span class='minus op'>-</span><span class='string val'>%&gt;
</span></pre>
<h2>Resources compatible</h2>
<p>
Crumblr works with well with resources. Crumbs are verified for all HTTP
verbs but GET as GET is commonly used w/o form submission.
</p>
<h2>Cookie Session Store Incompatible</h2>
<p>
Crumblr relies on constant session IDs to verify that an issued crumb is
valid. Session cookie change everytime data is added to the session, which
renders this store incompatible with Crumblr.
</p>
<h2>License &amp; Author</h2>
<p>
:include: LICENSE
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>