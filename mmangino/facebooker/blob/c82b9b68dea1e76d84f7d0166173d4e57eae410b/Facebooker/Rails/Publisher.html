<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>mmangino's facebooker - Class: Facebooker::Rails::Publisher - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/mmangino/commits/facebooker/master" rel="alternate" title="Recent Commits to facebooker:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("mmangino", "facebooker", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("mmangino", "facebooker", "c82b9b68dea1e76d84f7d0166173d4e57eae410b", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/mmangino/facebooker/tree/">Source</a></li>
            <li class=""><a href="http://github.com/mmangino/facebooker/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/mmangino/facebooker/network">Network</a></li>            
            <li class=""><a href="http://github.com/mmangino/facebooker/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/mmangino/facebooker">Wiki</a></li>
            <li class=""><a href="http://github.com/mmangino/facebooker/graphs">Graphs</a></li>                    
            <li class="active"><a href="/mmangino/facebooker">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/mmangino">mmangino</a> / <b><a href="http://github.com/mmangino/facebooker/tree">facebooker</a></b>        
                <a id="namespaces_button" rel="mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Facebooker_Rails_Publisher">
  <h1>Class: Facebooker::Rails::Publisher</h1>
  <div class="section docstring">
  <p>
ActionMailer like module for publishing Facbook messages
</p>
<p>
To use, create a subclass and define methods Each method should start by
calling send_as to specify the type of message Valid options are :email and
:notification, :user_action, :profile, :ref
</p>
<p>
Below is an example of each type
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='TestPublisher constant id'>TestPublisher</span> <span class='lt op'>&lt;</span> <span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='Rails constant id'>Rails</span><span class='colon2 op'>::</span><span class='Publisher constant id'>Publisher</span>
    <span class='comment val'># The new message templates are supported as well</span>
    <span class='comment val'># First, create a method that contains your templates:</span>
    <span class='comment val'># You may include multiple one line story templates and short story templates</span>
    <span class='comment val'># but only one full story template</span>
    <span class='comment val'>#  Your most specific template should be first</span>
    <span class='comment val'>#</span>
    <span class='comment val'># Before using, you must register your template by calling register. For this example</span>
    <span class='comment val'>#  You would call TestPublisher.register_publish_action</span>
    <span class='comment val'>#  Registering the template will store the template id returned from Facebook in the</span>
    <span class='comment val'># facebook_templates table that is created when you create your first publisher</span>
    <span class='def def kw'>def</span> <span class='publish_action_template identifier id'>publish_action_template</span>
      <span class='one_line_story_template identifier id'>one_line_story_template</span> <span class='string val'>&quot;{*actor*} did stuff with &lt;tt&gt;*friend*&lt;/tt&gt;&quot;</span>
      <span class='one_line_story_template identifier id'>one_line_story_template</span> <span class='string val'>&quot;{*actor*} did stuff&quot;</span>
      <span class='short_story_template identifier id'>short_story_template</span> <span class='string val'>&quot;{*actor*} has a title &lt;tt&gt;*friend*&lt;/tt&gt;&quot;</span><span class='comma token'>,</span> <span class='render identifier id'>render</span><span class='lparen token'>(</span><span class='symbol val'>:partial=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;short_body&quot;</span><span class='rparen token'>)</span>
      <span class='short_story_template identifier id'>short_story_template</span> <span class='string val'>&quot;{*actor*} has a title&quot;</span><span class='comma token'>,</span> <span class='render identifier id'>render</span><span class='lparen token'>(</span><span class='symbol val'>:partial=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;short_body&quot;</span><span class='rparen token'>)</span>
      <span class='full_story_template identifier id'>full_story_template</span> <span class='string val'>&quot;{*actor*} has a title &lt;tt&gt;*friend*&lt;/tt&gt;&quot;</span><span class='comma token'>,</span> <span class='render identifier id'>render</span><span class='lparen token'>(</span><span class='symbol val'>:partial=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;full_body&quot;</span><span class='rparen token'>)</span>
      <span class='action_links identifier id'>action_links</span> <span class='action_link identifier id'>action_link</span><span class='lparen token'>(</span><span class='string val'>&quot;My text &lt;tt&gt;*template_var*&lt;/tt&gt;&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;{*link_url*}&quot;</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># To send a registered template, you need to create a method to set the data</span>
    <span class='comment val'># The publisher will look up the template id from the facebook_templates table</span>
    <span class='def def kw'>def</span> <span class='publish_action identifier id'>publish_action</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span>
      <span class='send_as identifier id'>send_as</span> <span class='symbol val'>:user_action</span>
      <span class='from identifier id'>from</span> <span class='f identifier id'>f</span>
      <span class='story_size identifier id'>story_size</span> <span class='SHORT constant id'>SHORT</span> <span class='comment val'># or ONE_LINE or FULL</span>
      <span class='data identifier id'>data</span> <span class='symbol val'>:friend=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;Mike&quot;</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Provide a from user to send a general notification</span>
    <span class='comment val'># if from is nil, this will send an announcement</span>
    <span class='def def kw'>def</span> <span class='notification identifier id'>notification</span><span class='lparen token'>(</span><span class='to identifier id'>to</span><span class='comma token'>,</span><span class='f identifier id'>f</span><span class='rparen token'>)</span>
      <span class='send_as identifier id'>send_as</span> <span class='symbol val'>:notification</span>
      <span class='recipients identifier id'>recipients</span> <span class='to identifier id'>to</span>
      <span class='from identifier id'>from</span> <span class='f identifier id'>f</span>
      <span class='fbml identifier id'>fbml</span> <span class='string val'>&quot;Not&quot;</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='email identifier id'>email</span><span class='lparen token'>(</span><span class='to identifier id'>to</span><span class='comma token'>,</span><span class='f identifier id'>f</span><span class='rparen token'>)</span>
      <span class='send_as identifier id'>send_as</span> <span class='symbol val'>:email</span>
      <span class='recipients identifier id'>recipients</span> <span class='to identifier id'>to</span>
      <span class='from identifier id'>from</span> <span class='f identifier id'>f</span>
      <span class='title identifier id'>title</span> <span class='string val'>&quot;Email&quot;</span>
      <span class='fbml identifier id'>fbml</span> <span class='string val'>'text'</span>
      <span class='text identifier id'>text</span> <span class='fbml identifier id'>fbml</span>
    <span class='end end kw'>end</span>
    <span class='comment val'># This will render the profile in /users/profile.erb</span>
    <span class='comment val'>#   it will set @user to user_to_update in the template</span>
    <span class='comment val'>#  The mobile profile will be rendered from the app/views/test_publisher/_mobile.erb</span>
    <span class='comment val'>#   template</span>
    <span class='def def kw'>def</span> <span class='profile_update identifier id'>profile_update</span><span class='lparen token'>(</span><span class='user_to_update identifier id'>user_to_update</span><span class='comma token'>,</span><span class='user_with_session_to_use identifier id'>user_with_session_to_use</span><span class='rparen token'>)</span>
      <span class='send_as identifier id'>send_as</span> <span class='symbol val'>:profile</span>
      <span class='from identifier id'>from</span> <span class='user_with_session_to_use identifier id'>user_with_session_to_use</span>
      <span class='to identifier id'>to</span> <span class='user_to_update identifier id'>user_to_update</span>
      <span class='profile identifier id'>profile</span> <span class='render identifier id'>render</span><span class='lparen token'>(</span><span class='symbol val'>:action=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;/users/profile&quot;</span><span class='comma token'>,</span><span class='symbol val'>:assigns=</span><span class='gt op'>&gt;</span><span class='lbrace token'>{</span><span class='symbol val'>:user=</span><span class='gt op'>&gt;</span><span class='user_to_update identifier id'>user_to_update</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
      <span class='profile_action identifier id'>profile_action</span> <span class='string val'>&quot;A string&quot;</span>
      <span class='mobile_profile identifier id'>mobile_profile</span> <span class='render identifier id'>render</span><span class='lparen token'>(</span><span class='symbol val'>:partial=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;mobile&quot;</span><span class='comma token'>,</span><span class='symbol val'>:assigns=</span><span class='gt op'>&gt;</span><span class='lbrace token'>{</span><span class='symbol val'>:user=</span><span class='gt op'>&gt;</span><span class='user_to_update identifier id'>user_to_update</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

    <span class='comment val'>#  Update the given handle ref with the content from a</span>
    <span class='comment val'>#   template</span>
    <span class='def def kw'>def</span> <span class='ref_update identifier id'>ref_update</span><span class='lparen token'>(</span><span class='user identifier id'>user</span><span class='rparen token'>)</span>
      <span class='send_as identifier id'>send_as</span> <span class='symbol val'>:ref</span>
      <span class='from identifier id'>from</span> <span class='user identifier id'>user</span>
      <span class='fbml identifier id'>fbml</span> <span class='render identifier id'>render</span><span class='lparen token'>(</span><span class='symbol val'>:action=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;/users/profile&quot;</span><span class='comma token'>,</span><span class='symbol val'>:assigns=</span><span class='gt op'>&gt;</span><span class='lbrace token'>{</span><span class='symbol val'>:user=</span><span class='gt op'>&gt;</span><span class='user_to_update identifier id'>user_to_update</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
      <span class='handle identifier id'>handle</span> <span class='string val'>&quot;a_ref_handle&quot;</span>
  <span class='end end kw'>end</span>
</pre>
<p>
To send a message, use ActionMailer like semantics
</p>
<pre class="code">
   <span class='TestPublisher constant id'>TestPublisher</span><span class='dot token'>.</span><span class='deliver_action identifier id'>deliver_action</span><span class='lparen token'>(</span><span class='@user ivar id'>@user</span><span class='rparen token'>)</span>
</pre>
<p>
For testing, you may want to create an instance of the underlying message
without sending it
</p>
<pre class="code">
 <span class='TestPublisher constant id'>TestPublisher</span><span class='dot token'>.</span><span class='create_action identifier id'>create_action</span><span class='lparen token'>(</span><span class='@user ivar id'>@user</span><span class='rparen token'>)</span>
</pre>
<p>
will create and return an instance of Facebooker::Feeds::Action
</p>
<p>
Publisher makes many helpers available, including the linking and asset
helpers
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">_body</td>
          <td class="readwrite">
            [<span id='_body-instance_method'>R</span><span id='_body%3D-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>_body</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">action_links</td>
          <td class="readwrite">
            [R<span id='action_links%3D-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>action_links</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">one_line_story_templates</td>
          <td class="readwrite">
            [<span id='one_line_story_templates-instance_method'>R</span><span id='one_line_story_templates%3D-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>one_line_story_templates</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">short_story_templates</td>
          <td class="readwrite">
            [<span id='short_story_templates-instance_method'>R</span><span id='short_story_templates%3D-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>short_story_templates</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="FULL-constant">FULL</dt>
      <dd>4</dd>
    
      <dt id="ONE_LINE-constant">ONE_LINE</dt>
      <dd>1</dd>
    
      <dt id="SHORT-constant">SHORT</dt>
      <dd>2</dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 97</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L97">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">97
98
99
100
101
102</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span>
  <span class='@from ivar id'>@from</span>                 <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='@full_story_template ivar id'>@full_story_template</span>  <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='@recipients ivar id'>@recipients</span>           <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='@controller ivar id'>@controller</span>           <span class='assign token'>=</span> <span class='PublisherController constant id'>PublisherController</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div><div class="section methodmissing">
  <h2>Dynamic Method Handling</h2>

  <p class="note">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
  </p>

  <div id="method_missing-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>method_missing</span><span class='args'>(name, *args)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 308</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L308">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">308
309
310
311
312
313
314
315
316</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='method_missing identifier id'>method_missing</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='eq op'>==</span><span class='integer val'>1</span> <span class='and and kw'>and</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{name}=&quot;</span><span class='rparen token'>)</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{name}=&quot;</span><span class='comma token'>,</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='elsif elsif kw'>elsif</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='super super kw'>super</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_template_helper-class_method">add_template_helper</span><span class='args'>(helper_module)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#controller_path-class_method">controller_path</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#default_url_options-class_method">default_url_options</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#helper-class_method">helper</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#inherited-class_method">inherited</span><span class='args'>(child)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#method_missing-class_method">method_missing</span><span class='args'>(name, *args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#register_all_templates-class_method">register_all_templates</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#action_link-instance_method">#action_link</span><span class='args'>(text, target)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#action_links-instance_method">#action_links</span><span class='args'>(*links)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#announcement_notification-3F-instance_method">#announcement_notification?</span><span class='args'>(from, body)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#from-instance_method">#from</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#full_story_template-instance_method">#full_story_template</span><span class='args'>(title = nil, body = nil, params = )</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#image-instance_method">#image</span><span class='args'>(src, target)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#initialize_template_class-instance_method">#initialize_template_class</span><span class='args'>(assigns)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#logger-instance_method">#logger</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
nodoc needed for actionview.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#one_line_story_template-instance_method">#one_line_story_template</span><span class='args'>(str)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#profile_update-3F-instance_method">#profile_update?</span><span class='args'>(body)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#recipients-instance_method">#recipients</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#ref_update-3F-instance_method">#ref_update?</span><span class='args'>(body)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#render-instance_method">#render</span><span class='args'>(opts)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
nodoc delegate to action view.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#request_comes_from_facebook-3F-instance_method">#request_comes_from_facebook?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
use facebook options everywhere.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#requires_from_user-3F-instance_method">#requires_from_user?</span><span class='args'>(from, body)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#send_as-instance_method">#send_as</span><span class='args'>(option)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#send_message-instance_method">#send_message</span><span class='args'>(method)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#short_story_template-instance_method">#short_story_template</span><span class='args'>(title, body, params = )</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>add_template_helper</h3>
</div><div id="add_template_helper-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_template_helper</span><span class='args'>(helper_module)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 510</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L510">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">510
511
512
513</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_template_helper identifier id'>add_template_helper</span><span class='lparen token'>(</span><span class='helper_module identifier id'>helper_module</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='master_helper_module identifier id'>master_helper_module</span><span class='dot token'>.</span><span class='send identifier id'>send</span> <span class='symbol val'>:include</span><span class='comma token'>,</span><span class='helper_module identifier id'>helper_module</span>
  <span class='include identifier id'>include</span> <span class='master_helper_module identifier id'>master_helper_module</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>controller_path</h3>
</div><div id="controller_path-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>controller_path</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 495</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L495">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">495
496
497</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='controller_path identifier id'>controller_path</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='underscore identifier id'>underscore</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>default_url_options</h3>
</div><div id="default_url_options-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>default_url_options</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 491</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L491">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">491
492
493</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='default_url_options identifier id'>default_url_options</span>
  <span class='lbrace token'>{</span><span class='symbol val'>:host</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Facebooker constant id'>Facebooker</span><span class='dot token'>.</span><span class='canvas_server_base identifier id'>canvas_server_base</span> <span class='plus op'>+</span> <span class='Facebooker constant id'>Facebooker</span><span class='dot token'>.</span><span class='facebook_path_prefix identifier id'>facebook_path_prefix</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>helper</h3>
</div><div id="helper-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>helper</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 499</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L499">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">499
500
501
502
503
504
505
506
507
508</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='helper identifier id'>helper</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='arg identifier id'>arg</span><span class='bitor op'>|</span>
    <span class='case case kw'>case</span> <span class='arg identifier id'>arg</span>
    <span class='when when kw'>when</span> <span class='Symbol constant id'>Symbol</span><span class='comma token'>,</span><span class='String constant id'>String</span>
      <span class='add_template_helper identifier id'>add_template_helper</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{arg.to_s.classify}Helper&quot;</span><span class='dot token'>.</span><span class='constantize identifier id'>constantize</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='Module constant id'>Module</span>
      <span class='add_template_helper identifier id'>add_template_helper</span><span class='lparen token'>(</span><span class='arg identifier id'>arg</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>inherited</h3>
</div><div id="inherited-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>inherited</span><span class='args'>(child)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 516</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L516">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">516
517
518
519
520
521
522</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='inherited identifier id'>inherited</span><span class='lparen token'>(</span><span class='child identifier id'>child</span><span class='rparen token'>)</span>
  <span class='super super kw'>super</span>
  <span class='child identifier id'>child</span><span class='dot token'>.</span><span class='master_helper_module identifier id'>master_helper_module</span><span class='assign token'>=</span><span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='child identifier id'>child</span><span class='dot token'>.</span><span class='master_helper_module identifier id'>master_helper_module</span><span class='dot token'>.</span><span class='__send__ identifier id'>__send__</span><span class='lparen token'>(</span><span class='symbol val'>:include</span><span class='comma token'>,</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='master_helper_module identifier id'>master_helper_module</span><span class='rparen token'>)</span>
  <span class='child identifier id'>child</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:include</span><span class='comma token'>,</span> <span class='child identifier id'>child</span><span class='dot token'>.</span><span class='master_helper_module identifier id'>master_helper_module</span><span class='rparen token'>)</span>
  <span class='FacebookTemplate constant id'>FacebookTemplate</span><span class='dot token'>.</span><span class='clear_cache! fid id'>clear_cache!</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>method_missing</h3>
</div><div id="method_missing-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>method_missing</span><span class='args'>(name, *args)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 466</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L466">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='method_missing identifier id'>method_missing</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='should_send identifier id'>should_send</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='method identifier id'>method</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='if if kw'>if</span> <span class='md identifier id'>md</span> <span class='assign token'>=</span> <span class='regexp val'>/^create_(.*)$/</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
    <span class='method identifier id'>method</span> <span class='assign token'>=</span> <span class='md identifier id'>md</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
  <span class='elsif elsif kw'>elsif</span> <span class='md identifier id'>md</span> <span class='assign token'>=</span> <span class='regexp val'>/^deliver_(.*)$/</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
    <span class='method identifier id'>method</span> <span class='assign token'>=</span> <span class='md identifier id'>md</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
    <span class='should_send identifier id'>should_send</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>            
  <span class='elsif elsif kw'>elsif</span> <span class='md identifier id'>md</span> <span class='assign token'>=</span> <span class='regexp val'>/^register_(.*)$/</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
    <span class='return return kw'>return</span> <span class='FacebookTemplate constant id'>FacebookTemplate</span><span class='dot token'>.</span><span class='register identifier id'>register</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='md identifier id'>md</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='super super kw'>super</span>
  <span class='end end kw'>end</span>
      
  <span class='comment val'>#now create the item</span>
  <span class='lparen token'>(</span><span class='publisher identifier id'>publisher</span><span class='assign token'>=</span><span class='new identifier id'>new</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='publisher identifier id'>publisher</span><span class='dot token'>.</span><span class='_body identifier id'>_body</span>
  <span class='when when kw'>when</span> <span class='UserAction constant id'>UserAction</span>
    <span class='publisher identifier id'>publisher</span><span class='dot token'>.</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='template_name identifier id'>template_name</span> <span class='assign token'>=</span> <span class='method identifier id'>method</span>
    <span class='publisher identifier id'>publisher</span><span class='dot token'>.</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='template_id identifier id'>template_id</span> <span class='opasgn op'>||=</span> <span class='FacebookTemplate constant id'>FacebookTemplate</span><span class='dot token'>.</span><span class='bundle_id_for_class_and_method identifier id'>bundle_id_for_class_and_method</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='should_send identifier id'>should_send</span> <span class='integer val'>? </span><span class='publisher identifier id'>publisher</span><span class='dot token'>.</span><span class='send_message identifier id'>send_message</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='publisher identifier id'>publisher</span><span class='dot token'>.</span><span class='_body identifier id'>_body</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>register_all_templates</h3>
</div><div id="register_all_templates-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>register_all_templates</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 457</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L457">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">457
458
459
460
461
462
463
464</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='register_all_templates identifier id'>register_all_templates</span>
  <span class='all_templates identifier id'>all_templates</span> <span class='assign token'>=</span> <span class='instance_methods identifier id'>instance_methods</span><span class='dot token'>.</span><span class='grep identifier id'>grep</span><span class='lparen token'>(</span><span class='regexp val'>/_template$/</span><span class='rparen token'>)</span> <span class='minus op'>-</span> <span class='dstring node'>%w(short_story_template full_story_template one_line_story_template)</span> 
  <span class='all_templates identifier id'>all_templates</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='template identifier id'>template</span><span class='bitor op'>|</span>
    <span class='template_name identifier id'>template_name</span><span class='assign token'>=</span><span class='template identifier id'>template</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/_template$/</span><span class='comma token'>,</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;Registering #{template_name}&quot;</span>
    <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='string val'>&quot;register_&quot;</span><span class='plus op'>+</span><span class='template_name identifier id'>template_name</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>action_link</h3>
</div><div id="action_link-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>action_link</span><span class='args'>(text, target)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 339</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L339">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">339
340
341</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='action_link identifier id'>action_link</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span><span class='target identifier id'>target</span><span class='rparen token'>)</span>
  <span class='lbrace token'>{</span><span class='symbol val'>:text=</span><span class='gt op'>&gt;</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='symbol val'>:href=</span><span class='gt op'>&gt;</span><span class='target identifier id'>target</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>action_links</h3>
</div><div id="action_links-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>action_links</span><span class='args'>(*links)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 300</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L300">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">300
301
302
303
304
305
306</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='action_links identifier id'>action_links</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='links identifier id'>links</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='links identifier id'>links</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
    <span class='@action_links ivar id'>@action_links</span>
  <span class='else else kw'>else</span>
    <span class='@action_links ivar id'>@action_links</span> <span class='assign token'>=</span> <span class='links identifier id'>links</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>announcement_notification?</h3>
</div><div id="announcement_notification-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>announcement_notification?</span><span class='args'>(from, body)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 355</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L355">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">355
356
357</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='announcement_notification? fid id'>announcement_notification?</span><span class='lparen token'>(</span><span class='from identifier id'>from</span><span class='comma token'>,</span><span class='body identifier id'>body</span><span class='rparen token'>)</span>
  <span class='from identifier id'>from</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='and and kw'>and</span> <span class='body identifier id'>body</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Notification constant id'>Notification</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>from</h3>
</div><div id="from-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>from</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 250</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L250">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">250
251
252
253
254
255
256</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='from identifier id'>from</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='eq op'>==</span><span class='integer val'>0</span>
    <span class='@from ivar id'>@from</span>
  <span class='else else kw'>else</span>
    <span class='@from ivar id'>@from</span><span class='assign token'>=</span><span class='args identifier id'>args</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='end end kw'>end</span>        
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>full_story_template</h3>
</div><div id="full_story_template-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>full_story_template</span><span class='args'>(title = nil, body = nil, params = )</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 282</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L282">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">282
283
284
285
286
287
288</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='full_story_template identifier id'>full_story_template</span><span class='lparen token'>(</span><span class='title identifier id'>title</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span><span class='body identifier id'>body</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='semicolon token'>;</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='title identifier id'>title</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='@full_story_template ivar id'>@full_story_template</span>
  <span class='else else kw'>else</span>
    <span class='@full_story_template ivar id'>@full_story_template</span><span class='assign token'>=</span><span class='params identifier id'>params</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:template_title=</span><span class='gt op'>&gt;</span><span class='title identifier id'>title</span><span class='comma token'>,</span> <span class='symbol val'>:template_body=</span><span class='gt op'>&gt;</span><span class='body identifier id'>body</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>image</h3>
</div><div id="image-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>image</span><span class='args'>(src, target)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 335</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L335">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">335
336
337</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='image identifier id'>image</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='comma token'>,</span><span class='target identifier id'>target</span><span class='rparen token'>)</span>
  <span class='ImageHolder constant id'>ImageHolder</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='image_path identifier id'>image_path</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='rparen token'>)</span><span class='comma token'>,</span><span class='target identifier id'>target</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:to_str</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='target identifier id'>target</span> <span class='colon op'>:</span> <span class='url_for identifier id'>url_for</span><span class='lparen token'>(</span><span class='target identifier id'>target</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>initialize_template_class</h3>
</div><div id="initialize_template_class-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize_template_class</span><span class='args'>(assigns)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 408</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L408">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize_template_class identifier id'>initialize_template_class</span><span class='lparen token'>(</span><span class='assigns identifier id'>assigns</span><span class='rparen token'>)</span>
  <span class='template_root identifier id'>template_root</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{RAILS_ROOT}/app/views&quot;</span>
  <span class='controller_root identifier id'>controller_root</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='template_root identifier id'>template_root</span><span class='comma token'>,</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='controller_path identifier id'>controller_path</span><span class='rparen token'>)</span>
  <span class='comment val'>#only do this on Rails 2.1</span>
  <span class='if if kw'>if</span> <span class='ActionController constant id'>ActionController</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='colon op'>:</span><span class='append_view_path identifier id'>append_view_path</span><span class='rparen token'>)</span>
    <span class='comment val'># only add the view path once</span>
    <span class='unless unless kw'>unless</span> <span class='ActionController constant id'>ActionController</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='dot token'>.</span><span class='view_paths identifier id'>view_paths</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='controller_root identifier id'>controller_root</span><span class='rparen token'>)</span>
      <span class='ActionController constant id'>ActionController</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='dot token'>.</span><span class='append_view_path identifier id'>append_view_path</span><span class='lparen token'>(</span><span class='controller_root identifier id'>controller_root</span><span class='rparen token'>)</span> 
      <span class='ActionController constant id'>ActionController</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='dot token'>.</span><span class='append_view_path identifier id'>append_view_path</span><span class='lparen token'>(</span><span class='controller_root identifier id'>controller_root</span><span class='plus op'>+</span><span class='string val'>&quot;/..&quot;</span><span class='rparen token'>)</span> 
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='returning identifier id'>returning</span> <span class='ActionView constant id'>ActionView</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='template_root identifier id'>template_root</span><span class='comma token'>,</span><span class='controller_root identifier id'>controller_root</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='assigns identifier id'>assigns</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='template identifier id'>template</span><span class='bitor op'>|</span>
    <span class='template identifier id'>template</span><span class='dot token'>.</span><span class='controller identifier id'>controller</span><span class='assign token'>=</span><span class='self self kw'>self</span>
    <span class='template identifier id'>template</span><span class='dot token'>.</span><span class='extend identifier id'>extend</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='master_helper_module identifier id'>master_helper_module</span><span class='rparen token'>)</span>
    <span class='def def kw'>def</span> <span class='template identifier id'>template</span><span class='dot token'>.</span><span class='request_comes_from_facebook? fid id'>request_comes_from_facebook?</span>
      <span class='true true kw'>true</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>logger</h3>
</div><div id="logger-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>logger</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
nodoc needed for actionview
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 395</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L395">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">395
396
397</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='logger identifier id'>logger</span>
  <span class='RAILS_DEFAULT_LOGGER constant id'>RAILS_DEFAULT_LOGGER</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>one_line_story_template</h3>
</div><div id="one_line_story_template-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>one_line_story_template</span><span class='args'>(str)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 290</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L290">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">290
291
292
293</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='one_line_story_template identifier id'>one_line_story_template</span><span class='lparen token'>(</span><span class='str identifier id'>str</span><span class='rparen token'>)</span>
  <span class='@one_line_story_templates ivar id'>@one_line_story_templates</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@one_line_story_templates ivar id'>@one_line_story_templates</span> <span class='lshft op'>&lt;&lt;</span> <span class='str identifier id'>str</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>profile_update?</h3>
</div><div id="profile_update-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>profile_update?</span><span class='args'>(body)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 347</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L347">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">347
348
349</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='profile_update? fid id'>profile_update?</span><span class='lparen token'>(</span><span class='body identifier id'>body</span><span class='rparen token'>)</span>
  <span class='body identifier id'>body</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Profile constant id'>Profile</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>recipients</h3>
</div><div id="recipients-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>recipients</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 242</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L242">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">242
243
244
245
246
247
248</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='recipients identifier id'>recipients</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='eq op'>==</span><span class='integer val'>0</span>
    <span class='@recipients ivar id'>@recipients</span>
  <span class='else else kw'>else</span>
    <span class='@recipients ivar id'>@recipients</span><span class='assign token'>=</span><span class='args identifier id'>args</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>ref_update?</h3>
</div><div id="ref_update-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>ref_update?</span><span class='args'>(body)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 351</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L351">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">351
352
353</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='ref_update? fid id'>ref_update?</span><span class='lparen token'>(</span><span class='body identifier id'>body</span><span class='rparen token'>)</span>
  <span class='body identifier id'>body</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Ref constant id'>Ref</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>render</h3>
</div><div id="render-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>render</span><span class='args'>(opts)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
nodoc delegate to action view. Set up assigns and render
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 401</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L401">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">401
402
403
404
405</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='render identifier id'>render</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='rparen token'>)</span>
  <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='body identifier id'>body</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:assigns</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='initialize_template_class identifier id'>initialize_template_class</span><span class='lparen token'>(</span><span class='body identifier id'>body</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:controller=</span><span class='gt op'>&gt;</span><span class='self self kw'>self</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='render identifier id'>render</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>request_comes_from_facebook?</h3>
</div><div id="request_comes_from_facebook-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>request_comes_from_facebook?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
use facebook options everywhere
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 105</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L105">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">105
106
107</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='request_comes_from_facebook? fid id'>request_comes_from_facebook?</span>
  <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>requires_from_user?</h3>
</div><div id="requires_from_user-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>requires_from_user?</span><span class='args'>(from, body)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 343</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L343">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">343
344
345</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='requires_from_user? fid id'>requires_from_user?</span><span class='lparen token'>(</span><span class='from identifier id'>from</span><span class='comma token'>,</span><span class='body identifier id'>body</span><span class='rparen token'>)</span>
  <span class='notop op'>!</span> <span class='lparen token'>(</span><span class='announcement_notification? fid id'>announcement_notification?</span><span class='lparen token'>(</span><span class='from identifier id'>from</span><span class='comma token'>,</span><span class='body identifier id'>body</span><span class='rparen token'>)</span> <span class='or or kw'>or</span> <span class='ref_update? fid id'>ref_update?</span><span class='lparen token'>(</span><span class='body identifier id'>body</span><span class='rparen token'>)</span> <span class='or or kw'>or</span> <span class='profile_update? fid id'>profile_update?</span><span class='lparen token'>(</span><span class='body identifier id'>body</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>send_as</h3>
</div><div id="send_as-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>send_as</span><span class='args'>(option)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 259</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L259">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='send_as identifier id'>send_as</span><span class='lparen token'>(</span><span class='option identifier id'>option</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='_body identifier id'>_body</span><span class='assign token'>=</span><span class='case case kw'>case</span> <span class='option identifier id'>option</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:action</span>
    <span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='Feed constant id'>Feed</span><span class='colon2 op'>::</span><span class='Action constant id'>Action</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:story</span>
    <span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='Feed constant id'>Feed</span><span class='colon2 op'>::</span><span class='Story constant id'>Story</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:templatized_action</span>
    <span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='Feed constant id'>Feed</span><span class='colon2 op'>::</span><span class='TemplatizedAction constant id'>TemplatizedAction</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:notification</span>
    <span class='Notification constant id'>Notification</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:email</span>
    <span class='Email constant id'>Email</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:profile</span>
    <span class='Profile constant id'>Profile</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:ref</span>
    <span class='Ref constant id'>Ref</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='when when kw'>when</span> <span class='symbol val'>:user_action</span>
    <span class='UserAction constant id'>UserAction</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='UnknownBodyType constant id'>UnknownBodyType</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Unknown type to publish&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>send_message</h3>
</div><div id="send_message-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>send_message</span><span class='args'>(method)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Publisher/InvalidSender.html" title="InvalidSender">InvalidSender</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 359</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L359">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='send_message identifier id'>send_message</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
  <span class='@recipients ivar id'>@recipients</span> <span class='assign token'>=</span> <span class='@recipients ivar id'>@recipients</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='@recipients ivar id'>@recipients</span> <span class='colon op'>:</span> <span class='lbrack token'>[</span><span class='@recipients ivar id'>@recipients</span><span class='rbrack token'>]</span>
  <span class='if if kw'>if</span> <span class='from identifier id'>from</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='and and kw'>and</span> <span class='@recipients ivar id'>@recipients</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='eq op'>==</span><span class='integer val'>1</span> <span class='and and kw'>and</span> <span class='requires_from_user? fid id'>requires_from_user?</span><span class='lparen token'>(</span><span class='from identifier id'>from</span><span class='comma token'>,</span><span class='_body identifier id'>_body</span><span class='rparen token'>)</span>
    <span class='@from ivar id'>@from</span> <span class='assign token'>=</span> <span class='@recipients ivar id'>@recipients</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='end end kw'>end</span>
  <span class='comment val'># notifications can </span>
  <span class='comment val'># omit the from address</span>
  <span class='raise identifier id'>raise</span> <span class='InvalidSender constant id'>InvalidSender</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Sender must be a Facebooker::User&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='from identifier id'>from</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='User constant id'>User</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='notop op'>!</span><span class='requires_from_user? fid id'>requires_from_user?</span><span class='lparen token'>(</span><span class='from identifier id'>from</span><span class='comma token'>,</span><span class='_body identifier id'>_body</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='_body identifier id'>_body</span>
  <span class='when when kw'>when</span> <span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='Feed constant id'>Feed</span><span class='colon2 op'>::</span><span class='TemplatizedAction constant id'>TemplatizedAction</span><span class='comma token'>,</span><span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='Feed constant id'>Feed</span><span class='colon2 op'>::</span><span class='Action constant id'>Action</span>
    <span class='from identifier id'>from</span><span class='dot token'>.</span><span class='publish_action identifier id'>publish_action</span><span class='lparen token'>(</span><span class='_body identifier id'>_body</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='Feed constant id'>Feed</span><span class='colon2 op'>::</span><span class='Story constant id'>Story</span>
    <span class='@recipients ivar id'>@recipients</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='publish_story identifier id'>publish_story</span><span class='lparen token'>(</span><span class='_body identifier id'>_body</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
  <span class='when when kw'>when</span> <span class='Notification constant id'>Notification</span>
    <span class='lparen token'>(</span><span class='from identifier id'>from</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='integer val'>? </span><span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='Session constant id'>Session</span><span class='dot token'>.</span><span class='create identifier id'>create</span> <span class='colon op'>:</span> <span class='from identifier id'>from</span><span class='dot token'>.</span><span class='session identifier id'>session</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='send_notification identifier id'>send_notification</span><span class='lparen token'>(</span><span class='@recipients ivar id'>@recipients</span><span class='comma token'>,</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='fbml identifier id'>fbml</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='Email constant id'>Email</span>
    <span class='from identifier id'>from</span><span class='dot token'>.</span><span class='session identifier id'>session</span><span class='dot token'>.</span><span class='send_email identifier id'>send_email</span><span class='lparen token'>(</span><span class='@recipients ivar id'>@recipients</span><span class='comma token'>,</span> 
                                       <span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='title identifier id'>title</span><span class='comma token'>,</span> 
                                       <span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='text identifier id'>text</span><span class='comma token'>,</span> 
                                       <span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='fbml identifier id'>fbml</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='Profile constant id'>Profile</span>
   <span class='comment val'># If recipient and from aren't the same person, create a new user object using the</span>
   <span class='comment val'># userid from recipient and the session from from</span>
   <span class='@from ivar id'>@from</span> <span class='assign token'>=</span> <span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='User constant id'>User</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='User constant id'>User</span><span class='dot token'>.</span><span class='cast_to_facebook_id identifier id'>cast_to_facebook_id</span><span class='lparen token'>(</span><span class='@recipients ivar id'>@recipients</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rparen token'>)</span><span class='comma token'>,</span><span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='Session constant id'>Session</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='rparen token'>)</span> 
   <span class='@from ivar id'>@from</span><span class='dot token'>.</span><span class='set_profile_fbml identifier id'>set_profile_fbml</span><span class='lparen token'>(</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='profile identifier id'>profile</span><span class='comma token'>,</span> <span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='mobile_profile identifier id'>mobile_profile</span><span class='comma token'>,</span> <span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='profile_action identifier id'>profile_action</span><span class='comma token'>,</span> <span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='profile_main identifier id'>profile_main</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='Ref constant id'>Ref</span>
    <span class='Facebooker constant id'>Facebooker</span><span class='colon2 op'>::</span><span class='Session constant id'>Session</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='dot token'>.</span><span class='server_cache identifier id'>server_cache</span><span class='dot token'>.</span><span class='set_ref_handle identifier id'>set_ref_handle</span><span class='lparen token'>(</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='handle identifier id'>handle</span><span class='comma token'>,</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='fbml identifier id'>fbml</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='UserAction constant id'>UserAction</span>
    <span class='@from ivar id'>@from</span><span class='dot token'>.</span><span class='session identifier id'>session</span><span class='dot token'>.</span><span class='publish_user_action identifier id'>publish_user_action</span><span class='lparen token'>(</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='template_id identifier id'>template_id</span><span class='comma token'>,</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='data_hash identifier id'>data_hash</span><span class='comma token'>,</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='target_ids identifier id'>target_ids</span><span class='comma token'>,</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='body_general identifier id'>body_general</span><span class='comma token'>,</span><span class='_body identifier id'>_body</span><span class='dot token'>.</span><span class='story_size identifier id'>story_size</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='UnspecifiedBodyType constant id'>UnspecifiedBodyType</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;You must specify a valid send_as&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>short_story_template</h3>
</div><div id="short_story_template-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>short_story_template</span><span class='args'>(title, body, params = )</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/facebooker/rails/publisher.rb', line 295</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mmangino/facebooker/blob/c82b9b68dea1e76d84f7d0166173d4e57eae410b/lib/facebooker/rails/publisher.rb#L295">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">295
296
297
298</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='short_story_template identifier id'>short_story_template</span><span class='lparen token'>(</span><span class='title identifier id'>title</span><span class='comma token'>,</span><span class='body identifier id'>body</span><span class='comma token'>,</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='semicolon token'>;</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='@short_story_templates ivar id'>@short_story_templates</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@short_story_templates ivar id'>@short_story_templates</span> <span class='lshft op'>&lt;&lt;</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:template_title=</span><span class='gt op'>&gt;</span><span class='title identifier id'>title</span><span class='comma token'>,</span> <span class='symbol val'>:template_body=</span><span class='gt op'>&gt;</span><span class='body identifier id'>body</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>