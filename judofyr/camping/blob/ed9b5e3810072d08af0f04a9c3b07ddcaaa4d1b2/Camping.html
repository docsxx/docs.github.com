<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>judofyr's camping - Module: Camping - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/judofyr/commits/camping/master" rel="alternate" title="Recent Commits to camping:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("judofyr", "camping", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='judofyr/camping/blob/ed9b5e3810072d08af0f04a9c3b07ddcaaa4d1b2' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='judofyr/camping/blob/ed9b5e3810072d08af0f04a9c3b07ddcaaa4d1b2' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("judofyr", "camping", "ed9b5e3810072d08af0f04a9c3b07ddcaaa4d1b2", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/judofyr/camping/tree/">Source</a></li>
            <li class=""><a href="http://github.com/judofyr/camping/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/judofyr/camping/network">Network</a></li>            
            <li class=""><a href="http://github.com/judofyr/camping/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/judofyr/camping">Wiki</a></li>
            <li class=""><a href="http://github.com/judofyr/camping/graphs">Graphs</a></li>                    
            <li class="active"><a href="/judofyr/camping">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/judofyr">judofyr</a> / <b><a href="http://github.com/judofyr/camping/tree">camping</a></b>        
                <a id="namespaces_button" rel="judofyr/camping/blob/ed9b5e3810072d08af0f04a9c3b07ddcaaa4d1b2" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="judofyr/camping/blob/ed9b5e3810072d08af0f04a9c3b07ddcaaa4d1b2" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Camping">
  <h1>Module: Camping</h1>
  <div class="section docstring">
  <p>
TODO: Rack (for production). Overriding r404, r500 and r501.
</p>
<p>
Ready for developing with Camping? Just follow along and we&#8217;ll
explain everything in a few minutes. If there&#8217;s a specific thing
you&#8217;re wondering about, here are some guidelines of how Camping and
the documentation is organized:
</p>
<ul>
<li>All the modules are documentated with a little overview, followed by all
the methods defined there.

</li>
<li>Camping::Controllers explains all you need to know about taking care of the
request and returning a response.

</li>
<li>Camping::Models explains how you interact with the database, or other data
sources.

</li>
<li>Camping::Views explains how you can easily generate HTML from plain Ruby.

</li>
<li>Camping::Helpers is a module with useful helpers, both for the controllers
and the views.

</li>
<li>Camping::Base is a module which is included in all your controllers.

</li>
</ul>
<h2>Starting My First App</h2>
<p>
When you&#8217;re going to start a new app in Camping, you simply open your
favorite text editor and start writing:
</p>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'camping'</span>
  <span class='Camping constant id'>Camping</span><span class='dot token'>.</span><span class='goes identifier id'>goes</span> <span class='symbol val'>:Blog</span>

  <span class='module module kw'>module</span> <span class='Blog constant id'>Blog</span>
    <span class='comment val'># lots of code</span>
  <span class='end end kw'>end</span>
</pre>
<p>
What&#8217;s important to know, is that <tt>Camping.goes :Blog</tt> copies
the Camping-module into the Blog-module. So whenever you see Camping in
this documentation, you can replace it with Blog and everything should work
as expected.
</p>
<p>
By not modifying the Camping-module itself, you can have all your apps
running in the same process and have less moving parts. In fact, we
recommend splitting larger apps into several, smaller ones to make it more
manageable.
</p>
<h2>The Camping Server (for development)</h2>
<p>
Camping includes a pretty nifty server which is built for development. It
follows these rules:
</p>
<ul>
<li>Load all Camping apps in a directory or a file.

</li>
<li>Load new apps that appear in that directory or that file.

</li>
<li>Mount those apps according to their name. (e.g. Blog is mounted at /blog.)

</li>
<li>Run each app&#8217;s <tt>create</tt> method upon startup.

</li>
<li>Reload the app if its modification time changes.

</li>
<li>Reload the app if it requires any files under the same directory and one of
their modification times changes.

</li>
<li>Support the X-Sendfile header.

</li>
</ul>
<p>
Run it like this:
</p>
<pre class="code">
  <span class='camping identifier id'>camping</span> <span class='examples identifier id'>examples</span><span class='div op'>/</span>        <span class='comment val'># Mounts all apps in that directory</span>
  <span class='camping identifier id'>camping</span> <span class='blog identifier id'>blog</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>          <span class='comment val'># Mounts Blog at /</span>
</pre>
<p>
And visit http://localhost:3301/ in your browser. Ready for some
development?
</p>
<h2>MVC</h2>
<p>
Camping follows the MVC-pattern, which means you&#8217;ll separate your app
into three parts: Models, views and controllers. Let&#8217;s start with the
last:
</p>
<h3>Controllers</h3>
<pre class="code">
  <span class='module module kw'>module</span> <span class='Blog constant id'>Blog</span><span class='colon2 op'>::</span><span class='Controllers constant id'>Controllers</span>
    <span class='class class kw'>class</span> <span class='Index constant id'>Index</span>
      <span class='def def kw'>def</span> <span class='get identifier id'>get</span>
        <span class='@posts ivar id'>@posts</span> <span class='assign token'>=</span> <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='all identifier id'>all</span>
        <span class='render identifier id'>render</span> <span class='symbol val'>:index</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
The controllers are the heart of your app: They respond to a request from
the user, process it and return an appropriate response. Have a look at
Camping::Controllers in order to fully understand how controllers work and
how you should use them in Camping.
</p>
<h3>Models</h3>
<pre class="code">
  <span class='module module kw'>module</span> <span class='Blog constant id'>Blog</span><span class='colon2 op'>::</span><span class='Models constant id'>Models</span>
    <span class='class class kw'>class</span> <span class='Post constant id'>Post</span> <span class='lt op'>&lt;</span> <span class='Base constant id'>Base</span><span class='semicolon token'>;</span> <span class='belongs_to identifier id'>belongs_to</span> <span class='symbol val'>:user</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span>
    <span class='class class kw'>class</span> <span class='Comment constant id'>Comment</span> <span class='lt op'>&lt;</span> <span class='Base constant id'>Base</span><span class='semicolon token'>;</span> <span class='belongs_to identifier id'>belongs_to</span> <span class='symbol val'>:user</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span>
    <span class='class class kw'>class</span> <span class='User constant id'>User</span> <span class='lt op'>&lt;</span> <span class='Base constant id'>Base</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Most apps needs to handle <em>data</em> in some way: A blog needs a place
to save and retrieve posts and comments; a wiki needs to store the pages
somewhere. A <em>database</em> is (most of the time) a great place to save
such data. Camping uses (just like Rails) ActiveRecord to abstract the
boring details down to beautiful Ruby. Read Camping::Models to learn how to
use them in your app.
</p>
<h3>Views</h3>
<pre class="code">
  <span class='module module kw'>module</span> <span class='Blog constant id'>Blog</span><span class='colon2 op'>::</span><span class='Views constant id'>Views</span>
    <span class='def def kw'>def</span> <span class='layout identifier id'>layout</span>
      <span class='html identifier id'>html</span> <span class='do do kw'>do</span>
        <span class='head identifier id'>head</span> <span class='lbrace token'>{</span> <span class='title identifier id'>title</span> <span class='string val'>&quot;My Blog&quot;</span> <span class='rbrace token'>}</span>
        <span class='body identifier id'>body</span> <span class='do do kw'>do</span>
          <span class='h1 identifier id'>h1</span> <span class='string val'>&quot;My Blog&quot;</span>
          <span class='self self kw'>self</span> <span class='lshft op'>&lt;&lt;</span> <span class='yield yield kw'>yield</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='index identifier id'>index</span>
      <span class='@posts ivar id'>@posts</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='post identifier id'>post</span><span class='bitor op'>|</span>
        <span class='h2 identifier id'>h2</span> <span class='post identifier id'>post</span><span class='dot token'>.</span><span class='title identifier id'>title</span>
        <span class='self self kw'>self</span> <span class='lshft op'>&lt;&lt;</span> <span class='post identifier id'>post</span><span class='dot token'>.</span><span class='content identifier id'>content</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Since we&#8217;re on the web, we need to return the language which the web
speaks: HTML. Writing HTML manually can be tedious and boring. Camping uses
Markaby which lets you write HTML in Ruby - simple and elegant. As always,
read Camping::Views to get a overview of how to use views.
</p>
<h3>Helpers</h3>
<p>
I know, I know: Helpers don&#8217;t fit into the MVC-pattern. That
doesn&#8217;t mean they&#8217;re useless, though. Whenever you need a
snippet in several controllers or views, you should refactor it out to a
helper. Camping includes a sensible collection of helpers in
Camping::Helpers.
</p>
<h2>Tips &amp; Tricks</h2>
<h3>The <tt>create</tt> method</h3>
<p>
It&#8217;s a rule in Camping which says that the <tt>create</tt> method
should be called when the server starts up. The Camping Server does this,
and so should you in your environment.
</p>
<p>
This is a good place to check for database tables and create those tables
to save users of your application from needing to manually set them up.
</p>
<pre class="code">
  <span class='def def kw'>def</span> <span class='Blog constant id'>Blog</span><span class='dot token'>.</span><span class='create identifier id'>create</span>
    <span class='Blog constant id'>Blog</span><span class='colon2 op'>::</span><span class='Models constant id'>Models</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='dot token'>.</span><span class='establish_connection identifier id'>establish_connection</span><span class='lparen token'>(</span>
      <span class='symbol val'>:adapter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'sqlite3'</span><span class='comma token'>,</span>
      <span class='symbol val'>:database</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'blog.db'</span>
    <span class='rparen token'>)</span>
    <span class='Blog constant id'>Blog</span><span class='colon2 op'>::</span><span class='Models constant id'>Models</span><span class='dot token'>.</span><span class='create_schama identifier id'>create_schama</span>
  <span class='end end kw'>end</span>
</pre>
<h3>Service Override</h3>
<p>
Occassionally, you may want to intercept controller calls or do some
cleanup afterwards. Many other frameworks have before-, after- and
around-filters to do that. Camping has no facility for doing this.
It&#8217;s not worth the bytes.
</p>
<p>
Instead, you can override <tt>service</tt>, which handles all controller
calls. You can do include into specific controllers or right into the main
application module.
</p>
<pre class="code">
  <span class='module module kw'>module</span> <span class='MySession constant id'>MySession</span>
    <span class='def def kw'>def</span> <span class='service identifier id'>service</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='a identifier id'>a</span><span class='rparen token'>)</span>
      <span class='comment val'># Do stuff before</span>
      <span class='@session ivar id'>@session</span> <span class='assign token'>=</span> <span class='MyApp constant id'>MyApp</span><span class='colon2 op'>::</span><span class='Session constant id'>Session</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
      <span class='comment val'># Run regular controller</span>
      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='a identifier id'>a</span><span class='rparen token'>)</span>
    <span class='ensure ensure kw'>ensure</span>
      <span class='comment val'># Do stuff after</span>
      <span class='@session ivar id'>@session</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='module module kw'>module</span> <span class='MyApp constant id'>MyApp</span>
    <span class='include identifier id'>include</span> <span class='MySession constant id'>MySession</span>

    <span class='module module kw'>module</span> <span class='Controllers constant id'>Controllers</span>
      <span class='class class kw'>class</span> <span class='Index constant id'>Index</span>
        <span class='include identifier id'>include</span> <span class='OtherOverload constant id'>OtherOverload</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>

</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="Apps-constant">Apps</dt>
      <dd>[]</dd>
    
      <dt id="C-constant">C</dt>
      <dd>self</dd>
    
      <dt id="I-constant">I</dt>
      <dd>R()</dd>
    
      <dt id="P-constant">P</dt>
      <dd>&quot;&lt;h1&gt;Cam\ping Problem!&lt;/h1&gt;&lt;h2&gt;%s&lt;/h2&gt;&quot;</dd>
    
      <dt id="S-constant">S</dt>
      <dd>IO.read(__FILE__) rescue nil</dd>
    
      <dt id="U-constant">U</dt>
      <dd>Rack::Utils</dd>
    
  </dl>
</div>

</div>
</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>