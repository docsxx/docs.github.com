<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>ahoward's open4 - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/ahoward/commits/open4/master" rel="alternate" title="Recent Commits to open4:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("ahoward", "open4", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='ahoward/open4/blob/25c3ed8f6d85561ab0610d0f485670a3172e8453' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='ahoward/open4/blob/25c3ed8f6d85561ab0610d0f485670a3172e8453' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("ahoward", "open4", "25c3ed8f6d85561ab0610d0f485670a3172e8453", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/ahoward/open4/tree/">Source</a></li>
            <li class=""><a href="http://github.com/ahoward/open4/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/ahoward/open4/network">Network</a></li>            
            <li class=""><a href="http://github.com/ahoward/open4/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/ahoward/open4">Wiki</a></li>
            <li class=""><a href="http://github.com/ahoward/open4/graphs">Graphs</a></li>                    
            <li class="active"><a href="/ahoward/open4">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/ahoward">ahoward</a> / <b><a href="http://github.com/ahoward/open4/tree">open4</a></b>        
                <a id="namespaces_button" rel="ahoward/open4/blob/25c3ed8f6d85561ab0610d0f485670a3172e8453" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="ahoward/open4/blob/25c3ed8f6d85561ab0610d0f485670a3172e8453" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <p>
URIS
</p>
<pre class="code">
  <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/rubyforge.org/</span><span class='projects identifier id'>projects</span><span class='div op'>/</span><span class='codeforpeople identifier id'>codeforpeople</span><span class='div op'>/</span>
  <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/www.codeforpeople.com/</span><span class='lib identifier id'>lib</span><span class='div op'>/</span><span class='ruby identifier id'>ruby</span><span class='div op'>/</span>
</pre>
<p>
SYNOPSIS
</p>
<pre class="code">
  <span class='open identifier id'>open</span> <span class='child identifier id'>child</span> <span class='process identifier id'>process</span> <span class='with identifier id'>with</span> <span class='handles identifier id'>handles</span> <span class='on identifier id'>on</span> <span class='pid identifier id'>pid</span><span class='comma token'>,</span> <span class='stdin identifier id'>stdin</span><span class='comma token'>,</span> <span class='stdout identifier id'>stdout</span><span class='comma token'>,</span> <span class='and and kw'>and</span> <span class='stderr identifier id'>stderr</span><span class='colon op'>:</span> <span class='manage identifier id'>manage</span>
  <span class='child identifier id'>child</span> <span class='processes identifier id'>processes</span> <span class='and and kw'>and</span> <span class='their identifier id'>their</span> <span class='io identifier id'>io</span> <span class='handles identifier id'>handles</span> <span class='easily identifier id'>easily</span><span class='dot token'>.</span>
</pre>
<p>
INSTALL
</p>
<pre class="code">
  <span class='bitnot op'>~</span><span class='gt op'>&gt;</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='open4 identifier id'>open4</span>
</pre>
<p>
SAMPLES
</p>
<pre class="code">
  <span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span>
  <span class='simple identifier id'>simple</span> <span class='usage identifier id'>usage</span>
  <span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span>

    <span class='harp identifier id'>harp</span><span class='colon op'>:</span> <span class='gt op'>&gt;</span> <span class='cat identifier id'>cat</span> <span class='sample identifier id'>sample</span><span class='div op'>/</span><span class='simple identifier id'>simple</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
    <span class='require identifier id'>require</span> <span class='string val'>&quot;open4&quot;</span>

    <span class='pid identifier id'>pid</span><span class='comma token'>,</span> <span class='stdin identifier id'>stdin</span><span class='comma token'>,</span> <span class='stdout identifier id'>stdout</span><span class='comma token'>,</span> <span class='stderr identifier id'>stderr</span> <span class='assign token'>=</span> <span class='Open4 constant id'>Open4</span><span class='colon2 op'>::</span><span class='popen4 identifier id'>popen4</span> <span class='string val'>&quot;sh&quot;</span>

    <span class='stdin identifier id'>stdin</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;echo 42.out&quot;</span>
    <span class='stdin identifier id'>stdin</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;echo 42.err 1&gt;&amp;2&quot;</span>
    <span class='stdin identifier id'>stdin</span><span class='dot token'>.</span><span class='close identifier id'>close</span>

    <span class='ignored identifier id'>ignored</span><span class='comma token'>,</span> <span class='status identifier id'>status</span> <span class='assign token'>=</span> <span class='Process constant id'>Process</span><span class='colon2 op'>::</span><span class='waitpid2 identifier id'>waitpid2</span> <span class='pid identifier id'>pid</span>

    <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;pid        : #{ pid }&quot;</span>
    <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;stdout     : #{ stdout.read.strip }&quot;</span>
    <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;stderr     : #{ stderr.read.strip }&quot;</span>
    <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;status     : #{ status.inspect }&quot;</span>
    <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;exitstatus : #{ status.exitstatus }&quot;</span>

    <span class='harp identifier id'>harp</span><span class='colon op'>:</span> <span class='gt op'>&gt;</span> <span class='ruby identifier id'>ruby</span> <span class='sample identifier id'>sample</span><span class='div op'>/</span><span class='simple identifier id'>simple</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
    <span class='pid identifier id'>pid</span>        <span class='colon op'>:</span> <span class='integer val'>17273</span>
    <span class='stdout identifier id'>stdout</span>     <span class='colon op'>:</span> <span class='float val'>42</span><span class='dot token'>.</span><span class='out identifier id'>out</span>
    <span class='stderr identifier id'>stderr</span>     <span class='colon op'>:</span> <span class='float val'>42</span><span class='dot token'>.</span><span class='err identifier id'>err</span>
    <span class='status identifier id'>status</span>     <span class='colon op'>:</span> <span class='comment val'>#&lt;Process::Status: pid=17273,exited(0)&gt;</span>
    <span class='exitstatus identifier id'>exitstatus</span> <span class='colon op'>:</span> <span class='integer val'>0</span>

  <span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span>
  <span class='in in kw'>in</span> <span class='block identifier id'>block</span> <span class='form identifier id'>form</span> <span class='minus op'>-</span> <span class='the identifier id'>the</span> <span class='child identifier id'>child</span> <span class='process identifier id'>process</span> <span class='is identifier id'>is</span> <span class='automatically identifier id'>automatically</span> <span class='waited identifier id'>waited</span> <span class='for for kw'>for</span>
  <span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span>

    <span class='harp identifier id'>harp</span><span class='colon op'>:</span> <span class='gt op'>&gt;</span> <span class='cat identifier id'>cat</span> <span class='sample identifier id'>sample</span><span class='div op'>/</span><span class='block identifier id'>block</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
    <span class='require identifier id'>require</span> <span class='string val'>'open4'</span>

    <span class='status identifier id'>status</span> <span class='assign token'>=</span>
      <span class='Open4 constant id'>Open4</span><span class='colon2 op'>::</span><span class='popen4 identifier id'>popen4</span><span class='lparen token'>(</span><span class='string val'>&quot;sh&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='pid identifier id'>pid</span><span class='comma token'>,</span> <span class='stdin identifier id'>stdin</span><span class='comma token'>,</span> <span class='stdout identifier id'>stdout</span><span class='comma token'>,</span> <span class='stderr identifier id'>stderr</span><span class='bitor op'>|</span>
        <span class='stdin identifier id'>stdin</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;echo 42.out&quot;</span>
        <span class='stdin identifier id'>stdin</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;echo 42.err 1&gt;&amp;2&quot;</span>
        <span class='stdin identifier id'>stdin</span><span class='dot token'>.</span><span class='close identifier id'>close</span>

        <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;pid        : #{ pid }&quot;</span>
        <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;stdout     : #{ stdout.read.strip }&quot;</span>
        <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;stderr     : #{ stderr.read.strip }&quot;</span>
      <span class='end end kw'>end</span>

        <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;status     : #{ status.inspect }&quot;</span>
        <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;exitstatus : #{ status.exitstatus }&quot;</span>

    <span class='harp identifier id'>harp</span><span class='colon op'>:</span> <span class='gt op'>&gt;</span> <span class='ruby identifier id'>ruby</span> <span class='sample identifier id'>sample</span><span class='div op'>/</span><span class='block identifier id'>block</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
    <span class='pid identifier id'>pid</span>        <span class='colon op'>:</span> <span class='integer val'>17295</span>
    <span class='stdout identifier id'>stdout</span>     <span class='colon op'>:</span> <span class='float val'>42</span><span class='dot token'>.</span><span class='out identifier id'>out</span>
    <span class='stderr identifier id'>stderr</span>     <span class='colon op'>:</span> <span class='float val'>42</span><span class='dot token'>.</span><span class='err identifier id'>err</span>
    <span class='status identifier id'>status</span>     <span class='colon op'>:</span> <span class='comment val'>#&lt;Process::Status: pid=17295,exited(0)&gt;</span>
    <span class='exitstatus identifier id'>exitstatus</span> <span class='colon op'>:</span> <span class='integer val'>0</span>

  <span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span>
  <span class='exceptions identifier id'>exceptions</span> <span class='are identifier id'>are</span> <span class='marshaled identifier id'>marshaled</span> <span class='from identifier id'>from</span> <span class='child identifier id'>child</span> <span class='to identifier id'>to</span> <span class='parent identifier id'>parent</span> <span class='if if_mod kw'>if</span> <span class='fork identifier id'>fork</span><span class='div op'>/</span><span class='exec identifier id'>exec</span> <span class='fails identifier id'>fails</span>
  <span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span>

    <span class='harp identifier id'>harp</span><span class='colon op'>:</span> <span class='gt op'>&gt;</span> <span class='cat identifier id'>cat</span> <span class='sample identifier id'>sample</span><span class='div op'>/</span><span class='exception identifier id'>exception</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
    <span class='require identifier id'>require</span> <span class='string val'>&quot;open4&quot;</span>
    <span class='Open4 constant id'>Open4</span><span class='colon2 op'>::</span><span class='popen4 identifier id'>popen4</span> <span class='string val'>&quot;noexist&quot;</span>

    <span class='harp identifier id'>harp</span><span class='colon op'>:</span> <span class='gt op'>&gt;</span> <span class='ruby identifier id'>ruby</span> <span class='sample identifier id'>sample</span><span class='div op'>/</span><span class='exception identifier id'>exception</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
    <span class='regexp val'>/dmsp/</span><span class='reference identifier id'>reference</span><span class='div op'>/</span><span class='ruby identifier id'>ruby</span><span class='minus op'>-</span><span class='float val'>1.8</span><span class='integer val'>.1</span><span class='div op'>/</span><span class='regexp val'>/lib/</span><span class='ruby identifier id'>ruby</span><span class='div op'>/</span><span class='site_ruby identifier id'>site_ruby</span><span class='div op'>/</span><span class='open4 identifier id'>open4</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span><span class='symbol val'>:100</span><span class='symbol val'>:in</span> <span class='xstring val'>`popen4': No such file or directory - noexist (Errno::ENOENT)
            from sample/exception.rb:3

  ----------------------------------------------------------------------------
  the spawn method provides and even more convenient method of running a
  process, allowing any object that supports 'each', 'read', or 'to_s' to be
  given as stdin and any objects that support '&lt;&lt;' to be given as
  stdout/stderr.  an exception is thrown if the exec'd cmd fails (nonzero
  exitstatus) unless the option 'raise'=&gt;false is given
  ----------------------------------------------------------------------------

    harp: &gt; cat sample/spawn.rb
    require 'open4'
    include Open4

    cat = '  ruby -e&quot;  ARGF.each{|line| STDOUT &lt;&lt; line}  &quot;  '

    stdout, stderr = '', ''
    status = spawn cat, 'stdin' =&gt; '42', 'stdout' =&gt; stdout, 'stderr' =&gt; stderr
    p status
    p stdout
    p stderr

    stdout, stderr = '', ''
    status = spawn cat, 0=&gt;'42', 1=&gt;stdout, 2=&gt;stderr
    p status
    p stdout
    p stderr

    harp: &gt; RUBYLIB=lib ruby sample/spawn.rb
    0
    &quot;42&quot;
    &quot;&quot;
    0
    &quot;42&quot;
    &quot;&quot;

  ----------------------------------------------------------------------------
  the bg/background method is similar to spawn, but the process is
  automatically set running in a thread.  the returned thread has several
  methods added dynamically which return the pid and blocking calls to the
  exitstatus.
  ----------------------------------------------------------------------------

    harp: &gt; cat sample/bg.rb
    require 'yaml'
    require 'open4'
    include Open4

    stdin = '42'
    stdout = ''
    stderr = ''

    t = bg 'ruby -e&quot;sleep 4; puts ARGF.read&quot;', 0=&gt;stdin, 1=&gt;stdout, 2=&gt;stderr

    waiter = Thread.new{ y t.pid =&gt; t.exitstatus } # t.exitstatus is a blocking call!

    while((status = t.status))
      y &quot;status&quot; =&gt; status
      sleep 1
    end

    waiter.join

    y &quot;stdout&quot; =&gt; stdout

    harp: &gt; ruby sample/bg.rb
    ---
    status: run
    ---
    status: sleep
    ---
    status: sleep
    ---
    status: sleep
    ---
    21357: 0
    ---
    stdout: &quot;42\n&quot;

  ----------------------------------------------------------------------------
  the timeout methods can be used to ensure execution is preceding at the
  desired interval.  note also how to setup a 'pipeline'
  ----------------------------------------------------------------------------

    harp: &gt; cat sample/stdin_timeout.rb
    require 'open4'

    producer = 'ruby -e&quot; STDOUT.sync = true; loop{sleep(rand+rand) and puts 42} &quot;'

    consumer = 'ruby -e&quot; STDOUT.sync = true; STDIN.each{|line| puts line} &quot;'

    open4(producer) do |pid, i, o, e|

      open4.spawn consumer, :stdin=&gt;o, :stdout=&gt;STDOUT, :stdin_timeout =&gt; 1.4

    end

    harp: &gt; ruby sample/stdin_timeout.rb
    42
    42
    42
    42
    42
    /dmsp/reference/ruby-1.8.1//lib/ruby/1.8/timeout.rb:42:in `</span><span class='relay identifier id'>relay</span><span class='string val'>': execution expired (Timeout::Error)
</span></pre>
<p>
HISTORY
</p>
<pre class="code">
  <span class='float val'>1.0</span><span class='integer val'>.0</span>
    <span class='minus op'>-</span> <span class='added identifier id'>added</span> <span class='ability identifier id'>ability</span> <span class='for for kw'>for</span> <span class='spawn identifier id'>spawn</span> <span class='to identifier id'>to</span> <span class='take identifier id'>take</span> <span class='a identifier id'>a</span> <span class='proc identifier id'>proc</span> <span class='lparen token'>(</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:call</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

      <span class='cmd identifier id'>cmd</span> <span class='assign token'>=</span> <span class='string val'>' ruby -e&quot; 42.times{ puts 0b101010 } &quot; '</span>
      <span class='include identifier id'>include</span> <span class='Open4 constant id'>Open4</span>
      <span class='spawn identifier id'>spawn</span> <span class='cmd identifier id'>cmd</span><span class='comma token'>,</span> <span class='symbol val'>:stdout</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lambda identifier id'>lambda</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='buf identifier id'>buf</span><span class='bitor op'>|</span> <span class='puts identifier id'>puts</span> <span class='buf identifier id'>buf</span><span class='rbrace token'>}</span>

  <span class='integer val'>0</span><span class='float val'>.9.5</span><span class='colon op'>:</span>
    <span class='minus op'>-</span> <span class='another identifier id'>another</span> <span class='patch identifier id'>patch</span> <span class='from identifier id'>from</span> <span class='Corey constant id'>Corey</span> <span class='Jewett constant id'>Jewett</span><span class='comma token'>,</span> <span class='this identifier id'>this</span> <span class='time identifier id'>time</span> <span class='dealing identifier id'>dealing</span> <span class='with identifier id'>with</span> <span class='ruby identifier id'>ruby</span><span class='string val'>'s handling
      of chdir and threads.  basically the '</span><span class='cwd identifier id'>cwd</span><span class='string val'>' keyword to open4 cannot work
      with multiple threads (aka background) because ruby cannot cause green
      threads to have an actuall different working dir.  the moral is that the
      :cwd/'</span><span class='cwd identifier id'>cwd</span><span class='string val'>' keyword to spawn will work with 0 or 1 threads in effect.

  0.9.4:
    - patch to #background from Corey Jewett

  0.9.3:
    - removed some debugging output accidentally left in 0.9.2.  arggh!

  0.9.2:
    - fixed a descriptor leak.  thanks Andre Nathan.

  0.9.1:
    - fixed warning with '</span><span class='minus op'>-</span><span class='w identifier id'>w</span><span class='string val'>' : @cid not initialized.  thanks blaise tarr.

  0.9.0:
    - added the ability for open4.spawn to take either an array of arguments
      or multiple arguments in order to specify the argv for the command run.
      for example

        open4.spawn ['</span><span class='touch identifier id'>touch</span><span class='string val'>', '</span><span class='difficult identifier id'>difficult</span> <span class='to identifier id'>to</span> <span class='string val'>&quot;quote&quot;</span><span class='string val'>'], :stdout=&gt;STDOUT

      same thing

        open4.spawn '</span><span class='touch identifier id'>touch</span><span class='string val'>', '</span><span class='difficult identifier id'>difficult</span> <span class='to identifier id'>to</span> <span class='string val'>&quot;quote&quot;</span><span class='string val'>', :stdout=&gt;STDOUT

      thanks to jordan breeding for this suggestion

    - added '</span><span class='cwd identifier id'>cwd</span><span class='string val'>'/:cwd keyword.  usage is pretty obivous

        open4.spawn '</span><span class='pwd identifier id'>pwd</span><span class='string val'>', 1=&gt;STDOUT, :cwd=&gt;'</span><span class='div op'>/</span><span class='tmp identifier id'>tmp</span><span class='string val'>'   #=&gt; /tmp

      this one also from jordan

  0.8.0:

    - fixed a critical bug whereby a process producing tons of stdout, but for
      which the stdout was not handled, would cause the child process to
      become blocked/hung writing to the pipe.  eg, this command would cause a
      hang

        include Open4

        spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span><span class='string val'>&quot;  puts Array.new(65536){ 42 }  &quot;</span><span class='string val'>'

      whereas this one would not

        include Open4

        spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span><span class='string val'>&quot;  puts Array.new(65536){ 42 }  &quot;</span><span class='string val'>', :stdout=&gt;StringIO.new

      this version handles the former by spawning a '</span><span class='null identifier id'>null</span><span class='string val'>' thread which reads,
      but does not process stdout/stderr.  that way commands which generate
      tons of output will never become blocked.

  0.7.0:
    - merged functionality of exitstatus/status keywords:

        include Open4

        spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span> <span class='string val'>&quot;exit 42&quot;</span><span class='string val'>'                 # raises
        spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span> <span class='string val'>&quot;exit 42&quot;</span><span class='string val'>', :status=&gt;true  # ok, returns status
        spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span> <span class='string val'>&quot;exit 42&quot;</span><span class='string val'>', :status=&gt;42    # raises if status != 42
        spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span> <span class='string val'>&quot;exit 42&quot;</span><span class='string val'>', :status=&gt;0,42  # raises if status != 0||42

    - the 0.6.0 was broken on rubyforge... this release fixes that (somehow!?)

  0.6.0:
    - added feature for exitstatus to be list of acceptable exit statuses

        Open4.spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span> <span class='string val'>&quot;exit 42&quot;</span><span class='string val'>'                      # raises
        Open4.spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span> <span class='string val'>&quot;exit 42&quot;</span><span class='string val'>', :exitstatus=&gt;[0,42] # ok

    - added :status switch, which will always simply return the status (no
      error thrown for failure)

        Open4.spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span> <span class='string val'>&quot;exit 42&quot;</span><span class='string val'>'                          # raises
        status = Open4.spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span> <span class='string val'>&quot;exit 42&quot;</span><span class='string val'>', :status=&gt;true  # ok

      note, however, that any SpawnError does in fact contain the failed
      status so, even when they are thrown, error status can be retrieved:

        include Open4

        status =
          begin
            spawn '</span><span class='ruby identifier id'>ruby</span> <span class='minus op'>-</span><span class='e identifier id'>e</span> <span class='string val'>&quot;exit 42&quot;</span><span class='string val'>'
          rescue SpawnError =&gt; e
            warn{ e }
            e.status
          end

  0.5.1:
    - fixes a __critical__ but in ThreadEnsemble class that had a race
      condition that could cause thread deadlock.  sorry bout that folks.

  0.5.0:
    - on the suggestion of tim pease (thanks tim!), i added timeout features
      to open4.  the command run may have an overall timeout and individual
      timeouts set for each of the io handles.  for example

        cmd = '</span><span class='command_that_produce_out_at_one_second_intervals identifier id'>command_that_produce_out_at_one_second_intervals</span><span class='string val'>'

        open4.spawn cmd, :stdout_timeout =&gt; 2

      or

        cmd = '</span><span class='command_that_should_complete_in_about_one_minute identifier id'>command_that_should_complete_in_about_one_minute</span><span class='string val'>'

        open4.spawn cmd, :timeout =&gt; 60

      or

        cmd = '</span><span class='consumes_input_at_one_line_per_second_rate identifier id'>consumes_input_at_one_line_per_second_rate</span><span class='string val'>'

        input = %w( 42 forty-two 42.0 )

        open4.spawn cmd, :stdin=&gt;input, :stdin_timeout=&gt;1

    - added '</span><span class='open4 identifier id'>open4</span><span class='string val'>' alias so one can write

        open4.spawn  vs Open4.spawn

      or even

        open4(cmd) do |pid,i,o,e|
        end

    - added signal info to SpawnError

  0.4.0:
    - improved error handling contributed by jordan breeding.
    - introduction of background/bg method

  0.3.0 :
    - bug fix from jordan breeding.  general clean up.  added spawn method.

  0.2.0 :
    - added exception marshaled from child -&gt; parent when exec fails.  thanks
      to jordan breeding for a patch (yay!) and paul brannan for this most
      excellent idea.

  0.1.0 :
    - fixed docs to correctly show return value of popen4 (pid first not last).
      thanks Stefanie Tellex &lt;stefie10@alum.mit.edu&gt; for catching this.
  0.0.0 :
    - initial version
</span></pre>
<p>
AUTHOR
</p>
<pre class="code">
  <span class='ara identifier id'>ara</span><span class='dot token'>.</span><span class='t identifier id'>t</span><span class='dot token'>.</span><span class='howard identifier id'>howard</span><span class='@gmail ivar id'>@gmail</span><span class='dot token'>.</span><span class='com identifier id'>com</span>
</pre>
<p>
LICENSE
</p>
<pre class="code">
  <span class='ruby identifier id'>ruby</span><span class='string val'>'s
</span></pre>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>