<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>ddfreyne's nanoc - Class: Nanoc::DataSources::FilesystemCombined - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/ddfreyne/commits/nanoc/master" rel="alternate" title="Recent Commits to nanoc:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("ddfreyne", "nanoc", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("ddfreyne", "nanoc", "1751d2739431a6113a296f90fa4cd4863d610d12", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/ddfreyne/nanoc/tree/">Source</a></li>
            <li class=""><a href="http://github.com/ddfreyne/nanoc/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/ddfreyne/nanoc/network">Network</a></li>            
            <li class=""><a href="http://github.com/ddfreyne/nanoc/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/ddfreyne/nanoc">Wiki</a></li>
            <li class=""><a href="http://github.com/ddfreyne/nanoc/graphs">Graphs</a></li>                    
            <li class="active"><a href="/ddfreyne/nanoc">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/ddfreyne">ddfreyne</a> / <b><a href="http://github.com/ddfreyne/nanoc/tree">nanoc</a></b>        
                <a id="namespaces_button" rel="ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Nanoc_DataSources_FilesystemCombined">
  <h1>Class: Nanoc::DataSources::FilesystemCombined</h1>
  <div class="section inheritance">
  <ul>
  <li><a href="../Plugin.html" title="Nanoc::Plugin">Nanoc::Plugin</a></li><ul><li><a href="../DataSource.html" title="Nanoc::DataSource">Nanoc::DataSource</a></li><ul><li>Nanoc::DataSources::FilesystemCombined</li>
  </ul></ul></ul>
</div><div class="section docstring">
  <h1>Pages</h1>
<p>
The filesystem data source stores its pages in nested directories. A page
is represented by a single file. The root directory is the
&#8216;content&#8217; directory.
</p>
<p>
The metadata for a page is embedded into the file itself. It is stored at
the top of the file, between &#8217;----&#8217; (five dashes)
separators. For example:
</p>
<pre class="code">
  <span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span>
  <span class='filters_pre identifier id'>filters_pre</span><span class='colon op'>:</span> <span class='lbrack token'>[</span> <span class='string val'>'redcloth'</span> <span class='rbrack token'>]</span>
  <span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span>
  <span class='h1 identifier id'>h1</span><span class='dot token'>.</span> <span class='Hello! constant id'>Hello!</span>
</pre>
<p>
The path of a page is determined as follows. A file with an
&#8216;index.*&#8217; filename, such as &#8216;index.txt&#8217;, will have
the filesystem path with the &#8216;index.*&#8217; part stripped as a path.
For example, &#8216;foo/bar/index.html&#8217; will have
&#8217;/foo/bar/&#8217; as path.
</p>
<p>
A file with a filename not starting with &#8216;index.&#8217;, such as
&#8216;foo.html&#8217;, will have a path ending in &#8216;foo/&#8217;. For
example, &#8216;foo/bar.html&#8217; will have &#8217;/foo/bar/&#8217; as
path.
</p>
<p>
Note that it is possible for two different, separate files to have the same
path. It is therefore recommended to avoid such situations.
</p>
<p>
Some more examples:
</p>
<pre class="code">
  <span class='content identifier id'>content</span><span class='div op'>/</span><span class='index identifier id'>index</span><span class='dot token'>.</span><span class='html identifier id'>html</span>          <span class='minus op'>-</span><span class='minus op'>-</span><span class='gt op'>&gt;</span> <span class='regexp val'>/
  content/</span><span class='foo identifier id'>foo</span><span class='dot token'>.</span><span class='html identifier id'>html</span>            <span class='minus op'>-</span><span class='minus op'>-</span><span class='gt op'>&gt;</span> <span class='regexp val'>/foo/</span>
  <span class='content identifier id'>content</span><span class='div op'>/</span><span class='foo identifier id'>foo</span><span class='div op'>/</span><span class='index identifier id'>index</span><span class='dot token'>.</span><span class='html identifier id'>html</span>      <span class='minus op'>-</span><span class='minus op'>-</span><span class='gt op'>&gt;</span> <span class='regexp val'>/foo/</span>
  <span class='content identifier id'>content</span><span class='div op'>/</span><span class='foo identifier id'>foo</span><span class='div op'>/</span><span class='bar identifier id'>bar</span><span class='dot token'>.</span><span class='html identifier id'>html</span>        <span class='minus op'>-</span><span class='minus op'>-</span><span class='gt op'>&gt;</span> <span class='regexp val'>/foo/</span><span class='bar identifier id'>bar</span><span class='div op'>/</span>
  <span class='content identifier id'>content</span><span class='div op'>/</span><span class='foo identifier id'>foo</span><span class='div op'>/</span><span class='bar identifier id'>bar</span><span class='div op'>/</span><span class='index identifier id'>index</span><span class='dot token'>.</span><span class='html identifier id'>html</span>  <span class='minus op'>-</span><span class='minus op'>-</span><span class='gt op'>&gt;</span> <span class='regexp val'>/foo/</span><span class='bar identifier id'>bar</span><span class='div op'>/</span>
</pre>
<p>
File extensions are ignored by nanoc. The file extension does not determine
the filters to run on it; the metadata in the file defines the list of
filters.
</p>
<h1>Page defaults</h1>
<p>
The page defaults are loaded from a YAML-formatted file named
&#8216;page_defaults.yaml&#8217; at the top level of the nanoc site
directory. For backward compatibility, the file can also be named
&#8216;meta.yaml&#8217;.
</p>
<h1>Assets</h1>
<p>
Assets are stored in a way similar to pages. The attributes are merged into
the asset. This does mean, however, that only textual assets are supported,
as there is no way to embed attributes in binary assets.
</p>
<h1>Asset defaults</h1>
<p>
The asset defaults are stored similar to the way page defaults are stored,
except that the asset defaults file is named
&#8216;asset_defaults.yaml&#8217; instead.
</p>
<h1>Layouts</h1>
<p>
Layouts are stored as files in the &#8216;layouts&#8217; directory. Similar
to pages, each layout consists of a metadata part and a content part,
separated by &#8217;----&#8217;.
</p>
<h1>Templates</h1>
<p>
Templates are located in the &#8216;templates&#8217; directory. Templates
are, just like pages, files consisting of a metadata part and a content
part, separated by &#8217;----&#8217;.
</p>
<h1>Code</h1>
<p>
Code is stored in &#8217;.rb&#8217; files in the &#8216;lib&#8217;
directory. Code can reside in sub-directories.
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">vcs</td>
          <td class="readwrite">
            [R<span id='vcs%3D-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
VCSes ##########.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="ASSET_DEFAULTS_FILENAME-constant">ASSET_DEFAULTS_FILENAME</dt>
      <dd>'asset_defaults.yaml'</dd>
    
      <dt id="PAGE_DEFAULTS_FILENAME-constant">PAGE_DEFAULTS_FILENAME</dt>
      <dd>'page_defaults.yaml'</dd>
    
      <dt id="PAGE_DEFAULTS_FILENAME_OLD-constant">PAGE_DEFAULTS_FILENAME_OLD</dt>
      <dd>'meta.yaml'</dd>
    
  </dl>
</div>
<div class="inherited">
  
  <div>
    <h2>Constants Inherited from <a href="../Plugin.html" title="Nanoc::Plugin">Nanoc::Plugin</a></h2>
    <p><span class='name'><a href="../Plugin.html#MAP-constant" title="MAP">MAP</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
</div><div class="section constructor">
<h2>Constructor</h2>
  <p class="inherited_msg">
    This class inherits a constructor from <a href="../DataSource.html#initialize-instance_method" title="Nanoc::DataSource">Nanoc::DataSource</a>.
  </p>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <div class="inherited">
  
  <div>
    <h2>Public Class Methods Inherited from <a href="../Plugin.html" title="Nanoc::Plugin">Nanoc::Plugin</a></h2>
    <p><span class='name'><a href="../Plugin.html#identifier-class_method" title="identifier">identifier</a></span>, <span class='name'><a href="../Plugin.html#identifiers-class_method" title="identifiers">identifiers</a></span>, <span class='name'><a href="../Plugin.html#named-class_method" title="named">named</a></span>, <span class='name'><a href="../Plugin.html#register-class_method" title="register">register</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#asset_defaults-instance_method">#asset_defaults</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Asset defaults ##########.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#assets-instance_method">#assets</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Assets ##########.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#code-instance_method">#code</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Code ##########.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete_asset-instance_method">#delete_asset</span><span class='args'>(asset)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete_layout-instance_method">#delete_layout</span><span class='args'>(layout)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete_page-instance_method">#delete_page</span><span class='args'>(page)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete_template-instance_method">#delete_template</span><span class='args'>(template)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#destroy-instance_method">#destroy</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#down-instance_method">#down</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#layouts-instance_method">#layouts</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Layouts ##########.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#move_asset-instance_method">#move_asset</span><span class='args'>(asset, new_path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#move_layout-instance_method">#move_layout</span><span class='args'>(layout, new_path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#move_page-instance_method">#move_page</span><span class='args'>(page, new_path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#move_template-instance_method">#move_template</span><span class='args'>(template, new_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#page_defaults-instance_method">#page_defaults</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Page Defaults ##########.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#pages-instance_method">#pages</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Pages ##########.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_asset-instance_method">#save_asset</span><span class='args'>(asset)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_asset_defaults-instance_method">#save_asset_defaults</span><span class='args'>(asset_defaults)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_code-instance_method">#save_code</span><span class='args'>(code)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_layout-instance_method">#save_layout</span><span class='args'>(layout)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_page-instance_method">#save_page</span><span class='args'>(page)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_page_defaults-instance_method">#save_page_defaults</span><span class='args'>(page_defaults)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_template-instance_method">#save_template</span><span class='args'>(template)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#setup-instance_method">#setup</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#templates-instance_method">#templates</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Templates ##########.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#up-instance_method">#up</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Preparation ##########.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#vcs-instance_method">#vcs</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
VCSes ##########..
</p>

        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h2>Public Instance Methods Inherited from <a href="../DataSource.html" title="Nanoc::DataSource">Nanoc::DataSource</a></h2>
    <p><span class='name'><a href="../DataSource.html#loading-instance_method" title="loading">loading</a></span>, <span class='name'><a href="../DataSource.html#update-instance_method" title="update">update</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>asset_defaults</h3>
</div><div id="asset_defaults-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>asset_defaults</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Asset defaults ##########
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 278</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L278">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">278
279
280
281
282
283
284
285
286
287
288
289
290
291</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='asset_defaults identifier id'>asset_defaults</span> 
  <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='ASSET_DEFAULTS_FILENAME constant id'>ASSET_DEFAULTS_FILENAME</span><span class='rparen token'>)</span>
    <span class='comment val'># Get attributes</span>
    <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='YAML constant id'>YAML</span><span class='dot token'>.</span><span class='load_file identifier id'>load_file</span><span class='lparen token'>(</span><span class='ASSET_DEFAULTS_FILENAME constant id'>ASSET_DEFAULTS_FILENAME</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

    <span class='comment val'># Get mtime</span>
    <span class='mtime identifier id'>mtime</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='stat identifier id'>stat</span><span class='lparen token'>(</span><span class='ASSET_DEFAULTS_FILENAME constant id'>ASSET_DEFAULTS_FILENAME</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span>

    <span class='comment val'># Build asset defaults</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='AssetDefaults constant id'>AssetDefaults</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='comma token'>,</span> <span class='mtime identifier id'>mtime</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='AssetDefaults constant id'>AssetDefaults</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>assets</h3>
</div><div id="assets-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>assets</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Assets ##########
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 199</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L199">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='assets identifier id'>assets</span> 
  <span class='files identifier id'>files</span><span class='lparen token'>(</span><span class='string val'>'assets'</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='filename identifier id'>filename</span><span class='bitor op'>|</span>
    <span class='comment val'># Read and parse data</span>
    <span class='meta identifier id'>meta</span><span class='comma token'>,</span> <span class='content identifier id'>content</span> <span class='assign token'>=</span> <span class='mult op'>*</span><span class='parse_file identifier id'>parse_file</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='string val'>'asset'</span><span class='rparen token'>)</span>

    <span class='comment val'># Skip drafts</span>
    <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='meta identifier id'>meta</span><span class='lbrack token'>[</span><span class='symbol val'>:is_draft</span><span class='rbrack token'>]</span>

    <span class='comment val'># Get attributes</span>
    <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='string val'>'extension'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='extname identifier id'>extname</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='float val'>1</span><span class='dot2 op'>..</span><span class='integer val'>-1</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='meta identifier id'>meta</span><span class='rparen token'>)</span>

    <span class='comment val'># Get actual path</span>
    <span class='if if kw'>if</span> <span class='filename identifier id'>filename</span> <span class='match op'>=~</span> <span class='regexp val'>/\/index\.[^\/]+$/</span>
      <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='filename identifier id'>filename</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^assets/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/index\.[^\/]+$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>'/'</span>
    <span class='else else kw'>else</span>
      <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='filename identifier id'>filename</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^assets/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\.[^\/]+$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>'/'</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Get mtime</span>
    <span class='mtime identifier id'>mtime</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='stat identifier id'>stat</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span>

    <span class='comment val'># Build asset</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='Asset constant id'>Asset</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='StringIO constant id'>StringIO</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='content identifier id'>content</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='mtime identifier id'>mtime</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>code</h3>
</div><div id="code-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>code</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Code ##########
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 425</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L425">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">425
426
427
428
429
430
431
432
433
434</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='code identifier id'>code</span> 
  <span class='comment val'># Get data</span>
  <span class='data identifier id'>data</span> <span class='assign token'>=</span> <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='string val'>'lib/**/*.rb'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='filename identifier id'>filename</span><span class='bitor op'>|</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>&quot;\n&quot;</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>''</span><span class='rparen token'>)</span>

  <span class='comment val'># Get modification time</span>
  <span class='mtime identifier id'>mtime</span> <span class='assign token'>=</span> <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='string val'>'lib/**/*.rb'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='filename identifier id'>filename</span><span class='bitor op'>|</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='stat identifier id'>stat</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='inject identifier id'>inject</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='memo identifier id'>memo</span><span class='comma token'>,</span> <span class='mtime identifier id'>mtime</span><span class='bitor op'>|</span> <span class='memo identifier id'>memo</span> <span class='gt op'>&gt;</span> <span class='mtime identifier id'>mtime</span> <span class='integer val'>? </span><span class='mtime identifier id'>mtime</span> <span class='colon op'>:</span> <span class='memo identifier id'>memo</span><span class='rbrace token'>}</span>

  <span class='comment val'># Build code</span>
  <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='Code constant id'>Code</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='data identifier id'>data</span><span class='comma token'>,</span> <span class='mtime identifier id'>mtime</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete_asset</h3>
</div><div id="delete_asset-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete_asset</span><span class='args'>(asset)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 233</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L233">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">233
234
235</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete_asset identifier id'>delete_asset</span><span class='lparen token'>(</span><span class='asset identifier id'>asset</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># TODO implement</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete_layout</h3>
</div><div id="delete_layout-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete_layout</span><span class='args'>(layout)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 369</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L369">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">369
370
371</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete_layout identifier id'>delete_layout</span><span class='lparen token'>(</span><span class='layout identifier id'>layout</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># TODO implement</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete_page</h3>
</div><div id="delete_page-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete_page</span><span class='args'>(page)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 193</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L193">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">193
194
195</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete_page identifier id'>delete_page</span><span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># TODO implement</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete_template</h3>
</div><div id="delete_template-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete_template</span><span class='args'>(template)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 419</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L419">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">419
420
421</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete_template identifier id'>delete_template</span><span class='lparen token'>(</span><span class='template identifier id'>template</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># TODO implement</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>destroy</h3>
</div><div id="destroy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>destroy</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 110</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L110">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">110
111
112
113
114
115
116
117
118
119
120
121
122</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='destroy identifier id'>destroy</span> 
  <span class='comment val'># Remove files</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='ASSET_DEFAULTS_FILENAME constant id'>ASSET_DEFAULTS_FILENAME</span><span class='rparen token'>)</span>    <span class='if if_mod kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='ASSET_DEFAULTS_FILENAME constant id'>ASSET_DEFAULTS_FILENAME</span><span class='rparen token'>)</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='PAGE_DEFAULTS_FILENAME constant id'>PAGE_DEFAULTS_FILENAME</span><span class='rparen token'>)</span>     <span class='if if_mod kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='PAGE_DEFAULTS_FILENAME constant id'>PAGE_DEFAULTS_FILENAME</span><span class='rparen token'>)</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='PAGE_DEFAULTS_FILENAME_OLD constant id'>PAGE_DEFAULTS_FILENAME_OLD</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='PAGE_DEFAULTS_FILENAME_OLD constant id'>PAGE_DEFAULTS_FILENAME_OLD</span><span class='rparen token'>)</span>

  <span class='comment val'># Remove directories</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='string val'>'assets'</span><span class='rparen token'>)</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='string val'>'content'</span><span class='rparen token'>)</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='string val'>'templates'</span><span class='rparen token'>)</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='string val'>'layouts'</span><span class='rparen token'>)</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='string val'>'lib'</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>down</h3>
</div><div id="down-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>down</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 99</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L99">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">99
100</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='down identifier id'>down</span> 
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>layouts</h3>
</div><div id="layouts-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>layouts</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Layouts ##########
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 314</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L314">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='layouts identifier id'>layouts</span> 
  <span class='files identifier id'>files</span><span class='lparen token'>(</span><span class='string val'>'layouts'</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='filename identifier id'>filename</span><span class='bitor op'>|</span>
    <span class='comment val'># Read and parse data</span>
    <span class='meta identifier id'>meta</span><span class='comma token'>,</span> <span class='content identifier id'>content</span> <span class='assign token'>=</span> <span class='mult op'>*</span><span class='parse_file identifier id'>parse_file</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='string val'>'layout'</span><span class='rparen token'>)</span>

    <span class='comment val'># Get actual path</span>
    <span class='if if kw'>if</span> <span class='filename identifier id'>filename</span> <span class='match op'>=~</span> <span class='regexp val'>/\/index\.[^\/]+$/</span>
      <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='filename identifier id'>filename</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^layouts/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/index\.[^\/]+$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>'/'</span>
    <span class='else else kw'>else</span>
      <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='filename identifier id'>filename</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^layouts/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\.[^\/]+$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>'/'</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Get mtime</span>
    <span class='mtime identifier id'>mtime</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='stat identifier id'>stat</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span>

    <span class='comment val'># Build layout</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='Layout constant id'>Layout</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='content identifier id'>content</span><span class='comma token'>,</span> <span class='meta identifier id'>meta</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='mtime identifier id'>mtime</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>move_asset</h3>
</div><div id="move_asset-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>move_asset</span><span class='args'>(asset, new_path)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 229</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L229">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">229
230
231</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='move_asset identifier id'>move_asset</span><span class='lparen token'>(</span><span class='asset identifier id'>asset</span><span class='comma token'>,</span> <span class='new_path identifier id'>new_path</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># TODO implement</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>move_layout</h3>
</div><div id="move_layout-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>move_layout</span><span class='args'>(layout, new_path)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 365</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L365">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">365
366
367</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='move_layout identifier id'>move_layout</span><span class='lparen token'>(</span><span class='layout identifier id'>layout</span><span class='comma token'>,</span> <span class='new_path identifier id'>new_path</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># TODO implement</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>move_page</h3>
</div><div id="move_page-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>move_page</span><span class='args'>(page, new_path)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 189</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L189">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">189
190
191</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='move_page identifier id'>move_page</span><span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='comma token'>,</span> <span class='new_path identifier id'>new_path</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># TODO implement</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>move_template</h3>
</div><div id="move_template-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>move_template</span><span class='args'>(template, new_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 415</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L415">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">415
416
417</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='move_template identifier id'>move_template</span><span class='lparen token'>(</span><span class='template identifier id'>template</span><span class='comma token'>,</span> <span class='new_name identifier id'>new_name</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># TODO implement</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>page_defaults</h3>
</div><div id="page_defaults-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>page_defaults</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Page Defaults ##########
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 239</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L239">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">239
240
241
242
243
244
245
246
247
248
249</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='page_defaults identifier id'>page_defaults</span> 
  <span class='comment val'># Get attributes</span>
  <span class='filename identifier id'>filename</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='PAGE_DEFAULTS_FILENAME constant id'>PAGE_DEFAULTS_FILENAME</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='PAGE_DEFAULTS_FILENAME constant id'>PAGE_DEFAULTS_FILENAME</span> <span class='colon op'>:</span> <span class='PAGE_DEFAULTS_FILENAME_OLD constant id'>PAGE_DEFAULTS_FILENAME_OLD</span>
  <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='YAML constant id'>YAML</span><span class='dot token'>.</span><span class='load_file identifier id'>load_file</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

  <span class='comment val'># Get mtime</span>
  <span class='mtime identifier id'>mtime</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='stat identifier id'>stat</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span>

  <span class='comment val'># Build page defaults</span>
  <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='PageDefaults constant id'>PageDefaults</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='comma token'>,</span> <span class='mtime identifier id'>mtime</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>pages</h3>
</div><div id="pages-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>pages</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Pages ##########
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 126</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L126">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='pages identifier id'>pages</span> 
  <span class='files identifier id'>files</span><span class='lparen token'>(</span><span class='string val'>'content'</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='filename identifier id'>filename</span><span class='bitor op'>|</span>
    <span class='comment val'># Read and parse data</span>
    <span class='meta identifier id'>meta</span><span class='comma token'>,</span> <span class='content identifier id'>content</span> <span class='assign token'>=</span> <span class='mult op'>*</span><span class='parse_file identifier id'>parse_file</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='string val'>'page'</span><span class='rparen token'>)</span>

    <span class='comment val'># Skip drafts</span>
    <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='meta identifier id'>meta</span><span class='lbrack token'>[</span><span class='symbol val'>:is_draft</span><span class='rbrack token'>]</span>

    <span class='comment val'># Get attributes</span>
    <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='meta identifier id'>meta</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:file</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='Extra constant id'>Extra</span><span class='colon2 op'>::</span><span class='FileProxy constant id'>FileProxy</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

    <span class='comment val'># Get actual path</span>
    <span class='if if kw'>if</span> <span class='filename identifier id'>filename</span> <span class='match op'>=~</span> <span class='regexp val'>/\/index\.[^\/]+$/</span>
      <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='filename identifier id'>filename</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^content/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/index\.[^\/]+$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>'/'</span>
    <span class='else else kw'>else</span>
      <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='filename identifier id'>filename</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^content/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\.[^\/]+$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>'/'</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Get mtime</span>
    <span class='mtime identifier id'>mtime</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='stat identifier id'>stat</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span>

    <span class='comment val'># Build page</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='Page constant id'>Page</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='content identifier id'>content</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='mtime identifier id'>mtime</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_asset</h3>
</div><div id="save_asset-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_asset</span><span class='args'>(asset)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 225</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L225">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">225
226
227</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_asset identifier id'>save_asset</span><span class='lparen token'>(</span><span class='asset identifier id'>asset</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># TODO implement</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_asset_defaults</h3>
</div><div id="save_asset_defaults-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_asset_defaults</span><span class='args'>(asset_defaults)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 293</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L293">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_asset_defaults identifier id'>save_asset_defaults</span><span class='lparen token'>(</span><span class='asset_defaults identifier id'>asset_defaults</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># Notify</span>
  <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='ASSET_DEFAULTS_FILENAME constant id'>ASSET_DEFAULTS_FILENAME</span><span class='rparen token'>)</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_updated</span><span class='comma token'>,</span> <span class='ASSET_DEFAULTS_FILENAME constant id'>ASSET_DEFAULTS_FILENAME</span><span class='rparen token'>)</span>
    <span class='created identifier id'>created</span>  <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='else else kw'>else</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_created</span><span class='comma token'>,</span> <span class='ASSET_DEFAULTS_FILENAME constant id'>ASSET_DEFAULTS_FILENAME</span><span class='rparen token'>)</span>
    <span class='created identifier id'>created</span>  <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Write</span>
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='ASSET_DEFAULTS_FILENAME constant id'>ASSET_DEFAULTS_FILENAME</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='io identifier id'>io</span><span class='bitor op'>|</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='asset_defaults identifier id'>asset_defaults</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span><span class='dot token'>.</span><span class='to_split_yaml identifier id'>to_split_yaml</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Add to working copy if possible</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='ASSET_DEFAULTS_FILENAME constant id'>ASSET_DEFAULTS_FILENAME</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='created identifier id'>created</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_code</h3>
</div><div id="save_code-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_code</span><span class='args'>(code)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 436</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L436">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_code identifier id'>save_code</span><span class='lparen token'>(</span><span class='code identifier id'>code</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># Check whether code existed</span>
  <span class='existed identifier id'>existed</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='string val'>'lib/default.rb'</span><span class='rparen token'>)</span>

  <span class='comment val'># Remove all existing code files</span>
  <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='string val'>'lib/**/*.rb'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='file identifier id'>file</span><span class='bitor op'>|</span>
    <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='file identifier id'>file</span> <span class='eq op'>==</span> <span class='string val'>'lib/default.rb'</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Notify</span>
  <span class='if if kw'>if</span> <span class='existed identifier id'>existed</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_updated</span><span class='comma token'>,</span> <span class='string val'>'lib/default.rb'</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_created</span><span class='comma token'>,</span> <span class='string val'>'lib/default.rb'</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Write new code</span>
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='string val'>'lib/default.rb'</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='io identifier id'>io</span><span class='bitor op'>|</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='code identifier id'>code</span><span class='dot token'>.</span><span class='data identifier id'>data</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Add to working copy if possible</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='string val'>'lib/default.rb'</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='existed identifier id'>existed</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_layout</h3>
</div><div id="save_layout-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_layout</span><span class='args'>(layout)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 334</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L334">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_layout identifier id'>save_layout</span><span class='lparen token'>(</span><span class='layout identifier id'>layout</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># Find layout path</span>
  <span class='last_path_component identifier id'>last_path_component</span> <span class='assign token'>=</span> <span class='layout identifier id'>layout</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>-1</span><span class='rbrack token'>]</span>
  <span class='paths_best identifier id'>paths_best</span>    <span class='assign token'>=</span> <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='string val'>'layouts'</span> <span class='plus op'>+</span> <span class='layout identifier id'>layout</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span> <span class='plus op'>+</span> <span class='string val'>'.*'</span><span class='rbrack token'>]</span>
  <span class='paths_worst identifier id'>paths_worst</span>   <span class='assign token'>=</span> <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='string val'>'layouts'</span> <span class='plus op'>+</span> <span class='layout identifier id'>layout</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='plus op'>+</span> <span class='string val'>'index.*'</span><span class='rbrack token'>]</span>
  <span class='path_default identifier id'>path_default</span>  <span class='assign token'>=</span> <span class='string val'>'layouts'</span> <span class='plus op'>+</span> <span class='layout identifier id'>layout</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span> <span class='plus op'>+</span> <span class='string val'>'.html'</span>
  <span class='path identifier id'>path</span>          <span class='assign token'>=</span> <span class='paths_best identifier id'>paths_best</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='paths_worst identifier id'>paths_worst</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='path_default identifier id'>path_default</span>
  <span class='parent_path identifier id'>parent_path</span>   <span class='assign token'>=</span> <span class='string val'>'/'</span> <span class='plus op'>+</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='layout identifier id'>layout</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>

  <span class='comment val'># Notify</span>
  <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
    <span class='created identifier id'>created</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_updated</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='created identifier id'>created</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_created</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Write layout</span>
  <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='mkdir_p identifier id'>mkdir_p</span><span class='lparen token'>(</span><span class='string val'>'layouts'</span> <span class='plus op'>+</span> <span class='parent_path identifier id'>parent_path</span><span class='rparen token'>)</span>
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='io identifier id'>io</span><span class='bitor op'>|</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;-----\n&quot;</span><span class='rparen token'>)</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='layout identifier id'>layout</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span><span class='dot token'>.</span><span class='to_split_yaml identifier id'>to_split_yaml</span> <span class='plus op'>+</span> <span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;-----\n&quot;</span><span class='rparen token'>)</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='layout identifier id'>layout</span><span class='dot token'>.</span><span class='content identifier id'>content</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Add to working copy if possible</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='created identifier id'>created</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_page</h3>
</div><div id="save_page-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_page</span><span class='args'>(page)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 152</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L152">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_page identifier id'>save_page</span><span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># Find page path</span>
  <span class='if if kw'>if</span> <span class='page identifier id'>page</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='eq op'>==</span> <span class='string val'>'/'</span>
    <span class='paths identifier id'>paths</span>         <span class='assign token'>=</span> <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='string val'>'content/index.*'</span><span class='rbrack token'>]</span>
    <span class='path identifier id'>path</span>          <span class='assign token'>=</span> <span class='paths identifier id'>paths</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='string val'>'content/index.html'</span>
    <span class='parent_path identifier id'>parent_path</span>   <span class='assign token'>=</span> <span class='string val'>'/'</span>
  <span class='else else kw'>else</span>
    <span class='last_path_component identifier id'>last_path_component</span> <span class='assign token'>=</span> <span class='page identifier id'>page</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>-1</span><span class='rbrack token'>]</span>
    <span class='paths_best identifier id'>paths_best</span>    <span class='assign token'>=</span> <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='string val'>'content'</span> <span class='plus op'>+</span> <span class='page identifier id'>page</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span> <span class='plus op'>+</span> <span class='string val'>'.*'</span><span class='rbrack token'>]</span>
    <span class='paths_worst identifier id'>paths_worst</span>   <span class='assign token'>=</span> <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='string val'>'content'</span> <span class='plus op'>+</span> <span class='page identifier id'>page</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='plus op'>+</span> <span class='string val'>'index.*'</span><span class='rbrack token'>]</span>
    <span class='path_default identifier id'>path_default</span>  <span class='assign token'>=</span> <span class='string val'>'content'</span> <span class='plus op'>+</span> <span class='page identifier id'>page</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span> <span class='plus op'>+</span> <span class='string val'>'.html'</span>
    <span class='path identifier id'>path</span>          <span class='assign token'>=</span> <span class='paths_best identifier id'>paths_best</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='paths_worst identifier id'>paths_worst</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='path_default identifier id'>path_default</span>
    <span class='parent_path identifier id'>parent_path</span>   <span class='assign token'>=</span> <span class='string val'>'/'</span> <span class='plus op'>+</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Notify</span>
  <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
    <span class='created identifier id'>created</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_updated</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='created identifier id'>created</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_created</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Write page</span>
  <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='mkdir_p identifier id'>mkdir_p</span><span class='lparen token'>(</span><span class='string val'>'content'</span> <span class='plus op'>+</span> <span class='parent_path identifier id'>parent_path</span><span class='rparen token'>)</span>
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='io identifier id'>io</span><span class='bitor op'>|</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;-----\n&quot;</span><span class='rparen token'>)</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span><span class='dot token'>.</span><span class='to_split_yaml identifier id'>to_split_yaml</span> <span class='plus op'>+</span> <span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;-----\n&quot;</span><span class='rparen token'>)</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='dot token'>.</span><span class='content identifier id'>content</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Add to working copy if possible</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='created identifier id'>created</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_page_defaults</h3>
</div><div id="save_page_defaults-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_page_defaults</span><span class='args'>(page_defaults)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 251</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L251">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_page_defaults identifier id'>save_page_defaults</span><span class='lparen token'>(</span><span class='page_defaults identifier id'>page_defaults</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># Notify</span>
  <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='PAGE_DEFAULTS_FILENAME constant id'>PAGE_DEFAULTS_FILENAME</span><span class='rparen token'>)</span>
    <span class='filename identifier id'>filename</span> <span class='assign token'>=</span> <span class='PAGE_DEFAULTS_FILENAME constant id'>PAGE_DEFAULTS_FILENAME</span>
    <span class='created identifier id'>created</span>  <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_updated</span><span class='comma token'>,</span> <span class='filename identifier id'>filename</span><span class='rparen token'>)</span>
  <span class='elsif elsif kw'>elsif</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='PAGE_DEFAULTS_FILENAME_OLD constant id'>PAGE_DEFAULTS_FILENAME_OLD</span><span class='rparen token'>)</span>
    <span class='filename identifier id'>filename</span> <span class='assign token'>=</span> <span class='PAGE_DEFAULTS_FILENAME_OLD constant id'>PAGE_DEFAULTS_FILENAME_OLD</span>
    <span class='created identifier id'>created</span>  <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_updated</span><span class='comma token'>,</span> <span class='filename identifier id'>filename</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='filename identifier id'>filename</span> <span class='assign token'>=</span> <span class='PAGE_DEFAULTS_FILENAME constant id'>PAGE_DEFAULTS_FILENAME</span>
    <span class='created identifier id'>created</span>  <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_created</span><span class='comma token'>,</span> <span class='filename identifier id'>filename</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Write</span>
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='io identifier id'>io</span><span class='bitor op'>|</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='page_defaults identifier id'>page_defaults</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span><span class='dot token'>.</span><span class='to_split_yaml identifier id'>to_split_yaml</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Add to working copy if possible</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='created identifier id'>created</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_template</h3>
</div><div id="save_template-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_template</span><span class='args'>(template)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 388</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L388">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_template identifier id'>save_template</span><span class='lparen token'>(</span><span class='template identifier id'>template</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='comment val'># Get template path</span>
  <span class='paths identifier id'>paths</span>         <span class='assign token'>=</span> <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>'templates'</span><span class='comma token'>,</span> <span class='template identifier id'>template</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>'.*'</span><span class='rbrack token'>]</span>
  <span class='path_default identifier id'>path_default</span>  <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>'templates'</span><span class='comma token'>,</span> <span class='template identifier id'>template</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>'.html'</span>
  <span class='path identifier id'>path</span>          <span class='assign token'>=</span> <span class='paths identifier id'>paths</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='path_default identifier id'>path_default</span>

  <span class='comment val'># Notify</span>
  <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
    <span class='created identifier id'>created</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_updated</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='created identifier id'>created</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='NotificationCenter constant id'>NotificationCenter</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='symbol val'>:file_created</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Write template</span>
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='io identifier id'>io</span><span class='bitor op'>|</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;-----\n&quot;</span><span class='rparen token'>)</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='template identifier id'>template</span><span class='dot token'>.</span><span class='page_attributes identifier id'>page_attributes</span><span class='dot token'>.</span><span class='to_split_yaml identifier id'>to_split_yaml</span> <span class='plus op'>+</span> <span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;-----\n&quot;</span><span class='rparen token'>)</span>
    <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='template identifier id'>template</span><span class='dot token'>.</span><span class='page_content identifier id'>page_content</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Add to working copy if possible</span>
  <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='created identifier id'>created</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>setup</h3>
</div><div id="setup-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>setup</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 102</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L102">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">102
103
104
105
106
107
108</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='setup identifier id'>setup</span> 
  <span class='comment val'># Create directories</span>
  <span class='dstring node'>%w( assets content templates layouts lib )</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='dir identifier id'>dir</span><span class='bitor op'>|</span>
    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='mkdir_p identifier id'>mkdir_p</span><span class='lparen token'>(</span><span class='dir identifier id'>dir</span><span class='rparen token'>)</span>
    <span class='vcs identifier id'>vcs</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='dir identifier id'>dir</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>templates</h3>
</div><div id="templates-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>templates</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Templates ##########
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 375</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L375">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">375
376
377
378
379
380
381
382
383
384
385
386</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='templates identifier id'>templates</span> 
  <span class='files identifier id'>files</span><span class='lparen token'>(</span><span class='string val'>'templates'</span><span class='comma token'>,</span> <span class='false false kw'>false</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='filename identifier id'>filename</span><span class='bitor op'>|</span>
    <span class='comment val'># Read and parse data</span>
    <span class='meta identifier id'>meta</span><span class='comma token'>,</span> <span class='content identifier id'>content</span> <span class='assign token'>=</span> <span class='mult op'>*</span><span class='parse_file identifier id'>parse_file</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='string val'>'template'</span><span class='rparen token'>)</span>

    <span class='comment val'># Get name</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='filename identifier id'>filename</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^templates\//</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\.[^\/]+$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>

    <span class='comment val'># Build template</span>
    <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='Template constant id'>Template</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='content identifier id'>content</span><span class='comma token'>,</span> <span class='meta identifier id'>meta</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>up</h3>
</div><div id="up-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>up</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Preparation ##########
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 96</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L96">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">96
97</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='up identifier id'>up</span> 
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>vcs</h3>
</div><div id="vcs-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>vcs</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
VCSes ##########
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/data_sources/filesystem_combined.rb', line 88</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/data_sources/filesystem_combined.rb#L88">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">88
89
90</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='vcs identifier id'>vcs</span>
  <span class='@vcs ivar id'>@vcs</span> <span class='opasgn op'>||=</span> <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='Extra constant id'>Extra</span><span class='colon2 op'>::</span><span class='VCSes constant id'>VCSes</span><span class='colon2 op'>::</span><span class='Dummy constant id'>Dummy</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>