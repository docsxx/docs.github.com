<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>ddfreyne's nanoc - Module: Nanoc::Helpers::Blogging - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/ddfreyne/commits/nanoc/master" rel="alternate" title="Recent Commits to nanoc:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("ddfreyne", "nanoc", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("ddfreyne", "nanoc", "1751d2739431a6113a296f90fa4cd4863d610d12", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/ddfreyne/nanoc/tree/">Source</a></li>
            <li class=""><a href="http://github.com/ddfreyne/nanoc/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/ddfreyne/nanoc/network">Network</a></li>            
            <li class=""><a href="http://github.com/ddfreyne/nanoc/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/ddfreyne/nanoc">Wiki</a></li>
            <li class=""><a href="http://github.com/ddfreyne/nanoc/graphs">Graphs</a></li>                    
            <li class="active"><a href="/ddfreyne/nanoc">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/ddfreyne">ddfreyne</a> / <b><a href="http://github.com/ddfreyne/nanoc/tree">nanoc</a></b>        
                <a id="namespaces_button" rel="ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Nanoc_Helpers_Blogging">
  <h1>Module: Nanoc::Helpers::Blogging</h1>
  <div class="section docstring">
  <p>
Nanoc::Helpers::Blogging provides some functionality for building blogs,
such as finding articles and constructing feeds.
</p>
<p>
This helper has a few requirements. First, all blog articles should have
the following attributes:
</p>
<ul>
<li>&#8216;kind&#8217;, set to &#8216;article&#8217;.

</li>
<li>&#8216;created_at&#8217;, set to the creation timestamp.

</li>
</ul>
<p>
Some functions in this blogging helper, such as the <tt>atom_feed</tt>
function, require additional attributes to be set; these attributes are
described in the documentation for these functions.
</p>
<p>
The two main functions are sorted_articles and atom_feed.
</p>
<p>
To activate this helper, <tt>include</tt> it, like this:
</p>
<pre class="code">
  <span class='include identifier id'>include</span> <span class='Nanoc constant id'>Nanoc</span><span class='colon2 op'>::</span><span class='Helpers constant id'>Helpers</span><span class='colon2 op'>::</span><span class='Blogging constant id'>Blogging</span>
</pre>

</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#articles-instance_method">#articles</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns an unsorted list of articles.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#atom_feed-instance_method">#atom_feed</span><span class='args'>(params = )</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a string representing the atom feed containing recent articles,
sorted by descending creation date.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#atom_tag_for-instance_method">#atom_tag_for</span><span class='args'>(page)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns an URI containing an unique ID for the given page.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#feed_url-instance_method">#feed_url</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the URL of the feed.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#sorted_articles-instance_method">#sorted_articles</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a list of articles, sorted by descending creation date (so newer
articles appear first).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#url_for-instance_method">#url_for</span><span class='args'>(page)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the URL for the given page.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>articles</h3>
</div><div id="articles-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>articles</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns an unsorted list of articles.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/helpers/blogging.rb', line 25</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/helpers/blogging.rb#L25">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">25
26
27</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='articles identifier id'>articles</span>
  <span class='@pages ivar id'>@pages</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='page identifier id'>page</span><span class='bitor op'>|</span> <span class='page identifier id'>page</span><span class='dot token'>.</span><span class='kind identifier id'>kind</span> <span class='eq op'>==</span> <span class='string val'>'article'</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>atom_feed</h3>
</div><div id="atom_feed-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>atom_feed</span><span class='args'>(params = )</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a string representing the atom feed containing recent articles,
sorted by descending creation date. <tt>params</tt> is a hash where the
following keys can be set:
</p>
<table>
<tr><td valign="top"><tt>limit</tt>:</td><td>The maximum number of articles to show. Defaults to 5.

</td></tr>
<tr><td valign="top"><tt>articles</tt>:</td><td>A list of articles to include in the feed. Defaults to the list of articles
returned by the articles function.

</td></tr>
<tr><td valign="top"><tt>content_proc</tt>:</td><td>A proc that returns the content of the given article, passed as a
parameter. By default, given the argument <tt>article</tt>, this proc will
return <tt>article.content</tt>. This function may not return nil.

</td></tr>
<tr><td valign="top"><tt>excerpt_proc</tt>:</td><td>A proc that returns the excerpt of the given article, passed as a
parameter. By default, given the argument <tt>article</tt>, this proc will
return <tt>article.excerpt</tt>. This function may return nil.

</td></tr>
</table>
<p>
The following attributes must be set on blog articles:
</p>
<ul>
<li>&#8216;title&#8217;, containing the title of the blog post.

</li>
<li>all other attributes mentioned above.

</li>
</ul>
<p>
The following attributes can optionally be set on blog articles to change
the behaviour of the Atom feed:
</p>
<ul>
<li>&#8216;excerpt&#8217;, containing an excerpt of the article, usually only a
few lines long.

</li>
<li>&#8216;custom_path_in_feed&#8217;, containing the path that will be used
instead of the normal path in the feed. This can be useful when including
non-outputted pages in a feed; such pages could have their custom feed path
set to the blog path instead, for example.

</li>
</ul>
<p>
The feed will also include dates on which the articles were updated. These
are generated automatically; the way this happens depends on the used data
source (the filesystem data source checks the file mtimes, for instance).
</p>
<p>
The feed page will need to have the following attributes:
</p>
<ul>
<li>&#8216;base_url&#8217;, containing the URL to the site, without trailing
slash. For example, if the site is at &quot;http://example.com/&quot;, the
base_url would be &quot;http://example.com&quot;. It is probably a good
idea to define this in the page defaults, i.e. the &#8216;meta.yaml&#8217;
file (at least if the filesystem data source is being used, which is
probably the case).

</li>
<li>&#8216;title&#8217;, containing the title of the feed, which is usually
also the title of the blog.

</li>
<li>&#8216;author_name&#8217;, containing the name of the page&#8217;s author.
This will likely be a global attribute, unless the site is managed by
several people/

</li>
<li>&#8216;author_uri&#8217;, containing the URI for the page&#8217;s author,
such as the author&#8217;s web site URL. This will also likely be a global
attribute.

</li>
</ul>
<p>
The feed page can have the following optional attributes:
</p>
<ul>
<li>&#8216;feed_url&#8217;, containing the custom URL of the feed. This can be
useful when the private feed URL shouldn&#8217;t be exposed; for example,
when using FeedBurner this would be set to the public FeedBurner URL.

</li>
</ul>
<p>
To construct a feed, create a blank page with no layout, only the
&#8216;erb&#8217; (or &#8216;erubis&#8217;) filter, and an
&#8216;xml&#8217; extension. It may also be useful to set
&#8216;is_hidden&#8217; to true, so that helpers such as the sitemap helper
will ignore the page. The content of the feed page should be:
</p>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='string val'>%= atom_feed %&gt;
</span></pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/helpers/blogging.rb', line 106</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/helpers/blogging.rb#L106">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='atom_feed identifier id'>atom_feed</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='semicolon token'>;</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='require identifier id'>require</span> <span class='string val'>'builder'</span>

  <span class='comment val'># Extract parameters</span>
  <span class='limit identifier id'>limit</span>             <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:limit</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>5</span>
  <span class='relevant_articles identifier id'>relevant_articles</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:articles</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='articles identifier id'>articles</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='content_proc identifier id'>content_proc</span>      <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:content_proc</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lambda identifier id'>lambda</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='content identifier id'>content</span> <span class='rbrace token'>}</span>
  <span class='excerpt_proc identifier id'>excerpt_proc</span>      <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:excerpt_proc</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lambda identifier id'>lambda</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='excerpt identifier id'>excerpt</span> <span class='rbrace token'>}</span>

  <span class='comment val'># Check feed page attributes</span>
  <span class='if if kw'>if</span> <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='base_url identifier id'>base_url</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='raise identifier id'>raise</span> <span class='RuntimeError constant id'>RuntimeError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'Cannot build Atom feed: feed page has no base_url'</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='title identifier id'>title</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='raise identifier id'>raise</span> <span class='RuntimeError constant id'>RuntimeError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'Cannot build Atom feed: feed page has no title'</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='author_name identifier id'>author_name</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='raise identifier id'>raise</span> <span class='RuntimeError constant id'>RuntimeError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'Cannot build Atom feed: feed page has no author_name'</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='author_uri identifier id'>author_uri</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='raise identifier id'>raise</span> <span class='RuntimeError constant id'>RuntimeError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'Cannot build Atom feed: feed page has no author_uri'</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Check article attributes</span>
  <span class='if if kw'>if</span> <span class='relevant_articles identifier id'>relevant_articles</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='raise identifier id'>raise</span> <span class='RuntimeError constant id'>RuntimeError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'Cannot build Atom feed: no articles'</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='relevant_articles identifier id'>relevant_articles</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='created_at identifier id'>created_at</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='rbrace token'>}</span>
    <span class='raise identifier id'>raise</span> <span class='RuntimeError constant id'>RuntimeError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'Cannot build Atom feed: one or more articles lack created_at'</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Get sorted relevant articles</span>
  <span class='sorted_relevant_articles identifier id'>sorted_relevant_articles</span> <span class='assign token'>=</span> <span class='relevant_articles identifier id'>relevant_articles</span><span class='dot token'>.</span><span class='sort_by identifier id'>sort_by</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='created_at identifier id'>created_at</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='reverse identifier id'>reverse</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='limit identifier id'>limit</span><span class='rparen token'>)</span>

  <span class='comment val'># Get most recent article</span>
  <span class='last_article identifier id'>last_article</span> <span class='assign token'>=</span> <span class='sorted_relevant_articles identifier id'>sorted_relevant_articles</span><span class='dot token'>.</span><span class='first identifier id'>first</span>

  <span class='comment val'># Create builder</span>
  <span class='buffer identifier id'>buffer</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='xml identifier id'>xml</span> <span class='assign token'>=</span> <span class='Builder constant id'>Builder</span><span class='colon2 op'>::</span><span class='XmlMarkup constant id'>XmlMarkup</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:target</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='buffer identifier id'>buffer</span><span class='comma token'>,</span> <span class='symbol val'>:indent</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span><span class='rparen token'>)</span>

  <span class='comment val'># Build feed</span>
  <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='instruct! fid id'>instruct!</span>
  <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='feed identifier id'>feed</span><span class='lparen token'>(</span><span class='symbol val'>:xmlns</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'http://www.w3.org/2005/Atom'</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='comment val'># Add primary attributes</span>
    <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='id identifier id'>id</span>      <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='base_url identifier id'>base_url</span> <span class='plus op'>+</span> <span class='string val'>'/'</span>
    <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='title identifier id'>title</span>   <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='title identifier id'>title</span>

    <span class='comment val'># Add date</span>
    <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='updated identifier id'>updated</span> <span class='last_article identifier id'>last_article</span><span class='dot token'>.</span><span class='created_at identifier id'>created_at</span><span class='dot token'>.</span><span class='to_iso8601_time identifier id'>to_iso8601_time</span>

    <span class='comment val'># Add links</span>
    <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='link identifier id'>link</span><span class='lparen token'>(</span><span class='symbol val'>:rel</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'alternate'</span><span class='comma token'>,</span> <span class='symbol val'>:href</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='base_url identifier id'>base_url</span><span class='rparen token'>)</span>
    <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='link identifier id'>link</span><span class='lparen token'>(</span><span class='symbol val'>:rel</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'self'</span><span class='comma token'>,</span>      <span class='symbol val'>:href</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='feed_url identifier id'>feed_url</span><span class='rparen token'>)</span>

    <span class='comment val'># Add author information</span>
    <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='author identifier id'>author</span> <span class='do do kw'>do</span>
      <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='name identifier id'>name</span>  <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='author_name identifier id'>author_name</span>
      <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span>   <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='author_uri identifier id'>author_uri</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Add articles</span>
    <span class='sorted_relevant_articles identifier id'>sorted_relevant_articles</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span>
      <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='entry identifier id'>entry</span> <span class='do do kw'>do</span>
        <span class='comment val'># Add primary attributes</span>
        <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='id identifier id'>id</span>        <span class='atom_tag_for identifier id'>atom_tag_for</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='rparen token'>)</span>
        <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='title identifier id'>title</span>     <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='title identifier id'>title</span><span class='comma token'>,</span> <span class='symbol val'>:type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'html'</span>

        <span class='comment val'># Add dates</span>
        <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='published identifier id'>published</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='created_at identifier id'>created_at</span><span class='dot token'>.</span><span class='to_iso8601_time identifier id'>to_iso8601_time</span>
        <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='updated identifier id'>updated</span>   <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='dot token'>.</span><span class='to_iso8601_time identifier id'>to_iso8601_time</span>

        <span class='comment val'># Add link</span>
        <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='link identifier id'>link</span><span class='lparen token'>(</span><span class='symbol val'>:rel</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'alternate'</span><span class='comma token'>,</span> <span class='symbol val'>:href</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='url_for identifier id'>url_for</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

        <span class='comment val'># Add content</span>
        <span class='summary identifier id'>summary</span> <span class='assign token'>=</span> <span class='excerpt_proc identifier id'>excerpt_proc</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='rparen token'>)</span>
        <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='content identifier id'>content</span>   <span class='content_proc identifier id'>content_proc</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'html'</span>
        <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='summary identifier id'>summary</span>   <span class='summary identifier id'>summary</span><span class='comma token'>,</span> <span class='symbol val'>:type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'html'</span> <span class='unless unless_mod kw'>unless</span> <span class='summary identifier id'>summary</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='buffer identifier id'>buffer</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>atom_tag_for</h3>
</div><div id="atom_tag_for-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>atom_tag_for</span><span class='args'>(page)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns an URI containing an unique ID for the given page. This will be
used in the Atom feed to uniquely identify articles. These IDs are created
using a procedure suggested by Mark Pilgrim in this blog post:
http://diveintomark.org/archives/2004/05/28/howto-atom-id.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/helpers/blogging.rb', line 208</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/helpers/blogging.rb#L208">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">208
209
210
211
212
213</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='atom_tag_for identifier id'>atom_tag_for</span><span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='rparen token'>)</span>
  <span class='hostname identifier id'>hostname</span>        <span class='assign token'>=</span> <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='base_url identifier id'>base_url</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/.*:\/\/(.+?)\/?$/</span><span class='comma token'>,</span> <span class='string val'>'\1'</span><span class='rparen token'>)</span>
  <span class='formatted_date identifier id'>formatted_date</span>  <span class='assign token'>=</span> <span class='page identifier id'>page</span><span class='dot token'>.</span><span class='created_at identifier id'>created_at</span><span class='dot token'>.</span><span class='to_iso8601_date identifier id'>to_iso8601_date</span>

  <span class='string val'>'tag:'</span> <span class='plus op'>+</span> <span class='hostname identifier id'>hostname</span> <span class='plus op'>+</span> <span class='string val'>','</span> <span class='plus op'>+</span> <span class='formatted_date identifier id'>formatted_date</span> <span class='plus op'>+</span> <span class='string val'>':'</span> <span class='plus op'>+</span> <span class='page identifier id'>page</span><span class='dot token'>.</span><span class='path identifier id'>path</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>feed_url</h3>
</div><div id="feed_url-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>feed_url</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the URL of the feed. It will return the custom feed URL if set, or
otherwise the normal feed URL.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/helpers/blogging.rb', line 200</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/helpers/blogging.rb#L200">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">200
201
202</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='feed_url identifier id'>feed_url</span>
  <span class='@page ivar id'>@page</span><span class='lbrack token'>[</span><span class='symbol val'>:feed_url</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='base_url identifier id'>base_url</span> <span class='plus op'>+</span> <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='path identifier id'>path</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>sorted_articles</h3>
</div><div id="sorted_articles-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>sorted_articles</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a list of articles, sorted by descending creation date (so newer
articles appear first).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/helpers/blogging.rb', line 31</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/helpers/blogging.rb#L31">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">31
32
33</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='sorted_articles identifier id'>sorted_articles</span>
  <span class='articles identifier id'>articles</span><span class='dot token'>.</span><span class='sort_by identifier id'>sort_by</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='created_at identifier id'>created_at</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='reverse identifier id'>reverse</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>url_for</h3>
</div><div id="url_for-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>url_for</span><span class='args'>(page)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the URL for the given page. It will return the URL containing the
custom path in the feed if possible, otherwise the normal path.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/nanoc/helpers/blogging.rb', line 194</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ddfreyne/nanoc/blob/1751d2739431a6113a296f90fa4cd4863d610d12/lib/nanoc/helpers/blogging.rb#L194">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">194
195
196</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='url_for identifier id'>url_for</span><span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='rparen token'>)</span>
  <span class='@page ivar id'>@page</span><span class='dot token'>.</span><span class='base_url identifier id'>base_url</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='dot token'>.</span><span class='custom_path_in_feed identifier id'>custom_path_in_feed</span> <span class='orop op'>||</span> <span class='page identifier id'>page</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>