<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: SexyPgConstraints::Constraints</title>
  </head>
  <body>
    <div id="content">
      <div class="section module SexyPgConstraints_Constraints">
  <h1 class="title">Module: SexyPgConstraints::Constraints</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#alphanumeric-instance_method' title='#alphanumeric'>#alphanumeric</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Allow only alphanumeric values.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#blacklist-instance_method' title='#blacklist'>#blacklist</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Prohibit listed values.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#email-instance_method' title='#email'>#email</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Allow only valid email format.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#even-instance_method' title='#even'>#even</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Allow only even values.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#exact_length-instance_method' title='#exact_length'>#exact_length</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Allow only text/strings of the exact length specified, no more, no less.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#format-instance_method' title='#format'>#format</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Allow only values that match the regular expression.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#length_within-instance_method' title='#length_within'>#length_within</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Check the length of strings/text to be within the range.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#not_blank-instance_method' title='#not_blank'>#not_blank</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The value must have at least 1 non-space character.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#odd-instance_method' title='#odd'>#odd</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Allow only odd values.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#positive-instance_method' title='#positive'>#positive</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Allow only positive values.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#reference-instance_method' title='#reference'>#reference</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Add foreign key constraint.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#unique-instance_method' title='#unique'>#unique</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Make sure every entry in the column is unique.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#whitelist-instance_method' title='#whitelist'>#whitelist</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Only allow listed values.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#within-instance_method' title='#within'>#within</a></span><span class='args'>(column, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The numeric value must be within given range.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>alphanumeric</h3>
</div><div id="alphanumeric-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>alphanumeric</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Allow only alphanumeric values.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:author</span><span class='comma token'>,</span> <span class='symbol val'>:alphanumeric</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


73
74
75</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 73</span>

<span class='def def kw'>def</span> <span class='alphanumeric identifier id'>alphanumeric</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check (((#{column})::text ~* '^[a-z0-9]+$'::text))&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>blacklist</h3>
</div><div id="blacklist-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>blacklist</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Prohibit listed values.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:isbn</span><span class='comma token'>,</span> <span class='symbol val'>:blacklist</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>%w(invalid_isbn1 invalid_isbn2)</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


21
22
23</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 21</span>

<span class='def def kw'>def</span> <span class='blacklist identifier id'>blacklist</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check (#{column} not in (#{ options.collect{|v| &quot;'#{v}'&quot;}.join(',') }))&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>email</h3>
</div><div id="email-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>email</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Allow only valid email format.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:author</span><span class='comma token'>,</span> <span class='symbol val'>:email</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


63
64
65</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 63</span>

<span class='def def kw'>def</span> <span class='email identifier id'>email</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check (((#{column})::text ~ E'^([-a-z0-9]+)@([-a-z0-9]+[.]+[a-z]{2,4})$'::text))&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>even</h3>
</div><div id="even-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>even</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Allow only even values.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:quantity</span><span class='comma token'>,</span> <span class='symbol val'>:even</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


103
104
105</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 103</span>

<span class='def def kw'>def</span> <span class='even identifier id'>even</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check (mod(#{column}, 2) = 0)&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>exact_length</h3>
</div><div id="exact_length-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>exact_length</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Allow only text/strings of the exact length specified, no more, no less.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:hash</span><span class='comma token'>,</span> <span class='symbol val'>:exact_length</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>32</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


124
125
126</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 124</span>

<span class='def def kw'>def</span> <span class='exact_length identifier id'>exact_length</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check ( length(trim(both from #{column})) = #{options} )&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>format</h3>
</div><div id="format-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>format</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Allow only values that match the regular expression.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:orders</span><span class='comma token'>,</span> <span class='symbol val'>:visa</span><span class='comma token'>,</span> <span class='symbol val'>:format</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='regexp val'>/^([4]{1})([0-9]{12,15})$/</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


134
135
136</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 134</span>

<span class='def def kw'>def</span> <span class='format identifier id'>format</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check (((#{column})::text #{options.casefold? ? '~*' : '~'}  E'#{options.source}'::text ))&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>length_within</h3>
</div><div id="length_within-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>length_within</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Check the length of strings/text to be within the range.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:author</span><span class='comma token'>,</span> <span class='symbol val'>:length_within</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='float val'>4</span><span class='dot2 op'>..</span><span class='integer val'>50</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


53
54
55</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 53</span>

<span class='def def kw'>def</span> <span class='length_within identifier id'>length_within</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='within identifier id'>within</span><span class='lparen token'>(</span><span class='dstring node'>&quot;length(#{column})&quot;</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>not_blank</h3>
</div><div id="not_blank-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>not_blank</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The value must have at least 1 non-space character.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:not_blank</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


31
32
33</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 31</span>

<span class='def def kw'>def</span> <span class='not_blank identifier id'>not_blank</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check ( length(trim(both from #{column})) &gt; 0 )&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>odd</h3>
</div><div id="odd-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>odd</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Allow only odd values.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:quantity</span><span class='comma token'>,</span> <span class='symbol val'>:odd</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


93
94
95</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 93</span>

<span class='def def kw'>def</span> <span class='odd identifier id'>odd</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check (mod(#{column}, 2) != 0)&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>positive</h3>
</div><div id="positive-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>positive</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Allow only positive values.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:quantity</span><span class='comma token'>,</span> <span class='symbol val'>:positive</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


83
84
85</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 83</span>

<span class='def def kw'>def</span> <span class='positive identifier id'>positive</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check (#{column} &gt;= 0)&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reference</h3>
</div><div id="reference-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>reference</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Add foreign key constraint.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:author_id</span><span class='comma token'>,</span> <span class='symbol val'>:reference</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:authors</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:id</span><span class='comma token'>,</span> <span class='symbol val'>:on_delete</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:cascade</span><span class='rbrace token'>}</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


144
145
146
147
148
149
150
151
152</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 144</span>

<span class='def def kw'>def</span> <span class='reference identifier id'>reference</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='on_delete identifier id'>on_delete</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:on_delete</span><span class='rparen token'>)</span>
  <span class='fk_table identifier id'>fk_table</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='fk_column identifier id'>fk_column</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='fk_table identifier id'>fk_table</span><span class='rbrack token'>]</span>
  
  <span class='on_delete identifier id'>on_delete</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;on delete #{on_delete}&quot;</span> <span class='if if_mod kw'>if</span> <span class='on_delete identifier id'>on_delete</span>
  
  <span class='dstring node'>&quot;foreign key (#{column}) references #{fk_table} (#{fk_column}) #{on_delete}&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>unique</h3>
</div><div id="unique-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>unique</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Make sure every entry in the column is unique.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:isbn</span><span class='comma token'>,</span> <span class='symbol val'>:unique</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


113
114
115
116</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 113</span>

<span class='def def kw'>def</span> <span class='unique identifier id'>unique</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='column identifier id'>column</span> <span class='assign token'>=</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>', '</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:join</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;unique (#{column})&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>whitelist</h3>
</div><div id="whitelist-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>whitelist</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Only allow listed values.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:variation</span><span class='comma token'>,</span> <span class='symbol val'>:whitelist</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>%w(hardcover softcover)</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


11
12
13</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 11</span>

<span class='def def kw'>def</span> <span class='whitelist identifier id'>whitelist</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check (#{column} in (#{ options.collect{|v| &quot;'#{v}'&quot;}.join(',')  }))&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>within</h3>
</div><div id="within-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>within</span><span class='args'>(column, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The numeric value must be within given range.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:year</span><span class='comma token'>,</span> <span class='symbol val'>:within</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='float val'>1980</span><span class='dot2 op'>..</span><span class='integer val'>2008</span>
  <span class='constrain identifier id'>constrain</span> <span class='symbol val'>:books</span><span class='comma token'>,</span> <span class='symbol val'>:year</span><span class='comma token'>,</span> <span class='symbol val'>:within</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='float val'>1980</span><span class='dot3 op'>...</span><span class='integer val'>2009</span>
</pre>
<p>
(the two lines above do the same thing)
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


43
44
45</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/constraints.rb', line 43</span>

<span class='def def kw'>def</span> <span class='within identifier id'>within</span><span class='lparen token'>(</span><span class='column identifier id'>column</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;check (#{column} &gt;= #{options.begin} and #{column} #{options.exclude_end? ? ' &lt; ' : ' &lt;= '} #{options.end})&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>