<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>evanphx's rubinius - Class: CSV::StreamBuf - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/evanphx/commits/rubinius/master" rel="alternate" title="Recent Commits to rubinius:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("evanphx", "rubinius", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("evanphx", "rubinius", "a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/evanphx/rubinius/tree/">Source</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/network">Network</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/evanphx/rubinius">Wiki</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/graphs">Graphs</a></li>                    
            <li class="active"><a href="/evanphx/rubinius">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/evanphx">evanphx</a> / <b><a href="http://github.com/evanphx/rubinius/tree">rubinius</a></b>        
                <a id="namespaces_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class CSV_StreamBuf">
  <h1>Class: CSV::StreamBuf</h1>
  <div class="section docstring">
  <p>
Buffered stream.
</p>
<p>
EXAMPLE 1 &#8212; an IO.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='MyBuf constant id'>MyBuf</span> <span class='lt op'>&lt;</span> <span class='StreamBuf constant id'>StreamBuf</span>
    <span class='comment val'># Do initialize myself before a super class.  Super class might call my</span>
    <span class='comment val'># method 'read'. (Could be awful for C++ user. :-)</span>
    <span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span>
      <span class='@s ivar id'>@s</span> <span class='assign token'>=</span> <span class='s identifier id'>s</span>
      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># define my own 'read' method.</span>
    <span class='comment val'># CAUTION: Returning nil means EnfOfStream.</span>
    <span class='def def kw'>def</span> <span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='size identifier id'>size</span><span class='rparen token'>)</span>
      <span class='@s ivar id'>@s</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='size identifier id'>size</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># release buffers. in Ruby which has GC, you do not have to call this...</span>
    <span class='def def kw'>def</span> <span class='terminate identifier id'>terminate</span>
      <span class='@s ivar id'>@s</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='buf identifier id'>buf</span> <span class='assign token'>=</span> <span class='MyBuf constant id'>MyBuf</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='STDIN constant id'>STDIN</span><span class='rparen token'>)</span>
  <span class='my_str identifier id'>my_str</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='rbrack token'>]</span>               <span class='comment val'># =&gt; '' (null string)</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>                  <span class='comment val'># =&gt; 97 (char code of 'a')</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='comma token'>,</span> <span class='integer val'>1</span><span class='rbrack token'>]</span>               <span class='comment val'># =&gt; 'a'</span>
  <span class='my_str identifier id'>my_str</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='comma token'>,</span> <span class='integer val'>5</span><span class='rbrack token'>]</span>
  <span class='p identifier id'>p</span> <span class='my_str identifier id'>my_str</span>                  <span class='comment val'># =&gt; 'abcde' (5 chars)</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='comma token'>,</span> <span class='integer val'>6</span><span class='rbrack token'>]</span>               <span class='comment val'># =&gt; &quot;abcde\n&quot; (6 chars)</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='comma token'>,</span> <span class='integer val'>7</span><span class='rbrack token'>]</span>               <span class='comment val'># =&gt; &quot;abcde\n&quot; (6 chars)</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='drop identifier id'>drop</span><span class='lparen token'>(</span><span class='integer val'>3</span><span class='rparen token'>)</span>             <span class='comment val'># =&gt; 3 (dropped chars)</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='comma token'>,</span> <span class='integer val'>2</span><span class='rparen token'>)</span>           <span class='comment val'># =&gt; 'de' (2 chars)</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='is_eos? fid id'>is_eos?</span>             <span class='comment val'># =&gt; false (is not EOS here)</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='drop identifier id'>drop</span><span class='lparen token'>(</span><span class='integer val'>5</span><span class='rparen token'>)</span>             <span class='comment val'># =&gt; 3 (dropped chars)</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='is_eos? fid id'>is_eos?</span>             <span class='comment val'># =&gt; true (is EOS here)</span>
  <span class='p identifier id'>p</span> <span class='buf identifier id'>buf</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>                  <span class='comment val'># =&gt; nil (is EOS here)</span>
</pre>
<p>
EXAMPLE 2 &#8212; String.
</p>
<pre class="code">
  <span class='This constant id'>This</span> <span class='is identifier id'>is</span> <span class='a identifier id'>a</span> <span class='conceptual identifier id'>conceptual</span> <span class='example identifier id'>example</span><span class='dot token'>.</span>  <span class='No constant id'>No</span> <span class='pros identifier id'>pros</span> <span class='with identifier id'>with</span> <span class='this identifier id'>this</span><span class='dot token'>.</span>

  <span class='class identifier id'>class</span> <span class='StrBuf constant id'>StrBuf</span> <span class='lt op'>&lt;</span> <span class='StreamBuf constant id'>StreamBuf</span>
    <span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span>
      <span class='@str ivar id'>@str</span> <span class='assign token'>=</span> <span class='s identifier id'>s</span>
      <span class='@idx ivar id'>@idx</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='size identifier id'>size</span><span class='rparen token'>)</span>
      <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='@str ivar id'>@str</span><span class='lbrack token'>[</span><span class='@idx ivar id'>@idx</span><span class='comma token'>,</span> <span class='size identifier id'>size</span><span class='rbrack token'>]</span>
      <span class='@idx ivar id'>@idx</span> <span class='opasgn op'>+=</span> <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
      <span class='str identifier id'>str</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>

</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="BufSize-constant">BufSize</dt>
      <dd>1024 * 8</dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
WARN: Do not instantiate this class directly. Define your own class which
derives this class and define &#8216;read&#8217; instance method.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/csv.rb', line 888</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/csv.rb#L888">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">888
889
890
891
892
893
894
895</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span>
  <span class='@buf_list ivar id'>@buf_list</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@cur_buf ivar id'>@cur_buf</span> <span class='assign token'>=</span> <span class='@buf_tail_idx ivar id'>@buf_tail_idx</span> <span class='assign token'>=</span> <span class='integer val'>-1</span>
  <span class='@offset ivar id'>@offset</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='@is_eos ivar id'>@is_eos</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='add_buf identifier id'>add_buf</span>
  <span class='@cur_buf ivar id'>@cur_buf</span> <span class='assign token'>=</span> <span class='@buf_tail_idx ivar id'>@buf_tail_idx</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#-5B-5D-instance_method">#[]</span><span class='args'>(idx, n = nil)</span>
        <span class='block'></span>
        
          <span class='alias'>#get</span>
        
      </th>
      <td class="docstring">
        <p>
get a char or a partial string from the stream.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#drop-instance_method">#drop</span><span class='args'>(n)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
drop a string from the stream.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#is_eos-3F-instance_method">#is_eos?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>[]</h3>
</div><div id="-5B-5D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>[]</span><span class='args'>(idx, n = nil)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="get-instance_method">get</tt>
  
</p>
</div><div class="section docstring">
  <p>
get a char or a partial string from the stream. idx: index of a string to
specify a start point of a string to get. unlike String instance, idx &lt;
0 returns nil. n: size of a string to get. returns char at idx if n == nil.
returns a partial string, from idx to (idx + n) if n != nil. at EOF, the
string size could not equal to arg n.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/csv.rb', line 803</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/csv.rb#L803">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='aref op'>[]</span><span class='lparen token'>(</span><span class='idx identifier id'>idx</span><span class='comma token'>,</span> <span class='n identifier id'>n</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span> 
  <span class='if if kw'>if</span> <span class='idx identifier id'>idx</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span>
    <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='idx_is_eos? fid id'>idx_is_eos?</span><span class='lparen token'>(</span><span class='idx identifier id'>idx</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='n identifier id'>n</span> <span class='and and kw'>and</span> <span class='lparen token'>(</span><span class='@offset ivar id'>@offset</span> <span class='plus op'>+</span> <span class='idx identifier id'>idx</span> <span class='eq op'>==</span> <span class='buf_size identifier id'>buf_size</span><span class='lparen token'>(</span><span class='@cur_buf ivar id'>@cur_buf</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
      <span class='comment val'># Like a String, 'abc'[4, 1] returns nil and</span>
      <span class='comment val'># 'abc'[3, 1] returns '' not nil.</span>
      <span class='return return kw'>return</span> <span class='string val'>''</span>
    <span class='else else kw'>else</span>
      <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='my_buf identifier id'>my_buf</span> <span class='assign token'>=</span> <span class='@cur_buf ivar id'>@cur_buf</span>
  <span class='my_offset identifier id'>my_offset</span> <span class='assign token'>=</span> <span class='@offset ivar id'>@offset</span>
  <span class='next_idx identifier id'>next_idx</span> <span class='assign token'>=</span> <span class='idx identifier id'>idx</span>
  <span class='while while kw'>while</span> <span class='lparen token'>(</span><span class='my_offset identifier id'>my_offset</span> <span class='plus op'>+</span> <span class='next_idx identifier id'>next_idx</span> <span class='geq op'>&gt;=</span> <span class='buf_size identifier id'>buf_size</span><span class='lparen token'>(</span><span class='my_buf identifier id'>my_buf</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='my_buf identifier id'>my_buf</span> <span class='eq op'>==</span> <span class='@buf_tail_idx ivar id'>@buf_tail_idx</span><span class='rparen token'>)</span>
      <span class='unless unless kw'>unless</span> <span class='add_buf identifier id'>add_buf</span>
        <span class='break break kw'>break</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='next_idx identifier id'>next_idx</span> <span class='assign token'>=</span> <span class='my_offset identifier id'>my_offset</span> <span class='plus op'>+</span> <span class='next_idx identifier id'>next_idx</span> <span class='minus op'>-</span> <span class='buf_size identifier id'>buf_size</span><span class='lparen token'>(</span><span class='my_buf identifier id'>my_buf</span><span class='rparen token'>)</span>
    <span class='my_buf identifier id'>my_buf</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
    <span class='my_offset identifier id'>my_offset</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='end end kw'>end</span>
  <span class='loc identifier id'>loc</span> <span class='assign token'>=</span> <span class='my_offset identifier id'>my_offset</span> <span class='plus op'>+</span> <span class='next_idx identifier id'>next_idx</span>
  <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='n identifier id'>n</span>
    <span class='return return kw'>return</span> <span class='@buf_list ivar id'>@buf_list</span><span class='lbrack token'>[</span><span class='my_buf identifier id'>my_buf</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='loc identifier id'>loc</span><span class='rbrack token'>]</span>           <span class='comment val'># Fixnum of char code.</span>
  <span class='elsif elsif kw'>elsif</span> <span class='lparen token'>(</span><span class='loc identifier id'>loc</span> <span class='plus op'>+</span> <span class='n identifier id'>n</span> <span class='minus op'>-</span> <span class='integer val'>1</span> <span class='lt op'>&lt;</span> <span class='buf_size identifier id'>buf_size</span><span class='lparen token'>(</span><span class='my_buf identifier id'>my_buf</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='return return kw'>return</span> <span class='@buf_list ivar id'>@buf_list</span><span class='lbrack token'>[</span><span class='my_buf identifier id'>my_buf</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='loc identifier id'>loc</span><span class='comma token'>,</span> <span class='n identifier id'>n</span><span class='rbrack token'>]</span>        <span class='comment val'># String.</span>
  <span class='else else kw'>else</span> <span class='comment val'># should do loop insted of (tail) recursive call...</span>
    <span class='res identifier id'>res</span> <span class='assign token'>=</span> <span class='@buf_list ivar id'>@buf_list</span><span class='lbrack token'>[</span><span class='my_buf identifier id'>my_buf</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='loc identifier id'>loc</span><span class='comma token'>,</span> <span class='BufSize constant id'>BufSize</span><span class='rbrack token'>]</span>
    <span class='size_added identifier id'>size_added</span> <span class='assign token'>=</span> <span class='buf_size identifier id'>buf_size</span><span class='lparen token'>(</span><span class='my_buf identifier id'>my_buf</span><span class='rparen token'>)</span> <span class='minus op'>-</span> <span class='loc identifier id'>loc</span>
    <span class='if if kw'>if</span> <span class='size_added identifier id'>size_added</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
      <span class='idx identifier id'>idx</span> <span class='opasgn op'>+=</span> <span class='size_added identifier id'>size_added</span>
      <span class='n identifier id'>n</span> <span class='opasgn op'>-=</span> <span class='size_added identifier id'>size_added</span>
      <span class='ret identifier id'>ret</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='idx identifier id'>idx</span><span class='comma token'>,</span> <span class='n identifier id'>n</span><span class='rbrack token'>]</span>
      <span class='if if kw'>if</span> <span class='ret identifier id'>ret</span>
        <span class='res identifier id'>res</span> <span class='lshft op'>&lt;&lt;</span> <span class='ret identifier id'>ret</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='return return kw'>return</span> <span class='res identifier id'>res</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>drop</h3>
</div><div id="drop-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>drop</span><span class='args'>(n)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
drop a string from the stream. returns dropped size. at EOF, dropped size
might not equals to arg n. Once you drop the head of the stream, access to
the dropped part via [] or get returns nil.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/csv.rb', line 854</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/csv.rb#L854">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879
880</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='drop identifier id'>drop</span><span class='lparen token'>(</span><span class='n identifier id'>n</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='is_eos? fid id'>is_eos?</span>
    <span class='return return kw'>return</span> <span class='integer val'>0</span>
  <span class='end end kw'>end</span>
  <span class='size_dropped identifier id'>size_dropped</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='while while kw'>while</span> <span class='lparen token'>(</span><span class='n identifier id'>n</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='@is_eos ivar id'>@is_eos</span> <span class='or or kw'>or</span> <span class='lparen token'>(</span><span class='@cur_buf ivar id'>@cur_buf</span> <span class='neq op'>!=</span> <span class='@buf_tail_idx ivar id'>@buf_tail_idx</span><span class='rparen token'>)</span>
      <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='@offset ivar id'>@offset</span> <span class='plus op'>+</span> <span class='n identifier id'>n</span> <span class='lt op'>&lt;</span> <span class='buf_size identifier id'>buf_size</span><span class='lparen token'>(</span><span class='@cur_buf ivar id'>@cur_buf</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
        <span class='size_dropped identifier id'>size_dropped</span> <span class='opasgn op'>+=</span> <span class='n identifier id'>n</span>
        <span class='@offset ivar id'>@offset</span> <span class='opasgn op'>+=</span> <span class='n identifier id'>n</span>
        <span class='n identifier id'>n</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
      <span class='else else kw'>else</span>
        <span class='size identifier id'>size</span> <span class='assign token'>=</span> <span class='buf_size identifier id'>buf_size</span><span class='lparen token'>(</span><span class='@cur_buf ivar id'>@cur_buf</span><span class='rparen token'>)</span> <span class='minus op'>-</span> <span class='@offset ivar id'>@offset</span>
        <span class='size_dropped identifier id'>size_dropped</span> <span class='opasgn op'>+=</span> <span class='size identifier id'>size</span>
        <span class='n identifier id'>n</span> <span class='opasgn op'>-=</span> <span class='size identifier id'>size</span>
        <span class='@offset ivar id'>@offset</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
        <span class='unless unless kw'>unless</span> <span class='rel_buf identifier id'>rel_buf</span>
          <span class='unless unless kw'>unless</span> <span class='add_buf identifier id'>add_buf</span>
            <span class='break break kw'>break</span>
          <span class='end end kw'>end</span>
          <span class='@cur_buf ivar id'>@cur_buf</span> <span class='assign token'>=</span> <span class='@buf_tail_idx ivar id'>@buf_tail_idx</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='size_dropped identifier id'>size_dropped</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>is_eos?</h3>
</div><div id="is_eos-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>is_eos?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/csv.rb', line 882</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/csv.rb#L882">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">882
883
884</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='is_eos? fid id'>is_eos?</span>
  <span class='return return kw'>return</span> <span class='idx_is_eos? fid id'>idx_is_eos?</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>