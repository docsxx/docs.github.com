<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>evanphx's rubinius - Class: ERB - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/evanphx/commits/rubinius/master" rel="alternate" title="Recent Commits to rubinius:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("evanphx", "rubinius", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("evanphx", "rubinius", "a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/evanphx/rubinius/tree/">Source</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/network">Network</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/evanphx/rubinius">Wiki</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/graphs">Graphs</a></li>                    
            <li class="active"><a href="/evanphx/rubinius">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/evanphx">evanphx</a> / <b><a href="http://github.com/evanphx/rubinius/tree">rubinius</a></b>        
                <a id="namespaces_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class ERB">
  <h1>Class: ERB</h1>
  <div class="section docstring">
  <p>
&#8212; ERB::DefMethod
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">filename</td>
          <td class="readwrite">
            [<span id='filename-instance_method'>R</span><span id='filename=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The optional <em>filename</em> argument passed to Kernel#eval when the ERB
code is run.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">src</td>
          <td class="readwrite">
            [<span id='src-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The Ruby code generated by ERB.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="Revision-constant">Revision</dt>
      <dd>'$Date: 2007-02-12 15:01:19 -0800 (Mon, 12 Feb 2007) $'    </dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(str, safe_level = nil, trim_mode = nil, eoutvar = '_erbout')</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Constructs a new ERB object with the template specified in <em>str</em>.
</p>
<p>
An ERB object works by building a chunk of Ruby code that will output the
completed template when run. If <em>safe_level</em> is set to a non-nil
value, ERB code will be run in a separate thread with <b>$SAFE</b> set to
the provided level.
</p>
<p>
If <em>trim_mode</em> is passed a String containing one or more of the
following modifiers, ERB will adjust its code generation as listed:
</p>
<pre class="code">
    <span class='string val'>%  </span><span class='enables identifier id'>enables</span> <span class='Ruby constant id'>Ruby</span> <span class='code identifier id'>code</span> <span class='processing identifier id'>processing</span> <span class='for for kw'>for</span> <span class='lines identifier id'>lines</span> <span class='beginning identifier id'>beginning</span> <span class='with identifier id'>with</span> <span class='mod op'>%</span>
    <span class='lt op'>&lt;</span><span class='gt op'>&gt;</span> <span class='omit identifier id'>omit</span> <span class='newline identifier id'>newline</span> <span class='for for kw'>for</span> <span class='lines identifier id'>lines</span> <span class='starting identifier id'>starting</span> <span class='with identifier id'>with</span> <span class='lt op'>&lt;</span><span class='string val'>% and </span><span class='ending identifier id'>ending</span> <span class='in in kw'>in</span> <span class='string val'>%&gt;
    &gt;</span>  <span class='omit identifier id'>omit</span> <span class='newline identifier id'>newline</span> <span class='for for kw'>for</span> <span class='lines identifier id'>lines</span> <span class='ending identifier id'>ending</span> <span class='in in kw'>in</span> <span class='string val'>%&gt;
</span></pre>
<p>
<em>eoutvar</em> can be used to set the name of the variable ERB will build
up its output in. This is useful when you need to run multiple ERB
templates through the same binding and/or when you want to control where
output ends up. Pass the name of the variable to be used inside a String.
</p>
<h3>Example</h3>
<pre class="code">
 <span class='require identifier id'>require</span> <span class='string val'>&quot;erb&quot;</span>

 <span class='comment val'># build data class</span>
 <span class='class class kw'>class</span> <span class='Listings constant id'>Listings</span>
   <span class='PRODUCT constant id'>PRODUCT</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Chicken Fried Steak&quot;</span><span class='comma token'>,</span>
               <span class='symbol val'>:desc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;A well messages pattie, breaded and fried.&quot;</span><span class='comma token'>,</span>
               <span class='symbol val'>:cost</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='float val'>9.95</span> <span class='rbrace token'>}</span>

   <span class='attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:product</span><span class='comma token'>,</span> <span class='symbol val'>:price</span>

   <span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span> <span class='product identifier id'>product</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span><span class='comma token'>,</span> <span class='price identifier id'>price</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span> <span class='rparen token'>)</span>
     <span class='@product ivar id'>@product</span> <span class='assign token'>=</span> <span class='product identifier id'>product</span>
     <span class='@price ivar id'>@price</span> <span class='assign token'>=</span> <span class='price identifier id'>price</span>
   <span class='end end kw'>end</span>

   <span class='def def kw'>def</span> <span class='build identifier id'>build</span>
     <span class='b identifier id'>b</span> <span class='assign token'>=</span> <span class='binding identifier id'>binding</span>
     <span class='comment val'># create and run templates, filling member data variebles</span>
     <span class='ERB constant id'>ERB</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;&lt;%= PRODUCT[:name] %&gt;\n&lt;%= PRODUCT[:desc] %&gt;\n&quot;</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/^\s&lt;tt&gt;/</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;@product&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='result identifier id'>result</span> <span class='b identifier id'>b</span>
     <span class='ERB constant id'>ERB</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;&lt;%= PRODUCT[:name] %&gt; -- &lt;%= PRODUCT[:cost] %&gt;\n&lt;%= PRODUCT[:desc] %&gt;\n&quot;</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/^\s&lt;/</span><span class='tt identifier id'>tt</span><span class='gt op'>&gt;</span><span class='regexp val'>/, &quot;&quot;), 0, &quot;&quot;, &quot;@price&quot;).result b
   end
 end

 # setup template data
 listings = Listings.new
 listings.build

 puts listings.product + &quot;\n&quot; + listings.price
</span></pre>
<p>
<em>Generates</em>
</p>
<pre class="code">
 <span class='Chicken constant id'>Chicken</span> <span class='Fried constant id'>Fried</span> <span class='Steak constant id'>Steak</span>
 <span class='A constant id'>A</span> <span class='well identifier id'>well</span> <span class='messages identifier id'>messages</span> <span class='pattie identifier id'>pattie</span><span class='comma token'>,</span> <span class='breaded identifier id'>breaded</span> <span class='and and kw'>and</span> <span class='fried identifier id'>fried</span><span class='dot token'>.</span>

 <span class='Chicken constant id'>Chicken</span> <span class='Fried constant id'>Fried</span> <span class='Steak constant id'>Steak</span> <span class='minus op'>-</span><span class='minus op'>-</span> <span class='float val'>9.95</span>
 <span class='A constant id'>A</span> <span class='well identifier id'>well</span> <span class='messages identifier id'>messages</span> <span class='pattie identifier id'>pattie</span><span class='comma token'>,</span> <span class='breaded identifier id'>breaded</span> <span class='and and kw'>and</span> <span class='fried identifier id'>fried</span><span class='dot token'>.</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/erb.rb', line 687</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/erb.rb#L687">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">687
688
689
690
691
692
693</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='str identifier id'>str</span><span class='comma token'>,</span> <span class='safe_level identifier id'>safe_level</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='trim_mode identifier id'>trim_mode</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='eoutvar identifier id'>eoutvar</span><span class='assign token'>=</span><span class='string val'>'_erbout'</span><span class='rparen token'>)</span>
  <span class='@safe_level ivar id'>@safe_level</span> <span class='assign token'>=</span> <span class='safe_level identifier id'>safe_level</span>
  <span class='compiler identifier id'>compiler</span> <span class='assign token'>=</span> <span class='ERB constant id'>ERB</span><span class='colon2 op'>::</span><span class='Compiler constant id'>Compiler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='trim_mode identifier id'>trim_mode</span><span class='rparen token'>)</span>
  <span class='set_eoutvar identifier id'>set_eoutvar</span><span class='lparen token'>(</span><span class='compiler identifier id'>compiler</span><span class='comma token'>,</span> <span class='eoutvar identifier id'>eoutvar</span><span class='rparen token'>)</span>
  <span class='@src ivar id'>@src</span> <span class='assign token'>=</span> <span class='compiler identifier id'>compiler</span><span class='dot token'>.</span><span class='compile identifier id'>compile</span><span class='lparen token'>(</span><span class='str identifier id'>str</span><span class='rparen token'>)</span>
  <span class='@filename ivar id'>@filename</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#version-class_method">version</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns revision information for the erb.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#def_class-instance_method">#def_class</span><span class='args'>(superklass = Object, methodname = 'result')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#def_method-instance_method">#def_method</span><span class='args'>(mod, methodname, fname = '(ERB)')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#def_module-instance_method">#def_module</span><span class='args'>(methodname = 'erb')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#result-instance_method">#result</span><span class='args'>(b = TOPLEVEL_BINDING)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Executes the generated ERB code to produce a completed template, returning
the results of that code.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#run-instance_method">#run</span><span class='args'>(b = TOPLEVEL_BINDING)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Generate results and print them.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_eoutvar-instance_method">#set_eoutvar</span><span class='args'>(compiler, eoutvar = '_erbout')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Can be used to set <em>eoutvar</em> as described in ERB#new.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>version</h3>
</div><div id="version-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>version</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns revision information for the erb.rb module.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/erb.rb', line 242</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/erb.rb#L242">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">242
243
244</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='version identifier id'>version</span>
  <span class='dstring node'>&quot;erb.rb [2.0.4 #{ERB::Revision.split[1]}]&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>def_class</h3>
</div><div id="def_class-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>def_class</span><span class='args'>(superklass = Object, methodname = 'result')</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/erb.rb', line 757</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/erb.rb#L757">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">757
758
759
760
761</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='def_class identifier id'>def_class</span><span class='lparen token'>(</span><span class='superklass identifier id'>superklass</span><span class='assign token'>=</span><span class='Object constant id'>Object</span><span class='comma token'>,</span> <span class='methodname identifier id'>methodname</span><span class='assign token'>=</span><span class='string val'>'result'</span><span class='rparen token'>)</span>  <span class='comment val'># :nodoc:</span>
  <span class='cls identifier id'>cls</span> <span class='assign token'>=</span> <span class='Class constant id'>Class</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='superklass identifier id'>superklass</span><span class='rparen token'>)</span>
  <span class='def_method identifier id'>def_method</span><span class='lparen token'>(</span><span class='cls identifier id'>cls</span><span class='comma token'>,</span> <span class='methodname identifier id'>methodname</span><span class='rparen token'>)</span>
  <span class='cls identifier id'>cls</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>def_method</h3>
</div><div id="def_method-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>def_method</span><span class='args'>(mod, methodname, fname = '(ERB)')</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/erb.rb', line 747</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/erb.rb#L747">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">747
748
749</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='def_method identifier id'>def_method</span><span class='lparen token'>(</span><span class='mod identifier id'>mod</span><span class='comma token'>,</span> <span class='methodname identifier id'>methodname</span><span class='comma token'>,</span> <span class='fname identifier id'>fname</span><span class='assign token'>=</span><span class='string val'>'(ERB)'</span><span class='rparen token'>)</span>  <span class='comment val'># :nodoc:</span>
  <span class='mod identifier id'>mod</span><span class='dot token'>.</span><span class='module_eval identifier id'>module_eval</span><span class='lparen token'>(</span><span class='dstring node'>&quot;def #{methodname}\n&quot;</span> <span class='plus op'>+</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='src identifier id'>src</span> <span class='plus op'>+</span> <span class='string val'>&quot;\nend\n&quot;</span><span class='comma token'>,</span> <span class='fname identifier id'>fname</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>def_module</h3>
</div><div id="def_module-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>def_module</span><span class='args'>(methodname = 'erb')</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/erb.rb', line 751</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/erb.rb#L751">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">751
752
753
754
755</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='def_module identifier id'>def_module</span><span class='lparen token'>(</span><span class='methodname identifier id'>methodname</span><span class='assign token'>=</span><span class='string val'>'erb'</span><span class='rparen token'>)</span>  <span class='comment val'># :nodoc:</span>
  <span class='mod identifier id'>mod</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='def_method identifier id'>def_method</span><span class='lparen token'>(</span><span class='mod identifier id'>mod</span><span class='comma token'>,</span> <span class='methodname identifier id'>methodname</span><span class='rparen token'>)</span>
  <span class='mod identifier id'>mod</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>result</h3>
</div><div id="result-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>result</span><span class='args'>(b = TOPLEVEL_BINDING)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Executes the generated ERB code to produce a completed template, returning
the results of that code. (See ERB#new for details on how this process can
be affected by <em>safe_level</em>.)
</p>
<p>
<em>b</em> accepts a Binding or Proc object which is used to set the
context of code evaluation.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/erb.rb', line 735</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/erb.rb#L735">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">735
736
737
738
739
740
741
742
743
744
745</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='result identifier id'>result</span><span class='lparen token'>(</span><span class='b identifier id'>b</span><span class='assign token'>=</span><span class='TOPLEVEL_BINDING constant id'>TOPLEVEL_BINDING</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='@safe_level ivar id'>@safe_level</span>
    <span class='th identifier id'>th</span> <span class='assign token'>=</span> <span class='Thread constant id'>Thread</span><span class='dot token'>.</span><span class='start identifier id'>start</span> <span class='lbrace token'>{</span>
      <span class='$SAFE gvar id'>$SAFE</span> <span class='assign token'>=</span> <span class='@safe_level ivar id'>@safe_level</span>
      <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@src ivar id'>@src</span><span class='comma token'>,</span> <span class='b identifier id'>b</span><span class='comma token'>,</span> <span class='lparen token'>(</span><span class='@filename ivar id'>@filename</span> <span class='orop op'>||</span> <span class='string val'>'(erb)'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
    <span class='rbrace token'>}</span>
    <span class='return return kw'>return</span> <span class='th identifier id'>th</span><span class='dot token'>.</span><span class='value identifier id'>value</span>
  <span class='else else kw'>else</span>
    <span class='return return kw'>return</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@src ivar id'>@src</span><span class='comma token'>,</span> <span class='b identifier id'>b</span><span class='comma token'>,</span> <span class='lparen token'>(</span><span class='@filename ivar id'>@filename</span> <span class='orop op'>||</span> <span class='string val'>'(erb)'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>run</h3>
</div><div id="run-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>run</span><span class='args'>(b = TOPLEVEL_BINDING)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Generate results and print them. (see ERB#result)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/erb.rb', line 723</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/erb.rb#L723">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">723
724
725</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='run identifier id'>run</span><span class='lparen token'>(</span><span class='b identifier id'>b</span><span class='assign token'>=</span><span class='TOPLEVEL_BINDING constant id'>TOPLEVEL_BINDING</span><span class='rparen token'>)</span>
  <span class='print identifier id'>print</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='result identifier id'>result</span><span class='lparen token'>(</span><span class='b identifier id'>b</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_eoutvar</h3>
</div><div id="set_eoutvar-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_eoutvar</span><span class='args'>(compiler, eoutvar = '_erbout')</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Can be used to set <em>eoutvar</em> as described in ERB#new. It&#8217;s
probably easier to just use the constructor though, since calling this
method requires the setup of an ERB <em>compiler</em> object.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/erb.rb', line 707</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/erb.rb#L707">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">707
708
709
710
711
712
713
714
715
716
717
718
719
720</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_eoutvar identifier id'>set_eoutvar</span><span class='lparen token'>(</span><span class='compiler identifier id'>compiler</span><span class='comma token'>,</span> <span class='eoutvar identifier id'>eoutvar</span> <span class='assign token'>=</span> <span class='string val'>'_erbout'</span><span class='rparen token'>)</span>
  <span class='compiler identifier id'>compiler</span><span class='dot token'>.</span><span class='put_cmd identifier id'>put_cmd</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{eoutvar}.concat&quot;</span>
  <span class='compiler identifier id'>compiler</span><span class='dot token'>.</span><span class='insert_cmd identifier id'>insert_cmd</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{eoutvar}.concat&quot;</span>

  <span class='cmd identifier id'>cmd</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='cmd identifier id'>cmd</span><span class='dot token'>.</span><span class='push identifier id'>push</span> <span class='dstring node'>&quot;#{eoutvar} = ''&quot;</span>

  <span class='compiler identifier id'>compiler</span><span class='dot token'>.</span><span class='pre_cmd identifier id'>pre_cmd</span> <span class='assign token'>=</span> <span class='cmd identifier id'>cmd</span>

  <span class='cmd identifier id'>cmd</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='cmd identifier id'>cmd</span><span class='dot token'>.</span><span class='push identifier id'>push</span><span class='lparen token'>(</span><span class='eoutvar identifier id'>eoutvar</span><span class='rparen token'>)</span>

  <span class='compiler identifier id'>compiler</span><span class='dot token'>.</span><span class='post_cmd identifier id'>post_cmd</span> <span class='assign token'>=</span> <span class='cmd identifier id'>cmd</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>