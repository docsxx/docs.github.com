<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>evanphx's rubinius - Class: Options - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/evanphx/commits/rubinius/master" rel="alternate" title="Recent Commits to rubinius:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("evanphx", "rubinius", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("evanphx", "rubinius", "a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/evanphx/rubinius/tree/">Source</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/network">Network</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/evanphx/rubinius">Wiki</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/graphs">Graphs</a></li>                    
            <li class="active"><a href="/evanphx/rubinius">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/evanphx">evanphx</a> / <b><a href="http://github.com/evanphx/rubinius/tree">rubinius</a></b>        
                <a id="namespaces_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Options">
  <h1>Class: Options</h1>
  <div class="section docstring">
  <p>
A simple, independent option parser originally from the rs project.
</p>

</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(message = '', &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Create an instance. If a Hash of options is given, it is passed to
#configure.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/options.rb', line 6</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/options.rb#L6">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">6
7
8
9
10</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='message identifier id'>message</span> <span class='assign token'>=</span> <span class='string val'>''</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@allowed ivar id'>@allowed</span><span class='comma token'>,</span> <span class='@header ivar id'>@header</span><span class='comma token'>,</span> <span class='@optdesc ivar id'>@optdesc</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='message identifier id'>message</span><span class='comma token'>,</span> <span class='string val'>''</span>

  <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block identifier id'>block</span>
<span class='end end kw'>end</span>                                 <span class='comment val'># initialize</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#header-instance_method">#header</span><span class='args'>(message)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Text to show above options in usage message.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#on_error-instance_method">#on_error</span><span class='args'>(&amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Optional error handling block.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#option-instance_method">#option</span><span class='args'>(definition, args = :none)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Adds an option to the parser.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#parse-instance_method">#parse</span><span class='args'>(arguments)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The accepted forms for options are:.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#usage-instance_method">#usage</span><span class='args'></span>
        <span class='block'></span>
        
          <span class='alias'>#help</span>
        
      </th>
      <td class="docstring">
        <p>
Generate a usage message.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>header</h3>
</div><div id="header-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>header</span><span class='args'>(message)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Text to show above options in usage message
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/options.rb', line 59</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/options.rb#L59">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">59
60
61</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='header identifier id'>header</span><span class='lparen token'>(</span><span class='message identifier id'>message</span><span class='rparen token'>)</span>
  <span class='@header ivar id'>@header</span> <span class='assign token'>=</span> <span class='message identifier id'>message</span>
<span class='end end kw'>end</span>                                 <span class='comment val'># header</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>on_error</h3>
</div><div id="on_error-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>on_error</span><span class='args'>(&amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Optional error handling block
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/options.rb', line 54</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/options.rb#L54">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">54
55
56</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='on_error identifier id'>on_error</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@error_block ivar id'>@error_block</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>option</h3>
</div><div id="option-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>option</span><span class='args'>(definition, args = :none)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Adds an option to the parser. The option must be defined as a string of the
format &quot;-s --long Description&quot;. The first element is a dash
followed by a character (the &quot;short option&quot;), the second is two
dashes followed by two or more characters (the &quot;long option&quot;).
The rest of the string becomes the third element which is used as the
description of the option&#8217;s purpose. The elements are separated by
any number of whitespace characters.
</p>
<p>
By default an option takes no arguments but a second argument may be given
to designate a different argument count. The two last versions are greedy
and will consume all arguments until the next option switch or the end of
input.
</p>
<pre class="code">
  <span class='symbol val'>:none</span>   <span class='no identifier id'>no</span> <span class='arguments identifier id'>arguments</span>
  <span class='symbol val'>:one</span>    <span class='exactly identifier id'>exactly</span> <span class='one identifier id'>one</span> <span class='argument identifier id'>argument</span>
  <span class='symbol val'>:many</span>   <span class='one identifier id'>one</span> <span class='or or kw'>or</span> <span class='more identifier id'>more</span>
  <span class='symbol val'>:any</span>    <span class='zero identifier id'>zero</span> <span class='or or kw'>or</span> <span class='more identifier id'>more</span>
</pre>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>ArgumentError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/options.rb', line 30</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/options.rb#L30">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='option identifier id'>option</span><span class='lparen token'>(</span><span class='definition identifier id'>definition</span><span class='comma token'>,</span> <span class='args identifier id'>args</span> <span class='assign token'>=</span> <span class='symbol val'>:none</span><span class='rparen token'>)</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='definition identifier id'>definition</span><span class='dot token'>.</span><span class='scan identifier id'>scan</span> <span class='regexp val'>/-(\w)\s+--(\w\S+?)\s+?(\S.*)/</span>
  <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;Option format is '-s --long Description here'&quot;</span> <span class='if if_mod kw'>if</span> <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>

  <span class='short identifier id'>short</span><span class='comma token'>,</span> <span class='long identifier id'>long</span><span class='comma token'>,</span> <span class='desc identifier id'>desc</span> <span class='assign token'>=</span> <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='first identifier id'>first</span>

  <span class='comment val'># Store the data along with a cross-reference</span>
  <span class='@allowed ivar id'>@allowed</span><span class='lbrack token'>[</span><span class='short identifier id'>short</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:desc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='desc identifier id'>desc</span><span class='comma token'>,</span> <span class='symbol val'>:args</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='symbol val'>:other</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='long identifier id'>long</span><span class='rbrace token'>}</span>
  <span class='@allowed ivar id'>@allowed</span><span class='lbrack token'>[</span><span class='long identifier id'>long</span><span class='rbrack token'>]</span>  <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:desc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='desc identifier id'>desc</span><span class='comma token'>,</span> <span class='symbol val'>:args</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='symbol val'>:other</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='short identifier id'>short</span><span class='rbrace token'>}</span>

  <span class='comment val'># Add to usage now to maintain order</span>
  <span class='argdesc identifier id'>argdesc</span>   <span class='assign token'>=</span> <span class='case case kw'>case</span> <span class='args identifier id'>args</span>
                <span class='when when kw'>when</span> <span class='symbol val'>:one</span> <span class='then then kw'>then</span> <span class='string val'>'ARG'</span>
                <span class='when when kw'>when</span> <span class='symbol val'>:any</span> <span class='then then kw'>then</span> <span class='string val'>'[ARG, ...]'</span>
                <span class='when when kw'>when</span> <span class='symbol val'>:many</span> <span class='then then kw'>then</span> <span class='string val'>'ARG1, ARG2[, ...]'</span>
                <span class='else else kw'>else</span>         
                  <span class='string val'>''</span>
              <span class='end end kw'>end</span>
              
  <span class='@optdesc ivar id'>@optdesc</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;        Options:\n\n&quot;</span> <span class='if if_mod kw'>if</span> <span class='@optdesc ivar id'>@optdesc</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='@optdesc ivar id'>@optdesc</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;        #{&quot;-#{short} --#{long} #{argdesc}&quot;.ljust(30)} #{desc}\n&quot;</span> 
<span class='end end kw'>end</span>                                 <span class='comment val'># option</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>parse</h3>
</div><div id="parse-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>parse</span><span class='args'>(arguments)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The accepted forms for options are:
</p>
<p>
Short opts: -h, -ht, -h ARG, -ht ARG (same as -h -t ARG). Long opts:
--help, --help ARG, (No joining.)
</p>
<p>
The returned Hash is indexed by the names of the found options. These
indices point to an Array of arguments to that option if any, or just true
if not. The Hash also contains a special index, :args, containing all of
the non-option arguments.
</p>
<p>
Upon encountering an error, the parser will raise an ArgumentError with an
explanation. This behaviour may be overridden by supplying a block through
#on_error. The block will be given the Options instance and the Exception
object.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>ArgumentError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/options.rb', line 86</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/options.rb#L86">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='arguments identifier id'>arguments</span><span class='rparen token'>)</span>
  <span class='expecting identifier id'>expecting</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>     <span class='comment val'># An option may be expecting an argument</span>
  <span class='@opts ivar id'>@opts</span>     <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>      <span class='comment val'># Options parsed</span>
  <span class='@nonopts ivar id'>@nonopts</span>  <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>      <span class='comment val'># Non-option arguments</span>

  <span class='arguments identifier id'>arguments</span> <span class='assign token'>=</span> <span class='arguments identifier id'>arguments</span><span class='dot token'>.</span><span class='split identifier id'>split</span> <span class='unless unless_mod kw'>unless</span> <span class='arguments identifier id'>arguments</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;Empty input&quot;</span> <span class='if if_mod kw'>if</span> <span class='arguments identifier id'>arguments</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>

  <span class='arguments identifier id'>arguments</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='opt identifier id'>opt</span><span class='bitor op'>|</span>
    <span class='comment val'># Option type</span>
    <span class='if if kw'>if</span> <span class='opt identifier id'>opt</span> <span class='match op'>=~</span> <span class='regexp val'>/(-{1,2})(\S+)/</span>
      <span class='comment val'># No more arguments for the previous option</span>
      <span class='expecting identifier id'>expecting</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>

      <span class='comment val'># Single args may need to be split --note: only the last one can take an arg!</span>
      <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='if if kw'>if</span> <span class='$1 nth_ref id'>$1</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
              <span class='$2 nth_ref id'>$2</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>//</span><span class='rparen token'>)</span>
             <span class='else else kw'>else</span>
              <span class='lbrack token'>[</span><span class='$2 nth_ref id'>$2</span><span class='rbrack token'>]</span>
             <span class='end end kw'>end</span>

      <span class='comment val'># Parse individual flags if any</span>
      <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='o identifier id'>o</span><span class='bitor op'>|</span>
        <span class='data identifier id'>data</span> <span class='assign token'>=</span> <span class='@allowed ivar id'>@allowed</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='o identifier id'>o</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='x identifier id'>x</span><span class='bitor op'>|</span> <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Invalid option #{x}&quot;</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>

        <span class='comment val'># Option takes arguments?</span>
        <span class='if if kw'>if</span> <span class='lbrack token'>[</span><span class='symbol val'>:one</span><span class='comma token'>,</span> <span class='symbol val'>:many</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span>
          <span class='comment val'># Prepare for incoming data</span>
          <span class='@opts ivar id'>@opts</span><span class='lbrack token'>[</span><span class='o identifier id'>o</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='semicolon token'>;</span> <span class='expecting identifier id'>expecting</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='o identifier id'>o</span><span class='comma token'>,</span> <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
          
        <span class='elsif elsif kw'>elsif</span> <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='symbol val'>:any</span>
          <span class='comment val'># Cheat</span>
          <span class='@opts ivar id'>@opts</span><span class='lbrack token'>[</span><span class='o identifier id'>o</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span><span class='semicolon token'>;</span> <span class='expecting identifier id'>expecting</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='o identifier id'>o</span><span class='comma token'>,</span> <span class='symbol val'>:many</span><span class='rbrack token'>]</span> 

        <span class='else else kw'>else</span>
          <span class='@opts ivar id'>@opts</span><span class='lbrack token'>[</span><span class='o identifier id'>o</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
        <span class='end end kw'>end</span>                       <span class='comment val'># if [:yes, :many]</span>
      <span class='end end kw'>end</span>                         <span class='comment val'># opts.each</span>

    <span class='comment val'># Nonoption arguments</span>
    <span class='else else kw'>else</span>
      <span class='comment val'># Previous option accepts arguments</span>
      <span class='if if kw'>if</span> <span class='expecting identifier id'>expecting</span>
        <span class='@opts ivar id'>@opts</span><span class='lbrack token'>[</span><span class='expecting identifier id'>expecting</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='@opts ivar id'>@opts</span><span class='lbrack token'>[</span><span class='expecting identifier id'>expecting</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>

        <span class='comment val'># Store the argument with the option</span>
        <span class='@opts ivar id'>@opts</span><span class='lbrack token'>[</span><span class='expecting identifier id'>expecting</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='opt identifier id'>opt</span>

        <span class='comment val'># No more arguments unless so specified</span>
        <span class='expecting identifier id'>expecting</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span> <span class='unless unless_mod kw'>unless</span> <span class='expecting identifier id'>expecting</span><span class='dot token'>.</span><span class='last identifier id'>last</span> <span class='eq op'>==</span> <span class='symbol val'>:many</span>

      <span class='comment val'># Freestanding argument</span>
      <span class='else else kw'>else</span>
        <span class='@nonopts ivar id'>@nonopts</span> <span class='lshft op'>&lt;&lt;</span> <span class='opt identifier id'>opt</span>
      <span class='end end kw'>end</span>                           <span class='comment val'># if expecting</span>
    <span class='end end kw'>end</span>                             <span class='comment val'># case opt</span>
  <span class='end end kw'>end</span>                               <span class='comment val'># arguments...each</span>

  <span class='comment val'># Sanity checks and crossrefs</span>
  <span class='@opts ivar id'>@opts</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='bitor op'>|</span> 
    <span class='o identifier id'>o</span> <span class='assign token'>=</span> <span class='@opts ivar id'>@opts</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='rbrack token'>]</span>

    <span class='@opts ivar id'>@opts</span><span class='lbrack token'>[</span><span class='@allowed ivar id'>@allowed</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:other</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='o identifier id'>o</span>

    <span class='case case kw'>case</span> <span class='@allowed ivar id'>@allowed</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:one</span>
        <span class='if if kw'>if</span> <span class='o identifier id'>o</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='or or kw'>or</span> <span class='o identifier id'>o</span> <span class='eq op'>==</span> <span class='true true kw'>true</span> <span class='or or kw'>or</span> <span class='o identifier id'>o</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='neq op'>!=</span> <span class='integer val'>1</span>
          <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{key} must have one argument&quot;</span> 
        <span class='end end kw'>end</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:many</span>
        <span class='if if kw'>if</span> <span class='o identifier id'>o</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='or or kw'>or</span> <span class='o identifier id'>o</span> <span class='eq op'>==</span> <span class='true true kw'>true</span> <span class='or or kw'>or</span> <span class='o identifier id'>o</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='lt op'>&lt;</span> <span class='integer val'>2</span>
          <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Too few arguments for #{key}&quot;</span> 
        <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span> 

  <span class='@opts ivar id'>@opts</span><span class='lbrack token'>[</span><span class='symbol val'>:args</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='@nonopts ivar id'>@nonopts</span>
  <span class='@opts ivar id'>@opts</span>

<span class='rescue rescue kw'>rescue</span> <span class='ArgumentError constant id'>ArgumentError</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ex identifier id'>ex</span>
  <span class='raise identifier id'>raise</span> <span class='ex identifier id'>ex</span> <span class='unless unless_mod kw'>unless</span> <span class='@error_block ivar id'>@error_block</span>
  <span class='@error_block ivar id'>@error_block</span><span class='dot token'>.</span><span class='call identifier id'>call</span> <span class='self self kw'>self</span><span class='comma token'>,</span> <span class='ex identifier id'>ex</span>
<span class='end end kw'>end</span>                                 <span class='comment val'># parse</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>usage</h3>
</div><div id="usage-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>usage</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="help-instance_method">help</tt>
  
</p>
</div><div class="section docstring">
  <p>
Generate a usage message
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/options.rb', line 64</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/options.rb#L64">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">64
65
66</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='usage identifier id'>usage</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='@header ivar id'>@header</span> <span class='plus op'>+</span> <span class='@optdesc ivar id'>@optdesc</span>
<span class='end end kw'>end</span>                                 <span class='comment val'># usage</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>