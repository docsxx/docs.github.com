<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>evanphx's rubinius - Module: DRb - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/evanphx/commits/rubinius/master" rel="alternate" title="Recent Commits to rubinius:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("evanphx", "rubinius", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("evanphx", "rubinius", "a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/evanphx/rubinius/tree/">Source</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/network">Network</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/evanphx/rubinius">Wiki</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/graphs">Graphs</a></li>                    
            <li class="active"><a href="/evanphx/rubinius">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/evanphx">evanphx</a> / <b><a href="http://github.com/evanphx/rubinius/tree">rubinius</a></b>        
                <a id="namespaces_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module DRb">
  <h1>Module: DRb</h1>
  <div class="section docstring">
  <h2>Overview</h2>
<p>
dRuby is a distributed object system for Ruby. It is written in pure Ruby
and uses its own protocol. No add-in services are needed beyond those
provided by the Ruby runtime, such as TCP sockets. It does not rely on or
interoperate with other distributed object systems such as CORBA, RMI, or
.NET.
</p>
<p>
dRuby allows methods to be called in one Ruby process upon a Ruby object
located in another Ruby process, even on another machine. References to
objects can be passed between processes. Method arguments and return values
are dumped and loaded in marshalled format. All of this is done
transparently to both the caller of the remote method and the object that
it is called upon.
</p>
<p>
An object in a remote process is locally represented by a DRb::DRbObject
instance. This acts as a sort of proxy for the remote object. Methods
called upon this DRbObject instance are forwarded to its remote object.
This is arranged dynamically at run time. There are no statically declared
interfaces for remote objects, such as CORBA&#8217;s IDL.
</p>
<p>
dRuby calls made into a process are handled by a DRb::DRbServer instance
within that process. This reconstitutes the method call, invokes it upon
the specified local object, and returns the value to the remote caller. Any
object can receive calls over dRuby. There is no need to implement a
special interface, or mixin special functionality. Nor, in the general
case, does an object need to explicitly register itself with a DRbServer in
order to receive dRuby calls.
</p>
<p>
One process wishing to make dRuby calls upon another process must somehow
obtain an initial reference to an object in the remote process by some
means other than as the return value of a remote method call, as there is
initially no remote object reference it can invoke a method upon. This is
done by attaching to the server by URI. Each DRbServer binds itself to a
URI such as &#8216;druby://example.com:8787&#8217;. A DRbServer can have an
object attached to it that acts as the server&#8217;s <b>front</b>
<b>object</b>. A DRbObject can be explicitly created from the
server&#8217;s URI. This DRbObject&#8217;s remote object will be the
server&#8217;s front object. This front object can then return references
to other Ruby objects in the DRbServer&#8217;s process.
</p>
<p>
Method calls made over dRuby behave largely the same as normal Ruby method
calls made within a process. Method calls with blocks are supported, as are
raising exceptions. In addition to a method&#8217;s standard errors, a
dRuby call may also raise one of the dRuby-specific errors, all of which
are subclasses of DRb::DRbError.
</p>
<p>
Any type of object can be passed as an argument to a dRuby call or returned
as its return value. By default, such objects are dumped or marshalled at
the local end, then loaded or unmarshalled at the remote end. The remote
end therefore receives a copy of the local object, not a distributed
reference to it; methods invoked upon this copy are executed entirely in
the remote process, not passed on to the local original. This has semantics
similar to pass-by-value.
</p>
<p>
However, if an object cannot be marshalled, a dRuby reference to it is
passed or returned instead. This will turn up at the remote end as a
DRbObject instance. All methods invoked upon this remote proxy are
forwarded to the local object, as described in the discussion of
DRbObjects. This has semantics similar to the normal Ruby
pass-by-reference.
</p>
<p>
The easiest way to signal that we want an otherwise marshallable object to
be passed or returned as a DRbObject reference, rather than marshalled and
sent as a copy, is to include the DRb::DRbUndumped mixin module.
</p>
<p>
dRuby supports calling remote methods with blocks. As blocks (or rather the
Proc objects that represent them) are not marshallable, the block executes
in the local, not the remote, context. Each value yielded to the block is
passed from the remote object to the local block, then the value returned
by each block invocation is passed back to the remote execution context to
be collected, before the collected values are finally returned to the local
context as the return value of the method invocation.
</p>
<h2>Examples of usage</h2>
<p>
For more dRuby samples, see the <tt>samples</tt> directory in the full
dRuby distribution.
</p>
<h3>dRuby in client/server mode</h3>
<p>
This illustrates setting up a simple client-server drb system. Run the
server and client code in different terminals, starting the server code
first.
</p>
<h4>Server code</h4>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'drb/drb'</span>

  <span class='comment val'># The URI for the server to connect to</span>
  <span class='URI constant id'>URI</span><span class='assign token'>=</span><span class='string val'>&quot;druby://localhost:8787&quot;</span>

  <span class='class class kw'>class</span> <span class='TimeServer constant id'>TimeServer</span>

    <span class='def def kw'>def</span> <span class='get_current_time identifier id'>get_current_time</span>
      <span class='return return kw'>return</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
    <span class='end end kw'>end</span>

  <span class='end end kw'>end</span>

  <span class='comment val'># The object that handles requests on the server</span>
  <span class='FRONT_OBJECT constant id'>FRONT_OBJECT</span><span class='assign token'>=</span><span class='TimeServer constant id'>TimeServer</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

  <span class='$SAFE gvar id'>$SAFE</span> <span class='assign token'>=</span> <span class='integer val'>1</span>   <span class='comment val'># disable eval() and friends</span>

  <span class='DRb constant id'>DRb</span><span class='dot token'>.</span><span class='start_service identifier id'>start_service</span><span class='lparen token'>(</span><span class='URI constant id'>URI</span><span class='comma token'>,</span> <span class='FRONT_OBJECT constant id'>FRONT_OBJECT</span><span class='rparen token'>)</span>
  <span class='comment val'># Wait for the drb server thread to finish before exiting.</span>
  <span class='DRb constant id'>DRb</span><span class='dot token'>.</span><span class='thread identifier id'>thread</span><span class='dot token'>.</span><span class='join identifier id'>join</span>
</pre>
<h4>Client code</h4>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'drb/drb'</span>

  <span class='comment val'># The URI to connect to</span>
  <span class='SERVER_URI constant id'>SERVER_URI</span><span class='assign token'>=</span><span class='string val'>&quot;druby://localhost:8787&quot;</span>

  <span class='comment val'># Start a local DRbServer to handle callbacks.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Not necessary for this small example, but will be required</span>
  <span class='comment val'># as soon as we pass a non-marshallable object as an argument</span>
  <span class='comment val'># to a dRuby call.</span>
  <span class='DRb constant id'>DRb</span><span class='dot token'>.</span><span class='start_service identifier id'>start_service</span>

  <span class='timeserver identifier id'>timeserver</span> <span class='assign token'>=</span> <span class='DRbObject constant id'>DRbObject</span><span class='dot token'>.</span><span class='new_with_uri identifier id'>new_with_uri</span><span class='lparen token'>(</span><span class='SERVER_URI constant id'>SERVER_URI</span><span class='rparen token'>)</span>
  <span class='puts identifier id'>puts</span> <span class='timeserver identifier id'>timeserver</span><span class='dot token'>.</span><span class='get_current_time identifier id'>get_current_time</span>
</pre>
<h3>Remote objects under dRuby</h3>
<p>
This example illustrates returning a reference to an object from a dRuby
call. The Logger instances live in the server process. References to them
are returned to the client process, where methods can be invoked upon them.
These methods are executed in the server process.
</p>
<h4>Server code</h4>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'drb/drb'</span>

  <span class='URI constant id'>URI</span><span class='assign token'>=</span><span class='string val'>&quot;druby://localhost:8787&quot;</span>

  <span class='class class kw'>class</span> <span class='Logger constant id'>Logger</span>

      <span class='comment val'># Make dRuby send Logger instances as dRuby references,</span>
      <span class='comment val'># not copies.</span>
      <span class='include identifier id'>include</span> <span class='DRb constant id'>DRb</span><span class='colon2 op'>::</span><span class='DRbUndumped constant id'>DRbUndumped</span>

      <span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='n identifier id'>n</span><span class='comma token'>,</span> <span class='fname identifier id'>fname</span><span class='rparen token'>)</span>
          <span class='@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='n identifier id'>n</span>
          <span class='@filename ivar id'>@filename</span> <span class='assign token'>=</span> <span class='fname identifier id'>fname</span>
      <span class='end end kw'>end</span>

      <span class='def def kw'>def</span> <span class='log identifier id'>log</span><span class='lparen token'>(</span><span class='message identifier id'>message</span><span class='rparen token'>)</span>
          <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='@filename ivar id'>@filename</span><span class='comma token'>,</span> <span class='string val'>&quot;a&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
              <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{Time.now}: #{@name}: #{message}&quot;</span><span class='rparen token'>)</span>
          <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>

  <span class='end end kw'>end</span>

  <span class='comment val'># We have a central object for creating and retrieving loggers.</span>
  <span class='comment val'># This retains a local reference to all loggers created.  This</span>
  <span class='comment val'># is so an existing logger can be looked up by name, but also</span>
  <span class='comment val'># to prevent loggers from being garbage collected.  A dRuby</span>
  <span class='comment val'># reference to an object is not sufficient to prevent it being</span>
  <span class='comment val'># garbage collected!</span>
  <span class='class class kw'>class</span> <span class='LoggerFactory constant id'>LoggerFactory</span>

      <span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='bdir identifier id'>bdir</span><span class='rparen token'>)</span>
          <span class='@basedir ivar id'>@basedir</span> <span class='assign token'>=</span> <span class='bdir identifier id'>bdir</span>
          <span class='@loggers ivar id'>@loggers</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='end end kw'>end</span>

      <span class='def def kw'>def</span> <span class='get_logger identifier id'>get_logger</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
          <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='@loggers ivar id'>@loggers</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span> <span class='name identifier id'>name</span>
              <span class='comment val'># make the filename safe, then declare it to be so</span>
              <span class='fname identifier id'>fname</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/[.\/]/</span><span class='comma token'>,</span> <span class='string val'>&quot;_&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='untaint identifier id'>untaint</span>
              <span class='@loggers ivar id'>@loggers</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='@basedir ivar id'>@basedir</span> <span class='plus op'>+</span> <span class='string val'>&quot;/&quot;</span> <span class='plus op'>+</span> <span class='fname identifier id'>fname</span><span class='rparen token'>)</span>
          <span class='end end kw'>end</span>
          <span class='return return kw'>return</span> <span class='@loggers ivar id'>@loggers</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span>
      <span class='end end kw'>end</span>

  <span class='end end kw'>end</span>

  <span class='FRONT_OBJECT constant id'>FRONT_OBJECT</span><span class='assign token'>=</span><span class='LoggerFactory constant id'>LoggerFactory</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;/tmp/dlog&quot;</span><span class='rparen token'>)</span>

  <span class='$SAFE gvar id'>$SAFE</span> <span class='assign token'>=</span> <span class='integer val'>1</span>   <span class='comment val'># disable eval() and friends</span>

  <span class='DRb constant id'>DRb</span><span class='dot token'>.</span><span class='start_service identifier id'>start_service</span><span class='lparen token'>(</span><span class='URI constant id'>URI</span><span class='comma token'>,</span> <span class='FRONT_OBJECT constant id'>FRONT_OBJECT</span><span class='rparen token'>)</span>
  <span class='DRb constant id'>DRb</span><span class='dot token'>.</span><span class='thread identifier id'>thread</span><span class='dot token'>.</span><span class='join identifier id'>join</span>
</pre>
<h4>Client code</h4>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'drb/drb'</span>

  <span class='SERVER_URI constant id'>SERVER_URI</span><span class='assign token'>=</span><span class='string val'>&quot;druby://localhost:8787&quot;</span>

  <span class='DRb constant id'>DRb</span><span class='dot token'>.</span><span class='start_service identifier id'>start_service</span>

  <span class='log_service identifier id'>log_service</span><span class='assign token'>=</span><span class='DRbObject constant id'>DRbObject</span><span class='dot token'>.</span><span class='new_with_uri identifier id'>new_with_uri</span><span class='lparen token'>(</span><span class='SERVER_URI constant id'>SERVER_URI</span><span class='rparen token'>)</span>

  <span class='lbrack token'>[</span><span class='string val'>&quot;loga&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;logb&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;logc&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='logname identifier id'>logname</span><span class='bitor op'>|</span>

      <span class='logger identifier id'>logger</span><span class='assign token'>=</span><span class='log_service identifier id'>log_service</span><span class='dot token'>.</span><span class='get_logger identifier id'>get_logger</span><span class='lparen token'>(</span><span class='logname identifier id'>logname</span><span class='rparen token'>)</span>

      <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='log identifier id'>log</span><span class='lparen token'>(</span><span class='string val'>&quot;Hello, world!&quot;</span><span class='rparen token'>)</span>
      <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='log identifier id'>log</span><span class='lparen token'>(</span><span class='string val'>&quot;Goodbye, world!&quot;</span><span class='rparen token'>)</span>
      <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='log identifier id'>log</span><span class='lparen token'>(</span><span class='string val'>&quot;=== EOT ===&quot;</span><span class='rparen token'>)</span>

  <span class='end end kw'>end</span>
</pre>
<h2>Security</h2>
<p>
As with all network services, security needs to be considered when using
dRuby. By allowing external access to a Ruby object, you are not only
allowing outside clients to call the methods you have defined for that
object, but by default to execute arbitrary Ruby code on your server.
Consider the following:
</p>
<pre class="code">
   <span class='comment val'># !!! UNSAFE CODE !!!</span>
   <span class='ro identifier id'>ro</span> <span class='assign token'>=</span> <span class='DRbObject constant id'>DRbObject</span><span class='colon2 op'>::</span><span class='new_with_uri identifier id'>new_with_uri</span><span class='lparen token'>(</span><span class='string val'>&quot;druby://your.server.com:8989&quot;</span><span class='rparen token'>)</span>
   <span class='class class kw'>class</span> <span class='lshft op'>&lt;&lt;</span> <span class='ro identifier id'>ro</span>
     <span class='undef undef kw'>undef</span> <span class='symbol val'>:instance_eval</span>  <span class='comment val'># force call to be passed to remote object</span>
   <span class='end end kw'>end</span>
   <span class='ro identifier id'>ro</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='string val'>&quot;`rm -rf *`&quot;</span><span class='rparen token'>)</span>
</pre>
<p>
The dangers posed by instance_eval and friends are such that a DRbServer
should generally be run with $SAFE set to at least level 1. This will
disable eval() and related calls on strings passed across the wire. The
sample usage code given above follows this practice.
</p>
<p>
A DRbServer can be configured with an access control list to selectively
allow or deny access from specified IP addresses. The main druby
distribution provides the ACL class for this purpose. In general, this
mechanism should only be used alongside, rather than as a replacement for,
a good firewall.
</p>
<h2>dRuby internals</h2>
<p>
dRuby is implemented using three main components: a remote method call
marshaller/unmarshaller; a transport protocol; and an ID-to-object mapper.
The latter two can be directly, and the first indirectly, replaced, in
order to provide different behaviour and capabilities.
</p>
<p>
Marshalling and unmarshalling of remote method calls is performed by a
DRb::DRbMessage instance. This uses the Marshal module to dump the method
call before sending it over the transport layer, then reconstitute it at
the other end. There is normally no need to replace this component, and no
direct way is provided to do so. However, it is possible to implement an
alternative marshalling scheme as part of an implementation of the
transport layer.
</p>
<p>
The transport layer is responsible for opening client and server network
connections and forwarding dRuby request across them. Normally, it uses
DRb::DRbMessage internally to manage marshalling and unmarshalling. The
transport layer is managed by DRb::DRbProtocol. Multiple protocols can be
installed in DRbProtocol at the one time; selection between them is
determined by the scheme of a dRuby URI. The default transport protocol is
selected by the scheme &#8216;druby:&#8217;, and implemented by
DRb::DRbTCPSocket. This uses plain TCP/IP sockets for communication. An
alternative protocol, using UNIX domain sockets, is implemented by
DRb::DRbUNIXSocket in the file drb/unix.rb, and selected by the scheme
&#8216;drbunix:&#8217;. A sample implementation over HTTP can be found in
the samples accompanying the main dRuby distribution.
</p>
<p>
The ID-to-object mapping component maps dRuby object ids to the objects
they refer to, and vice versa. The implementation to use can be specified
as part of a DRb::DRbServer&#8217;s configuration. The default
implementation is provided by DRb::DRbIdConv. It uses an object&#8217;s
ObjectSpace id as its dRuby id. This means that the dRuby reference to that
object only remains meaningful for the lifetime of the object&#8217;s
process and the lifetime of the object within that process. A modified
implementation is provided by DRb::TimerIdConv in the file
drb/timeridconv.rb. This implementation retains a local reference to all
objects exported over dRuby for a configurable period of time (defaulting
to ten minutes), to prevent them being garbage-collected within this time.
Another sample implementation is provided in sample/name.rb in the main
dRuby distribution. This allows objects to specify their own id or
&quot;name&quot;. A dRuby reference can be made persistent across processes
by having each process register an object using the same dRuby name.
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">primary_server</td>
          <td class="readwrite">
            [<span id='primary_server-instance_method'>R</span><span id='primary_server=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The primary local dRuby server.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#config-instance_method">#config</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the configuration of the current server.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#current_server-instance_method">#current_server</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the &#8216;current&#8217; server.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#fetch_server-instance_method">#fetch_server</span><span class='args'>(uri)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#front-instance_method">#front</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the front object of the current server.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#here-3F-instance_method">#here?</span><span class='args'>(uri)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is <tt>uri</tt> the URI for the current local server?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#install_acl-instance_method">#install_acl</span><span class='args'>(acl)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Set the default acl.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#install_id_conv-instance_method">#install_id_conv</span><span class='args'>(idconv)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Set the default id conv object.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#mutex-instance_method">#mutex</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#regist_server-instance_method">#regist_server</span><span class='args'>(server)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#remove_server-instance_method">#remove_server</span><span class='args'>(server)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#start_service-instance_method">#start_service</span><span class='args'>(uri = nil, front = nil, config = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Start a dRuby server locally.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#stop_service-instance_method">#stop_service</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Stop the local dRuby server.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#thread-instance_method">#thread</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the thread of the primary server.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_id-instance_method">#to_id</span><span class='args'>(obj)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get a reference id for an object using the current server.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_obj-instance_method">#to_obj</span><span class='args'>(ref)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Convert a reference into an object using the current server.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#uri-instance_method">#uri</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the URI defining the local dRuby space.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>config</h3>
</div><div id="config-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>config</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the configuration of the current server.
</p>
<p>
If there is no current server, this returns the default configuration. See
#current_server and DRbServer::make_config.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1696</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1696">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1696
1697
1698
1699
1700</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='config identifier id'>config</span>
  <span class='current_server identifier id'>current_server</span><span class='dot token'>.</span><span class='config identifier id'>config</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='DRbServer constant id'>DRbServer</span><span class='dot token'>.</span><span class='make_config identifier id'>make_config</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>current_server</h3>
</div><div id="current_server-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>current_server</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the &#8216;current&#8217; server.
</p>
<p>
In the context of execution taking place within the main thread of a dRuby
server (typically, as a result of a remote call on the server or one of its
objects), the current server is that server. Otherwise, the current server
is the primary server.
</p>
<p>
If the above rule fails to find a server, a DRbServerNotFound error is
raised.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="DRb/DRbServerNotFound.html" title="DRbServerNotFound">DRbServerNotFound</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1654</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1654">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1654
1655
1656
1657
1658
1659</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='current_server identifier id'>current_server</span>
  <span class='drb identifier id'>drb</span> <span class='assign token'>=</span> <span class='Thread constant id'>Thread</span><span class='dot token'>.</span><span class='current identifier id'>current</span><span class='lbrack token'>[</span><span class='string val'>'DRb'</span><span class='rbrack token'>]</span> 
  <span class='server identifier id'>server</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='drb identifier id'>drb</span> <span class='andop op'>&amp;&amp;</span> <span class='drb identifier id'>drb</span><span class='lbrack token'>[</span><span class='string val'>'server'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='drb identifier id'>drb</span><span class='lbrack token'>[</span><span class='string val'>'server'</span><span class='rbrack token'>]</span> <span class='colon op'>:</span> <span class='@primary_server ivar id'>@primary_server</span> 
  <span class='raise identifier id'>raise</span> <span class='DRbServerNotFound constant id'>DRbServerNotFound</span> <span class='unless unless_mod kw'>unless</span> <span class='server identifier id'>server</span>
  <span class='return return kw'>return</span> <span class='server identifier id'>server</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>fetch_server</h3>
</div><div id="fetch_server-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>fetch_server</span><span class='args'>(uri)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1774</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1774">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1774
1775
1776</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='fetch_server identifier id'>fetch_server</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='rparen token'>)</span>
  <span class='@server ivar id'>@server</span><span class='lbrack token'>[</span><span class='uri identifier id'>uri</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>front</h3>
</div><div id="front-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>front</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the front object of the current server.
</p>
<p>
This raises a DRbServerNotFound error if there is no current server. See
#current_server.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1707</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1707">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1707
1708
1709</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='front identifier id'>front</span>
  <span class='current_server identifier id'>current_server</span><span class='dot token'>.</span><span class='front identifier id'>front</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>here?</h3>
</div><div id="here-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>here?</span><span class='args'>(uri)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is <tt>uri</tt> the URI for the current local server?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1687</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1687">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1687
1688
1689</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='here? fid id'>here?</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='rparen token'>)</span>
  <span class='lparen token'>(</span><span class='current_server identifier id'>current_server</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span> <span class='rescue rescue kw'>rescue</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='uri identifier id'>uri</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>install_acl</h3>
</div><div id="install_acl-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>install_acl</span><span class='args'>(acl)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Set the default acl.
</p>
<p>
See DRb::DRbServer.default_acl.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1749</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1749">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1749
1750
1751</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='install_acl identifier id'>install_acl</span><span class='lparen token'>(</span><span class='acl identifier id'>acl</span><span class='rparen token'>)</span>
  <span class='DRbServer constant id'>DRbServer</span><span class='dot token'>.</span><span class='default_acl identifier id'>default_acl</span><span class='lparen token'>(</span><span class='acl identifier id'>acl</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>install_id_conv</h3>
</div><div id="install_id_conv-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>install_id_conv</span><span class='args'>(idconv)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Set the default id conv object.
</p>
<p>
See DRbServer#default_id_conv.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1741</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1741">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1741
1742
1743</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='install_id_conv identifier id'>install_id_conv</span><span class='lparen token'>(</span><span class='idconv identifier id'>idconv</span><span class='rparen token'>)</span>
  <span class='DRbServer constant id'>DRbServer</span><span class='dot token'>.</span><span class='default_id_conv identifier id'>default_id_conv</span><span class='lparen token'>(</span><span class='idconv identifier id'>idconv</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>mutex</h3>
</div><div id="mutex-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>mutex</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1755</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1755">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1755
1756
1757</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='mutex identifier id'>mutex</span>
  <span class='@mutex ivar id'>@mutex</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>regist_server</h3>
</div><div id="regist_server-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>regist_server</span><span class='args'>(server)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1761</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1761">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1761
1762
1763
1764
1765
1766</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='regist_server identifier id'>regist_server</span><span class='lparen token'>(</span><span class='server identifier id'>server</span><span class='rparen token'>)</span>
  <span class='@server ivar id'>@server</span><span class='lbrack token'>[</span><span class='server identifier id'>server</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='server identifier id'>server</span>
  <span class='mutex identifier id'>mutex</span><span class='dot token'>.</span><span class='synchronize identifier id'>synchronize</span> <span class='do do kw'>do</span>
    <span class='@primary_server ivar id'>@primary_server</span> <span class='assign token'>=</span> <span class='server identifier id'>server</span> <span class='unless unless_mod kw'>unless</span> <span class='@primary_server ivar id'>@primary_server</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>remove_server</h3>
</div><div id="remove_server-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>remove_server</span><span class='args'>(server)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1769</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1769">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1769
1770
1771</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='remove_server identifier id'>remove_server</span><span class='lparen token'>(</span><span class='server identifier id'>server</span><span class='rparen token'>)</span>
  <span class='@server ivar id'>@server</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='server identifier id'>server</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>start_service</h3>
</div><div id="start_service-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>start_service</span><span class='args'>(uri = nil, front = nil, config = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Start a dRuby server locally.
</p>
<p>
The new dRuby server will become the primary server, even if another server
is currently the primary server.
</p>
<p>
<tt>uri</tt> is the URI for the server to bind to. If nil, the server will
bind to random port on the default local host name and use the default
dRuby protocol.
</p>
<p>
<tt>front</tt> is the server&#8217;s front object. This may be nil.
</p>
<p>
<tt>config</tt> is the configuration for the new server. This may be nil.
</p>
<p>
See DRbServer::new.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1633</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1633">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1633
1634
1635</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='start_service identifier id'>start_service</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='front identifier id'>front</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='config identifier id'>config</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='@primary_server ivar id'>@primary_server</span> <span class='assign token'>=</span> <span class='DRbServer constant id'>DRbServer</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='comma token'>,</span> <span class='front identifier id'>front</span><span class='comma token'>,</span> <span class='config identifier id'>config</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>stop_service</h3>
</div><div id="stop_service-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>stop_service</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Stop the local dRuby server.
</p>
<p>
This operates on the primary server. If there is no primary server
currently running, it is a noop.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1666</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1666">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1666
1667
1668
1669</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='stop_service identifier id'>stop_service</span>
  <span class='@primary_server ivar id'>@primary_server</span><span class='dot token'>.</span><span class='stop_service identifier id'>stop_service</span> <span class='if if_mod kw'>if</span> <span class='@primary_server ivar id'>@primary_server</span>
  <span class='@primary_server ivar id'>@primary_server</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>thread</h3>
</div><div id="thread-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>thread</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the thread of the primary server.
</p>
<p>
This returns nil if there is no primary server. See #primary_server.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1733</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1733">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1733
1734
1735</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='thread identifier id'>thread</span>
  <span class='@primary_server ivar id'>@primary_server</span> <span class='question op'>?</span> <span class='@primary_server ivar id'>@primary_server</span><span class='dot token'>.</span><span class='thread identifier id'>thread</span> <span class='colon op'>:</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_id</h3>
</div><div id="to_id-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_id</span><span class='args'>(obj)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get a reference id for an object using the current server.
</p>
<p>
This raises a DRbServerNotFound error if there is no current server. See
#current_server.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1724</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1724">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1724
1725
1726</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_id identifier id'>to_id</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='rparen token'>)</span>
  <span class='current_server identifier id'>current_server</span><span class='dot token'>.</span><span class='to_id identifier id'>to_id</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_obj</h3>
</div><div id="to_obj-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_obj</span><span class='args'>(ref)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Convert a reference into an object using the current server.
</p>
<p>
This raises a DRbServerNotFound error if there is no current server. See
#current_server.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1716</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1716">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1716
1717
1718</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_obj identifier id'>to_obj</span><span class='lparen token'>(</span><span class='ref identifier id'>ref</span><span class='rparen token'>)</span>
  <span class='current_server identifier id'>current_server</span><span class='dot token'>.</span><span class='to_obj identifier id'>to_obj</span><span class='lparen token'>(</span><span class='ref identifier id'>ref</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>uri</h3>
</div><div id="uri-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>uri</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the URI defining the local dRuby space.
</p>
<p>
This is the URI of the current server. See #current_server.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/drb/drb.rb', line 1675</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/drb/drb.rb#L1675">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">1675
1676
1677
1678
1679
1680
1681
1682
1683</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='uri identifier id'>uri</span>
  <span class='drb identifier id'>drb</span> <span class='assign token'>=</span> <span class='Thread constant id'>Thread</span><span class='dot token'>.</span><span class='current identifier id'>current</span><span class='lbrack token'>[</span><span class='string val'>'DRb'</span><span class='rbrack token'>]</span>
  <span class='client identifier id'>client</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='drb identifier id'>drb</span> <span class='andop op'>&amp;&amp;</span> <span class='drb identifier id'>drb</span><span class='lbrack token'>[</span><span class='string val'>'client'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='client identifier id'>client</span>
    <span class='uri identifier id'>uri</span> <span class='assign token'>=</span> <span class='client identifier id'>client</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span>
    <span class='return return kw'>return</span> <span class='uri identifier id'>uri</span> <span class='if if_mod kw'>if</span> <span class='uri identifier id'>uri</span>
  <span class='end end kw'>end</span>
  <span class='current_server identifier id'>current_server</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>