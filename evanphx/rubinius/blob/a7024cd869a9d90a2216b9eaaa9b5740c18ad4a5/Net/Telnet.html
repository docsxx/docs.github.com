<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>evanphx's rubinius - Class: Net::Telnet - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/evanphx/commits/rubinius/master" rel="alternate" title="Recent Commits to rubinius:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("evanphx", "rubinius", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("evanphx", "rubinius", "a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/evanphx/rubinius/tree/">Source</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/network">Network</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/evanphx/rubinius">Wiki</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/graphs">Graphs</a></li>                    
            <li class="active"><a href="/evanphx/rubinius">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/evanphx">evanphx</a> / <b><a href="http://github.com/evanphx/rubinius/tree">rubinius</a></b>        
                <a id="namespaces_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Net_Telnet">
  <h1>Class: Net::Telnet</h1>
  <div class="section inheritance">
  <ul>
  <li><a href="../Delegator.html" title="Delegator">Delegator</a></li><ul><li><a href="../SimpleDelegator.html" title="SimpleDelegator">SimpleDelegator</a></li><ul><li>Net::Telnet</li>
  </ul></ul></ul>
</div><div class="section docstring">
  <h2>Net::Telnet</h2>
<p>
Provides telnet client functionality.
</p>
<p>
This class also has, through delegation, all the methods of a socket object
(by default, a <tt>TCPSocket</tt>, but can be set by the <tt>Proxy</tt>
option to <tt>new()</tt>). This provides methods such as <tt>close()</tt>
to end the session and <tt>sysread()</tt> to read data directly from the
host, instead of via the <tt>waitfor()</tt> mechanism. Note that if you do
use <tt>sysread()</tt> directly when in telnet mode, you should probably
pass the output through <tt>preprocess()</tt> to extract telnet command
sequences.
</p>
<h2>Overview</h2>
<p>
The telnet protocol allows a client to login remotely to a user account on
a server and execute commands via a shell. The equivalent is done by
creating a Net::Telnet class with the <tt>Host</tt> option set to your
host, calling #login() with your user and password, issuing one or more
#cmd() calls, and then calling #close() to end the session. The #waitfor(),
#print(), #puts(), and #write() methods, which #cmd() is implemented on top
of, are only needed if you are doing something more complicated.
</p>
<p>
A Net::Telnet object can also be used to connect to non-telnet services,
such as SMTP or HTTP. In this case, you normally want to provide the
<tt>Port</tt> option to specify the port to connect to, and set the
<tt>Telnetmode</tt> option to false to prevent the client from attempting
to interpret telnet command sequences. Generally, #login() will not work
with other protocols, and you have to handle authentication yourself.
</p>
<p>
For some protocols, it will be possible to specify the <tt>Prompt</tt>
option once when you create the Telnet object and use #cmd() calls; for
others, you will have to specify the response sequence to look for as the
Match option to every #cmd() call, or call #puts() and #waitfor() directly;
for yet others, you will have to use #sysread() instead of #waitfor() and
parse server responses yourself.
</p>
<p>
It is worth noting that when you create a new Net::Telnet object, you can
supply a proxy IO channel via the Proxy option. This can be used to attach
the Telnet object to other Telnet objects, to already open sockets, or to
any read-write IO object. This can be useful, for instance, for setting up
a test fixture for unit testing.
</p>
<h2>Examples</h2>
<h3>Log in and send a command, echoing all output to stdout</h3>
<pre class="code">
  <span class='localhost identifier id'>localhost</span> <span class='assign token'>=</span> <span class='Net constant id'>Net</span><span class='colon2 op'>::</span><span class='Telnet constant id'>Telnet</span><span class='colon2 op'>::</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Host&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;localhost&quot;</span><span class='comma token'>,</span>
                               <span class='string val'>&quot;Timeout&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>10</span><span class='comma token'>,</span>
                               <span class='string val'>&quot;Prompt&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='regexp val'>/[$%#&gt;] \z/n</span><span class='rparen token'>)</span>
  <span class='localhost identifier id'>localhost</span><span class='dot token'>.</span><span class='login identifier id'>login</span><span class='lparen token'>(</span><span class='string val'>&quot;username&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;password&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='print identifier id'>print</span> <span class='c identifier id'>c</span> <span class='rbrace token'>}</span>
  <span class='localhost identifier id'>localhost</span><span class='dot token'>.</span><span class='cmd identifier id'>cmd</span><span class='lparen token'>(</span><span class='string val'>&quot;command&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='print identifier id'>print</span> <span class='c identifier id'>c</span> <span class='rbrace token'>}</span>
  <span class='localhost identifier id'>localhost</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
</pre>
<h3>Check a POP server to see if you have mail</h3>
<pre class="code">
  <span class='pop identifier id'>pop</span> <span class='assign token'>=</span> <span class='Net constant id'>Net</span><span class='colon2 op'>::</span><span class='Telnet constant id'>Telnet</span><span class='colon2 op'>::</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Host&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;your_destination_host_here&quot;</span><span class='comma token'>,</span>
                         <span class='string val'>&quot;Port&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>110</span><span class='comma token'>,</span>
                         <span class='string val'>&quot;Telnetmode&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span>
                         <span class='string val'>&quot;Prompt&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='regexp val'>/^\&lt;tt&gt;OK/n</span><span class='rparen token'>)</span>
  <span class='pop identifier id'>pop</span><span class='dot token'>.</span><span class='cmd identifier id'>cmd</span><span class='lparen token'>(</span><span class='string val'>&quot;user &quot;</span> <span class='lt op'>&lt;</span><span class='regexp val'>/tt&gt; &quot;your_username_here&quot;) { |c| print c }
  pop.cmd(&quot;pass &quot; + &quot;your_password_here&quot;) { |c| print c }
  pop.cmd(&quot;list&quot;) { |c| print c }
</span></pre>
<h2>References</h2>
<p>
There are a large number of RFCs relevant to the Telnet protocol. RFCs
854-861 define the base protocol. For a complete listing of relevant RFCs,
see http://www.omnifarious.org/~hopper/technical/telnet-rfc.html
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">sock</td>
          <td class="readwrite">
            [<span id='sock-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The socket the Telnet object is using.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="ABORT-constant">ABORT</dt>
      <dd>238.chr </dd>
    
      <dt id="AO-constant">AO</dt>
      <dd>245.chr </dd>
    
      <dt id="AYT-constant">AYT</dt>
      <dd>246.chr </dd>
    
      <dt id="BREAK-constant">BREAK</dt>
      <dd>243.chr </dd>
    
      <dt id="CR-constant">CR</dt>
      <dd>&quot;\015&quot;   </dd>
    
      <dt id="DM-constant">DM</dt>
      <dd>242.chr </dd>
    
      <dt id="DO-constant">DO</dt>
      <dd>253.chr </dd>
    
      <dt id="DONT-constant">DONT</dt>
      <dd>254.chr </dd>
    
      <dt id="EC-constant">EC</dt>
      <dd>247.chr </dd>
    
      <dt id="EL-constant">EL</dt>
      <dd>248.chr </dd>
    
      <dt id="EOF-constant">EOF</dt>
      <dd>236.chr </dd>
    
      <dt id="EOL-constant">EOL</dt>
      <dd>CR + LF </dd>
    
      <dt id="EOR-constant">EOR</dt>
      <dd>239.chr </dd>
    
      <dt id="GA-constant">GA</dt>
      <dd>249.chr </dd>
    
      <dt id="IAC-constant">IAC</dt>
      <dd>255.chr </dd>
    
      <dt id="IP-constant">IP</dt>
      <dd>244.chr </dd>
    
      <dt id="LF-constant">LF</dt>
      <dd>&quot;\012&quot; </dd>
    
      <dt id="NOP-constant">NOP</dt>
      <dd>241.chr </dd>
    
      <dt id="NULL-constant">NULL</dt>
      <dd>&quot;\000&quot; </dd>
    
      <dt id="OPT_3270REGIME-constant">OPT_3270REGIME</dt>
      <dd>29.chr </dd>
    
      <dt id="OPT_AUTHENTICATION-constant">OPT_AUTHENTICATION</dt>
      <dd>37.chr </dd>
    
      <dt id="OPT_BINARY-constant">OPT_BINARY</dt>
      <dd>0.chr </dd>
    
      <dt id="OPT_BM-constant">OPT_BM</dt>
      <dd>19.chr </dd>
    
      <dt id="OPT_DET-constant">OPT_DET</dt>
      <dd>20.chr </dd>
    
      <dt id="OPT_ECHO-constant">OPT_ECHO</dt>
      <dd>1.chr </dd>
    
      <dt id="OPT_ENCRYPT-constant">OPT_ENCRYPT</dt>
      <dd>38.chr </dd>
    
      <dt id="OPT_EOR-constant">OPT_EOR</dt>
      <dd>25.chr </dd>
    
      <dt id="OPT_EXOPL-constant">OPT_EXOPL</dt>
      <dd>255.chr </dd>
    
      <dt id="OPT_LFLOW-constant">OPT_LFLOW</dt>
      <dd>33.chr </dd>
    
      <dt id="OPT_LINEMODE-constant">OPT_LINEMODE</dt>
      <dd>34.chr </dd>
    
      <dt id="OPT_LOGOUT-constant">OPT_LOGOUT</dt>
      <dd>18.chr </dd>
    
      <dt id="OPT_NAMS-constant">OPT_NAMS</dt>
      <dd>4.chr </dd>
    
      <dt id="OPT_NAOCRD-constant">OPT_NAOCRD</dt>
      <dd>10.chr </dd>
    
      <dt id="OPT_NAOFFD-constant">OPT_NAOFFD</dt>
      <dd>13.chr </dd>
    
      <dt id="OPT_NAOHTD-constant">OPT_NAOHTD</dt>
      <dd>12.chr </dd>
    
      <dt id="OPT_NAOHTS-constant">OPT_NAOHTS</dt>
      <dd>11.chr </dd>
    
      <dt id="OPT_NAOL-constant">OPT_NAOL</dt>
      <dd>8.chr </dd>
    
      <dt id="OPT_NAOLFD-constant">OPT_NAOLFD</dt>
      <dd>16.chr </dd>
    
      <dt id="OPT_NAOP-constant">OPT_NAOP</dt>
      <dd>9.chr </dd>
    
      <dt id="OPT_NAOVTD-constant">OPT_NAOVTD</dt>
      <dd>15.chr </dd>
    
      <dt id="OPT_NAOVTS-constant">OPT_NAOVTS</dt>
      <dd>14.chr </dd>
    
      <dt id="OPT_NAWS-constant">OPT_NAWS</dt>
      <dd>31.chr </dd>
    
      <dt id="OPT_NEW_ENVIRON-constant">OPT_NEW_ENVIRON</dt>
      <dd>39.chr </dd>
    
      <dt id="OPT_OLD_ENVIRON-constant">OPT_OLD_ENVIRON</dt>
      <dd>36.chr </dd>
    
      <dt id="OPT_OUTMRK-constant">OPT_OUTMRK</dt>
      <dd>27.chr </dd>
    
      <dt id="OPT_RCP-constant">OPT_RCP</dt>
      <dd>2.chr </dd>
    
      <dt id="OPT_RCTE-constant">OPT_RCTE</dt>
      <dd>7.chr </dd>
    
      <dt id="OPT_SGA-constant">OPT_SGA</dt>
      <dd>3.chr </dd>
    
      <dt id="OPT_SNDLOC-constant">OPT_SNDLOC</dt>
      <dd>23.chr </dd>
    
      <dt id="OPT_STATUS-constant">OPT_STATUS</dt>
      <dd>5.chr </dd>
    
      <dt id="OPT_SUPDUP-constant">OPT_SUPDUP</dt>
      <dd>21.chr </dd>
    
      <dt id="OPT_SUPDUPOUTPUT-constant">OPT_SUPDUPOUTPUT</dt>
      <dd>22.chr </dd>
    
      <dt id="OPT_TM-constant">OPT_TM</dt>
      <dd>6.chr </dd>
    
      <dt id="OPT_TSPEED-constant">OPT_TSPEED</dt>
      <dd>32.chr </dd>
    
      <dt id="OPT_TTYLOC-constant">OPT_TTYLOC</dt>
      <dd>28.chr </dd>
    
      <dt id="OPT_TTYPE-constant">OPT_TTYPE</dt>
      <dd>24.chr </dd>
    
      <dt id="OPT_TUID-constant">OPT_TUID</dt>
      <dd>26.chr </dd>
    
      <dt id="OPT_X3PAD-constant">OPT_X3PAD</dt>
      <dd>30.chr </dd>
    
      <dt id="OPT_XASCII-constant">OPT_XASCII</dt>
      <dd>17.chr </dd>
    
      <dt id="OPT_XDISPLOC-constant">OPT_XDISPLOC</dt>
      <dd>35.chr </dd>
    
      <dt id="REVISION-constant">REVISION</dt>
      <dd>'$Id: telnet.rb 11708 2007-02-12 23:01:19Z shyouhei $'</dd>
    
      <dt id="SB-constant">SB</dt>
      <dd>250.chr </dd>
    
      <dt id="SE-constant">SE</dt>
      <dd>240.chr </dd>
    
      <dt id="SUSP-constant">SUSP</dt>
      <dd>237.chr </dd>
    
      <dt id="SYNCH-constant">SYNCH</dt>
      <dd>242.chr </dd>
    
      <dt id="WILL-constant">WILL</dt>
      <dd>251.chr </dd>
    
      <dt id="WONT-constant">WONT</dt>
      <dd>252.chr </dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:startdoc:
</p>
<p>
Creates a new Net::Telnet object.
</p>
<p>
Attempts to connect to the host (unless the Proxy option is provided: see
below). If a block is provided, it is yielded status messages on the
attempt to connect to the server, of the form:
</p>
<pre class="code">
  <span class='Trying constant id'>Trying</span> <span class='localhost identifier id'>localhost</span><span class='dot3 op'>...</span>
  <span class='Connected constant id'>Connected</span> <span class='to identifier id'>to</span> <span class='localhost identifier id'>localhost</span><span class='dot token'>.</span>
</pre>
<p>
<tt>options</tt> is a hash of options. The following example lists all
options and their default values.
</p>
<pre class="code">
  <span class='host identifier id'>host</span> <span class='assign token'>=</span> <span class='Net constant id'>Net</span><span class='colon2 op'>::</span><span class='Telnet constant id'>Telnet</span><span class='colon2 op'>::</span><span class='new identifier id'>new</span><span class='lparen token'>(</span>
           <span class='string val'>&quot;Host&quot;</span>       <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;localhost&quot;</span><span class='comma token'>,</span>  <span class='comment val'># default: &quot;localhost&quot;</span>
           <span class='string val'>&quot;Port&quot;</span>       <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>23</span><span class='comma token'>,</span>           <span class='comment val'># default: 23</span>
           <span class='string val'>&quot;Binmode&quot;</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span>        <span class='comment val'># default: false</span>
           <span class='string val'>&quot;Output_log&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;output_log&quot;</span><span class='comma token'>,</span> <span class='comment val'># default: nil (no output)</span>
           <span class='string val'>&quot;Dump_log&quot;</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;dump_log&quot;</span><span class='comma token'>,</span>   <span class='comment val'># default: nil (no output)</span>
           <span class='string val'>&quot;Prompt&quot;</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='regexp val'>/[$%#&gt;] \z/n</span><span class='comma token'>,</span> <span class='comment val'># default: /[$%#&gt;] \z/n</span>
           <span class='string val'>&quot;Telnetmode&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span>         <span class='comment val'># default: true</span>
           <span class='string val'>&quot;Timeout&quot;</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>10</span><span class='comma token'>,</span>           <span class='comment val'># default: 10</span>
             <span class='comment val'># if ignore timeout then set &quot;Timeout&quot; to false.</span>
           <span class='string val'>&quot;Waittime&quot;</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='comma token'>,</span>            <span class='comment val'># default: 0</span>
           <span class='string val'>&quot;Proxy&quot;</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='proxy identifier id'>proxy</span>         <span class='comment val'># default: nil</span>
                           <span class='comment val'># proxy is Net::Telnet or IO object</span>
         <span class='rparen token'>)</span>
</pre>
<p>
The options have the following meanings:
</p>
<table>
<tr><td valign="top">Host:</td><td>the hostname or IP address of the host to connect to, as a String. Defaults
to &quot;localhost&quot;.

</td></tr>
<tr><td valign="top">Port:</td><td>the port to connect to. Defaults to 23.

</td></tr>
<tr><td valign="top">Binmode:</td><td>if false (the default), newline substitution is performed. Outgoing LF is
converted to CRLF, and incoming CRLF is converted to LF. If true, this
substitution is not performed. This value can also be set with the
#binmode() method. The outgoing conversion only applies to the #puts() and
#print() methods, not the #write() method. The precise nature of the
newline conversion is also affected by the telnet options SGA and BIN.

</td></tr>
<tr><td valign="top">Output_log:</td><td>the name of the file to write connection status messages and all received
traffic to. In the case of a proper Telnet session, this will include the
client input as echoed by the host; otherwise, it only includes server
responses. Output is appended verbatim to this file. By default, no output
log is kept.

</td></tr>
<tr><td valign="top">Dump_log:</td><td>as for Output_log, except that output is written in hexdump format (16
bytes per line as hex pairs, followed by their printable equivalent), with
connection status messages preceded by &#8217;#&#8217;, sent traffic
preceded by &#8217;&gt;&#8217;, and received traffic preceded by
&#8217;&lt;&#8217;. By default, not dump log is kept.

</td></tr>
<tr><td valign="top">Prompt:</td><td>a regular expression matching the host&#8217;s command-line prompt
sequence. This is needed by the Telnet class to determine when the output
from a command has finished and the host is ready to receive a new command.
By default, this regular expression is /[$%#&gt;] \z/n.

</td></tr>
<tr><td valign="top">Telnetmode:</td><td>a boolean value, true by default. In telnet mode, traffic received from the
host is parsed for special command sequences, and these sequences are
escaped in outgoing traffic sent using #puts() or #print() (but not
#write()). If you are using the Net::Telnet object to connect to a
non-telnet service (such as SMTP or POP), this should be set to
&quot;false&quot; to prevent undesired data corruption. This value can also
be set by the #telnetmode() method.

</td></tr>
<tr><td valign="top">Timeout:</td><td>the number of seconds to wait before timing out both the initial attempt to
connect to host (in this constructor), and all attempts to read data from
the host (in #waitfor(), #cmd(), and #login()). Exceeding this timeout
causes a TimeoutError to be raised. The default value is 10 seconds. You
can disable the timeout by setting this value to false. In this case, the
connect attempt will eventually timeout on the underlying connect(2) socket
call with an Errno::ETIMEDOUT error (but generally only after a few
minutes), but other attempts to read data from the host will hand
indefinitely if no data is forthcoming.

</td></tr>
<tr><td valign="top">Waittime:</td><td>the amount of time to wait after seeing what looks like a prompt (that is,
received data that matches the Prompt option regular expression) to see if
more data arrives. If more data does arrive in this time, Net::Telnet
assumes that what it saw was not really a prompt. This is to try to avoid
false matches, but it can also lead to missing real prompts (if, for
instance, a background process writes to the terminal soon after the prompt
is displayed). By default, set to 0, meaning not to wait for more data.

</td></tr>
<tr><td valign="top">Proxy:</td><td>a proxy object to used instead of opening a direct connection to the host.
Must be either another Net::Telnet object or an IO object. If it is another
Net::Telnet object, this instance will use that one&#8217;s socket for
communication. If an IO object, it is used directly for communication. Any
other kind of object will cause an error to be raised.

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 275</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L275">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'># :yield: mesg </span>
  <span class='@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Host&quot;</span><span class='rbrack token'>]</span>       <span class='assign token'>=</span> <span class='string val'>&quot;localhost&quot;</span>   <span class='unless unless_mod kw'>unless</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Host&quot;</span><span class='rparen token'>)</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Port&quot;</span><span class='rbrack token'>]</span>       <span class='assign token'>=</span> <span class='integer val'>23</span>            <span class='unless unless_mod kw'>unless</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Port&quot;</span><span class='rparen token'>)</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Prompt&quot;</span><span class='rbrack token'>]</span>     <span class='assign token'>=</span> <span class='regexp val'>/[$%#&gt;] \z/n</span>  <span class='unless unless_mod kw'>unless</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Prompt&quot;</span><span class='rparen token'>)</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Timeout&quot;</span><span class='rbrack token'>]</span>    <span class='assign token'>=</span> <span class='integer val'>10</span>            <span class='unless unless_mod kw'>unless</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Timeout&quot;</span><span class='rparen token'>)</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Waittime&quot;</span><span class='rbrack token'>]</span>   <span class='assign token'>=</span> <span class='integer val'>0</span>             <span class='unless unless_mod kw'>unless</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Waittime&quot;</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Binmode&quot;</span><span class='rparen token'>)</span>
    <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Binmode&quot;</span><span class='rbrack token'>]</span>    <span class='assign token'>=</span> <span class='false false kw'>false</span>         
  <span class='else else kw'>else</span>
    <span class='unless unless kw'>unless</span> <span class='lparen token'>(</span><span class='true true kw'>true</span> <span class='eq op'>==</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Binmode&quot;</span><span class='rbrack token'>]</span> <span class='or or kw'>or</span> <span class='false false kw'>false</span> <span class='eq op'>==</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Binmode&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;Binmode option must be true or false&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='unless unless kw'>unless</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Telnetmode&quot;</span><span class='rparen token'>)</span>
    <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Telnetmode&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>          
  <span class='else else kw'>else</span>
    <span class='unless unless kw'>unless</span> <span class='lparen token'>(</span><span class='true true kw'>true</span> <span class='eq op'>==</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Telnetmode&quot;</span><span class='rbrack token'>]</span> <span class='or or kw'>or</span> <span class='false false kw'>false</span> <span class='eq op'>==</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Telnetmode&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;Telnetmode option must be true or false&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='@telnet_option ivar id'>@telnet_option</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;SGA&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='string val'>&quot;BINARY&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>

  <span class='if if kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Output_log&quot;</span><span class='rparen token'>)</span>
    <span class='@log ivar id'>@log</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Output_log&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>'a+'</span><span class='rparen token'>)</span>
    <span class='@log ivar id'>@log</span><span class='dot token'>.</span><span class='sync identifier id'>sync</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='@log ivar id'>@log</span><span class='dot token'>.</span><span class='binmode identifier id'>binmode</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Dump_log&quot;</span><span class='rparen token'>)</span>
    <span class='@dumplog ivar id'>@dumplog</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Dump_log&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>'a+'</span><span class='rparen token'>)</span>
    <span class='@dumplog ivar id'>@dumplog</span><span class='dot token'>.</span><span class='sync identifier id'>sync</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='@dumplog ivar id'>@dumplog</span><span class='dot token'>.</span><span class='binmode identifier id'>binmode</span>
    <span class='def def kw'>def</span> <span class='@dumplog ivar id'>@dumplog</span><span class='dot token'>.</span><span class='log_dump identifier id'>log_dump</span><span class='lparen token'>(</span><span class='dir identifier id'>dir</span><span class='comma token'>,</span> <span class='x identifier id'>x</span><span class='rparen token'>)</span>  <span class='comment val'># :nodoc:</span>
      <span class='len identifier id'>len</span> <span class='assign token'>=</span> <span class='x identifier id'>x</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
      <span class='addr identifier id'>addr</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
      <span class='offset identifier id'>offset</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
      <span class='while while kw'>while</span> <span class='integer val'>0</span> <span class='lt op'>&lt;</span> <span class='len identifier id'>len</span>
        <span class='if if kw'>if</span> <span class='len identifier id'>len</span> <span class='lt op'>&lt;</span> <span class='integer val'>16</span>
          <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='x identifier id'>x</span><span class='lbrack token'>[</span><span class='offset identifier id'>offset</span><span class='comma token'>,</span> <span class='len identifier id'>len</span><span class='rbrack token'>]</span>
        <span class='else else kw'>else</span>
          <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='x identifier id'>x</span><span class='lbrack token'>[</span><span class='offset identifier id'>offset</span><span class='comma token'>,</span> <span class='integer val'>16</span><span class='rbrack token'>]</span>
        <span class='end end kw'>end</span>
        <span class='hexvals identifier id'>hexvals</span> <span class='assign token'>=</span> <span class='line identifier id'>line</span><span class='dot token'>.</span><span class='unpack identifier id'>unpack</span><span class='lparen token'>(</span><span class='string val'>'H*'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
        <span class='hexvals identifier id'>hexvals</span> <span class='opasgn op'>+=</span> <span class='string val'>' '</span> <span class='mult op'>*</span> <span class='lparen token'>(</span><span class='integer val'>32</span> <span class='minus op'>-</span> <span class='hexvals identifier id'>hexvals</span><span class='dot token'>.</span><span class='length identifier id'>length</span><span class='rparen token'>)</span>
        <span class='hexvals identifier id'>hexvals</span> <span class='assign token'>=</span> <span class='format identifier id'>format</span><span class='lparen token'>(</span><span class='string val'>&quot;%s %s %s %s  &quot;</span> <span class='mult op'>*</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='hexvals identifier id'>hexvals</span><span class='dot token'>.</span><span class='unpack identifier id'>unpack</span><span class='lparen token'>(</span><span class='string val'>'a2'</span> <span class='mult op'>*</span> <span class='integer val'>16</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
        <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='line identifier id'>line</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/[\000-\037\177-\377]/n</span><span class='comma token'>,</span> <span class='string val'>'.'</span><span class='rparen token'>)</span>
        <span class='printf identifier id'>printf</span> <span class='string val'>&quot;%s 0x%5.5x: %s%s\n&quot;</span><span class='comma token'>,</span> <span class='dir identifier id'>dir</span><span class='comma token'>,</span> <span class='addr identifier id'>addr</span><span class='comma token'>,</span> <span class='hexvals identifier id'>hexvals</span><span class='comma token'>,</span> <span class='line identifier id'>line</span>
        <span class='addr identifier id'>addr</span> <span class='opasgn op'>+=</span> <span class='integer val'>16</span>
        <span class='offset identifier id'>offset</span> <span class='opasgn op'>+=</span> <span class='integer val'>16</span>
        <span class='len identifier id'>len</span> <span class='opasgn op'>-=</span> <span class='integer val'>16</span>
      <span class='end end kw'>end</span>
      <span class='print identifier id'>print</span> <span class='string val'>&quot;\n&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Proxy&quot;</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Proxy&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Net constant id'>Net</span><span class='colon2 op'>::</span><span class='Telnet constant id'>Telnet</span><span class='rparen token'>)</span>
      <span class='@sock ivar id'>@sock</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Proxy&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='sock identifier id'>sock</span>
    <span class='elsif elsif kw'>elsif</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Proxy&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='IO constant id'>IO</span><span class='rparen token'>)</span>
      <span class='@sock ivar id'>@sock</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Proxy&quot;</span><span class='rbrack token'>]</span>
    <span class='else else kw'>else</span>
      <span class='raise identifier id'>raise</span> <span class='string val'>&quot;Error: Proxy must be an instance of Net::Telnet or IO.&quot;</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='message identifier id'>message</span> <span class='assign token'>=</span> <span class='string val'>&quot;Trying &quot;</span> <span class='plus op'>+</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Host&quot;</span><span class='rbrack token'>]</span> <span class='plus op'>+</span> <span class='string val'>&quot;...\n&quot;</span>
    <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='message identifier id'>message</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='@log ivar id'>@log</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='message identifier id'>message</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Output_log&quot;</span><span class='rparen token'>)</span>
    <span class='@dumplog ivar id'>@dumplog</span><span class='dot token'>.</span><span class='log_dump identifier id'>log_dump</span><span class='lparen token'>(</span><span class='string val'>'#'</span><span class='comma token'>,</span> <span class='message identifier id'>message</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Dump_log&quot;</span><span class='rparen token'>)</span>

    <span class='begin begin kw'>begin</span>
      <span class='if if kw'>if</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Timeout&quot;</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
        <span class='@sock ivar id'>@sock</span> <span class='assign token'>=</span> <span class='TCPSocket constant id'>TCPSocket</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Host&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Port&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='timeout identifier id'>timeout</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Timeout&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
          <span class='@sock ivar id'>@sock</span> <span class='assign token'>=</span> <span class='TCPSocket constant id'>TCPSocket</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Host&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Port&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='rescue rescue kw'>rescue</span> <span class='TimeoutError constant id'>TimeoutError</span>
      <span class='raise identifier id'>raise</span> <span class='TimeoutError constant id'>TimeoutError</span><span class='comma token'>,</span> <span class='string val'>&quot;timed out while opening a connection to the host&quot;</span>
    <span class='rescue rescue kw'>rescue</span>
      <span class='@log ivar id'>@log</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='$ERROR_INFO gvar id'>$ERROR_INFO</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='plus op'>+</span> <span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Output_log&quot;</span><span class='rparen token'>)</span>
      <span class='@dumplog ivar id'>@dumplog</span><span class='dot token'>.</span><span class='log_dump identifier id'>log_dump</span><span class='lparen token'>(</span><span class='string val'>'#'</span><span class='comma token'>,</span> <span class='$ERROR_INFO gvar id'>$ERROR_INFO</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='plus op'>+</span> <span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Dump_log&quot;</span><span class='rparen token'>)</span>
      <span class='raise identifier id'>raise</span>
    <span class='end end kw'>end</span>
    <span class='@sock ivar id'>@sock</span><span class='dot token'>.</span><span class='sync identifier id'>sync</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='@sock ivar id'>@sock</span><span class='dot token'>.</span><span class='binmode identifier id'>binmode</span>

    <span class='message identifier id'>message</span> <span class='assign token'>=</span> <span class='string val'>&quot;Connected to &quot;</span> <span class='plus op'>+</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Host&quot;</span><span class='rbrack token'>]</span> <span class='plus op'>+</span> <span class='string val'>&quot;.\n&quot;</span>
    <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='message identifier id'>message</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='@log ivar id'>@log</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='message identifier id'>message</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Output_log&quot;</span><span class='rparen token'>)</span>
    <span class='@dumplog ivar id'>@dumplog</span><span class='dot token'>.</span><span class='log_dump identifier id'>log_dump</span><span class='lparen token'>(</span><span class='string val'>'#'</span><span class='comma token'>,</span> <span class='message identifier id'>message</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Dump_log&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='@sock ivar id'>@sock</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span> <span class='comment val'># initialize</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div><div class="section methodmissing">
  <h2>Dynamic Method Handling</h2>

  <p class="note">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
      in the class <a href="../Delegator.html" title="Delegator">Delegator</a>
    
  </p>

  <div id="method_missing-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>method_missing</span><span class='args'>(m, *args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Handles the magic of delegation through __getobj__.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/delegate.rb', line 150</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/delegate.rb#L150">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">150
151
152
153
154
155
156</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='method_missing identifier id'>method_missing</span><span class='lparen token'>(</span><span class='m identifier id'>m</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='target identifier id'>target</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='__getobj__ identifier id'>__getobj__</span>
  <span class='unless unless kw'>unless</span> <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='m identifier id'>m</span><span class='rparen token'>)</span>
    <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='m identifier id'>m</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='__send__ identifier id'>__send__</span><span class='lparen token'>(</span><span class='m identifier id'>m</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#binmode-instance_method">#binmode</span><span class='args'>(mode = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Turn newline conversion on (<tt>mode</tt> == false) or off (<tt>mode</tt>
== true), or return the current value (<tt>mode</tt> is not specified).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#binmode-3D-instance_method">#binmode=</span><span class='args'>(mode)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Turn newline conversion on (false) or off (true).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#cmd-instance_method">#cmd</span><span class='args'>(options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Send a command to the host.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#login-instance_method">#login</span><span class='args'>(options, password = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Login to the host with a given username and password.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#preprocess-instance_method">#preprocess</span><span class='args'>(string)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Preprocess received data from the host.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#print-instance_method">#print</span><span class='args'>(string)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sends a string to the host.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#puts-instance_method">#puts</span><span class='args'>(string)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sends a string to the host.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#telnetmode-instance_method">#telnetmode</span><span class='args'>(mode = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Set telnet command interpretation on (<tt>mode</tt> == true) or off
(<tt>mode</tt> == false), or return the current value (<tt>mode</tt> not
provided).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#telnetmode-3D-instance_method">#telnetmode=</span><span class='args'>(mode)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Turn telnet command interpretation on (true) or off (false).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#waitfor-instance_method">#waitfor</span><span class='args'>(options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Read data from the host until a certain sequence is matched.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#write-instance_method">#write</span><span class='args'>(string)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Write <tt>string</tt> to the host.
</p>

        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h2>Public Instance Methods Inherited from <a href="../SimpleDelegator.html" title="SimpleDelegator">SimpleDelegator</a></h2>
    <p><span class='name'><a href="../SimpleDelegator.html#__getobj__-instance_method" title="__getobj__">__getobj__</a></span>, <span class='name'><a href="../SimpleDelegator.html#__setobj__-instance_method" title="__setobj__">__setobj__</a></span>, <span class='name'><a href="../SimpleDelegator.html#clone-instance_method" title="clone">clone</a></span>, <span class='name'><a href="../SimpleDelegator.html#dup-instance_method" title="dup">dup</a></span></p>
  </div>
  
  <div>
    <h2>Public Instance Methods Inherited from <a href="../Delegator.html" title="Delegator">Delegator</a></h2>
    <p><span class='name'><a href="../Delegator.html#marshal_dump-instance_method" title="marshal_dump">marshal_dump</a></span>, <span class='name'><a href="../Delegator.html#marshal_load-instance_method" title="marshal_load">marshal_load</a></span>, <span class='name'><a href="../Delegator.html#respond_to%3F-instance_method" title="respond_to?">respond_to?</a></span></p>
  </div>
  
</div>
<div class="clear"></div><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="SimpleDelegator.html" title="SimpleDelegator">SimpleDelegator</a></h2>
    <p><span class='name'><a href="../SimpleDelegator.html#__getobj__-instance_method" title="__getobj__">__getobj__</a></span>, <span class='name'><a href="../SimpleDelegator.html#__setobj__-instance_method" title="__setobj__">__setobj__</a></span>, <span class='name'><a href="../SimpleDelegator.html#clone-instance_method" title="clone">clone</a></span>, <span class='name'><a href="../SimpleDelegator.html#dup-instance_method" title="dup">dup</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>binmode</h3>
</div><div id="binmode-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>binmode</span><span class='args'>(mode = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Turn newline conversion on (<tt>mode</tt> == false) or off (<tt>mode</tt>
== true), or return the current value (<tt>mode</tt> is not specified).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 408</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L408">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">408
409
410
411
412
413
414
415
416
417</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='binmode identifier id'>binmode</span><span class='lparen token'>(</span><span class='mode identifier id'>mode</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='mode identifier id'>mode</span>
  <span class='when when kw'>when</span> <span class='nil nil kw'>nil</span>
    <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Binmode&quot;</span><span class='rbrack token'>]</span> 
  <span class='when when kw'>when</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='false false kw'>false</span>
    <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Binmode&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='mode identifier id'>mode</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;argument must be true or false&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>binmode=</h3>
</div><div id="binmode-3D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>binmode=</span><span class='args'>(mode)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Turn newline conversion on (false) or off (true).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 420</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L420">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">420
421
422
423
424
425
426</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='binmode= identifier id'>binmode=</span><span class='lparen token'>(</span><span class='mode identifier id'>mode</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='true true kw'>true</span> <span class='eq op'>==</span> <span class='mode identifier id'>mode</span> <span class='or or kw'>or</span> <span class='false false kw'>false</span> <span class='eq op'>==</span> <span class='mode identifier id'>mode</span><span class='rparen token'>)</span>
    <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Binmode&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='mode identifier id'>mode</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;argument must be true or false&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>cmd</h3>
</div><div id="cmd-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cmd</span><span class='args'>(options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Send a command to the host.
</p>
<p>
More exactly, sends a string to the host, and reads in all received data
until is sees the prompt or other matched sequence.
</p>
<p>
If a block is given, the received data will be yielded to it as it is read
in. Whether a block is given or not, the received data will be return as a
string. Note that the received data includes the prompt and in most cases
the host&#8217;s echo of our command.
</p>
<p>
<tt>options</tt> is either a String, specified the string or command to
send to the host; or it is a hash of options. If a hash, the following
options can be specified:
</p>
<table>
<tr><td valign="top">String:</td><td>the command or other string to send to the host.

</td></tr>
<tr><td valign="top">Match:</td><td>a regular expression, the sequence to look for in the received data before
returning. If not specified, the Prompt option value specified when this
instance was created will be used, or, failing that, the default prompt of
/[$%#&gt;] \z/n.

</td></tr>
<tr><td valign="top">Timeout:</td><td>the seconds to wait for data from the host before raising a Timeout error.
If not specified, the Timeout option value specified when this instance was
created will be used, or, failing that, the default value of 10 seconds.

</td></tr>
</table>
<p>
The command or other string will have the newline sequence appended to it.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 664</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L664">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='cmd identifier id'>cmd</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'># :yield: recvdata</span>
  <span class='match identifier id'>match</span>    <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Prompt&quot;</span><span class='rbrack token'>]</span>
  <span class='time_out identifier id'>time_out</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Timeout&quot;</span><span class='rbrack token'>]</span>

  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='string identifier id'>string</span>   <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;String&quot;</span><span class='rbrack token'>]</span>
    <span class='match identifier id'>match</span>    <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Match&quot;</span><span class='rbrack token'>]</span>   <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Match&quot;</span><span class='rparen token'>)</span>
    <span class='time_out identifier id'>time_out</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Timeout&quot;</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Timeout&quot;</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='string identifier id'>string</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span>
  <span class='end end kw'>end</span>

  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='waitfor identifier id'>waitfor</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='string val'>&quot;Prompt&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='match identifier id'>match</span><span class='comma token'>,</span> <span class='string val'>&quot;Timeout&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='time_out identifier id'>time_out</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='yield yield kw'>yield</span> <span class='c identifier id'>c</span> <span class='rbrace token'>}</span>
  <span class='else else kw'>else</span>
    <span class='waitfor identifier id'>waitfor</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='string val'>&quot;Prompt&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='match identifier id'>match</span><span class='comma token'>,</span> <span class='string val'>&quot;Timeout&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='time_out identifier id'>time_out</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>login</h3>
</div><div id="login-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>login</span><span class='args'>(options, password = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Login to the host with a given username and password.
</p>
<p>
The username and password can either be provided as two string arguments in
that order, or as a hash with keys &quot;Name&quot; and
&quot;Password&quot;.
</p>
<p>
This method looks for the strings &quot;login&quot; and
&quot;Password&quot; from the host to determine when to send the username
and password. If the login sequence does not follow this pattern (for
instance, you are connecting to a service other than telnet), you will need
to handle login yourself.
</p>
<p>
The password can be omitted, either by only provided one String argument,
which will be used as the username, or by providing a has that has no
&quot;Password&quot; key. In this case, the method will not look for the
&quot;Password:&quot; prompt; if it is sent, it will have to be dealt with
by later calls.
</p>
<p>
The method returns all data received during the login process from the
host, including the echoed username but not the password (which the host
should not echo). If a block is passed in, this received data is also
yielded to the block as it is received.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 706</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L706">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='login identifier id'>login</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='password identifier id'>password</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span> <span class='comment val'># :yield: recvdata</span>
  <span class='login_prompt identifier id'>login_prompt</span> <span class='assign token'>=</span> <span class='regexp val'>/[Ll]ogin[: ]*\z/n</span>
  <span class='password_prompt identifier id'>password_prompt</span> <span class='assign token'>=</span> <span class='regexp val'>/Password[: ]*\z/n</span>
  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='username identifier id'>username</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Name&quot;</span><span class='rbrack token'>]</span>
    <span class='password identifier id'>password</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Password&quot;</span><span class='rbrack token'>]</span>
  <span class='login_prompt identifier id'>login_prompt</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;LoginPrompt&quot;</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;LoginPrompt&quot;</span><span class='rbrack token'>]</span>
  <span class='password_prompt identifier id'>password_prompt</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;PasswordPrompt&quot;</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;PasswordPrompt&quot;</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>
    <span class='username identifier id'>username</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='waitfor identifier id'>waitfor</span><span class='lparen token'>(</span><span class='login_prompt identifier id'>login_prompt</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='yield yield kw'>yield</span> <span class='c identifier id'>c</span> <span class='rbrace token'>}</span>
    <span class='if if kw'>if</span> <span class='password identifier id'>password</span>
      <span class='line identifier id'>line</span> <span class='opasgn op'>+=</span> <span class='cmd identifier id'>cmd</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='string val'>&quot;String&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='username identifier id'>username</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;Match&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='password_prompt identifier id'>password_prompt</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='yield yield kw'>yield</span> <span class='c identifier id'>c</span> <span class='rbrace token'>}</span>
      <span class='line identifier id'>line</span> <span class='opasgn op'>+=</span> <span class='cmd identifier id'>cmd</span><span class='lparen token'>(</span><span class='password identifier id'>password</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='yield yield kw'>yield</span> <span class='c identifier id'>c</span> <span class='rbrace token'>}</span>
    <span class='else else kw'>else</span>
      <span class='line identifier id'>line</span> <span class='opasgn op'>+=</span> <span class='cmd identifier id'>cmd</span><span class='lparen token'>(</span><span class='username identifier id'>username</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='yield yield kw'>yield</span> <span class='c identifier id'>c</span> <span class='rbrace token'>}</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='waitfor identifier id'>waitfor</span><span class='lparen token'>(</span><span class='login_prompt identifier id'>login_prompt</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='password identifier id'>password</span>
      <span class='line identifier id'>line</span> <span class='opasgn op'>+=</span> <span class='cmd identifier id'>cmd</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='string val'>&quot;String&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='username identifier id'>username</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;Match&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='password_prompt identifier id'>password_prompt</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
      <span class='line identifier id'>line</span> <span class='opasgn op'>+=</span> <span class='cmd identifier id'>cmd</span><span class='lparen token'>(</span><span class='password identifier id'>password</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='line identifier id'>line</span> <span class='opasgn op'>+=</span> <span class='cmd identifier id'>cmd</span><span class='lparen token'>(</span><span class='username identifier id'>username</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='line identifier id'>line</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>preprocess</h3>
</div><div id="preprocess-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>preprocess</span><span class='args'>(string)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Preprocess received data from the host.
</p>
<p>
Performs newline conversion and detects telnet command sequences. Called
automatically by #waitfor(). You should only use this method yourself if
you have read input directly using sysread() or similar, and even then only
if in telnet mode.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 434</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L434">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='preprocess identifier id'>preprocess</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>
  <span class='comment val'># combine CR+NULL into CR</span>
  <span class='string identifier id'>string</span> <span class='assign token'>=</span> <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='dregexp node'>/#{CR}#{NULL}/n</span><span class='o identifier id'>o</span><span class='comma token'>,</span> <span class='CR constant id'>CR</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Telnetmode&quot;</span><span class='rbrack token'>]</span>

  <span class='comment val'># combine EOL into &quot;\n&quot;</span>
  <span class='string identifier id'>string</span> <span class='assign token'>=</span> <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='dregexp node'>/#{EOL}/n</span><span class='o identifier id'>o</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Binmode&quot;</span><span class='rbrack token'>]</span>

  <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='dregexp node'>/#{IAC}(
               [#{IAC}#{AO}#{AYT}#{DM}#{IP}#{NOP}]|
               [#{DO}#{DONT}#{WILL}#{WONT}]
                 [#{OPT_BINARY}-#{OPT_NEW_ENVIRON}#{OPT_EXOPL}]|
               #{SB}[^#{IAC}]*#{IAC}#{SE}
             )/</span><span class='xno identifier id'>xno</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='if if kw'>if</span>    <span class='IAC constant id'>IAC</span> <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span>  <span class='comment val'># handle escaped IAC characters</span>
      <span class='IAC constant id'>IAC</span>
    <span class='elsif elsif kw'>elsif</span> <span class='AYT constant id'>AYT</span> <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span>  <span class='comment val'># respond to &quot;IAC AYT&quot; (are you there)</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string val'>&quot;nobody here but us pigeons&quot;</span> <span class='plus op'>+</span> <span class='EOL constant id'>EOL</span><span class='rparen token'>)</span>
      <span class='string val'>''</span>
    <span class='elsif elsif kw'>elsif</span> <span class='DO constant id'>DO</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>  <span class='comment val'># respond to &quot;IAC DO x&quot;</span>
      <span class='if if kw'>if</span> <span class='OPT_BINARY constant id'>OPT_BINARY</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
        <span class='@telnet_option ivar id'>@telnet_option</span><span class='lbrack token'>[</span><span class='string val'>&quot;BINARY&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='WILL constant id'>WILL</span> <span class='plus op'>+</span> <span class='OPT_BINARY constant id'>OPT_BINARY</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='WONT constant id'>WONT</span> <span class='plus op'>+</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='float val'>1</span><span class='dot2 op'>..</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
      <span class='string val'>''</span>
    <span class='elsif elsif kw'>elsif</span> <span class='DONT constant id'>DONT</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>  <span class='comment val'># respond to &quot;IAC DON'T x&quot; with &quot;IAC WON'T x&quot;</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='WONT constant id'>WONT</span> <span class='plus op'>+</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='float val'>1</span><span class='dot2 op'>..</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='string val'>''</span>
    <span class='elsif elsif kw'>elsif</span> <span class='WILL constant id'>WILL</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>  <span class='comment val'># respond to &quot;IAC WILL x&quot;</span>
      <span class='if if kw'>if</span>    <span class='OPT_BINARY constant id'>OPT_BINARY</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='DO constant id'>DO</span> <span class='plus op'>+</span> <span class='OPT_BINARY constant id'>OPT_BINARY</span><span class='rparen token'>)</span>
      <span class='elsif elsif kw'>elsif</span> <span class='OPT_ECHO constant id'>OPT_ECHO</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='DO constant id'>DO</span> <span class='plus op'>+</span> <span class='OPT_ECHO constant id'>OPT_ECHO</span><span class='rparen token'>)</span>
      <span class='elsif elsif kw'>elsif</span> <span class='OPT_SGA constant id'>OPT_SGA</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>  <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
        <span class='@telnet_option ivar id'>@telnet_option</span><span class='lbrack token'>[</span><span class='string val'>&quot;SGA&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='DO constant id'>DO</span> <span class='plus op'>+</span> <span class='OPT_SGA constant id'>OPT_SGA</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='DONT constant id'>DONT</span> <span class='plus op'>+</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='float val'>1</span><span class='dot2 op'>..</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
      <span class='string val'>''</span>
    <span class='elsif elsif kw'>elsif</span> <span class='WONT constant id'>WONT</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>  <span class='comment val'># respond to &quot;IAC WON'T x&quot;</span>
      <span class='if if kw'>if</span>    <span class='OPT_ECHO constant id'>OPT_ECHO</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='DONT constant id'>DONT</span> <span class='plus op'>+</span> <span class='OPT_ECHO constant id'>OPT_ECHO</span><span class='rparen token'>)</span>
      <span class='elsif elsif kw'>elsif</span> <span class='OPT_SGA constant id'>OPT_SGA</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>  <span class='eq op'>==</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
        <span class='@telnet_option ivar id'>@telnet_option</span><span class='lbrack token'>[</span><span class='string val'>&quot;SGA&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='DONT constant id'>DONT</span> <span class='plus op'>+</span> <span class='OPT_SGA constant id'>OPT_SGA</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='DONT constant id'>DONT</span> <span class='plus op'>+</span> <span class='$1 nth_ref id'>$1</span><span class='lbrack token'>[</span><span class='float val'>1</span><span class='dot2 op'>..</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
      <span class='string val'>''</span>
    <span class='else else kw'>else</span>
      <span class='string val'>''</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span> <span class='comment val'># preprocess</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>print</h3>
</div><div id="print-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>print</span><span class='args'>(string)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sends a string to the host.
</p>
<p>
This does <em>not</em> automatically append a newline to the string.
Embedded newlines may be converted and telnet command sequences escaped
depending upon the values of telnetmode, binmode, and telnet options set by
the host.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 611</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L611">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='print identifier id'>print</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>
  <span class='string identifier id'>string</span> <span class='assign token'>=</span> <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='dregexp node'>/#{IAC}/n</span><span class='o identifier id'>o</span><span class='comma token'>,</span> <span class='IAC constant id'>IAC</span> <span class='plus op'>+</span> <span class='IAC constant id'>IAC</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Telnetmode&quot;</span><span class='rbrack token'>]</span>

  <span class='if if kw'>if</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Binmode&quot;</span><span class='rbrack token'>]</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='if if kw'>if</span> <span class='@telnet_option ivar id'>@telnet_option</span><span class='lbrack token'>[</span><span class='string val'>&quot;BINARY&quot;</span><span class='rbrack token'>]</span> <span class='and and kw'>and</span> <span class='@telnet_option ivar id'>@telnet_option</span><span class='lbrack token'>[</span><span class='string val'>&quot;SGA&quot;</span><span class='rbrack token'>]</span>
      <span class='comment val'># IAC WILL SGA IAC DO BIN send EOL --&gt; CR</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\n/n</span><span class='comma token'>,</span> <span class='CR constant id'>CR</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='elsif elsif kw'>elsif</span> <span class='@telnet_option ivar id'>@telnet_option</span><span class='lbrack token'>[</span><span class='string val'>&quot;SGA&quot;</span><span class='rbrack token'>]</span>
      <span class='comment val'># IAC WILL SGA send EOL --&gt; CR+NULL</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\n/n</span><span class='comma token'>,</span> <span class='CR constant id'>CR</span> <span class='plus op'>+</span> <span class='NULL constant id'>NULL</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='comment val'># NONE send EOL --&gt; CR+LF</span>
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\n/n</span><span class='comma token'>,</span> <span class='EOL constant id'>EOL</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>puts</h3>
</div><div id="puts-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>puts</span><span class='args'>(string)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sends a string to the host.
</p>
<p>
Same as #print(), but appends a newline to the string.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 633</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L633">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">633
634
635</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='puts identifier id'>puts</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='print identifier id'>print</span><span class='lparen token'>(</span><span class='string identifier id'>string</span> <span class='plus op'>+</span> <span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>telnetmode</h3>
</div><div id="telnetmode-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>telnetmode</span><span class='args'>(mode = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Set telnet command interpretation on (<tt>mode</tt> == true) or off
(<tt>mode</tt> == false), or return the current value (<tt>mode</tt> not
provided). It should be on for true telnet sessions, off if using
Net::Telnet to connect to a non-telnet service such as SMTP.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 384</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L384">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">384
385
386
387
388
389
390
391
392
393</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='telnetmode identifier id'>telnetmode</span><span class='lparen token'>(</span><span class='mode identifier id'>mode</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='mode identifier id'>mode</span>
  <span class='when when kw'>when</span> <span class='nil nil kw'>nil</span>
    <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Telnetmode&quot;</span><span class='rbrack token'>]</span>
  <span class='when when kw'>when</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='false false kw'>false</span>
    <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Telnetmode&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='mode identifier id'>mode</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;argument must be true or false, or missing&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>telnetmode=</h3>
</div><div id="telnetmode-3D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>telnetmode=</span><span class='args'>(mode)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Turn telnet command interpretation on (true) or off (false). It should be
on for true telnet sessions, off if using Net::Telnet to connect to a
non-telnet service such as SMTP.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 398</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L398">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">398
399
400
401
402
403
404</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='telnetmode= identifier id'>telnetmode=</span><span class='lparen token'>(</span><span class='mode identifier id'>mode</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='true true kw'>true</span> <span class='eq op'>==</span> <span class='mode identifier id'>mode</span> <span class='or or kw'>or</span> <span class='false false kw'>false</span> <span class='eq op'>==</span> <span class='mode identifier id'>mode</span><span class='rparen token'>)</span>
    <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Telnetmode&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='mode identifier id'>mode</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;argument must be true or false&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>waitfor</h3>
</div><div id="waitfor-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>waitfor</span><span class='args'>(options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Read data from the host until a certain sequence is matched.
</p>
<p>
If a block is given, the received data will be yielded as it is read in
(not necessarily all in one go), or nil if EOF occurs before any data is
received. Whether a block is given or not, all data read will be returned
in a single string, or again nil if EOF occurs before any data is received.
Note that received data includes the matched sequence we were looking for.
</p>
<p>
<tt>options</tt> can be either a regular expression or a hash of options.
If a regular expression, this specifies the data to wait for. If a hash,
this can specify the following options:
</p>
<table>
<tr><td valign="top">Match:</td><td>a regular expression, specifying the data to wait for.

</td></tr>
<tr><td valign="top">Prompt:</td><td>as for Match; used only if Match is not specified.

</td></tr>
<tr><td valign="top">String:</td><td>as for Match, except a string that will be converted into a regular
expression. Used only if Match and Prompt are not specified.

</td></tr>
<tr><td valign="top">Timeout:</td><td>the number of seconds to wait for data from the host before raising a
TimeoutError. If set to false, no timeout will occur. If not specified, the
Timeout option value specified when this instance was created will be used,
or, failing that, the default value of 10 seconds.

</td></tr>
<tr><td valign="top">Waittime:</td><td>the number of seconds to wait after matching against the input data to see
if more data arrives. If more data arrives within this time, we will judge
ourselves not to have matched successfully, and will continue trying to
match. If not specified, the Waittime option value specified when this
instance was created will be used, or, failing that, the default value of 0
seconds, which means not to wait for more input.

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 524</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L524">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='waitfor identifier id'>waitfor</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'># :yield: recvdata</span>
  <span class='time_out identifier id'>time_out</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Timeout&quot;</span><span class='rbrack token'>]</span>
  <span class='waittime identifier id'>waittime</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Waittime&quot;</span><span class='rbrack token'>]</span>

  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='prompt identifier id'>prompt</span>   <span class='assign token'>=</span> <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Match&quot;</span><span class='rparen token'>)</span>
                 <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Match&quot;</span><span class='rbrack token'>]</span>
               <span class='elsif elsif kw'>elsif</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Prompt&quot;</span><span class='rparen token'>)</span>
                 <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Prompt&quot;</span><span class='rbrack token'>]</span>
               <span class='elsif elsif kw'>elsif</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;String&quot;</span><span class='rparen token'>)</span>
                 <span class='Regexp constant id'>Regexp</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='Regexp constant id'>Regexp</span><span class='dot token'>.</span><span class='quote identifier id'>quote</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;String&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='rparen token'>)</span>
               <span class='end end kw'>end</span>
    <span class='time_out identifier id'>time_out</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Timeout&quot;</span><span class='rbrack token'>]</span>  <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Timeout&quot;</span><span class='rparen token'>)</span>
    <span class='waittime identifier id'>waittime</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Waittime&quot;</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Waittime&quot;</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='prompt identifier id'>prompt</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='time_out identifier id'>time_out</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
    <span class='time_out identifier id'>time_out</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>

  <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='buf identifier id'>buf</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='rest identifier id'>rest</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='until until kw'>until</span><span class='lparen token'>(</span><span class='prompt identifier id'>prompt</span> <span class='eqq op'>===</span> <span class='line identifier id'>line</span> <span class='and and kw'>and</span> <span class='not not kw'>not</span> <span class='IO constant id'>IO</span><span class='colon2 op'>::</span><span class='select identifier id'>select</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='@sock ivar id'>@sock</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='waittime identifier id'>waittime</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='unless unless kw'>unless</span> <span class='IO constant id'>IO</span><span class='colon2 op'>::</span><span class='select identifier id'>select</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='@sock ivar id'>@sock</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='time_out identifier id'>time_out</span><span class='rparen token'>)</span>
      <span class='raise identifier id'>raise</span> <span class='TimeoutError constant id'>TimeoutError</span><span class='comma token'>,</span> <span class='string val'>&quot;timed out while waiting for more data&quot;</span>
    <span class='end end kw'>end</span>
    <span class='begin begin kw'>begin</span>
      <span class='c identifier id'>c</span> <span class='assign token'>=</span> <span class='@sock ivar id'>@sock</span><span class='dot token'>.</span><span class='readpartial identifier id'>readpartial</span><span class='lparen token'>(</span><span class='integer val'>1024</span> <span class='mult op'>*</span> <span class='integer val'>1024</span><span class='rparen token'>)</span>
      <span class='@dumplog ivar id'>@dumplog</span><span class='dot token'>.</span><span class='log_dump identifier id'>log_dump</span><span class='lparen token'>(</span><span class='string val'>'&lt;'</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Dump_log&quot;</span><span class='rparen token'>)</span>
      <span class='if if kw'>if</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Telnetmode&quot;</span><span class='rbrack token'>]</span>
        <span class='c identifier id'>c</span> <span class='assign token'>=</span> <span class='rest identifier id'>rest</span> <span class='plus op'>+</span> <span class='c identifier id'>c</span>
        <span class='if if kw'>if</span> <span class='Integer constant id'>Integer</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='rindex identifier id'>rindex</span><span class='lparen token'>(</span><span class='dregexp node'>/#{IAC}#{SE}/n</span><span class='o identifier id'>o</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='lt op'>&lt;</span>
           <span class='Integer constant id'>Integer</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='rindex identifier id'>rindex</span><span class='lparen token'>(</span><span class='dregexp node'>/#{IAC}#{SB}/n</span><span class='o identifier id'>o</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
          <span class='buf identifier id'>buf</span> <span class='assign token'>=</span> <span class='preprocess identifier id'>preprocess</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='lbrack token'>[</span><span class='integer val'>0</span> <span class='dot3 op'>...</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='rindex identifier id'>rindex</span><span class='lparen token'>(</span><span class='dregexp node'>/#{IAC}#{SB}/n</span><span class='o identifier id'>o</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
          <span class='rest identifier id'>rest</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='lbrack token'>[</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='rindex identifier id'>rindex</span><span class='lparen token'>(</span><span class='dregexp node'>/#{IAC}#{SB}/n</span><span class='o identifier id'>o</span><span class='rparen token'>)</span> <span class='dot2 op'>..</span> <span class='integer val'>-1</span><span class='rbrack token'>]</span>
        <span class='elsif elsif kw'>elsif</span> <span class='pt identifier id'>pt</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='rindex identifier id'>rindex</span><span class='lparen token'>(</span><span class='dregexp node'>/#{IAC}[^#{IAC}#{AO}#{AYT}#{DM}#{IP}#{NOP}]?\z/n</span><span class='o identifier id'>o</span><span class='rparen token'>)</span>
          <span class='buf identifier id'>buf</span> <span class='assign token'>=</span> <span class='preprocess identifier id'>preprocess</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='lbrack token'>[</span><span class='integer val'>0</span> <span class='dot3 op'>...</span> <span class='pt identifier id'>pt</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
          <span class='rest identifier id'>rest</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='lbrack token'>[</span><span class='pt identifier id'>pt</span> <span class='dot2 op'>..</span> <span class='integer val'>-1</span><span class='rbrack token'>]</span>
        <span class='else else kw'>else</span>
          <span class='buf identifier id'>buf</span> <span class='assign token'>=</span> <span class='preprocess identifier id'>preprocess</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='rparen token'>)</span>
          <span class='rest identifier id'>rest</span> <span class='assign token'>=</span> <span class='string val'>''</span>
        <span class='end end kw'>end</span>
     <span class='else else kw'>else</span>
       <span class='comment val'># Not Telnetmode.</span>
       <span class='comment val'>#</span>
       <span class='comment val'># We cannot use preprocess() on this data, because that</span>
       <span class='comment val'># method makes some Telnetmode-specific assumptions.</span>
       <span class='buf identifier id'>buf</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span>
       <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='dregexp node'>/#{EOL}/n</span><span class='o identifier id'>o</span><span class='comma token'>,</span> <span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>&quot;Binmode&quot;</span><span class='rbrack token'>]</span>
       <span class='rest identifier id'>rest</span> <span class='assign token'>=</span> <span class='string val'>''</span>
      <span class='end end kw'>end</span>
      <span class='@log ivar id'>@log</span><span class='dot token'>.</span><span class='print identifier id'>print</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Output_log&quot;</span><span class='rparen token'>)</span>
      <span class='line identifier id'>line</span> <span class='opasgn op'>+=</span> <span class='buf identifier id'>buf</span>
      <span class='yield yield kw'>yield</span> <span class='buf identifier id'>buf</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='rescue rescue kw'>rescue</span> <span class='EOFError constant id'>EOFError</span> <span class='comment val'># End of file reached</span>
      <span class='if if kw'>if</span> <span class='line identifier id'>line</span> <span class='eq op'>==</span> <span class='string val'>''</span>
        <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
        <span class='yield yield kw'>yield</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
      <span class='end end kw'>end</span>
      <span class='break break kw'>break</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='line identifier id'>line</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>write</h3>
</div><div id="write-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>write</span><span class='args'>(string)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Write <tt>string</tt> to the host.
</p>
<p>
Does not perform any conversions on <tt>string</tt>. Will log
<tt>string</tt> to the dumplog, if the Dump_log option is set.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/net/telnet.rb', line 596</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/net/telnet.rb#L596">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">596
597
598
599
600
601
602
603</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>
  <span class='length identifier id'>length</span> <span class='assign token'>=</span> <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
  <span class='while while kw'>while</span> <span class='integer val'>0</span> <span class='lt op'>&lt;</span> <span class='length identifier id'>length</span>
    <span class='IO constant id'>IO</span><span class='colon2 op'>::</span><span class='select identifier id'>select</span><span class='lparen token'>(</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='@sock ivar id'>@sock</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='@dumplog ivar id'>@dumplog</span><span class='dot token'>.</span><span class='log_dump identifier id'>log_dump</span><span class='lparen token'>(</span><span class='string val'>'&gt;'</span><span class='comma token'>,</span> <span class='string identifier id'>string</span><span class='lbrack token'>[</span><span class='minus op'>-</span><span class='length identifier id'>length</span><span class='dot2 op'>..</span><span class='integer val'>-1</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;Dump_log&quot;</span><span class='rparen token'>)</span>
    <span class='length identifier id'>length</span> <span class='opasgn op'>-=</span> <span class='@sock ivar id'>@sock</span><span class='dot token'>.</span><span class='syswrite identifier id'>syswrite</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='lbrack token'>[</span><span class='minus op'>-</span><span class='length identifier id'>length</span><span class='dot2 op'>..</span><span class='integer val'>-1</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>