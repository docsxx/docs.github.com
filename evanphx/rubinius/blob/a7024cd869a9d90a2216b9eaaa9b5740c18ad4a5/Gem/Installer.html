<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>evanphx's rubinius - Class: Gem::Installer - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/evanphx/commits/rubinius/master" rel="alternate" title="Recent Commits to rubinius:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("evanphx", "rubinius", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("evanphx", "rubinius", "a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/evanphx/rubinius/tree/">Source</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/network">Network</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/evanphx/rubinius">Wiki</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/graphs">Graphs</a></li>                    
            <li class="active"><a href="/evanphx/rubinius">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/evanphx">evanphx</a> / <b><a href="http://github.com/evanphx/rubinius/tree">rubinius</a></b>        
                <a id="namespaces_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Gem_Installer">
  <h1>Class: Gem::Installer</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="UserInteraction.html" title="Gem::UserInteraction">Gem::UserInteraction</a>, <a href="RequirePathsBuilder.html" title="Gem::RequirePathsBuilder">Gem::RequirePathsBuilder</a></p>
</div><div class="section docstring">
  <p>
The installer class processes RubyGem .gem files and installs the files
contained in the .gem into the Gem.path.
</p>
<p>
Gem::Installer does the work of putting files in all the right places on
the filesystem including unpacking the gem into its gem dir, installing the
gemspec in the specifications dir, storing the cached gem in the cache dir,
and installing either wrappers or symlinks for executables.
</p>
<p>
The installer fires pre and post install hooks. Hooks can be added either
through a rubygems_plugin.rb file in an installed gem or via a
rubygems/defaults/#{RUBY_ENGINE}.rb or
rubygems/defaults/operating_system.rb file. See Gem.pre_install and
Gem.post_install for details.
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Class Attributes</h2>
      <table>
      
        <tr>
          <th class="name">exec_format</td>
          <td class="readwrite">
            [R<span id='exec_format=-class_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>exec_format</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">home_install_warning</td>
          <td class="readwrite">
            [<span id='home_install_warning-class_method'>R</span><span id='home_install_warning=-class_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
True if we&#8217;ve warned about ~/.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">path_warning</td>
          <td class="readwrite">
            [<span id='path_warning-class_method'>R</span><span id='path_warning=-class_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
True if we&#8217;ve warned about PATH not including Gem.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">bin_dir</td>
          <td class="readwrite">
            [<span id='bin_dir-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The directory a gem&#8217;s executables will be installed into.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">gem_home</td>
          <td class="readwrite">
            [<span id='gem_home-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The gem repository the gem will be installed into.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">spec</td>
          <td class="readwrite">
            [<span id='spec-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The Gem::Specification for the gem being installed.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(gem, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Constructs an Installer instance that will install the gem located at
<tt>gem</tt>. <tt>options</tt> is a Hash with the following keys:
</p>
<table>
<tr><td valign="top">:env_shebang:</td><td>Use /usr/bin/env in bin wrappers.

</td></tr>
<tr><td valign="top">:force:</td><td>Overrides all version checks and security policy checks, except for a
signed-gems-only policy.

</td></tr>
<tr><td valign="top">:ignore_dependencies:</td><td>Don&#8217;t raise if a dependency is missing.

</td></tr>
<tr><td valign="top">:install_dir:</td><td>The directory to install the gem into.

</td></tr>
<tr><td valign="top">:format_executable:</td><td>Format the executable the same as the ruby executable. If your ruby is
ruby18, foo_exec will be installed as foo_exec18.

</td></tr>
<tr><td valign="top">:security_policy:</td><td>Use the specified security policy. See Gem::Security

</td></tr>
<tr><td valign="top">:wrappers:</td><td>Install wrappers if true, symlinks if false.

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 94</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L94">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='gem identifier id'>gem</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='@gem ivar id'>@gem</span> <span class='assign token'>=</span> <span class='gem identifier id'>gem</span>

  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:bin_dir</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span>
    <span class='symbol val'>:env_shebang</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span>
    <span class='symbol val'>:exec_format</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span>
    <span class='symbol val'>:force</span>        <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span>
    <span class='symbol val'>:install_dir</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='dir identifier id'>dir</span><span class='comma token'>,</span>
    <span class='symbol val'>:source_index</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='source_index identifier id'>source_index</span><span class='comma token'>,</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span> <span class='options identifier id'>options</span>

  <span class='@env_shebang ivar id'>@env_shebang</span>         <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:env_shebang</span><span class='rbrack token'>]</span>
  <span class='@force ivar id'>@force</span>               <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:force</span><span class='rbrack token'>]</span>
  <span class='gem_home identifier id'>gem_home</span>             <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:install_dir</span><span class='rbrack token'>]</span>
  <span class='@gem_home ivar id'>@gem_home</span>            <span class='assign token'>=</span> <span class='Pathname constant id'>Pathname</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='gem_home identifier id'>gem_home</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span>
  <span class='@ignore_dependencies ivar id'>@ignore_dependencies</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:ignore_dependencies</span><span class='rbrack token'>]</span>
  <span class='@format_executable ivar id'>@format_executable</span>   <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:format_executable</span><span class='rbrack token'>]</span>
  <span class='@security_policy ivar id'>@security_policy</span>     <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:security_policy</span><span class='rbrack token'>]</span>
  <span class='@wrappers ivar id'>@wrappers</span>            <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:wrappers</span><span class='rbrack token'>]</span>
  <span class='@bin_dir ivar id'>@bin_dir</span>             <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:bin_dir</span><span class='rbrack token'>]</span>
  <span class='@development ivar id'>@development</span>         <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:development</span><span class='rbrack token'>]</span>
  <span class='@source_index ivar id'>@source_index</span>        <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:source_index</span><span class='rbrack token'>]</span>

  <span class='begin begin kw'>begin</span>
    <span class='@format ivar id'>@format</span> <span class='assign token'>=</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='Format constant id'>Format</span><span class='dot token'>.</span><span class='from_file_by_path identifier id'>from_file_by_path</span> <span class='@gem ivar id'>@gem</span><span class='comma token'>,</span> <span class='@security_policy ivar id'>@security_policy</span>
  <span class='rescue rescue kw'>rescue</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='Package constant id'>Package</span><span class='colon2 op'>::</span><span class='FormatError constant id'>FormatError</span>
    <span class='raise identifier id'>raise</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='InstallError constant id'>InstallError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;invalid gem format for #{@gem}&quot;</span>
  <span class='end end kw'>end</span>

  <span class='begin begin kw'>begin</span>
    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='mkdir_p identifier id'>mkdir_p</span> <span class='@gem_home ivar id'>@gem_home</span>
  <span class='rescue rescue kw'>rescue</span> <span class='Errno constant id'>Errno</span><span class='colon2 op'>::</span><span class='EACCES constant id'>EACCES</span><span class='comma token'>,</span> <span class='Errno constant id'>Errno</span><span class='colon2 op'>::</span><span class='ENOTDIR constant id'>ENOTDIR</span>
    <span class='comment val'># We'll divert to ~/.gems below</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='not not kw'>not</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='writable? fid id'>writable?</span> <span class='@gem_home ivar id'>@gem_home</span> <span class='or or kw'>or</span>
      <span class='comment val'># TODO: Shouldn't have to test for existence of bindir; tests need it.</span>
      <span class='lparen token'>(</span><span class='@gem_home ivar id'>@gem_home</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='eq op'>==</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='dir identifier id'>dir</span> <span class='and and kw'>and</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='bindir identifier id'>bindir</span> <span class='and and kw'>and</span>
       <span class='not not kw'>not</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='writable? fid id'>writable?</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='bindir identifier id'>bindir</span><span class='rparen token'>)</span> <span class='then then kw'>then</span>
    <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_install</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='false false kw'>false</span> <span class='then then kw'>then</span> <span class='comment val'># You don't want to use ~</span>
      <span class='raise identifier id'>raise</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='FilePermissionError constant id'>FilePermissionError</span><span class='comma token'>,</span> <span class='@gem_home ivar id'>@gem_home</span>
    <span class='elsif elsif kw'>elsif</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_install</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='then then kw'>then</span>
      <span class='unless unless kw'>unless</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='home_install_warning identifier id'>home_install_warning</span> <span class='or or kw'>or</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:unpack</span><span class='rbrack token'>]</span> <span class='then then kw'>then</span>
        <span class='alert_warning identifier id'>alert_warning</span> <span class='dstring node'>&quot;Installing to ~/.gem since #{@gem_home} and\n\t  #{Gem.bindir} aren't both writable.&quot;</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='home_install_warning identifier id'>home_install_warning</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_install</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_install</span><span class='rbrack token'>]</span> <span class='and and kw'>and</span> <span class='not not kw'>not</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:unpack</span><span class='rbrack token'>]</span> <span class='then then kw'>then</span>
    <span class='@gem_home ivar id'>@gem_home</span> <span class='assign token'>=</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='user_dir identifier id'>user_dir</span>

    <span class='user_bin_dir identifier id'>user_bin_dir</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='@gem_home ivar id'>@gem_home</span><span class='comma token'>,</span> <span class='string val'>'bin'</span><span class='rparen token'>)</span>
    <span class='unless unless kw'>unless</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'PATH'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='colon2 op'>::</span><span class='PATH_SEPARATOR constant id'>PATH_SEPARATOR</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='user_bin_dir identifier id'>user_bin_dir</span> <span class='then then kw'>then</span>
      <span class='unless unless kw'>unless</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='path_warning identifier id'>path_warning</span> <span class='then then kw'>then</span>
        <span class='alert_warning identifier id'>alert_warning</span> <span class='dstring node'>&quot;You don't have #{user_bin_dir} in your PATH,\n\t  gem executables will not run.&quot;</span>
        <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='path_warning identifier id'>path_warning</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='mkdir_p identifier id'>mkdir_p</span> <span class='@gem_home ivar id'>@gem_home</span> <span class='unless unless_mod kw'>unless</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span> <span class='@gem_home ivar id'>@gem_home</span>
    <span class='comment val'># If it's still not writable, you've got issues.</span>
    <span class='raise identifier id'>raise</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='FilePermissionError constant id'>FilePermissionError</span><span class='comma token'>,</span> <span class='@gem_home ivar id'>@gem_home</span> <span class='unless unless_mod kw'>unless</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='writable? fid id'>writable?</span> <span class='@gem_home ivar id'>@gem_home</span>
  <span class='end end kw'>end</span>

  <span class='@spec ivar id'>@spec</span> <span class='assign token'>=</span> <span class='@format ivar id'>@format</span><span class='dot token'>.</span><span class='spec identifier id'>spec</span>

  <span class='@gem_dir ivar id'>@gem_dir</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='@gem_home ivar id'>@gem_home</span><span class='comma token'>,</span> <span class='string val'>&quot;gems&quot;</span><span class='comma token'>,</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='untaint identifier id'>untaint</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#exec_format-class_method">exec_format</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Defaults to use Ruby&#8217;s program prefix and suffix.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#app_script_text-instance_method">#app_script_text</span><span class='args'>(bin_file_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Return the text for an application file.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#build_extensions-instance_method">#build_extensions</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Builds extensions.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#ensure_dependency-instance_method">#ensure_dependency</span><span class='args'>(spec, dependency)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Ensure that the dependency is satisfied by the current installation of gem.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#extract_files-instance_method">#extract_files</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Reads the file index and extracts each file into the gem directory.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#formatted_program_filename-instance_method">#formatted_program_filename</span><span class='args'>(filename)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Prefix and suffix the program filename the same as ruby.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#generate_bin-instance_method">#generate_bin</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#generate_bin_script-instance_method">#generate_bin_script</span><span class='args'>(filename, bindir)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Creates the scripts to run the applications in the gem.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#generate_bin_symlink-instance_method">#generate_bin_symlink</span><span class='args'>(filename, bindir)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Creates the symlinks to run the applications in the gem.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#generate_windows_script-instance_method">#generate_windows_script</span><span class='args'>(bindir, filename)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Creates windows .
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#install-instance_method">#install</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Installs the gem and returns a loaded Gem::Specification for the installed
gem.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#installation_satisfies_dependency-3F-instance_method">#installation_satisfies_dependency?</span><span class='args'>(dependency)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
True if the gems in the source_index satisfy <tt>dependency</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#shebang-instance_method">#shebang</span><span class='args'>(bin_file_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Generates a #! line for <tt>bin_file_name</tt>&#8217;s wrapper copying
arguments if necessary.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#unpack-instance_method">#unpack</span><span class='args'>(directory)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Unpacks the gem into the given directory.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#windows_stub_script-instance_method">#windows_stub_script</span><span class='args'>(bindir, bin_file_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
return the stub script text used to launch the true ruby script.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#write_spec-instance_method">#write_spec</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Writes the .
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="RequirePathsBuilder.html" title="Gem::RequirePathsBuilder">Gem::RequirePathsBuilder</a></h2>
    <p><span class='name'><a href="RequirePathsBuilder.html#write_require_paths_file_if_needed-instance_method" title="write_require_paths_file_if_needed">write_require_paths_file_if_needed</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>exec_format</h3>
</div><div id="exec_format-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>exec_format</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Defaults to use Ruby&#8217;s program prefix and suffix.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 73</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L73">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">73
74
75</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='exec_format identifier id'>exec_format</span>
  <span class='@exec_format ivar id'>@exec_format</span> <span class='opasgn op'>||=</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='default_exec_format identifier id'>default_exec_format</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>app_script_text</h3>
</div><div id="app_script_text-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>app_script_text</span><span class='args'>(bin_file_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Return the text for an application file.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 418</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L418">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">418
419
420</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='app_script_text identifier id'>app_script_text</span><span class='lparen token'>(</span><span class='bin_file_name identifier id'>bin_file_name</span><span class='rparen token'>)</span>
  <span class='string val'>&quot;\#{shebang bin_file_name}\n#\n# This file was generated by RubyGems.\n#\n# The application '\#{@spec.name}' is installed as part of a gem, and\n# this file is here to facilitate running it.\n#\n\nrequire 'rubygems'\n\nversion = \&quot;\#{Gem::Requirement.default}\&quot;\n\nif ARGV.first =~ /^_(.*)_$/ and Gem::Version.correct? $1 then\nversion = $1\nARGV.shift\nend\n\ngem '\#{@spec.name}', version\nload Gem.bin_path('\#{@spec.name}', '\#{bin_file_name}', version)\n&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>build_extensions</h3>
</div><div id="build_extensions-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>build_extensions</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Builds extensions. Valid types of extensions are extconf.rb files,
configure scripts and rakefiles or mkrf_conf files.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 462</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L462">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='build_extensions identifier id'>build_extensions</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='extensions identifier id'>extensions</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='say identifier id'>say</span> <span class='string val'>&quot;Building native extensions.  This could take a while...&quot;</span>
  <span class='start_dir identifier id'>start_dir</span> <span class='assign token'>=</span> <span class='Dir constant id'>Dir</span><span class='dot token'>.</span><span class='pwd identifier id'>pwd</span>
  <span class='dest_path identifier id'>dest_path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='@gem_dir ivar id'>@gem_dir</span><span class='comma token'>,</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='require_paths identifier id'>require_paths</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='ran_rake identifier id'>ran_rake</span> <span class='assign token'>=</span> <span class='false false kw'>false</span> <span class='comment val'># only run rake once</span>

  <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='extensions identifier id'>extensions</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='extension identifier id'>extension</span><span class='bitor op'>|</span>
    <span class='break break kw'>break</span> <span class='if if_mod kw'>if</span> <span class='ran_rake identifier id'>ran_rake</span>
    <span class='results identifier id'>results</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

    <span class='builder identifier id'>builder</span> <span class='assign token'>=</span> <span class='case case kw'>case</span> <span class='extension identifier id'>extension</span>
              <span class='when when kw'>when</span> <span class='regexp val'>/extconf/</span> <span class='then then kw'>then</span>
                <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='Ext constant id'>Ext</span><span class='colon2 op'>::</span><span class='ExtConfBuilder constant id'>ExtConfBuilder</span>
              <span class='when when kw'>when</span> <span class='regexp val'>/configure/</span> <span class='then then kw'>then</span>
                <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='Ext constant id'>Ext</span><span class='colon2 op'>::</span><span class='ConfigureBuilder constant id'>ConfigureBuilder</span>
              <span class='when when kw'>when</span> <span class='regexp val'>/rakefile/i</span><span class='comma token'>,</span> <span class='regexp val'>/mkrf_conf/i</span> <span class='then then kw'>then</span>
                <span class='ran_rake identifier id'>ran_rake</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
                <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='Ext constant id'>Ext</span><span class='colon2 op'>::</span><span class='RakeBuilder constant id'>RakeBuilder</span>
              <span class='else else kw'>else</span>
                <span class='results identifier id'>results</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='dstring node'>&quot;No builder for extension '#{extension}'&quot;</span><span class='rbrack token'>]</span>
                <span class='nil nil kw'>nil</span>
              <span class='end end kw'>end</span>

    <span class='begin begin kw'>begin</span>
      <span class='Dir constant id'>Dir</span><span class='dot token'>.</span><span class='chdir identifier id'>chdir</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='@gem_dir ivar id'>@gem_dir</span><span class='comma token'>,</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='dirname identifier id'>dirname</span><span class='lparen token'>(</span><span class='extension identifier id'>extension</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
      <span class='results identifier id'>results</span> <span class='assign token'>=</span> <span class='builder identifier id'>builder</span><span class='dot token'>.</span><span class='build identifier id'>build</span><span class='lparen token'>(</span><span class='extension identifier id'>extension</span><span class='comma token'>,</span> <span class='@gem_dir ivar id'>@gem_dir</span><span class='comma token'>,</span> <span class='dest_path identifier id'>dest_path</span><span class='comma token'>,</span> <span class='results identifier id'>results</span><span class='rparen token'>)</span>

      <span class='say identifier id'>say</span> <span class='results identifier id'>results</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='configuration identifier id'>configuration</span><span class='dot token'>.</span><span class='really_verbose identifier id'>really_verbose</span>

    <span class='rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ex identifier id'>ex</span>
      <span class='results identifier id'>results</span> <span class='assign token'>=</span> <span class='results identifier id'>results</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='string val'>&quot;\n&quot;</span>

      <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='string val'>'gem_make.out'</span><span class='comma token'>,</span> <span class='string val'>'wb'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='results identifier id'>results</span> <span class='rbrace token'>}</span>

      <span class='message identifier id'>message</span> <span class='assign token'>=</span> <span class='string val'>&quot;ERROR: Failed to build gem native extension.\n\n\#{results}\n\nGem files will remain installed in \#{@gem_dir} for inspection.\nResults logged to \#{File.join(Dir.pwd, 'gem_make.out')}\n&quot;</span>

      <span class='raise identifier id'>raise</span> <span class='ExtensionBuildError constant id'>ExtensionBuildError</span><span class='comma token'>,</span> <span class='message identifier id'>message</span>
    <span class='ensure ensure kw'>ensure</span>
      <span class='Dir constant id'>Dir</span><span class='dot token'>.</span><span class='chdir identifier id'>chdir</span> <span class='start_dir identifier id'>start_dir</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>ensure_dependency</h3>
</div><div id="ensure_dependency-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>ensure_dependency</span><span class='args'>(spec, dependency)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Ensure that the dependency is satisfied by the current installation of gem.
If it is not an exception is raised.
</p>
<table>
<tr><td valign="top">spec       :</td><td>Gem::Specification

</td></tr>
<tr><td valign="top">dependency :</td><td>Gem::Dependency

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 253</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L253">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">253
254
255
256
257
258
259</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='ensure_dependency identifier id'>ensure_dependency</span><span class='lparen token'>(</span><span class='spec identifier id'>spec</span><span class='comma token'>,</span> <span class='dependency identifier id'>dependency</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='installation_satisfies_dependency? fid id'>installation_satisfies_dependency?</span> <span class='dependency identifier id'>dependency</span> <span class='then then kw'>then</span>
    <span class='raise identifier id'>raise</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='InstallError constant id'>InstallError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{spec.name} requires #{dependency}&quot;</span>
  <span class='end end kw'>end</span>

  <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>extract_files</h3>
</div><div id="extract_files-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>extract_files</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Reads the file index and extracts each file into the gem directory.
</p>
<p>
Ensures that files can&#8217;t be installed outside the gem directory.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>ArgumentError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 519</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L519">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='extract_files identifier id'>extract_files</span>
  <span class='expand_and_validate_gem_dir identifier id'>expand_and_validate_gem_dir</span>

  <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;format required to extract from&quot;</span> <span class='if if_mod kw'>if</span> <span class='@format ivar id'>@format</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>

  <span class='@format ivar id'>@format</span><span class='dot token'>.</span><span class='file_entries identifier id'>file_entries</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='entry identifier id'>entry</span><span class='comma token'>,</span> <span class='file_data identifier id'>file_data</span><span class='bitor op'>|</span>
    <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='string val'>'path'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='untaint identifier id'>untaint</span>

    <span class='if if kw'>if</span> <span class='path identifier id'>path</span> <span class='match op'>=~</span> <span class='regexp val'>/\A\//</span> <span class='then then kw'>then</span> <span class='comment val'># for extra sanity</span>
      <span class='raise identifier id'>raise</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='InstallError constant id'>InstallError</span><span class='comma token'>,</span>
            <span class='dstring node'>&quot;attempt to install file into #{entry['path'].inspect}&quot;</span>
    <span class='end end kw'>end</span>

    <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='@gem_dir ivar id'>@gem_dir</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span>

    <span class='if if kw'>if</span> <span class='path identifier id'>path</span> <span class='nmatch op'>!~</span> <span class='dregexp node'>/\A#{Regexp.escape @gem_dir}/</span> <span class='then then kw'>then</span>
      <span class='msg identifier id'>msg</span> <span class='assign token'>=</span> <span class='string val'>&quot;attempt to install file into %p under %p&quot;</span> <span class='mod op'>%</span>
              <span class='lbrack token'>[</span><span class='entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='string val'>'path'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='@gem_dir ivar id'>@gem_dir</span><span class='rbrack token'>]</span>
      <span class='raise identifier id'>raise</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='InstallError constant id'>InstallError</span><span class='comma token'>,</span> <span class='msg identifier id'>msg</span>
    <span class='end end kw'>end</span>

    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rm_rf identifier id'>rm_rf</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='exists? fid id'>exists?</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='mkdir_p identifier id'>mkdir_p</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='dirname identifier id'>dirname</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>

    <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='string val'>&quot;wb&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='out identifier id'>out</span><span class='bitor op'>|</span>
      <span class='out identifier id'>out</span><span class='dot token'>.</span><span class='write identifier id'>write</span> <span class='file_data identifier id'>file_data</span>
    <span class='end end kw'>end</span>

    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='chmod identifier id'>chmod</span> <span class='entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='string val'>'mode'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='path identifier id'>path</span>

    <span class='say identifier id'>say</span> <span class='path identifier id'>path</span> <span class='if if_mod kw'>if</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='configuration identifier id'>configuration</span><span class='dot token'>.</span><span class='really_verbose identifier id'>really_verbose</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>formatted_program_filename</h3>
</div><div id="formatted_program_filename-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>formatted_program_filename</span><span class='args'>(filename)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Prefix and suffix the program filename the same as ruby.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 556</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L556">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">556
557
558
559
560
561
562</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='formatted_program_filename identifier id'>formatted_program_filename</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='@format_executable ivar id'>@format_executable</span> <span class='then then kw'>then</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='exec_format identifier id'>exec_format</span> <span class='mod op'>%</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='basename identifier id'>basename</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='filename identifier id'>filename</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>generate_bin</h3>
</div><div id="generate_bin-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>generate_bin</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="FilePermissionError.html" title="Gem::FilePermissionError">Gem::FilePermissionError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 309</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L309">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='generate_bin identifier id'>generate_bin</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='executables identifier id'>executables</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='or or kw'>or</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='executables identifier id'>executables</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>

  <span class='comment val'># If the user has asked for the gem to be installed in a directory that is</span>
  <span class='comment val'># the system gem directory, then use the system bin directory, else create</span>
  <span class='comment val'># (or use) a new bin dir under the gem_home.</span>
  <span class='bindir identifier id'>bindir</span> <span class='assign token'>=</span> <span class='@bin_dir ivar id'>@bin_dir</span> <span class='question op'>?</span> <span class='@bin_dir ivar id'>@bin_dir</span> <span class='colon op'>:</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='bindir identifier id'>bindir</span><span class='lparen token'>(</span><span class='@gem_home ivar id'>@gem_home</span><span class='rparen token'>)</span>

  <span class='Dir constant id'>Dir</span><span class='dot token'>.</span><span class='mkdir identifier id'>mkdir</span> <span class='bindir identifier id'>bindir</span> <span class='unless unless_mod kw'>unless</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span> <span class='bindir identifier id'>bindir</span>
  <span class='raise identifier id'>raise</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='FilePermissionError constant id'>FilePermissionError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='bindir identifier id'>bindir</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='writable? fid id'>writable?</span> <span class='bindir identifier id'>bindir</span>

  <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='executables identifier id'>executables</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='filename identifier id'>filename</span><span class='bitor op'>|</span>
    <span class='filename identifier id'>filename</span><span class='dot token'>.</span><span class='untaint identifier id'>untaint</span>
    <span class='bin_path identifier id'>bin_path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='@gem_dir ivar id'>@gem_dir</span><span class='comma token'>,</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='bindir identifier id'>bindir</span><span class='comma token'>,</span> <span class='filename identifier id'>filename</span><span class='rparen token'>)</span>
    <span class='mode identifier id'>mode</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='stat identifier id'>stat</span><span class='lparen token'>(</span><span class='bin_path identifier id'>bin_path</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='mode identifier id'>mode</span> <span class='bitor op'>|</span> <span class='integer val'>0111</span>
    <span class='File constant id'>File</span><span class='dot token'>.</span><span class='chmod identifier id'>chmod</span> <span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='bin_path identifier id'>bin_path</span>

    <span class='if if kw'>if</span> <span class='@wrappers ivar id'>@wrappers</span> <span class='then then kw'>then</span>
      <span class='generate_bin_script identifier id'>generate_bin_script</span> <span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='bindir identifier id'>bindir</span>
    <span class='else else kw'>else</span>
      <span class='generate_bin_symlink identifier id'>generate_bin_symlink</span> <span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='bindir identifier id'>bindir</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>generate_bin_script</h3>
</div><div id="generate_bin_script-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>generate_bin_script</span><span class='args'>(filename, bindir)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates the scripts to run the applications in the gem. &#8212; The Windows
script is generated in addition to the regular one due to a bug or
misfeature in the Windows shell&#8217;s pipe. See
http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/193379
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 341</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L341">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='generate_bin_script identifier id'>generate_bin_script</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='bindir identifier id'>bindir</span><span class='rparen token'>)</span>
  <span class='bin_script_path identifier id'>bin_script_path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='bindir identifier id'>bindir</span><span class='comma token'>,</span> <span class='formatted_program_filename identifier id'>formatted_program_filename</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span>

  <span class='exec_path identifier id'>exec_path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='@gem_dir ivar id'>@gem_dir</span><span class='comma token'>,</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='bindir identifier id'>bindir</span><span class='comma token'>,</span> <span class='filename identifier id'>filename</span>

  <span class='comment val'># HACK some gems don't have #! in their executables, restore 2008/06</span>
  <span class='comment val'>#if File.read(exec_path, 2) == '#!' then</span>
    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rm_f identifier id'>rm_f</span> <span class='bin_script_path identifier id'>bin_script_path</span> <span class='comment val'># prior install may have been --no-wrappers</span>

    <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span> <span class='bin_script_path identifier id'>bin_script_path</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='comma token'>,</span> <span class='integer val'>0755</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='file identifier id'>file</span><span class='bitor op'>|</span>
      <span class='file identifier id'>file</span><span class='dot token'>.</span><span class='print identifier id'>print</span> <span class='app_script_text identifier id'>app_script_text</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='say identifier id'>say</span> <span class='bin_script_path identifier id'>bin_script_path</span> <span class='if if_mod kw'>if</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='configuration identifier id'>configuration</span><span class='dot token'>.</span><span class='really_verbose identifier id'>really_verbose</span>

    <span class='generate_windows_script identifier id'>generate_windows_script</span> <span class='bindir identifier id'>bindir</span><span class='comma token'>,</span> <span class='filename identifier id'>filename</span>
  <span class='comment val'>#else</span>
  <span class='comment val'>#  FileUtils.rm_f bin_script_path</span>
  <span class='comment val'>#  FileUtils.cp exec_path, bin_script_path,</span>
  <span class='comment val'>#               :verbose =&gt; Gem.configuration.really_verbose</span>
  <span class='comment val'>#end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>generate_bin_symlink</h3>
</div><div id="generate_bin_symlink-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>generate_bin_symlink</span><span class='args'>(filename, bindir)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates the symlinks to run the applications in the gem. Moves the symlink
if the gem being installed has a newer version.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 368</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L368">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='generate_bin_symlink identifier id'>generate_bin_symlink</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='bindir identifier id'>bindir</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='win_platform? fid id'>win_platform?</span> <span class='then then kw'>then</span>
    <span class='alert_warning identifier id'>alert_warning</span> <span class='string val'>&quot;Unable to use symlinks on Windows, installing wrapper&quot;</span>
    <span class='generate_bin_script identifier id'>generate_bin_script</span> <span class='filename identifier id'>filename</span><span class='comma token'>,</span> <span class='bindir identifier id'>bindir</span>
    <span class='return return kw'>return</span>
  <span class='end end kw'>end</span>

  <span class='src identifier id'>src</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='@gem_dir ivar id'>@gem_dir</span><span class='comma token'>,</span> <span class='string val'>'bin'</span><span class='comma token'>,</span> <span class='filename identifier id'>filename</span>
  <span class='dst identifier id'>dst</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='bindir identifier id'>bindir</span><span class='comma token'>,</span> <span class='formatted_program_filename identifier id'>formatted_program_filename</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span>

  <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span> <span class='dst identifier id'>dst</span> <span class='then then kw'>then</span>
    <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='symlink? fid id'>symlink?</span> <span class='dst identifier id'>dst</span> <span class='then then kw'>then</span>
      <span class='link identifier id'>link</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='readlink identifier id'>readlink</span><span class='lparen token'>(</span><span class='dst identifier id'>dst</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='split identifier id'>split</span> <span class='File constant id'>File</span><span class='colon2 op'>::</span><span class='SEPARATOR constant id'>SEPARATOR</span>
      <span class='cur_version identifier id'>cur_version</span> <span class='assign token'>=</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='Version constant id'>Version</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='link identifier id'>link</span><span class='lbrack token'>[</span><span class='integer val'>-3</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^.*-/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
      <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='version identifier id'>version</span> <span class='lt op'>&lt;</span> <span class='cur_version identifier id'>cur_version</span>
    <span class='end end kw'>end</span>
    <span class='File constant id'>File</span><span class='dot token'>.</span><span class='unlink identifier id'>unlink</span> <span class='dst identifier id'>dst</span>
  <span class='end end kw'>end</span>

  <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='symlink identifier id'>symlink</span> <span class='src identifier id'>src</span><span class='comma token'>,</span> <span class='dst identifier id'>dst</span><span class='comma token'>,</span> <span class='symbol val'>:verbose</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='configuration identifier id'>configuration</span><span class='dot token'>.</span><span class='really_verbose identifier id'>really_verbose</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>generate_windows_script</h3>
</div><div id="generate_windows_script-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>generate_windows_script</span><span class='args'>(bindir, filename)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates windows .bat files for easy running of commands
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 297</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L297">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">297
298
299
300
301
302
303
304
305
306
307</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='generate_windows_script identifier id'>generate_windows_script</span><span class='lparen token'>(</span><span class='bindir identifier id'>bindir</span><span class='comma token'>,</span> <span class='filename identifier id'>filename</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='win_platform? fid id'>win_platform?</span> <span class='then then kw'>then</span>
    <span class='script_name identifier id'>script_name</span> <span class='assign token'>=</span> <span class='filename identifier id'>filename</span> <span class='plus op'>+</span> <span class='string val'>&quot;.bat&quot;</span>
    <span class='script_path identifier id'>script_path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='bindir identifier id'>bindir</span><span class='comma token'>,</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='basename identifier id'>basename</span><span class='lparen token'>(</span><span class='script_name identifier id'>script_name</span><span class='rparen token'>)</span>
    <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span> <span class='script_path identifier id'>script_path</span><span class='comma token'>,</span> <span class='string val'>'w'</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='file identifier id'>file</span><span class='bitor op'>|</span>
      <span class='file identifier id'>file</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='windows_stub_script identifier id'>windows_stub_script</span><span class='lparen token'>(</span><span class='bindir identifier id'>bindir</span><span class='comma token'>,</span> <span class='filename identifier id'>filename</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='say identifier id'>say</span> <span class='script_path identifier id'>script_path</span> <span class='if if_mod kw'>if</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='configuration identifier id'>configuration</span><span class='dot token'>.</span><span class='really_verbose identifier id'>really_verbose</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>install</h3>
</div><div id="install-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>install</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Installs the gem and returns a loaded Gem::Specification for the installed
gem.
</p>
<p>
The gem will be installed with the following structure:
</p>
<pre class="code">
  <span class='@gem_home ivar id'>@gem_home</span><span class='div op'>/</span>
    <span class='cache identifier id'>cache</span><span class='div op'>/</span><span class='lt op'>&lt;</span><span class='gem identifier id'>gem</span><span class='minus op'>-</span><span class='version identifier id'>version</span><span class='gt op'>&gt;</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='comment val'>#=&gt; a cached copy of the installed gem</span>
    <span class='gems identifier id'>gems</span><span class='div op'>/</span><span class='lt op'>&lt;</span><span class='gem identifier id'>gem</span><span class='minus op'>-</span><span class='version identifier id'>version</span><span class='gt op'>&gt;</span><span class='regexp val'>/... #=&gt; extracted files
    specifications/</span><span class='lt op'>&lt;</span><span class='gem identifier id'>gem</span><span class='minus op'>-</span><span class='version identifier id'>version</span><span class='gt op'>&gt;</span><span class='dot token'>.</span><span class='gemspec identifier id'>gemspec</span> <span class='comment val'>#=&gt; the Gem::Specification</span>
</pre>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="InstallError.html" title="Gem::InstallError">Gem::InstallError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 177</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L177">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='install identifier id'>install</span>
  <span class='comment val'># If we're forcing the install then disable security unless the security</span>
  <span class='comment val'># policy says that we only install singed gems.</span>
  <span class='@security_policy ivar id'>@security_policy</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='@force ivar id'>@force</span> <span class='and and kw'>and</span> <span class='@security_policy ivar id'>@security_policy</span> <span class='and and kw'>and</span>
                            <span class='not not kw'>not</span> <span class='@security_policy ivar id'>@security_policy</span><span class='dot token'>.</span><span class='only_signed identifier id'>only_signed</span>

  <span class='unless unless kw'>unless</span> <span class='@force ivar id'>@force</span> <span class='then then kw'>then</span>
    <span class='if if kw'>if</span> <span class='rrv identifier id'>rrv</span> <span class='assign token'>=</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='required_ruby_version identifier id'>required_ruby_version</span> <span class='then then kw'>then</span>
      <span class='unless unless kw'>unless</span> <span class='rrv identifier id'>rrv</span><span class='dot token'>.</span><span class='satisfied_by? fid id'>satisfied_by?</span> <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='ruby_version identifier id'>ruby_version</span> <span class='then then kw'>then</span>
        <span class='raise identifier id'>raise</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='InstallError constant id'>InstallError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{@spec.name} requires Ruby version #{rrv}&quot;</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='if if kw'>if</span> <span class='rrgv identifier id'>rrgv</span> <span class='assign token'>=</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='required_rubygems_version identifier id'>required_rubygems_version</span> <span class='then then kw'>then</span>
      <span class='unless unless kw'>unless</span> <span class='rrgv identifier id'>rrgv</span><span class='dot token'>.</span><span class='satisfied_by? fid id'>satisfied_by?</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='Version constant id'>Version</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='RubyGemsVersion constant id'>RubyGemsVersion</span><span class='rparen token'>)</span> <span class='then then kw'>then</span>
        <span class='raise identifier id'>raise</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='InstallError constant id'>InstallError</span><span class='comma token'>,</span>
              <span class='dstring node'>&quot;#{@spec.name} requires RubyGems version #{rrgv}&quot;</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='unless unless kw'>unless</span> <span class='@ignore_dependencies ivar id'>@ignore_dependencies</span> <span class='then then kw'>then</span>
      <span class='deps identifier id'>deps</span> <span class='assign token'>=</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='runtime_dependencies identifier id'>runtime_dependencies</span>
      <span class='deps identifier id'>deps</span> <span class='opasgn op'>|=</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='development_dependencies identifier id'>development_dependencies</span> <span class='if if_mod kw'>if</span> <span class='@development ivar id'>@development</span>

      <span class='deps identifier id'>deps</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='dep_gem identifier id'>dep_gem</span><span class='bitor op'>|</span>
        <span class='ensure_dependency identifier id'>ensure_dependency</span> <span class='@spec ivar id'>@spec</span><span class='comma token'>,</span> <span class='dep_gem identifier id'>dep_gem</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='pre_install_hooks identifier id'>pre_install_hooks</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='hook identifier id'>hook</span><span class='bitor op'>|</span>
    <span class='hook identifier id'>hook</span><span class='dot token'>.</span><span class='call identifier id'>call</span> <span class='self self kw'>self</span>
  <span class='end end kw'>end</span>

  <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='mkdir_p identifier id'>mkdir_p</span> <span class='@gem_home ivar id'>@gem_home</span> <span class='unless unless_mod kw'>unless</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span> <span class='@gem_home ivar id'>@gem_home</span>

  <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='ensure_gem_subdirectories identifier id'>ensure_gem_subdirectories</span> <span class='@gem_home ivar id'>@gem_home</span>

  <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='mkdir_p identifier id'>mkdir_p</span> <span class='@gem_dir ivar id'>@gem_dir</span>

  <span class='extract_files identifier id'>extract_files</span>
  <span class='generate_bin identifier id'>generate_bin</span>
  <span class='build_extensions identifier id'>build_extensions</span>
  <span class='write_spec identifier id'>write_spec</span>

  <span class='write_require_paths_file_if_needed identifier id'>write_require_paths_file_if_needed</span>

  <span class='comment val'># HACK remove?  Isn't this done in multiple places?</span>
  <span class='cached_gem identifier id'>cached_gem</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='@gem_home ivar id'>@gem_home</span><span class='comma token'>,</span> <span class='string val'>&quot;cache&quot;</span><span class='comma token'>,</span> <span class='@gem ivar id'>@gem</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>/\//</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span>
  <span class='unless unless kw'>unless</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span> <span class='cached_gem identifier id'>cached_gem</span> <span class='then then kw'>then</span>
    <span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='cp identifier id'>cp</span> <span class='@gem ivar id'>@gem</span><span class='comma token'>,</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='@gem_home ivar id'>@gem_home</span><span class='comma token'>,</span> <span class='string val'>&quot;cache&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='say identifier id'>say</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='post_install_message identifier id'>post_install_message</span> <span class='unless unless_mod kw'>unless</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='post_install_message identifier id'>post_install_message</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>

  <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='loaded_from identifier id'>loaded_from</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='@gem_home ivar id'>@gem_home</span><span class='comma token'>,</span> <span class='string val'>'specifications'</span><span class='comma token'>,</span>
                                <span class='dstring node'>&quot;#{@spec.full_name}.gemspec&quot;</span><span class='rparen token'>)</span>

  <span class='@source_index ivar id'>@source_index</span><span class='dot token'>.</span><span class='add_spec identifier id'>add_spec</span> <span class='@spec ivar id'>@spec</span>

  <span class='Gem constant id'>Gem</span><span class='dot token'>.</span><span class='post_install_hooks identifier id'>post_install_hooks</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='hook identifier id'>hook</span><span class='bitor op'>|</span>
    <span class='hook identifier id'>hook</span><span class='dot token'>.</span><span class='call identifier id'>call</span> <span class='self self kw'>self</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='@spec ivar id'>@spec</span>
<span class='rescue rescue kw'>rescue</span> <span class='Zlib constant id'>Zlib</span><span class='colon2 op'>::</span><span class='GzipFile constant id'>GzipFile</span><span class='colon2 op'>::</span><span class='Error constant id'>Error</span>
  <span class='raise identifier id'>raise</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='InstallError constant id'>InstallError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;gzip error installing #{@gem}&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>installation_satisfies_dependency?</h3>
</div><div id="installation_satisfies_dependency-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>installation_satisfies_dependency?</span><span class='args'>(dependency)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
True if the gems in the source_index satisfy <tt>dependency</tt>.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 264</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L264">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">264
265
266</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='installation_satisfies_dependency? fid id'>installation_satisfies_dependency?</span><span class='lparen token'>(</span><span class='dependency identifier id'>dependency</span><span class='rparen token'>)</span>
  <span class='@source_index ivar id'>@source_index</span><span class='dot token'>.</span><span class='find_name identifier id'>find_name</span><span class='lparen token'>(</span><span class='dependency identifier id'>dependency</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='dependency identifier id'>dependency</span><span class='dot token'>.</span><span class='version_requirements identifier id'>version_requirements</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>shebang</h3>
</div><div id="shebang-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>shebang</span><span class='args'>(bin_file_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Generates a #! line for <tt>bin_file_name</tt>&#8217;s wrapper copying
arguments if necessary.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 394</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L394">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='shebang identifier id'>shebang</span><span class='lparen token'>(</span><span class='bin_file_name identifier id'>bin_file_name</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='@env_shebang ivar id'>@env_shebang</span> <span class='then then kw'>then</span>
    <span class='string val'>&quot;#!/usr/bin/env &quot;</span> <span class='plus op'>+</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='ConfigMap constant id'>ConfigMap</span><span class='lbrack token'>[</span><span class='symbol val'>:ruby_install_name</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>
    <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='@gem_dir ivar id'>@gem_dir</span><span class='comma token'>,</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='bindir identifier id'>bindir</span><span class='comma token'>,</span> <span class='bin_file_name identifier id'>bin_file_name</span>

    <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='string val'>&quot;rb&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='file identifier id'>file</span><span class='bitor op'>|</span>
      <span class='first_line identifier id'>first_line</span> <span class='assign token'>=</span> <span class='file identifier id'>file</span><span class='dot token'>.</span><span class='gets identifier id'>gets</span>
      <span class='if if kw'>if</span> <span class='first_line identifier id'>first_line</span> <span class='match op'>=~</span> <span class='regexp val'>/^#!/</span> <span class='then then kw'>then</span>
        <span class='comment val'># Preserve extra words on shebang line, like &quot;-w&quot;.  Thanks RPA.</span>
        <span class='shebang identifier id'>shebang</span> <span class='assign token'>=</span> <span class='first_line identifier id'>first_line</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\A\#!.*?ruby\S*/</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#!#{Gem.ruby}&quot;</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='comment val'># Create a plain shebang line.</span>
        <span class='shebang identifier id'>shebang</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#!#{Gem.ruby}&quot;</span>
      <span class='end end kw'>end</span>

      <span class='shebang identifier id'>shebang</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span> <span class='comment val'># Avoid nasty ^M issues.</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>unpack</h3>
</div><div id="unpack-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>unpack</span><span class='args'>(directory)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Unpacks the gem into the given directory.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 271</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L271">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">271
272
273
274
275</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='unpack identifier id'>unpack</span><span class='lparen token'>(</span><span class='directory identifier id'>directory</span><span class='rparen token'>)</span>
  <span class='@gem_dir ivar id'>@gem_dir</span> <span class='assign token'>=</span> <span class='directory identifier id'>directory</span>
  <span class='@format ivar id'>@format</span> <span class='assign token'>=</span> <span class='Gem constant id'>Gem</span><span class='colon2 op'>::</span><span class='Format constant id'>Format</span><span class='dot token'>.</span><span class='from_file_by_path identifier id'>from_file_by_path</span> <span class='@gem ivar id'>@gem</span><span class='comma token'>,</span> <span class='@security_policy ivar id'>@security_policy</span>
  <span class='extract_files identifier id'>extract_files</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>windows_stub_script</h3>
</div><div id="windows_stub_script-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>windows_stub_script</span><span class='args'>(bindir, bin_file_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
return the stub script text used to launch the true ruby script
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 446</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L446">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">446
447
448</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='windows_stub_script identifier id'>windows_stub_script</span><span class='lparen token'>(</span><span class='bindir identifier id'>bindir</span><span class='comma token'>,</span> <span class='bin_file_name identifier id'>bin_file_name</span><span class='rparen token'>)</span>
  <span class='string val'>&quot;@ECHO OFF\nIF NOT \&quot;%~f0\&quot; == \&quot;~f0\&quot; GOTO :WinNT\n@\&quot;\#{File.basename(Gem.ruby).chomp('\&quot;')}\&quot; \&quot;\#{File.join(bindir, bin_file_name)}\&quot; %1 %2 %3 %4 %5 %6 %7 %8 %9\nGOTO :EOF\n:WinNT\n@\&quot;\#{File.basename(Gem.ruby).chomp('\&quot;')}\&quot; \&quot;%~dpn0\&quot; %*\n&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>write_spec</h3>
</div><div id="write_spec-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>write_spec</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Writes the .gemspec specification (in Ruby) to the gem home&#8217;s
specifications directory.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rubygems/installer.rb', line 281</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/rubygems/installer.rb#L281">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">281
282
283
284
285
286
287
288
289
290
291
292</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='write_spec identifier id'>write_spec</span>
  <span class='rubycode identifier id'>rubycode</span> <span class='assign token'>=</span> <span class='@spec ivar id'>@spec</span><span class='dot token'>.</span><span class='to_ruby identifier id'>to_ruby</span>

  <span class='file_name identifier id'>file_name</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='@gem_home ivar id'>@gem_home</span><span class='comma token'>,</span> <span class='string val'>'specifications'</span><span class='comma token'>,</span>
                        <span class='dstring node'>&quot;#{@spec.full_name}.gemspec&quot;</span>

  <span class='file_name identifier id'>file_name</span><span class='dot token'>.</span><span class='untaint identifier id'>untaint</span>

  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='file_name identifier id'>file_name</span><span class='comma token'>,</span> <span class='string val'>&quot;w&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='file identifier id'>file</span><span class='bitor op'>|</span>
    <span class='file identifier id'>file</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='rubycode identifier id'>rubycode</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>