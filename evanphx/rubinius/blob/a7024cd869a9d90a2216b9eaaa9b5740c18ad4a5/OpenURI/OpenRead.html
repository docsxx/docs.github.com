<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>evanphx's rubinius - Module: OpenURI::OpenRead - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/evanphx/commits/rubinius/master" rel="alternate" title="Recent Commits to rubinius:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("evanphx", "rubinius", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("evanphx", "rubinius", "a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/evanphx/rubinius/tree/">Source</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/network">Network</a></li>            
            <li class=""><a href="http://github.com/evanphx/rubinius/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/evanphx/rubinius">Wiki</a></li>
            <li class=""><a href="http://github.com/evanphx/rubinius/graphs">Graphs</a></li>                    
            <li class="active"><a href="/evanphx/rubinius">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/evanphx">evanphx</a> / <b><a href="http://github.com/evanphx/rubinius/tree">rubinius</a></b>        
                <a id="namespaces_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module OpenURI_OpenRead">
  <h1>Module: OpenURI::OpenRead</h1>
  <div class="section docstring">
  <p>
Mixin for HTTP and FTP URIs.
</p>

</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#open-instance_method">#open</span><span class='args'>(*rest, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
OpenURI::OpenRead#open provides `open&#8217; for URI::HTTP and URI::FTP.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#read-instance_method">#read</span><span class='args'>(options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
OpenURI::OpenRead#read([options]) reads a content referenced by self and
returns the content as string.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>open</h3>
</div><div id="open-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>open</span><span class='args'>(*rest, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
OpenURI::OpenRead#open provides `open&#8217; for URI::HTTP and URI::FTP.
</p>
<p>
OpenURI::OpenRead#open takes optional 3 arguments as:
OpenURI::OpenRead#open([mode [, perm]] [, options]) [{|io| &#8230; }]
</p>
<p>
`mode&#8217;, `perm&#8217; is same as Kernel#open.
</p>
<p>
However, `mode&#8217; must be read mode because OpenURI::OpenRead#open
doesn&#8217;t support write mode (yet). Also `perm&#8217; is just ignored
because it is meaningful only for file creation.
</p>
<p>
`options&#8217; must be a hash.
</p>
<p>
Each pairs which key is a string in the hash specify a extra header field
for HTTP. I.e. it is ignored for FTP without HTTP proxy.
</p>
<p>
The hash may include other options which key is a symbol:
</p>
<dl>
<dt>:proxy</dt><dd>Synopsis:

<pre class="code">
  <span class='symbol val'>:proxy</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://proxy.foo.com:8000/&quot;</span>
  <span class='symbol val'>:proxy</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='string val'>&quot;http://proxy.foo.com:8000/&quot;</span><span class='rparen token'>)</span>
  <span class='symbol val'>:proxy</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
  <span class='symbol val'>:proxy</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span>
  <span class='symbol val'>:proxy</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span>
</pre>
<p>
If :proxy option is specified, the value should be String, URI, boolean or
nil. When String or URI is given, it is treated as proxy URI. When true is
given or the option itself is not specified, environment variable
`scheme_proxy&#8217; is examined. `scheme&#8217; is replaced by
`http&#8217;, `https&#8217; or `ftp&#8217;. When false or nil is given, the
environment variables are ignored and connection will be made to a server
directly.
</p>
</dd>
<dt>:http_basic_authentication</dt><dd>Synopsis:

<pre class="code">
  <span class='symbol val'>:http_basic_authentication=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='user identifier id'>user</span><span class='comma token'>,</span> <span class='password identifier id'>password</span><span class='rbrack token'>]</span>
</pre>
<p>
If :http_basic_authentication is specified, the value should be an array
which contains 2 strings: username and password. It is used for HTTP Basic
authentication defined by RFC 2617.
</p>
</dd>
<dt>:content_length_proc</dt><dd>Synopsis:

<pre class="code">
  <span class='symbol val'>:content_length_proc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lambda identifier id'>lambda</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='content_length identifier id'>content_length</span><span class='bitor op'>|</span> <span class='dot3 op'>...</span> <span class='rbrace token'>}</span>
</pre>
<p>
If :content_length_proc option is specified, the option value procedure is
called before actual transfer is started. It takes one argument which is
expected content length in bytes.
</p>
<p>
If two or more transfer is done by HTTP redirection, the procedure is
called only one for a last transfer.
</p>
<p>
When expected content length is unknown, the procedure is called with nil.
It is happen when HTTP response has no Content-Length header.
</p>
</dd>
<dt>:progress_proc</dt><dd>Synopsis:

<pre class="code">
  <span class='symbol val'>:progress_proc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lambda identifier id'>lambda</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='size identifier id'>size</span><span class='bitor op'>|</span> <span class='dot3 op'>...</span><span class='rbrace token'>}</span>
</pre>
<p>
If :progress_proc option is specified, the proc is called with one argument
each time when `open&#8217; gets content fragment from network. The
argument `size&#8217; `size&#8217; is a accumulated transfered size in
bytes.
</p>
<p>
If two or more transfer is done by HTTP redirection, the procedure is
called only one for a last transfer.
</p>
<p>
:progress_proc and :content_length_proc are intended to be used for
progress bar. For example, it can be implemented as follows using
Ruby/ProgressBar.
</p>
<pre class="code">
  <span class='pbar identifier id'>pbar</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='string val'>&quot;http://...&quot;</span><span class='comma token'>,</span>
    <span class='symbol val'>:content_length_proc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lambda identifier id'>lambda</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span>
      <span class='if if kw'>if</span> <span class='t identifier id'>t</span> <span class='andop op'>&amp;&amp;</span> <span class='integer val'>0</span> <span class='lt op'>&lt;</span> <span class='t identifier id'>t</span>
        <span class='pbar identifier id'>pbar</span> <span class='assign token'>=</span> <span class='ProgressBar constant id'>ProgressBar</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;...&quot;</span><span class='comma token'>,</span> <span class='t identifier id'>t</span><span class='rparen token'>)</span>
        <span class='pbar identifier id'>pbar</span><span class='dot token'>.</span><span class='file_transfer_mode identifier id'>file_transfer_mode</span>
      <span class='end end kw'>end</span>
    <span class='rbrace token'>}</span><span class='comma token'>,</span>
    <span class='symbol val'>:progress_proc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lambda identifier id'>lambda</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span>
      <span class='pbar identifier id'>pbar</span><span class='dot token'>.</span><span class='set identifier id'>set</span> <span class='s identifier id'>s</span> <span class='if if_mod kw'>if</span> <span class='pbar identifier id'>pbar</span>
    <span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='dot3 op'>...</span> <span class='rbrace token'>}</span>
</pre>
</dd>
</dl>
<p>
OpenURI::OpenRead#open returns an IO like object if block is not given.
Otherwise it yields the IO object and return the value of the block. The IO
object is extended with OpenURI::Meta.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/open-uri.rb', line 527</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/open-uri.rb#L527">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">527
528
529</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='rest identifier id'>rest</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='OpenURI constant id'>OpenURI</span><span class='dot token'>.</span><span class='open_uri identifier id'>open_uri</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='rest identifier id'>rest</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>read</h3>
</div><div id="read-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>read</span><span class='args'>(options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
OpenURI::OpenRead#read([options]) reads a content referenced by self and
returns the content as string. The string is extended with OpenURI::Meta.
The argument `options&#8217; is same as OpenURI::OpenRead#open.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/open-uri.rb', line 535</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/evanphx/rubinius/blob/a7024cd869a9d90a2216b9eaaa9b5740c18ad4a5/lib/open-uri.rb#L535">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">535
536
537
538
539
540
541</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
    <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='read identifier id'>read</span>
    <span class='Meta constant id'>Meta</span><span class='dot token'>.</span><span class='init identifier id'>init</span> <span class='str identifier id'>str</span><span class='comma token'>,</span> <span class='f identifier id'>f</span>
    <span class='str identifier id'>str</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>