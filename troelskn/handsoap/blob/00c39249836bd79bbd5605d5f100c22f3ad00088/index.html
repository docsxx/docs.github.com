<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>troelskn's handsoap - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/troelskn/commits/handsoap/master" rel="alternate" title="Recent Commits to handsoap:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("troelskn", "handsoap", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='troelskn/handsoap/blob/00c39249836bd79bbd5605d5f100c22f3ad00088' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='troelskn/handsoap/blob/00c39249836bd79bbd5605d5f100c22f3ad00088' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("troelskn", "handsoap", "00c39249836bd79bbd5605d5f100c22f3ad00088", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/troelskn/handsoap/tree/">Source</a></li>
            <li class=""><a href="http://github.com/troelskn/handsoap/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/troelskn/handsoap/network">Network</a></li>            
            <li class=""><a href="http://github.com/troelskn/handsoap/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/troelskn/handsoap">Wiki</a></li>
            <li class=""><a href="http://github.com/troelskn/handsoap/graphs">Graphs</a></li>                    
            <li class="active"><a href="/troelskn/handsoap">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/troelskn">troelskn</a> / <b><a href="http://github.com/troelskn/handsoap/tree">handsoap</a></b>        
                <a id="namespaces_button" rel="troelskn/handsoap/blob/00c39249836bd79bbd5605d5f100c22f3ad00088" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="troelskn/handsoap/blob/00c39249836bd79bbd5605d5f100c22f3ad00088" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Handsoap</h1>

<h2>Install</h2>

<pre class="code"><span class='gem identifier id'>gem</span> <span class='sources identifier id'>sources</span> <span class='minus op'>-</span><span class='a identifier id'>a</span> <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gems.github.com
sudo gem install troelskn-handsoap curb nokogiri
</span></pre>

<h2>What</h2>

<p>Handsoap is a library for creating SOAP clients in Ruby.</p>

<p><a href="http://www.vimeo.com/4813848">Watch a tutorial</a>, showing how to use Handsoap. The final application can be found at: <a href="http://github.com/troelskn/handsoap-example/tree/master">http://github.com/troelskn/handsoap-example/tree/master</a></p>

<p>API docs are at <a href="http://rdoc.info/projects/troelskn/handsoap">http://rdoc.info/projects/troelskn/handsoap</a></p>

<p>Some usage information is to be found in <a href="http://wiki.github.com/troelskn/handsoap">the wiki</a>.</p>

<p><img src="http://ny-image0.etsy.com/il_430xN.68558416.jpg" alt="Handsoap" /></p>

<h2>Why</h2>

<p>Ruby already has a SOAP-client library, <a href="http://dev.ctor.org/soap4r">soap4r</a>, so why create another one?</p>

<blockquote><p>Let me summarize SOAP4R: it smells like Java code built on a Monday morning by an EJB coder.</p>

<p>-- <a href="http://blog.labnotes.org/2008/01/28/ruby-in-practice-rest-soap-websphere-mq-and-salesforce/">Ruby In Practice: REST, SOAP, WebSphere MQ and SalesForce</a></p></blockquote>

<p>OK, not entirely fair, but soap4r has problems. It's incomplete and buggy. If you try to use it for any real-world services, you quickly run into compatibility issues. You can get around some of them, if you have control over the service, but you may not always be that lucky. In the end, even if you get it working, it has a bulky un-Rubyish feel to it.</p>

<p>Handsoap tries to do better by taking a minimalistic approach. Instead of a full abstraction layer, it is more like a toolbox with which you can write SOAP bindings. You could think of it as a <a href="http://c2.com/cgi/wiki?ForeignFunctionInterface">ffi</a> targeting SOAP.</p>

<p>This means that you generally need to do more manual labor in the cases where soap4r would have automated the mapping. It also means that you need to get your hands dirty with wsdl, xsd and other heavyweight specifications. However, it does give you some tools to help you stay sane.</p>

<p>There are several benefits of using Handsoap:</p>

<ul>
<li>It supports the entire SOAP specification, all versions (because you have to implement it your self).</li>
<li>You actually get a sporting chance to debug and fix protocol level bugs.</li>
<li>It's much faster than soap4r, because it uses fast low-level libraries for xml-parsing and http-communication.</li>
</ul>


<p>To summarise, soap4r takes an optimistic approach, where Handsoap expects things to fail. If soap4r works for you today, it's probably the better choice. If you find your self strugling with it, Handsoap will offer a more smooth ride. It won't magically fix things for you though.</p>

<h2>Handsoap vs. soap4r benchmark</h2>

<p>Benchmarks are always unfair, but my experiments has placed Handsoap at being approximately double as fast as soap4r. I'd love any suggestions for a more precise measure.</p>

<pre class="code">$ <span class='ruby identifier id'>ruby</span> <span class='tests identifier id'>tests</span><span class='div op'>/</span><span class='benchmark_test identifier id'>benchmark_test</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span> <span class='integer val'>1000</span>
<span class='Benchmarking constant id'>Benchmarking</span> <span class='integer val'>1000</span> <span class='calls identifier id'>calls</span> <span class='dot3 op'>...</span>
                <span class='user identifier id'>user</span>     <span class='system identifier id'>system</span>      <span class='total identifier id'>total</span>        <span class='real identifier id'>real</span>
<span class='handsoap identifier id'>handsoap</span>    <span class='integer val'>0</span><span class='integer val'>.750000</span>   <span class='integer val'>0</span><span class='integer val'>.090000</span>   <span class='integer val'>0</span><span class='integer val'>.840000</span> <span class='lparen token'>(</span>  <span class='float val'>1.992437</span><span class='rparen token'>)</span>
<span class='soap4r identifier id'>soap4r</span>      <span class='float val'>2.240000</span>   <span class='integer val'>0</span><span class='integer val'>.140000</span>   <span class='float val'>2.380000</span> <span class='lparen token'>(</span>  <span class='float val'>3.605836</span><span class='rparen token'>)</span>
<span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span><span class='minus op'>-</span>
<span class='Legend constant id'>Legend</span><span class='colon op'>:</span>
<span class='The constant id'>The</span> <span class='user identifier id'>user</span> <span class='CPU constant id'>CPU</span> <span class='time identifier id'>time</span><span class='comma token'>,</span> <span class='system identifier id'>system</span> <span class='CPU constant id'>CPU</span> <span class='time identifier id'>time</span><span class='comma token'>,</span> <span class='the identifier id'>the</span> <span class='sum identifier id'>sum</span> <span class='of identifier id'>of</span> <span class='the identifier id'>the</span> <span class='user identifier id'>user</span> <span class='and and kw'>and</span> <span class='system identifier id'>system</span> <span class='CPU constant id'>CPU</span> <span class='times identifier id'>times</span><span class='comma token'>,</span>
<span class='and and kw'>and</span> <span class='the identifier id'>the</span> <span class='elapsed identifier id'>elapsed</span> <span class='real identifier id'>real</span> <span class='time identifier id'>time</span><span class='dot token'>.</span> <span class='The constant id'>The</span> <span class='unit identifier id'>unit</span> <span class='of identifier id'>of</span> <span class='time identifier id'>time</span> <span class='is identifier id'>is</span> <span class='seconds identifier id'>seconds</span><span class='dot token'>.</span>
</pre>

<h2>SOAP basics</h2>

<p>SOAP is a protocol that is tunneled through XML over HTTP. Apart from using the technology for transportation, it doesn't have much to do with HTTP. Some times, it hasn't even got much to do with XML either.</p>

<p>A SOAP client basically consists of three parts:</p>

<ul>
<li>A http-connectivity layer,</li>
<li>a mechanism for marshalling native data types to XML,</li>
<li>and a mechanism for unmarshalling XML to native data types.</li>
</ul>


<p>The protocol also contains a large and unwieldy specification of how to do the (un)marshalling, which can be used as the basis for automatically mapping to a rich type model. This makes the protocol fitting for .net/Java, but is a huge overhead for a very dynamically typed language such as Ruby. Much of the complexity of clients such as soap4r, is in the parts that tries to use this specification. Handsoap expects you to manually write the code that marshals/unmarshals, thereby bypassing this complexity (or rather - pass it to the programmer)</p>

<p>Handsoap only supports RPC-style SOAP. This seems to be the most common style. It's probably possible to add support for Document-style with little effort, but until I see the need I'm not going there.</p>

<h2>API documentation</h2>

<p>In addition to this guide, there's autogenerated API documentation available at <a href="http://rdoc.info/projects/troelskn/handsoap">http://rdoc.info/projects/troelskn/handsoap</a></p>

<h2>Getting started</h2>

<p>For getting started with Handsoap, you should read <a href="http://wiki.github.com/troelskn/handsoap/recommendations">the guide in the wiki</a>.</p>

<h2>The toolbox</h2>

<p>The Handsoap toolbox consists of the following components.</p>

<p>Handsoap can use either <a href="http://curb.rubyforge.org/">curb</a>, <a href="http://www.ruby-doc.org/stdlib/libdoc/net/http/rdoc/index.html">Net::HTTP</a> or <a href="http://dev.ctor.org/http-access2">httpclient</a> for HTTP-connectivity. The former is recommended, and default, but for portability you might choose one of the latter. You usually don't need to interact at the HTTP-level, but if you do (for example, if you have to use SSL), you can do so through a thin abstraction layer.</p>

<p>For parsing XML, Handsoap defaults to use <a href="http://github.com/tenderlove/nokogiri/tree/master">Nokogiri</a>. Handsoap has an abstraction layer, so that you can switch between REXML, Nokogiri and ruby-libxml. Besides providing portability between these parsers, Handsop also gives some helper functions that are meaningful when parsing SOAP envelopes.</p>

<p>Finally, there is a library for generating XML, which you'll use when mapping from Ruby to SOAP. It's quite similar to <a href="http://builder.rubyforge.org/">Builder</a>, but is tailored towards being used for writing SOAP-messages. The name of this library is <code>XmlMason</code> and it is included/part of Handsoap.</p>

<h2>License</h2>

<p>Copyright: <a href="http://www.unwire.dk">Unwire A/S</a>, 2009</p>

<p>License: <a href="http://creativecommons.org/licenses/by/2.5/dk/deed.en_GB">Creative Commons Attribution 2.5 Denmark License</a></p>

<hr />

<p>troelskn@gmail.com - April, 2009</p>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>