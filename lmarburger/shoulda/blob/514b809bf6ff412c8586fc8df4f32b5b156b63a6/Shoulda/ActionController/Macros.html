<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>lmarburger's shoulda - Module: Shoulda::ActionController::Macros - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/lmarburger/commits/shoulda/master" rel="alternate" title="Recent Commits to shoulda:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("lmarburger", "shoulda", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("lmarburger", "shoulda", "514b809bf6ff412c8586fc8df4f32b5b156b63a6", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/lmarburger/shoulda/tree/">Source</a></li>
            <li class=""><a href="http://github.com/lmarburger/shoulda/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/lmarburger/shoulda/network">Network</a></li>            
            <li class=""><a href="http://github.com/lmarburger/shoulda/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/lmarburger/shoulda">Wiki</a></li>
            <li class=""><a href="http://github.com/lmarburger/shoulda/graphs">Graphs</a></li>                    
            <li class="active"><a href="/lmarburger/shoulda">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/lmarburger">lmarburger</a> / <b><a href="http://github.com/lmarburger/shoulda/tree">shoulda</a></b>        
                <a id="namespaces_button" rel="lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Shoulda_ActionController_Macros">
  <h1>Module: Shoulda::ActionController::Macros</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="Macros/Matchers.html" title="Shoulda::ActionController::Matchers">Shoulda::ActionController::Matchers</a></p>
</div><div class="section docstring">
  <h1>Macro test helpers for your controllers</h1>
<p>
By using the macro helpers you can quickly and easily create concise and
easy to read test suites.
</p>
<p>
This code segment:
</p>
<pre class="code">
  <span class='context identifier id'>context</span> <span class='string val'>&quot;on GET to :show for first record&quot;</span> <span class='do do kw'>do</span>
    <span class='setup identifier id'>setup</span> <span class='do do kw'>do</span>
      <span class='get identifier id'>get</span> <span class='symbol val'>:show</span><span class='comma token'>,</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span>
    <span class='end end kw'>end</span>

    <span class='should_assign_to identifier id'>should_assign_to</span> <span class='symbol val'>:user</span>
    <span class='should_respond_with identifier id'>should_respond_with</span> <span class='symbol val'>:success</span>
    <span class='should_render_template identifier id'>should_render_template</span> <span class='symbol val'>:show</span>
    <span class='should_not_set_the_flash identifier id'>should_not_set_the_flash</span>

    <span class='should identifier id'>should</span> <span class='string val'>&quot;do something else really cool&quot;</span> <span class='do do kw'>do</span>
      <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='assigns identifier id'>assigns</span><span class='lparen token'>(</span><span class='symbol val'>:user</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='id identifier id'>id</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Would produce 5 tests for the <tt>show</tt> action
</p>

</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_assign_to-instance_method">#should_assign_to</span><span class='args'>(*names, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that the controller assigned to each of
the named instance variable(s).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_filter_params-instance_method">#should_filter_params</span><span class='args'>(*keys)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that filter_parameter_logging is set
for the specified keys.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_not_assign_to-instance_method">#should_not_assign_to</span><span class='args'>(*names)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that the controller did not assign to
any of the named instance variable(s).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_not_set_the_flash-instance_method">#should_not_set_the_flash</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that the flash is empty.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_redirect_to-instance_method">#should_redirect_to</span><span class='args'>(description, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that the controller returned a redirect
to the given path.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_render_template-instance_method">#should_render_template</span><span class='args'>(template)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that the controller rendered the given
template.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_render_with_layout-instance_method">#should_render_with_layout</span><span class='args'>(expected_layout = 'application')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that the controller rendered with the
given layout.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_render_without_layout-instance_method">#should_render_without_layout</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that the controller rendered without a
layout.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_respond_with-instance_method">#should_respond_with</span><span class='args'>(response)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that the controller responded with a
&#8216;response&#8217; status code.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_respond_with_content_type-instance_method">#should_respond_with_content_type</span><span class='args'>(content_type)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that the response content type was
&#8216;content_type&#8217;.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_return_from_session-instance_method">#should_return_from_session</span><span class='args'>(key, expected)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deprecated.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_route-instance_method">#should_route</span><span class='args'>(method, path, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a routing test.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_set_session-instance_method">#should_set_session</span><span class='args'>(key, expected = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that a value returned from the session
is correct.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_set_the_flash_to-instance_method">#should_set_the_flash_to</span><span class='args'>(val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Macro that creates a test asserting that the flash contains the given
value.
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="Macros/Matchers.html" title="Shoulda::ActionController::Matchers">Shoulda::ActionController::Matchers</a></h2>
    <p><span class='name'><a href="Matchers.html#assign_to-instance_method" title="assign_to">assign_to</a></span>, <span class='name'><a href="Matchers.html#filter_param-instance_method" title="filter_param">filter_param</a></span>, <span class='name'><a href="Matchers.html#render_with_layout-instance_method" title="render_with_layout">render_with_layout</a></span>, <span class='name'><a href="Matchers.html#respond_with-instance_method" title="respond_with">respond_with</a></span>, <span class='name'><a href="Matchers.html#respond_with_content_type-instance_method" title="respond_with_content_type">respond_with_content_type</a></span>, <span class='name'><a href="Matchers.html#route-instance_method" title="route">route</a></span>, <span class='name'><a href="Matchers.html#set_session-instance_method" title="set_session">set_session</a></span>, <span class='name'><a href="Matchers.html#set_the_flash-instance_method" title="set_the_flash">set_the_flash</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>should_assign_to</h3>
</div><div id="should_assign_to-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_assign_to</span><span class='args'>(*names, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that the controller assigned to each of
the named instance variable(s).
</p>
<p>
Options:
</p>
<ul>
<li><tt>:class</tt> - The expected class of the instance variable being
checked.

</li>
<li><tt>:equals</tt> - A string which is evaluated and compared for equality
with

</li>
</ul>
<p>
the instance variable being checked.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='should_assign_to identifier id'>should_assign_to</span> <span class='symbol val'>:user</span><span class='comma token'>,</span> <span class='symbol val'>:posts</span>
  <span class='should_assign_to identifier id'>should_assign_to</span> <span class='symbol val'>:user</span><span class='comma token'>,</span> <span class='symbol val'>:class</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='User constant id'>User</span>
  <span class='should_assign_to identifier id'>should_assign_to</span><span class='lparen token'>(</span><span class='symbol val'>:user</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='@user ivar id'>@user</span> <span class='rbrace token'>}</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 82</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L82">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_assign_to identifier id'>should_assign_to</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='names identifier id'>names</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='names identifier id'>names</span><span class='dot token'>.</span><span class='extract_options! fid id'>extract_options!</span>
  <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='colon op'>:</span><span class='equals identifier id'>equals</span><span class='rbrack token'>]</span>
    <span class='warn identifier id'>warn</span> <span class='string val'>&quot;[DEPRECATION] should_assign_to :var, :equals =&gt; 'val' &quot;</span> <span class='lshft op'>&lt;&lt;</span>
         <span class='string val'>&quot;is deprecated. Use should_assign_to(:var) { 'val' } instead.&quot;</span>
  <span class='end end kw'>end</span>
  <span class='names identifier id'>names</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='bitor op'>|</span>
    <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='assign_to identifier id'>assign_to</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='with_kind_of identifier id'>with_kind_of</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:class</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='test_name identifier id'>test_name</span> <span class='assign token'>=</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='description identifier id'>description</span>
    <span class='test_name identifier id'>test_name</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot; which is equal to #{opts[:equals]}&quot;</span> <span class='if if_mod kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:equals</span><span class='rbrack token'>]</span>
    <span class='should identifier id'>should</span> <span class='test_name identifier id'>test_name</span> <span class='do do kw'>do</span>
      <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='colon op'>:</span><span class='equals identifier id'>equals</span><span class='rbrack token'>]</span>
        <span class='instantiate_variables_from_assigns identifier id'>instantiate_variables_from_assigns</span> <span class='do do kw'>do</span>
          <span class='expected_value identifier id'>expected_value</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:equals</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                <span class='self self kw'>self</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:binding</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                                <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span>
                                <span class='__LINE__ __line__ kw'>__LINE__</span><span class='rparen token'>)</span>
          <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='with identifier id'>with</span><span class='lparen token'>(</span><span class='expected_value identifier id'>expected_value</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
      <span class='elsif elsif kw'>elsif</span> <span class='block identifier id'>block</span>
        <span class='expected_value identifier id'>expected_value</span> <span class='assign token'>=</span> <span class='instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
        <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='with identifier id'>with</span><span class='lparen token'>(</span><span class='expected_value identifier id'>expected_value</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='assert_accepts identifier id'>assert_accepts</span> <span class='matcher identifier id'>matcher</span><span class='comma token'>,</span> <span class='@controller ivar id'>@controller</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_filter_params</h3>
</div><div id="should_filter_params-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_filter_params</span><span class='args'>(*keys)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that filter_parameter_logging is set
for the specified keys
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='should_filter_params identifier id'>should_filter_params</span> <span class='symbol val'>:password</span><span class='comma token'>,</span> <span class='symbol val'>:ssn</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 60</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L60">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">60
61
62
63
64
65
66
67</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_filter_params identifier id'>should_filter_params</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='keys identifier id'>keys</span><span class='rparen token'>)</span>
  <span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='bitor op'>|</span>
    <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='filter_param identifier id'>filter_param</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
    <span class='should identifier id'>should</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='description identifier id'>description</span> <span class='do do kw'>do</span>
      <span class='assert_accepts identifier id'>assert_accepts</span> <span class='matcher identifier id'>matcher</span><span class='comma token'>,</span> <span class='@controller ivar id'>@controller</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_not_assign_to</h3>
</div><div id="should_not_assign_to-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_not_assign_to</span><span class='args'>(*names)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that the controller did not assign to
any of the named instance variable(s).
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='should_not_assign_to identifier id'>should_not_assign_to</span> <span class='symbol val'>:user</span><span class='comma token'>,</span> <span class='symbol val'>:posts</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 117</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L117">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">117
118
119
120
121
122
123
124</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_not_assign_to identifier id'>should_not_assign_to</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='names identifier id'>names</span><span class='rparen token'>)</span>
  <span class='names identifier id'>names</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='bitor op'>|</span>
    <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='assign_to identifier id'>assign_to</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='should identifier id'>should</span> <span class='dstring node'>&quot;not #{matcher.description}&quot;</span> <span class='do do kw'>do</span>
      <span class='assert_rejects identifier id'>assert_rejects</span> <span class='matcher identifier id'>matcher</span><span class='comma token'>,</span> <span class='@controller ivar id'>@controller</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_not_set_the_flash</h3>
</div><div id="should_not_set_the_flash-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_not_set_the_flash</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that the flash is empty. Same as
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 50</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L50">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">50
51
52</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_not_set_the_flash identifier id'>should_not_set_the_flash</span>
  <span class='should_set_the_flash_to identifier id'>should_set_the_flash_to</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_redirect_to</h3>
</div><div id="should_redirect_to-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_redirect_to</span><span class='args'>(description, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that the controller returned a redirect
to the given path. The given string is evaled to produce the resulting
redirect path. All of the instance variables set by the controller are
available to the evaled string. Example:
</p>
<pre class="code">
  <span class='should_redirect_to identifier id'>should_redirect_to</span><span class='lparen token'>(</span><span class='string val'>&quot;the user's profile&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='user_url identifier id'>user_url</span><span class='lparen token'>(</span><span class='@user ivar id'>@user</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 226</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L226">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_redirect_to identifier id'>should_redirect_to</span><span class='lparen token'>(</span><span class='description identifier id'>description</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='block identifier id'>block</span>
    <span class='warn identifier id'>warn</span> <span class='string val'>&quot;[DEPRECATION] should_redirect_to without a block is &quot;</span> <span class='lshft op'>&lt;&lt;</span>
         <span class='string val'>&quot;deprecated. Use should_redirect_to('somewhere') { } instead.&quot;</span>
  <span class='end end kw'>end</span>
  <span class='should identifier id'>should</span> <span class='dstring node'>&quot;redirect to #{description}&quot;</span> <span class='do do kw'>do</span>
    <span class='if if kw'>if</span> <span class='block identifier id'>block</span>
      <span class='url identifier id'>url</span> <span class='assign token'>=</span> <span class='instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='instantiate_variables_from_assigns identifier id'>instantiate_variables_from_assigns</span> <span class='do do kw'>do</span>
        <span class='url identifier id'>url</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='description identifier id'>description</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:binding</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='assert_redirected_to identifier id'>assert_redirected_to</span> <span class='url identifier id'>url</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_render_template</h3>
</div><div id="should_render_template-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_render_template</span><span class='args'>(template)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that the controller rendered the given
template. Example:
</p>
<pre class="code">
  <span class='should_render_template identifier id'>should_render_template</span> <span class='symbol val'>:new</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 191</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L191">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">191
192
193
194
195</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_render_template identifier id'>should_render_template</span><span class='lparen token'>(</span><span class='template identifier id'>template</span><span class='rparen token'>)</span>
  <span class='should identifier id'>should</span> <span class='dstring node'>&quot;render template #{template.inspect}&quot;</span> <span class='do do kw'>do</span>
    <span class='assert_template identifier id'>assert_template</span> <span class='template identifier id'>template</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_render_with_layout</h3>
</div><div id="should_render_with_layout-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_render_with_layout</span><span class='args'>(expected_layout = 'application')</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that the controller rendered with the
given layout. Example:
</p>
<pre class="code">
  <span class='should_render_with_layout identifier id'>should_render_with_layout</span> <span class='string val'>'special'</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 201</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L201">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">201
202
203
204
205
206
207
208
209
210
211
212</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_render_with_layout identifier id'>should_render_with_layout</span><span class='lparen token'>(</span><span class='expected_layout identifier id'>expected_layout</span> <span class='assign token'>=</span> <span class='string val'>'application'</span><span class='rparen token'>)</span>
  <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='render_with_layout identifier id'>render_with_layout</span><span class='lparen token'>(</span><span class='expected_layout identifier id'>expected_layout</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='expected_layout identifier id'>expected_layout</span>
    <span class='should identifier id'>should</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='description identifier id'>description</span> <span class='do do kw'>do</span>
      <span class='assert_accepts identifier id'>assert_accepts</span> <span class='matcher identifier id'>matcher</span><span class='comma token'>,</span> <span class='@controller ivar id'>@controller</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='should identifier id'>should</span> <span class='string val'>&quot;render without layout&quot;</span> <span class='do do kw'>do</span>
      <span class='assert_rejects identifier id'>assert_rejects</span> <span class='matcher identifier id'>matcher</span><span class='comma token'>,</span> <span class='@controller ivar id'>@controller</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_render_without_layout</h3>
</div><div id="should_render_without_layout-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_render_without_layout</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that the controller rendered without a
layout. Same as @should_render_with_layout false@
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 216</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L216">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">216
217
218</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_render_without_layout identifier id'>should_render_without_layout</span>
  <span class='should_render_with_layout identifier id'>should_render_with_layout</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_respond_with</h3>
</div><div id="should_respond_with-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_respond_with</span><span class='args'>(response)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that the controller responded with a
&#8216;response&#8217; status code. Example:
</p>
<pre class="code">
  <span class='should_respond_with identifier id'>should_respond_with</span> <span class='symbol val'>:success</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 130</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L130">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">130
131
132
133
134
135</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_respond_with identifier id'>should_respond_with</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='should identifier id'>should</span> <span class='dstring node'>&quot;respond with #{response}&quot;</span> <span class='do do kw'>do</span>
    <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='respond_with identifier id'>respond_with</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
    <span class='assert_accepts identifier id'>assert_accepts</span> <span class='matcher identifier id'>matcher</span><span class='comma token'>,</span> <span class='@controller ivar id'>@controller</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_respond_with_content_type</h3>
</div><div id="should_respond_with_content_type-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_respond_with_content_type</span><span class='args'>(content_type)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that the response content type was
&#8216;content_type&#8217;. Example:
</p>
<pre class="code">
  <span class='should_respond_with_content_type identifier id'>should_respond_with_content_type</span> <span class='string val'>'application/rss+xml'</span>
  <span class='should_respond_with_content_type identifier id'>should_respond_with_content_type</span> <span class='symbol val'>:rss</span>
  <span class='should_respond_with_content_type identifier id'>should_respond_with_content_type</span> <span class='regexp val'>/rss/</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 143</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L143">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">143
144
145
146
147
148</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_respond_with_content_type identifier id'>should_respond_with_content_type</span><span class='lparen token'>(</span><span class='content_type identifier id'>content_type</span><span class='rparen token'>)</span>
  <span class='should identifier id'>should</span> <span class='dstring node'>&quot;respond with content type of #{content_type}&quot;</span> <span class='do do kw'>do</span>
    <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='respond_with_content_type identifier id'>respond_with_content_type</span><span class='lparen token'>(</span><span class='content_type identifier id'>content_type</span><span class='rparen token'>)</span>
    <span class='assert_accepts identifier id'>assert_accepts</span> <span class='matcher identifier id'>matcher</span><span class='comma token'>,</span> <span class='@controller ivar id'>@controller</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_return_from_session</h3>
</div><div id="should_return_from_session-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_return_from_session</span><span class='args'>(key, expected)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deprecated. See should_set_session
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 181</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L181">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">181
182
183
184
185</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_return_from_session identifier id'>should_return_from_session</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='expected identifier id'>expected</span><span class='rparen token'>)</span>
  <span class='warn identifier id'>warn</span> <span class='string val'>&quot;[DEPRECATION] should_return_from_session is deprecated. &quot;</span> <span class='lshft op'>&lt;&lt;</span>
       <span class='string val'>&quot;Use should_set_session instead.&quot;</span>
  <span class='should_set_session identifier id'>should_set_session</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='expected identifier id'>expected</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_route</h3>
</div><div id="should_route-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_route</span><span class='args'>(method, path, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a routing test. It tries to use the given HTTP
<tt>method</tt> on the given <tt>path</tt>, and asserts that it routes to
the given <tt>options</tt>.
</p>
<p>
If you don&#8217;t specify a :controller, it will try to guess the
controller based on the current test.
</p>
<p>
<tt>to_param</tt> is called on the <tt>options</tt> given.
</p>
<p>
Examples:
</p>
<pre class="code">
  <span class='should_route identifier id'>should_route</span> <span class='symbol val'>:get</span><span class='comma token'>,</span> <span class='string val'>&quot;/posts&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:controller</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:posts</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:index</span>
  <span class='should_route identifier id'>should_route</span> <span class='symbol val'>:get</span><span class='comma token'>,</span> <span class='string val'>&quot;/posts/new&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:new</span>
  <span class='should_route identifier id'>should_route</span> <span class='symbol val'>:post</span><span class='comma token'>,</span> <span class='string val'>&quot;/posts&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:create</span>
  <span class='should_route identifier id'>should_route</span> <span class='symbol val'>:get</span><span class='comma token'>,</span> <span class='string val'>&quot;/posts/1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:show</span><span class='comma token'>,</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span>
  <span class='should_route identifier id'>should_route</span> <span class='symbol val'>:edit</span><span class='comma token'>,</span> <span class='string val'>&quot;/posts/1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:show</span><span class='comma token'>,</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span>
  <span class='should_route identifier id'>should_route</span> <span class='symbol val'>:put</span><span class='comma token'>,</span> <span class='string val'>&quot;/posts/1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:update</span><span class='comma token'>,</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span>
  <span class='should_route identifier id'>should_route</span> <span class='symbol val'>:delete</span><span class='comma token'>,</span> <span class='string val'>&quot;/posts/1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:destroy</span><span class='comma token'>,</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span>
  <span class='should_route identifier id'>should_route</span> <span class='symbol val'>:get</span><span class='comma token'>,</span> <span class='string val'>&quot;/users/1/posts/1&quot;</span><span class='comma token'>,</span>
    <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:show</span><span class='comma token'>,</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='symbol val'>:user_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 264</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L264">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">264
265
266
267
268
269
270
271
272
273
274</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_route identifier id'>should_route</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='colon op'>:</span><span class='controller identifier id'>controller</span><span class='rbrack token'>]</span>
    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:controller</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/ControllerTest$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='tableize identifier id'>tableize</span>
  <span class='end end kw'>end</span>

  <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='route identifier id'>route</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to identifier id'>to</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>

  <span class='should identifier id'>should</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='description identifier id'>description</span> <span class='do do kw'>do</span>
    <span class='assert_accepts identifier id'>assert_accepts</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='in_context identifier id'>in_context</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='self self kw'>self</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_set_session</h3>
</div><div id="should_set_session-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_set_session</span><span class='args'>(key, expected = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that a value returned from the session
is correct. The given string is evaled to produce the resulting redirect
path. All of the instance variables set by the controller are available to
the evaled string. Example:
</p>
<pre class="code">
  <span class='should_set_session identifier id'>should_set_session</span><span class='lparen token'>(</span><span class='symbol val'>:user_id</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='string val'>'@user.id'</span> <span class='rbrace token'>}</span>
  <span class='should_set_session identifier id'>should_set_session</span><span class='lparen token'>(</span><span class='symbol val'>:message</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;Free stuff&quot;</span> <span class='rbrace token'>}</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 157</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L157">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_set_session identifier id'>should_set_session</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='expected identifier id'>expected</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='set_session identifier id'>set_session</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='expected identifier id'>expected</span>
    <span class='warn identifier id'>warn</span> <span class='string val'>&quot;[DEPRECATION] should_set_session :key, 'val' is deprecated. &quot;</span> <span class='lshft op'>&lt;&lt;</span>
         <span class='string val'>&quot;Use should_set_session(:key) { 'val' } instead.&quot;</span>
  <span class='end end kw'>end</span>
  <span class='should identifier id'>should</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='description identifier id'>description</span> <span class='do do kw'>do</span>
    <span class='if if kw'>if</span> <span class='expected identifier id'>expected</span>
      <span class='instantiate_variables_from_assigns identifier id'>instantiate_variables_from_assigns</span> <span class='do do kw'>do</span>
        <span class='expected_value identifier id'>expected_value</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='expected identifier id'>expected</span><span class='comma token'>,</span> 
                              <span class='self self kw'>self</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:binding</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                              <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span>
                              <span class='__LINE__ __line__ kw'>__LINE__</span><span class='rparen token'>)</span>
        <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='to identifier id'>to</span><span class='lparen token'>(</span><span class='expected_value identifier id'>expected_value</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='expected_value identifier id'>expected_value</span> <span class='assign token'>=</span> <span class='instance_eval identifier id'>instance_eval</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
      <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='to identifier id'>to</span><span class='lparen token'>(</span><span class='expected_value identifier id'>expected_value</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='assert_accepts identifier id'>assert_accepts</span> <span class='matcher identifier id'>matcher</span><span class='comma token'>,</span> <span class='@controller ivar id'>@controller</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_set_the_flash_to</h3>
</div><div id="should_set_the_flash_to-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_set_the_flash_to</span><span class='args'>(val)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Macro that creates a test asserting that the flash contains the given
value. val can be a String, a Regex, or nil (indicating that the flash
should not be set)
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='should_set_the_flash_to identifier id'>should_set_the_flash_to</span> <span class='string val'>&quot;Thank you for placing this order.&quot;</span>
  <span class='should_set_the_flash_to identifier id'>should_set_the_flash_to</span> <span class='regexp val'>/created/i</span>
  <span class='should_set_the_flash_to identifier id'>should_set_the_flash_to</span> <span class='nil nil kw'>nil</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/action_controller/macros.rb', line 35</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/lmarburger/shoulda/blob/514b809bf6ff412c8586fc8df4f32b5b156b63a6/lib/shoulda/action_controller/macros.rb#L35">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">35
36
37
38
39
40
41
42
43
44
45
46</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_set_the_flash_to identifier id'>should_set_the_flash_to</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='matcher identifier id'>matcher</span> <span class='assign token'>=</span> <span class='set_the_flash identifier id'>set_the_flash</span><span class='dot token'>.</span><span class='to identifier id'>to</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='val identifier id'>val</span>
    <span class='should identifier id'>should</span> <span class='matcher identifier id'>matcher</span><span class='dot token'>.</span><span class='description identifier id'>description</span> <span class='do do kw'>do</span>
      <span class='assert_accepts identifier id'>assert_accepts</span> <span class='matcher identifier id'>matcher</span><span class='comma token'>,</span> <span class='@controller ivar id'>@controller</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='should identifier id'>should</span> <span class='dstring node'>&quot;not #{matcher.description}&quot;</span> <span class='do do kw'>do</span>
      <span class='assert_rejects identifier id'>assert_rejects</span> <span class='matcher identifier id'>matcher</span><span class='comma token'>,</span> <span class='@controller ivar id'>@controller</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>