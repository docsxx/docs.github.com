<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>ianneub's right_aws - Class: RightAws::SqsGen2Interface - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/ianneub/commits/right_aws/master" rel="alternate" title="Recent Commits to right_aws:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("ianneub", "right_aws", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("ianneub", "right_aws", "f0bd614ae0c4ba263bb64c75e5226a694e538f1a", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/ianneub/right_aws/tree/">Source</a></li>
            <li class=""><a href="http://github.com/ianneub/right_aws/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/ianneub/right_aws/network">Network</a></li>            
            <li class=""><a href="http://github.com/ianneub/right_aws/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/ianneub/right_aws">Wiki</a></li>
            <li class=""><a href="http://github.com/ianneub/right_aws/graphs">Graphs</a></li>                    
            <li class="active"><a href="/ianneub/right_aws">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/ianneub">ianneub</a> / <b><a href="http://github.com/ianneub/right_aws/tree">right_aws</a></b>        
                <a id="namespaces_button" rel="ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class RightAws_SqsGen2Interface">
  <h1>Class: RightAws::SqsGen2Interface</h1>
  <div class="section inheritance">
  <ul>
  <li><a title="RightAws::RightAwsBase" href="RightAwsBase.html">RightAws::RightAwsBase</a></li><ul><li>RightAws::SqsGen2Interface</li>
  </ul></ul>
</div><div class="section mixins">
  <h2>Included Modules</h2>
  <p><a title="RightAws::RightAwsBaseInterface" href="SqsGen2Interface/RightAwsBaseInterface.html">RightAws::RightAwsBaseInterface</a></p>
</div><div class="section docstring">
  <p>
Right::Aws::SqsGen2Interface - RightScale&#8217;s low-level Amazon SQS
interface for API version 2008-01-01 and later. For explanations of the
semantics of each call, please refer to Amazon&#8217;s documentation at
http://developer.amazonwebservices.com/connect/kbcategory.jspa?categoryID=31
</p>
<p>
This class provides a procedural interface to SQS. Conceptually it is
mostly a pass-through interface to SQS and its API is very similar to the
bare SQS API. For a somewhat higher-level and object-oriented interface,
see RightAws::SqsGen2.
</p>

</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="API_VERSION-constant">API_VERSION</dt>
      <dd>&quot;2008-01-01&quot;</dd>
    
      <dt id="DEFAULT_HOST-constant">DEFAULT_HOST</dt>
      <dd>&quot;queue.amazonaws.com&quot;</dd>
    
      <dt id="DEFAULT_PORT-constant">DEFAULT_PORT</dt>
      <dd>443</dd>
    
      <dt id="DEFAULT_PROTOCOL-constant">DEFAULT_PROTOCOL</dt>
      <dd>'https'</dd>
    
      <dt id="DEFAULT_VISIBILITY_TIMEOUT-constant">DEFAULT_VISIBILITY_TIMEOUT</dt>
      <dd>30</dd>
    
      <dt id="REQUEST_TTL-constant">REQUEST_TTL</dt>
      <dd>30</dd>
    
  </dl>
</div>
<div class="inherited">
  
  <div>
    <h2>Constants Inherited from <a title="RightAws::RightAwsBase" href="RightAwsBase.html">RightAws::RightAwsBase</a></h2>
    <p><span class='name'><a title="AMAZON_PROBLEMS" href="RightAwsBase.html#AMAZON_PROBLEMS-constant">AMAZON_PROBLEMS</a></span></p>
  </div>
  
</div>
<div class="clear"></div><div class="included">
  
  <div>
    <h2>Constants Included from <a title="RightAws::RightAwsBaseInterface" href="SqsGen2Interface/RightAwsBaseInterface.html">RightAws::RightAwsBaseInterface</a></h2>
    <p><span class='name'><a title="DEFAULT_SIGNATURE_VERSION" href="RightAwsBaseInterface.html#DEFAULT_SIGNATURE_VERSION-constant">DEFAULT_SIGNATURE_VERSION</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(aws_access_key_id = nil, aws_secret_access_key = nil, params = )</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates a new SqsInterface instance. This instance is limited to operations
on SQS objects created with Amazon&#8217;s 2008-01-01 API version. This
interface will not work on objects created with prior API versions. See
Amazon&#8217;s article &quot;Migrating to Amazon SQS API version
2008-01-01&quot; at:
http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1148
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span> <span class='assign token'>=</span> <span class='RightAws constant id'>RightAws</span><span class='colon2 op'>::</span><span class='SqsGen2Interface constant id'>SqsGen2Interface</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'1E3GDYEOGFJPIT75KDT40'</span><span class='comma token'>,</span><span class='string val'>'hgTHt68JY07JKUY08ftHYtERkjgtfERn57DFE379'</span><span class='comma token'>,</span> <span class='lt op'>&lt;</span><span class='tt identifier id'>tt</span><span class='geq op'>&gt;=</span><span class='bitand op'>&amp;</span><span class='gt identifier id'>gt</span><span class='semicolon token'>;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='bitand op'>&amp;</span><span class='gt identifier id'>gt</span><span class='semicolon token'>;</span> <span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'/tmp/x.log'</span><span class='rparen token'>)</span><span class='lt op'>&lt;</span><span class='regexp val'>/tt&gt;)
</span></pre>
<p>
Params is a hash:
</p>
<pre class="code">
   <span class='lbrace token'>{</span><span class='symbol val'>:server</span>       <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'queue.amazonaws.com'</span> <span class='comment val'># Amazon service host: 'queue.amazonaws.com' (default)</span>
    <span class='symbol val'>:port</span>         <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>443</span>                   <span class='comment val'># Amazon service port: 80 or 443 (default)</span>
    <span class='symbol val'>:multi_thread</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='bitor op'>|</span><span class='false false kw'>false</span>            <span class='comment val'># Multi-threaded (connection per each thread): true or false (default)</span>
    <span class='symbol val'>:signature_version</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'0'</span>              <span class='comment val'># The signature version : '0' or '1'(default)</span>
    <span class='symbol val'>:logger</span>       <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Logger constant id'>Logger</span> <span class='Object constant id'>Object</span><span class='rbrace token'>}</span>        <span class='comment val'># Logger instance: logs to STDOUT if omitted }</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 78</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L78">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">78
79
80
81
82
83
84
85
86</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='aws_access_key_id identifier id'>aws_access_key_id</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='aws_secret_access_key identifier id'>aws_secret_access_key</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='assign token'>=</span><span class='semicolon token'>;</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='init identifier id'>init</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='symbol val'>:name</span>             <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'SQS'</span><span class='comma token'>,</span> 
         <span class='symbol val'>:default_host</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='host identifier id'>host</span>   <span class='colon op'>:</span> <span class='DEFAULT_HOST constant id'>DEFAULT_HOST</span><span class='comma token'>,</span> 
         <span class='symbol val'>:default_port</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='port identifier id'>port</span>   <span class='colon op'>:</span> <span class='DEFAULT_PORT constant id'>DEFAULT_PORT</span><span class='comma token'>,</span> 
         <span class='symbol val'>:default_protocol</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='scheme identifier id'>scheme</span> <span class='colon op'>:</span> <span class='DEFAULT_PROTOCOL constant id'>DEFAULT_PROTOCOL</span> <span class='rbrace token'>}</span><span class='comma token'>,</span> 
       <span class='aws_access_key_id identifier id'>aws_access_key_id</span>     <span class='orop op'>||</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'AWS_ACCESS_KEY_ID'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> 
       <span class='aws_secret_access_key identifier id'>aws_secret_access_key</span> <span class='orop op'>||</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'AWS_SECRET_ACCESS_KEY'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> 
       <span class='params identifier id'>params</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#api-class_method">api</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#bench_sqs-class_method">bench_sqs</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#bench_xml-class_method">bench_xml</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#queue_name_by_url-class_method">queue_name_by_url</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns short queue name by url.
</p>

        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h2>Public Class Methods Inherited from <a title="RightAws::RightAwsBase" href="RightAwsBase.html">RightAws::RightAwsBase</a></h2>
    <p><span class='name'><a title="amazon_problems" href="RightAwsBase.html#amazon_problems-class_method">amazon_problems</a></span></p>
  </div>
  
</div>
<div class="clear"></div><div class="included">
  
  <div>
    <h2>Public Class Methods Included from <a title="RightAws::RightAwsBaseInterface" href="SqsGen2Interface/RightAwsBaseInterface.html">RightAws::RightAwsBaseInterface</a></h2>
    <p><span class='name'><a title="caching" href="RightAwsBaseInterface.html#caching-class_method">caching</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#clear_queue-instance_method">#clear_queue</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Removes all visible messages from queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_queue-instance_method">#create_queue</span><span class='args'>(queue_name, default_visibility_timeout = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Creates a new queue, returning its URI.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete_message-instance_method">#delete_message</span><span class='args'>(queue_url, receipt_handle)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes message from queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete_queue-instance_method">#delete_queue</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#generate_post_request-instance_method">#generate_post_request</span><span class='args'>(action, param = )</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#generate_request-instance_method">#generate_request</span><span class='args'>(action, param = )</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <hr size="10"></hr><pre class="code">
     <span class='Requests constant id'>Requests</span>
</pre>
<hr size="10"></hr><p>
Generates a request hash for the query API.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get_queue_attributes-instance_method">#get_queue_attributes</span><span class='args'>(queue_url, attribute = 'All')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Retrieves the queue attribute(s).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get_queue_length-instance_method">#get_queue_length</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns approximate number of messages in queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#list_queues-instance_method">#list_queues</span><span class='args'>(queue_name_prefix = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Lists all queues owned by this user that have names beginning with
<tt>queue_name_prefix</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#pop_message-instance_method">#pop_message</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Pops (retrieves and deletes) first accessible message from queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#pop_messages-instance_method">#pop_messages</span><span class='args'>(queue_url, number_of_messages = 1)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Pops (retrieves and deletes) up to &#8216;number_of_messages&#8217; from
queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#queue_name_by_url-instance_method">#queue_name_by_url</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns short queue name by url.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#queue_url_by_name-instance_method">#queue_url_by_name</span><span class='args'>(queue_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Given the queue&#8217;s short name, this call returns the queue URL or
<tt>nil</tt> if queue is not found
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span>
</pre>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#receive_message-instance_method">#receive_message</span><span class='args'>(queue_url, max_number_of_messages = 1, visibility_timeout = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Retrieves a list of messages from queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#request_info-instance_method">#request_info</span><span class='args'>(request, parser)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sends request to Amazon and parses the response Raises AwsError if any
banana happened.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#send_message-instance_method">#send_message</span><span class='args'>(queue_url, message)</span>
        <span class='block'></span>
        
          <span class='alias'>#push_message</span>
        
      </th>
      <td class="docstring">
        <p>
Sends a new message to a queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_queue_attributes-instance_method">#set_queue_attributes</span><span class='args'>(queue_url, attribute, value)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sets queue attribute.
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a title="RightAws::RightAwsBaseInterface" href="SqsGen2Interface/RightAwsBaseInterface.html">RightAws::RightAwsBaseInterface</a></h2>
    <p><span class='name'><a title="cache_hits?" href="RightAwsBaseInterface.html#cache_hits%3F-instance_method">cache_hits?</a></span>, <span class='name'><a title="caching?" href="RightAwsBaseInterface.html#caching%3F-instance_method">caching?</a></span>, <span class='name'><a title="init" href="RightAwsBaseInterface.html#init-instance_method">init</a></span>, <span class='name'><a title="last_request_id" href="RightAwsBaseInterface.html#last_request_id-instance_method">last_request_id</a></span>, <span class='name'><a title="multi_thread" href="RightAwsBaseInterface.html#multi_thread-instance_method">multi_thread</a></span>, <span class='name'><a title="on_exception" href="RightAwsBaseInterface.html#on_exception-instance_method">on_exception</a></span>, <span class='name'><a title="request_cache_or_info" href="RightAwsBaseInterface.html#request_cache_or_info-instance_method">request_cache_or_info</a></span>, <span class='name'><a title="request_info_impl" href="RightAwsBaseInterface.html#request_info_impl-instance_method">request_info_impl</a></span>, <span class='name'><a title="signed_service_params" href="RightAwsBaseInterface.html#signed_service_params-instance_method">signed_service_params</a></span>, <span class='name'><a title="update_cache" href="RightAwsBaseInterface.html#update_cache-instance_method">update_cache</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>api</h3>
</div><div id="api-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>api</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 58</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L58">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">58
59
60</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='api identifier id'>api</span> 
  <span class='@@api ivar id'>@@api</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>bench_sqs</h3>
</div><div id="bench_sqs-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>bench_sqs</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 53</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L53">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">53
54
55</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='bench_sqs identifier id'>bench_sqs</span>
  <span class='@@bench ivar id'>@@bench</span><span class='dot token'>.</span><span class='service identifier id'>service</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>bench_xml</h3>
</div><div id="bench_xml-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>bench_xml</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 50</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L50">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">50
51
52</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='bench_xml identifier id'>bench_xml</span>
  <span class='@@bench ivar id'>@@bench</span><span class='dot token'>.</span><span class='xml identifier id'>xml</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>queue_name_by_url</h3>
</div><div id="queue_name_by_url-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>queue_name_by_url</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns short queue name by url.
</p>
<pre class="code">
 <span class='RightSqs constant id'>RightSqs</span><span class='dot token'>.</span><span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 'my_awesome_queue'</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 301</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L301">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">301
302
303
304
305</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='queue_url identifier id'>queue_url</span><span class='lbrack token'>[</span><span class='regexp val'>/[^\/]*$/</span><span class='rbrack token'>]</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>clear_queue</h3>
</div><div id="clear_queue-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>clear_queue</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Removes all visible messages from queue. Return <tt>true</tt> or an
exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='clear_queue identifier id'>clear_queue</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 331</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L331">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">331
332
333
334
335
336</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='clear_queue identifier id'>clear_queue</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='while while kw'>while</span> <span class='lparen token'>(</span><span class='pop_messages identifier id'>pop_messages</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='integer val'>10</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span> <span class='semicolon token'>;</span> <span class='end end kw'>end</span>   <span class='comment val'># delete all messages in queue</span>
  <span class='true true kw'>true</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_queue</h3>
</div><div id="create_queue-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_queue</span><span class='args'>(queue_name, default_visibility_timeout = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates a new queue, returning its URI.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='create_queue identifier id'>create_queue</span><span class='lparen token'>(</span><span class='string val'>'my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 153</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L153">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">153
154
155
156
157
158
159</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create_queue identifier id'>create_queue</span><span class='lparen token'>(</span><span class='queue_name identifier id'>queue_name</span><span class='comma token'>,</span> <span class='default_visibility_timeout identifier id'>default_visibility_timeout</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'CreateQueue'</span><span class='comma token'>,</span> <span class='string val'>'QueueName'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_name identifier id'>queue_name</span><span class='comma token'>,</span>
                              <span class='string val'>'DefaultVisibilityTimeout'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='default_visibility_timeout identifier id'>default_visibility_timeout</span> <span class='orop op'>||</span> <span class='DEFAULT_VISIBILITY_TIMEOUT constant id'>DEFAULT_VISIBILITY_TIMEOUT</span> <span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsCreateQueueParser constant id'>SqsCreateQueueParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete_message</h3>
</div><div id="delete_message-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete_message</span><span class='args'>(queue_url, receipt_handle)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes message from queue. Returns <tt>true</tt> or an exception. Amazon
returns <tt>true</tt> on deletion of non-existent messages. You must use
the receipt handle for a message to delete it, not the message ID.
</p>
<p>
From the SQS Developer Guide: &quot;It is possible you will receive a
message even after you have deleted it. This might happen on rare occasions
if one of the servers storing a copy of the message is unavailable when you
request to delete the message. The copy remains on the server and might be
returned to you again on a subsequent receive request. You should create
your system to be idempotent so that receiving a particular message more
than once is not a problem. &quot;
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='delete_message identifier id'>delete_message</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='string val'>'Euvo62/1nlIet...ao03hd9Sa0w=='</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 276</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L276">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">276
277
278
279
280
281</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete_message identifier id'>delete_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='receipt_handle identifier id'>receipt_handle</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'DeleteMessage'</span><span class='comma token'>,</span> <span class='string val'>'ReceiptHandle'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='receipt_handle identifier id'>receipt_handle</span><span class='comma token'>,</span> <span class='symbol val'>:queue_url</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsStatusParser constant id'>SqsStatusParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete_queue</h3>
</div><div id="delete_queue-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete_queue</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes queue. Any messages in the queue are permanently lost. Returns
<tt>true</tt> or an exception. Queue deletion can take up to 60 s to
propagate through SQS. Thus, after a deletion, subsequent list_queues calls
may still show the deleted queue. It is not unusual within the 60 s window
to see the deleted queue absent from one list_queues call but present in
the subsequent one. Deletion is eventual.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='delete_queue identifier id'>delete_queue</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue_2'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 185</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L185">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">185
186
187
188
189
190</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete_queue identifier id'>delete_queue</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'DeleteQueue'</span><span class='comma token'>,</span> <span class='symbol val'>:queue_url</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsStatusParser constant id'>SqsStatusParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>generate_post_request</h3>
</div><div id="generate_post_request-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>generate_post_request</span><span class='args'>(action, param = )</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 117</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L117">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='generate_post_request identifier id'>generate_post_request</span><span class='lparen token'>(</span><span class='action identifier id'>action</span><span class='comma token'>,</span> <span class='param identifier id'>param</span><span class='assign token'>=</span><span class='semicolon token'>;</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>  <span class='comment val'># :nodoc:</span>
  <span class='service identifier id'>service</span> <span class='assign token'>=</span> <span class='param identifier id'>param</span><span class='lbrack token'>[</span><span class='symbol val'>:queue_url</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='URI constant id'>URI</span><span class='lparen token'>(</span><span class='param identifier id'>param</span><span class='lbrack token'>[</span><span class='symbol val'>:queue_url</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='colon op'>:</span> <span class='string val'>'/'</span>
  <span class='message identifier id'>message</span>   <span class='assign token'>=</span> <span class='param identifier id'>param</span><span class='lbrack token'>[</span><span class='symbol val'>:message</span><span class='rbrack token'>]</span>                <span class='comment val'># extract message body if nesessary</span>
  <span class='param identifier id'>param</span><span class='dot token'>.</span><span class='each identifier id'>each</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span> <span class='param identifier id'>param</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='orop op'>||</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Symbol constant id'>Symbol</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='service_hash identifier id'>service_hash</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;Action&quot;</span>           <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='action identifier id'>action</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;Expires&quot;</span>          <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span> <span class='plus op'>+</span> <span class='REQUEST_TTL constant id'>REQUEST_TTL</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='utc identifier id'>utc</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='string val'>&quot;%Y-%m-%dT%H:%M:%SZ&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;AWSAccessKeyId&quot;</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@aws_access_key_id ivar id'>@aws_access_key_id</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;MessageBody&quot;</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='message identifier id'>message</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;Version&quot;</span>          <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='API_VERSION constant id'>API_VERSION</span> <span class='rbrace token'>}</span>
  <span class='service_hash identifier id'>service_hash</span><span class='dot token'>.</span><span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='param identifier id'>param</span><span class='rparen token'>)</span>
  <span class='comment val'>#</span>
  <span class='service_params identifier id'>service_params</span> <span class='assign token'>=</span> <span class='signed_service_params identifier id'>signed_service_params</span><span class='lparen token'>(</span><span class='@aws_secret_access_key ivar id'>@aws_secret_access_key</span><span class='comma token'>,</span> <span class='service_hash identifier id'>service_hash</span><span class='comma token'>,</span> <span class='symbol val'>:post</span><span class='comma token'>,</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:server</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='service identifier id'>service</span><span class='rparen token'>)</span>
  <span class='request identifier id'>request</span>        <span class='assign token'>=</span> <span class='Net constant id'>Net</span><span class='colon2 op'>::</span><span class='HTTP constant id'>HTTP</span><span class='colon2 op'>::</span><span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='AwsUtils constant id'>AwsUtils</span><span class='colon2 op'>::</span><span class='URLencode constant id'>URLencode</span><span class='lparen token'>(</span><span class='service identifier id'>service</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='request identifier id'>request</span><span class='lbrack token'>[</span><span class='string val'>'Content-Type'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>'application/x-www-form-urlencoded'</span> 
  <span class='request identifier id'>request</span><span class='dot token'>.</span><span class='body identifier id'>body</span> <span class='assign token'>=</span> <span class='service_params identifier id'>service_params</span>
    <span class='comment val'># prepare output hash</span>
  <span class='lbrace token'>{</span> <span class='symbol val'>:request</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='request identifier id'>request</span><span class='comma token'>,</span> 
    <span class='symbol val'>:server</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:server</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:port</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:port</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:protocol</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:protocol</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>generate_request</h3>
</div><div id="generate_request-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>generate_request</span><span class='args'>(action, param = )</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="10"></hr><pre class="code">
     <span class='Requests constant id'>Requests</span>
</pre>
<hr size="10"></hr><p>
Generates a request hash for the query API
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 94</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L94">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='action identifier id'>action</span><span class='comma token'>,</span> <span class='param identifier id'>param</span><span class='assign token'>=</span><span class='semicolon token'>;</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>  <span class='comment val'># :nodoc:</span>
  <span class='comment val'># For operation requests on a queue, the queue URI will be a parameter,</span>
  <span class='comment val'># so we first extract it from the call parameters.  Next we remove any</span>
  <span class='comment val'># parameters with no value or with symbolic keys.  We add the header</span>
  <span class='comment val'># fields required in all requests, and then the headers passed in as</span>
  <span class='comment val'># params.  We sort the header fields alphabetically and then generate the</span>
  <span class='comment val'># signature before URL escaping the resulting query and sending it.</span>
  <span class='service identifier id'>service</span> <span class='assign token'>=</span> <span class='param identifier id'>param</span><span class='lbrack token'>[</span><span class='symbol val'>:queue_url</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='URI constant id'>URI</span><span class='lparen token'>(</span><span class='param identifier id'>param</span><span class='lbrack token'>[</span><span class='symbol val'>:queue_url</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='colon op'>:</span> <span class='string val'>'/'</span>
  <span class='param identifier id'>param</span><span class='dot token'>.</span><span class='each identifier id'>each</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span> <span class='param identifier id'>param</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='orop op'>||</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Symbol constant id'>Symbol</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='service_hash identifier id'>service_hash</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;Action&quot;</span>           <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='action identifier id'>action</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;Expires&quot;</span>          <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span> <span class='plus op'>+</span> <span class='REQUEST_TTL constant id'>REQUEST_TTL</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='utc identifier id'>utc</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='string val'>&quot;%Y-%m-%dT%H:%M:%SZ&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;AWSAccessKeyId&quot;</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@aws_access_key_id ivar id'>@aws_access_key_id</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;Version&quot;</span>          <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='API_VERSION constant id'>API_VERSION</span> <span class='rbrace token'>}</span>
  <span class='service_hash identifier id'>service_hash</span><span class='dot token'>.</span><span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='param identifier id'>param</span><span class='rparen token'>)</span>
  <span class='service_params identifier id'>service_params</span> <span class='assign token'>=</span> <span class='signed_service_params identifier id'>signed_service_params</span><span class='lparen token'>(</span><span class='@aws_secret_access_key ivar id'>@aws_secret_access_key</span><span class='comma token'>,</span> <span class='service_hash identifier id'>service_hash</span><span class='comma token'>,</span> <span class='symbol val'>:get</span><span class='comma token'>,</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:server</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='service identifier id'>service</span><span class='rparen token'>)</span>
  <span class='request identifier id'>request</span>        <span class='assign token'>=</span> <span class='Net constant id'>Net</span><span class='colon2 op'>::</span><span class='HTTP constant id'>HTTP</span><span class='colon2 op'>::</span><span class='Get constant id'>Get</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{AwsUtils.URLencode(service)}?#{service_params}&quot;</span><span class='rparen token'>)</span>
    <span class='comment val'># prepare output hash</span>
  <span class='lbrace token'>{</span> <span class='symbol val'>:request</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='request identifier id'>request</span><span class='comma token'>,</span> 
    <span class='symbol val'>:server</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:server</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:port</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:port</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:protocol</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:protocol</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get_queue_attributes</h3>
</div><div id="get_queue_attributes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get_queue_attributes</span><span class='args'>(queue_url, attribute = 'All')</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Retrieves the queue attribute(s). Returns a hash of attribute(s) or an
exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='get_queue_attributes identifier id'>get_queue_attributes</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span>
 <span class='comment val'>#=&gt; &lt;tt&gt;&amp;quot;VisibilityTimeout&amp;quot;=&amp;gt;&amp;quot;30&amp;quot;&lt;/tt&gt;</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 197</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L197">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">197
198
199
200
201
202</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='get_queue_attributes identifier id'>get_queue_attributes</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='attribute identifier id'>attribute</span><span class='assign token'>=</span><span class='string val'>'All'</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'GetQueueAttributes'</span><span class='comma token'>,</span> <span class='string val'>'AttributeName'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='attribute identifier id'>attribute</span><span class='comma token'>,</span> <span class='symbol val'>:queue_url</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsGetQueueAttributesParser constant id'>SqsGetQueueAttributesParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get_queue_length</h3>
</div><div id="get_queue_length-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get_queue_length</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns approximate number of messages in queue.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='get_queue_length identifier id'>get_queue_length</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 3</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 321</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L321">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">321
322
323
324
325</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='get_queue_length identifier id'>get_queue_length</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='get_queue_attributes identifier id'>get_queue_attributes</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='string val'>'ApproximateNumberOfMessages'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>list_queues</h3>
</div><div id="list_queues-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>list_queues</span><span class='args'>(queue_name_prefix = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Lists all queues owned by this user that have names beginning with
<tt>queue_name_prefix</tt>. If <tt>queue_name_prefix</tt> is omitted then
retrieves a list of all queues. Queue creation is an eventual operation and
created queues may not show up in immediately subsequent list_queues calls.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='create_queue identifier id'>create_queue</span><span class='lparen token'>(</span><span class='string val'>'my_awesome_queue'</span><span class='rparen token'>)</span>
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='create_queue identifier id'>create_queue</span><span class='lparen token'>(</span><span class='string val'>'my_awesome_queue_2'</span><span class='rparen token'>)</span>
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='list_queues identifier id'>list_queues</span><span class='lparen token'>(</span><span class='string val'>'my_awesome'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; ['http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue','http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue_2']</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 169</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L169">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">169
170
171
172
173
174</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='list_queues identifier id'>list_queues</span><span class='lparen token'>(</span><span class='queue_name_prefix identifier id'>queue_name_prefix</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'ListQueues'</span><span class='comma token'>,</span> <span class='string val'>'QueueNamePrefix'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_name_prefix identifier id'>queue_name_prefix</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsListQueuesParser constant id'>SqsListQueuesParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>pop_message</h3>
</div><div id="pop_message-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>pop_message</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Pops (retrieves and deletes) first accessible message from queue. Returns
the message in format <tt><tt>:body=&amp;gt;&amp;#8217;message_body&amp;#8217;</tt></tt> or <tt>nil</tt>.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='pop_message identifier id'>pop_message</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt;</span>
   <span class='lt op'>&lt;</span><span class='tt identifier id'>tt</span><span class='gt op'>&gt;</span><span class='symbol val'>:body=</span><span class='bitand op'>&amp;</span><span class='gt identifier id'>gt</span><span class='semicolon token'>;</span><span class='bitand op'>&amp;</span><span class='quot identifier id'>quot</span><span class='semicolon token'>;</span><span class='message_1 identifier id'>message_1</span><span class='bitand op'>&amp;</span><span class='quot identifier id'>quot</span><span class='semicolon token'>;</span><span class='lt op'>&lt;</span><span class='regexp val'>/tt&gt;
</span></pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 359</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L359">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">359
360
361
362
363
364</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='pop_message identifier id'>pop_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='messages identifier id'>messages</span> <span class='assign token'>=</span> <span class='pop_messages identifier id'>pop_messages</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='messages identifier id'>messages</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span> <span class='integer val'>? </span><span class='nil nil kw'>nil</span> <span class='colon op'>:</span> <span class='messages identifier id'>messages</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>pop_messages</h3>
</div><div id="pop_messages-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>pop_messages</span><span class='args'>(queue_url, number_of_messages = 1)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Pops (retrieves and deletes) up to &#8216;number_of_messages&#8217; from
queue. Returns an array of retrieved messages in format:
<tt>[{:id=&gt;&#8217;message_id&#8217;,
:body=&gt;&#8217;message_body&#8217;}]</tt>.
</p>
<pre class="code">
  <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='pop_messages identifier id'>pop_messages</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='integer val'>3</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt;</span>
  <span class='lbrack token'>[</span><span class='lbrace token'>{</span><span class='string val'>&quot;ReceiptHandle&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;Euvo62/...+Zw==&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;MD5OfBody&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;16af2...81e3&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;Body&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;Goodbyte World!&quot;</span><span class='comma token'>,</span>
  <span class='string val'>&quot;MessageId&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;MEZI...JSWDE=&quot;</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='lt op'>&lt;</span><span class='tt identifier id'>tt</span><span class='gt op'>&gt;</span><span class='dot3 op'>...</span><span class='lt op'>&lt;</span><span class='regexp val'>/tt&gt;, ... , &lt;tt&gt;...&lt;/</span><span class='tt identifier id'>tt</span><span class='gt op'>&gt;</span> <span class='rbrack token'>]</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 344</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L344">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">344
345
346
347
348
349
350
351
352</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='pop_messages identifier id'>pop_messages</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='number_of_messages identifier id'>number_of_messages</span><span class='assign token'>=</span><span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='messages identifier id'>messages</span> <span class='assign token'>=</span> <span class='receive_message identifier id'>receive_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='number_of_messages identifier id'>number_of_messages</span><span class='rparen token'>)</span>
  <span class='messages identifier id'>messages</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='message identifier id'>message</span><span class='bitor op'>|</span>
    <span class='delete_message identifier id'>delete_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='message identifier id'>message</span><span class='lbrack token'>[</span><span class='string val'>'ReceiptHandle'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='messages identifier id'>messages</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>queue_name_by_url</h3>
</div><div id="queue_name_by_url-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>queue_name_by_url</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns short queue name by url.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 'my_awesome_queue'</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 311</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L311">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">311
312
313
314
315</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>queue_url_by_name</h3>
</div><div id="queue_url_by_name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>queue_url_by_name</span><span class='args'>(queue_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Given the queue&#8217;s short name, this call returns the queue URL or
<tt>nil</tt> if queue is not found
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='queue_url_by_name identifier id'>queue_url_by_name</span><span class='lparen token'>(</span><span class='string val'>'my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 286</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L286">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">286
287
288
289
290
291
292
293
294
295</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='queue_url_by_name identifier id'>queue_url_by_name</span><span class='lparen token'>(</span><span class='queue_name identifier id'>queue_name</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='queue_name identifier id'>queue_name</span> <span class='if if_mod kw'>if</span> <span class='queue_name identifier id'>queue_name</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span>
  <span class='queue_urls identifier id'>queue_urls</span> <span class='assign token'>=</span> <span class='list_queues identifier id'>list_queues</span><span class='lparen token'>(</span><span class='queue_name identifier id'>queue_name</span><span class='rparen token'>)</span>
  <span class='queue_urls identifier id'>queue_urls</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='queue_url identifier id'>queue_url</span><span class='bitor op'>|</span>
    <span class='return return kw'>return</span> <span class='queue_url identifier id'>queue_url</span> <span class='if if_mod kw'>if</span> <span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='queue_name identifier id'>queue_name</span>
  <span class='end end kw'>end</span>
  <span class='nil nil kw'>nil</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>receive_message</h3>
</div><div id="receive_message-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>receive_message</span><span class='args'>(queue_url, max_number_of_messages = 1, visibility_timeout = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Retrieves a list of messages from queue. Returns an array of hashes in
format: <tt><tt>body=&amp;gt;&amp;#8217;message_body&amp;#8217;</tt></tt>
</p>
<pre class="code">
  <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='receive_message identifier id'>receive_message</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span><span class='integer val'>10</span><span class='comma token'>,</span> <span class='integer val'>5</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt;</span>
   <span class='lbrack token'>[</span><span class='lbrace token'>{</span><span class='string val'>&quot;ReceiptHandle&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;Euvo62...kw==&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;MD5OfBody&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;16af2171b5b83cfa35ce254966ba81e3&quot;</span><span class='comma token'>,</span>
     <span class='string val'>&quot;Body&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;Goodbyte World!&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;MessageId&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;MUM4WlAyR...pYOTA=&quot;</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='dot3 op'>...</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rbrack token'>]</span>
</pre>
<p>
Normally this call returns fewer messages than the maximum specified, even
if they are available.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 233</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L233">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">233
234
235
236
237
238
239
240</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='receive_message identifier id'>receive_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='max_number_of_messages identifier id'>max_number_of_messages</span><span class='assign token'>=</span><span class='integer val'>1</span><span class='comma token'>,</span> <span class='visibility_timeout identifier id'>visibility_timeout</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='max_number_of_messages identifier id'>max_number_of_messages</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_post_request identifier id'>generate_post_request</span><span class='lparen token'>(</span><span class='string val'>'ReceiveMessage'</span><span class='comma token'>,</span> <span class='string val'>'MaxNumberOfMessages'</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='max_number_of_messages identifier id'>max_number_of_messages</span><span class='comma token'>,</span> <span class='string val'>'VisibilityTimeout'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='visibility_timeout identifier id'>visibility_timeout</span><span class='comma token'>,</span>
                                   <span class='symbol val'>:queue_url</span>          <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span> <span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsReceiveMessageParser constant id'>SqsReceiveMessageParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>request_info</h3>
</div><div id="request_info-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>request_info</span><span class='args'>(request, parser)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sends request to Amazon and parses the response Raises AwsError if any
banana happened
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 142</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L142">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">142
143
144
145
146</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='request identifier id'>request</span><span class='comma token'>,</span> <span class='parser identifier id'>parser</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='thread identifier id'>thread</span> <span class='assign token'>=</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:multi_thread</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='Thread constant id'>Thread</span><span class='dot token'>.</span><span class='current identifier id'>current</span> <span class='colon op'>:</span> <span class='Thread constant id'>Thread</span><span class='dot token'>.</span><span class='main identifier id'>main</span>
  <span class='thread identifier id'>thread</span><span class='lbrack token'>[</span><span class='symbol val'>:sqs_connection</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='Rightscale constant id'>Rightscale</span><span class='colon2 op'>::</span><span class='HttpConnection constant id'>HttpConnection</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:exception</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='AwsError constant id'>AwsError</span><span class='comma token'>,</span> <span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span>
  <span class='request_info_impl identifier id'>request_info_impl</span><span class='lparen token'>(</span><span class='thread identifier id'>thread</span><span class='lbrack token'>[</span><span class='symbol val'>:sqs_connection</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='@@bench ivar id'>@@bench</span><span class='comma token'>,</span> <span class='request identifier id'>request</span><span class='comma token'>,</span> <span class='parser identifier id'>parser</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>send_message</h3>
</div><div id="send_message-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>send_message</span><span class='args'>(queue_url, message)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="push_message-instance_method">push_message</tt>
  
</p>
</div><div class="section docstring">
  <p>
Sends a new message to a queue. Message size is limited to 8 KB. If
successful, this call returns a hash containing key/value pairs for
&quot;MessageId&quot; and &quot;MD5OfMessageBody&quot;:
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='send_message identifier id'>send_message</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='string val'>'message_1'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; &quot;1234567890...0987654321&quot;</span>
 <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='tt identifier id'>tt</span><span class='gt op'>&gt;</span><span class='bitand op'>&amp;</span><span class='quot identifier id'>quot</span><span class='semicolon token'>;</span><span class='MD5OfMessageBody constant id'>MD5OfMessageBody</span><span class='bitand op'>&amp;</span><span class='quot identifier id'>quot</span><span class='semicolon token'>;</span><span class='assign token'>=</span><span class='bitand op'>&amp;</span><span class='gt identifier id'>gt</span><span class='semicolon token'>;</span><span class='bitand op'>&amp;</span><span class='quot identifier id'>quot</span><span class='semicolon token'>;</span><span class='integer val'>16</span><span class='af2171b5b83cfa35ce254966ba81e3 identifier id'>af2171b5b83cfa35ce254966ba81e3</span><span class='bitand op'>&amp;</span><span class='quot identifier id'>quot</span><span class='semicolon token'>;</span><span class='lt op'>&lt;</span><span class='regexp val'>/tt&gt;
</span></pre>
<p>
On failure, send_message raises an exception.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 252</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L252">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">252
253
254
255
256
257</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='send_message identifier id'>send_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='message identifier id'>message</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_post_request identifier id'>generate_post_request</span><span class='lparen token'>(</span><span class='string val'>'SendMessage'</span><span class='comma token'>,</span> <span class='symbol val'>:message</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='message identifier id'>message</span><span class='comma token'>,</span> <span class='symbol val'>:queue_url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsSendMessagesParser constant id'>SqsSendMessagesParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_queue_attributes</h3>
</div><div id="set_queue_attributes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_queue_attributes</span><span class='args'>(queue_url, attribute, value)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sets queue attribute. Returns <tt>true</tt> or an exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='set_queue_attributes identifier id'>set_queue_attributes</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='string val'>&quot;VisibilityTimeout&quot;</span><span class='comma token'>,</span> <span class='integer val'>10</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>
<p>
From the SQS Dev Guide: &quot;Currently, you can set only the
VisibilityTimeout attribute for a queue&#8230; When you change a
queue&#8217;s attributes, the change can take up to 60 seconds to propagate
throughout the SQS system.&quot;
</p>
<p>
NB: Attribute values may not be immediately available to other queries for
some time after an update. See the SQS documentation for semantics, but in
general propagation can take up to 60 s.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_gen2_interface.rb', line 217</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/ianneub/right_aws/blob/f0bd614ae0c4ba263bb64c75e5226a694e538f1a/lib/sqs/right_sqs_gen2_interface.rb#L217">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">217
218
219
220
221
222</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_queue_attributes identifier id'>set_queue_attributes</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='attribute identifier id'>attribute</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'SetQueueAttributes'</span><span class='comma token'>,</span> <span class='string val'>'Attribute.Name'</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='attribute identifier id'>attribute</span><span class='comma token'>,</span> <span class='string val'>'Attribute.Value'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='value identifier id'>value</span><span class='comma token'>,</span> <span class='symbol val'>:queue_url</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsStatusParser constant id'>SqsStatusParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>