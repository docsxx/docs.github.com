<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>buildr's buildr - Class: Buildr::Checks::Expectation - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/buildr/commits/buildr/master" rel="alternate" title="Recent Commits to buildr:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("buildr", "buildr", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='buildr/buildr/blob/32766dc792461b51bf40e09fb9f07bf44a50f943' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='buildr/buildr/blob/32766dc792461b51bf40e09fb9f07bf44a50f943' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("buildr", "buildr", "32766dc792461b51bf40e09fb9f07bf44a50f943", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/buildr/buildr/tree/">Source</a></li>
            <li class=""><a href="http://github.com/buildr/buildr/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/buildr/buildr/network">Network</a></li>            
            <li class=""><a href="http://github.com/buildr/buildr/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/buildr/buildr">Wiki</a></li>
            <li class=""><a href="http://github.com/buildr/buildr/graphs">Graphs</a></li>                    
            <li class="active"><a href="/buildr/buildr">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/buildr">buildr</a> / <b><a href="http://github.com/buildr/buildr/tree">buildr</a></b>        
                <a id="namespaces_button" rel="buildr/buildr/blob/32766dc792461b51bf40e09fb9f07bf44a50f943" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="buildr/buildr/blob/32766dc792461b51bf40e09fb9f07bf44a50f943" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Buildr_Checks_Expectation">
  <h1>Class: Buildr::Checks::Expectation</h1>
  <div class="section inheritance">
  <ul>
  <li><a href="../../Object.html" title="Object">Object</a></li><ul><li>Buildr::Checks::Expectation</li>
  </ul></ul>
</div><div class="section docstring">
  <p>
An expectation has subject, description and block. The expectation is
validated by running the block, and can access the subject from the method
#it. The description is used for reporting.
</p>
<p>
The expectation is run by calling #run_against. You can share expectations
by running them against different projects (or any other context for that
matter).
</p>
<p>
If the subject is missing, it is set to the argument of #run_against,
typically the project itself. If the description is missing, it is set from
the project. If the block is missing, the default behavior prints
&quot;Pending&quot; followed by the description. You can use this to write
place holders and fill them later.
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">block</td>
          <td class="readwrite">
            [<span id='block-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>block</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">description</td>
          <td class="readwrite">
            [<span id='description-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>description</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">subject</td>
          <td class="readwrite">
            [<span id='subject-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>subject</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(*args, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq:
</p>
<pre class="code">
  <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='comma token'>,</span> <span class='description? fid id'>description?</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='dot3 op'>...</span><span class='dot token'>.</span> <span class='rbrace token'>}</span>
  <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='description? fid id'>description?</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='dot3 op'>...</span><span class='dot token'>.</span> <span class='rbrace token'>}</span>
</pre>
<p>
First argument is subject (returned from it method), second argument is
description. If you omit the description, it will be set from the subject.
If you omit the subject, it will be set from the object passed to
run_against.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>ArgumentError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/buildr/core/checks.rb', line 89</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/buildr/buildr/blob/32766dc792461b51bf40e09fb9f07bf44a50f943/lib/buildr/core/checks.rb#L89">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">89
90
91
92
93
94</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@description ivar id'>@description</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span> <span class='if if_mod kw'>if</span> <span class='String constant id'>String</span> <span class='eqq op'>===</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='last identifier id'>last</span>
  <span class='@subject ivar id'>@subject</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span>
  <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;Expecting subject followed by description, and either one is optional. Not quite sure what to do with this list of arguments.&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='@block ivar id'>@block</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span> <span class='orop op'>||</span> <span class='lambda identifier id'>lambda</span> <span class='lbrace token'>{</span> <span class='info identifier id'>info</span> <span class='dstring node'>&quot;Pending: #{description}&quot;</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#run_against-instance_method">#run_against</span><span class='args'>(context)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq:
</p>
<pre class="code">
  <span class='run_against identifier id'>run_against</span><span class='lparen token'>(</span><span class='context identifier id'>context</span><span class='rparen token'>)</span><span class='dot token'>.</span>
</pre>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>run_against</h3>
</div><div id="run_against-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>run_against</span><span class='args'>(context)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq:
</p>
<pre class="code">
  <span class='run_against identifier id'>run_against</span><span class='lparen token'>(</span><span class='context identifier id'>context</span><span class='rparen token'>)</span>
</pre>
<p>
Runs this expectation against the context object. The context object is
different from the subject, but used as the subject if no subject specified
(i.e. returned from the it method).
</p>
<p>
This method creates a new context object modeled after the context
argument, but a separate object used strictly for running this expectation,
and used only once. The context object will pass methods to the context
argument, so you can call any method, e.g. package(:jar).
</p>
<p>
It also adds all matchers defined in Buildr and RSpec, and two additional
methods:
</p>
<ul>
<li>it() &#8212; Returns the subject.

</li>
<li>description() &#8212; Returns the description.

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/buildr/core/checks.rb', line 109</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/buildr/buildr/blob/32766dc792461b51bf40e09fb9f07bf44a50f943/lib/buildr/core/checks.rb#L109">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='run_against identifier id'>run_against</span><span class='lparen token'>(</span><span class='context identifier id'>context</span><span class='rparen token'>)</span>
  <span class='subject identifier id'>subject</span> <span class='assign token'>=</span> <span class='@subject ivar id'>@subject</span> <span class='orop op'>||</span> <span class='context identifier id'>context</span>
  <span class='description identifier id'>description</span> <span class='assign token'>=</span> <span class='@description ivar id'>@description</span> <span class='question op'>?</span> <span class='dstring node'>&quot;#{subject} #{@description}&quot;</span> <span class='colon op'>:</span> <span class='subject identifier id'>subject</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='comment val'># Define anonymous class and load it with:</span>
  <span class='comment val'># - All instance methods defined in context, so we can pass method calls to the context.</span>
  <span class='comment val'># - it() method to return subject, description() method to return description.</span>
  <span class='comment val'># - All matchers defined by Buildr and RSpec.</span>
  <span class='klass identifier id'>klass</span> <span class='assign token'>=</span> <span class='Class constant id'>Class</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span> <span class='do do kw'>do</span>
    <span class='context identifier id'>context</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='instance_methods identifier id'>instance_methods</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='method identifier id'>method</span><span class='bitor op'>|</span>
      <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='bitor op'>|</span> <span class='context identifier id'>context</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span> <span class='unless unless_mod kw'>unless</span> <span class='instance_methods identifier id'>instance_methods</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='symbol val'>:it</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='subject identifier id'>subject</span> <span class='rbrace token'>}</span>
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='symbol val'>:description</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='description identifier id'>description</span> <span class='rbrace token'>}</span>
    <span class='include identifier id'>include</span> <span class='Spec constant id'>Spec</span><span class='colon2 op'>::</span><span class='Matchers constant id'>Matchers</span>
    <span class='include identifier id'>include</span> <span class='Matchers constant id'>Matchers</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Run the expectation. We only print the expectation name when tracing (to know they all ran),</span>
  <span class='comment val'># or when we get a failure.</span>
  <span class='begin begin kw'>begin</span>
    <span class='trace identifier id'>trace</span> <span class='description identifier id'>description</span>
    <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span> <span class='bitand op'>&amp;</span><span class='@block ivar id'>@block</span>
  <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='error identifier id'>error</span>
    <span class='raise identifier id'>raise</span> <span class='error identifier id'>error</span><span class='dot token'>.</span><span class='exception identifier id'>exception</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{description}\n#{error}&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='tap identifier id'>tap</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='wrapped identifier id'>wrapped</span><span class='bitor op'>|</span> <span class='wrapped identifier id'>wrapped</span><span class='dot token'>.</span><span class='set_backtrace identifier id'>set_backtrace</span><span class='lparen token'>(</span><span class='error identifier id'>error</span><span class='dot token'>.</span><span class='backtrace identifier id'>backtrace</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>