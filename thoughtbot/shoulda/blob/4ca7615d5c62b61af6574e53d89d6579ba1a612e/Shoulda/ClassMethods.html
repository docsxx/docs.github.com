<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>thoughtbot's shoulda - Module: Shoulda::ClassMethods - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/thoughtbot/commits/shoulda/master" rel="alternate" title="Recent Commits to shoulda:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("thoughtbot", "shoulda", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("thoughtbot", "shoulda", "4ca7615d5c62b61af6574e53d89d6579ba1a612e", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/thoughtbot/shoulda/tree/">Source</a></li>
            <li class=""><a href="http://github.com/thoughtbot/shoulda/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/thoughtbot/shoulda/network">Network</a></li>            
            <li class=""><a href="http://github.com/thoughtbot/shoulda/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/thoughtbot/shoulda">Wiki</a></li>
            <li class=""><a href="http://github.com/thoughtbot/shoulda/graphs">Graphs</a></li>                    
            <li class="active"><a href="/thoughtbot/shoulda">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/thoughtbot">thoughtbot</a> / <b><a href="http://github.com/thoughtbot/shoulda/tree">shoulda</a></b>        
                <a id="namespaces_button" rel="thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Shoulda_ClassMethods">
  <h1>Module: Shoulda::ClassMethods</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_should-instance_method">#before_should</span><span class='args'>(name, &amp;blk)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h2>Before statements.</h2>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#context-instance_method">#context</span><span class='args'>(name, &amp;blk)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h2>Contexts.</h2>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#described_type-instance_method">#described_type</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the class being tested, as determined by the test class name.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should-instance_method">#should</span><span class='args'>(name, options = {}, &amp;blk)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h2>Should statements.</h2>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_eventually-instance_method">#should_eventually</span><span class='args'>(name, options = {}, &amp;blk)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Just like should, but never runs, and instead prints an &#8216;X&#8217; in
the Test::Unit output.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#subject-instance_method">#subject</span><span class='args'>(&amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sets the return value of the subject instance method:.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#subject_block-instance_method">#subject_block</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>before_should</h3>
</div><div id="before_should-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_should</span><span class='args'>(name, &amp;blk)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h2>Before statements</h2>
<p>
Before statements are should statements that run before the current
context&#8217;s setup. These are especially useful when setting
expectations.
</p>
<h3>Example:</h3>
<pre class="code">
 <span class='class class kw'>class</span> <span class='UserControllerTest constant id'>UserControllerTest</span> <span class='lt op'>&lt;</span> <span class='Test constant id'>Test</span><span class='colon2 op'>::</span><span class='Unit constant id'>Unit</span><span class='colon2 op'>::</span><span class='TestCase constant id'>TestCase</span>
   <span class='context identifier id'>context</span> <span class='string val'>&quot;the index action&quot;</span> <span class='do do kw'>do</span>
     <span class='setup identifier id'>setup</span> <span class='do do kw'>do</span>
       <span class='@users ivar id'>@users</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='Factory constant id'>Factory</span><span class='lparen token'>(</span><span class='symbol val'>:user</span><span class='rparen token'>)</span><span class='rbrack token'>]</span>
       <span class='User constant id'>User</span><span class='dot token'>.</span><span class='stubs identifier id'>stubs</span><span class='lparen token'>(</span><span class='symbol val'>:find</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='returns identifier id'>returns</span><span class='lparen token'>(</span><span class='@users ivar id'>@users</span><span class='rparen token'>)</span>
     <span class='end end kw'>end</span>

     <span class='context identifier id'>context</span> <span class='string val'>&quot;on GET&quot;</span> <span class='do do kw'>do</span>
       <span class='setup identifier id'>setup</span> <span class='lbrace token'>{</span> <span class='get identifier id'>get</span> <span class='symbol val'>:index</span> <span class='rbrace token'>}</span>

       <span class='should_respond_with identifier id'>should_respond_with</span> <span class='symbol val'>:success</span>

       <span class='comment val'># runs before &quot;get :index&quot;</span>
       <span class='before_should identifier id'>before_should</span> <span class='string val'>&quot;find all users&quot;</span> <span class='do do kw'>do</span>
         <span class='User constant id'>User</span><span class='dot token'>.</span><span class='expects identifier id'>expects</span><span class='lparen token'>(</span><span class='symbol val'>:find</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='with identifier id'>with</span><span class='lparen token'>(</span><span class='symbol val'>:all</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='returns identifier id'>returns</span><span class='lparen token'>(</span><span class='@users ivar id'>@users</span><span class='rparen token'>)</span>
       <span class='end end kw'>end</span>
     <span class='end end kw'>end</span>
   <span class='end end kw'>end</span>
 <span class='end end kw'>end</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/context.rb', line 98</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e/lib/shoulda/context.rb#L98">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">98
99
100</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before_should identifier id'>before_should</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='blk identifier id'>blk</span><span class='rparen token'>)</span>
  <span class='should identifier id'>should</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='symbol val'>:before</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='blk identifier id'>blk</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='assert identifier id'>assert</span> <span class='true true kw'>true</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>context</h3>
</div><div id="context-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>context</span><span class='args'>(name, &amp;blk)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h2>Contexts</h2>
<p>
A context block groups should statements under a common set of
setup/teardown methods. Context blocks can be arbitrarily nested, and can
do wonders for improving the maintainability and readability of your test
code.
</p>
<p>
A context block can contain setup, should, should_eventually, and teardown
blocks.
</p>
<pre class="code">
 <span class='class class kw'>class</span> <span class='UserTest constant id'>UserTest</span> <span class='lt op'>&lt;</span> <span class='Test constant id'>Test</span><span class='colon2 op'>::</span><span class='Unit constant id'>Unit</span><span class='colon2 op'>::</span><span class='TestCase constant id'>TestCase</span>
   <span class='context identifier id'>context</span> <span class='string val'>&quot;A User instance&quot;</span> <span class='do do kw'>do</span>
     <span class='setup identifier id'>setup</span> <span class='do do kw'>do</span>
       <span class='@user ivar id'>@user</span> <span class='assign token'>=</span> <span class='User constant id'>User</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:first</span><span class='rparen token'>)</span>
     <span class='end end kw'>end</span>

     <span class='should identifier id'>should</span> <span class='string val'>&quot;return its full name&quot;</span>
       <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'John Doe'</span><span class='comma token'>,</span> <span class='@user ivar id'>@user</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span>
     <span class='end end kw'>end</span>
   <span class='end end kw'>end</span>
 <span class='end end kw'>end</span>
</pre>
<p>
This code will produce the method <tt>&quot;test: A User instance should
return its full name. &quot;</tt>.
</p>
<p>
Contexts may be nested. Nested contexts run their setup blocks from out to
in before each should statement. They then run their teardown blocks from
in to out after each should statement.
</p>
<pre class="code">
 <span class='class class kw'>class</span> <span class='UserTest constant id'>UserTest</span> <span class='lt op'>&lt;</span> <span class='Test constant id'>Test</span><span class='colon2 op'>::</span><span class='Unit constant id'>Unit</span><span class='colon2 op'>::</span><span class='TestCase constant id'>TestCase</span>
   <span class='context identifier id'>context</span> <span class='string val'>&quot;A User instance&quot;</span> <span class='do do kw'>do</span>
     <span class='setup identifier id'>setup</span> <span class='do do kw'>do</span>
       <span class='@user ivar id'>@user</span> <span class='assign token'>=</span> <span class='User constant id'>User</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:first</span><span class='rparen token'>)</span>
     <span class='end end kw'>end</span>

     <span class='should identifier id'>should</span> <span class='string val'>&quot;return its full name&quot;</span>
       <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'John Doe'</span><span class='comma token'>,</span> <span class='@user ivar id'>@user</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span>
     <span class='end end kw'>end</span>

     <span class='context identifier id'>context</span> <span class='string val'>&quot;with a profile&quot;</span> <span class='do do kw'>do</span>
       <span class='setup identifier id'>setup</span> <span class='do do kw'>do</span>
         <span class='@user ivar id'>@user</span><span class='dot token'>.</span><span class='profile identifier id'>profile</span> <span class='assign token'>=</span> <span class='Profile constant id'>Profile</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:first</span><span class='rparen token'>)</span>
       <span class='end end kw'>end</span>

       <span class='should identifier id'>should</span> <span class='string val'>&quot;return true when sent :has_profile?&quot;</span>
         <span class='assert identifier id'>assert</span> <span class='@user ivar id'>@user</span><span class='dot token'>.</span><span class='has_profile? fid id'>has_profile?</span>
       <span class='end end kw'>end</span>
     <span class='end end kw'>end</span>
   <span class='end end kw'>end</span>
 <span class='end end kw'>end</span>
</pre>
<p>
This code will produce the following methods
</p>
<ul>
<li><tt>&quot;test: A User instance should return its full name. &quot;</tt>

</li>
<li><tt>&quot;test: A User instance with a profile should return true when sent
:has_profile?. &quot;</tt>

</li>
</ul>
<p>
<b>Just like should statements, a context block can exist next to normal
<tt>def test_the_old_way; end</tt> tests</b>. This means you do not have to
fully commit to the context/should syntax in a test file.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/context.rb', line 165</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e/lib/shoulda/context.rb#L165">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">165
166
167
168
169
170
171
172</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='context identifier id'>context</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='blk identifier id'>blk</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='Shoulda constant id'>Shoulda</span><span class='dot token'>.</span><span class='current_context identifier id'>current_context</span>
    <span class='Shoulda constant id'>Shoulda</span><span class='dot token'>.</span><span class='current_context identifier id'>current_context</span><span class='dot token'>.</span><span class='context identifier id'>context</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='blk identifier id'>blk</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='context identifier id'>context</span> <span class='assign token'>=</span> <span class='Shoulda constant id'>Shoulda</span><span class='colon2 op'>::</span><span class='Context constant id'>Context</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='blk identifier id'>blk</span><span class='rparen token'>)</span>
    <span class='context identifier id'>context</span><span class='dot token'>.</span><span class='build identifier id'>build</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>described_type</h3>
</div><div id="described_type-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>described_type</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the class being tested, as determined by the test class name.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='UserTest constant id'>UserTest</span><span class='semicolon token'>;</span> <span class='described_type identifier id'>described_type</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span>
  <span class='comment val'># =&gt; User</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/context.rb', line 178</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e/lib/shoulda/context.rb#L178">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">178
179
180</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='described_type identifier id'>described_type</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/Test$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='constantize identifier id'>constantize</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should</h3>
</div><div id="should-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should</span><span class='args'>(name, options = {}, &amp;blk)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h2>Should statements</h2>
<p>
Should statements are just syntactic sugar over normal Test::Unit test
methods. A should block contains all the normal code and assertions
you&#8217;re used to seeing, with the added benefit that they can be
wrapped inside context blocks (see below).
</p>
<h3>Example:</h3>
<pre class="code">
 <span class='class class kw'>class</span> <span class='UserTest constant id'>UserTest</span> <span class='lt op'>&lt;</span> <span class='Test constant id'>Test</span><span class='colon2 op'>::</span><span class='Unit constant id'>Unit</span><span class='colon2 op'>::</span><span class='TestCase constant id'>TestCase</span>

   <span class='def def kw'>def</span> <span class='setup identifier id'>setup</span>
     <span class='@user ivar id'>@user</span> <span class='assign token'>=</span> <span class='User constant id'>User</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;John&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;Doe&quot;</span><span class='rparen token'>)</span>
   <span class='end end kw'>end</span>

   <span class='should identifier id'>should</span> <span class='string val'>&quot;return its full name&quot;</span>
     <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'John Doe'</span><span class='comma token'>,</span> <span class='@user ivar id'>@user</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span>
   <span class='end end kw'>end</span>

 <span class='end end kw'>end</span>
</pre>
<p>
&#8230;will produce the following test:
</p>
<ul>
<li><tt>&quot;test: User should return its full name. &quot;</tt>

</li>
</ul>
<p>
Note: The part before <tt>should</tt> in the test name is gleamed from the
name of the Test::Unit class.
</p>
<p>
Should statements can also take a Proc as a <tt>:before </tt>option. This
proc runs after any parent context&#8217;s setups but before the current
context&#8217;s setup.
</p>
<h3>Example:</h3>
<pre class="code">
 <span class='context identifier id'>context</span> <span class='string val'>&quot;Some context&quot;</span> <span class='do do kw'>do</span>
   <span class='setup identifier id'>setup</span> <span class='lbrace token'>{</span> <span class='puts identifier id'>puts</span><span class='lparen token'>(</span><span class='string val'>&quot;I run after the :before proc&quot;</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

   <span class='should identifier id'>should</span> <span class='string val'>&quot;run a :before proc&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:before</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lambda identifier id'>lambda</span> <span class='lbrace token'>{</span> <span class='puts identifier id'>puts</span><span class='lparen token'>(</span><span class='string val'>&quot;I run before the setup&quot;</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>  <span class='do do kw'>do</span>
     <span class='assert identifier id'>assert</span> <span class='true true kw'>true</span>
   <span class='end end kw'>end</span>
 <span class='end end kw'>end</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/context.rb', line 60</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e/lib/shoulda/context.rb#L60">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">60
61
62
63
64
65
66
67
68
69
70</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should identifier id'>should</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='blk identifier id'>blk</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='Shoulda constant id'>Shoulda</span><span class='dot token'>.</span><span class='current_context identifier id'>current_context</span>
    <span class='block_given? fid id'>block_given?</span> <span class='integer val'>? </span><span class='Shoulda constant id'>Shoulda</span><span class='dot token'>.</span><span class='current_context identifier id'>current_context</span><span class='dot token'>.</span><span class='should identifier id'>should</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='blk identifier id'>blk</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='Shoulda constant id'>Shoulda</span><span class='dot token'>.</span><span class='current_context identifier id'>current_context</span><span class='dot token'>.</span><span class='should_eventually identifier id'>should_eventually</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='context_name identifier id'>context_name</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/Test/</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='context identifier id'>context</span> <span class='assign token'>=</span> <span class='Shoulda constant id'>Shoulda</span><span class='colon2 op'>::</span><span class='Context constant id'>Context</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='context_name identifier id'>context_name</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
      <span class='block_given? fid id'>block_given?</span> <span class='integer val'>? </span><span class='should identifier id'>should</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='blk identifier id'>blk</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='should_eventually identifier id'>should_eventually</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='context identifier id'>context</span><span class='dot token'>.</span><span class='build identifier id'>build</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_eventually</h3>
</div><div id="should_eventually-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_eventually</span><span class='args'>(name, options = {}, &amp;blk)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Just like should, but never runs, and instead prints an &#8216;X&#8217; in
the Test::Unit output.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/context.rb', line 103</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e/lib/shoulda/context.rb#L103">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">103
104
105
106
107
108
109</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_eventually identifier id'>should_eventually</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='blk identifier id'>blk</span><span class='rparen token'>)</span>
  <span class='context_name identifier id'>context_name</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/Test/</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
  <span class='context identifier id'>context</span> <span class='assign token'>=</span> <span class='Shoulda constant id'>Shoulda</span><span class='colon2 op'>::</span><span class='Context constant id'>Context</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='context_name identifier id'>context_name</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='should_eventually identifier id'>should_eventually</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='blk identifier id'>blk</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='context identifier id'>context</span><span class='dot token'>.</span><span class='build identifier id'>build</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>subject</h3>
</div><div id="subject-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>subject</span><span class='args'>(&amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sets the return value of the subject instance method:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='UserTest constant id'>UserTest</span> <span class='lt op'>&lt;</span> <span class='Test constant id'>Test</span><span class='colon2 op'>::</span><span class='Unit constant id'>Unit</span><span class='colon2 op'>::</span><span class='TestCase constant id'>TestCase</span>
    <span class='subject identifier id'>subject</span> <span class='lbrace token'>{</span> <span class='User constant id'>User</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='rbrace token'>}</span>

    <span class='comment val'># uses the existing user</span>
    <span class='should_validate_uniqueness_of identifier id'>should_validate_uniqueness_of</span> <span class='symbol val'>:email</span>
  <span class='end end kw'>end</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/context.rb', line 190</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e/lib/shoulda/context.rb#L190">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">190
191
192</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='subject identifier id'>subject</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@subject_block ivar id'>@subject_block</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>subject_block</h3>
</div><div id="subject_block-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>subject_block</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/shoulda/context.rb', line 194</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/shoulda/blob/4ca7615d5c62b61af6574e53d89d6579ba1a612e/lib/shoulda/context.rb#L194">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">194
195
196</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='subject_block identifier id'>subject_block</span> 
  <span class='@subject_block ivar id'>@subject_block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>