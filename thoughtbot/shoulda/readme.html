<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="syntax_highlight.css" type="text/css" charset="utf-8" />

    <title>README</title>
  </head>
  <body>
    <div id="content">
      <div class="section docstring readme">
        <h1>Shoulda - Making tests easy on the fingers and eyes</h1>
<p>
Shoulda makes it easy to write elegant, understandable, and maintainable
tests. Shoulda consists of test macros, assertions, and helpers added on to
the Test::Unit framework. It&#8217;s fully compatible with your existing
tests, and requires no retooling to use.
</p>
<table>
<tr><td valign="top">Helpers:</td><td>#context and #should give you RSpec like test blocks. In addition, you get
nested contexts and a much more readable syntax.

</td></tr>
<tr><td valign="top">Macros:</td><td>Generate hundreds of lines of Controller and ActiveRecord tests with these
powerful macros. They get you started quickly, and can help you ensure that
your application is conforming to best practices.

</td></tr>
<tr><td valign="top">Assertions:</td><td>Many common rails testing idioms have been distilled into a set of useful
assertions.

</td></tr>
<tr><td valign="top">Matchers:</td><td>Rspec-compatible matchers providing the same tests as Shoulda macros.

</td></tr>
</table>
<h1>Usage</h1>
<h3>Context Helpers (Shoulda::Context)</h3>
<p>
Stop killing your fingers with all of those underscores&#8230; Name your
tests with plain sentences!
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='UserTest constant id'>UserTest</span> <span class='lt op'>&lt;</span> <span class='Test constant id'>Test</span><span class='colon2 op'>::</span><span class='Unit constant id'>Unit</span><span class='colon2 op'>::</span><span class='TestCase constant id'>TestCase</span>
    <span class='context identifier id'>context</span> <span class='string val'>&quot;A User instance&quot;</span> <span class='do do kw'>do</span>
      <span class='setup identifier id'>setup</span> <span class='do do kw'>do</span>
        <span class='@user ivar id'>@user</span> <span class='assign token'>=</span> <span class='User constant id'>User</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:first</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

      <span class='should identifier id'>should</span> <span class='string val'>&quot;return its full name&quot;</span> <span class='do do kw'>do</span>
        <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'John Doe'</span><span class='comma token'>,</span> <span class='@user ivar id'>@user</span><span class='dot token'>.</span><span class='full_name identifier id'>full_name</span>
      <span class='end end kw'>end</span>

      <span class='context identifier id'>context</span> <span class='string val'>&quot;with a profile&quot;</span> <span class='do do kw'>do</span>
        <span class='setup identifier id'>setup</span> <span class='do do kw'>do</span>
          <span class='@user ivar id'>@user</span><span class='dot token'>.</span><span class='profile identifier id'>profile</span> <span class='assign token'>=</span> <span class='Profile constant id'>Profile</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:first</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>

        <span class='should identifier id'>should</span> <span class='string val'>&quot;return true when sent #has_profile?&quot;</span> <span class='do do kw'>do</span>
          <span class='assert identifier id'>assert</span> <span class='@user ivar id'>@user</span><span class='dot token'>.</span><span class='has_profile? fid id'>has_profile?</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Produces the following test methods:
</p>
<pre class="code">
  <span class='string val'>&quot;test: A User instance should return its full name.&quot;</span>
  <span class='string val'>&quot;test: A User instance with a profile should return true when sent #has_profile?.&quot;</span>
</pre>
<p>
So readable!
</p>
<h3>ActiveRecord Tests (Shoulda::ActiveRecord::Macros)</h3>
<p>
Quick macro tests for your ActiveRecord associations and validations:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='PostTest constant id'>PostTest</span> <span class='lt op'>&lt;</span> <span class='Test constant id'>Test</span><span class='colon2 op'>::</span><span class='Unit constant id'>Unit</span><span class='colon2 op'>::</span><span class='TestCase constant id'>TestCase</span>
    <span class='fixtures identifier id'>fixtures</span> <span class='symbol val'>:all</span>

    <span class='should_belong_to identifier id'>should_belong_to</span> <span class='symbol val'>:user</span>
    <span class='should_have_many identifier id'>should_have_many</span> <span class='symbol val'>:tags</span><span class='comma token'>,</span> <span class='symbol val'>:through</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:taggings</span>

    <span class='should_validate_uniqueness_of identifier id'>should_validate_uniqueness_of</span> <span class='symbol val'>:title</span>
    <span class='should_validate_presence_of identifier id'>should_validate_presence_of</span> <span class='symbol val'>:body</span><span class='comma token'>,</span> <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='regexp val'>/wtf/</span>
    <span class='should_validate_presence_of identifier id'>should_validate_presence_of</span> <span class='symbol val'>:title</span>
    <span class='should_validate_numericality_of identifier id'>should_validate_numericality_of</span> <span class='symbol val'>:user_id</span>
  <span class='end end kw'>end</span>

  <span class='class class kw'>class</span> <span class='UserTest constant id'>UserTest</span> <span class='lt op'>&lt;</span> <span class='Test constant id'>Test</span><span class='colon2 op'>::</span><span class='Unit constant id'>Unit</span><span class='colon2 op'>::</span><span class='TestCase constant id'>TestCase</span>
    <span class='should_have_many identifier id'>should_have_many</span> <span class='symbol val'>:posts</span>

    <span class='should_not_allow_values_for identifier id'>should_not_allow_values_for</span> <span class='symbol val'>:email</span><span class='comma token'>,</span> <span class='string val'>&quot;blah&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;b lah&quot;</span>
    <span class='should_allow_values_for identifier id'>should_allow_values_for</span> <span class='symbol val'>:email</span><span class='comma token'>,</span> <span class='string val'>&quot;a@b.com&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;asdf@asdf.com&quot;</span>
    <span class='should_ensure_length_in_range identifier id'>should_ensure_length_in_range</span> <span class='symbol val'>:email</span><span class='comma token'>,</span> <span class='float val'>1</span><span class='dot2 op'>..</span><span class='integer val'>100</span>
    <span class='should_ensure_value_in_range identifier id'>should_ensure_value_in_range</span> <span class='symbol val'>:age</span><span class='comma token'>,</span> <span class='float val'>1</span><span class='dot2 op'>..</span><span class='integer val'>100</span>
    <span class='should_not_allow_mass_assignment_of identifier id'>should_not_allow_mass_assignment_of</span> <span class='symbol val'>:password</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Makes TDD so much easier.
</p>
<h3>Controller Tests (Shoulda::Controller::Macros)</h3>
<p>
Macros to test the most common controller patterns&#8230;
</p>
<pre class="code">
  <span class='context identifier id'>context</span> <span class='string val'>&quot;on GET to :show for first record&quot;</span> <span class='do do kw'>do</span>
    <span class='setup identifier id'>setup</span> <span class='do do kw'>do</span>
      <span class='get identifier id'>get</span> <span class='symbol val'>:show</span><span class='comma token'>,</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span>
    <span class='end end kw'>end</span>

    <span class='should_assign_to identifier id'>should_assign_to</span> <span class='symbol val'>:user</span>
    <span class='should_respond_with identifier id'>should_respond_with</span> <span class='symbol val'>:success</span>
    <span class='should_render_template identifier id'>should_render_template</span> <span class='symbol val'>:show</span>
    <span class='should_not_set_the_flash identifier id'>should_not_set_the_flash</span>

    <span class='should identifier id'>should</span> <span class='string val'>&quot;do something else really cool&quot;</span> <span class='do do kw'>do</span>
      <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='assigns identifier id'>assigns</span><span class='lparen token'>(</span><span class='symbol val'>:user</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='id identifier id'>id</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<h3>Helpful Assertions (Shoulda::Assertions)</h3>
<p>
More to come here, but have fun with what&#8217;s there.
</p>
<pre class="code">
  <span class='assert_same_elements identifier id'>assert_same_elements</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:a</span><span class='comma token'>,</span> <span class='symbol val'>:b</span><span class='comma token'>,</span> <span class='symbol val'>:c</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='symbol val'>:c</span><span class='comma token'>,</span> <span class='symbol val'>:a</span><span class='comma token'>,</span> <span class='symbol val'>:b</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='assert_contains identifier id'>assert_contains</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='string val'>'a'</span><span class='comma token'>,</span> <span class='string val'>'1'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='regexp val'>/\d/</span><span class='rparen token'>)</span>
  <span class='assert_contains identifier id'>assert_contains</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='string val'>'a'</span><span class='comma token'>,</span> <span class='string val'>'1'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>'a'</span><span class='rparen token'>)</span>
</pre>
<h3>3rd Party and Application Specific Macros</h3>
<p>
Any *.rb file under RAILS_ROOT/test/shoulda_macros/ or
vendor/(plugins|gems)/gem_name/shoulda_macros/ will be automatically
required when you run your tests. This allows you to distribute macros with
your plugins, or to organize the macros inside your application. Remember
to add your macro to Test::Unit::TestCase in the macro file:
</p>
<pre class="code">
  <span class='comment val'># test/shoulda_macros/security.rb</span>
  <span class='class class kw'>class</span> <span class='Test constant id'>Test</span><span class='colon2 op'>::</span><span class='Unit constant id'>Unit</span><span class='colon2 op'>::</span><span class='TestCase constant id'>TestCase</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='should_be_denied identifier id'>should_be_denied</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
      <span class='should_set_the_flash_to identifier id'>should_set_the_flash_to</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:flash</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='regexp val'>/Please log in/i</span><span class='rparen token'>)</span>
      <span class='should_redirect_to identifier id'>should_redirect_to</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:redirect</span><span class='rbrack token'>]</span>   <span class='orop op'>||</span> <span class='string val'>'login_url'</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<h1>Rails Installation (Test::Unit)</h1>
<h3>As a Gem</h3>
<p>
Use this if you prefer to use versioned releases of shoulda. Specify the
gem dependency in your config/environment.rb file:
</p>
<pre class="code">
  <span class='Rails constant id'>Rails</span><span class='colon2 op'>::</span><span class='Initializer constant id'>Initializer</span><span class='dot token'>.</span><span class='run identifier id'>run</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='config identifier id'>config</span><span class='bitor op'>|</span>
    <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>&quot;thoughtbot-shoulda&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:lib</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;shoulda&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:source</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://gems.github.com&quot;</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Then:
</p>
<pre class="code">
  $ <span class='rake identifier id'>rake</span> <span class='gems identifier id'>gems</span><span class='symbol val'>:install</span>
  $ <span class='rake identifier id'>rake</span> <span class='gems identifier id'>gems</span><span class='symbol val'>:unpack</span>
</pre>
<h3>As a Plugin</h3>
<p>
Use this if you prefer to use the edge version of shoulda:
</p>
<pre class="code">
  $ <span class='script identifier id'>script</span><span class='div op'>/</span><span class='plugin identifier id'>plugin</span> <span class='install identifier id'>install</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/</span><span class='thoughtbot identifier id'>thoughtbot</span><span class='div op'>/</span><span class='shoulda identifier id'>shoulda</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
</pre>
<h3>As a Plugin (using git submodules)</h3>
<p>
Use this if you prefer the idea of being able to easily switch between
using edge or a tagged version of shoulda:
</p>
<pre class="code">
  $ <span class='git identifier id'>git</span> <span class='submodule identifier id'>submodule</span> <span class='add identifier id'>add</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/</span><span class='thoughtbot identifier id'>thoughtbot</span><span class='div op'>/</span><span class='shoulda identifier id'>shoulda</span><span class='dot token'>.</span><span class='git identifier id'>git</span> <span class='vendor identifier id'>vendor</span><span class='div op'>/</span><span class='plugins identifier id'>plugins</span><span class='div op'>/</span><span class='shoulda identifier id'>shoulda</span>
</pre>
<h1>Rails Installation (RSpec)</h1>
<p>
If you&#8217;re using Shoulda with RSpec, we recommend that you add
config.gem lines for RSpec and Shoulda in your config/environment/test.rb
file, but do not ask Rails to load the RSpec and Shoulda libraries:
</p>
<pre class="code">
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>'rspec'</span><span class='comma token'>,</span> <span class='symbol val'>:lib</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>'rspec-rails'</span><span class='comma token'>,</span> <span class='symbol val'>:lib</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>'thoughtbot-shoulda'</span><span class='comma token'>,</span>
             <span class='symbol val'>:lib</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span>
             <span class='symbol val'>:source</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'http://gems.github.com'</span>
</pre>
<p>
Then require shoulda from your spec/spec_helper.rb file, before
Spec::Runner is configured:
</p>
<pre class="code">
  <span class='comment val'># requires for RSpec</span>
  <span class='require identifier id'>require</span> <span class='string val'>'shoulda'</span>
  <span class='Spec constant id'>Spec</span><span class='colon2 op'>::</span><span class='Runner constant id'>Runner</span><span class='dot token'>.</span><span class='configure identifier id'>configure</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='config identifier id'>config</span><span class='bitor op'>|</span>
  <span class='comment val'># ...</span>
</pre>
<p>
You should not need to require anything besides the top-level shoulda
library.
</p>
<h1>Credits</h1>
<p>
Shoulda is maintained by {Tammer Saleh}[mailto:tsaleh@thoughtbot.com], and
is funded by Thoughtbot[http://www.thoughtbot.com], inc.
</p>
<h1>License</h1>
<p>
Shoulda is Copyright © 2006-2008 Tammer Saleh, Thoughtbot. It is free
software, and may be redistributed under the terms specified in the
MIT-LICENSE file.
</p>

      </div>
    </div>
  </body>
</html>