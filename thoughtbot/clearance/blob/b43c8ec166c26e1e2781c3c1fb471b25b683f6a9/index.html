<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>thoughtbot's clearance - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/thoughtbot/commits/clearance/master" rel="alternate" title="Recent Commits to clearance:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("thoughtbot", "clearance", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='thoughtbot/clearance/blob/b43c8ec166c26e1e2781c3c1fb471b25b683f6a9' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='thoughtbot/clearance/blob/b43c8ec166c26e1e2781c3c1fb471b25b683f6a9' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("thoughtbot", "clearance", "b43c8ec166c26e1e2781c3c1fb471b25b683f6a9", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/thoughtbot/clearance/tree/">Source</a></li>
            <li class=""><a href="http://github.com/thoughtbot/clearance/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/thoughtbot/clearance/network">Network</a></li>            
            <li class=""><a href="http://github.com/thoughtbot/clearance/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/thoughtbot/clearance">Wiki</a></li>
            <li class=""><a href="http://github.com/thoughtbot/clearance/graphs">Graphs</a></li>                    
            <li class="active"><a href="/thoughtbot/clearance">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/thoughtbot">thoughtbot</a> / <b><a href="http://github.com/thoughtbot/clearance/tree">clearance</a></b>        
                <a id="namespaces_button" rel="thoughtbot/clearance/blob/b43c8ec166c26e1e2781c3c1fb471b25b683f6a9" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="thoughtbot/clearance/blob/b43c8ec166c26e1e2781c3c1fb471b25b683f6a9" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Clearance</h1>
<p>Rails authentication with email &amp; password.</p>
<p><a href="http://www.youtube.com/v/mNRXJEE3Nz8">We have clearance, Clarence.</a></p>
<h2>Wiki</h2>
<p>Most information regarding Clearance is on the <a href="http://wiki.github.com/thoughtbot/clearance">Github Wiki</a>.</p>
<h2>Installation</h2>
<p>Clearance is a Rails engine. It works with versions of Rails greater than 2.3.</p>
<p>In config/environment.rb:</p>
<pre class="code">
<span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>&quot;thoughtbot-clearance&quot;</span><span class='comma token'>,</span> 
  <span class='symbol val'>:lib</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'clearance'</span><span class='comma token'>,</span> 
  <span class='symbol val'>:source</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'http://gems.github.com'</span><span class='comma token'>,</span> 
  <span class='symbol val'>:version</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'0.7.0'</span>
</pre>
<p>Vendor the gem:</p>
<pre class="code">
<span class='rake identifier id'>rake</span> <span class='gems identifier id'>gems</span><span class='symbol val'>:install</span>
<span class='rake identifier id'>rake</span> <span class='gems identifier id'>gems</span><span class='symbol val'>:unpack</span>
</pre>
<p>Make sure the development database exists and run the generator:</p>
<p><code>script/generate clearance</code></p>
<p>A number of files will be created and instructions will be printed.</p>
<p>You may already have some of these files. Don&#8217;t worry. You&#8217;ll be asked if you want to overwrite them.</p>
<p>Run the migration:</p>
<p><code>rake db:migrate</code></p>
<p>Define a <span class="caps">HOST</span> constant in your environment files.<br />
In config/environments/test.rb and config/environments/development.rb it can be:</p>
<p><code>HOST = "localhost"</code></p>
<p>In production.rb it must be the actual host your application is deployed to.<br />
The constant is used by mailers to generate URLs in emails.</p>
<p>In config/environment.rb:</p>
<p><code>DO_NOT_REPLY = "donotreply</code>example.com&quot;@</p>
<p>Define root_url to <strong>something</strong> in your config/routes.rb:</p>
<p><code>map.root :controller =&gt; 'home'</code></p>
<h2>Cucumber Features</h2>
<p>As your app evolves, you want to know that authentication still works. Clearance&#8217;s opinion is that you should test its integration with your app using <a href="http://cukes.info/">Cucumber</a>.</p>
<p>In config/environments/test.rb:</p>
<pre class="code">
<span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>'webrat'</span><span class='comma token'>,</span>
  <span class='symbol val'>:version</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'&gt;= 0.4.4'</span>
<span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>'cucumber'</span><span class='comma token'>,</span>
  <span class='symbol val'>:version</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'&gt;= 0.3.0'</span>
<span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>'thoughtbot-factory_girl'</span><span class='comma token'>,</span>
  <span class='symbol val'>:lib</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'factory_girl'</span><span class='comma token'>,</span>
  <span class='symbol val'>:source</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://gems.github.com&quot;</span><span class='comma token'>,</span> 
  <span class='symbol val'>:version</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'1.2.1'</span>
</pre>
<p>Vendor the gems:</p>
<pre class="code">
<span class='rake identifier id'>rake</span> <span class='gems identifier id'>gems</span><span class='symbol val'>:install</span> <span class='RAILS_ENV constant id'>RAILS_ENV</span><span class='assign token'>=</span><span class='test identifier id'>test</span>
<span class='rake identifier id'>rake</span> <span class='gems identifier id'>gems</span><span class='symbol val'>:unpack</span>  <span class='RAILS_ENV constant id'>RAILS_ENV</span><span class='assign token'>=</span><span class='test identifier id'>test</span>
</pre>
<p>We don&#8217;t vendor nokogiri due to its native extensions, so install it normally on your machine:</p>
<p><code>sudo gem install nokogiri</code></p>
<p>Run the Cucumber generator (if you haven&#8217;t already) and Clearance&#8217;s feature generator:</p>
<pre class="code">
<span class='script identifier id'>script</span><span class='div op'>/</span><span class='generate identifier id'>generate</span> <span class='cucumber identifier id'>cucumber</span>
<span class='script identifier id'>script</span><span class='div op'>/</span><span class='generate identifier id'>generate</span> <span class='clearance_features identifier id'>clearance_features</span>
</pre>
<p>All of the files generated should be new with the exception of the features/support/paths.rb file. If you have not modified your paths.rb then you will be okay to replace it with this one. If you need to keep your paths.rb file then add these locations in your paths.rb manually:</p>
<pre class="code">
<span class='def def kw'>def</span> <span class='path_to identifier id'>path_to</span><span class='lparen token'>(</span><span class='page_name identifier id'>page_name</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='page_name identifier id'>page_name</span>
   <span class='dot3 op'>...</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/the sign up page/i</span>
   <span class='new_user_path identifier id'>new_user_path</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/the sign in page/i</span>
   <span class='new_session_path identifier id'>new_session_path</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/the password reset request page/i</span>
   <span class='new_password_path identifier id'>new_password_path</span>
  <span class='dot3 op'>...</span>
<span class='end end kw'>end</span>
</pre>
<h2>Authors</h2>
<p>Clearance was extracted out of <a href="http://hoptoadapp.com">Hoptoad</a>. We merged the authentication code from two of thoughtbot&#8217;s clients&#8217; Rails apps and have since used it each time we need authentication. The following people have improved the library. Thank you!</p>
<p>Dan Croak, Mike Burns, Jason Morrison, Joe Ferris, Eugene Bolshakov, Nick Quaranto, Josh Nichols, Mike Breen, Marcel Görner, Bence Nagy, Ben Mabey, Eloy Duran, Tim Pope, Mihai Anca, Mark Cornick, Shay Arnett, Joshua Clayton &amp; Mustafa Ekim.</p>
<h2>Questions?</h2>
<p>Ask the <a href="http://groups.google.com/group/thoughtbot-clearance">mailing list</a></p>
<h2>Suggestions, Bugs, Refactoring?</h2>
<p>Fork away and create a <a href="http://github.com/thoughtbot/clearance/issues">Github Issue</a>. Please don&#8217;t send pull requests.</p>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>