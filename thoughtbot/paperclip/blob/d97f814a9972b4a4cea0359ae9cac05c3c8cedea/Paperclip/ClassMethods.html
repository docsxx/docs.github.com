<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>thoughtbot's paperclip - Module: Paperclip::ClassMethods - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/thoughtbot/commits/paperclip/master" rel="alternate" title="Recent Commits to paperclip:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("thoughtbot", "paperclip", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='thoughtbot/paperclip/blob/d97f814a9972b4a4cea0359ae9cac05c3c8cedea' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='thoughtbot/paperclip/blob/d97f814a9972b4a4cea0359ae9cac05c3c8cedea' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("thoughtbot", "paperclip", "d97f814a9972b4a4cea0359ae9cac05c3c8cedea", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/thoughtbot/paperclip/tree/">Source</a></li>
            <li class=""><a href="http://github.com/thoughtbot/paperclip/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/thoughtbot/paperclip/network">Network</a></li>            
            <li class=""><a href="http://github.com/thoughtbot/paperclip/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/thoughtbot/paperclip">Wiki</a></li>
            <li class=""><a href="http://github.com/thoughtbot/paperclip/graphs">Graphs</a></li>                    
            <li class="active"><a href="/thoughtbot/paperclip">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/thoughtbot">thoughtbot</a> / <b><a href="http://github.com/thoughtbot/paperclip/tree">paperclip</a></b>        
                <a id="namespaces_button" rel="thoughtbot/paperclip/blob/d97f814a9972b4a4cea0359ae9cac05c3c8cedea" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="thoughtbot/paperclip/blob/d97f814a9972b4a4cea0359ae9cac05c3c8cedea" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Paperclip_ClassMethods">
  <h1>Module: Paperclip::ClassMethods</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="ClassMethods/InstanceMethods.html" title="Paperclip::InstanceMethods">Paperclip::InstanceMethods</a></p>
</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#attachment_definitions-instance_method">#attachment_definitions</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the attachment definitions defined by each call to
has_attached_file.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#has_attached_file-instance_method">#has_attached_file</span><span class='args'>(name, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
<tt>has_attached_file</tt> gives the class it is called on an attribute
that maps to a file.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#validates_attachment_content_type-instance_method">#validates_attachment_content_type</span><span class='args'>(name, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Places ActiveRecord-style validations on the content type of the file
assigned.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#validates_attachment_presence-instance_method">#validates_attachment_presence</span><span class='args'>(name, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Places ActiveRecord-style validations on the presence of a file.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#validates_attachment_size-instance_method">#validates_attachment_size</span><span class='args'>(name, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Places ActiveRecord-style validations on the size of the file assigned.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#validates_attachment_thumbnails-instance_method">#validates_attachment_thumbnails</span><span class='args'>(name, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Adds errors if thumbnail creation fails.
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="ClassMethods/InstanceMethods.html" title="Paperclip::InstanceMethods">Paperclip::InstanceMethods</a></h2>
    <p><span class='name'><a href="InstanceMethods.html#attachment_for-instance_method" title="attachment_for">attachment_for</a></span>, <span class='name'><a href="InstanceMethods.html#destroy_attached_files-instance_method" title="destroy_attached_files">destroy_attached_files</a></span>, <span class='name'><a href="InstanceMethods.html#each_attachment-instance_method" title="each_attachment">each_attachment</a></span>, <span class='name'><a href="InstanceMethods.html#save_attached_files-instance_method" title="save_attached_files">save_attached_files</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>attachment_definitions</h3>
</div><div id="attachment_definitions-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>attachment_definitions</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the attachment definitions defined by each call to
has_attached_file.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/paperclip.rb', line 311</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/paperclip/blob/d97f814a9972b4a4cea0359ae9cac05c3c8cedea/lib/paperclip.rb#L311">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">311
312
313</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='attachment_definitions identifier id'>attachment_definitions</span>
  <span class='read_inheritable_attribute identifier id'>read_inheritable_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:attachment_definitions</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>has_attached_file</h3>
</div><div id="has_attached_file-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>has_attached_file</span><span class='args'>(name, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
<tt>has_attached_file</tt> gives the class it is called on an attribute
that maps to a file. This is typically a file stored somewhere on the
filesystem and has been uploaded by a user. The attribute returns a
Paperclip::Attachment object which handles the management of that file. The
intent is to make the attachment as much like a normal attribute. The
thumbnails will be created when the new file is assigned, but they will
<b>not</b> be saved until <tt>save</tt> is called on the record. Likewise,
if the attribute is set to <tt>nil</tt> is called on it, the attachment
will <b>not</b> be deleted until <tt>save</tt> is called. See the
Paperclip::Attachment documentation for more specifics. There are a number
of options you can set to change the behavior of a Paperclip attachment:
</p>
<ul>
<li><tt>url</tt>: The full URL of where the attachment is publically
accessible. This can just as easily point to a directory served directly
through Apache as it can to an action that can control permissions. You can
specify the full domain and path, but usually just an absolute path is
sufficient. The leading slash <b>must</b> be included manually for absolute
paths. The default value is
&quot;/system/:attachment/:id/:style/:filename&quot;. See
Paperclip::Attachment#interpolate for more information on variable
interpolaton.

<pre class="code">
  <span class='symbol val'>:url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;/:class/:attachment/:id/:style_:filename&quot;</span>
  <span class='symbol val'>:url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://some.other.host/stuff/:class/:id_:extension&quot;</span>
</pre>
</li>
<li><tt>default_url</tt>: The URL that will be returned if there is no
attachment assigned. This field is interpolated just as the url is. The
default value is &quot;/:attachment/:style/missing.png&quot;

<pre class="code">
  <span class='has_attached_file identifier id'>has_attached_file</span> <span class='symbol val'>:avatar</span><span class='comma token'>,</span> <span class='symbol val'>:default_url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;/images/default_:style_avatar.png&quot;</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='dot token'>.</span><span class='avatar_url identifier id'>avatar_url</span><span class='lparen token'>(</span><span class='symbol val'>:small</span><span class='rparen token'>)</span> <span class='comment val'># =&gt; &quot;/images/default_small_avatar.png&quot;</span>
</pre>
</li>
<li><tt>styles</tt>: A hash of thumbnail styles and their geometries. You can
find more about geometry strings at the ImageMagick website
(http://www.imagemagick.org/script/command-line-options.php#resize).
Paperclip also adds the &quot;#&quot; option (e.g. &quot;50x50#&quot;),
which will resize the image to fit maximally inside the dimensions and then
crop the rest off (weighted at the center). The default value is to
generate no thumbnails.

</li>
<li><tt>default_style</tt>: The thumbnail style that will be used by default
URLs. Defaults to <tt>original</tt>.

<pre class="code">
  <span class='has_attached_file identifier id'>has_attached_file</span> <span class='symbol val'>:avatar</span><span class='comma token'>,</span> <span class='symbol val'>:styles</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span> <span class='symbol val'>:normal</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;100x100#&quot;</span> <span class='rbrace token'>}</span><span class='comma token'>,</span>
                    <span class='symbol val'>:default_style</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:normal</span>
  <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='avatar identifier id'>avatar</span><span class='dot token'>.</span><span class='url identifier id'>url</span> <span class='comment val'># =&gt; &quot;/avatars/23/normal_me.png&quot;</span>
</pre>
</li>
<li><tt>whiny</tt>: Will raise an error if Paperclip cannot post_process an
uploaded file due to a command line error. This will override the global
setting for this attachment. Defaults to true. This option used to be
called :whiny_thumbanils, but this is deprecated.

</li>
<li><tt>convert_options</tt>: When creating thumbnails, use this free-form
options field to pass in various convert command options. Typical options
are &quot;-strip&quot; to remove all Exif data from the image (save space
for thumbnails and avatars) or &quot;-depth 8&quot; to specify the bit
depth of the resulting conversion. See ImageMagick convert documentation
for more options: (http://www.imagemagick.org/script/convert.php) Note that
this option takes a hash of options, each of which correspond to the style
of thumbnail being generated. You can also specify :all as a key, which
will apply to all of the thumbnails being generated. If you specify options
for the :original, it would be best if you did not specify destructive
options, as the intent of keeping the original around is to regenerate all
the thumbnails when requirements change.

<pre class="code">
  <span class='has_attached_file identifier id'>has_attached_file</span> <span class='symbol val'>:avatar</span><span class='comma token'>,</span> <span class='symbol val'>:styles</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span> <span class='symbol val'>:large</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;300x300&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:negative</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;100x100&quot;</span> <span class='rbrace token'>}</span>
                             <span class='symbol val'>:convert_options</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span>
                               <span class='symbol val'>:all</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;-strip&quot;</span><span class='comma token'>,</span>
                               <span class='symbol val'>:negative</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;-negate&quot;</span>
                             <span class='rbrace token'>}</span>
</pre>
<p>
NOTE: While not deprecated yet, it is not recommended to specify options
this way. It is recommended that :convert_options option be included in the
hash passed to each :styles for compatability with future versions.
</p>
</li>
<li><tt>storage</tt>: Chooses the storage backend where the files will be
stored. The current choices are :filesystem and :s3. The default is
:filesystem. Make sure you read the documentation for
Paperclip::Storage::Filesystem and Paperclip::Storage::S3 for
backend-specific options.

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/paperclip.rb', line 214</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/paperclip/blob/d97f814a9972b4a4cea0359ae9cac05c3c8cedea/lib/paperclip.rb#L214">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='has_attached_file identifier id'>has_attached_file</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='include identifier id'>include</span> <span class='InstanceMethods constant id'>InstanceMethods</span>

  <span class='write_inheritable_attribute identifier id'>write_inheritable_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:attachment_definitions</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='attachment_definitions identifier id'>attachment_definitions</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='attachment_definitions identifier id'>attachment_definitions</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:validations</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>

  <span class='after_save identifier id'>after_save</span> <span class='symbol val'>:save_attached_files</span>
  <span class='before_destroy identifier id'>before_destroy</span> <span class='symbol val'>:destroy_attached_files</span>

  <span class='define_callbacks identifier id'>define_callbacks</span> <span class='symbol val'>:before_post_process</span><span class='comma token'>,</span> <span class='symbol val'>:after_post_process</span>
  <span class='define_callbacks identifier id'>define_callbacks</span> <span class='symbol val'>:&quot;before_#{name}_post_process&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:&quot;after_#{name}_post_process&quot;</span>
 
  <span class='define_method identifier id'>define_method</span> <span class='name identifier id'>name</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='bitor op'>|</span>
    <span class='a identifier id'>a</span> <span class='assign token'>=</span> <span class='attachment_for identifier id'>attachment_for</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='lparen token'>(</span><span class='args identifier id'>args</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='lparen token'>(</span><span class='args identifier id'>args</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='a identifier id'>a</span>
  <span class='end end kw'>end</span>

  <span class='define_method identifier id'>define_method</span> <span class='dstring node'>&quot;#{name}=&quot;</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='file identifier id'>file</span><span class='bitor op'>|</span>
    <span class='attachment_for identifier id'>attachment_for</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='assign identifier id'>assign</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='define_method identifier id'>define_method</span> <span class='dstring node'>&quot;#{name}?&quot;</span> <span class='do do kw'>do</span>
    <span class='attachment_for identifier id'>attachment_for</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='file? fid id'>file?</span>
  <span class='end end kw'>end</span>

  <span class='validates_each identifier id'>validates_each</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='record identifier id'>record</span><span class='comma token'>,</span> <span class='attr identifier id'>attr</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='attachment identifier id'>attachment</span> <span class='assign token'>=</span> <span class='record identifier id'>record</span><span class='dot token'>.</span><span class='attachment_for identifier id'>attachment_for</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='attachment identifier id'>attachment</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:flush_errors</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='attachment identifier id'>attachment</span><span class='dot token'>.</span><span class='valid? fid id'>valid?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>validates_attachment_content_type</h3>
</div><div id="validates_attachment_content_type-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>validates_attachment_content_type</span><span class='args'>(name, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Places ActiveRecord-style validations on the content type of the file
assigned. The possible options are:
</p>
<ul>
<li><tt>content_type</tt>: Allowed content types. Can be a single content type
or an array. Each type can be a String or a Regexp. It should be noted that
Internet Explorer upload files with content_types that you may not expect.
For example, JPEG images are given image/pjpeg and PNGs are image/x-png, so
keep that in mind when determining how you match. Allows all by default.

</li>
<li><tt>message</tt>: The message to display when the uploaded file has an
invalid content type.

</li>
<li><tt>if</tt>: A lambda or name of a method on the instance. Validation will
only be run is this lambda or method returns true.

</li>
<li><tt>unless</tt>: Same as <tt>if</tt> but validates if lambda or method
returns false.

</li>
</ul>
<p>
NOTE: If you do not specify an [attachment]_content_type field on your
model, content_type validation will work _ONLY upon assignment_ and
re-validation after the instance has been reloaded will always succeed.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/paperclip.rb', line 302</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/paperclip/blob/d97f814a9972b4a4cea0359ae9cac05c3c8cedea/lib/paperclip.rb#L302">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">302
303
304
305
306
307</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='validates_attachment_content_type identifier id'>validates_attachment_content_type</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='attachment_definitions identifier id'>attachment_definitions</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:validations</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='lbrack token'>[</span><span class='symbol val'>:content_type</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='symbol val'>:content_type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:content_type</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                                                 <span class='symbol val'>:message</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:message</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                                                 <span class='symbol val'>:if</span>           <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                                                 <span class='symbol val'>:unless</span>       <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>validates_attachment_presence</h3>
</div><div id="validates_attachment_presence-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>validates_attachment_presence</span><span class='args'>(name, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Places ActiveRecord-style validations on the presence of a file. Options:
</p>
<ul>
<li><tt>if</tt>: A lambda or name of a method on the instance. Validation will
only be run is this lambda or method returns true.

</li>
<li><tt>unless</tt>: Same as <tt>if</tt> but validates if lambda or method
returns false.

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/paperclip.rb', line 279</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/paperclip/blob/d97f814a9972b4a4cea0359ae9cac05c3c8cedea/lib/paperclip.rb#L279">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">279
280
281
282
283
284</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='validates_attachment_presence identifier id'>validates_attachment_presence</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='message identifier id'>message</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:message</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='string val'>&quot;must be set.&quot;</span>
  <span class='attachment_definitions identifier id'>attachment_definitions</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:validations</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='lbrack token'>[</span><span class='symbol val'>:presence</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='message identifier id'>message</span><span class='comma token'>,</span>
                                                             <span class='symbol val'>:if</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                                             <span class='symbol val'>:unless</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>validates_attachment_size</h3>
</div><div id="validates_attachment_size-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>validates_attachment_size</span><span class='args'>(name, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Places ActiveRecord-style validations on the size of the file assigned. The
possible options are:
</p>
<ul>
<li><tt>in</tt>: a Range of bytes (i.e. <tt>1..1.megabyte</tt>),

</li>
<li><tt>less_than</tt>: equivalent to :in =&gt; 0..options[:less_than]

</li>
<li><tt>greater_than</tt>: equivalent to :in =&gt;
options[:greater_than]..Infinity

</li>
<li><tt>message</tt>: error message to display, use :min and :max as
replacements

</li>
<li><tt>if</tt>: A lambda or name of a method on the instance. Validation will
only be run is this lambda or method returns true.

</li>
<li><tt>unless</tt>: Same as <tt>if</tt> but validates if lambda or method
returns false.

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/paperclip.rb', line 254</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/paperclip/blob/d97f814a9972b4a4cea0359ae9cac05c3c8cedea/lib/paperclip.rb#L254">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">254
255
256
257
258
259
260
261
262
263
264</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='validates_attachment_size identifier id'>validates_attachment_size</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='min identifier id'>min</span>     <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:greater_than</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span> <span class='andop op'>&amp;&amp;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='integer val'>0</span>
  <span class='max identifier id'>max</span>     <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:less_than</span><span class='rbrack token'>]</span>    <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span> <span class='andop op'>&amp;&amp;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='rparen token'>)</span>  <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='float val'>1.0</span><span class='div op'>/</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='range identifier id'>range</span>   <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='min identifier id'>min</span><span class='dot2 op'>..</span><span class='max identifier id'>max</span><span class='rparen token'>)</span>
  <span class='message identifier id'>message</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:message</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='string val'>&quot;file size must be between :min and :max bytes.&quot;</span>

  <span class='attachment_definitions identifier id'>attachment_definitions</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:validations</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='lbrack token'>[</span><span class='symbol val'>:size</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='symbol val'>:range</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='range identifier id'>range</span><span class='comma token'>,</span>
                                                         <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='message identifier id'>message</span><span class='comma token'>,</span>
                                                         <span class='symbol val'>:if</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                                         <span class='symbol val'>:unless</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>validates_attachment_thumbnails</h3>
</div><div id="validates_attachment_thumbnails-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>validates_attachment_thumbnails</span><span class='args'>(name, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Adds errors if thumbnail creation fails. The same as specifying
:whiny_thumbnails =&gt; true.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/paperclip.rb', line 267</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/thoughtbot/paperclip/blob/d97f814a9972b4a4cea0359ae9cac05c3c8cedea/lib/paperclip.rb#L267">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">267
268
269
270
271
272</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='validates_attachment_thumbnails identifier id'>validates_attachment_thumbnails</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='warn identifier id'>warn</span><span class='lparen token'>(</span><span class='string val'>'[DEPRECATION] validates_attachment_thumbnail is deprecated. '</span> <span class='plus op'>+</span>
       <span class='string val'>'This validation is on by default and will be removed from future versions. '</span> <span class='plus op'>+</span>
       <span class='string val'>'If you wish to turn it off, supply :whiny =&gt; false in your definition.'</span><span class='rparen token'>)</span>
  <span class='attachment_definitions identifier id'>attachment_definitions</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:whiny_thumbnails</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>