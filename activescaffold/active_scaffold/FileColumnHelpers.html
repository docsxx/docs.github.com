<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: FileColumnHelpers</title>
  </head>
  <body>
    <div id="content">
      <div class="section module FileColumnHelpers">
  <h1 class="title">Module: FileColumnHelpers</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary class public">
    <h1>Public Class Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#file_column_fields-class_method' title='file_column_fields'>file_column_fields</a></span><span class='args'>(klass)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#generate_delete_helpers-class_method' title='generate_delete_helpers'>generate_delete_helpers</a></span><span class='args'>(klass)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#klass_has_file_column_fields%3F-class_method' title='klass_has_file_column_fields?'>klass_has_file_column_fields?</a></span><span class='args'>(klass)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#field_has_image_version%3F-instance_method' title='#field_has_image_version?'>#field_has_image_version?</a></span><span class='args'>(field, version=&quot;thumb&quot;)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#file_column_fields-instance_method' title='#file_column_fields'>#file_column_fields</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#generate_delete_helpers-instance_method' title='#generate_delete_helpers'>#generate_delete_helpers</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#options_for_file_column_field-instance_method' title='#options_for_file_column_field'>#options_for_file_column_field</a></span><span class='args'>(field)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails class public">
  <h1>Public Class Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>file_column_fields</h3>
</div><div id="file_column_fields-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>file_column_fields</span><span class='args'>(klass)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


3
4
5</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/bridges/file_column/lib/file_column_helpers.rb', line 3</span>

<span class='def def kw'>def</span> <span class='file_column_fields identifier id'>file_column_fields</span><span class='lparen token'>(</span><span class='klass identifier id'>klass</span><span class='rparen token'>)</span>
  <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='instance_methods identifier id'>instance_methods</span><span class='dot token'>.</span><span class='grep identifier id'>grep</span><span class='lparen token'>(</span><span class='regexp val'>/_just_uploaded\?$/</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='m identifier id'>m</span><span class='bitor op'>|</span> <span class='m identifier id'>m</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-16</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>generate_delete_helpers</h3>
</div><div id="generate_delete_helpers-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>generate_delete_helpers</span><span class='args'>(klass)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


7
8
9
10
11</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/bridges/file_column/lib/file_column_helpers.rb', line 7</span>

<span class='def def kw'>def</span> <span class='generate_delete_helpers identifier id'>generate_delete_helpers</span><span class='lparen token'>(</span><span class='klass identifier id'>klass</span><span class='rparen token'>)</span>
  <span class='file_column_fields identifier id'>file_column_fields</span><span class='lparen token'>(</span><span class='klass identifier id'>klass</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='field identifier id'>field</span><span class='bitor op'>|</span>
    <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='send identifier id'>send</span> <span class='symbol val'>:class_eval</span><span class='comma token'>,</span> <span class='string val'>&quot;attr_reader :delete_\#{field}\n\ndef delete_\#{field}=(value)\nvalue = (value==\&quot;true\&quot;) if String===value\nreturn unless value\n\n# passing nil to the file column causes the file to be deleted.  Don't delete if we just uploaded a file!\nself.\#{field} = nil unless self.\#{field}_just_uploaded?\nend\n&quot;</span><span class='comma token'>,</span> <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span> <span class='plus op'>+</span> <span class='integer val'>1</span>  <span class='unless unless_mod kw'>unless</span> <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='methods identifier id'>methods</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{field}_with_delete=&quot;</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>klass_has_file_column_fields?</h3>
</div><div id="klass_has_file_column_fields%3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>klass_has_file_column_fields?</span><span class='args'>(klass)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


24
25
26</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/bridges/file_column/lib/file_column_helpers.rb', line 24</span>

<span class='def def kw'>def</span> <span class='klass_has_file_column_fields? fid id'>klass_has_file_column_fields?</span><span class='lparen token'>(</span><span class='klass identifier id'>klass</span><span class='rparen token'>)</span>
  <span class='true true kw'>true</span> <span class='unless unless_mod kw'>unless</span> <span class='file_column_fields identifier id'>file_column_fields</span><span class='lparen token'>(</span><span class='klass identifier id'>klass</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div><div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>field_has_image_version?</h3>
</div><div id="field_has_image_version%3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>field_has_image_version?</span><span class='args'>(field, version=&quot;thumb&quot;)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


37
38
39
40
41
42
43
44
45
46
47</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/bridges/file_column/lib/file_column_helpers.rb', line 37</span>

<span class='def def kw'>def</span> <span class='field_has_image_version? fid id'>field_has_image_version?</span><span class='lparen token'>(</span><span class='field identifier id'>field</span><span class='comma token'>,</span> <span class='version identifier id'>version</span><span class='assign token'>=</span><span class='string val'>&quot;thumb&quot;</span><span class='rparen token'>)</span>
  <span class='begin begin kw'>begin</span>
    <span class='comment val'># the only way to get to the options of a particular field is to use the instance method</span>
    <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='options_for_file_column_field identifier id'>options_for_file_column_field</span><span class='lparen token'>(</span><span class='field identifier id'>field</span><span class='rparen token'>)</span>
    <span class='versions identifier id'>versions</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:magick</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:versions</span><span class='rbrack token'>]</span>
    <span class='raise identifier id'>raise</span> <span class='unless unless_mod kw'>unless</span> <span class='versions identifier id'>versions</span><span class='dot token'>.</span><span class='stringify_keys identifier id'>stringify_keys</span><span class='lbrack token'>[</span><span class='version identifier id'>version</span><span class='rbrack token'>]</span>
    <span class='true true kw'>true</span>
  <span class='rescue rescue kw'>rescue</span>
    <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>file_column_fields</h3>
</div><div id="file_column_fields-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>file_column_fields</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


29
30
31</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/bridges/file_column/lib/file_column_helpers.rb', line 29</span>

<span class='def def kw'>def</span> <span class='file_column_fields identifier id'>file_column_fields</span>
  <span class='@file_column_fields ivar id'>@file_column_fields</span><span class='opasgn op'>||=</span><span class='FileColumnHelpers constant id'>FileColumnHelpers</span><span class='dot token'>.</span><span class='file_column_fields identifier id'>file_column_fields</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>generate_delete_helpers</h3>
</div><div id="generate_delete_helpers-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>generate_delete_helpers</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


49
50
51</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/bridges/file_column/lib/file_column_helpers.rb', line 49</span>

<span class='def def kw'>def</span> <span class='generate_delete_helpers identifier id'>generate_delete_helpers</span>
  <span class='FileColumnHelpers constant id'>FileColumnHelpers</span><span class='dot token'>.</span><span class='generate_delete_helpers identifier id'>generate_delete_helpers</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>options_for_file_column_field</h3>
</div><div id="options_for_file_column_field-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>options_for_file_column_field</span><span class='args'>(field)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


33
34
35</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/bridges/file_column/lib/file_column_helpers.rb', line 33</span>

<span class='def def kw'>def</span> <span class='options_for_file_column_field identifier id'>options_for_file_column_field</span><span class='lparen token'>(</span><span class='field identifier id'>field</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='allocate identifier id'>allocate</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{field}_options&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>