<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>fauna's ultrasphinx - Class: Ultrasphinx::Search - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/fauna/commits/ultrasphinx/master" rel="alternate" title="Recent Commits to ultrasphinx:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("fauna", "ultrasphinx", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("fauna", "ultrasphinx", "e3fe8c6a055fb19219b115b17c3d581c7b301e2d", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/fauna/ultrasphinx/tree/">Source</a></li>
            <li class=""><a href="http://github.com/fauna/ultrasphinx/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/fauna/ultrasphinx/network">Network</a></li>            
            <li class=""><a href="http://github.com/fauna/ultrasphinx/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/fauna/ultrasphinx">Wiki</a></li>
            <li class=""><a href="http://github.com/fauna/ultrasphinx/graphs">Graphs</a></li>                    
            <li class="active"><a href="/fauna/ultrasphinx">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/fauna">fauna</a> / <b><a href="http://github.com/fauna/ultrasphinx/tree">ultrasphinx</a></b>        
                <a id="namespaces_button" rel="fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Ultrasphinx_Search">
  <h1>Class: Ultrasphinx::Search</h1>
  <div class="section inheritance">
  <ul>
  <li><a href="../Object.html" title="Object">Object</a></li><ul><li>Ultrasphinx::Search</li>
  </ul></ul>
</div><div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="Search/Internals.html" title="Ultrasphinx::Search::Internals">Ultrasphinx::Search::Internals</a>, <a href="Search/Parser.html" title="Ultrasphinx::Search::Parser">Ultrasphinx::Search::Parser</a></p>
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="FACET_CACHE-constant">FACET_CACHE</dt>
      <dd>{} #:nodoc: </dd>
    
      <dt id="IDS_TO_MODELS-constant">IDS_TO_MODELS</dt>
      <dd>MODELS_TO_IDS.invert </dd>
    
      <dt id="INTERNAL_KEYS-constant">INTERNAL_KEYS</dt>
      <dd>['parsed_query'] </dd>
    
      <dt id="MAX_MATCHES-constant">MAX_MATCHES</dt>
      <dd>DAEMON_SETTINGS[&quot;max_matches&quot;].to_i </dd>
    
      <dt id="MODELS_TO_IDS-constant">MODELS_TO_IDS</dt>
      <dd>Ultrasphinx.get_models_to_class_ids || {} </dd>
    
      <dt id="SPHINX_CLIENT_PARAMS-constant">SPHINX_CLIENT_PARAMS</dt>
      <dd>{ 
  'sort_mode' =&gt; {
    'relevance' =&gt; :relevance,
    'descending' =&gt; :attr_desc, 
    'ascending' =&gt; :attr_asc, 
    'time' =&gt; :time_segments,
    'extended' =&gt; :extended,
  }
}</dd>
    
  </dl>
</div>
<div class="included">
  
  <div>
    <h2>Constants Included from <a href="Search/Internals.html" title="Ultrasphinx::Search::Internals">Ultrasphinx::Search::Internals</a></h2>
    <p><span class='name'><a href="Search/Internals.html#INFINITY-constant" title="INFINITY">INFINITY</a></span></p>
  </div>
  
  <div>
    <h2>Constants Included from <a href="Search/Parser.html" title="Ultrasphinx::Search::Parser">Ultrasphinx::Search::Parser</a></h2>
    <p><span class='name'><a href="Search/Parser.html#OPERATORS-constant" title="OPERATORS">OPERATORS</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(opts = )</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Builds a new command-interface Search object.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="UsageError.html" title="UsageError">UsageError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 298</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L298">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span> <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='semicolon token'>;</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span> 

  <span class='comment val'># Change to normal hashes with String keys for speed</span>
  <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='Hash constant id'>Hash</span><span class='lbrack token'>[</span><span class='HashWithIndifferentAccess constant id'>HashWithIndifferentAccess</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='_deep_dup identifier id'>_deep_dup</span><span class='dot token'>.</span><span class='_coerce_basic_types identifier id'>_coerce_basic_types</span><span class='rparen token'>)</span><span class='rbrack token'>]</span>
  <span class='unless unless kw'>unless</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='query_defaults identifier id'>query_defaults</span><span class='dot token'>.</span><span class='instance_of? fid id'>instance_of?</span> <span class='Hash constant id'>Hash</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='query_defaults identifier id'>query_defaults</span> <span class='assign token'>=</span> <span class='Hash constant id'>Hash</span><span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='query_defaults identifier id'>query_defaults</span><span class='rbrack token'>]</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='query_defaults identifier id'>query_defaults</span><span class='lbrack token'>[</span><span class='string val'>'location'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Hash constant id'>Hash</span><span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='query_defaults identifier id'>query_defaults</span><span class='lbrack token'>[</span><span class='string val'>'location'</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
    
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='client_options identifier id'>client_options</span> <span class='assign token'>=</span> <span class='Hash constant id'>Hash</span><span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='client_options identifier id'>client_options</span><span class='rbrack token'>]</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='excerpting_options identifier id'>excerpting_options</span> <span class='assign token'>=</span> <span class='Hash constant id'>Hash</span><span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='excerpting_options identifier id'>excerpting_options</span><span class='rbrack token'>]</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='excerpting_options identifier id'>excerpting_options</span><span class='lbrack token'>[</span><span class='string val'>'content_methods'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='map! fid id'>map!</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='ary identifier id'>ary</span><span class='bitor op'>|</span> <span class='ary identifier id'>ary</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='m identifier id'>m</span><span class='bitor op'>|</span> <span class='m identifier id'>m</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrace token'>}</span><span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>    

  <span class='comment val'># We need an annoying deep merge on the :location parameter</span>
  <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='string val'>'location'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='reverse_merge! fid id'>reverse_merge!</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='query_defaults identifier id'>query_defaults</span><span class='lbrack token'>[</span><span class='string val'>'location'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='string val'>'location'</span><span class='rbrack token'>]</span>

  <span class='comment val'># Merge the rest of the defaults      </span>
  <span class='@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='query_defaults identifier id'>query_defaults</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='rparen token'>)</span>
  
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'query'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'query'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'class_names'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Array constant id'>Array</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'class_names'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'facets'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Array constant id'>Array</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'facets'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'indexes'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Array constant id'>Array</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'indexes'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span>
        
  <span class='raise identifier id'>raise</span> <span class='UsageError constant id'>UsageError</span><span class='comma token'>,</span> <span class='string val'>&quot;Weights must be a Hash&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'weights'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span> <span class='Hash constant id'>Hash</span>
  <span class='raise identifier id'>raise</span> <span class='UsageError constant id'>UsageError</span><span class='comma token'>,</span> <span class='string val'>&quot;Filters must be a Hash&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'filters'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span> <span class='Hash constant id'>Hash</span>
  
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'parsed_query'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='rparen token'>)</span>
  
  <span class='@results ivar id'>@results</span><span class='comma token'>,</span> <span class='@subtotals ivar id'>@subtotals</span><span class='comma token'>,</span> <span class='@facets ivar id'>@facets</span><span class='comma token'>,</span> <span class='@response ivar id'>@response</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    
  <span class='extra_keys identifier id'>extra_keys</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span> <span class='minus op'>-</span> <span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='query_defaults identifier id'>query_defaults</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span> <span class='plus op'>+</span> <span class='INTERNAL_KEYS constant id'>INTERNAL_KEYS</span><span class='rparen token'>)</span>
  <span class='log identifier id'>log</span> <span class='dstring node'>&quot;discarded invalid keys: #{extra_keys * ', '}&quot;</span> <span class='if if_mod kw'>if</span> <span class='extra_keys identifier id'>extra_keys</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='and and kw'>and</span> <span class='RAILS_ENV constant id'>RAILS_ENV</span> <span class='neq op'>!=</span> <span class='string val'>&quot;test&quot;</span> 
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div><div class="section methodmissing">
  <h2>Dynamic Method Handling</h2>

  <p class="note">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
  </p>

  <div id="method_missing-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>method_missing</span><span class='args'>(*args, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Delegates enumerable methods to @results, if possible. This allows us to
behave directly like a WillPaginate::Collection. Failing that, we delegate
to the options hash if a key is set. This lets us use <tt>self</tt>
directly in view helpers.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 434</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L434">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">434
435
436
437
438
439
440
441
442</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='method_missing identifier id'>method_missing</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='@results ivar id'>@results</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='@results ivar id'>@results</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='elsif elsif kw'>elsif</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='args identifier id'>args</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>
    <span class='super super kw'>super</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#current_page-instance_method">#current_page</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the current page number of the result set.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#excerpt-instance_method">#excerpt</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Overwrite the configured content attributes with excerpted and highlighted
versions of themselves.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#facets-instance_method">#facets</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the facet map for this query, if facets were used.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#log-instance_method">#log</span><span class='args'>(msg)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#next_page-instance_method">#next_page</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the next page number.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#offset-instance_method">#offset</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the global index position of the first result on this page.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#options-instance_method">#options</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the options hash.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#page_count-instance_method">#page_count</span><span class='args'></span>
        <span class='block'></span>
        
          <span class='alias'>#total_pages</span>
        
      </th>
      <td class="docstring">
        <p>
Returns the last available page number in the result set.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#parsed_query-instance_method">#parsed_query</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#per_page-instance_method">#per_page</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the number of records per page.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#previous_page-instance_method">#previous_page</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the previous page number.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#query-instance_method">#query</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the query string used.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#response-instance_method">#response</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the raw response from the Sphinx client.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#results-instance_method">#results</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns an array of result objects.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#run-instance_method">#run</span><span class='args'>(reify = true)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Run the search, filling results with an array of ActiveRecord objects.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#run-3F-instance_method">#run?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns whether the query has been run.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#say-instance_method">#say</span><span class='args'>(msg)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#subtotals-instance_method">#subtotals</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a hash of total result counts, scoped to each available model.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#time-instance_method">#time</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the response time of the query, in milliseconds.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#total_entries-instance_method">#total_entries</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the total result count.
</p>

        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h2>Public Instance Methods Inherited from <a href="../Object.html" title="Object">Object</a></h2>
    <p><span class='name'><a href="../Object.html#_deep_dup-instance_method" title="_deep_dup">_deep_dup</a></span>, <span class='name'><a href="../Object.html#_metaclass-instance_method" title="_metaclass">_metaclass</a></span></p>
  </div>
  
</div>
<div class="clear"></div><div class="included">
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>current_page</h3>
</div><div id="current_page-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>current_page</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the current page number of the result set. (Page indexes begin at
1.)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 264</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L264">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">264
265
266</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='current_page identifier id'>current_page</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'page'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>excerpt</h3>
</div><div id="excerpt-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>excerpt</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Overwrite the configured content attributes with excerpted and highlighted
versions of themselves. Runs run if it hasn&#8217;t already been done.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 372</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L372">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='excerpt identifier id'>excerpt</span>

  <span class='require_run identifier id'>require_run</span>         
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='results identifier id'>results</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>

  <span class='comment val'># See what fields in each result might respond to our excerptable methods</span>
  <span class='results_with_content_methods identifier id'>results_with_content_methods</span> <span class='assign token'>=</span> <span class='results identifier id'>results</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='bitor op'>|</span>
    <span class='lbrack token'>[</span><span class='result identifier id'>result</span><span class='comma token'>,</span> 
      <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='excerpting_options identifier id'>excerpting_options</span><span class='lbrack token'>[</span><span class='string val'>'content_methods'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='methods identifier id'>methods</span><span class='bitor op'>|</span>
        <span class='methods identifier id'>methods</span><span class='dot token'>.</span><span class='detect identifier id'>detect</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='this identifier id'>this</span><span class='bitor op'>|</span> 
          <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='this identifier id'>this</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># Fetch the actual field contents</span>
  <span class='docs identifier id'>docs</span> <span class='assign token'>=</span> <span class='results_with_content_methods identifier id'>results_with_content_methods</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='methods identifier id'>methods</span><span class='bitor op'>|</span>
    <span class='methods identifier id'>methods</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='method identifier id'>method</span><span class='bitor op'>|</span> 
      <span class='method identifier id'>method</span> <span class='and and kw'>and</span> <span class='strip_bogus_characters identifier id'>strip_bogus_characters</span><span class='lparen token'>(</span><span class='result identifier id'>result</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span> <span class='or or kw'>or</span> <span class='string val'>&quot;&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span>
  
  <span class='excerpting_options identifier id'>excerpting_options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:docs</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='docs identifier id'>docs</span><span class='comma token'>,</span>         
    <span class='symbol val'>:index</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='MAIN_INDEX constant id'>MAIN_INDEX</span><span class='comma token'>,</span> <span class='comment val'># http://www.sphinxsearch.com/forum/view.html?id=100</span>
    <span class='symbol val'>:words</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='strip_query_commands identifier id'>strip_query_commands</span><span class='lparen token'>(</span><span class='parsed_query identifier id'>parsed_query</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='excerpting_options identifier id'>excerpting_options</span><span class='dot token'>.</span><span class='except identifier id'>except</span><span class='lparen token'>(</span><span class='string val'>'content_methods'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='comment val'># Riddle only wants symbols</span>
    <span class='excerpting_options identifier id'>excerpting_options</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='value identifier id'>value</span>
  <span class='end end kw'>end</span>
  
  <span class='responses identifier id'>responses</span> <span class='assign token'>=</span> <span class='perform_action_with_retries identifier id'>perform_action_with_retries</span> <span class='do do kw'>do</span> 
    <span class='comment val'># Ship to Sphinx to highlight and excerpt</span>
    <span class='@request ivar id'>@request</span><span class='dot token'>.</span><span class='excerpts identifier id'>excerpts</span><span class='lparen token'>(</span><span class='excerpting_options identifier id'>excerpting_options</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='responses identifier id'>responses</span> <span class='assign token'>=</span> <span class='responses identifier id'>responses</span><span class='dot token'>.</span><span class='in_groups_of identifier id'>in_groups_of</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='excerpting_options identifier id'>excerpting_options</span><span class='lbrack token'>[</span><span class='string val'>'content_methods'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='rparen token'>)</span>
  
  <span class='results_with_content_methods identifier id'>results_with_content_methods</span><span class='dot token'>.</span><span class='each_with_index identifier id'>each_with_index</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='result_and_methods identifier id'>result_and_methods</span><span class='comma token'>,</span> <span class='i identifier id'>i</span><span class='bitor op'>|</span>
    <span class='comment val'># Override the individual model accessors with the excerpted data</span>
    <span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='methods identifier id'>methods</span> <span class='assign token'>=</span> <span class='result_and_methods identifier id'>result_and_methods</span>
    <span class='methods identifier id'>methods</span><span class='dot token'>.</span><span class='each_with_index identifier id'>each_with_index</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='j identifier id'>j</span><span class='bitor op'>|</span>
      <span class='data identifier id'>data</span> <span class='assign token'>=</span> <span class='responses identifier id'>responses</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='j identifier id'>j</span><span class='rbrack token'>]</span>
      <span class='if if kw'>if</span> <span class='method identifier id'>method</span>
        <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='_metaclass identifier id'>_metaclass</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='string val'>'define_method'</span><span class='comma token'>,</span> <span class='method identifier id'>method</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='data identifier id'>data</span> <span class='rbrace token'>}</span>
        <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='string val'>'@attributes'</span><span class='rparen token'>)</span>
        <span class='attributes identifier id'>attributes</span><span class='lbrack token'>[</span><span class='method identifier id'>method</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='data identifier id'>data</span> <span class='if if_mod kw'>if</span> <span class='attributes identifier id'>attributes</span><span class='lbrack token'>[</span><span class='method identifier id'>method</span><span class='rbrack token'>]</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='@results ivar id'>@results</span> <span class='assign token'>=</span> <span class='results_with_content_methods identifier id'>results_with_content_methods</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='result_and_content_method identifier id'>result_and_content_method</span><span class='bitor op'>|</span> 
    <span class='result_and_content_method identifier id'>result_and_content_method</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='freeze identifier id'>freeze</span>
  <span class='end end kw'>end</span>
  
  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>  
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>facets</h3>
</div><div id="facets-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>facets</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the facet map for this query, if facets were used.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="UsageError.html" title="UsageError">UsageError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 225</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L225">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">225
226
227
228
229</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='facets identifier id'>facets</span>
  <span class='raise identifier id'>raise</span> <span class='UsageError constant id'>UsageError</span><span class='comma token'>,</span> <span class='string val'>&quot;No facet field was configured&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'facets'</span><span class='rbrack token'>]</span>
  <span class='require_run identifier id'>require_run</span>
  <span class='@facets ivar id'>@facets</span>
<span class='end end kw'>end</span>      
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>log</h3>
</div><div id="log-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>log</span><span class='args'>(msg)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 444</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L444">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">444
445
446</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='log identifier id'>log</span> <span class='msg identifier id'>msg</span> 
  <span class='Ultrasphinx constant id'>Ultrasphinx</span><span class='dot token'>.</span><span class='log identifier id'>log</span> <span class='msg identifier id'>msg</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>next_page</h3>
</div><div id="next_page-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>next_page</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the next page number.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 288</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L288">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">288
289
290</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='next_page identifier id'>next_page</span>
  <span class='current_page identifier id'>current_page</span> <span class='lt op'>&lt;</span> <span class='page_count identifier id'>page_count</span> <span class='integer val'>? </span><span class='lparen token'>(</span><span class='current_page identifier id'>current_page</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>offset</h3>
</div><div id="offset-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>offset</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the global index position of the first result on this page.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 293</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L293">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">293
294
295</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='offset identifier id'>offset</span> 
  <span class='lparen token'>(</span><span class='current_page identifier id'>current_page</span> <span class='minus op'>-</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='mult op'>*</span> <span class='per_page identifier id'>per_page</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>options</h3>
</div><div id="options-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>options</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the options hash.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 203</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L203">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">203
204
205</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='options identifier id'>options</span>
  <span class='@options ivar id'>@options</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>page_count</h3>
</div><div id="page_count-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>page_count</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="total_pages-instance_method">total_pages</tt>
  
</p>
</div><div class="section docstring">
  <p>
Returns the last available page number in the result set.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 274</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L274">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">274
275
276
277</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='page_count identifier id'>page_count</span>
  <span class='require_run identifier id'>require_run</span>    
  <span class='lparen token'>(</span><span class='total_entries identifier id'>total_entries</span> <span class='div op'>/</span> <span class='per_page identifier id'>per_page</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='ceil identifier id'>ceil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>parsed_query</h3>
</div><div id="parsed_query-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>parsed_query</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 213</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L213">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">213
214
215
216</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='parsed_query identifier id'>parsed_query</span> 
  <span class='comment val'># Redundant with method_missing</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'parsed_query'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>per_page</h3>
</div><div id="per_page-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>per_page</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the number of records per page.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 269</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L269">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">269
270
271</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='per_page identifier id'>per_page</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'per_page'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>previous_page</h3>
</div><div id="previous_page-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>previous_page</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the previous page number.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 283</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L283">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">283
284
285</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='previous_page identifier id'>previous_page</span> 
  <span class='current_page identifier id'>current_page</span> <span class='gt op'>&gt;</span> <span class='integer val'>1</span> <span class='question op'>?</span> <span class='lparen token'>(</span><span class='current_page identifier id'>current_page</span> <span class='minus op'>-</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>query</h3>
</div><div id="query-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>query</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the query string used.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 208</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L208">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">208
209
210
211</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='query identifier id'>query</span>
  <span class='comment val'># Redundant with method_missing</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'query'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>response</h3>
</div><div id="response-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>response</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the raw response from the Sphinx client.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 232</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L232">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">232
233
234
235</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='response identifier id'>response</span>
  <span class='require_run identifier id'>require_run</span>
  <span class='@response ivar id'>@response</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>results</h3>
</div><div id="results-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>results</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns an array of result objects.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 219</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L219">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">219
220
221
222</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='results identifier id'>results</span>
  <span class='require_run identifier id'>require_run</span>
  <span class='@results ivar id'>@results</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>run</h3>
</div><div id="run-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>run</span><span class='args'>(reify = true)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Run the search, filling results with an array of ActiveRecord objects. Set
the parameter to false if you only want the ids returned.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 335</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L335">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='run identifier id'>run</span><span class='lparen token'>(</span><span class='reify identifier id'>reify</span> <span class='assign token'>=</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>
  <span class='@request ivar id'>@request</span> <span class='assign token'>=</span> <span class='build_request_with_options identifier id'>build_request_with_options</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='rparen token'>)</span>

  <span class='log identifier id'>log</span> <span class='dstring node'>&quot;searching for #{@options.inspect}&quot;</span>

  <span class='perform_action_with_retries identifier id'>perform_action_with_retries</span> <span class='do do kw'>do</span>
    <span class='@response ivar id'>@response</span> <span class='assign token'>=</span> <span class='@request ivar id'>@request</span><span class='dot token'>.</span><span class='query identifier id'>query</span><span class='lparen token'>(</span><span class='parsed_query identifier id'>parsed_query</span><span class='comma token'>,</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'indexes'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='log identifier id'>log</span> <span class='dstring node'>&quot;search returned #{total_entries}/#{response[:total_found].to_i} in #{time.to_f} seconds.&quot;</span>
      
    <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='client_options identifier id'>client_options</span><span class='lbrack token'>[</span><span class='string val'>'with_subtotals'</span><span class='rbrack token'>]</span>        
      <span class='@subtotals ivar id'>@subtotals</span> <span class='assign token'>=</span> <span class='get_subtotals identifier id'>get_subtotals</span><span class='lparen token'>(</span><span class='@request ivar id'>@request</span><span class='comma token'>,</span> <span class='parsed_query identifier id'>parsed_query</span><span class='rparen token'>)</span> 
      
      <span class='comment val'># If the original query has a filter on this class, we will use its more accurate total rather the facet's </span>
      <span class='comment val'># less accurate total.</span>
      <span class='if if kw'>if</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'class_names'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
        <span class='@subtotals ivar id'>@subtotals</span><span class='lbrack token'>[</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'class_names'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='symbol val'>:total_found</span><span class='rbrack token'>]</span>
      <span class='end end kw'>end</span>
      
    <span class='end end kw'>end</span>
    
    <span class='Array constant id'>Array</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='string val'>'facets'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='facet identifier id'>facet</span><span class='bitor op'>|</span>
      <span class='@facets ivar id'>@facets</span><span class='lbrack token'>[</span><span class='facet identifier id'>facet</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='get_facets identifier id'>get_facets</span><span class='lparen token'>(</span><span class='@request ivar id'>@request</span><span class='comma token'>,</span> <span class='parsed_query identifier id'>parsed_query</span><span class='comma token'>,</span> <span class='facet identifier id'>facet</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>        
    
    <span class='@results ivar id'>@results</span> <span class='assign token'>=</span> <span class='convert_sphinx_ids identifier id'>convert_sphinx_ids</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='symbol val'>:matches</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='@results ivar id'>@results</span> <span class='assign token'>=</span> <span class='reify_results identifier id'>reify_results</span><span class='lparen token'>(</span><span class='@results ivar id'>@results</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='reify identifier id'>reify</span>
    
    <span class='say identifier id'>say</span> <span class='dstring node'>&quot;warning; #{response[:warning]}&quot;</span> <span class='if if_mod kw'>if</span> <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='symbol val'>:warning</span><span class='rbrack token'>]</span>
    <span class='raise identifier id'>raise</span> <span class='UsageError constant id'>UsageError</span><span class='comma token'>,</span> <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='symbol val'>:error</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='symbol val'>:error</span><span class='rbrack token'>]</span>
    
  <span class='end end kw'>end</span>      
  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>run?</h3>
</div><div id="run-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>run?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns whether the query has been run.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 259</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L259">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">259
260
261</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='run? fid id'>run?</span>
  <span class='notop op'>!</span><span class='@response ivar id'>@response</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>say</h3>
</div><div id="say-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>say</span><span class='args'>(msg)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 448</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L448">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">448
449
450</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='say identifier id'>say</span> <span class='msg identifier id'>msg</span> 
  <span class='Ultrasphinx constant id'>Ultrasphinx</span><span class='dot token'>.</span><span class='say identifier id'>say</span> <span class='msg identifier id'>msg</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>subtotals</h3>
</div><div id="subtotals-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>subtotals</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a hash of total result counts, scoped to each available model. Set
<tt>Ultrasphinx::Search.client_options[:with_subtotals] = true</tt> to
enable.
</p>
<p>
The subtotals are implemented as a special type of facet.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="UsageError.html" title="UsageError">UsageError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 240</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L240">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">240
241
242
243
244</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='subtotals identifier id'>subtotals</span>
  <span class='raise identifier id'>raise</span> <span class='UsageError constant id'>UsageError</span><span class='comma token'>,</span> <span class='string val'>&quot;Subtotals are not enabled&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='client_options identifier id'>client_options</span><span class='lbrack token'>[</span><span class='string val'>'with_subtotals'</span><span class='rbrack token'>]</span>
  <span class='require_run identifier id'>require_run</span>
  <span class='@subtotals ivar id'>@subtotals</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>time</h3>
</div><div id="time-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>time</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the response time of the query, in milliseconds.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 253</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L253">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">253
254
255
256</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='time identifier id'>time</span>
  <span class='require_run identifier id'>require_run</span>
  <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='symbol val'>:time</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>total_entries</h3>
</div><div id="total_entries-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>total_entries</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the total result count.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/ultrasphinx/search.rb', line 247</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/fauna/ultrasphinx/blob/e3fe8c6a055fb19219b115b17c3d581c7b301e2d/lib/ultrasphinx/search.rb#L247">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">247
248
249
250</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='total_entries identifier id'>total_entries</span>
  <span class='require_run identifier id'>require_run</span>
  <span class='lbrack token'>[</span><span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='symbol val'>:total_found</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='MAX_MATCHES constant id'>MAX_MATCHES</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='min identifier id'>min</span>
<span class='end end kw'>end</span>  
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>