<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>mongodb's activerecord-mongo-adapter - Class: ActiveRecord::Base - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/mongodb/commits/activerecord-mongo-adapter/master" rel="alternate" title="Recent Commits to activerecord-mongo-adapter:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("mongodb", "activerecord-mongo-adapter", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("mongodb", "activerecord-mongo-adapter", "76bd9753522989e108d61b612f506aaf6c930113", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/mongodb/activerecord-mongo-adapter/tree/">Source</a></li>
            <li class=""><a href="http://github.com/mongodb/activerecord-mongo-adapter/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/mongodb/activerecord-mongo-adapter/network">Network</a></li>            
            <li class=""><a href="http://github.com/mongodb/activerecord-mongo-adapter/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/mongodb/activerecord-mongo-adapter">Wiki</a></li>
            <li class=""><a href="http://github.com/mongodb/activerecord-mongo-adapter/graphs">Graphs</a></li>                    
            <li class="active"><a href="/mongodb/activerecord-mongo-adapter">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/mongodb">mongodb</a> / <b><a href="http://github.com/mongodb/activerecord-mongo-adapter/tree">activerecord-mongo-adapter</a></b>        
                <a id="namespaces_button" rel="mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class ActiveRecord_Base">
  <h1>Class: ActiveRecord::Base</h1>
  <div class="section inheritance">
  <ul>
  <li><a href="../Object.html" title="Object">Object</a></li><ul><li>ActiveRecord::Base</li>
  </ul></ul>
</div><div class="section docstring">
  <p>
We override a number of ActiveRecord::Base methods to make it work with
Mongo.
</p>

</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#collection-class_method">collection</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Return the Mongo collection for this class.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#collection_info-class_method">collection_info</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Return information about the schema defined in the file named by
ENV[&#8216;SCHEMA&#8217;] or, if that is not defined, db/schema.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#columns-class_method">columns</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns an array of column objects for the table associated with this
class.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#connected-3F-class_method">connected?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Always returns <tt>true</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#connection-class_method">connection</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Set the database connection.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#count-class_method">count</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Count operates using two different approaches.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#count_by_sql-class_method">count_by_sql</span><span class='args'>(sql)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the result of an SQL statement that should only include a COUNT(*)
in the SELECT part.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#decrement_counter-class_method">decrement_counter</span><span class='args'>(counter_name, id)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Works like increment_counter, but decrements instead.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete-class_method">delete</span><span class='args'>(id)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes the record with the given <tt>id</tt> without instantiating an
object first.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete_all-class_method">delete_all</span><span class='args'>(conditions = &quot;&quot;)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes all the records that match the <tt>condition</tt> without
instantiating the objects first (and hence not calling the destroy method).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#establish_connection-class_method">establish_connection</span><span class='args'>(spec = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Does nothing.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#find_by_sql-class_method">find_by_sql</span><span class='args'>(sql)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h6>==========</h6>
<p>
Works like find(:all), but requires a complete SQL string.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#increment_counter-class_method">increment_counter</span><span class='args'>(counter_name, id)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Increments the specified counter by one.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#mongo_connection-class_method">mongo_connection</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#primary_key-class_method">primary_key</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Defines the primary key field &#8212; can be overridden in subclasses.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#remove_connection-class_method">remove_connection</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Does nothing.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#reset_sequence_name-class_method">reset_sequence_name</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#retrieve_connection-class_method">retrieve_connection</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Return the connection.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#sanitize-class_method">sanitize</span><span class='args'>(object)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Used to sanitize objects before they&#8217;re used in an SELECT
SQL-statement.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#table_exists-3F-class_method">table_exists?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Indicates whether the table associated with this class exists.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#update_all-class_method">update_all</span><span class='args'>(updates, conditions = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Updates all records with the SET-part of an SQL update statement in
<tt>updates</tt> and returns an integer with the number of rows updated.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#destroy-instance_method">#destroy</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8217;t be persisted).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_mongo_value-instance_method">#to_mongo_value</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Convert this object to a Mongo value suitable for saving to the database.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>collection</h3>
</div><div id="collection-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>collection</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Return the Mongo collection for this class.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 44</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L44">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">44
45
46</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='collection identifier id'>collection</span>
  <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='db identifier id'>db</span><span class='dot token'>.</span><span class='collection identifier id'>collection</span><span class='lparen token'>(</span><span class='table_name identifier id'>table_name</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>collection_info</h3>
</div><div id="collection_info-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>collection_info</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Return information about the schema defined in the file named by
ENV[&#8216;SCHEMA&#8217;] or, if that is not defined, db/schema.rb.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 34</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L34">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">34
35
36
37
38
39
40
41</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='collection_info identifier id'>collection_info</span>
  <span class='unless unless kw'>unless</span> <span class='defined? defined kw'>defined?</span> <span class='@@collection_info ivar id'>@@collection_info</span>
    <span class='file identifier id'>file</span> <span class='assign token'>=</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SCHEMA'</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='string val'>'db/schema.rb'</span>
    <span class='load identifier id'>load</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span>
    <span class='@@collection_info ivar id'>@@collection_info</span> <span class='assign token'>=</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Schema constant id'>Schema</span><span class='dot token'>.</span><span class='collection_info identifier id'>collection_info</span>
  <span class='end end kw'>end</span>
  <span class='@@collection_info ivar id'>@@collection_info</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>columns</h3>
</div><div id="columns-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>columns</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns an array of column objects for the table associated with this
class.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 213</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L213">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">213
214
215
216
217
218
219
220
221
222</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='columns identifier id'>columns</span>
  <span class='unless unless kw'>unless</span> <span class='@columns ivar id'>@columns</span>
    <span class='@columns ivar id'>@columns</span> <span class='assign token'>=</span> <span class='collection_info identifier id'>collection_info</span><span class='lbrack token'>[</span><span class='table_name identifier id'>table_name</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='columns identifier id'>columns</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='col_def identifier id'>col_def</span><span class='bitor op'>|</span>
      <span class='col identifier id'>col</span> <span class='assign token'>=</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='ConnectionAdapters constant id'>ConnectionAdapters</span><span class='colon2 op'>::</span><span class='Column constant id'>Column</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='col_def identifier id'>col_def</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='col_def identifier id'>col_def</span><span class='dot token'>.</span><span class='default identifier id'>default</span><span class='comma token'>,</span> <span class='col_def identifier id'>col_def</span><span class='dot token'>.</span><span class='sql_type identifier id'>sql_type</span><span class='comma token'>,</span> <span class='col_def identifier id'>col_def</span><span class='dot token'>.</span><span class='null identifier id'>null</span><span class='rparen token'>)</span>
      <span class='col identifier id'>col</span><span class='dot token'>.</span><span class='primary identifier id'>primary</span> <span class='assign token'>=</span> <span class='col identifier id'>col</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='eq op'>==</span> <span class='primary_key identifier id'>primary_key</span>
      <span class='col identifier id'>col</span>
    <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
  <span class='@columns ivar id'>@columns</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>connected?</h3>
</div><div id="connected-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>connected?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Always returns <tt>true</tt>.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 71</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L71">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">71</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='connected? fid id'>connected?</span><span class='semicolon token'>;</span> <span class='true true kw'>true</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>connection</h3>
</div><div id="connection-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>connection</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Set the database connection. If the connection is set to <tt>nil</tt>, then
an ActiveRecord::ConnectionAdapters::MongoPseudoConnection that uses
<tt>$db</tt> will be used.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 53</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L53">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">53
54
55</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='connection= identifier id'>connection=</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='rparen token'>)</span>
  <span class='@@mongo_connection ivar id'>@@mongo_connection</span> <span class='assign token'>=</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='ConnectionAdapters constant id'>ConnectionAdapters</span><span class='colon2 op'>::</span><span class='MongoPseudoConnection constant id'>MongoPseudoConnection</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='db identifier id'>db</span> <span class='orop op'>||</span> <span class='$db gvar id'>$db</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>count</h3>
</div><div id="count-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>count</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Count operates using two different approaches.
</p>
<ul>
<li>Count all: By not passing any parameters to count, it will return a count
of all the rows for the model.

</li>
<li>Count using options will find the row count matched by the options used.

</li>
</ul>
<p>
The last approach, count using options, accepts an option hash as the only
parameter. The options are:
</p>
<ul>
<li><tt>:conditions</tt> - An SQL fragment like &quot;administrator = 1&quot;
or [ &quot;user_name = ?&quot;, username ]. See conditions in the intro.

</li>
<li><tt>:joins</tt> - An SQL fragment for additional joins like &quot;LEFT JOIN
comments ON comments.post_id = id&quot;. (Rarely needed). The records will
be returned read-only since they will have attributes that do not
correspond to the table&#8217;s columns.

</li>
<li><tt>:include</tt> - Named associations that should be loaded alongside
using LEFT OUTER JOINs. The symbols named refer to already defined
associations. When using named associations count returns the number
DISTINCT items for the model you&#8217;re counting. See eager loading under
Associations.

</li>
<li><tt>:order</tt> - An SQL fragment like &quot;created_at DESC, name&quot;
(really only used with GROUP BY calculations).

</li>
<li><tt>:group</tt> - An attribute name by which the result should be grouped.
Uses the GROUP BY SQL-clause.

</li>
<li><tt>:select</tt> - By default, this is * as in SELECT * FROM, but can be
changed if you for example want to do a join, but not include the joined
columns.

</li>
<li><tt>:distinct</tt> - Set this to true to make this a distinct calculation,
such as SELECT COUNT(DISTINCT posts.id) &#8230;

</li>
</ul>
<p>
Examples for counting all:
</p>
<pre class="code">
  <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='count identifier id'>count</span>         <span class='comment val'># returns the total count of all people</span>
</pre>
<p>
Examples for count by <tt>conditions</tt> and <tt>joins</tt> (this has been
deprecated):
</p>
<pre class="code">
  <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='string val'>&quot;age &gt; 26&quot;</span><span class='rparen token'>)</span>  <span class='comment val'># returns the number of people older than 26</span>
  <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;age &gt; 26 AND job.salary &gt; 60000&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;LEFT JOIN jobs on jobs.person_id = person.id&quot;</span><span class='rparen token'>)</span> <span class='comment val'># returns the total number of rows matching the conditions and joins fetched by SELECT COUNT(*).</span>
</pre>
<p>
Examples for count with options:
</p>
<pre class="code">
  <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;age &gt; 26&quot;</span><span class='rparen token'>)</span>
  <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;age &gt; 26 AND job.salary &gt; 60000&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:include</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:job</span><span class='rparen token'>)</span> <span class='comment val'># because of the named association, it finds the DISTINCT count using LEFT OUTER JOIN.</span>
  <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;age &gt; 26 AND job.salary &gt; 60000&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:joins</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;LEFT JOIN jobs on jobs.person_id = person.id&quot;</span><span class='rparen token'>)</span> <span class='comment val'># finds the number of rows matching the conditions and joins.</span>
  <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='string val'>'id'</span><span class='comma token'>,</span> <span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;age &gt; 26&quot;</span><span class='rparen token'>)</span> <span class='comment val'># Performs a COUNT(id)</span>
  <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='symbol val'>:all</span><span class='comma token'>,</span> <span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;age &gt; 26&quot;</span><span class='rparen token'>)</span> <span class='comment val'># Performs a COUNT(*) (:all is an alias for '*')</span>
</pre>
<p>
Note: Person.count(:all) will not work because it will use :all as the
condition. Use Person.count instead.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 145</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L145">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='args identifier id'>args</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span> <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='args identifier id'>args</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:empty?</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span><span class='rparen token'>)</span>

  <span class='comment val'># Ignore first arg if it is not a Hash</span>
  <span class='a identifier id'>a</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:construct_count_options_from_legacy_args</span><span class='rparen token'>)</span> <span class='question op'>?</span>
      <span class='construct_count_options_from_legacy_args identifier id'>construct_count_options_from_legacy_args</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='colon op'>:</span>
      <span class='construct_count_options_from_args identifier id'>construct_count_options_from_args</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='column_name identifier id'>column_name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='mult op'>*</span><span class='a identifier id'>a</span>
  <span class='criteria identifier id'>criteria</span> <span class='assign token'>=</span> <span class='criteria_from identifier id'>criteria_from</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:conditions</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='where_func identifier id'>where_func</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:where</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='criteria identifier id'>criteria</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ex identifier id'>ex</span>
  <span class='if if kw'>if</span> <span class='ex identifier id'>ex</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='match op'>=~</span> <span class='regexp val'>/Error with count command.*ns missing/</span>
        <span class='comment val'># Return 0 because we will graciously assume that we are being</span>
        <span class='comment val'># called from a subclass that has been initialized properly, and</span>
        <span class='comment val'># is therefore mentioned in the schema.</span>
    <span class='integer val'>0</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='ex identifier id'>ex</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>count_by_sql</h3>
</div><div id="count_by_sql-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>count_by_sql</span><span class='args'>(sql)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the result of an SQL statement that should only include a COUNT(*)
in the SELECT part.
</p>
<pre class="code">
  <span class='Product constant id'>Product</span><span class='dot token'>.</span><span class='count_by_sql identifier id'>count_by_sql</span> <span class='string val'>&quot;SELECT COUNT(*) FROM sales s, customers c WHERE s.customer_id = c.id&quot;</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 168</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L168">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">168
169
170
171</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='count_by_sql identifier id'>count_by_sql</span><span class='lparen token'>(</span><span class='sql identifier id'>sql</span><span class='rparen token'>)</span>
  <span class='sql identifier id'>sql</span> <span class='match op'>=~</span> <span class='regexp val'>/.*\bwhere\b(.*)/i</span>
  <span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='$1 nth_ref id'>$1</span> <span class='orop op'>||</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>decrement_counter</h3>
</div><div id="decrement_counter-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>decrement_counter</span><span class='args'>(counter_name, id)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Works like increment_counter, but decrements instead.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 187</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L187">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">187
188
189
190
191
192
193</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='decrement_counter identifier id'>decrement_counter</span><span class='lparen token'>(</span><span class='counter_name identifier id'>counter_name</span><span class='comma token'>,</span> <span class='id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='sel identifier id'>sel</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='id identifier id'>id</span><span class='rbrace token'>}</span>
  <span class='rec identifier id'>rec</span> <span class='assign token'>=</span> <span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='find_first identifier id'>find_first</span><span class='lparen token'>(</span><span class='sel identifier id'>sel</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;counter named \&quot;#{counter_name}\&quot; was not found&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='rec identifier id'>rec</span>
  <span class='rec identifier id'>rec</span><span class='lbrack token'>[</span><span class='counter_name identifier id'>counter_name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='opasgn op'>-=</span> <span class='integer val'>1</span>
  <span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='replace identifier id'>replace</span><span class='lparen token'>(</span><span class='sel identifier id'>sel</span><span class='comma token'>,</span> <span class='rec identifier id'>rec</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete</h3>
</div><div id="delete-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete</span><span class='args'>(id)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes the record with the given <tt>id</tt> without instantiating an
object first. If an array of ids is provided, all of them are deleted.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 89</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L89">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">89
90
91</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='string val'>'_id'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='id identifier id'>id</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete_all</h3>
</div><div id="delete_all-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete_all</span><span class='args'>(conditions = &quot;&quot;)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes all the records that match the <tt>condition</tt> without
instantiating the objects first (and hence not calling the destroy method).
Example:
</p>
<pre class="code">
  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='delete_all identifier id'>delete_all</span> <span class='string val'>&quot;person_id = 5 AND (category = 'Something' OR category = 'Else')&quot;</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 107</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L107">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">107
108
109</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete_all identifier id'>delete_all</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
  <span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='MongoRecord constant id'>MongoRecord</span><span class='colon2 op'>::</span><span class='SQL constant id'>SQL</span><span class='colon2 op'>::</span><span class='Parser constant id'>Parser</span><span class='dot token'>.</span><span class='parse_where identifier id'>parse_where</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>establish_connection</h3>
</div><div id="establish_connection-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>establish_connection</span><span class='args'>(spec = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Does nothing.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 65</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L65">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">65</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='establish_connection identifier id'>establish_connection</span><span class='lparen token'>(</span><span class='spec identifier id'>spec</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>find_by_sql</h3>
</div><div id="find_by_sql-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>find_by_sql</span><span class='args'>(sql)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h6>==========</h6>
<p>
Works like find(:all), but requires a complete SQL string. Examples:
</p>
<pre class="code">
  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='find_by_sql identifier id'>find_by_sql</span> <span class='string val'>&quot;SELECT p.*, c.author FROM posts p, comments c WHERE p.id = c.post_id&quot;</span>
  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='find_by_sql identifier id'>find_by_sql</span> <span class='lbrack token'>[</span><span class='string val'>&quot;SELECT * FROM posts WHERE author = ? AND created &gt; ?&quot;</span><span class='comma token'>,</span> <span class='author_id identifier id'>author_id</span><span class='comma token'>,</span> <span class='start_date identifier id'>start_date</span><span class='rbrack token'>]</span>
</pre>
<p>
Note: this method is not implemented. It will raise &quot;not
implemented&quot;.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 83</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L83">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">83
84
85</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='find_by_sql identifier id'>find_by_sql</span><span class='lparen token'>(</span><span class='sql identifier id'>sql</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='string val'>&quot;not implemented&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>increment_counter</h3>
</div><div id="increment_counter-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>increment_counter</span><span class='args'>(counter_name, id)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Increments the specified counter by one. So
<tt>DiscussionBoard.increment_counter(&quot;post_count&quot;,
discussion_board_id)</tt> would increment the &quot;post_count&quot;
counter on the board responding to discussion_board_id. This is used for
caching aggregate values, so that they don&#8217;t need to be computed
every time. Especially important for looping over a collection where each
element require a number of aggregate values. Like the DiscussionBoard that
needs to list both the number of posts and comments.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 178</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L178">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">178
179
180
181
182
183
184</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='increment_counter identifier id'>increment_counter</span><span class='lparen token'>(</span><span class='counter_name identifier id'>counter_name</span><span class='comma token'>,</span> <span class='id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='sel identifier id'>sel</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='id identifier id'>id</span><span class='rbrace token'>}</span>
  <span class='rec identifier id'>rec</span> <span class='assign token'>=</span> <span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='find_first identifier id'>find_first</span><span class='lparen token'>(</span><span class='sel identifier id'>sel</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;counter named \&quot;#{counter_name}\&quot; was not found&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='rec identifier id'>rec</span>
  <span class='rec identifier id'>rec</span><span class='lbrack token'>[</span><span class='counter_name identifier id'>counter_name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
  <span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='replace identifier id'>replace</span><span class='lparen token'>(</span><span class='sel identifier id'>sel</span><span class='comma token'>,</span> <span class='rec identifier id'>rec</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>mongo_connection</h3>
</div><div id="mongo_connection-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>mongo_connection</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/active_record/connection_adapters/mongo_adapter.rb', line 3</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/active_record/connection_adapters/mongo_adapter.rb#L3">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">3
4</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='mongo_connection identifier id'>mongo_connection</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>primary_key</h3>
</div><div id="primary_key-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>primary_key</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Defines the primary key field &#8212; can be overridden in subclasses.
Overwriting will negate any effect of the primary_key_prefix_type setting,
though.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 197</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L197">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">197
198
199</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='primary_key identifier id'>primary_key</span>
  <span class='string val'>'_id'</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>remove_connection</h3>
</div><div id="remove_connection-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>remove_connection</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Does nothing.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 74</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L74">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">74</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='remove_connection identifier id'>remove_connection</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reset_sequence_name</h3>
</div><div id="reset_sequence_name-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>reset_sequence_name</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 201</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L201">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">201
202
203
204
205</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='reset_sequence_name identifier id'>reset_sequence_name</span> 
  <span class='default identifier id'>default</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='set_sequence_name identifier id'>set_sequence_name</span><span class='lparen token'>(</span><span class='default identifier id'>default</span><span class='rparen token'>)</span>
  <span class='default identifier id'>default</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>retrieve_connection</h3>
</div><div id="retrieve_connection-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>retrieve_connection</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Return the connection.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 68</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L68">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">68</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='retrieve_connection identifier id'>retrieve_connection</span><span class='semicolon token'>;</span> <span class='connection identifier id'>connection</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>sanitize</h3>
</div><div id="sanitize-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>sanitize</span><span class='args'>(object)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Used to sanitize objects before they&#8217;re used in an SELECT
SQL-statement.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 225</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L225">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">225
226
227</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='sanitize identifier id'>sanitize</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='quote_value identifier id'>quote_value</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>table_exists?</h3>
</div><div id="table_exists-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>table_exists?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Indicates whether the table associated with this class exists
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 208</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L208">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">208
209
210</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='table_exists? fid id'>table_exists?</span>
  <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>update_all</h3>
</div><div id="update_all-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>update_all</span><span class='args'>(updates, conditions = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Updates all records with the SET-part of an SQL update statement in
<tt>updates</tt> and returns an integer with the number of rows updated. A
subset of the records can be selected by specifying <tt>conditions</tt>.
Example:
</p>
<pre class="code">
  <span class='Billing constant id'>Billing</span><span class='dot token'>.</span><span class='update_all identifier id'>update_all</span> <span class='string val'>&quot;category = 'authorized', approved = 1&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;author = 'David'&quot;</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 96</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L96">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">96
97
98
99
100
101
102</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='update_all identifier id'>update_all</span><span class='lparen token'>(</span><span class='updates identifier id'>updates</span><span class='comma token'>,</span> <span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='comment val'># TODO</span>
  <span class='raise identifier id'>raise</span> <span class='string val'>&quot;not implemented&quot;</span>
<span class='comment val'>#         sql  = &quot;UPDATE #{table_name} SET #{sanitize_sql(updates)} &quot;</span>
<span class='comment val'>#         add_conditions!(sql, conditions, scope(:find))</span>
<span class='comment val'>#         connection.update(sql, &quot;#{name} Update&quot;)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>destroy</h3>
</div><div id="destroy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>destroy</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8217;t be persisted).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 391</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L391">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">391
392
393
394
395
396</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='destroy identifier id'>destroy</span>
  <span class='unless unless kw'>unless</span> <span class='new_record? fid id'>new_record?</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='symbol val'>:_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='freeze identifier id'>freeze</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_mongo_value</h3>
</div><div id="to_mongo_value-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_mongo_value</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Convert this object to a Mongo value suitable for saving to the database.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo_record/active_record/base.rb', line 400</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/activerecord-mongo-adapter/blob/76bd9753522989e108d61b612f506aaf6c930113/lib/mongo_record/active_record/base.rb#L400">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">400
401
402
403
404
405
406
407</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_mongo_value identifier id'>to_mongo_value</span>
  <span class='h identifier id'>h</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='column_names identifier id'>column_names</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='iv identifier id'>iv</span><span class='bitor op'>|</span>
    <span class='val identifier id'>val</span> <span class='assign token'>=</span> <span class='read_attribute identifier id'>read_attribute</span><span class='lparen token'>(</span><span class='iv identifier id'>iv</span><span class='rparen token'>)</span>
    <span class='h identifier id'>h</span><span class='lbrack token'>[</span><span class='iv identifier id'>iv</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span> <span class='question op'>?</span> <span class='nil nil kw'>nil</span> <span class='colon op'>:</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_mongo_value identifier id'>to_mongo_value</span>
  <span class='rbrace token'>}</span>
  <span class='h identifier id'>h</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>