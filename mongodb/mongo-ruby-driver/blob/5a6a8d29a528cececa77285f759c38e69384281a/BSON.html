<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>mongodb's mongo-ruby-driver - Class: BSON - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/mongodb/commits/mongo-ruby-driver/master" rel="alternate" title="Recent Commits to mongo-ruby-driver:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("mongodb", "mongo-ruby-driver", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("mongodb", "mongo-ruby-driver", "5a6a8d29a528cececa77285f759c38e69384281a", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/mongodb/mongo-ruby-driver/tree/">Source</a></li>
            <li class=""><a href="http://github.com/mongodb/mongo-ruby-driver/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/mongodb/mongo-ruby-driver/network">Network</a></li>            
            <li class=""><a href="http://github.com/mongodb/mongo-ruby-driver/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/mongodb/mongo-ruby-driver">Wiki</a></li>
            <li class=""><a href="http://github.com/mongodb/mongo-ruby-driver/graphs">Graphs</a></li>                    
            <li class="active"><a href="/mongodb/mongo-ruby-driver">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/mongodb">mongodb</a> / <b><a href="http://github.com/mongodb/mongo-ruby-driver/tree">mongo-ruby-driver</a></b>        
                <a id="namespaces_button" rel="mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class BSON">
  <h1>Class: BSON</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="XGen/Mongo/Driver.html" title="XGen::Mongo::Driver">XGen::Mongo::Driver</a></p>
</div><div class="section docstring">
  <p>
A BSON seralizer/deserializer.
</p>

</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="ARRAY-constant">ARRAY</dt>
      <dd>4</dd>
    
      <dt id="BINARY-constant">BINARY</dt>
      <dd>5</dd>
    
      <dt id="BOOLEAN-constant">BOOLEAN</dt>
      <dd>8</dd>
    
      <dt id="CODE-constant">CODE</dt>
      <dd>13</dd>
    
      <dt id="CODE_W_SCOPE-constant">CODE_W_SCOPE</dt>
      <dd>15</dd>
    
      <dt id="DATE-constant">DATE</dt>
      <dd>9</dd>
    
      <dt id="EOO-constant">EOO</dt>
      <dd>0</dd>
    
      <dt id="MAXKEY-constant">MAXKEY</dt>
      <dd>127</dd>
    
      <dt id="MINKEY-constant">MINKEY</dt>
      <dd>-1</dd>
    
      <dt id="NULL-constant">NULL</dt>
      <dd>10</dd>
    
      <dt id="NUMBER-constant">NUMBER</dt>
      <dd>1</dd>
    
      <dt id="NUMBER_INT-constant">NUMBER_INT</dt>
      <dd>16</dd>
    
      <dt id="OBJECT-constant">OBJECT</dt>
      <dd>3</dd>
    
      <dt id="OID-constant">OID</dt>
      <dd>7</dd>
    
      <dt id="REF-constant">REF</dt>
      <dd>12</dd>
    
      <dt id="REGEX-constant">REGEX</dt>
      <dd>11</dd>
    
      <dt id="STRING-constant">STRING</dt>
      <dd>2</dd>
    
      <dt id="SYMBOL-constant">SYMBOL</dt>
      <dd>14</dd>
    
      <dt id="TIMESTAMP-constant">TIMESTAMP</dt>
      <dd>17</dd>
    
      <dt id="UNDEFINED-constant">UNDEFINED</dt>
      <dd>6</dd>
    
  </dl>
</div>
<div class="included">
  
  <div>
    <h2>Constants Included from <a href="XGen/Mongo/Driver.html" title="XGen::Mongo::Driver">XGen::Mongo::Driver</a></h2>
    <p><span class='name'><a href="XGen/Mongo/Driver.html#OP_DELETE-constant" title="OP_DELETE">OP_DELETE</a></span>, <span class='name'><a href="XGen/Mongo/Driver.html#OP_GET_MORE-constant" title="OP_GET_MORE">OP_GET_MORE</a></span>, <span class='name'><a href="XGen/Mongo/Driver.html#OP_INSERT-constant" title="OP_INSERT">OP_INSERT</a></span>, <span class='name'><a href="XGen/Mongo/Driver.html#OP_KILL_CURSORS-constant" title="OP_KILL_CURSORS">OP_KILL_CURSORS</a></span>, <span class='name'><a href="XGen/Mongo/Driver.html#OP_MSG-constant" title="OP_MSG">OP_MSG</a></span>, <span class='name'><a href="XGen/Mongo/Driver.html#OP_QUERY-constant" title="OP_QUERY">OP_QUERY</a></span>, <span class='name'><a href="XGen/Mongo/Driver.html#OP_REPLY-constant" title="OP_REPLY">OP_REPLY</a></span>, <span class='name'><a href="XGen/Mongo/Driver.html#OP_UPDATE-constant" title="OP_UPDATE">OP_UPDATE</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 66</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L66">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">66
67
68</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='@buf ivar id'>@buf</span> <span class='assign token'>=</span> <span class='ByteBuffer constant id'>ByteBuffer</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_cstr-class_method">serialize_cstr</span><span class='args'>(buf, val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#bson_type-instance_method">#bson_type</span><span class='args'>(o)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_array_data-instance_method">#deserialize_array_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_binary_data-instance_method">#deserialize_binary_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_boolean_data-instance_method">#deserialize_boolean_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_code_w_scope_data-instance_method">#deserialize_code_w_scope_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_cstr-instance_method">#deserialize_cstr</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_date_data-instance_method">#deserialize_date_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_dbref_data-instance_method">#deserialize_dbref_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_number_data-instance_method">#deserialize_number_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_number_int_data-instance_method">#deserialize_number_int_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_object_data-instance_method">#deserialize_object_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_oid_data-instance_method">#deserialize_oid_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_regex_data-instance_method">#deserialize_regex_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#deserialize_string_data-instance_method">#deserialize_string_data</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#hex_dump-instance_method">#hex_dump</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
For debugging.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_array_element-instance_method">#serialize_array_element</span><span class='args'>(buf, key, val, check_keys)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_binary_element-instance_method">#serialize_binary_element</span><span class='args'>(buf, key, val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_boolean_element-instance_method">#serialize_boolean_element</span><span class='args'>(buf, key, val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_code_w_scope-instance_method">#serialize_code_w_scope</span><span class='args'>(buf, key, val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_date_element-instance_method">#serialize_date_element</span><span class='args'>(buf, key, val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_dbref_element-instance_method">#serialize_dbref_element</span><span class='args'>(buf, key, val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_eoo_element-instance_method">#serialize_eoo_element</span><span class='args'>(buf)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_key_value-instance_method">#serialize_key_value</span><span class='args'>(k, v, check_keys)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_null_element-instance_method">#serialize_null_element</span><span class='args'>(buf, key)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_number_element-instance_method">#serialize_number_element</span><span class='args'>(buf, key, val, type)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_object_element-instance_method">#serialize_object_element</span><span class='args'>(buf, key, val, check_keys, opcode = OBJECT)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_oid_element-instance_method">#serialize_oid_element</span><span class='args'>(buf, key, val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_regex_element-instance_method">#serialize_regex_element</span><span class='args'>(buf, key, val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_string_element-instance_method">#serialize_string_element</span><span class='args'>(buf, key, val, type)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#serialize_undefined_element-instance_method">#serialize_undefined_element</span><span class='args'>(buf, key)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_a-instance_method">#to_a</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_cstr</h3>
</div><div id="serialize_cstr-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_cstr</span><span class='args'>(buf, val)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 62</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L62">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">62
63
64</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_array identifier id'>put_array</span><span class='lparen token'>(</span><span class='to_utf8 identifier id'>to_utf8</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='unpack identifier id'>unpack</span><span class='lparen token'>(</span><span class='string val'>&quot;C*&quot;</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>bson_type</h3>
</div><div id="bson_type-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>bson_type</span><span class='args'>(o)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 497</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L497">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='bson_type identifier id'>bson_type</span><span class='lparen token'>(</span><span class='o identifier id'>o</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='o identifier id'>o</span>
  <span class='when when kw'>when</span> <span class='nil nil kw'>nil</span>
    <span class='NULL constant id'>NULL</span>
  <span class='when when kw'>when</span> <span class='Integer constant id'>Integer</span>
    <span class='NUMBER_INT constant id'>NUMBER_INT</span>
  <span class='when when kw'>when</span> <span class='Numeric constant id'>Numeric</span>
    <span class='NUMBER constant id'>NUMBER</span>
  <span class='when when kw'>when</span> <span class='ByteBuffer constant id'>ByteBuffer</span>
    <span class='BINARY constant id'>BINARY</span>
  <span class='when when kw'>when</span> <span class='Code constant id'>Code</span>
    <span class='CODE_W_SCOPE constant id'>CODE_W_SCOPE</span>
  <span class='when when kw'>when</span> <span class='String constant id'>String</span>
    <span class='STRING constant id'>STRING</span>
  <span class='when when kw'>when</span> <span class='Array constant id'>Array</span>
    <span class='ARRAY constant id'>ARRAY</span>
  <span class='when when kw'>when</span> <span class='Regexp constant id'>Regexp</span>
    <span class='REGEX constant id'>REGEX</span>
  <span class='when when kw'>when</span> <span class='ObjectID constant id'>ObjectID</span>
    <span class='OID constant id'>OID</span>
  <span class='when when kw'>when</span> <span class='DBRef constant id'>DBRef</span>
    <span class='REF constant id'>REF</span>
  <span class='when when kw'>when</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='false false kw'>false</span>
    <span class='BOOLEAN constant id'>BOOLEAN</span>
  <span class='when when kw'>when</span> <span class='Time constant id'>Time</span>
    <span class='DATE constant id'>DATE</span>
  <span class='when when kw'>when</span> <span class='Hash constant id'>Hash</span>
    <span class='OBJECT constant id'>OBJECT</span>
  <span class='when when kw'>when</span> <span class='Symbol constant id'>Symbol</span>
    <span class='SYMBOL constant id'>SYMBOL</span>
  <span class='when when kw'>when</span> <span class='Undefined constant id'>Undefined</span>
    <span class='UNDEFINED constant id'>UNDEFINED</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Unknown type of object: #{o.class.name}&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_array_data</h3>
</div><div id="deserialize_array_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_array_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 277</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L277">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">277
278
279
280
281
282</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_array_data identifier id'>deserialize_array_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='h identifier id'>h</span> <span class='assign token'>=</span> <span class='deserialize_object_data identifier id'>deserialize_object_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='a identifier id'>a</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='h identifier id'>h</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='a identifier id'>a</span><span class='lbrack token'>[</span><span class='k identifier id'>k</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span> <span class='rbrace token'>}</span>
  <span class='a identifier id'>a</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_binary_data</h3>
</div><div id="deserialize_binary_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_binary_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 336</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L336">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">336
337
338
339
340
341</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_binary_data identifier id'>deserialize_binary_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='len identifier id'>len</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get_int identifier id'>get_int</span>
  <span class='type identifier id'>type</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get identifier id'>get</span>
  <span class='len identifier id'>len</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get_int identifier id'>get_int</span> <span class='if if_mod kw'>if</span> <span class='type identifier id'>type</span> <span class='eq op'>==</span> <span class='Binary constant id'>Binary</span><span class='colon2 op'>::</span><span class='SUBTYPE_BYTES constant id'>SUBTYPE_BYTES</span>
  <span class='Binary constant id'>Binary</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='len identifier id'>len</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='type identifier id'>type</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_boolean_data</h3>
</div><div id="deserialize_boolean_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_boolean_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 251</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L251">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">251
252
253</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_boolean_data identifier id'>deserialize_boolean_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get identifier id'>get</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_code_w_scope_data</h3>
</div><div id="deserialize_code_w_scope_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_code_w_scope_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 308</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L308">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_code_w_scope_data identifier id'>deserialize_code_w_scope_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get_int identifier id'>get_int</span>
  <span class='len identifier id'>len</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get_int identifier id'>get_int</span>
  <span class='code identifier id'>code</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='len identifier id'>len</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span>
  <span class='if if kw'>if</span> <span class='code identifier id'>code</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='string val'>&quot;pack&quot;</span>
    <span class='code identifier id'>code</span> <span class='assign token'>=</span> <span class='code identifier id'>code</span><span class='dot token'>.</span><span class='pack identifier id'>pack</span><span class='lparen token'>(</span><span class='string val'>&quot;C*&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='RUBY_VERSION constant id'>RUBY_VERSION</span> <span class='geq op'>&gt;=</span> <span class='string val'>'1.9'</span>
    <span class='code identifier id'>code</span><span class='dot token'>.</span><span class='force_encoding identifier id'>force_encoding</span><span class='lparen token'>(</span><span class='string val'>&quot;utf-8&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='scope_size identifier id'>scope_size</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get_int identifier id'>get_int</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='position identifier id'>position</span> <span class='opasgn op'>-=</span> <span class='integer val'>4</span>
  <span class='scope identifier id'>scope</span> <span class='assign token'>=</span> <span class='BSON constant id'>BSON</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='deserialize identifier id'>deserialize</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='scope_size identifier id'>scope_size</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

  <span class='Code constant id'>Code</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='code identifier id'>code</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_cstr</h3>
</div><div id="deserialize_cstr-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_cstr</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 484</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L484">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">484
485
486
487
488
489
490
491
492
493
494
495</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_cstr identifier id'>deserialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='chars identifier id'>chars</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
  <span class='while while kw'>while</span> <span class='true true kw'>true</span>
    <span class='b identifier id'>b</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get identifier id'>get</span>
    <span class='break break kw'>break</span> <span class='if if_mod kw'>if</span> <span class='b identifier id'>b</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
    <span class='chars identifier id'>chars</span> <span class='lshft op'>&lt;&lt;</span> <span class='b identifier id'>b</span><span class='dot token'>.</span><span class='chr identifier id'>chr</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='RUBY_VERSION constant id'>RUBY_VERSION</span> <span class='geq op'>&gt;=</span> <span class='string val'>'1.9'</span>
    <span class='chars identifier id'>chars</span><span class='dot token'>.</span><span class='force_encoding identifier id'>force_encoding</span><span class='lparen token'>(</span><span class='string val'>&quot;utf-8&quot;</span><span class='rparen token'>)</span> <span class='comment val'># Mongo stores UTF-8</span>
  <span class='end end kw'>end</span>
  <span class='chars identifier id'>chars</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_date_data</h3>
</div><div id="deserialize_date_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_date_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 246</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L246">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">246
247
248
249</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_date_data identifier id'>deserialize_date_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='millisecs identifier id'>millisecs</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get_long identifier id'>get_long</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='millisecs identifier id'>millisecs</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span> <span class='div op'>/</span> <span class='float val'>1000.0</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='utc identifier id'>utc</span> <span class='comment val'># at() takes fractional seconds</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_dbref_data</h3>
</div><div id="deserialize_dbref_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_dbref_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 330</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L330">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">330
331
332
333
334</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_dbref_data identifier id'>deserialize_dbref_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='ns identifier id'>ns</span> <span class='assign token'>=</span> <span class='deserialize_string_data identifier id'>deserialize_string_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='oid identifier id'>oid</span> <span class='assign token'>=</span> <span class='deserialize_oid_data identifier id'>deserialize_oid_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='DBRef constant id'>DBRef</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='ns identifier id'>ns</span><span class='comma token'>,</span> <span class='oid identifier id'>oid</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_number_data</h3>
</div><div id="deserialize_number_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_number_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 255</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L255">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">255
256
257</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_number_data identifier id'>deserialize_number_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get_double identifier id'>get_double</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_number_int_data</h3>
</div><div id="deserialize_number_int_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_number_int_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 259</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L259">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">259
260
261
262
263
264</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_number_int_data identifier id'>deserialize_number_int_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='comment val'># sometimes ruby makes me angry... why would the same code pack as signed</span>
  <span class='comment val'># but unpack as unsigned</span>
  <span class='unsigned identifier id'>unsigned</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get_int identifier id'>get_int</span>
  <span class='unsigned identifier id'>unsigned</span> <span class='geq op'>&gt;=</span> <span class='integer val'>2</span><span class='pow op'>**</span><span class='integer val'>32</span> <span class='div op'>/</span> <span class='integer val'>2</span> <span class='question op'>?</span> <span class='unsigned identifier id'>unsigned</span> <span class='minus op'>-</span> <span class='integer val'>2</span><span class='pow op'>**</span><span class='integer val'>32</span> <span class='colon op'>:</span> <span class='unsigned identifier id'>unsigned</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_object_data</h3>
</div><div id="deserialize_object_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_object_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 266</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L266">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">266
267
268
269
270
271
272
273
274
275</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_object_data identifier id'>deserialize_object_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='size identifier id'>size</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get_int identifier id'>get_int</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='position identifier id'>position</span> <span class='opasgn op'>-=</span> <span class='integer val'>4</span>
  <span class='object identifier id'>object</span> <span class='assign token'>=</span> <span class='BSON constant id'>BSON</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='deserialize identifier id'>deserialize</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='size identifier id'>size</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span> <span class='string val'>&quot;$ref&quot;</span>
    <span class='DBRef constant id'>DBRef</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='lbrack token'>[</span><span class='string val'>&quot;$ref&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='lbrack token'>[</span><span class='string val'>&quot;$id&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='object identifier id'>object</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_oid_data</h3>
</div><div id="deserialize_oid_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_oid_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 326</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L326">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">326
327
328</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_oid_data identifier id'>deserialize_oid_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='ObjectID constant id'>ObjectID</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='integer val'>12</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_regex_data</h3>
</div><div id="deserialize_regex_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_regex_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 284</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L284">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">284
285
286
287
288
289
290
291
292
293</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_regex_data identifier id'>deserialize_regex_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='deserialize_cstr identifier id'>deserialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='options_str identifier id'>options_str</span> <span class='assign token'>=</span> <span class='deserialize_cstr identifier id'>deserialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='options identifier id'>options</span> <span class='opasgn op'>|=</span> <span class='Regexp constant id'>Regexp</span><span class='colon2 op'>::</span><span class='IGNORECASE constant id'>IGNORECASE</span> <span class='if if_mod kw'>if</span> <span class='options_str identifier id'>options_str</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'i'</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span> <span class='opasgn op'>|=</span> <span class='Regexp constant id'>Regexp</span><span class='colon2 op'>::</span><span class='MULTILINE constant id'>MULTILINE</span> <span class='if if_mod kw'>if</span> <span class='options_str identifier id'>options_str</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'m'</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span> <span class='opasgn op'>|=</span> <span class='Regexp constant id'>Regexp</span><span class='colon2 op'>::</span><span class='EXTENDED constant id'>EXTENDED</span> <span class='if if_mod kw'>if</span> <span class='options_str identifier id'>options_str</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'x'</span><span class='rparen token'>)</span>
  <span class='options_str identifier id'>options_str</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/[imx]/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span> <span class='comment val'># Now remove the three we understand</span>
  <span class='RegexpOfHolding constant id'>RegexpOfHolding</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='str identifier id'>str</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='options_str identifier id'>options_str</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>deserialize_string_data</h3>
</div><div id="deserialize_string_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>deserialize_string_data</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 295</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L295">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">295
296
297
298
299
300
301
302
303
304
305
306</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='deserialize_string_data identifier id'>deserialize_string_data</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='len identifier id'>len</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get_int identifier id'>get_int</span>
  <span class='bytes identifier id'>bytes</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='len identifier id'>len</span><span class='rparen token'>)</span>
  <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='bytes identifier id'>bytes</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span>
  <span class='if if kw'>if</span> <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='string val'>&quot;pack&quot;</span>
    <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='pack identifier id'>pack</span><span class='lparen token'>(</span><span class='string val'>&quot;C*&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='RUBY_VERSION constant id'>RUBY_VERSION</span> <span class='geq op'>&gt;=</span> <span class='string val'>'1.9'</span>
    <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='force_encoding identifier id'>force_encoding</span><span class='lparen token'>(</span><span class='string val'>&quot;utf-8&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='str identifier id'>str</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>hex_dump</h3>
</div><div id="hex_dump-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>hex_dump</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
For debugging.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 232</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L232">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">232
233
234
235
236
237
238
239
240
241
242
243
244</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='hex_dump identifier id'>hex_dump</span>
  <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='@buf ivar id'>@buf</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='each_with_index identifier id'>each_with_index</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='b identifier id'>b</span><span class='comma token'>,</span><span class='i identifier id'>i</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='i identifier id'>i</span> <span class='mod op'>%</span> <span class='integer val'>8</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
      <span class='str identifier id'>str</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;\n&quot;</span> <span class='if if_mod kw'>if</span> <span class='i identifier id'>i</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
      <span class='str identifier id'>str</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>'%4d:  '</span> <span class='mod op'>%</span> <span class='i identifier id'>i</span>
    <span class='else else kw'>else</span>
      <span class='str identifier id'>str</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>' '</span>
    <span class='end end kw'>end</span>
    <span class='str identifier id'>str</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>'%02X'</span> <span class='mod op'>%</span> <span class='b identifier id'>b</span>
  <span class='rbrace token'>}</span>
  <span class='str identifier id'>str</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_array_element</h3>
</div><div id="serialize_array_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_array_element</span><span class='args'>(buf, key, val, check_keys)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 415</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L415">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">415
416
417
418
419
420
421</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_array_element identifier id'>serialize_array_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='comma token'>,</span> <span class='check_keys identifier id'>check_keys</span><span class='rparen token'>)</span>
  <span class='comment val'># Turn array into hash with integer indices as keys</span>
  <span class='h identifier id'>h</span> <span class='assign token'>=</span> <span class='OrderedHash constant id'>OrderedHash</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='i identifier id'>i</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='h identifier id'>h</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span><span class='semicolon token'>;</span> <span class='i identifier id'>i</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span> <span class='rbrace token'>}</span>
  <span class='serialize_object_element identifier id'>serialize_object_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='h identifier id'>h</span><span class='comma token'>,</span> <span class='check_keys identifier id'>check_keys</span><span class='comma token'>,</span> <span class='ARRAY constant id'>ARRAY</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_binary_element</h3>
</div><div id="serialize_binary_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_binary_element</span><span class='args'>(buf, key, val)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 359</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L359">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_binary_element identifier id'>serialize_binary_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='BINARY constant id'>BINARY</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>

  <span class='bytes identifier id'>bytes</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span>
  <span class='num_bytes identifier id'>num_bytes</span> <span class='assign token'>=</span> <span class='bytes identifier id'>bytes</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
  <span class='subtype identifier id'>subtype</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:subtype</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='subtype identifier id'>subtype</span> <span class='colon op'>:</span> <span class='Binary constant id'>Binary</span><span class='colon2 op'>::</span><span class='SUBTYPE_BYTES constant id'>SUBTYPE_BYTES</span>
  <span class='if if kw'>if</span> <span class='subtype identifier id'>subtype</span> <span class='eq op'>==</span> <span class='Binary constant id'>Binary</span><span class='colon2 op'>::</span><span class='SUBTYPE_BYTES constant id'>SUBTYPE_BYTES</span>
    <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_int identifier id'>put_int</span><span class='lparen token'>(</span><span class='num_bytes identifier id'>num_bytes</span> <span class='plus op'>+</span> <span class='integer val'>4</span><span class='rparen token'>)</span>
    <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='subtype identifier id'>subtype</span><span class='rparen token'>)</span>
    <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_int identifier id'>put_int</span><span class='lparen token'>(</span><span class='num_bytes identifier id'>num_bytes</span><span class='rparen token'>)</span>
    <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_array identifier id'>put_array</span><span class='lparen token'>(</span><span class='bytes identifier id'>bytes</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_int identifier id'>put_int</span><span class='lparen token'>(</span><span class='num_bytes identifier id'>num_bytes</span><span class='rparen token'>)</span>
    <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='subtype identifier id'>subtype</span><span class='rparen token'>)</span>
    <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_array identifier id'>put_array</span><span class='lparen token'>(</span><span class='bytes identifier id'>bytes</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_boolean_element</h3>
</div><div id="serialize_boolean_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_boolean_element</span><span class='args'>(buf, key, val)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 383</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L383">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">383
384
385
386
387</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_boolean_element identifier id'>serialize_boolean_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='BOOLEAN constant id'>BOOLEAN</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='val identifier id'>val</span> <span class='integer val'>? </span><span class='integer val'>1</span> <span class='colon op'>:</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_code_w_scope</h3>
</div><div id="serialize_code_w_scope-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_code_w_scope</span><span class='args'>(buf, key, val)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 467</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L467">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_code_w_scope identifier id'>serialize_code_w_scope</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='CODE_W_SCOPE constant id'>CODE_W_SCOPE</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>

  <span class='comment val'># Make a hole for the length</span>
  <span class='len_pos identifier id'>len_pos</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='position identifier id'>position</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_int identifier id'>put_int</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>

  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_int identifier id'>put_int</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_array identifier id'>put_array</span><span class='lparen token'>(</span><span class='BSON constant id'>BSON</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='dot token'>.</span><span class='serialize identifier id'>serialize</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='scope identifier id'>scope</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='rparen token'>)</span>

  <span class='end_pos identifier id'>end_pos</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='position identifier id'>position</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_int identifier id'>put_int</span><span class='lparen token'>(</span><span class='end_pos identifier id'>end_pos</span> <span class='minus op'>-</span> <span class='len_pos identifier id'>len_pos</span><span class='comma token'>,</span> <span class='len_pos identifier id'>len_pos</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='position identifier id'>position</span> <span class='assign token'>=</span> <span class='end_pos identifier id'>end_pos</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_date_element</h3>
</div><div id="serialize_date_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_date_element</span><span class='args'>(buf, key, val)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 389</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L389">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">389
390
391
392
393
394</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_date_element identifier id'>serialize_date_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='DATE constant id'>DATE</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='millisecs identifier id'>millisecs</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span> <span class='mult op'>*</span> <span class='integer val'>1000</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_long identifier id'>put_long</span><span class='lparen token'>(</span><span class='millisecs identifier id'>millisecs</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_dbref_element</h3>
</div><div id="serialize_dbref_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_dbref_element</span><span class='args'>(buf, key, val)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 352</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L352">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">352
353
354
355
356
357</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_dbref_element identifier id'>serialize_dbref_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='oh identifier id'>oh</span> <span class='assign token'>=</span> <span class='OrderedHash constant id'>OrderedHash</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='oh identifier id'>oh</span><span class='lbrack token'>[</span><span class='string val'>'$ref'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='namespace identifier id'>namespace</span>
  <span class='oh identifier id'>oh</span><span class='lbrack token'>[</span><span class='string val'>'$id'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span>
  <span class='serialize_object_element identifier id'>serialize_object_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='oh identifier id'>oh</span><span class='comma token'>,</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_eoo_element</h3>
</div><div id="serialize_eoo_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_eoo_element</span><span class='args'>(buf)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 343</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L343">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">343
344
345</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_eoo_element identifier id'>serialize_eoo_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='EOO constant id'>EOO</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_key_value</h3>
</div><div id="serialize_key_value-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_key_value</span><span class='args'>(k, v, check_keys)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 102</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L102">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_key_value identifier id'>serialize_key_value</span><span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='comma token'>,</span> <span class='check_keys identifier id'>check_keys</span><span class='rparen token'>)</span>
  <span class='k identifier id'>k</span> <span class='assign token'>=</span> <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='if if kw'>if</span> <span class='check_keys identifier id'>check_keys</span>
    <span class='if if kw'>if</span> <span class='k identifier id'>k</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='integer val'>?$</span>
      <span class='raise identifier id'>raise</span> <span class='RuntimeError constant id'>RuntimeError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;key #{k} must not start with '$'&quot;</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='if if kw'>if</span> <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='question op'>?</span><span class='dot token'>.</span>
      <span class='raise identifier id'>raise</span> <span class='RuntimeError constant id'>RuntimeError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;key #{k} must not contain '.'&quot;</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='type identifier id'>type</span> <span class='assign token'>=</span> <span class='bson_type identifier id'>bson_type</span><span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='type identifier id'>type</span>
  <span class='when when kw'>when</span> <span class='STRING constant id'>STRING</span><span class='comma token'>,</span> <span class='SYMBOL constant id'>SYMBOL</span>
    <span class='serialize_string_element identifier id'>serialize_string_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='comma token'>,</span> <span class='type identifier id'>type</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='NUMBER constant id'>NUMBER</span><span class='comma token'>,</span> <span class='NUMBER_INT constant id'>NUMBER_INT</span>
    <span class='serialize_number_element identifier id'>serialize_number_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='comma token'>,</span> <span class='type identifier id'>type</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='OBJECT constant id'>OBJECT</span>
    <span class='serialize_object_element identifier id'>serialize_object_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='comma token'>,</span> <span class='check_keys identifier id'>check_keys</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='OID constant id'>OID</span>
    <span class='serialize_oid_element identifier id'>serialize_oid_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='ARRAY constant id'>ARRAY</span>
    <span class='serialize_array_element identifier id'>serialize_array_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='comma token'>,</span> <span class='check_keys identifier id'>check_keys</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='REGEX constant id'>REGEX</span>
    <span class='serialize_regex_element identifier id'>serialize_regex_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='BOOLEAN constant id'>BOOLEAN</span>
    <span class='serialize_boolean_element identifier id'>serialize_boolean_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='DATE constant id'>DATE</span>
    <span class='serialize_date_element identifier id'>serialize_date_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='NULL constant id'>NULL</span>
    <span class='serialize_null_element identifier id'>serialize_null_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='REF constant id'>REF</span>
    <span class='serialize_dbref_element identifier id'>serialize_dbref_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='BINARY constant id'>BINARY</span>
    <span class='serialize_binary_element identifier id'>serialize_binary_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='UNDEFINED constant id'>UNDEFINED</span>
    <span class='serialize_undefined_element identifier id'>serialize_undefined_element</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='CODE_W_SCOPE constant id'>CODE_W_SCOPE</span>
    <span class='serialize_code_w_scope identifier id'>serialize_code_w_scope</span><span class='lparen token'>(</span><span class='@buf ivar id'>@buf</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;unhandled type #{type}&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_null_element</h3>
</div><div id="serialize_null_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_null_element</span><span class='args'>(buf, key)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 347</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L347">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">347
348
349
350</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_null_element identifier id'>serialize_null_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='NULL constant id'>NULL</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_number_element</h3>
</div><div id="serialize_number_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_number_element</span><span class='args'>(buf, key, val, type)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 396</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L396">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">396
397
398
399
400
401
402
403
404
405
406
407</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_number_element identifier id'>serialize_number_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='comma token'>,</span> <span class='type identifier id'>type</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='type identifier id'>type</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='type identifier id'>type</span> <span class='eq op'>==</span> <span class='NUMBER constant id'>NUMBER</span>
    <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_double identifier id'>put_double</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='if if kw'>if</span> <span class='val identifier id'>val</span> <span class='gt op'>&gt;</span> <span class='integer val'>2</span><span class='pow op'>**</span><span class='integer val'>32</span> <span class='div op'>/</span> <span class='integer val'>2</span> <span class='minus op'>-</span> <span class='integer val'>1</span> <span class='or or kw'>or</span> <span class='val identifier id'>val</span> <span class='lt op'>&lt;</span> <span class='integer val'>-2</span><span class='pow op'>**</span><span class='integer val'>32</span> <span class='div op'>/</span> <span class='integer val'>2</span>
      <span class='raise identifier id'>raise</span> <span class='RangeError constant id'>RangeError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;MongoDB can only handle 4-byte ints - try converting to a double before saving&quot;</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_int identifier id'>put_int</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_object_element</h3>
</div><div id="serialize_object_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_object_element</span><span class='args'>(buf, key, val, check_keys, opcode = OBJECT)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 409</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L409">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">409
410
411
412
413</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_object_element identifier id'>serialize_object_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='comma token'>,</span> <span class='check_keys identifier id'>check_keys</span><span class='comma token'>,</span> <span class='opcode identifier id'>opcode</span><span class='assign token'>=</span><span class='OBJECT constant id'>OBJECT</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='opcode identifier id'>opcode</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_array identifier id'>put_array</span><span class='lparen token'>(</span><span class='BSON constant id'>BSON</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='dot token'>.</span><span class='serialize identifier id'>serialize</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='comma token'>,</span> <span class='check_keys identifier id'>check_keys</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_oid_element</h3>
</div><div id="serialize_oid_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_oid_element</span><span class='args'>(buf, key, val)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 440</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L440">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">440
441
442
443
444
445</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_oid_element identifier id'>serialize_oid_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='OID constant id'>OID</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>

  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_array identifier id'>put_array</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_regex_element</h3>
</div><div id="serialize_regex_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_regex_element</span><span class='args'>(buf, key, val)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 423</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L423">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_regex_element identifier id'>serialize_regex_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='REGEX constant id'>REGEX</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>

  <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/.*?:/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-2</span><span class='rbrack token'>]</span> <span class='comment val'># Turn &quot;(?xxx:yyy)&quot; into &quot;yyy&quot;</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='str identifier id'>str</span><span class='rparen token'>)</span>

  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='options identifier id'>options</span>
  <span class='options_str identifier id'>options_str</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='options_str identifier id'>options_str</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>'i'</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='bitand op'>&amp;</span> <span class='Regexp constant id'>Regexp</span><span class='colon2 op'>::</span><span class='IGNORECASE constant id'>IGNORECASE</span><span class='rparen token'>)</span> <span class='neq op'>!=</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='options_str identifier id'>options_str</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>'m'</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='bitand op'>&amp;</span> <span class='Regexp constant id'>Regexp</span><span class='colon2 op'>::</span><span class='MULTILINE constant id'>MULTILINE</span><span class='rparen token'>)</span> <span class='neq op'>!=</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='options_str identifier id'>options_str</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>'x'</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='bitand op'>&amp;</span> <span class='Regexp constant id'>Regexp</span><span class='colon2 op'>::</span><span class='EXTENDED constant id'>EXTENDED</span><span class='rparen token'>)</span> <span class='neq op'>!=</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='options_str identifier id'>options_str</span> <span class='lshft op'>&lt;&lt;</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='extra_options_str identifier id'>extra_options_str</span> <span class='if if_mod kw'>if</span> <span class='val identifier id'>val</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:extra_options_str</span><span class='rparen token'>)</span>
  <span class='comment val'># Must store option chars in alphabetical order</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='options_str identifier id'>options_str</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>//</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_string_element</h3>
</div><div id="serialize_string_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_string_element</span><span class='args'>(buf, key, val, type)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 447</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L447">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_string_element identifier id'>serialize_string_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='comma token'>,</span> <span class='type identifier id'>type</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='type identifier id'>type</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>

  <span class='comment val'># Make a hole for the length</span>
  <span class='len_pos identifier id'>len_pos</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='position identifier id'>position</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_int identifier id'>put_int</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>

  <span class='comment val'># Save the string</span>
  <span class='start_pos identifier id'>start_pos</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='position identifier id'>position</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='end_pos identifier id'>end_pos</span> <span class='assign token'>=</span> <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='position identifier id'>position</span>

  <span class='comment val'># Put the string size in front</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put_int identifier id'>put_int</span><span class='lparen token'>(</span><span class='end_pos identifier id'>end_pos</span> <span class='minus op'>-</span> <span class='start_pos identifier id'>start_pos</span><span class='comma token'>,</span> <span class='len_pos identifier id'>len_pos</span><span class='rparen token'>)</span>

  <span class='comment val'># Go back to where we were</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='position identifier id'>position</span> <span class='assign token'>=</span> <span class='end_pos identifier id'>end_pos</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>serialize_undefined_element</h3>
</div><div id="serialize_undefined_element-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>serialize_undefined_element</span><span class='args'>(buf, key)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 378</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L378">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">378
379
380
381</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='serialize_undefined_element identifier id'>serialize_undefined_element</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='UNDEFINED constant id'>UNDEFINED</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='serialize_cstr identifier id'>serialize_cstr</span><span class='lparen token'>(</span><span class='buf identifier id'>buf</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_a</h3>
</div><div id="to_a-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_a</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/util/bson.rb', line 70</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/util/bson.rb#L70">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">70
71
72</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_a identifier id'>to_a</span>
  <span class='@buf ivar id'>@buf</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>