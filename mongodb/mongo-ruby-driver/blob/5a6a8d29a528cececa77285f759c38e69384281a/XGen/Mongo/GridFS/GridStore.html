<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>mongodb's mongo-ruby-driver - Class: XGen::Mongo::GridFS::GridStore - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/mongodb/commits/mongo-ruby-driver/master" rel="alternate" title="Recent Commits to mongo-ruby-driver:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("mongodb", "mongo-ruby-driver", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("mongodb", "mongo-ruby-driver", "5a6a8d29a528cececa77285f759c38e69384281a", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/mongodb/mongo-ruby-driver/tree/">Source</a></li>
            <li class=""><a href="http://github.com/mongodb/mongo-ruby-driver/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/mongodb/mongo-ruby-driver/network">Network</a></li>            
            <li class=""><a href="http://github.com/mongodb/mongo-ruby-driver/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/mongodb/mongo-ruby-driver">Wiki</a></li>
            <li class=""><a href="http://github.com/mongodb/mongo-ruby-driver/graphs">Graphs</a></li>                    
            <li class="active"><a href="/mongodb/mongo-ruby-driver">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/mongodb">mongodb</a> / <b><a href="http://github.com/mongodb/mongo-ruby-driver/tree">mongo-ruby-driver</a></b>        
                <a id="namespaces_button" rel="mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class XGen_Mongo_GridFS_GridStore">
  <h1>Class: XGen::Mongo::GridFS::GridStore</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p>Enumerable</p>
</div><div class="section docstring">
  <p>
GridStore is an IO-like object that provides input and output for streams
of data to Mongo. See Mongo&#8217;s documentation about GridFS for storage
implementation details.
</p>
<p>
Example code:
</p>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'mongo/gridfs'</span>
  <span class='GridStore constant id'>GridStore</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='database identifier id'>database</span><span class='comma token'>,</span> <span class='string val'>'filename'</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
    <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='puts identifier id'>puts</span> <span class='string val'>&quot;Hello, world!&quot;</span>
  <span class='rbrace token'>}</span>
  <span class='GridStore constant id'>GridStore</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='database identifier id'>database</span><span class='comma token'>,</span> <span class='string val'>'filename, '</span><span class='r identifier id'>r</span><span class='string val'>') { |f|
    puts f.read         # =&gt; Hello, world!\n
  }
  GridStore.open(database, '</span><span class='filename identifier id'>filename</span><span class='string val'>', '</span><span class='w identifier id'>w</span><span class='plus op'>+</span><span class='string val'>') { |f|
    f.puts &quot;But wait, there'</span><span class='s identifier id'>s</span> <span class='more! fid id'>more!</span><span class='string val'>&quot;
  }
  GridStore.open(database, 'filename, 'r') { |f|
    puts f.read         # =&gt; Hello, world!\nBut wait, there's more!\n
  }
</span></pre>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">aliases</td>
          <td class="readwrite">
            [<span id='aliases-instance_method'>R</span><span id='aliases=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Array of strings; may be <tt>nil</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">chunk_size</td>
          <td class="readwrite">
            [<span id='chunk_size-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>chunk_size</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">content_type</td>
          <td class="readwrite">
            [<span id='content_type-instance_method'>R</span><span id='content_type=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Default is DEFAULT_CONTENT_TYPE.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">filename</td>
          <td class="readwrite">
            [<span id='filename-instance_method'>R</span><span id='filename=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>filename</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">files_id</td>
          <td class="readwrite">
            [<span id='files_id-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>files_id</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">lineno</td>
          <td class="readwrite">
            [<span id='lineno-instance_method'>R</span><span id='lineno=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>lineno</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">md5</td>
          <td class="readwrite">
            [<span id='md5-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>md5</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">metadata</td>
          <td class="readwrite">
            [<span id='metadata-instance_method'>R</span><span id='metadata=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>metadata</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">upload_date</td>
          <td class="readwrite">
            [<span id='upload_date-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Time that the file was first saved.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="DEFAULT_CONTENT_TYPE-constant">DEFAULT_CONTENT_TYPE</dt>
      <dd>'text/plain'</dd>
    
      <dt id="DEFAULT_ROOT_COLLECTION-constant">DEFAULT_ROOT_COLLECTION</dt>
      <dd>'fs'</dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(db, name, mode = 'r', options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="1"></hr><h6>==========================================================</h6>
<p>
+++ Mode may only be &#8216;r&#8217;, &#8216;w&#8217;, or &#8216;w<tt>&#8217;.
</p>
<p>
Options. Descriptions start with a list of the modes for which that option
is legitimate.
</p>
<table>
<tr><td valign="top">:root :</td><td>(r, w, w</tt>) Name of root collection to use, instead of
DEFAULT_ROOT_COLLECTION.

</td></tr>
<tr><td valign="top">:metadata:</td><td>(w, w+) A hash containing any data you want persisted as

<pre class="code">
        <span class='this identifier id'>this</span> <span class='file identifier id'>file</span><span class='string val'>'s metadata. See also metadata=
</span></pre>
</td></tr>
<tr><td valign="top">:chunk_size :</td><td>(w) Sets chunk size for files opened for writing See also chunk_size= which
may only be called before any data is written.

</td></tr>
<tr><td valign="top">:content_type :</td><td>(w) Default value is DEFAULT_CONTENT_TYPE. See also #content_type=

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 146</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L146">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mode identifier id'>mode</span><span class='assign token'>=</span><span class='string val'>'r'</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='@filename ivar id'>@filename</span><span class='comma token'>,</span> <span class='@mode ivar id'>@mode</span> <span class='assign token'>=</span> <span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mode identifier id'>mode</span>
  <span class='@root ivar id'>@root</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:root</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='DEFAULT_ROOT_COLLECTION constant id'>DEFAULT_ROOT_COLLECTION</span>

  <span class='doc identifier id'>doc</span> <span class='assign token'>=</span> <span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='string val'>'filename'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@filename ivar id'>@filename</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='next_object identifier id'>next_object</span>
  <span class='if if kw'>if</span> <span class='doc identifier id'>doc</span>
    <span class='@files_id ivar id'>@files_id</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='lbrack token'>[</span><span class='string val'>'_id'</span><span class='rbrack token'>]</span>
    <span class='@content_type ivar id'>@content_type</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='lbrack token'>[</span><span class='string val'>'contentType'</span><span class='rbrack token'>]</span>
    <span class='@chunk_size ivar id'>@chunk_size</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='lbrack token'>[</span><span class='string val'>'chunkSize'</span><span class='rbrack token'>]</span>
    <span class='@upload_date ivar id'>@upload_date</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='lbrack token'>[</span><span class='string val'>'uploadDate'</span><span class='rbrack token'>]</span>
    <span class='@aliases ivar id'>@aliases</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='lbrack token'>[</span><span class='string val'>'aliases'</span><span class='rbrack token'>]</span>
    <span class='@length ivar id'>@length</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='lbrack token'>[</span><span class='string val'>'length'</span><span class='rbrack token'>]</span>
    <span class='@metadata ivar id'>@metadata</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='lbrack token'>[</span><span class='string val'>'metadata'</span><span class='rbrack token'>]</span>
    <span class='@md5 ivar id'>@md5</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='lbrack token'>[</span><span class='string val'>'md5'</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>
    <span class='@files_id ivar id'>@files_id</span> <span class='assign token'>=</span> <span class='XGen constant id'>XGen</span><span class='colon2 op'>::</span><span class='Mongo constant id'>Mongo</span><span class='colon2 op'>::</span><span class='Driver constant id'>Driver</span><span class='colon2 op'>::</span><span class='ObjectID constant id'>ObjectID</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
    <span class='@content_type ivar id'>@content_type</span> <span class='assign token'>=</span> <span class='DEFAULT_CONTENT_TYPE constant id'>DEFAULT_CONTENT_TYPE</span>
    <span class='@chunk_size ivar id'>@chunk_size</span> <span class='assign token'>=</span> <span class='Chunk constant id'>Chunk</span><span class='colon2 op'>::</span><span class='DEFAULT_CHUNK_SIZE constant id'>DEFAULT_CHUNK_SIZE</span>
    <span class='@length ivar id'>@length</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='end end kw'>end</span>

  <span class='case case kw'>case</span> <span class='mode identifier id'>mode</span>
  <span class='when when kw'>when</span> <span class='string val'>'r'</span>
    <span class='@curr_chunk ivar id'>@curr_chunk</span> <span class='assign token'>=</span> <span class='nth_chunk identifier id'>nth_chunk</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
    <span class='@position ivar id'>@position</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='when when kw'>when</span> <span class='string val'>'w'</span>
    <span class='chunk_collection identifier id'>chunk_collection</span><span class='dot token'>.</span><span class='create_index identifier id'>create_index</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='lbrack token'>[</span><span class='string val'>'files_id'</span><span class='comma token'>,</span> <span class='XGen constant id'>XGen</span><span class='colon2 op'>::</span><span class='Mongo constant id'>Mongo</span><span class='colon2 op'>::</span><span class='ASCENDING constant id'>ASCENDING</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>'n'</span><span class='comma token'>,</span> <span class='XGen constant id'>XGen</span><span class='colon2 op'>::</span><span class='Mongo constant id'>Mongo</span><span class='colon2 op'>::</span><span class='ASCENDING constant id'>ASCENDING</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='delete_chunks identifier id'>delete_chunks</span>
    <span class='@curr_chunk ivar id'>@curr_chunk</span> <span class='assign token'>=</span> <span class='Chunk constant id'>Chunk</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='string val'>'n'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
    <span class='@content_type ivar id'>@content_type</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:content_type</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:content_type</span><span class='rbrack token'>]</span>
    <span class='@chunk_size ivar id'>@chunk_size</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:chunk_size</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:chunk_size</span><span class='rbrack token'>]</span>
    <span class='@metadata ivar id'>@metadata</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:metadata</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:metadata</span><span class='rbrack token'>]</span>
    <span class='@position ivar id'>@position</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='when when kw'>when</span> <span class='string val'>'w+'</span>
    <span class='chunk_collection identifier id'>chunk_collection</span><span class='dot token'>.</span><span class='create_index identifier id'>create_index</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='lbrack token'>[</span><span class='string val'>'files_id'</span><span class='comma token'>,</span> <span class='XGen constant id'>XGen</span><span class='colon2 op'>::</span><span class='Mongo constant id'>Mongo</span><span class='colon2 op'>::</span><span class='ASCENDING constant id'>ASCENDING</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>'n'</span><span class='comma token'>,</span> <span class='XGen constant id'>XGen</span><span class='colon2 op'>::</span><span class='Mongo constant id'>Mongo</span><span class='colon2 op'>::</span><span class='ASCENDING constant id'>ASCENDING</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='@curr_chunk ivar id'>@curr_chunk</span> <span class='assign token'>=</span> <span class='nth_chunk identifier id'>nth_chunk</span><span class='lparen token'>(</span><span class='last_chunk_number identifier id'>last_chunk_number</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='Chunk constant id'>Chunk</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='string val'>'n'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span> <span class='comment val'># might be empty</span>
    <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='pos identifier id'>pos</span> <span class='assign token'>=</span> <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='data identifier id'>data</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='if if_mod kw'>if</span> <span class='@curr_chunk ivar id'>@curr_chunk</span>
    <span class='@metadata ivar id'>@metadata</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:metadata</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:metadata</span><span class='rbrack token'>]</span>
    <span class='@position ivar id'>@position</span> <span class='assign token'>=</span> <span class='@length ivar id'>@length</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;error: illegal mode #{mode}&quot;</span>
  <span class='end end kw'>end</span>

  <span class='@lineno ivar id'>@lineno</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='@pushback_byte ivar id'>@pushback_byte</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#exist-3F-class_method">exist?</span><span class='args'>(db, name, root_collection = DEFAULT_ROOT_COLLECTION)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#list-class_method">list</span><span class='args'>(db, root_collection = DEFAULT_ROOT_COLLECTION)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
List the contains of all GridFS files stored in the given db and root
collection.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#open-class_method">open</span><span class='args'>(db, name, mode, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#read-class_method">read</span><span class='args'>(db, name, length = nil, offset = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#readlines-class_method">readlines</span><span class='args'>(db, name, separator = $/)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#unlink-class_method">unlink</span><span class='args'>(db, *names)</span>
        <span class='block'></span>
        
          <span class='alias'>delete</span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#-3C-3C-instance_method">#<<</span><span class='args'>(obj)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#chunk_collection-instance_method">#chunk_collection</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns collection used for storing chunks.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#chunk_size-3D-instance_method">#chunk_size=</span><span class='args'>(size)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Change chunk size.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#close-instance_method">#close</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <hr size="1"></hr><h6>========== closing ================</h6>
<p>
+++.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#closed-3F-instance_method">#closed?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#collection-instance_method">#collection</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#each-instance_method">#each</span><span class='args'></span>
        <span class='block'></span>
        
          <span class='alias'>#each_line</span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#each_byte-instance_method">#each_byte</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#eof-instance_method">#eof</span><span class='args'></span>
        <span class='block'></span>
        
          <span class='alias'>#eof?</span>
        
      </th>
      <td class="docstring">
        <hr size="1"></hr><h6>========== status ================</h6>
<p>
+++.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#flush-instance_method">#flush</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
A no-op.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#getc-instance_method">#getc</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <hr size="1"></hr><h6>========== reading ================</h6>
<p>
+++.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#gets-instance_method">#gets</span><span class='args'>(separator = $/)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#print-instance_method">#print</span><span class='args'>(*objs)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#putc-instance_method">#putc</span><span class='args'>(byte)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <hr size="1"></hr><h6>========== writing ================</h6>
<p>
+++.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#puts-instance_method">#puts</span><span class='args'>(*objs)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#read-instance_method">#read</span><span class='args'>(len = nil, buf = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#readchar-instance_method">#readchar</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#readline-instance_method">#readline</span><span class='args'>(separator = $/)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#readlines-instance_method">#readlines</span><span class='args'>(separator = $/)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#rewind-instance_method">#rewind</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <hr size="1"></hr><h6>========== positioning ================</h6>
<p>
+++.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#seek-instance_method">#seek</span><span class='args'>(pos, whence = IO::SEEK_SET)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#tell-instance_method">#tell</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#ungetc-instance_method">#ungetc</span><span class='args'>(byte)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#write-instance_method">#write</span><span class='args'>(string)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Writes <tt>string</tt> as bytes and returns the number of bytes written.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>exist?</h3>
</div><div id="exist-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>exist?</span><span class='args'>(db, name, root_collection = DEFAULT_ROOT_COLLECTION)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 74</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L74">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">74
75
76</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='exist? fid id'>exist?</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='root_collection identifier id'>root_collection</span><span class='assign token'>=</span><span class='DEFAULT_ROOT_COLLECTION constant id'>DEFAULT_ROOT_COLLECTION</span><span class='rparen token'>)</span>
  <span class='db identifier id'>db</span><span class='dot token'>.</span><span class='collection identifier id'>collection</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{root_collection}.files&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='string val'>'filename'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='name identifier id'>name</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='next_object identifier id'>next_object</span> <span class='neq op'>!=</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>list</h3>
</div><div id="list-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>list</span><span class='args'>(db, root_collection = DEFAULT_ROOT_COLLECTION)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
List the contains of all GridFS files stored in the given db and root
collection.
</p>
<table>
<tr><td valign="top">:db :</td><td>the database to use

</td></tr>
<tr><td valign="top">:root_collection :</td><td>the root collection to use

</td></tr>
</table>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 102</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L102">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">102
103
104
105
106</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='list identifier id'>list</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='root_collection identifier id'>root_collection</span><span class='assign token'>=</span><span class='DEFAULT_ROOT_COLLECTION constant id'>DEFAULT_ROOT_COLLECTION</span><span class='rparen token'>)</span>
  <span class='db identifier id'>db</span><span class='dot token'>.</span><span class='collection identifier id'>collection</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{root_collection}.files&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
    <span class='f identifier id'>f</span><span class='lbrack token'>[</span><span class='string val'>'filename'</span><span class='rbrack token'>]</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>open</h3>
</div><div id="open-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>open</span><span class='args'>(db, name, mode, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 78</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L78">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">78
79
80
81
82
83
84
85
86
87</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='gs identifier id'>gs</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mode identifier id'>mode</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='begin begin kw'>begin</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='yield yield kw'>yield</span> <span class='gs identifier id'>gs</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
  <span class='ensure ensure kw'>ensure</span>
    <span class='gs identifier id'>gs</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
  <span class='end end kw'>end</span>
  <span class='result identifier id'>result</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>read</h3>
</div><div id="read-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>read</span><span class='args'>(db, name, length = nil, offset = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 89</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L89">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">89
90
91
92
93
94</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='length identifier id'>length</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='offset identifier id'>offset</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='GridStore constant id'>GridStore</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='string val'>'r'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='gs identifier id'>gs</span><span class='bitor op'>|</span>
    <span class='gs identifier id'>gs</span><span class='dot token'>.</span><span class='seek identifier id'>seek</span><span class='lparen token'>(</span><span class='offset identifier id'>offset</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='offset identifier id'>offset</span>
    <span class='gs identifier id'>gs</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='length identifier id'>length</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>readlines</h3>
</div><div id="readlines-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>readlines</span><span class='args'>(db, name, separator = $/)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 108</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L108">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">108
109
110
111
112</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='readlines identifier id'>readlines</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='separator identifier id'>separator</span><span class='assign token'>=</span><span class='$/ gvar id'>$/</span><span class='rparen token'>)</span>
  <span class='GridStore constant id'>GridStore</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='string val'>'r'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='gs identifier id'>gs</span><span class='bitor op'>|</span>
    <span class='gs identifier id'>gs</span><span class='dot token'>.</span><span class='readlines identifier id'>readlines</span><span class='lparen token'>(</span><span class='separator identifier id'>separator</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>unlink</h3>
</div><div id="unlink-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>unlink</span><span class='args'>(db, *names)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="delete-class_method">delete</tt>
  
</p>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 114</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L114">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">114
115
116
117
118
119
120</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='unlink identifier id'>unlink</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='names identifier id'>names</span><span class='rparen token'>)</span>
  <span class='names identifier id'>names</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='bitor op'>|</span>
    <span class='gs identifier id'>gs</span> <span class='assign token'>=</span> <span class='GridStore constant id'>GridStore</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='db identifier id'>db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='gs identifier id'>gs</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:delete_chunks</span><span class='rparen token'>)</span>
    <span class='gs identifier id'>gs</span><span class='dot token'>.</span><span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='string val'>'_id'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='gs identifier id'>gs</span><span class='dot token'>.</span><span class='files_id identifier id'>files_id</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>&lt;&lt;</h3>
</div><div id="-3C-3C-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'><<</span><span class='args'>(obj)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 332</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L332">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">332
333
334</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='lshft op'>&lt;&lt;</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='rparen token'>)</span>
  <span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>chunk_collection</h3>
</div><div id="chunk_collection-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>chunk_collection</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns collection used for storing chunks. Depends on value of
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 199</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L199">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">199
200
201</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='chunk_collection identifier id'>chunk_collection</span>
  <span class='@db ivar id'>@db</span><span class='dot token'>.</span><span class='collection identifier id'>collection</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{@root}.chunks&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>chunk_size=</h3>
</div><div id="chunk_size-3D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>chunk_size=</span><span class='args'>(size)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Change chunk size. Can only change if the file is opened for write and no
data has yet been written.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 205</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L205">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">205
206
207
208
209
210</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='chunk_size= identifier id'>chunk_size=</span><span class='lparen token'>(</span><span class='size identifier id'>size</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='@mode ivar id'>@mode</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='integer val'>?w</span> <span class='andop op'>&amp;&amp;</span> <span class='@position ivar id'>@position</span> <span class='eq op'>==</span> <span class='integer val'>0</span> <span class='andop op'>&amp;&amp;</span> <span class='@upload_date ivar id'>@upload_date</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span>
    <span class='raise identifier id'>raise</span> <span class='string val'>&quot;error: can only change chunk size if open for write and no data written.&quot;</span>
  <span class='end end kw'>end</span>
  <span class='@chunk_size ivar id'>@chunk_size</span> <span class='assign token'>=</span> <span class='size identifier id'>size</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>close</h3>
</div><div id="close-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>close</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="1"></hr><h6>========== closing ================</h6>
<p>
+++
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 407</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L407">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='close identifier id'>close</span>
  <span class='if if kw'>if</span> <span class='@mode ivar id'>@mode</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='integer val'>?w</span>
    <span class='if if kw'>if</span> <span class='@curr_chunk ivar id'>@curr_chunk</span>
      <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='truncate identifier id'>truncate</span>
      <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='save identifier id'>save</span> <span class='if if_mod kw'>if</span> <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='pos identifier id'>pos</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
    <span class='end end kw'>end</span>
    <span class='files identifier id'>files</span> <span class='assign token'>=</span> <span class='collection identifier id'>collection</span>
    <span class='if if kw'>if</span> <span class='@upload_date ivar id'>@upload_date</span>
      <span class='files identifier id'>files</span><span class='dot token'>.</span><span class='remove identifier id'>remove</span><span class='lparen token'>(</span><span class='string val'>'_id'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@files_id ivar id'>@files_id</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='@upload_date ivar id'>@upload_date</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
    <span class='end end kw'>end</span>
    <span class='files identifier id'>files</span><span class='dot token'>.</span><span class='insert identifier id'>insert</span><span class='lparen token'>(</span><span class='to_mongo_object identifier id'>to_mongo_object</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='@db ivar id'>@db</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>closed?</h3>
</div><div id="closed-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>closed?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 424</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L424">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">424
425
426</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='closed? fid id'>closed?</span>
  <span class='@db ivar id'>@db</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>collection</h3>
</div><div id="collection-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>collection</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 193</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L193">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">193
194
195</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='collection identifier id'>collection</span>
  <span class='@db ivar id'>@db</span><span class='dot token'>.</span><span class='collection identifier id'>collection</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{@root}.files&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>each</h3>
</div><div id="each-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>each</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="each_line-instance_method">each_line</tt>
  
</p>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 274</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L274">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">274
275
276
277
278
279
280</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='each identifier id'>each</span>
  <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='gets identifier id'>gets</span>
  <span class='while while kw'>while</span> <span class='line identifier id'>line</span>
    <span class='yield yield kw'>yield</span> <span class='line identifier id'>line</span>
    <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='gets identifier id'>gets</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>each_byte</h3>
</div><div id="each_byte-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>each_byte</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 283</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L283">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">283
284
285
286
287
288
289</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='each_byte identifier id'>each_byte</span>
  <span class='byte identifier id'>byte</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='getc identifier id'>getc</span>
  <span class='while while kw'>while</span> <span class='byte identifier id'>byte</span>
    <span class='yield yield kw'>yield</span> <span class='byte identifier id'>byte</span>
    <span class='byte identifier id'>byte</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='getc identifier id'>getc</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>eof</h3>
</div><div id="eof-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>eof</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="eof?-instance_method">eof?</tt>
  
</p>
</div><div class="section docstring">
  <hr size="1"></hr><h6>========== status ================</h6>
<p>
+++
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>IOError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 355</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L355">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">355
356
357
358</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='eof identifier id'>eof</span>
  <span class='raise identifier id'>raise</span> <span class='IOError constant id'>IOError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;stream not open for reading&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='@mode ivar id'>@mode</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='integer val'>?r</span>
  <span class='@position ivar id'>@position</span> <span class='geq op'>&gt;=</span> <span class='@length ivar id'>@length</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>flush</h3>
</div><div id="flush-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>flush</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
A no-op.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 348</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L348">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">348
349</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='flush identifier id'>flush</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>getc</h3>
</div><div id="getc-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>getc</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="1"></hr><h6>========== reading ================</h6>
<p>
+++
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 216</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L216">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='getc identifier id'>getc</span>
  <span class='if if kw'>if</span> <span class='@pushback_byte ivar id'>@pushback_byte</span>
    <span class='byte identifier id'>byte</span> <span class='assign token'>=</span> <span class='@pushback_byte ivar id'>@pushback_byte</span>
    <span class='@pushback_byte ivar id'>@pushback_byte</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
    <span class='@position ivar id'>@position</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
    <span class='byte identifier id'>byte</span>
  <span class='elsif elsif kw'>elsif</span> <span class='eof? fid id'>eof?</span>
    <span class='nil nil kw'>nil</span>
  <span class='else else kw'>else</span>
    <span class='if if kw'>if</span> <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='eof? fid id'>eof?</span>
      <span class='@curr_chunk ivar id'>@curr_chunk</span> <span class='assign token'>=</span> <span class='nth_chunk identifier id'>nth_chunk</span><span class='lparen token'>(</span><span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='chunk_number identifier id'>chunk_number</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='@position ivar id'>@position</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
    <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='getc identifier id'>getc</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>gets</h3>
</div><div id="gets-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>gets</span><span class='args'>(separator = $/)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 233</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L233">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">233
234
235
236
237
238
239
240
241
242
243
244
245</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='gets identifier id'>gets</span><span class='lparen token'>(</span><span class='separator identifier id'>separator</span><span class='assign token'>=</span><span class='$/ gvar id'>$/</span><span class='rparen token'>)</span>
  <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='byte identifier id'>byte</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='getc identifier id'>getc</span>
  <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='byte identifier id'>byte</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span> <span class='comment val'># EOF</span>
  <span class='while while kw'>while</span> <span class='byte identifier id'>byte</span> <span class='neq op'>!=</span> <span class='nil nil kw'>nil</span>
    <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='byte identifier id'>byte</span><span class='dot token'>.</span><span class='chr identifier id'>chr</span>
    <span class='str identifier id'>str</span> <span class='lshft op'>&lt;&lt;</span> <span class='s identifier id'>s</span>
    <span class='break break kw'>break</span> <span class='if if_mod kw'>if</span> <span class='s identifier id'>s</span> <span class='eq op'>==</span> <span class='separator identifier id'>separator</span>
    <span class='byte identifier id'>byte</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='getc identifier id'>getc</span>
  <span class='end end kw'>end</span>
  <span class='@lineno ivar id'>@lineno</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
  <span class='str identifier id'>str</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>print</h3>
</div><div id="print-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>print</span><span class='args'>(*objs)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 310</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L310">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">310
311
312
313
314
315
316
317</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='print identifier id'>print</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='objs identifier id'>objs</span><span class='rparen token'>)</span>
  <span class='objs identifier id'>objs</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='$_ gvar id'>$_</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='objs identifier id'>objs</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span> <span class='orop op'>||</span> <span class='objs identifier id'>objs</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='objs identifier id'>objs</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
    <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='each_byte identifier id'>each_byte</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='byte identifier id'>byte</span><span class='bitor op'>|</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='putc identifier id'>putc</span><span class='lparen token'>(</span><span class='byte identifier id'>byte</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='rbrace token'>}</span>
  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>putc</h3>
</div><div id="putc-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>putc</span><span class='args'>(byte)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="1"></hr><h6>========== writing ================</h6>
<p>
+++
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 300</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L300">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">300
301
302
303
304
305
306
307
308</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='putc identifier id'>putc</span><span class='lparen token'>(</span><span class='byte identifier id'>byte</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='pos identifier id'>pos</span> <span class='eq op'>==</span> <span class='@chunk_size ivar id'>@chunk_size</span>
    <span class='prev_chunk_number identifier id'>prev_chunk_number</span> <span class='assign token'>=</span> <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='chunk_number identifier id'>chunk_number</span>
    <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
    <span class='@curr_chunk ivar id'>@curr_chunk</span> <span class='assign token'>=</span> <span class='Chunk constant id'>Chunk</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='string val'>'n'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='prev_chunk_number identifier id'>prev_chunk_number</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='@position ivar id'>@position</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
  <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='putc identifier id'>putc</span><span class='lparen token'>(</span><span class='byte identifier id'>byte</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>puts</h3>
</div><div id="puts-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>puts</span><span class='args'>(*objs)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 319</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L319">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">319
320
321
322
323
324
325
326
327
328
329
330</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='puts identifier id'>puts</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='objs identifier id'>objs</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='objs identifier id'>objs</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span> <span class='orop op'>||</span> <span class='objs identifier id'>objs</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='putc identifier id'>putc</span><span class='lparen token'>(</span><span class='integer val'>10</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='print identifier id'>print</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='objs identifier id'>objs</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='obj identifier id'>obj</span><span class='bitor op'>|</span>
            <span class='str identifier id'>str</span> <span class='assign token'>=</span> <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
            <span class='str identifier id'>str</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;\n&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='str identifier id'>str</span> <span class='match op'>=~</span> <span class='regexp val'>/\n$/</span>
            <span class='str identifier id'>str</span>
          <span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>read</h3>
</div><div id="read-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>read</span><span class='args'>(len = nil, buf = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 247</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L247">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">247
248
249
250
251
252
253
254
255
256</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='len identifier id'>len</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='buf identifier id'>buf</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='buf identifier id'>buf</span> <span class='opasgn op'>||=</span> <span class='string val'>''</span>
  <span class='byte identifier id'>byte</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='getc identifier id'>getc</span>
  <span class='while while kw'>while</span> <span class='byte identifier id'>byte</span> <span class='neq op'>!=</span> <span class='nil nil kw'>nil</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span><span class='len identifier id'>len</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span> <span class='orop op'>||</span> <span class='len identifier id'>len</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
    <span class='buf identifier id'>buf</span> <span class='lshft op'>&lt;&lt;</span> <span class='byte identifier id'>byte</span><span class='dot token'>.</span><span class='chr identifier id'>chr</span>
    <span class='len identifier id'>len</span> <span class='opasgn op'>-=</span> <span class='integer val'>1</span> <span class='if if_mod kw'>if</span> <span class='len identifier id'>len</span>
    <span class='byte identifier id'>byte</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='getc identifier id'>getc</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='len identifier id'>len</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span> <span class='orop op'>||</span> <span class='len identifier id'>len</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='buf identifier id'>buf</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>readchar</h3>
</div><div id="readchar-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>readchar</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>EOFError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 258</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L258">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">258
259
260
261
262</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='readchar identifier id'>readchar</span>
  <span class='byte identifier id'>byte</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='getc identifier id'>getc</span>
  <span class='raise identifier id'>raise</span> <span class='EOFError constant id'>EOFError</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='if if_mod kw'>if</span> <span class='byte identifier id'>byte</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span>
  <span class='byte identifier id'>byte</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>readline</h3>
</div><div id="readline-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>readline</span><span class='args'>(separator = $/)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>EOFError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 264</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L264">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">264
265
266
267
268</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='readline identifier id'>readline</span><span class='lparen token'>(</span><span class='separator identifier id'>separator</span><span class='assign token'>=</span><span class='$/ gvar id'>$/</span><span class='rparen token'>)</span>
  <span class='line identifier id'>line</span> <span class='assign token'>=</span> <span class='gets identifier id'>gets</span>
  <span class='raise identifier id'>raise</span> <span class='EOFError constant id'>EOFError</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='if if_mod kw'>if</span> <span class='line identifier id'>line</span> <span class='eq op'>==</span> <span class='nil nil kw'>nil</span>
  <span class='line identifier id'>line</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>readlines</h3>
</div><div id="readlines-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>readlines</span><span class='args'>(separator = $/)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 270</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L270">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">270
271
272</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='readlines identifier id'>readlines</span><span class='lparen token'>(</span><span class='separator identifier id'>separator</span><span class='assign token'>=</span><span class='$/ gvar id'>$/</span><span class='rparen token'>)</span>
  <span class='read identifier id'>read</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='separator identifier id'>separator</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span> <span class='dstring node'>&quot;#{line}#{separator}&quot;</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>rewind</h3>
</div><div id="rewind-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>rewind</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="1"></hr><h6>========== positioning ================</h6>
<p>
+++
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 365</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L365">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">365
366
367
368
369
370
371
372
373
374
375
376
377</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='rewind identifier id'>rewind</span>
  <span class='if if kw'>if</span> <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='chunk_number identifier id'>chunk_number</span> <span class='neq op'>!=</span> <span class='integer val'>0</span>
    <span class='if if kw'>if</span> <span class='@mode ivar id'>@mode</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='integer val'>?w</span>
      <span class='delete_chunks identifier id'>delete_chunks</span>
      <span class='@curr_chunk ivar id'>@curr_chunk</span> <span class='assign token'>=</span> <span class='Chunk constant id'>Chunk</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='string val'>'n'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='@curr_chunk ivar id'>@curr_chunk</span> <span class='eq op'>==</span> <span class='nth_chunk identifier id'>nth_chunk</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='pos identifier id'>pos</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='@lineno ivar id'>@lineno</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='@position ivar id'>@position</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>seek</h3>
</div><div id="seek-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>seek</span><span class='args'>(pos, whence = IO::SEEK_SET)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 379</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L379">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='seek identifier id'>seek</span><span class='lparen token'>(</span><span class='pos identifier id'>pos</span><span class='comma token'>,</span> <span class='whence identifier id'>whence</span><span class='assign token'>=</span><span class='IO constant id'>IO</span><span class='colon2 op'>::</span><span class='SEEK_SET constant id'>SEEK_SET</span><span class='rparen token'>)</span>
  <span class='target_pos identifier id'>target_pos</span> <span class='assign token'>=</span> <span class='case case kw'>case</span> <span class='whence identifier id'>whence</span>
               <span class='when when kw'>when</span> <span class='IO constant id'>IO</span><span class='colon2 op'>::</span><span class='SEEK_CUR constant id'>SEEK_CUR</span>
                 <span class='@position ivar id'>@position</span> <span class='plus op'>+</span> <span class='pos identifier id'>pos</span>
               <span class='when when kw'>when</span> <span class='IO constant id'>IO</span><span class='colon2 op'>::</span><span class='SEEK_END constant id'>SEEK_END</span>
                 <span class='@length ivar id'>@length</span> <span class='plus op'>+</span> <span class='pos identifier id'>pos</span>
               <span class='when when kw'>when</span> <span class='IO constant id'>IO</span><span class='colon2 op'>::</span><span class='SEEK_SET constant id'>SEEK_SET</span>
                 <span class='pos identifier id'>pos</span>
               <span class='end end kw'>end</span>

  <span class='new_chunk_number identifier id'>new_chunk_number</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='target_pos identifier id'>target_pos</span> <span class='div op'>/</span> <span class='@chunk_size ivar id'>@chunk_size</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='if if kw'>if</span> <span class='new_chunk_number identifier id'>new_chunk_number</span> <span class='neq op'>!=</span> <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='chunk_number identifier id'>chunk_number</span>
    <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='save identifier id'>save</span> <span class='if if_mod kw'>if</span> <span class='@mode ivar id'>@mode</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='integer val'>?w</span>
    <span class='@curr_chunk ivar id'>@curr_chunk</span> <span class='assign token'>=</span> <span class='nth_chunk identifier id'>nth_chunk</span><span class='lparen token'>(</span><span class='new_chunk_number identifier id'>new_chunk_number</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='@position ivar id'>@position</span> <span class='assign token'>=</span> <span class='target_pos identifier id'>target_pos</span>
  <span class='@curr_chunk ivar id'>@curr_chunk</span><span class='dot token'>.</span><span class='pos identifier id'>pos</span> <span class='assign token'>=</span> <span class='@position ivar id'>@position</span> <span class='mod op'>%</span> <span class='@chunk_size ivar id'>@chunk_size</span>
  <span class='integer val'>0</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>tell</h3>
</div><div id="tell-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>tell</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 399</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L399">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">399
400
401</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='tell identifier id'>tell</span>
 <span class='@position ivar id'>@position</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>ungetc</h3>
</div><div id="ungetc-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>ungetc</span><span class='args'>(byte)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 291</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L291">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">291
292
293
294</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='ungetc identifier id'>ungetc</span><span class='lparen token'>(</span><span class='byte identifier id'>byte</span><span class='rparen token'>)</span>
  <span class='@pushback_byte ivar id'>@pushback_byte</span> <span class='assign token'>=</span> <span class='byte identifier id'>byte</span>
  <span class='@position ivar id'>@position</span> <span class='opasgn op'>-=</span> <span class='integer val'>1</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>write</h3>
</div><div id="write-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>write</span><span class='args'>(string)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Writes <tt>string</tt> as bytes and returns the number of bytes written.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/mongo/gridfs/grid_store.rb', line 337</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mongodb/mongo-ruby-driver/blob/5a6a8d29a528cececa77285f759c38e69384281a/lib/mongo/gridfs/grid_store.rb#L337">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">337
338
339
340
341
342
343
344
345</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='string val'>&quot;#@filename not opened for write&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='@mode ivar id'>@mode</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='integer val'>?w</span>
  <span class='count identifier id'>count</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='each_byte identifier id'>each_byte</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='byte identifier id'>byte</span><span class='bitor op'>|</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='putc identifier id'>putc</span> <span class='byte identifier id'>byte</span>
    <span class='count identifier id'>count</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
  <span class='rbrace token'>}</span>
  <span class='count identifier id'>count</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>