<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>binarylogic's authlogic - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/binarylogic/commits/authlogic/master" rel="alternate" title="Recent Commits to authlogic:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("binarylogic", "authlogic", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='binarylogic/authlogic/blob/58d726d15ba1e5411b3cfecb23792f370b845bd2' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='binarylogic/authlogic/blob/58d726d15ba1e5411b3cfecb23792f370b845bd2' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("binarylogic", "authlogic", "58d726d15ba1e5411b3cfecb23792f370b845bd2", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/binarylogic/authlogic/tree/">Source</a></li>
            <li class=""><a href="http://github.com/binarylogic/authlogic/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/binarylogic/authlogic/network">Network</a></li>            
            <li class=""><a href="http://github.com/binarylogic/authlogic/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/binarylogic/authlogic">Wiki</a></li>
            <li class=""><a href="http://github.com/binarylogic/authlogic/graphs">Graphs</a></li>                    
            <li class="active"><a href="/binarylogic/authlogic">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/binarylogic">binarylogic</a> / <b><a href="http://github.com/binarylogic/authlogic/tree">authlogic</a></b>        
                <a id="namespaces_button" rel="binarylogic/authlogic/blob/58d726d15ba1e5411b3cfecb23792f370b845bd2" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="binarylogic/authlogic/blob/58d726d15ba1e5411b3cfecb23792f370b845bd2" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Authlogic</h1>
<p>
Authlogic is a clean, simple, and unobtrusive ruby authentication solution.
</p>
<p>
A code example can replace a thousand words&#8230;
</p>
<p>
Authlogic introduces a new type of model. You can have as many as you want,
and name them whatever you want, just like your other models. In this
example, we want to authenticate with the User model, which is inferred by
the name:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='UserSession constant id'>UserSession</span> <span class='lt op'>&lt;</span> <span class='Authlogic constant id'>Authlogic</span><span class='colon2 op'>::</span><span class='Session constant id'>Session</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='comment val'># specify configuration here, such as:</span>
    <span class='comment val'># logout_on_timeout true</span>
    <span class='comment val'># ...many more options in the documentation</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Log in with any of the following. Create a UserSessionsController and use
it just like your other models:
</p>
<pre class="code">
  <span class='UserSession constant id'>UserSession</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='symbol val'>:login</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;bjohnson&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:password</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;my password&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:remember_me</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>
  <span class='session identifier id'>session</span> <span class='assign token'>=</span> <span class='UserSession constant id'>UserSession</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:login</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;bjohnson&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:password</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;my password&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:remember_me</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span><span class='semicolon token'>;</span> <span class='session identifier id'>session</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
  <span class='UserSession constant id'>UserSession</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='symbol val'>:openid_identifier</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;identifier&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:remember_me</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='comment val'># requires the authlogic-oid &quot;add on&quot; gem</span>
  <span class='UserSession constant id'>UserSession</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='my_user_object identifier id'>my_user_object</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='comment val'># skip authentication and log the user in directly, the true means &quot;remember me&quot;</span>
</pre>
<p>
The above handles the entire authentication process for you. It first
authenticates, then it sets up the proper session values and cookies to
persist the session. Just like you would if you rolled your own
authentication solution.
</p>
<p>
You can also log out / destroy the session:
</p>
<pre class="code">
  <span class='session identifier id'>session</span><span class='dot token'>.</span><span class='destroy identifier id'>destroy</span>
</pre>
<p>
After a session has been created, you can persist it across requests. Thus
keeping the user logged in:
</p>
<pre class="code">
  <span class='session identifier id'>session</span> <span class='assign token'>=</span> <span class='UserSession constant id'>UserSession</span><span class='dot token'>.</span><span class='find identifier id'>find</span>
</pre>
<p>
To get all of the nice authentication functionality in your model just do
this:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='User constant id'>User</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='acts_as_authentic identifier id'>acts_as_authentic</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span>
      <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='my_config_option identifier id'>my_config_option</span> <span class='assign token'>=</span> <span class='my_value identifier id'>my_value</span>
    <span class='end end kw'>end</span> <span class='comment val'># the configuration block is optional</span>
  <span class='end end kw'>end</span>
</pre>
<p>
This handles validations, etc. It is also &quot;smart&quot; in the sense
that it if a login field is present it will use that to authenticate, if
not it will look for an email field, etc. This is all configurable, but for
99% of cases that above is all you will need to do.
</p>
<p>
Also, sessions are automatically maintained. You can switch this on and off
with configuration, but the following will automatically log a user in
after a successful registration:
</p>
<pre class="code">
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:user</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
</pre>
<p>
This also updates the session when the user changes his/her password.
</p>
<p>
Authlogic is very flexible, it has a strong public API and a plethora of
hooks to allow you to modify behavior and extend it. Check out the helpful
links below to dig deeper.
</p>
<h2>Helpful links</h2>
<ul>
<li><b>Documentation:</b> http://authlogic.rubyforge.org

</li>
<li><b>Repository:</b> http://github.com/binarylogic/authlogic/tree/master

</li>
<li><b>Railscasts Screencast:</b> http://railscasts.com/episodes/160-authlogic

</li>
<li><b>Live example with OpenID &quot;add on&quot;:</b>
http://authlogicexample.binarylogic.com

</li>
<li><b>Live example repository with tutorial in README:</b>
http://github.com/binarylogic/authlogic_example/tree/master

</li>
<li><b>Tutorial: Reset passwords with Authlogic the RESTful way:</b>
http://www.binarylogic.com/2008/11/16/tutorial-reset-passwords-with-authlogic

</li>
<li><b>Bugs / feature suggestions:</b>
http://binarylogic.lighthouseapp.com/projects/18752-authlogic

</li>
<li><b>Google group:</b> http://groups.google.com/group/authlogic

</li>
</ul>
<p>
<b>Before contacting me directly, please read:</b>
</p>
<p>
If you find a bug or a problem please post it on lighthouse. If you need
help with something, please use google groups. I check both regularly and
get emails when anything happens, so that is the best place to get help.
This also benefits other people in the future with the same questions /
problems. Thank you.
</p>
<h2>Authlogic &quot;add ons&quot;</h2>
<ul>
<li><b>Authlogic OpenID addon:</b>
http://github.com/binarylogic/authlogic_openid

</li>
<li><b>Authlogic LDAP addon:</b> http://github.com/binarylogic/authlogic_ldap

</li>
<li><b>Authlogic Facebook Connect:</b>
http://github.com/kalasjocke/authlogic_facebook_connect

</li>
<li><b>Authlogic OAuth (Twitter):</b>
http://github.com/jrallison/authlogic_oauth

</li>
</ul>
<p>
If you create one of your own, please let me know about it so I can add it
to this list. Or just fork the project, add your link, and send me a pull
request.
</p>
<h2>Session bugs (please read if you are having issues with logging in / out)</h2>
<p>
Apparently there is a bug with apache / passenger for v2.1.X with sessions
not working properly. This is most likely your problem if you are having
trouble logging in / out. This is <b>not</b> an Authlogic issue. This can
be solved by updating passener or using an alternative session store
solution, such as active record store.
</p>
<h2>Documentation explanation</h2>
<p>
You can find anything you want about Authlogic in the
<tt>documentation</tt>[http://authlogic.rubyforge.org], all that you need to do is
understand the basic design behind it.
</p>
<p>
That being said, there are 2 models involved during authentication. Your
Authlogic model and your ActiveRecord model:
</p>
<ol>
<li><b>Authlogic::Session</b>, your session models that extend
Authlogic::Session::Base.

</li>
<li><b>Authlogic::ActsAsAuthentic</b>, which adds in functionality to your
ActiveRecord model when you call acts_as_authentic.

</li>
</ol>
<p>
Each of the above has its various sub modules that contain common logic.
The sub modules are responsible for including <b>everything</b> related to
it: configuration, class methods, instance methods, etc.
</p>
<p>
For example, if you want to timeout users after a certain period of
inactivity, you would look in <b>Authlogic::Session::Timeout</b>. To help
you out, I listed the following publicly relevant modules with short
descriptions. For the sake of brevity, there are more modules than listed
here, the ones not listed are more for internal use, but you can easily
read up on them in the <tt>documentation</tt>[http://authlogic.rubyforge.org].
</p>
<h3>Authlogic::ActsAsAuthentic sub modules</h3>
<p>
These modules are for the ActiveRecord side of things, the models that call
acts_as_authentic.
</p>
<ul>
<li><b>Authlogic::ActsAsAuthentic::Base</b> - Provides the acts_as_authentic
class method and includes all of the submodules.

</li>
<li><b>Authlogic::ActsAsAuthentic::Email</b> - Handles everything related to
the email field.

</li>
<li><b>Authlogic::ActsAsAuthentic::LoggedInStatus</b> - Provides handy named
scopes and methods for determining if the user is logged in or out.

</li>
<li><b>Authlogic::ActsAsAuthentic::Login</b> - Handles everything related to
the login field.

</li>
<li><b>Authlogic::ActsAsAuthentic::MagicColumns</b> - Handles everything
related to the &quot;magic&quot; fields: login_count, failed_login_count,
last_request_at, etc.

</li>
<li><b>Authlogic::ActsAsAuthentic::Password</b> - This one is important. It
handles encrypting your password, salting it, etc. It also has support for
transitioning password algorithms.

</li>
<li><b>Authlogic::ActsAsAuthentic::PerishableToken</b> - Handles maintaining
the perishable token field, also provides a class level method for finding
record using the token.

</li>
<li><b>Authlogic::ActsAsAuthentic::PersistenceToken</b> - Handles maintaining
the persistence token. This is the token stored in cookies and sessions to
persist the users session.

</li>
<li><b>Authlogic::ActsAsAuthentic::RestfulAuthentication</b> - Provides
configuration options to easily migrate from the restful_authentication
plugin.

</li>
<li><b>Authlogic::ActsAsAuthentic::SessionMaintenance</b> - Handles automatic
session maintenance. EX: a new user registers, automatically log them in.
Or a user changes their password, update their session.

</li>
<li><b>Authlogic::ActsAsAuthentic::SingleAccessToken</b> - Handles maintaining
the single access token.

</li>
<li><b>Authlogic::ActsAsAuthentic::ValidationsScope</b> - Allows you to scope
all validations, etc. Just like the :scope option for
validates_uniqueness_of

</li>
</ul>
<h3>Authlogic::Session sub modules</h3>
<p>
These modules are for the models that extend Authlogic::Session::Base.
</p>
<ul>
<li><b>Authlogic::Session::BruteForceProtection</b> - Disables accounts after a
certain number of consecutive failed logins attempted.

</li>
<li><b>Authlogic::Session::Callbacks</b> - Your tools to extend, change, or add
onto Authlogic. Lets you hook in and do just about anything you want. Start
here if you want to write a plugin or add-on for Authlogic

</li>
<li><b>Authlogic::Session::Cookies</b> - Authentication via cookies.

</li>
<li><b>Authlogic::Session::Existence</b> - Creating, saving, and destroying
objects.

</li>
<li><b>Authlogic::Session::HttpAuth</b> - Authentication via basic HTTP
authentication.

</li>
<li><b>Authlogic::Session::Id</b> - Allows sessions to be separated by an id,
letting you have multiple sessions for a single user.

</li>
<li><b>Authlogic::Session::MagicColumns</b> - Maintains &quot;magic&quot;
database columns, similar to created_at and updated_at for ActiveRecord.

</li>
<li><b>Authlogic::Session::MagicStates</b> - Automatically validates based on
the records states: active?, approved?, and confirmed?. If those methods
exist for the record.

</li>
<li><b>Authlogic::Session::Params</b> - Authentication via params, aka single
access token.

</li>
<li><b>Authlogic::Session::Password</b> - Authentication via a traditional
username and password.

</li>
<li><b>Authlogic::Session::Persistence</b> - Persisting sessions / finding
sessions.

</li>
<li><b>Authlogic::Session::Session</b> - Authentication via the session, the
controller session that is.

</li>
<li><b>Authlogic::Session::Timeout</b> - Automatically logging out after a
certain period of inactivity.

</li>
<li><b>Authlogic::Session::UnauthorizedRecord</b> - Handles authentication by
passing an ActiveRecord object directly.

</li>
<li><b>Authlogic::Session::Validation</b> - Validation / errors.

</li>
</ul>
<h3>Miscellaneous modules</h3>
<p>
Miscellaneous modules that shared across the authentication process and are
more &quot;utility&quot; modules and classes.
</p>
<ul>
<li><b>Authlogic::AuthenticatesMany</b> - Responsible for allowing you to scope
sessions to a parent record. Similar to a has_many and belongs_to
relationship. This lets you do the same thing with sessions.

</li>
<li><b>Authlogic::CryptoProviders</b> - Contains various encryption algorithms
that Authlogic uses, allowing you to choose your encryption method.

</li>
<li><b>Authlogic::I18n</b> - Acts JUST LIKE the rails I18n library, and
provides internationalization to Authlogic.

</li>
<li><b>Authlogic::Random</b> - A simple class to generate random tokens.

</li>
<li><b>Authlogic::Regex</b> - Contains regular expressions used in Authlogic.
Such as those to validate the format of the log or email.

</li>
<li><b>Authlogic::TestCase</b> - Various helper methods for testing frameworks
to help you test your code.

</li>
<li><b>Authlogic::Version</b> - A handy class for determine the version of
Authlogic in a number of ways.

</li>
</ul>
<h2>Quick Rails example</h2>
<p>
What if creating sessions worked like an ORM library on the surface&#8230;
</p>
<pre class="code">
  <span class='UserSession constant id'>UserSession</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:user_session</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
</pre>
<p>
What if your user sessions controller could look just like your other
controllers&#8230;
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='UserSessionsController constant id'>UserSessionsController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>
    <span class='def def kw'>def</span> <span class='new identifier id'>new</span>
      <span class='@user_session ivar id'>@user_session</span> <span class='assign token'>=</span> <span class='UserSession constant id'>UserSession</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='create identifier id'>create</span>
      <span class='@user_session ivar id'>@user_session</span> <span class='assign token'>=</span> <span class='UserSession constant id'>UserSession</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:user_session</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='if if kw'>if</span> <span class='@user_session ivar id'>@user_session</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
        <span class='redirect_to identifier id'>redirect_to</span> <span class='account_url identifier id'>account_url</span>
      <span class='else else kw'>else</span>
        <span class='render identifier id'>render</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:new</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='destroy identifier id'>destroy</span>
      <span class='current_user_session identifier id'>current_user_session</span><span class='dot token'>.</span><span class='destroy identifier id'>destroy</span>
      <span class='redirect_to identifier id'>redirect_to</span> <span class='new_user_session_url identifier id'>new_user_session_url</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
As you can see, this fits nicely into the RESTful development pattern. What
about the view&#8230;
</p>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='string val'>% form_for </span><span class='@user_session ivar id'>@user_session</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='string val'>%&gt;
    &lt;%= f.error_messages %&gt;</span>
    <span class='lt op'>&lt;</span><span class='string val'>%= f.label :login %&gt;&lt;br /&gt;
    &lt;%=</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='text_field identifier id'>text_field</span> <span class='symbol val'>:login</span> <span class='mod op'>%</span><span class='gt op'>&gt;</span><span class='lt op'>&lt;</span><span class='br identifier id'>br</span> <span class='regexp val'>/&gt;
    &lt;br /</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='string val'>%= f.label :password %&gt;&lt;br /&gt;
    &lt;%=</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='password_field identifier id'>password_field</span> <span class='symbol val'>:password</span> <span class='mod op'>%</span><span class='gt op'>&gt;</span><span class='lt op'>&lt;</span><span class='br identifier id'>br</span> <span class='regexp val'>/&gt;
    &lt;br /</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='string val'>%= f.submit &quot;Login&quot; %&gt;
  &lt;% end %&gt;
</span></pre>
<p>
Or how about persisting the session&#8230;
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='ApplicationController constant id'>ApplicationController</span>
    <span class='helper_method identifier id'>helper_method</span> <span class='symbol val'>:current_user_session</span><span class='comma token'>,</span> <span class='symbol val'>:current_user</span>

    <span class='private identifier id'>private</span>
      <span class='def def kw'>def</span> <span class='current_user_session identifier id'>current_user_session</span>
        <span class='return return kw'>return</span> <span class='@current_user_session ivar id'>@current_user_session</span> <span class='if if_mod kw'>if</span> <span class='defined? defined kw'>defined?</span><span class='lparen token'>(</span><span class='@current_user_session ivar id'>@current_user_session</span><span class='rparen token'>)</span>
        <span class='@current_user_session ivar id'>@current_user_session</span> <span class='assign token'>=</span> <span class='UserSession constant id'>UserSession</span><span class='dot token'>.</span><span class='find identifier id'>find</span>
      <span class='end end kw'>end</span>

      <span class='def def kw'>def</span> <span class='current_user identifier id'>current_user</span>
        <span class='return return kw'>return</span> <span class='@current_user ivar id'>@current_user</span> <span class='if if_mod kw'>if</span> <span class='defined? defined kw'>defined?</span><span class='lparen token'>(</span><span class='@current_user ivar id'>@current_user</span><span class='rparen token'>)</span>
        <span class='@current_user ivar id'>@current_user</span> <span class='assign token'>=</span> <span class='current_user_session identifier id'>current_user_session</span> <span class='andop op'>&amp;&amp;</span> <span class='current_user_session identifier id'>current_user_session</span><span class='dot token'>.</span><span class='user identifier id'>user</span>
      <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<h2>Install &amp; Use</h2>
<p>
Install the gem / plugin (recommended)
</p>
<p>
From rubyforge:
</p>
<pre class="code">
  $ <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='authlogic identifier id'>authlogic</span>
</pre>
<p>
OR from github:
</p>
<pre class="code">
  $ <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='binarylogic identifier id'>binarylogic</span><span class='minus op'>-</span><span class='authlogic identifier id'>authlogic</span>
</pre>
<p>
Now add the gem dependency in your config:
</p>
<pre class="code">
  <span class='comment val'># config/environment.rb</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>&quot;authlogic&quot;</span>
</pre>
<p>
Or you install this as a plugin (for older versions of rails)
</p>
<pre class="code">
  <span class='script identifier id'>script</span><span class='div op'>/</span><span class='plugin identifier id'>plugin</span> <span class='install identifier id'>install</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/</span><span class='binarylogic identifier id'>binarylogic</span><span class='div op'>/</span><span class='authlogic identifier id'>authlogic</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
</pre>
<h2>Detailed Setup Tutorial</h2>
<p>
See the <tt>example</tt>[http://github.com/binarylogic/authlogic_example/tree/master] for a
detailed setup tutorial. I did this because not only do you have a tutorial
to go by, but you have an example app that uses the same tutorial, so you
can play around with with the code. If you have problems you can compare
the code to see what you are doing differently.
</p>
<h2>Testing</h2>
<p>
I think one of the best aspects of Authlogic is testing. For one, it cuts
out <b>a lot</b> of redundant tests in your applications because Authlogic
is already thoroughly tested for you. It doesn&#8217;t include a bunch of
tests into your application, because it comes tested, just like any other
library.
</p>
<p>
For example, think about ActiveRecord. You don&#8217;t test the internals
of ActiveRecord, because the creators of ActiveRecord have already tested
the internals for you. It wouldn&#8217;t make sense for ActiveRecord to
copy it&#8217;s hundreds of tests into your applications. The same concept
applies to Authlogic. You only need to test code you write that is specific
to your application, just like everything else in your application.
</p>
<p>
That being said, testing your code that uses Authlogic is easy. Since
everyone uses different testing suites, I created a helpful module called
Authlogic::TestCase, which is basically a set of tools for testing code
using Authlogic. I explain testing Authlogic thoroughly in the
{Authlogic::TestCase section of the
documentation}[http://authlogic.rubyforge.org/classes/Authlogic/TestCase.html].
It should answer any questions you have in regards to testing Authlogic.
</p>
<h2>Tell me quickly how Authlogic works</h2>
<p>
Interested in how all of this all works? Think about an ActiveRecord model.
A database connection must be established before you can use it. In the
case of Authlogic, a controller connection must be established before you
can use it. It uses that controller connection to modify cookies, the
current session, login with HTTP basic, etc. It connects to the controller
through a before filter that is automatically set in your controller which
lets Authlogic know about the current controller object. Then Authlogic
leverages that to do everything, it&#8217;s a pretty simple design. Nothing
crazy going on, Authlogic is just leveraging the tools your framework
provides in the controller object.
</p>
<h2>What sets Authlogic apart and why I created it</h2>
<p>
What inspired me to create Authlogic was the messiness of the current
authentication solutions. Put simply, they just didn&#8217;t feel right,
because the logic was not organized properly. As you may know, a common
misconception with the MVC design pattern is that the model &quot;M&quot;
is only for data access logic, which is wrong. A model is a place for
domain logic. This is why the RESTful design pattern and the current
authentication solutions don&#8217;t play nice. Authlogic solves this by
placing the session maintenance logic into its own domain (aka
&quot;model&quot;). Moving session maintenance into its own domain has its
benefits:
</p>
<ol>
<li><b>It&#8217;s cleaner.</b> There are no generators in Authlogic. Authlogic
provides a class that you can use, it&#8217;s plain and simple ruby. More
importantly, the code in your app is code you write, written the way you
want, nice and clean. It&#8217;s code that should be in your app and is
specific to your app, not a redundant authentication pattern.

</li>
<li><b>Easier to stay up-to-date.</b> To make my point, take a look at the
commits to any other authentication solution, then look at the {commits for
authlogic}[http://github.com/binarylogic/authlogic/commits/master]. How
many commits could you easily start using if you already had an app using
that solution? With an alternate solution, very few, if any. All of those
cool new features and bug fixes are going to have be manually added or wait
for your next application. Which is the main reason a generator is not
suitable as an authentication solution. With Authlogic you can start using
the latest code with a simple update of a gem. No generators, no mess.

</li>
<li><b>It ties everything together on the domain level.</b> Take a new user
registration for example, no reason to manually log the user in, authlogic
handles this for you via callbacks. The same applies to a user changing
their password. Authlogic handles maintaining the session for you.

</li>
<li><b>No redundant tests.</b> Because Authlogic doesn&#8217;t use generators,
#1 also applies to tests. Authlogic is <b>thoroughly</b> tested for you.
You don&#8217;t go and test the internals of ActiveRecord in each of your
apps do you? So why do the same for Authlogic? Your application tests
should be for application specific code. Get rid of the noise and make your
tests focused and concise, no reason to copy tests from app to app.

</li>
<li><b>Framework agnostic</b>. Authlogic can be used in <b>any</b> ruby
framework you want: Rails, Merb, Sinatra, Mack, your own framework,
whatever. It&#8217;s not tied down to Rails. It does this by abstracting
itself from these framework&#8217;s controllers by using a controller
adapter. Thanks to <tt>Rack</tt>[http://rack.rubyforge.org/], there is a defined
standard for controller structure, and that&#8217;s what Authlogic&#8217;s
abstract adapter follows. So if your controller follows the rack standards,
you don&#8217;t need to do anything. Any place it deviates from this is
solved by a simple adapter for your framework that closes these gaps. For
an example, checkout the Authlogic::ControllerAdapters::MerbAdapter.

</li>
<li><b>You are not restricted to a single session.</b> Think about
Apple&#8217;s me.com, where they need you to authenticate a second time
before changing your billing information. Why not just create a second
session for this? It works just like your initial session. Then your
billing controller can require an &quot;ultra secure&quot; session.

</li>
<li><b>Easily extendable.</b> One of the distinct advantages of using a library
is the ability to use it&#8217;s API, assuming it has one. Authlogic has an
<b>excellent</b> public API, meaning it can easily be extended and grow
beyond the core library. Checkout the &quot;add ons&quot; list above to see
what I mean.

</li>
</ol>
<p>
Copyright &#169; 2009 {Ben Johnson of Binary
Logic}[http://www.binarylogic.com], released under the MIT license
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>