<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>binarylogic's searchlogic - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/binarylogic/commits/searchlogic/master" rel="alternate" title="Recent Commits to searchlogic:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("binarylogic", "searchlogic", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='binarylogic/searchlogic/blob/452cd7577feb1ef281565f4c5f1c7ea65d723e96' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='binarylogic/searchlogic/blob/452cd7577feb1ef281565f4c5f1c7ea65d723e96' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("binarylogic", "searchlogic", "452cd7577feb1ef281565f4c5f1c7ea65d723e96", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/binarylogic/searchlogic/tree/">Source</a></li>
            <li class=""><a href="http://github.com/binarylogic/searchlogic/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/binarylogic/searchlogic/network">Network</a></li>            
            <li class=""><a href="http://github.com/binarylogic/searchlogic/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/binarylogic/searchlogic">Wiki</a></li>
            <li class=""><a href="http://github.com/binarylogic/searchlogic/graphs">Graphs</a></li>                    
            <li class="active"><a href="/binarylogic/searchlogic">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/binarylogic">binarylogic</a> / <b><a href="http://github.com/binarylogic/searchlogic/tree">searchlogic</a></b>        
                <a id="namespaces_button" rel="binarylogic/searchlogic/blob/452cd7577feb1ef281565f4c5f1c7ea65d723e96" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="binarylogic/searchlogic/blob/452cd7577feb1ef281565f4c5f1c7ea65d723e96" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Searchlogic</h1>
<p>
<b>Searchlogic has been <em>completely</em> rewritten for v2. It is much
simpler and has taken an entirely new approach. To give you an idea, v1 had
~2300 lines of code, v2 has ~420 lines of code.</b>
</p>
<p>
Searchlogic provides common named scopes and object based searching for
ActiveRecord.
</p>
<h2>Helpful links</h2>
<ul>
<li><b>Documentation:</b> http://rdoc.info/projects/binarylogic/searchlogic

</li>
<li><b>Repository:</b> http://github.com/binarylogic/searchlogic/tree/master

</li>
<li><b>Bugs / feature suggestions:</b>
http://binarylogic.lighthouseapp.com/projects/16601-searchlogic

</li>
<li><b>Google group:</b> http://groups.google.com/group/searchlogic

</li>
</ul>
<p>
<b>Before contacting me directly, please read:</b>
</p>
<p>
If you find a bug or a problem please post it on lighthouse. If you need
help with something, please use google groups. I check both regularly and
get emails when anything happens, so that is the best place to get help.
This also benefits other people in the future with the same questions /
problems. Thank you.
</p>
<h2>Install &amp; use</h2>
<p>
Install the gem from rubyforge:
</p>
<pre class="code">
  <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='searchlogic identifier id'>searchlogic</span>
</pre>
<p>
Or from github:
</p>
<pre class="code">
  <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='binarylogic identifier id'>binarylogic</span><span class='minus op'>-</span><span class='searchlogic identifier id'>searchlogic</span>
</pre>
<p>
Now just include it in your project and you are ready to go.
</p>
<p>
You can also install this as a plugin:
</p>
<pre class="code">
  <span class='script identifier id'>script</span><span class='div op'>/</span><span class='plugin identifier id'>plugin</span> <span class='install identifier id'>install</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/</span><span class='binarylogic identifier id'>binarylogic</span><span class='div op'>/</span><span class='searchlogic identifier id'>searchlogic</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
</pre>
<p>
See below for usage examples.
</p>
<h2>Search using conditions on columns</h2>
<p>
Instead of explaining what Searchlogic can do, let me show you. Let&#8217;s
start at the top:
</p>
<pre class="code">
  <span class='comment val'># We have the following model</span>
  <span class='User constant id'>User</span><span class='lparen token'>(</span><span class='id identifier id'>id</span><span class='colon op'>:</span> <span class='integer identifier id'>integer</span><span class='comma token'>,</span> <span class='created_at identifier id'>created_at</span><span class='colon op'>:</span> <span class='datetime identifier id'>datetime</span><span class='comma token'>,</span> <span class='username identifier id'>username</span><span class='colon op'>:</span> <span class='string identifier id'>string</span><span class='comma token'>,</span> <span class='age identifier id'>age</span><span class='colon op'>:</span> <span class='integer identifier id'>integer</span><span class='rparen token'>)</span>

  <span class='comment val'># Searchlogic gives you a bunch of named scopes for free:</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_equals identifier id'>username_equals</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_does_not_equal identifier id'>username_does_not_equal</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_begins_with identifier id'>username_begins_with</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_like identifier id'>username_like</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_ends_with identifier id'>username_ends_with</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='age_greater_than identifier id'>age_greater_than</span><span class='lparen token'>(</span><span class='integer val'>20</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='age_greater_than_or_equal_to identifier id'>age_greater_than_or_equal_to</span><span class='lparen token'>(</span><span class='integer val'>20</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='age_less_than identifier id'>age_less_than</span><span class='lparen token'>(</span><span class='integer val'>20</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='age_less_than_or_equal_to identifier id'>age_less_than_or_equal_to</span><span class='lparen token'>(</span><span class='integer val'>20</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_null identifier id'>username_null</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_blank identifier id'>username_blank</span>

  <span class='comment val'># You can also order by columns</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='ascend_by_username identifier id'>ascend_by_username</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='descend_by_username identifier id'>descend_by_username</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='order identifier id'>order</span><span class='lparen token'>(</span><span class='string val'>&quot;ascend_by_username&quot;</span><span class='rparen token'>)</span>
</pre>
<p>
Any named scope Searchlogic creates is dynamic and created via
method_missing. Meaning it will only create what you need. Also, keep in
mind, these are just named scopes, you can chain them, call methods off of
them, etc:
</p>
<pre class="code">
  <span class='scope identifier id'>scope</span> <span class='assign token'>=</span> <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_like identifier id'>username_like</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='age_greater_than identifier id'>age_greater_than</span><span class='lparen token'>(</span><span class='integer val'>20</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='ascend_by_username identifier id'>ascend_by_username</span>
  <span class='scope identifier id'>scope</span><span class='dot token'>.</span><span class='all identifier id'>all</span>
  <span class='scope identifier id'>scope</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='scope identifier id'>scope</span><span class='dot token'>.</span><span class='count identifier id'>count</span>
  <span class='comment val'># etc...</span>
</pre>
<p>
That&#8217;s all pretty standard, but here&#8217;s where Searchlogic starts
to get interesting&#8230;
</p>
<h2>Search using conditions on associated columns</h2>
<p>
You also get named scopes for any of your associations:
</p>
<pre class="code">
  <span class='comment val'># We have the following relationships</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='has_many identifier id'>has_many</span> <span class='symbol val'>:orders</span>
  <span class='Order constant id'>Order</span><span class='dot token'>.</span><span class='has_many identifier id'>has_many</span> <span class='symbol val'>:line_items</span>
  <span class='LineItem constant id'>LineItem</span>

  <span class='comment val'># Set conditions on association columns</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='orders_total_greater_than identifier id'>orders_total_greater_than</span><span class='lparen token'>(</span><span class='integer val'>20</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='orders_line_items_price_greater_than identifier id'>orders_line_items_price_greater_than</span><span class='lparen token'>(</span><span class='integer val'>20</span><span class='rparen token'>)</span>

  <span class='comment val'># Order by association columns</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='ascend_by_order_total identifier id'>ascend_by_order_total</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='descend_by_orders_line_items_price identifier id'>descend_by_orders_line_items_price</span>
</pre>
<p>
Again these are just named scopes. You can chain them together, call
methods off of them, etc. What&#8217;s great about these named scopes is
that they do NOT use the :include option, making them <em>much</em> faster.
Instead they create a INNER JOIN and pass it to the :joins option, which is
great for performance. To prove my point here is a quick benchmark from an
application I am working on:
</p>
<pre class="code">
  <span class='Benchmark constant id'>Benchmark</span><span class='dot token'>.</span><span class='bm identifier id'>bm</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='x identifier id'>x</span><span class='bitor op'>|</span>
    <span class='x identifier id'>x</span><span class='dot token'>.</span><span class='report identifier id'>report</span> <span class='lbrace token'>{</span> <span class='float val'>10</span><span class='dot token'>.</span><span class='times identifier id'>times</span> <span class='lbrace token'>{</span> <span class='Event constant id'>Event</span><span class='dot token'>.</span><span class='tickets_id_gt identifier id'>tickets_id_gt</span><span class='lparen token'>(</span><span class='integer val'>10</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='symbol val'>:include</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:tickets</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span> <span class='rbrace token'>}</span>
    <span class='x identifier id'>x</span><span class='dot token'>.</span><span class='report identifier id'>report</span> <span class='lbrace token'>{</span> <span class='float val'>10</span><span class='dot token'>.</span><span class='times identifier id'>times</span> <span class='lbrace token'>{</span> <span class='Event constant id'>Event</span><span class='dot token'>.</span><span class='tickets_id_gt identifier id'>tickets_id_gt</span><span class='lparen token'>(</span><span class='integer val'>10</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='all identifier id'>all</span> <span class='rbrace token'>}</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
        <span class='user identifier id'>user</span>     <span class='system identifier id'>system</span>      <span class='total identifier id'>total</span>        <span class='real identifier id'>real</span>
   <span class='float val'>10.120000</span>   <span class='integer val'>0</span><span class='integer val'>.170000</span>  <span class='float val'>10.290000</span> <span class='lparen token'>(</span> <span class='float val'>12.625521</span><span class='rparen token'>)</span>
    <span class='float val'>2.630000</span>   <span class='integer val'>0</span><span class='integer val'>.050000</span>   <span class='float val'>2.680000</span> <span class='lparen token'>(</span>  <span class='float val'>3.313754</span><span class='rparen token'>)</span>
</pre>
<p>
If you want to use the :include option, just specify it:
</p>
<pre class="code">
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='orders_line_items_price_greater_than identifier id'>orders_line_items_price_greater_than</span><span class='lparen token'>(</span><span class='integer val'>20</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='symbol val'>:include</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:orders</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:line_items</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
</pre>
<p>
Obviously, only do this if you want to actually use the included objects.
</p>
<h2>Make searching and ordering data in your application trivial</h2>
<p>
The above is great, but what about tying all of this in with a search form
in your application? What would be really nice is if we could use an object
that represented a single search. Like this&#8230;
</p>
<pre class="code">
  <span class='search identifier id'>search</span> <span class='assign token'>=</span> <span class='User constant id'>User</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span><span class='symbol val'>:username_like</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;bjohnson&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:age_less_than</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>20</span><span class='rparen token'>)</span>
  <span class='search identifier id'>search</span><span class='dot token'>.</span><span class='all identifier id'>all</span>
</pre>
<p>
The above is equivalent to:
</p>
<pre class="code">
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_like identifier id'>username_like</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='age_less_than identifier id'>age_less_than</span><span class='lparen token'>(</span><span class='integer val'>20</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='all identifier id'>all</span>
</pre>
<p>
You can set, read, and chain conditions off of your search too:
</p>
<pre class="code">
  <span class='search identifier id'>search</span><span class='dot token'>.</span><span class='username_like identifier id'>username_like</span>                              <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;bjohnson&quot;</span>
  <span class='search identifier id'>search</span><span class='dot token'>.</span><span class='age_gt identifier id'>age_gt</span> <span class='assign token'>=</span> <span class='integer val'>2</span>                                 <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span>
  <span class='search identifier id'>search</span><span class='dot token'>.</span><span class='id_gt identifier id'>id_gt</span><span class='lparen token'>(</span><span class='integer val'>10</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='email_begins_with identifier id'>email_begins_with</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='rparen token'>)</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='comment val'>#Searchlogic::Search...&gt;</span>
  <span class='search identifier id'>search</span><span class='dot token'>.</span><span class='all identifier id'>all</span>                                        <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='An constant id'>An</span> <span class='array identifier id'>array</span> <span class='of identifier id'>of</span> <span class='users identifier id'>users</span>
  <span class='search identifier id'>search</span><span class='dot token'>.</span><span class='count identifier id'>count</span>                                      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer identifier id'>integer</span>
  <span class='comment val'># .. etc</span>
</pre>
<p>
So let&#8217;s start with the controller&#8230;
</p>
<h3>Your controller</h3>
<p>
The search class just chains named scopes together for you. What&#8217;s so
great about that? It keeps your controllers extremely simple:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='UsersController constant id'>UsersController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>
    <span class='def def kw'>def</span> <span class='index identifier id'>index</span>
      <span class='@search ivar id'>@search</span> <span class='assign token'>=</span> <span class='User constant id'>User</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:search</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='@users ivar id'>@users</span> <span class='assign token'>=</span> <span class='@search ivar id'>@search</span><span class='dot token'>.</span><span class='all identifier id'>all</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
It doesn&#8217;t get any simpler than that.
</p>
<h3>Your form</h3>
<p>
Adding a search condition is as simple as adding a condition to your form.
Remember all of those named scopes above? Just create fields with the same
names:
</p>
<pre class="code">
  <span class='minus op'>-</span> <span class='form_for identifier id'>form_for</span> <span class='@search ivar id'>@search</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
    <span class='assign token'>=</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='text_field identifier id'>text_field</span> <span class='symbol val'>:username_like</span>
    <span class='assign token'>=</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='symbol val'>:age_greater_than</span><span class='comma token'>,</span> <span class='lparen token'>(</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>100</span><span class='rparen token'>)</span>
    <span class='assign token'>=</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='text_field identifier id'>text_field</span> <span class='symbol val'>:orders_total_greater_than</span>
    <span class='assign token'>=</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='submit identifier id'>submit</span>
</pre>
<p>
When a Searchlogic::Search object is passed to form_for it will add a
hidden field for the &quot;order&quot; condition, to preserve the order of
the data.
</p>
<h3>Additional helpers</h3>
<p>
There really isn&#8217;t a big need for helpers in searchlogic, other than
helping you order data. If you want to order your search with a link, just
specify the name of the column. Ex:
</p>
<pre class="code">
  <span class='assign token'>=</span> <span class='order identifier id'>order</span> <span class='@search ivar id'>@search</span><span class='comma token'>,</span> <span class='symbol val'>:by</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:age</span>
  <span class='assign token'>=</span> <span class='order identifier id'>order</span> <span class='@search ivar id'>@search</span><span class='comma token'>,</span> <span class='symbol val'>:by</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:created_at</span><span class='comma token'>,</span> <span class='symbol val'>:as</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Created date&quot;</span>
</pre>
<p>
The first one will create a link that alternates between calling
&quot;ascend_by_age&quot; and &quot;descend_by_age&quot;. If you wanted to
order your data by more than just a column, create your own named scopes:
&quot;ascend_by_*&quot; and &quot;descend_by_*&quot;. The &quot;order&quot;
helper is a very straight forward helper, checkout the docs for some of the
options.
</p>
<p>
<b>This helper is just a convenience method. It&#8217;s extremely simple
and there is nothing wrong with creating your own. If it doesn&#8217;t do
what you want, copy the code, modify it, and create your own. You could
even fork the project, modify it there, and use your own gem.</b>
</p>
<h2>Use your existing named scopes</h2>
<p>
This is one of the big differences between Searchlogic v1 and v2. What
about your existing named scopes? Let&#8217;s say you have this:
</p>
<pre class="code">
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='named_scope identifier id'>named_scope</span> <span class='symbol val'>:four_year_olds</span><span class='comma token'>,</span> <span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:age</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>4</span><span class='rbrace token'>}</span>
</pre>
<p>
Again, these are all just named scopes, use it in the same way:
</p>
<pre class="code">
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span><span class='symbol val'>:four_year_olds</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:username_like</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;bjohnson&quot;</span><span class='rparen token'>)</span>
</pre>
<p>
Notice we pass true as the value. If a named scope does not accept any
parameters (arity == 0) you can simply pass it true or false. If you pass
false, the named scope will be ignored. If your named scope accepts a
parameter, the value will be passed right to the named scope regardless of
the value.
</p>
<p>
Now just throw it in your form:
</p>
<pre class="code">
  <span class='minus op'>-</span> <span class='form_for identifier id'>form_for</span> <span class='@search ivar id'>@search</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
    <span class='assign token'>=</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='text_field identifier id'>text_field</span> <span class='symbol val'>:username_like</span>
    <span class='assign token'>=</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='check_box identifier id'>check_box</span> <span class='symbol val'>:four_year_olds</span>
    <span class='assign token'>=</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='submit identifier id'>submit</span>
</pre>
<p>
What&#8217;s great about this is that you can do just about anything you
want. If Searchlogic doesn&#8217;t provide a named scope for that crazy
edge case that you need, just create your own named scope. The sky is the
limit.
</p>
<h2>Use any or all</h2>
<p>
Every condition you&#8217;ve seen in this readme also has 2 related
conditions that you can use. Example:
</p>
<pre class="code">
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_like_any identifier id'>username_like_any</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;thunt&quot;</span><span class='rparen token'>)</span>   <span class='comment val'># will return any users that have either of the strings in their username</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_like_all identifier id'>username_like_all</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;thunt&quot;</span><span class='rparen token'>)</span>   <span class='comment val'># will return any users that have all of the strings in their username</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_like_any identifier id'>username_like_any</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='string val'>&quot;bjohnson&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;thunt&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='comment val'># also accepts an array</span>
</pre>
<p>
This is great for checkbox filters, etc. Where you can pass an array right
from your form to this condition.
</p>
<h2>Pagination (leverage will_paginate)</h2>
<p>
Instead of recreating the wheel with pagination, Searchlogic works great
with will_paginate. All that Searchlogic is doing is creating named scopes,
and will_paginate works great with named scopes:
</p>
<pre class="code">
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='username_like identifier id'>username_like</span><span class='lparen token'>(</span><span class='string val'>&quot;bjohnson&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='age_less_than identifier id'>age_less_than</span><span class='lparen token'>(</span><span class='integer val'>20</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='paginate identifier id'>paginate</span><span class='lparen token'>(</span><span class='symbol val'>:page</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:page</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span><span class='symbol val'>:username_like</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;bjohnson&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:age_less_than</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>20</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='paginate identifier id'>paginate</span><span class='lparen token'>(</span><span class='symbol val'>:page</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:page</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
</pre>
<p>
If you don&#8217;t like will_paginate, use another solution, or roll your
own. Pagination really has nothing to do with searching, and the main goal
for Searchlogic v2 was to keep it lean and simple. No reason to recreate
the wheel and bloat the library.
</p>
<h2>Conflicts with other gems</h2>
<p>
You will notice searchlogic wants to create a method called
&quot;search&quot;. So do other libraries like thinking sphinx, etc. So
searchlogic has a no conflict resolution. If the &quot;search&quot; method
is already taken the method will be called &quot;searchlogic&quot; instead.
So instead of
</p>
<pre class="code">
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='search identifier id'>search</span>
</pre>
<p>
You would do:
</p>
<pre class="code">
  <span class='User constant id'>User</span><span class='dot token'>.</span><span class='searchlogic identifier id'>searchlogic</span>
</pre>
<h2>Under the hood</h2>
<p>
Before I use a library in my application I like to glance at the source and
try to at least understand the basics of how it works. If you are like me,
a nice little explanation from the author is always helpful:
</p>
<p>
Searchlogic utilizes method_missing to create all of these named scopes.
When it hits method_missing it creates a named scope to ensure it will
never hit method missing for that named scope again. Sort of a caching
mechanism. It works in the same fashion as ActiveRecord&#8217;s
&quot;find_by_*&quot; methods. This way only the named scopes you need are
created and nothing more.
</p>
<p>
That&#8217;s about it, the named scope options are pretty bare bones and
created just like you would manually.
</p>
<h2>Credit</h2>
<p>
Thanks a lot to <tt>Hunt</tt>[http://github.com/tylerhunt] for helping plan,
design, and start the project. He was a big help.
</p>
<h2>Copyright</h2>
<p>
Copyright &#169; 2009 {Ben Johnson of Binary
Logic}[http://www.binarylogic.com], released under the MIT license
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>