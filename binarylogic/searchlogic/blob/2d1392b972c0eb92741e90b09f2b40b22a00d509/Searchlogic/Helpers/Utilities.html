<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>binarylogic's searchlogic - Module: Searchlogic::Helpers::Utilities - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/binarylogic/commits/searchlogic/master" rel="alternate" title="Recent Commits to searchlogic:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("binarylogic", "searchlogic", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='binarylogic/searchlogic/blob/2d1392b972c0eb92741e90b09f2b40b22a00d509' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='binarylogic/searchlogic/blob/2d1392b972c0eb92741e90b09f2b40b22a00d509' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("binarylogic", "searchlogic", "2d1392b972c0eb92741e90b09f2b40b22a00d509", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/binarylogic/searchlogic/tree/">Source</a></li>
            <li class=""><a href="http://github.com/binarylogic/searchlogic/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/binarylogic/searchlogic/network">Network</a></li>            
            <li class=""><a href="http://github.com/binarylogic/searchlogic/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/binarylogic/searchlogic">Wiki</a></li>
            <li class=""><a href="http://github.com/binarylogic/searchlogic/graphs">Graphs</a></li>                    
            <li class="active"><a href="/binarylogic/searchlogic">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/binarylogic">binarylogic</a> / <b><a href="http://github.com/binarylogic/searchlogic/tree">searchlogic</a></b>        
                <a id="namespaces_button" rel="binarylogic/searchlogic/blob/2d1392b972c0eb92741e90b09f2b40b22a00d509" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="binarylogic/searchlogic/blob/2d1392b972c0eb92741e90b09f2b40b22a00d509" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Searchlogic_Helpers_Utilities">
  <h1>Module: Searchlogic::Helpers::Utilities</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#searchlogic_params-instance_method">#searchlogic_params</span><span class='args'>(options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Builds a hash of params for creating a url and preserves any existing
params.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#searchlogic_state-instance_method">#searchlogic_state</span><span class='args'>(options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
When you set up a search form using form_for for remote_form_for
searchlogic adds in some <b>magic</b> for you.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#searchlogic_url-instance_method">#searchlogic_url</span><span class='args'>(options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Similar to searchlogic_hash, but instead returns a string url.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>searchlogic_params</h3>
</div><div id="searchlogic_params-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>searchlogic_params</span><span class='args'>(options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Builds a hash of params for creating a url and preserves any existing
params. You can pass this into url_for and build your url. Although most
rails helpers accept a hash.
</p>
<p>
Let&#8217;s take the page_link helper. Here is the code behind that helper:
</p>
<pre class="code">
  <span class='link_to identifier id'>link_to</span><span class='lparen token'>(</span><span class='string val'>&quot;Page 2&quot;</span><span class='comma token'>,</span> <span class='searchlogic_params identifier id'>searchlogic_params</span><span class='lparen token'>(</span><span class='symbol val'>:search_params</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:page</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
</pre>
<p>
That&#8217;s pretty much it. So if you wanted to roll your own link to
execute a search, go for it. It&#8217;s pretty simple. Pass conditions
instead of the page, set how the search will be ordered, etc.
</p>
<p>
<b>Be careful</b> when taking this approach though. Searchlogic helps you
out when you use form_for. For example, when you use the per_page_select
helper, it adds in a hidden form field with the value of the page. So when
your search form is submitted it searches the document for that element,
finds the current value, which is the current per_page value, and includes
that in the search. So when a user searches the per_page value stays
consistent. If you use the searchlogic_params you are on your own. I am
always curious how people are using searchlogic. So if you are building
your own helpers contact me and maybe I can help you and add in a helper
for you, making it an <b>official</b> feature.
</p>
<h3>Options</h3>
<ul>
<li><tt>:params_scope</tt> &#8212; default: :search, this is the scope in which
your search params will be preserved (params[:search]). If you don&#8217;t
want a scope and want your options to be at base leve in params such as
params[:page], params[:per_page], etc, then set this to nil.

</li>
<li><tt>:search_obj</tt> &#8212; default: @#{params_scope}, this is your search
object, everything revolves around this. It will try to infer the name from
your params_scope. If your params_scope is :search it will try to get
@search, etc. If it can not be inferred by this, you need to pass the
object itself.

</li>
<li><tt>:params</tt> &#8212; default: nil, Additional params to add to the url,
must be a hash

</li>
<li><tt>:exclude_params</tt> &#8212; default: nil, params you want to exclude.
This is nifty because it does a &quot;deep delete&quot;. So you can pass
<tt>=&amp;gt; {:param2 =&amp;gt; :param3</tt>} and it will make sure param3 does
not get include. param1 and param2 will not be touched. This also accepts
an array or just a symbol or string.

</li>
<li><tt>:search_params</tt> &#8212; default: nil, Additional search params to
add to the url, must be a hash. Adds the options into the :params_scope.

</li>
<li><tt>:exclude_search_params</tt> &#8212; default: nil, Same as
:exclude_params but for the :search_params.

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/searchlogic/helpers/utilities.rb', line 24</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/binarylogic/searchlogic/blob/2d1392b972c0eb92741e90b09f2b40b22a00d509/lib/searchlogic/helpers/utilities.rb#L24">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='searchlogic_params identifier id'>searchlogic_params</span><span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='add_searchlogic_defaults! fid id'>add_searchlogic_defaults!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:search_params</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:literal_search_params</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:params</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='params_copy identifier id'>params_copy</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='deep_dup identifier id'>deep_dup</span><span class='dot token'>.</span><span class='with_indifferent_access identifier id'>with_indifferent_access</span>
  <span class='search_params identifier id'>search_params</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:params_scope</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span> <span class='integer val'>? </span><span class='params_copy identifier id'>params_copy</span> <span class='colon op'>:</span> <span class='params_copy identifier id'>params_copy</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:params_scope</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='search_params identifier id'>search_params</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='search_params identifier id'>search_params</span> <span class='assign token'>=</span> <span class='search_params identifier id'>search_params</span><span class='dot token'>.</span><span class='with_indifferent_access identifier id'>with_indifferent_access</span>
  <span class='search_params identifier id'>search_params</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:commit</span><span class='rparen token'>)</span>
  <span class='search_params identifier id'>search_params</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:page</span><span class='rparen token'>)</span>
  <span class='search_params identifier id'>search_params</span><span class='dot token'>.</span><span class='deep_delete_duplicate_keys identifier id'>deep_delete_duplicate_keys</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:literal_search_params</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='search_params identifier id'>search_params</span><span class='dot token'>.</span><span class='deep_delete identifier id'>deep_delete</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:exclude_search_params</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  
  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:search_params</span><span class='rbrack token'>]</span>
    
    <span class='comment val'>#raise params_copy.inspect if options[:search_params][:order_by] == :id</span>
    <span class='search_params identifier id'>search_params</span><span class='dot token'>.</span><span class='deep_merge! fid id'>deep_merge!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:search_params</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    
    <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:search_params</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:order_by</span><span class='rbrack token'>]</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:search_params</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:order_as</span><span class='rbrack token'>]</span>
      <span class='search_params identifier id'>search_params</span><span class='lbrack token'>[</span><span class='symbol val'>:order_as</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='searchlogic_ordering_by? fid id'>searchlogic_ordering_by?</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:search_params</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:order_by</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:search_obj</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='asc? fid id'>asc?</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='string val'>&quot;DESC&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;ASC&quot;</span> 
    <span class='end end kw'>end</span>
    
    <span class='lbrack token'>[</span><span class='symbol val'>:order_by</span><span class='comma token'>,</span> <span class='symbol val'>:priority_order_by</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='base64_field identifier id'>base64_field</span><span class='bitor op'>|</span> <span class='search_params identifier id'>search_params</span><span class='lbrack token'>[</span><span class='base64_field identifier id'>base64_field</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='searchlogic_base64_value identifier id'>searchlogic_base64_value</span><span class='lparen token'>(</span><span class='search_params identifier id'>search_params</span><span class='lbrack token'>[</span><span class='base64_field identifier id'>base64_field</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='search_params identifier id'>search_params</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='base64_field identifier id'>base64_field</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
  
  <span class='new_params identifier id'>new_params</span> <span class='assign token'>=</span> <span class='params_copy identifier id'>params_copy</span>
  <span class='new_params identifier id'>new_params</span><span class='dot token'>.</span><span class='deep_merge! fid id'>deep_merge!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:params</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='new_params identifier id'>new_params</span><span class='dot token'>.</span><span class='deep_delete identifier id'>deep_delete</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:exclude_params</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  
  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:params_scope</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span> <span class='orop op'>||</span> <span class='search_params identifier id'>search_params</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
    <span class='new_params identifier id'>new_params</span>
  <span class='else else kw'>else</span>
    <span class='new_params identifier id'>new_params</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:params_scope</span><span class='rbrack token'>]</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='search_params identifier id'>search_params</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>searchlogic_state</h3>
</div><div id="searchlogic_state-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>searchlogic_state</span><span class='args'>(options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
When you set up a search form using form_for for remote_form_for
searchlogic adds in some <b>magic</b> for you.
</p>
<p>
Take the instance where a user orders the data by something other than the
default, and then does a search. The user would expect the search to
remember what the user selected to order the data by, right? What
searchlogic does is add in some hidden fields, somewhere in the page, the
represent the searchlogic &quot;state&quot;. These are automatically added
for you when you use the searchlogic helpers. Such as: page_links,
page_link, order_by_link, per_page_select, etc. So if you are using those
you do not need to worry about this helper.
</p>
<p>
If for some reason you do not use any of these you need to put the
searchlogic state on your page somewhere. Somewhere where the state will
<b>always</b> be up-to-date, which would be most likely be in the partial
that renders your search results (assuming you are using AJAX). Otherwise
when the user starts a new search, the state will be reset. Meaning the
order_by, per_page, etc will all be reset.
</p>
<h3>Options</h3>
<ul>
<li><tt>:params_scope</tt> &#8212; default: :search, this is the scope in which
your search params will be preserved (params[:search]). If you don&#8217;t
want a scope and want your options to be at base leve in params such as
params[:page], params[:per_page], etc, then set this to nil.

</li>
<li><tt>:search_obj</tt> &#8212; default: @#{params_scope}, this is your search
object, everything revolves around this. It will try to infer the name from
your params_scope. If your params_scope is :search it will try to get
@search, etc. If it can not be inferred by this, you need to pass the
object itself.

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/searchlogic/helpers/utilities.rb', line 108</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/binarylogic/searchlogic/blob/2d1392b972c0eb92741e90b09f2b40b22a00d509/lib/searchlogic/helpers/utilities.rb#L108">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">108
109
110
111
112
113
114
115
116
117
118</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='searchlogic_state identifier id'>searchlogic_state</span><span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='string val'>&quot;&quot;</span> <span class='if if_mod kw'>if</span> <span class='@added_searchlogic_state ivar id'>@added_searchlogic_state</span>
  <span class='add_searchlogic_defaults! fid id'>add_searchlogic_defaults!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='html identifier id'>html</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
  <span class='lparen token'>(</span><span class='Search constant id'>Search</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='colon2 op'>::</span><span class='SPECIAL_FIND_OPTIONS constant id'>SPECIAL_FIND_OPTIONS</span> <span class='minus op'>-</span> <span class='lbrack token'>[</span><span class='symbol val'>:page</span><span class='comma token'>,</span> <span class='symbol val'>:priority_order</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='option identifier id'>option</span><span class='bitor op'>|</span>
    <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:search_obj</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='option identifier id'>option</span><span class='rparen token'>)</span>
    <span class='html identifier id'>html</span> <span class='opasgn op'>+=</span> <span class='hidden_field identifier id'>hidden_field</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:params_scope</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='option identifier id'>option</span><span class='comma token'>,</span> <span class='symbol val'>:value</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='option identifier id'>option</span> <span class='eq op'>==</span> <span class='symbol val'>:order_by</span> <span class='question op'>?</span> <span class='searchlogic_base64_value identifier id'>searchlogic_base64_value</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='@added_searchlogic_state ivar id'>@added_searchlogic_state</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='html identifier id'>html</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>searchlogic_url</h3>
</div><div id="searchlogic_url-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>searchlogic_url</span><span class='args'>(options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Similar to searchlogic_hash, but instead returns a string url. The reason
this exists is to assist in creating urls in javascript. It&#8217;s the
muscle behind all of the select helpers that searchlogic provides. Take the
instance where you want to do:
</p>
<pre class="code">
  <span class='symbol val'>:onchange</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>&quot;window.location = '#{url_for(searchlogic_params)}&amp;my_param=' + this.value;&quot;</span>
</pre>
<p>
Well the above obviously won&#8217;t work. Do you need to apped the url
with a ? or a &amp;? What about that tricky :params_scope? That&#8217;s
where this is handy, beacuse it does all of the params string building for
you. Check it out:
</p>
<pre class="code">
  <span class='symbol val'>:onchange</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;window.location = '&quot;</span> <span class='plus op'>+</span> <span class='searchlogic_url identifier id'>searchlogic_url</span><span class='lparen token'>(</span><span class='symbol val'>:literal_search_params</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:per_page</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;' + escape(this.value) + '&quot;</span><span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>&quot;';&quot;</span>
</pre>
<p>
or what about something a little more tricky?
</p>
<pre class="code">
  <span class='symbol val'>:onchange</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;window.location = '&quot;</span> <span class='plus op'>+</span> <span class='searchlogic_url identifier id'>searchlogic_url</span><span class='lparen token'>(</span><span class='symbol val'>:literal_search_params</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:name_contains</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;' + escape(this.value) + '&quot;</span><span class='rbrace token'>}</span><span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>&quot;';&quot;</span>
</pre>
<p>
I have personally used this for an event calendar. Above the calendar there
was a drop down for each month. Here is the code:
</p>
<pre class="code">
  <span class='symbol val'>:onchange</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;window.location = '&quot;</span> <span class='plus op'>+</span> <span class='searchlogic_url identifier id'>searchlogic_url</span><span class='lparen token'>(</span><span class='symbol val'>:literal_search_params</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:occurs_at_after</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;' + escape(this.value) + '&quot;</span><span class='rbrace token'>}</span><span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='string val'>&quot;';&quot;</span>
</pre>
<p>
Now when the user changes the month in the drop down it just runs a new
search that sets my conditions to occurs_at_after = selected month. Then in
my controller I set occurs_at_before = occurs_at_after.at_end_of_month.
</p>
<h3>Options</h3>
<ul>
<li><tt>:params_scope</tt> &#8212; default: :search, this is the scope in which
your search params will be preserved (params[:search]). If you don&#8217;t
want a scope and want your options to be at base leve in params such as
params[:page], params[:per_page], etc, then set this to nil.

</li>
<li><tt>:search_obj</tt> &#8212; default: @#{params_scope}, this is your search
object, everything revolves around this. It will try to infer the name from
your params_scope. If your params_scope is :search it will try to get
@search, etc. If it can not be inferred by this, you need to pass the
object itself.

</li>
<li><tt>:params</tt> &#8212; default: nil, Additional params to add to the url,
must be a hash

</li>
<li><tt>:exclude_params</tt> &#8212; default: nil, params you want to exclude.
This is nifty because it does a &quot;deep delete&quot;. So you can pass
<tt>=&amp;gt; {:param2 =&amp;gt; :param3</tt>} and it will make sure param3 does
not get include. param1 and param2 will not be touched. This also accepts
an array or just a symbol or string.

</li>
<li><tt>:search_params</tt> &#8212; default: nil, Additional search params to
add to the url, must be a hash. Adds the options into the :params_scope.

</li>
<li><tt>:literal_search_params</tt> &#8212; default: nil, Additional search
params to add to the url, but are not escaped. So you can add javascript
into the URL: :literal_search_params =&gt; {:per_page =&gt; &quot;&#8217; <tt>
escape(this.value) </tt> &#8217;&quot;}

</li>
<li><tt>:exclude_search_params</tt> &#8212; default: nil, Same as
:exclude_params but for the :search_params.

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/searchlogic/helpers/utilities.rb', line 89</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/binarylogic/searchlogic/blob/2d1392b972c0eb92741e90b09f2b40b22a00d509/lib/searchlogic/helpers/utilities.rb#L89">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">89
90
91
92
93
94</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='searchlogic_url identifier id'>searchlogic_url</span><span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='search_params identifier id'>search_params</span> <span class='assign token'>=</span> <span class='searchlogic_params identifier id'>searchlogic_params</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='url identifier id'>url</span> <span class='assign token'>=</span> <span class='url_for identifier id'>url_for</span><span class='lparen token'>(</span><span class='search_params identifier id'>search_params</span><span class='rparen token'>)</span>
  <span class='literal_param_strings identifier id'>literal_param_strings</span> <span class='assign token'>=</span> <span class='literal_param_strings identifier id'>literal_param_strings</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:literal_search_params</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:params_scope</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span> <span class='integer val'>? </span><span class='string val'>&quot;&quot;</span> <span class='colon op'>:</span> <span class='dstring node'>&quot;#{options[:params_scope]}&quot;</span><span class='rparen token'>)</span>
  <span class='url identifier id'>url</span> <span class='opasgn op'>+=</span> <span class='lparen token'>(</span><span class='url identifier id'>url</span><span class='dot token'>.</span><span class='last identifier id'>last</span> <span class='eq op'>==</span> <span class='string val'>&quot;?&quot;</span> <span class='question op'>?</span> <span class='string val'>&quot;&quot;</span> <span class='colon op'>:</span> <span class='lparen token'>(</span><span class='url identifier id'>url</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>&quot;?&quot;</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='string val'>&quot;&amp;amp;&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;?&quot;</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='literal_param_strings identifier id'>literal_param_strings</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;&amp;amp;&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>