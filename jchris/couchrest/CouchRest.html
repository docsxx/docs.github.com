<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: CouchRest</title>
  </head>
  <body>
    <div id="content">
      <div class="section module CouchRest">
  <h1 class="title">Module: CouchRest</h1>
  <div class="section docstring">
  <p>
Extracted from dm-validations 0.9.10
</p>
<p>
Copyright &#169; 2007 Guy van den Berg
</p>
<p>
Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&quot;Software&quot;), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to the
following conditions:
</p>
<p>
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
</p>
<p>
THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.
</p>

</div><div class="section constants">
  <div class="thisclass">
  <h1>Constants</h1>
  <dl>
    
      <dt id="VERSION-constant">VERSION</dt>
      <dd>'0.23' unless self.const_defined?(&quot;VERSION&quot;)</dd>
    
  </dl>
</div>

</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary class public">
    <h1>Public Class Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#constantize-class_method' title='constantize'>constantize</a></span><span class='args'>(camel_cased_word)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
extracted from Extlib.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#copy-class_method' title='copy'>copy</a></span><span class='args'>uri, destination</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#database-class_method' title='database'>database</a></span><span class='args'>url</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#database%21-class_method' title='database!'>database!</a></span><span class='args'>url</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
ensure that a database exists creates it if it isn&#8217;t already there
returns it after it&#8217;s been created.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#delete-class_method' title='delete'>delete</a></span><span class='args'>uri</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#get-class_method' title='get'>get</a></span><span class='args'>(uri)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#humanize-class_method' title='humanize'>humanize</a></span><span class='args'>(lower_case_and_underscored_word)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
extracted from Extlib
</p>
<p>
Capitalizes the first word and turns underscores into spaces and strips
_id.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#paramify_url-class_method' title='paramify_url'>paramify_url</a></span><span class='args'>url, params = {}</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#parse-class_method' title='parse'>parse</a></span><span class='args'>url</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#post-class_method' title='post'>post</a></span><span class='args'>uri, doc = nil</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#proxy-class_method' title='proxy'>proxy</a></span><span class='args'>url</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
set proxy for RestClient to use.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#put-class_method' title='put'>put</a></span><span class='args'>(uri, doc = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails class public">
  <h1>Public Class Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>constantize</h3>
</div><div id="constantize-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>constantize</span><span class='args'>(camel_cased_word)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
extracted from Extlib
</p>
<p>
Constantize tries to find a declared constant with the name specified in
the string. It raises a NameError when the name is not in CamelCase or is
not initialized.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


64
65
66
67
68
69
70</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 64</span>

<span class='def def kw'>def</span> <span class='constantize identifier id'>constantize</span><span class='lparen token'>(</span><span class='camel_cased_word identifier id'>camel_cased_word</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='regexp val'>/\A(?:::)?([A-Z]\w*(?:::[A-Z]\w*)*)\z/</span> <span class='match op'>=~</span> <span class='camel_cased_word identifier id'>camel_cased_word</span>
    <span class='raise identifier id'>raise</span> <span class='NameError constant id'>NameError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{camel_cased_word.inspect} is not a valid constant name!&quot;</span>
  <span class='end end kw'>end</span>

  <span class='Object constant id'>Object</span><span class='dot token'>.</span><span class='module_eval identifier id'>module_eval</span><span class='lparen token'>(</span><span class='dstring node'>&quot;::#{$1}&quot;</span><span class='comma token'>,</span> <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>copy</h3>
</div><div id="copy-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>copy</span><span class='args'>uri, destination</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


183
184
185</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 183</span>

<span class='def def kw'>def</span> <span class='copy identifier id'>copy</span> <span class='uri identifier id'>uri</span><span class='comma token'>,</span> <span class='destination identifier id'>destination</span>
  <span class='JSON constant id'>JSON</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='RestClient constant id'>RestClient</span><span class='dot token'>.</span><span class='copy identifier id'>copy</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='string val'>'Destination'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='destination identifier id'>destination</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>database</h3>
</div><div id="database-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>database</span><span class='args'>url</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


135
136
137
138
139</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 135</span>

<span class='def def kw'>def</span> <span class='database identifier id'>database</span> <span class='url identifier id'>url</span>
  <span class='parsed identifier id'>parsed</span> <span class='assign token'>=</span> <span class='parse identifier id'>parse</span> <span class='url identifier id'>url</span>
  <span class='cr identifier id'>cr</span> <span class='assign token'>=</span> <span class='CouchRest constant id'>CouchRest</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='parsed identifier id'>parsed</span><span class='lbrack token'>[</span><span class='symbol val'>:host</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='cr identifier id'>cr</span><span class='dot token'>.</span><span class='database identifier id'>database</span><span class='lparen token'>(</span><span class='parsed identifier id'>parsed</span><span class='lbrack token'>[</span><span class='symbol val'>:database</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>database!</h3>
</div><div id="database%21-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>database!</span><span class='args'>url</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
ensure that a database exists creates it if it isn&#8217;t already there
returns it after it&#8217;s been created
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


129
130
131
132
133</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 129</span>

<span class='def def kw'>def</span> <span class='database! fid id'>database!</span> <span class='url identifier id'>url</span>
  <span class='parsed identifier id'>parsed</span> <span class='assign token'>=</span> <span class='parse identifier id'>parse</span> <span class='url identifier id'>url</span>
  <span class='cr identifier id'>cr</span> <span class='assign token'>=</span> <span class='CouchRest constant id'>CouchRest</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='parsed identifier id'>parsed</span><span class='lbrack token'>[</span><span class='symbol val'>:host</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='cr identifier id'>cr</span><span class='dot token'>.</span><span class='database! fid id'>database!</span><span class='lparen token'>(</span><span class='parsed identifier id'>parsed</span><span class='lbrack token'>[</span><span class='symbol val'>:database</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete</h3>
</div><div id="delete-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete</span><span class='args'>uri</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


179
180
181</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 179</span>

<span class='def def kw'>def</span> <span class='delete identifier id'>delete</span> <span class='uri identifier id'>uri</span>
  <span class='JSON constant id'>JSON</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='RestClient constant id'>RestClient</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get</h3>
</div><div id="get-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get</span><span class='args'>(uri)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


154
155
156
157
158
159
160
161
162
163
164</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 154</span>

<span class='def def kw'>def</span> <span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='rparen token'>)</span>
  <span class='begin begin kw'>begin</span>
    <span class='JSON constant id'>JSON</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='RestClient constant id'>RestClient</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:max_nesting</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='if if kw'>if</span> <span class='$COUCHREST_DEBUG gvar id'>$COUCHREST_DEBUG</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>
      <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Error while sending a GET request #{uri}\n: #{e}&quot;</span>
    <span class='else else kw'>else</span>
      <span class='raise identifier id'>raise</span> <span class='e identifier id'>e</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>humanize</h3>
</div><div id="humanize-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>humanize</span><span class='args'>(lower_case_and_underscored_word)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
extracted from Extlib
</p>
<p>
Capitalizes the first word and turns underscores into spaces and strips
_id. Like titleize, this is meant for creating pretty output.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


80
81
82</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 80</span>

<span class='def def kw'>def</span> <span class='humanize identifier id'>humanize</span><span class='lparen token'>(</span><span class='lower_case_and_underscored_word identifier id'>lower_case_and_underscored_word</span><span class='rparen token'>)</span>
  <span class='lower_case_and_underscored_word identifier id'>lower_case_and_underscored_word</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/_id$/</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/_/</span><span class='comma token'>,</span> <span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='capitalize identifier id'>capitalize</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>paramify_url</h3>
</div><div id="paramify_url-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>paramify_url</span><span class='args'>url, params = {}</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


187
188
189
190
191
192
193
194
195
196</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 187</span>

<span class='def def kw'>def</span> <span class='paramify_url identifier id'>paramify_url</span> <span class='url identifier id'>url</span><span class='comma token'>,</span> <span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='if if kw'>if</span> <span class='params identifier id'>params</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='params identifier id'>params</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span><span class='v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='v identifier id'>v</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='to_json identifier id'>to_json</span> <span class='if if_mod kw'>if</span> <span class='dstring node'>%w{key startkey endkey}</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
      <span class='dstring node'>&quot;#{k}=#{CGI.escape(v.to_s)}&quot;</span>
    <span class='end end kw'>end</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;&amp;&quot;</span><span class='rparen token'>)</span>
    <span class='url identifier id'>url</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{url}?#{query}&quot;</span>
  <span class='end end kw'>end</span>
  <span class='url identifier id'>url</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>parse</h3>
</div><div id="parse-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>parse</span><span class='args'>url</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 90</span>

<span class='def def kw'>def</span> <span class='parse identifier id'>parse</span> <span class='url identifier id'>url</span>
  <span class='case case kw'>case</span> <span class='url identifier id'>url</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/^http:\/\/(.*)\/(.*)\/(.*)/</span>
    <span class='host identifier id'>host</span> <span class='assign token'>=</span> <span class='$1 nth_ref id'>$1</span>
    <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='$2 nth_ref id'>$2</span>
    <span class='docid identifier id'>docid</span> <span class='assign token'>=</span> <span class='$3 nth_ref id'>$3</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/^http:\/\/(.*)\/(.*)/</span>
    <span class='host identifier id'>host</span> <span class='assign token'>=</span> <span class='$1 nth_ref id'>$1</span>
    <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='$2 nth_ref id'>$2</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/^http:\/\/(.*)/</span>
    <span class='host identifier id'>host</span> <span class='assign token'>=</span> <span class='$1 nth_ref id'>$1</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/(.*)\/(.*)\/(.*)/</span>
    <span class='host identifier id'>host</span> <span class='assign token'>=</span> <span class='$1 nth_ref id'>$1</span>
    <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='$2 nth_ref id'>$2</span>
    <span class='docid identifier id'>docid</span> <span class='assign token'>=</span> <span class='$3 nth_ref id'>$3</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/(.*)\/(.*)/</span>
    <span class='host identifier id'>host</span> <span class='assign token'>=</span> <span class='$1 nth_ref id'>$1</span>
    <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='$2 nth_ref id'>$2</span>
  <span class='else else kw'>else</span>
    <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='url identifier id'>url</span>
  <span class='end end kw'>end</span>

  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='db identifier id'>db</span> <span class='andop op'>&amp;&amp;</span> <span class='db identifier id'>db</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>

  <span class='lbrace token'>{</span>
    <span class='symbol val'>:host</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='host identifier id'>host</span> <span class='orop op'>||</span> <span class='string val'>&quot;127.0.0.1:5984&quot;</span><span class='comma token'>,</span>
    <span class='symbol val'>:database</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='db identifier id'>db</span><span class='comma token'>,</span>
    <span class='symbol val'>:doc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='docid identifier id'>docid</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>post</h3>
</div><div id="post-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>post</span><span class='args'>uri, doc = nil</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


166
167
168
169
170
171
172
173
174
175
176
177</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 166</span>

<span class='def def kw'>def</span> <span class='post identifier id'>post</span> <span class='uri identifier id'>uri</span><span class='comma token'>,</span> <span class='doc identifier id'>doc</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='payload identifier id'>payload</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='dot token'>.</span><span class='to_json identifier id'>to_json</span> <span class='if if_mod kw'>if</span> <span class='doc identifier id'>doc</span>
  <span class='begin begin kw'>begin</span>
    <span class='JSON constant id'>JSON</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='RestClient constant id'>RestClient</span><span class='dot token'>.</span><span class='post identifier id'>post</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='comma token'>,</span> <span class='payload identifier id'>payload</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='if if kw'>if</span> <span class='$COUCHREST_DEBUG gvar id'>$COUCHREST_DEBUG</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>
      <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Error while sending a POST request #{uri}\npayload: #{payload.inspect}\n#{e}&quot;</span>
    <span class='else else kw'>else</span>
      <span class='raise identifier id'>raise</span> <span class='e identifier id'>e</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>proxy</h3>
</div><div id="proxy-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>proxy</span><span class='args'>url</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
set proxy for RestClient to use
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


122
123
124</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 122</span>

<span class='def def kw'>def</span> <span class='proxy identifier id'>proxy</span> <span class='url identifier id'>url</span>
  <span class='RestClient constant id'>RestClient</span><span class='dot token'>.</span><span class='proxy identifier id'>proxy</span> <span class='assign token'>=</span> <span class='url identifier id'>url</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>put</h3>
</div><div id="put-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>put</span><span class='args'>(uri, doc = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/couchrest.rb', line 141</span>

<span class='def def kw'>def</span> <span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='comma token'>,</span> <span class='doc identifier id'>doc</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='payload identifier id'>payload</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='dot token'>.</span><span class='to_json identifier id'>to_json</span> <span class='if if_mod kw'>if</span> <span class='doc identifier id'>doc</span>
  <span class='begin begin kw'>begin</span>
    <span class='JSON constant id'>JSON</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='RestClient constant id'>RestClient</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='comma token'>,</span> <span class='payload identifier id'>payload</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='if if kw'>if</span> <span class='$COUCHREST_DEBUG gvar id'>$COUCHREST_DEBUG</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>
      <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Error while sending a PUT request #{uri}\npayload: #{payload.inspect}\n#{e}&quot;</span>
    <span class='else else kw'>else</span>
      <span class='raise identifier id'>raise</span> <span class='e identifier id'>e</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>