<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>matsadler's tube - Class: Tube::Status - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/matsadler/commits/tube/master" rel="alternate" title="Recent Commits to tube:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("matsadler", "tube", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("matsadler", "tube", "80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/matsadler/tube/tree/">Source</a></li>
            <li class=""><a href="http://github.com/matsadler/tube/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/matsadler/tube/network">Network</a></li>            
            <li class=""><a href="http://github.com/matsadler/tube/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/matsadler/tube">Wiki</a></li>
            <li class=""><a href="http://github.com/matsadler/tube/graphs">Graphs</a></li>                    
            <li class="active"><a href="/matsadler/tube">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/matsadler">matsadler</a> / <b><a href="http://github.com/matsadler/tube/tree">tube</a></b>        
                <a id="namespaces_button" rel="matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Tube_Status">
  <h1>Class: Tube::Status</h1>
  <div class="section docstring">
  <p>
Models the status of the London Underground network as displayed on
http://www.tfl.gov.uk/tfl/livetravelnews/realtime/tube/default.html.
</p>
<p>
It is a very thin abstraction over the tfl website, as a result the access
to data on stations is somewhat different to lines due to the differing
presentation. However it is very dynamic, for example should the East
London line return it will show up in the lines array automatically.
</p>
<h2>Example Usage</h2>
<pre class="code">
 <span class='require identifier id'>require</span> <span class='string val'>'tube/status'</span>

 <span class='status identifier id'>status</span> <span class='assign token'>=</span> <span class='Tube constant id'>Tube</span><span class='colon2 op'>::</span><span class='Status constant id'>Status</span><span class='dot token'>.</span><span class='get identifier id'>get</span>

 <span class='broken_lines identifier id'>broken_lines</span> <span class='assign token'>=</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='lines identifier id'>lines</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span> <span class='line identifier id'>line</span><span class='dot token'>.</span><span class='problem? fid id'>problem?</span><span class='rbrace token'>}</span>
 <span class='broken_lines identifier id'>broken_lines</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span> <span class='line identifier id'>line</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrace token'>}</span>
 <span class='comment val'>#=&gt; [&quot;Circle&quot;, &quot;District&quot;, &quot;Jubilee&quot;, &quot;Metropolitan&quot;, &quot;Northern&quot;]</span>

 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='line identifier id'>line</span><span class='lparen token'>(</span><span class='symbol val'>:circle</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='message identifier id'>message</span>
 <span class='comment val'>#=&gt; &quot;Saturday 7 and Sunday 8 March, suspended.&quot;</span>

 <span class='closed_stations identifier id'>closed_stations</span> <span class='assign token'>=</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='station_group identifier id'>station_group</span><span class='lparen token'>(</span><span class='symbol val'>:closed</span><span class='rparen token'>)</span>
 <span class='closed_stations identifier id'>closed_stations</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='station identifier id'>station</span><span class='bitor op'>|</span> <span class='station identifier id'>station</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrace token'>}</span>
 <span class='comment val'>#=&gt; [&quot;Blackfriars&quot;, &quot;Hatton Cross&quot;]</span>

 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='find_station identifier id'>find_station</span><span class='lparen token'>(</span><span class='string val'>&quot;hatton&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='message identifier id'>message</span>
 <span class='comment val'>#=&gt; &quot;Saturday 7 and Sunday 8 March, closed.&quot;</span>

 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='updated identifier id'>updated</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='string val'>&quot;%I:%M%p&quot;</span><span class='rparen token'>)</span>
 <span class='comment val'>#=&gt; &quot;04:56PM&quot;</span>

 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='reload identifier id'>reload</span>
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='updated identifier id'>updated</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='string val'>&quot;%I:%M%p&quot;</span><span class='rparen token'>)</span>
 <span class='comment val'>#=&gt; &quot;05:00PM&quot;</span>
</pre>
<h2>Converting to JSON and XML</h2>
<p>
All objects come complete with #to_json and #to_xml methods. These depend
upon the ruby json and REXML libraries.
</p>
<h3>XML</h3>
<pre class="code">
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='line identifier id'>line</span><span class='lparen token'>(</span><span class='symbol val'>:central</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_xml identifier id'>to_xml</span>
 <span class='comment val'>#=&gt; &quot;&lt;line&gt;&lt;id&gt;central&lt;/id&gt;&lt;status&gt;Good service&lt;/status&gt;</span>
     <span class='lt op'>&lt;</span><span class='problem identifier id'>problem</span><span class='gt op'>&gt;</span><span class='false false kw'>false</span><span class='lt op'>&lt;</span><span class='regexp val'>/problem&gt;&lt;message/</span><span class='gt op'>&gt;</span><span class='lt op'>&lt;</span><span class='name identifier id'>name</span><span class='gt op'>&gt;</span><span class='Central constant id'>Central</span><span class='lt op'>&lt;</span><span class='regexp val'>/name&gt;&lt;/</span><span class='line identifier id'>line</span><span class='gt op'>&gt;</span><span class='string val'>&quot;
</span></pre>
<h3>JSON</h3>
<pre class="code">
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='line identifier id'>line</span><span class='lparen token'>(</span><span class='symbol val'>:central</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_json identifier id'>to_json</span>
 <span class='comment val'>#=&gt; '{&quot;id&quot;:&quot;central&quot;, &quot;status&quot;:&quot;Good service&quot;, &quot;problem&quot;:false,</span>
     <span class='string val'>&quot;message&quot;</span><span class='symbol val'>:null</span><span class='comma token'>,</span> <span class='string val'>&quot;name&quot;</span><span class='symbol val'>:&quot;Central&quot;</span><span class='rbrace token'>}</span><span class='string val'>'
</span></pre>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">lines</td>
          <td class="readwrite">
            [<span id='lines-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>lines</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">station_groups</td>
          <td class="readwrite">
            [<span id='station_groups-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>station_groups</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">updated</td>
          <td class="readwrite">
            [<span id='updated-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>updated</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(url = &quot;http://www.tfl.gov.uk/tfl/livetravelnews/realtime/tube/default.html&quot;)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq: Status.get -&gt; status Status.new -&gt; status
</p>
<p>
Request and parse the status of the London Underground network from the
tfl.gov.uk &quot;Live travel news&quot; page.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/status.rb', line 61</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b/lib/status.rb#L61">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">61
62
63
64
65
66</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span> <span class='url identifier id'>url</span><span class='assign token'>=</span>
    <span class='string val'>&quot;http://www.tfl.gov.uk/tfl/livetravelnews/realtime/tube/default.html&quot;</span> <span class='rparen token'>)</span>
  
  <span class='@url ivar id'>@url</span> <span class='assign token'>=</span> <span class='url identifier id'>url</span>
  <span class='reload identifier id'>reload</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#find_station-instance_method">#find_station</span><span class='args'>(name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq: status.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#find_stations-instance_method">#find_stations</span><span class='args'>(name = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq: status.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#line-instance_method">#line</span><span class='args'>(name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq: status.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#reload-instance_method">#reload</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq: status.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#station_group-instance_method">#station_group</span><span class='args'>(name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq: status.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_hash-instance_method">#to_hash</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq: status.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_json-instance_method">#to_json</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq: status.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_xml-instance_method">#to_xml</span><span class='args'>(as_string = true)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:call-seq: status.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>find_station</h3>
</div><div id="find_station-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>find_station</span><span class='args'>(name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq: status.find_station(string) -&gt; station or nil
status.find_station(symbol) -&gt; station or nil
status.find_station(regexp) -&gt; station or nil
</p>
<p>
Get a single Station object. See #find_stations for more details. If more
than one station is found the one with the shortest name will be returned.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/status.rb', line 152</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b/lib/status.rb#L152">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">152
153
154
155
156
157
158
159
160
161
162</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='find_station identifier id'>find_station</span><span class='lparen token'>(</span> <span class='name identifier id'>name</span> <span class='rparen token'>)</span>
  <span class='results identifier id'>results</span> <span class='assign token'>=</span> <span class='find_stations identifier id'>find_stations</span><span class='lparen token'>(</span> <span class='name identifier id'>name</span> <span class='rparen token'>)</span>
  
  <span class='if if kw'>if</span> <span class='results identifier id'>results</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
    <span class='results identifier id'>results</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='else else kw'>else</span>
    <span class='results identifier id'>results</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='comma token'>,</span><span class='b identifier id'>b</span><span class='bitor op'>|</span>
      <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\(.+\)/</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='cmp op'>&lt;=&gt;</span> <span class='b identifier id'>b</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\(.+\)/</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
    <span class='end end kw'>end</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>find_stations</h3>
</div><div id="find_stations-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>find_stations</span><span class='args'>(name = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq: status.find_stations(string) -&gt; array
status.find_stations(symbol) -&gt; array status.find_stations(regexp) -&gt;
array status.find_stations(array) -&gt; array status.find_stations -&gt;
array
</p>
<p>
Get all Station objects matching the argument. Passing a string will do a
fuzzy match on the station name, a symbol will have to match the station
name exactly, an array will return all matches (without duplicates) for the
contents of the array.
</p>
<p>
With no arguments simply returns all stations.
</p>
<pre class="code">
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='find_stations identifier id'>find_stations</span><span class='lparen token'>(</span><span class='string val'>&quot;acton&quot;</span><span class='rparen token'>)</span>          <span class='comment val'>#=&gt; [#&lt;Tube::Station:0x110d7e4 @message=&quot;Closed.&quot;, @name=&quot;East Acton&quot;&gt;]</span>
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='find_stations identifier id'>find_stations</span><span class='lparen token'>(</span><span class='symbol val'>:Bank</span><span class='rparen token'>)</span>            <span class='comment val'>#=&gt; [] # No problems at Bank</span>
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='find_stations identifier id'>find_stations</span><span class='lparen token'>(</span><span class='string val'>&quot;tower bridge&quot;</span><span class='rparen token'>)</span>   <span class='comment val'>#=&gt; [] # No station by that name</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/status.rb', line 182</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b/lib/status.rb#L182">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='find_stations identifier id'>find_stations</span><span class='lparen token'>(</span> <span class='name identifier id'>name</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span> <span class='rparen token'>)</span>
  <span class='stations identifier id'>stations</span> <span class='assign token'>=</span> <span class='@station_groups ivar id'>@station_groups</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span>
  
  <span class='case case kw'>case</span> <span class='name identifier id'>name</span>
  <span class='when when kw'>when</span> <span class='String constant id'>String</span>
    <span class='comment val'># this could be simplified once I'm more confident about the format of</span>
    <span class='comment val'># station names</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span> <span class='regexp val'>/\s/</span><span class='comma token'>,</span> <span class='string val'>&quot;\\s*&quot;</span> <span class='rparen token'>)</span>
    <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span> <span class='regexp val'>/(and|&amp;)/</span><span class='comma token'>,</span> <span class='string val'>&quot;(and|&amp;)&quot;</span> <span class='rparen token'>)</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='Regexp constant id'>Regexp</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='true true kw'>true</span> <span class='rparen token'>)</span>
    <span class='stations identifier id'>stations</span> <span class='assign token'>=</span> <span class='stations identifier id'>stations</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='station identifier id'>station</span><span class='bitor op'>|</span> <span class='station identifier id'>station</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='match op'>=~</span> <span class='name identifier id'>name</span><span class='rbrace token'>}</span>
  <span class='when when kw'>when</span> <span class='Regexp constant id'>Regexp</span>
    <span class='stations identifier id'>stations</span> <span class='assign token'>=</span> <span class='stations identifier id'>stations</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='station identifier id'>station</span><span class='bitor op'>|</span> <span class='station identifier id'>station</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='match op'>=~</span> <span class='name identifier id'>name</span><span class='rbrace token'>}</span>
  <span class='when when kw'>when</span> <span class='Symbol constant id'>Symbol</span>
    <span class='stations identifier id'>stations</span> <span class='assign token'>=</span> <span class='stations identifier id'>stations</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='station identifier id'>station</span><span class='bitor op'>|</span> <span class='station identifier id'>station</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='eq op'>==</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrace token'>}</span>
  <span class='when when kw'>when</span> <span class='Array constant id'>Array</span>
    <span class='stations identifier id'>stations</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='n identifier id'>n</span><span class='bitor op'>|</span> <span class='find_stations identifier id'>find_stations</span><span class='lparen token'>(</span> <span class='n identifier id'>n</span> <span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span>
  <span class='when when kw'>when</span> <span class='nil nil kw'>nil</span>
    <span class='stations identifier id'>stations</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>line</h3>
</div><div id="line-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>line</span><span class='args'>(name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq: status.line(string) -&gt; line or nil status.line(symbol) -&gt;
line or nil status.line(regexp) -&gt; line or nil
</p>
<p>
Get a single Line object. Passing a string will do a fuzzy match on the
line id, a symbol will have to match the line id exactly.
</p>
<pre class="code">
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='line identifier id'>line</span><span class='lparen token'>(</span><span class='symbol val'>:hammersmithandcity</span><span class='rparen token'>)</span>   <span class='comment val'>#=&gt;     #&lt;Tube::Line:0x1163964 @id=&quot;hammersmithandcity&quot;, @name=&quot;H'smith &amp; City&quot;...</span>
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='line identifier id'>line</span><span class='lparen token'>(</span><span class='string val'>&quot;waterloo&quot;</span><span class='rparen token'>)</span>            <span class='comment val'>#=&gt;     #&lt;Tube::Line:0x113d700 @id=&quot;waterlooandcity&quot;, @name=&quot;Waterloo &amp; City&quot;...</span>
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='line identifier id'>line</span><span class='lparen token'>(</span><span class='string val'>&quot;east london&quot;</span><span class='rparen token'>)</span>         <span class='comment val'>#=&gt;     nil # no longer exists</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/status.rb', line 133</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b/lib/status.rb#L133">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">133
134
135
136
137
138
139
140
141
142
143</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='line identifier id'>line</span><span class='lparen token'>(</span> <span class='name identifier id'>name</span> <span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span> <span class='String constant id'>String</span> <span class='rparen token'>)</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span> <span class='regexp val'>/\s/</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span> <span class='rparen token'>)</span>
    <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span> <span class='regexp val'>/&amp;/</span><span class='comma token'>,</span> <span class='string val'>&quot;and&quot;</span> <span class='rparen token'>)</span>
    <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span> <span class='regexp val'>/'/</span><span class='comma token'>,</span> <span class='string val'>&quot;.+&quot;</span> <span class='rparen token'>)</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='Regexp constant id'>Regexp</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='true true kw'>true</span> <span class='rparen token'>)</span>
  <span class='elsif elsif kw'>elsif</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span> <span class='Symbol constant id'>Symbol</span> <span class='rparen token'>)</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='dregexp node'>/^#{name}$/</span>
  <span class='end end kw'>end</span>
  <span class='@lines ivar id'>@lines</span><span class='dot token'>.</span><span class='detect identifier id'>detect</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span> <span class='line identifier id'>line</span><span class='dot token'>.</span><span class='id identifier id'>id</span> <span class='match op'>=~</span> <span class='name identifier id'>name</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reload</h3>
</div><div id="reload-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>reload</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq: status.reload -&gt; status
</p>
<p>
Re-request the latest status and reload all data.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/status.rb', line 76</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b/lib/status.rb#L76">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='reload identifier id'>reload</span>
  <span class='doc identifier id'>doc</span> <span class='assign token'>=</span> <span class='Hpricot constant id'>Hpricot</span><span class='lparen token'>(</span> <span class='open identifier id'>open</span><span class='lparen token'>(</span> <span class='@url ivar id'>@url</span> <span class='rparen token'>)</span> <span class='rparen token'>)</span>
  
  <span class='time_el identifier id'>time_el</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span> <span class='string val'>&quot;div#service-board&quot;</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='previous_sibling identifier id'>previous_sibling</span><span class='dot token'>.</span><span class='children identifier id'>children</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='time_text identifier id'>time_text</span> <span class='assign token'>=</span> <span class='time_el identifier id'>time_el</span><span class='dot token'>.</span><span class='inner_text identifier id'>inner_text</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span> <span class='regexp val'>/(\d?\d:\d\d(a|p)m)/</span> <span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
  <span class='time_zone identifier id'>time_zone</span> <span class='assign token'>=</span> <span class='if if kw'>if</span> <span class='is_bst? fid id'>is_bst?</span> <span class='then then kw'>then</span> <span class='string val'>&quot;+0100&quot;</span> <span class='else else kw'>else</span> <span class='string val'>&quot;+0000&quot;</span> <span class='end end kw'>end</span>
  <span class='@updated ivar id'>@updated</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span> <span class='dstring node'>&quot;#{time_text} #{time_zone}&quot;</span> <span class='rparen token'>)</span>
  
  <span class='lines identifier id'>lines</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span> <span class='string val'>&quot;dl#lines dt&quot;</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='el identifier id'>el</span><span class='bitor op'>|</span>
    <span class='id identifier id'>id</span> <span class='assign token'>=</span> <span class='el identifier id'>el</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span><span class='lbrack token'>[</span><span class='string val'>&quot;class&quot;</span><span class='rbrack token'>]</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='el identifier id'>el</span><span class='dot token'>.</span><span class='inner_text identifier id'>inner_text</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>
    
    <span class='status identifier id'>status</span> <span class='assign token'>=</span> <span class='el identifier id'>el</span><span class='dot token'>.</span><span class='next_sibling identifier id'>next_sibling</span>
    <span class='if if kw'>if</span> <span class='status_el identifier id'>status_el</span> <span class='assign token'>=</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span> <span class='string val'>&quot;h3&quot;</span> <span class='rparen token'>)</span>
      <span class='status_text identifier id'>status_text</span> <span class='assign token'>=</span> <span class='status_el identifier id'>status_el</span><span class='dot token'>.</span><span class='inner_text identifier id'>inner_text</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>
      <span class='message identifier id'>message</span> <span class='assign token'>=</span> <span class='format_messages identifier id'>format_messages</span><span class='lparen token'>(</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span> <span class='string val'>&quot;div.message p&quot;</span> <span class='rparen token'>)</span> <span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='status_text identifier id'>status_text</span> <span class='assign token'>=</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='inner_text identifier id'>inner_text</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>
    <span class='end end kw'>end</span>
    <span class='problem identifier id'>problem</span> <span class='assign token'>=</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span><span class='lbrack token'>[</span><span class='string val'>&quot;class&quot;</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;problem&quot;</span>
    
    <span class='Line constant id'>Line</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='id identifier id'>id</span><span class='comma token'>,</span> <span class='status_text identifier id'>status_text</span><span class='comma token'>,</span> <span class='problem identifier id'>problem</span><span class='comma token'>,</span> <span class='message identifier id'>message</span><span class='comma token'>,</span> <span class='name identifier id'>name</span> <span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='@lines ivar id'>@lines</span> <span class='assign token'>=</span> <span class='LineGroup constant id'>LineGroup</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='lines identifier id'>lines</span> <span class='rparen token'>)</span>
  
  <span class='@station_groups ivar id'>@station_groups</span> <span class='assign token'>=</span> <span class='StationGroupGroup constant id'>StationGroupGroup</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='doc identifier id'>doc</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span> <span class='string val'>&quot;dl#stations dt&quot;</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='el identifier id'>el</span><span class='bitor op'>|</span>
    <span class='station_group identifier id'>station_group</span> <span class='assign token'>=</span> <span class='StationGroup constant id'>StationGroup</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='el identifier id'>el</span><span class='dot token'>.</span><span class='inner_text identifier id'>inner_text</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span> <span class='rparen token'>)</span>
    <span class='while while kw'>while</span> <span class='el identifier id'>el</span> <span class='assign token'>=</span> <span class='el identifier id'>el</span><span class='dot token'>.</span><span class='next_sibling identifier id'>next_sibling</span>
      <span class='if if kw'>if</span> <span class='el identifier id'>el</span><span class='dot token'>.</span><span class='to_html identifier id'>to_html</span> <span class='match op'>=~</span> <span class='regexp val'>/^&lt;dd/</span> <span class='andop op'>&amp;&amp;</span> <span class='name_el identifier id'>name_el</span> <span class='assign token'>=</span> <span class='el identifier id'>el</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span> <span class='string val'>&quot;h3&quot;</span> <span class='rparen token'>)</span>
        <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name_el identifier id'>name_el</span><span class='dot token'>.</span><span class='inner_text identifier id'>inner_text</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>
        <span class='message identifier id'>message</span> <span class='assign token'>=</span> <span class='format_messages identifier id'>format_messages</span><span class='lparen token'>(</span> <span class='el identifier id'>el</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span> <span class='string val'>&quot;div.message p&quot;</span> <span class='rparen token'>)</span> <span class='rparen token'>)</span>
        <span class='station identifier id'>station</span> <span class='assign token'>=</span> <span class='Station constant id'>Station</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='message identifier id'>message</span> <span class='rparen token'>)</span>
        <span class='station_group identifier id'>station_group</span><span class='dot token'>.</span><span class='push identifier id'>push</span><span class='lparen token'>(</span> <span class='station identifier id'>station</span> <span class='rparen token'>)</span>
      <span class='elsif elsif kw'>elsif</span> <span class='el identifier id'>el</span><span class='dot token'>.</span><span class='to_html identifier id'>to_html</span> <span class='match op'>=~</span> <span class='regexp val'>/^&lt;dt/</span>
        <span class='break break kw'>break</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='@station_groups ivar id'>@station_groups</span><span class='dot token'>.</span><span class='push identifier id'>push</span><span class='lparen token'>(</span> <span class='station_group identifier id'>station_group</span> <span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>station_group</h3>
</div><div id="station_group-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>station_group</span><span class='args'>(name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq: status.station_group(string) -&gt; station_group or nil
status.station_group(symbol) -&gt; station_group or nil
status.station_group(regexp) -&gt; station_group or nil
</p>
<p>
Get a single StationGroup object. Both string and symbol are fuzzy matches.
</p>
<p>
It appears the two groups are &quot;Closed stations&quot; and &quot;Station
maintenance&quot;
</p>
<pre class="code">
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='station_group identifier id'>station_group</span><span class='lparen token'>(</span><span class='symbol val'>:closed</span><span class='rparen token'>)</span>        <span class='comment val'>#=&gt; [stations...]</span>
 <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='station_group identifier id'>station_group</span><span class='lparen token'>(</span><span class='symbol val'>:maintenance</span><span class='rparen token'>)</span>   <span class='comment val'>#=&gt; [stations...]</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/status.rb', line 216</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b/lib/status.rb#L216">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">216
217
218
219
220
221</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='station_group identifier id'>station_group</span><span class='lparen token'>(</span> <span class='name identifier id'>name</span> <span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span> <span class='String constant id'>String</span> <span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span> <span class='Symbol constant id'>Symbol</span> <span class='rparen token'>)</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='Regexp constant id'>Regexp</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='true true kw'>true</span> <span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='@station_groups ivar id'>@station_groups</span><span class='dot token'>.</span><span class='detect identifier id'>detect</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='group identifier id'>group</span><span class='bitor op'>|</span> <span class='group identifier id'>group</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='match op'>=~</span> <span class='name identifier id'>name</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_hash</h3>
</div><div id="to_hash-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_hash</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq: status.to_hash -&gt; hash
</p>
<p>
Returns a hash representation of the object.
</p>
<pre class="code">
 <span class='lbrace token'>{</span><span class='string val'>&quot;stations&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='station identifier id'>station</span> <span class='groups identifier id'>groups</span><span class='dot3 op'>...</span><span class='rbrace token'>}</span><span class='comma token'>,</span>
 <span class='string val'>&quot;lines&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='lines identifier id'>lines</span><span class='dot3 op'>...</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
 <span class='string val'>&quot;updated&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Fri constant id'>Fri</span> <span class='Feb constant id'>Feb</span> <span class='integer val'>13</span> <span class='integer val'>23</span><span class='symbol val'>:31</span><span class='symbol val'>:30</span> <span class='plus op'>+</span><span class='integer val'>0000</span> <span class='integer val'>2009</span><span class='rbrace token'>}</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/status.rb', line 230</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b/lib/status.rb#L230">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">230
231
232
233
234</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_hash identifier id'>to_hash</span>
  <span class='lbrace token'>{</span><span class='string val'>&quot;updated&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='updated identifier id'>updated</span><span class='comma token'>,</span>
    <span class='string val'>&quot;lines&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lines identifier id'>lines</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='e identifier id'>e</span><span class='bitor op'>|</span> <span class='e identifier id'>e</span><span class='dot token'>.</span><span class='to_hash identifier id'>to_hash</span><span class='rbrace token'>}</span><span class='comma token'>,</span>
    <span class='string val'>&quot;stations&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='station_groups identifier id'>station_groups</span><span class='dot token'>.</span><span class='to_hash identifier id'>to_hash</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_json</h3>
</div><div id="to_json-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_json</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq: status.to_json -&gt; string
</p>
<p>
Returns a string of JSON representing the object.
</p>
<pre class="code">
 <span class='string val'>'{&quot;stations&quot;:{stations...},
 &quot;lines&quot;:[lines...],
 &quot;updated&quot;:&quot;Fri Feb 13 23:31:30 +0000 2009&quot;}'</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/status.rb', line 243</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b/lib/status.rb#L243">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">243
244
245</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_json identifier id'>to_json</span><span class='lparen token'>(</span> <span class='mult op'>*</span><span class='args identifier id'>args</span> <span class='rparen token'>)</span>
  <span class='to_hash identifier id'>to_hash</span><span class='dot token'>.</span><span class='to_json identifier id'>to_json</span><span class='lparen token'>(</span> <span class='mult op'>*</span><span class='args identifier id'>args</span> <span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_xml</h3>
</div><div id="to_xml-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_xml</span><span class='args'>(as_string = true)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:call-seq: status.to_xml -&gt; string status.to_xml(false) -&gt;
rexml_document
</p>
<p>
Returns a string of XML representing the object.
</p>
<pre class="code">
 <span class='lt op'>&lt;</span><span class='status identifier id'>status</span><span class='gt op'>&gt;</span>
   <span class='lt op'>&lt;</span><span class='updated identifier id'>updated</span><span class='gt op'>&gt;</span><span class='Fri constant id'>Fri</span> <span class='Feb constant id'>Feb</span> <span class='integer val'>13</span> <span class='integer val'>23</span><span class='symbol val'>:31</span><span class='symbol val'>:30</span> <span class='plus op'>+</span><span class='integer val'>0000</span> <span class='integer val'>2009</span><span class='lt op'>&lt;</span><span class='regexp val'>/updated&gt;
   lines as xml...
   station_groups as xml...
 &lt;/s</span><span class='tatus identifier id'>tatus</span><span class='gt op'>&gt;</span>
</pre>
<p>
Alternately pass false as the only argument to get an instance of
REXML::Document.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/status.rb', line 260</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/matsadler/tube/blob/80d0aa8e4ee9728aa7418bac2a59c82a9e5d0f8b/lib/status.rb#L260">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">260
261
262
263
264
265
266
267</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_xml identifier id'>to_xml</span><span class='lparen token'>(</span> <span class='as_string identifier id'>as_string</span><span class='assign token'>=</span><span class='true true kw'>true</span> <span class='rparen token'>)</span>
  <span class='doc identifier id'>doc</span> <span class='assign token'>=</span> <span class='REXML constant id'>REXML</span><span class='colon2 op'>::</span><span class='Document constant id'>Document</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='root identifier id'>root</span> <span class='assign token'>=</span> <span class='doc identifier id'>doc</span><span class='dot token'>.</span><span class='add_element identifier id'>add_element</span><span class='lparen token'>(</span> <span class='string val'>&quot;status&quot;</span> <span class='rparen token'>)</span>
  <span class='root identifier id'>root</span><span class='dot token'>.</span><span class='add_element identifier id'>add_element</span><span class='lparen token'>(</span> <span class='string val'>&quot;updated&quot;</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='add_text identifier id'>add_text</span><span class='lparen token'>(</span> <span class='updated identifier id'>updated</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='rparen token'>)</span>
  <span class='root identifier id'>root</span><span class='dot token'>.</span><span class='add_element identifier id'>add_element</span><span class='lparen token'>(</span> <span class='lines identifier id'>lines</span><span class='dot token'>.</span><span class='to_xml identifier id'>to_xml</span><span class='lparen token'>(</span> <span class='false false kw'>false</span> <span class='rparen token'>)</span> <span class='rparen token'>)</span>
  <span class='root identifier id'>root</span><span class='dot token'>.</span><span class='add_element identifier id'>add_element</span><span class='lparen token'>(</span> <span class='station_groups identifier id'>station_groups</span><span class='dot token'>.</span><span class='to_xml identifier id'>to_xml</span><span class='lparen token'>(</span> <span class='false false kw'>false</span> <span class='rparen token'>)</span> <span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='as_string identifier id'>as_string</span> <span class='then then kw'>then</span> <span class='doc identifier id'>doc</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='else else kw'>else</span> <span class='doc identifier id'>doc</span> <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>