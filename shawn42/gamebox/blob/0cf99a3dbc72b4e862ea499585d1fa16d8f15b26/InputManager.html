<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>shawn42's gamebox - Class: InputManager - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/shawn42/commits/gamebox/master" rel="alternate" title="Recent Commits to gamebox:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("shawn42", "gamebox", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("shawn42", "gamebox", "0cf99a3dbc72b4e862ea499585d1fa16d8f15b26", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/shawn42/gamebox/tree/">Source</a></li>
            <li class=""><a href="http://github.com/shawn42/gamebox/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/shawn42/gamebox/network">Network</a></li>            
            <li class=""><a href="http://github.com/shawn42/gamebox/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/shawn42/gamebox">Wiki</a></li>
            <li class=""><a href="http://github.com/shawn42/gamebox/graphs">Graphs</a></li>                    
            <li class="active"><a href="/shawn42/gamebox">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/shawn42">shawn42</a> / <b><a href="http://github.com/shawn42/gamebox/tree">gamebox</a></b>        
                <a id="namespaces_button" rel="shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class InputManager">
  <h1>Class: InputManager</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="InputManager/Publisher.html" title="Publisher">Publisher</a></p>
</div><div class="section docstring">
  <p>
InputManager handles the pumping of SDL for events and distributing of said
events. You can gain access to these events by registering for all events,
or just the ones you care about. All events: input_manager.when
:event_received do |evt|
</p>
<pre class="code">
  <span class='dot3 op'>...</span>
</pre>
<p>
end
</p>
<p>
Some events: input_manager.reg KeyDownEvent, K_SPACE do
</p>
<pre class="code">
  <span class='dot3 op'>...</span>
</pre>
<p>
end
</p>
<p>
Don&#8217;t forget to unreg for these things between levels and modes,
since the InputManager is shared across levels and modes.
</p>

</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="MOUSE_BUTTON_LOOKUP-constant">MOUSE_BUTTON_LOOKUP</dt>
      <dd>{
  1 =&gt; :left,
  2 =&gt; :middle,
  3 =&gt; :right,
}</dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sets up the clock and main event loop. You should never call this method,
as this class should be initialized by diy.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/gamebox/input_manager.rb', line 31</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26/lib/gamebox/input_manager.rb#L31">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span>
  <span class='@queue ivar id'>@queue</span> <span class='assign token'>=</span> <span class='EventQueue constant id'>EventQueue</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='@queue ivar id'>@queue</span><span class='dot token'>.</span><span class='ignore identifier id'>ignore</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span>
    <span class='ActiveEvent constant id'>ActiveEvent</span><span class='comma token'>,</span>
    <span class='JoyAxisEvent constant id'>JoyAxisEvent</span><span class='comma token'>,</span>
    <span class='JoyBallEvent constant id'>JoyBallEvent</span><span class='comma token'>,</span>
    <span class='JoyDownEvent constant id'>JoyDownEvent</span><span class='comma token'>,</span>
    <span class='JoyHatEvent constant id'>JoyHatEvent</span><span class='comma token'>,</span>
    <span class='JoyUpEvent constant id'>JoyUpEvent</span><span class='comma token'>,</span>
    <span class='ResizeEvent constant id'>ResizeEvent</span>
  <span class='rbrack token'>]</span>
  
  <span class='@clock ivar id'>@clock</span> <span class='assign token'>=</span> <span class='Clock constant id'>Clock</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span>
    <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='target_framerate identifier id'>target_framerate</span> <span class='assign token'>=</span> <span class='integer val'>40</span>
    <span class='if if kw'>if</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='colon op'>:</span><span class='calibrate identifier id'>calibrate</span>
      <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='calibrate identifier id'>calibrate</span> 
      <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='granularity identifier id'>granularity</span> <span class='assign token'>=</span> <span class='integer val'>2</span> <span class='if if_mod kw'>if</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='granularity identifier id'>granularity</span> <span class='lt op'>&lt;</span> <span class='integer val'>2</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='@hooks ivar id'>@hooks</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='@non_id_hooks ivar id'>@non_id_hooks</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#clear_hooks-instance_method">#clear_hooks</span><span class='args'>(listener = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
removes all blocks that are in the scope of listener&#8217;s instance.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#framerate-instance_method">#framerate</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the target framerate.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#framerate-3D-instance_method">#framerate=</span><span class='args'>(frame_rate)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sets the target framerate for the game.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#main_loop-instance_method">#main_loop</span><span class='args'>(game)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
This is where the queue gets pumped.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#register_hook-instance_method">#register_hook</span><span class='args'>(event_class, *event_ids, &amp;block)</span>
        <span class='block'></span>
        
          <span class='alias'>#reg</span>
        
      </th>
      <td class="docstring">
        <p>
registers a block to be called when matching events are pulled from the SDL
queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#unregister_hook-instance_method">#unregister_hook</span><span class='args'>(event_class, *event_ids, &amp;block)</span>
        <span class='block'></span>
        
          <span class='alias'>#unreg</span>
        
      </th>
      <td class="docstring">
        <p>
unregisters a block to be called when matching events are pulled from the
SDL queue.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>clear_hooks</h3>
</div><div id="clear_hooks-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>clear_hooks</span><span class='args'>(listener = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
removes all blocks that are in the scope of listener&#8217;s instance.
clears all listeners if listener is nil
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/gamebox/input_manager.rb', line 156</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26/lib/gamebox/input_manager.rb#L156">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='clear_hooks identifier id'>clear_hooks</span><span class='lparen token'>(</span><span class='listener identifier id'>listener</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='listener identifier id'>listener</span>
    <span class='for for kw'>for</span> <span class='event_klass identifier id'>event_klass</span><span class='comma token'>,</span> <span class='id_listeners identifier id'>id_listeners</span> <span class='in in kw'>in</span> <span class='@hooks ivar id'>@hooks</span>
      <span class='for for kw'>for</span> <span class='key identifier id'>key</span> <span class='in in kw'>in</span> <span class='id_listeners identifier id'>id_listeners</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
        <span class='id_listeners identifier id'>id_listeners</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='delete_if identifier id'>delete_if</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='block identifier id'>block</span><span class='bitor op'>|</span>
          <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='string val'>'self'</span><span class='comma token'>,</span><span class='block identifier id'>block</span><span class='dot token'>.</span><span class='binding identifier id'>binding</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='equal? fid id'>equal?</span><span class='lparen token'>(</span><span class='listener identifier id'>listener</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    
    <span class='for for kw'>for</span> <span class='key identifier id'>key</span> <span class='in in kw'>in</span> <span class='@non_id_hooks ivar id'>@non_id_hooks</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
      <span class='@non_id_hooks ivar id'>@non_id_hooks</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='delete_if identifier id'>delete_if</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='block identifier id'>block</span><span class='bitor op'>|</span>
        <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='string val'>'self'</span><span class='comma token'>,</span><span class='block identifier id'>block</span><span class='dot token'>.</span><span class='binding identifier id'>binding</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='equal? fid id'>equal?</span><span class='lparen token'>(</span><span class='listener identifier id'>listener</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='@hooks ivar id'>@hooks</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='@non_id_hooks ivar id'>@non_id_hooks</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>framerate</h3>
</div><div id="framerate-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>framerate</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the target framerate.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/gamebox/input_manager.rb', line 62</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26/lib/gamebox/input_manager.rb#L62">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">62
63
64</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='framerate identifier id'>framerate</span>
  <span class='@clock ivar id'>@clock</span><span class='dot token'>.</span><span class='target_framerate identifier id'>target_framerate</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>framerate=</h3>
</div><div id="framerate-3D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>framerate=</span><span class='args'>(frame_rate)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sets the target framerate for the game. This setting controls how lock
Clock#tick will delay.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/gamebox/input_manager.rb', line 57</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26/lib/gamebox/input_manager.rb#L57">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">57
58
59</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='framerate= identifier id'>framerate=</span><span class='lparen token'>(</span><span class='frame_rate identifier id'>frame_rate</span><span class='rparen token'>)</span>
  <span class='@clock ivar id'>@clock</span><span class='dot token'>.</span><span class='target_framerate identifier id'>target_framerate</span> <span class='assign token'>=</span> <span class='frame_rate identifier id'>frame_rate</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>main_loop</h3>
</div><div id="main_loop-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>main_loop</span><span class='args'>(game)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
This is where the queue gets pumped. This gets called from your game
application.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/gamebox/input_manager.rb', line 67</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26/lib/gamebox/input_manager.rb#L67">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='main_loop identifier id'>main_loop</span><span class='lparen token'>(</span><span class='game identifier id'>game</span><span class='rparen token'>)</span>
  <span class='catch identifier id'>catch</span><span class='lparen token'>(</span><span class='symbol val'>:rubygame_quit</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='loop identifier id'>loop</span> <span class='do do kw'>do</span>
      <span class='comment val'># add magic hooks</span>
      <span class='@queue ivar id'>@queue</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='event identifier id'>event</span><span class='bitor op'>|</span>
        <span class='case case kw'>case</span> <span class='event identifier id'>event</span>
        <span class='when when kw'>when</span> <span class='KeyDownEvent constant id'>KeyDownEvent</span>
          <span class='case case kw'>case</span> <span class='event identifier id'>event</span><span class='dot token'>.</span><span class='key identifier id'>key</span>
          <span class='when when kw'>when</span> <span class='K_F constant id'>K_F</span>
            <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;Framerate:#{@clock.framerate}&quot;</span>
          <span class='when when kw'>when</span> <span class='K_ESCAPE constant id'>K_ESCAPE</span>
            <span class='throw identifier id'>throw</span> <span class='symbol val'>:rubygame_quit</span>
          <span class='end end kw'>end</span>
        <span class='when when kw'>when</span> <span class='QuitEvent constant id'>QuitEvent</span>
          <span class='throw identifier id'>throw</span> <span class='symbol val'>:rubygame_quit</span>
        <span class='end end kw'>end</span>
        <span class='fire identifier id'>fire</span> <span class='symbol val'>:event_received</span><span class='comma token'>,</span> <span class='event identifier id'>event</span>

        <span class='event_hooks identifier id'>event_hooks</span> <span class='assign token'>=</span> <span class='@hooks ivar id'>@hooks</span><span class='lbrack token'>[</span><span class='event identifier id'>event</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='rbrack token'>]</span> 
        <span class='id identifier id'>id</span> <span class='assign token'>=</span> <span class='event identifier id'>event</span><span class='dot token'>.</span><span class='key identifier id'>key</span> <span class='if if_mod kw'>if</span> <span class='event identifier id'>event</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='symbol val'>:key</span>
        <span class='id identifier id'>id</span> <span class='opasgn op'>||=</span> <span class='MOUSE_BUTTON_LOOKUP constant id'>MOUSE_BUTTON_LOOKUP</span><span class='lbrack token'>[</span><span class='event identifier id'>event</span><span class='dot token'>.</span><span class='button identifier id'>button</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='event identifier id'>event</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='symbol val'>:button</span>
        <span class='unless unless kw'>unless</span> <span class='id identifier id'>id</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
          <span class='event_action_hooks identifier id'>event_action_hooks</span> <span class='assign token'>=</span> <span class='event_hooks identifier id'>event_hooks</span><span class='lbrack token'>[</span><span class='id identifier id'>id</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='event_hooks identifier id'>event_hooks</span>
          <span class='if if kw'>if</span> <span class='event_action_hooks identifier id'>event_action_hooks</span>
            <span class='for for kw'>for</span> <span class='callback identifier id'>callback</span> <span class='in in kw'>in</span> <span class='event_action_hooks identifier id'>event_action_hooks</span>
              <span class='callback identifier id'>callback</span><span class='dot token'>.</span><span class='call identifier id'>call</span> <span class='event identifier id'>event</span>
            <span class='end end kw'>end</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>
        
        <span class='non_id_event_hooks identifier id'>non_id_event_hooks</span> <span class='assign token'>=</span> <span class='@non_id_hooks ivar id'>@non_id_hooks</span><span class='lbrack token'>[</span><span class='event identifier id'>event</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='rbrack token'>]</span>
        <span class='if if kw'>if</span> <span class='non_id_event_hooks identifier id'>non_id_event_hooks</span>
          <span class='for for kw'>for</span> <span class='callback identifier id'>callback</span> <span class='in in kw'>in</span> <span class='non_id_event_hooks identifier id'>non_id_event_hooks</span>
            <span class='callback identifier id'>callback</span><span class='dot token'>.</span><span class='call identifier id'>call</span> <span class='event identifier id'>event</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>          
      <span class='end end kw'>end</span>

      <span class='game identifier id'>game</span><span class='dot token'>.</span><span class='update identifier id'>update</span> <span class='@clock ivar id'>@clock</span><span class='dot token'>.</span><span class='tick identifier id'>tick</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>register_hook</h3>
</div><div id="register_hook-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>register_hook</span><span class='args'>(event_class, *event_ids, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="reg-instance_method">reg</tt>
  
</p>
</div><div class="section docstring">
  <p>
registers a block to be called when matching events are pulled from the SDL
queue. ie input_manager.register_hook KeyDownEvent do |evt|
</p>
<pre class="code">
  <span class='comment val'># will be called on every key press</span>
</pre>
<p>
end input_manager.register_hook KeyDownEvent, K_SPACE do |evt|
</p>
<pre class="code">
  <span class='comment val'># will be called on every spacebar key press</span>
</pre>
<p>
end
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/gamebox/input_manager.rb', line 118</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26/lib/gamebox/input_manager.rb#L118">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='register_hook identifier id'>register_hook</span><span class='lparen token'>(</span><span class='event_class identifier id'>event_class</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='event_ids identifier id'>event_ids</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='unless unless_mod kw'>unless</span> <span class='block_given? fid id'>block_given?</span>
  <span class='@hooks ivar id'>@hooks</span><span class='lbrack token'>[</span><span class='event_class identifier id'>event_class</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='for for kw'>for</span> <span class='event_id identifier id'>event_id</span> <span class='in in kw'>in</span> <span class='event_ids identifier id'>event_ids</span>
    <span class='@hooks ivar id'>@hooks</span><span class='lbrack token'>[</span><span class='event_class identifier id'>event_class</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='event_id identifier id'>event_id</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='@hooks ivar id'>@hooks</span><span class='lbrack token'>[</span><span class='event_class identifier id'>event_class</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='event_id identifier id'>event_id</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='block identifier id'>block</span>
  <span class='end end kw'>end</span>
  <span class='@non_id_hooks ivar id'>@non_id_hooks</span><span class='lbrack token'>[</span><span class='event_class identifier id'>event_class</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='if if kw'>if</span> <span class='event_ids identifier id'>event_ids</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='@non_id_hooks ivar id'>@non_id_hooks</span><span class='lbrack token'>[</span><span class='event_class identifier id'>event_class</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='block identifier id'>block</span>
  <span class='end end kw'>end</span>
  <span class='listener identifier id'>listener</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='string val'>&quot;self&quot;</span><span class='comma token'>,</span> <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='binding identifier id'>binding</span><span class='rparen token'>)</span> 
  <span class='listener identifier id'>listener</span><span class='dot token'>.</span><span class='when identifier id'>when</span> <span class='symbol val'>:remove_me</span> <span class='do do kw'>do</span>
    <span class='unregister_hook identifier id'>unregister_hook</span> <span class='event_class identifier id'>event_class</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='event_ids identifier id'>event_ids</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>unregister_hook</h3>
</div><div id="unregister_hook-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>unregister_hook</span><span class='args'>(event_class, *event_ids, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="unreg-instance_method">unreg</tt>
  
</p>
</div><div class="section docstring">
  <p>
unregisters a block to be called when matching events are pulled from the
SDL queue. ie input_manager.register_hook KeyDownEvent, K_SPACE,
registered_block also see InputManager#clear_hooks for clearing many hooks
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/gamebox/input_manager.rb', line 140</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/shawn42/gamebox/blob/0cf99a3dbc72b4e862ea499585d1fa16d8f15b26/lib/gamebox/input_manager.rb#L140">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">140
141
142
143
144
145
146
147
148
149
150</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='unregister_hook identifier id'>unregister_hook</span><span class='lparen token'>(</span><span class='event_class identifier id'>event_class</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='event_ids identifier id'>event_ids</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@hooks ivar id'>@hooks</span><span class='lbrack token'>[</span><span class='event_class identifier id'>event_class</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='for for kw'>for</span> <span class='event_id identifier id'>event_id</span> <span class='in in kw'>in</span> <span class='event_ids identifier id'>event_ids</span>
    <span class='@hooks ivar id'>@hooks</span><span class='lbrack token'>[</span><span class='event_class identifier id'>event_class</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='event_id identifier id'>event_id</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='@hooks ivar id'>@hooks</span><span class='lbrack token'>[</span><span class='event_class identifier id'>event_class</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='event_id identifier id'>event_id</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span> <span class='block identifier id'>block</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='event_ids identifier id'>event_ids</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='@hooks ivar id'>@hooks</span><span class='lbrack token'>[</span><span class='event_class identifier id'>event_class</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='@hooks ivar id'>@hooks</span><span class='lbrack token'>[</span><span class='event_class identifier id'>event_class</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span> <span class='block identifier id'>block</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>