<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jgoizueta's float-formats - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jgoizueta/commits/float-formats/master" rel="alternate" title="Recent Commits to float-formats:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jgoizueta", "float-formats", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jgoizueta/float-formats/blob/c5d2955058bc5dafe3f8bc9a5f6ff474e8d59fce' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jgoizueta/float-formats/blob/c5d2955058bc5dafe3f8bc9a5f6ff474e8d59fce' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jgoizueta", "float-formats", "c5d2955058bc5dafe3f8bc9a5f6ff474e8d59fce", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jgoizueta/float-formats/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jgoizueta/float-formats/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jgoizueta/float-formats/network">Network</a></li>            
            <li class=""><a href="http://github.com/jgoizueta/float-formats/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jgoizueta/float-formats">Wiki</a></li>
            <li class=""><a href="http://github.com/jgoizueta/float-formats/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jgoizueta/float-formats">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jgoizueta">jgoizueta</a> / <b><a href="http://github.com/jgoizueta/float-formats/tree">float-formats</a></b>        
                <a id="namespaces_button" rel="jgoizueta/float-formats/blob/c5d2955058bc5dafe3f8bc9a5f6ff474e8d59fce" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jgoizueta/float-formats/blob/c5d2955058bc5dafe3f8bc9a5f6ff474e8d59fce" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Introduction</h1>
<p>
Float-Formats is a Ruby package with methods to handle diverse
floating-point formats. These are some of the things that can be done with
it:
</p>
<ul>
<li>Enconding and decoding numerical values in specific floating point
representations.

</li>
<li>Conversion of floating-point data between different formats.

</li>
<li>Obtaining properties of floating-point formats (ranges, precision, etc.)

</li>
<li>Exploring and learning about floating point representations.

</li>
<li>Definition and testing of new floating-point formats.

</li>
</ul>
<h1>Installation</h1>
<p>
The easiest way to install Nio is using gems:
</p>
<p>
<tt> gem install --remote float-formats -y</tt>
</p>
<h2>Requirements</h2>
<p>
Nio[http://nio.rubyforge.org/] 0.2.4 or later and
Flt[http://flt.rubyforge.org/] 1.0.0 or later are needed. These can be
installed as gems and should be automatically installed by the command
shown above to install float-formats.
</p>
<h2>Downloads</h2>
<p>
The latest version of Float-Formats and its source code can be downloaded
from
</p>
<ul>
<li>http://rubyforge.org/project/showfiles.php?group_id=4684

</li>
</ul>
<p>
You can find the code also in GitHub:
</p>
<ul>
<li>http://github.com/jgoizueta/float-formats/

</li>
</ul>
<h1>Predefined formats</h1>
<p>
A number of common formats are defined as constants in the Flt module:
</p>
<h2>IEEE 754-2008</h2>
<p>
<b>binary</b> floating point representations in little endian order:
IEEE_binary16 (half precision), IEEE_binary32 (single precision),
IEEE_binary64 (double precision), IEEE_binary80 (extended), IEEE_binary128
(quadruple precision) and as little endian: IEEE_binary16_BE, etc.
</p>
<p>
<b>decimal</b> formats (using DPD): IEEE_decimal32, IEEE_decimal64 and
IEEE_decimal128.
</p>
<p>
<b>interchange binary &amp; decimal</b> formats: IEEE_binary256,
IEEE_binary512, IEEE_binary1024, IEEE_decimal192, IEEE_decimal256. Others
can be defined with IEEE.interchange_binary and IEEE.interchange_decimal
(see the IEEE module).
</p>
<h2>Legacy</h2>
<p>
Formats of historical interest, some of which are found in file formats
still in use.
</p>
<p>
<b>Mainframe/supercomputer</b> formats: Univac 1100 (UNIVAC_SINGLE,
UNIVAC_DOUBLE), IBM 360 etc. (IBM32, IBM64 and IBM128), CDC 6600/7600:
(CDC_SINGLE, CDC_DOUBLE), Cray-1: (CRAY).
</p>
<p>
<b>Minis</b>: PDP11 and Vaxes: (PDP11_F, PDP11_D, VAX_F, VAX_D, VAX_G and
VAX_H), HP3000: (XS256, XS256_DOUBLE), Wang 2200: (WANG2200).
</p>
<p>
<b>Microcomputers</b> (software implementations): Apple II: (APPLE),
Microsoft Basic, Spectrum, etc.: (XS128), Microsoft Quickbasic:
(MBF_SINGLE, MBF_DOUBLE), Borland Pascal: (BORLAND48).
</p>
<p>
<b>Embedded systems</b>: Formats used in the Intel 8051 by the C51
compiler: (C51_BCD_FLOAT, C51_BCD_DOUBLE and C51_BCD_LONG_DOUBLE).
</p>
<h2>Calculators</h2>
<p>
Formats used in HP RPL calculators: (RPL, RPL_X), HP-71B formats (HP71B,
HP71B_X) and classic HP 10 digit calculators: (HP_CLASSIC).
</p>
<h1>Using the pre-defined formats</h1>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'rubygems'</span>
  <span class='require identifier id'>require</span> <span class='string val'>'float-formats'</span>
  <span class='include identifier id'>include</span> <span class='Flt constant id'>Flt</span>
</pre>
<p>
The properties of the floating point formats can be queried (which can be
used for tables or reports comparing different formats):
</p>
<p>
Size in bits of the representations:
</p>
<pre class="code">
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary32 constant id'>IEEE_binary32</span><span class='dot token'>.</span><span class='total_bits identifier id'>total_bits</span>                        <span class='comment val'># -&gt; 32</span>
</pre>
<p>
Numeric radix:
</p>
<pre class="code">
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary32 constant id'>IEEE_binary32</span><span class='dot token'>.</span><span class='radix identifier id'>radix</span>                             <span class='comment val'># -&gt; 2</span>
</pre>
<p>
Digits of precision (radix-based)
</p>
<pre class="code">
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary32 constant id'>IEEE_binary32</span><span class='dot token'>.</span><span class='significand_digits identifier id'>significand_digits</span>                <span class='comment val'># -&gt; 24</span>
</pre>
<p>
Minimum and maximum values of the radix-based exponent:
</p>
<pre class="code">
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary32 constant id'>IEEE_binary32</span><span class='dot token'>.</span><span class='radix_min_exp identifier id'>radix_min_exp</span>                     <span class='comment val'># -&gt; -126</span>
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary32 constant id'>IEEE_binary32</span><span class='dot token'>.</span><span class='radix_max_exp identifier id'>radix_max_exp</span>                     <span class='comment val'># -&gt; 127</span>
</pre>
<p>
Decimal precision
</p>
<pre class="code">
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary32 constant id'>IEEE_binary32</span><span class='dot token'>.</span><span class='decimal_digits_stored identifier id'>decimal_digits_stored</span>             <span class='comment val'># -&gt; 6</span>
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary32 constant id'>IEEE_binary32</span><span class='dot token'>.</span><span class='decimal_digits_necessary identifier id'>decimal_digits_necessary</span>          <span class='comment val'># -&gt; 9</span>
</pre>
<p>
Minimum and maximum decimal exponents:
</p>
<pre class="code">
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary32 constant id'>IEEE_binary32</span><span class='dot token'>.</span><span class='decimal_min_exp identifier id'>decimal_min_exp</span>                   <span class='comment val'># -&gt; -37</span>
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary32 constant id'>IEEE_binary32</span><span class='dot token'>.</span><span class='decimal_max_exp identifier id'>decimal_max_exp</span>                   <span class='comment val'># -&gt; 38</span>
</pre>
<h2>Encode and decode numbers</h2>
<p>
For each floating-point format class there is a constructor method with the
same name which can build a floating-point value from a variety of
parameters:
</p>
<ul>
<li>Using three integers: the sign (<tt>1 for </tt>, -1 for -), the significand
(coefficient or mantissa) and the exponent.

</li>
<li>From a text numeral (with an optional Nio format specifier)

</li>
<li>From a number : converts a numerical value to a floating point
representation.

<pre class="code">
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='string val'>'binary_file.dat'</span><span class='comma token'>,</span><span class='string val'>'wb'</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='write identifier id'>write</span> <span class='IEEE_binary80 constant id'>IEEE_binary80</span><span class='lparen token'>(</span><span class='string val'>'0.1'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_bytes identifier id'>to_bytes</span><span class='rbrace token'>}</span>

  <span class='puts identifier id'>puts</span> <span class='IEEE_binary80 constant id'>IEEE_binary80</span><span class='lparen token'>(</span><span class='string val'>'0.1'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_hex identifier id'>to_hex</span><span class='lparen token'>(</span><span class='true true kw'>true</span><span class='rparen token'>)</span>           <span class='comment val'># -&gt; CD CC CC CC CC CC CC CC FB 3F</span>
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary80 constant id'>IEEE_binary80</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='integer val'>.1</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_hex identifier id'>to_hex</span><span class='lparen token'>(</span><span class='true true kw'>true</span><span class='rparen token'>)</span>             <span class='comment val'># -&gt; CD CC CC CC CC CC CC CC FB 3F</span>
  <span class='puts identifier id'>puts</span> <span class='IEEE_binary80 constant id'>IEEE_binary80</span><span class='lparen token'>(</span><span class='integer val'>+1</span><span class='comma token'>,</span><span class='integer val'>123</span><span class='comma token'>,</span><span class='integer val'>-2</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_hex identifier id'>to_hex</span><span class='lparen token'>(</span><span class='true true kw'>true</span><span class='rparen token'>)</span>       <span class='comment val'># -&gt; 00 00 00 00 00 00 00 F6 03 40</span>
  <span class='puts identifier id'>puts</span> <span class='IEEE_decimal32 constant id'>IEEE_decimal32</span><span class='lparen token'>(</span><span class='string val'>'1.234'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_hex identifier id'>to_hex</span><span class='lparen token'>(</span><span class='true true kw'>true</span><span class='rparen token'>)</span>        <span class='comment val'># -&gt; 22 20 05 34</span>
</pre>
</li>
</ul>
<p>
A floating-point encoded value can be converted to useful formats with the
to_ and similar methods:
</p>
<ul>
<li><tt>split</tt> (split as integral sign, significand, exponent)

</li>
<li><tt>to_text</tt>

</li>
<li><tt>to(num_class)</tt>

<pre class="code">
  <span class='v identifier id'>v</span> <span class='assign token'>=</span> <span class='IEEE_binary80 constant id'>IEEE_binary80</span><span class='dot token'>.</span><span class='from_bytes identifier id'>from_bytes</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='string val'>'binary_file.dat'</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='puts identifier id'>puts</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='to identifier id'>to</span><span class='lparen token'>(</span><span class='Rational constant id'>Rational</span><span class='rparen token'>)</span>                              <span class='comment val'># -&gt; 1/10</span>
  <span class='puts identifier id'>puts</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='dot token'>.</span><span class='inspect identifier id'>inspect</span>                             <span class='comment val'># -&gt; [1, 14757395258967641293, -67]</span>
  <span class='puts identifier id'>puts</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='to_text identifier id'>to_text</span>                                   <span class='comment val'># -&gt; 0.1</span>
  <span class='puts identifier id'>puts</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='to identifier id'>to</span><span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='rparen token'>)</span>                                 <span class='comment val'># -&gt; 0.1</span>
  <span class='puts identifier id'>puts</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='to_hex identifier id'>to_hex</span>                                    <span class='comment val'># -&gt; CDCCCCCCCCCCCCCCFB3F</span>
  <span class='puts identifier id'>puts</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='to_bits identifier id'>to_bits</span>                                   <span class='comment val'># -&gt; 00111111111110111100110011001100110011001100110011001100110011001100110011001101</span>
  <span class='puts identifier id'>puts</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='to_bits_text identifier id'>to_bits_text</span><span class='lparen token'>(</span><span class='integer val'>16</span><span class='rparen token'>)</span>                          <span class='comment val'># -&gt; 3ffbcccccccccccccccd</span>
</pre>
</li>
</ul>
<h2>Special values:</h2>
<p>
Let&#8217;s show the decimal expression of some interesting values using 3
significative digits:
</p>
<pre class="code">
  <span class='fmt identifier id'>fmt</span> <span class='assign token'>=</span> <span class='Nio constant id'>Nio</span><span class='colon2 op'>::</span><span class='Fmt constant id'>Fmt</span><span class='dot token'>.</span><span class='mode identifier id'>mode</span><span class='lparen token'>(</span><span class='symbol val'>:gen</span><span class='comma token'>,</span><span class='integer val'>3</span><span class='rparen token'>)</span>

  <span class='puts identifier id'>puts</span> <span class='IEEE_SINGLE constant id'>IEEE_SINGLE</span><span class='dot token'>.</span><span class='min_value identifier id'>min_value</span><span class='dot token'>.</span><span class='to_text identifier id'>to_text</span><span class='lparen token'>(</span><span class='fmt identifier id'>fmt</span><span class='rparen token'>)</span>             <span class='comment val'># -&gt; 2E-45</span>
  <span class='puts identifier id'>puts</span> <span class='IEEE_SINGLE constant id'>IEEE_SINGLE</span><span class='dot token'>.</span><span class='min_normalized_value identifier id'>min_normalized_value</span><span class='dot token'>.</span><span class='to_text identifier id'>to_text</span><span class='lparen token'>(</span><span class='fmt identifier id'>fmt</span><span class='rparen token'>)</span>  <span class='comment val'># -&gt; 1.18E-38</span>
  <span class='puts identifier id'>puts</span> <span class='IEEE_SINGLE constant id'>IEEE_SINGLE</span><span class='dot token'>.</span><span class='max_value identifier id'>max_value</span><span class='dot token'>.</span><span class='to_text identifier id'>to_text</span><span class='lparen token'>(</span><span class='fmt identifier id'>fmt</span><span class='rparen token'>)</span>             <span class='comment val'># -&gt; 3.4E38</span>
  <span class='puts identifier id'>puts</span> <span class='IEEE_SINGLE constant id'>IEEE_SINGLE</span><span class='dot token'>.</span><span class='epsilon identifier id'>epsilon</span><span class='dot token'>.</span><span class='to_text identifier id'>to_text</span><span class='lparen token'>(</span><span class='fmt identifier id'>fmt</span><span class='rparen token'>)</span>               <span class='comment val'># -&gt; 1.19E-7</span>
</pre>
<h2>Convert between formats</h2>
<pre class="code">
  <span class='v identifier id'>v</span> <span class='assign token'>=</span> <span class='IEEE_EXTENDED constant id'>IEEE_EXTENDED</span><span class='dot token'>.</span><span class='from_text identifier id'>from_text</span><span class='lparen token'>(</span><span class='string val'>'1.1'</span><span class='rparen token'>)</span>
  <span class='v identifier id'>v</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='convert_to identifier id'>convert_to</span><span class='lparen token'>(</span><span class='IEEE_SINGLE constant id'>IEEE_SINGLE</span><span class='rparen token'>)</span>
  <span class='v identifier id'>v</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='convert_to identifier id'>convert_to</span><span class='lparen token'>(</span><span class='IEEE_DEC64 constant id'>IEEE_DEC64</span><span class='rparen token'>)</span>
</pre>
<h1>Tools for the native floating point format</h1>
<p>
This is an optional module to perform conversions and manipulate the native
Float format.
</p>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'float-formats/native'</span>
  <span class='include identifier id'>include</span> <span class='Flt constant id'>Flt</span>

  <span class='puts identifier id'>puts</span> <span class='float_shortest_dec identifier id'>float_shortest_dec</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='integer val'>.1</span><span class='rparen token'>)</span>                     <span class='comment val'># -&gt; 0.1</span>
  <span class='puts identifier id'>puts</span> <span class='float_significant_dec identifier id'>float_significant_dec</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='integer val'>.1</span><span class='rparen token'>)</span>                  <span class='comment val'># -&gt; 0.10000000000000001</span>
  <span class='puts identifier id'>puts</span> <span class='float_dec identifier id'>float_dec</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='integer val'>.1</span><span class='rparen token'>)</span>                              <span class='comment val'># -&gt; 0.1000000000000000055511151231257827021181583404541015625</span>
  <span class='puts identifier id'>puts</span> <span class='float_bin identifier id'>float_bin</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='integer val'>.1</span><span class='rparen token'>)</span>                              <span class='comment val'># -&gt; 1.100110011001100110011001100110011001100110011001101E-4</span>
  <span class='puts identifier id'>puts</span> <span class='hex_from_float identifier id'>hex_from_float</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='integer val'>.1</span><span class='rparen token'>)</span>                         <span class='comment val'># -&gt; 0x1999999999999ap-56</span>

  <span class='puts identifier id'>puts</span> <span class='float_significant_dec identifier id'>float_significant_dec</span><span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='colon2 op'>::</span><span class='MIN_D constant id'>MIN_D</span><span class='rparen token'>)</span>           <span class='comment val'># -&gt; 5E-324</span>
  <span class='puts identifier id'>puts</span> <span class='float_significant_dec identifier id'>float_significant_dec</span><span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='colon2 op'>::</span><span class='MAX_D constant id'>MAX_D</span><span class='rparen token'>)</span>           <span class='comment val'># -&gt; 2.2250738585072009E-308</span>
  <span class='puts identifier id'>puts</span> <span class='float_significant_dec identifier id'>float_significant_dec</span><span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='colon2 op'>::</span><span class='MIN_N constant id'>MIN_N</span><span class='rparen token'>)</span>           <span class='comment val'># -&gt; 2.2250738585072014E-308</span>
</pre>
<p>
Together with flt/sugar (from Flt) can be use to explore or work with
Floats:
</p>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'flt/sugar'</span>

  <span class='puts identifier id'>puts</span> <span class='float val'>1.0</span><span class='dot token'>.</span><span class='next_plus identifier id'>next_plus</span><span class='minus op'>-</span><span class='integer val'>1</span> <span class='eq op'>==</span> <span class='Float constant id'>Float</span><span class='colon2 op'>::</span><span class='EPSILON constant id'>EPSILON</span>              <span class='comment val'># -&gt; true</span>
  <span class='puts identifier id'>puts</span> <span class='float_shortest_dec identifier id'>float_shortest_dec</span><span class='lparen token'>(</span><span class='float val'>1.0</span><span class='dot token'>.</span><span class='next_plus identifier id'>next_plus</span><span class='rparen token'>)</span>              <span class='comment val'># -&gt; 1.0000000000000002</span>
  <span class='puts identifier id'>puts</span> <span class='float_dec identifier id'>float_dec</span><span class='lparen token'>(</span><span class='float val'>1.0</span><span class='dot token'>.</span><span class='next_minus identifier id'>next_minus</span><span class='rparen token'>)</span>                      <span class='comment val'># -&gt; 0.99999999999999988897769753748434595763683319091796875</span>
  <span class='puts identifier id'>puts</span> <span class='float_dec identifier id'>float_dec</span><span class='lparen token'>(</span><span class='float val'>1.0</span><span class='dot token'>.</span><span class='next_plus identifier id'>next_plus</span><span class='rparen token'>)</span>                       <span class='comment val'># -&gt; 1.0000000000000002220446049250313080847263336181640625</span>
  <span class='puts identifier id'>puts</span> <span class='float_bin identifier id'>float_bin</span><span class='lparen token'>(</span><span class='float val'>1.0</span><span class='dot token'>.</span><span class='next_plus identifier id'>next_plus</span><span class='rparen token'>)</span>                       <span class='comment val'># -&gt; 1.0000000000000000000000000000000000000000000000000001E0</span>
  <span class='puts identifier id'>puts</span> <span class='float_bin identifier id'>float_bin</span><span class='lparen token'>(</span><span class='float val'>1.0</span><span class='dot token'>.</span><span class='next_minus identifier id'>next_minus</span><span class='rparen token'>)</span>                      <span class='comment val'># -&gt; 1.1111111111111111111111111111111111111111111111111111E-1</span>

  <span class='puts identifier id'>puts</span> <span class='float_significant_dec identifier id'>float_significant_dec</span><span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='colon2 op'>::</span><span class='MIN_D constant id'>MIN_D</span><span class='dot token'>.</span><span class='next_plus identifier id'>next_plus</span><span class='rparen token'>)</span>  <span class='comment val'># -&gt; 1.0E-323</span>
  <span class='puts identifier id'>puts</span> <span class='float_significant_dec identifier id'>float_significant_dec</span><span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='colon2 op'>::</span><span class='MAX_D constant id'>MAX_D</span><span class='dot token'>.</span><span class='next_minus identifier id'>next_minus</span><span class='rparen token'>)</span> <span class='comment val'># -&gt; 2.2250738585072004E-308</span>
</pre>
<h1>Defining new formats</h1>
<p>
New formats are defined using one of the classes defined in
float-formats/classes.rb and passing the necessary parameters in a hash to
the constructor.
</p>
<p>
For example, here we define a binary floating point 32-bits format with 22
bits for the significand, 9 for the exponent and 1 for the sign (these
fields are allocated from least to most significant bits). We&#8217;ll use
excess notation with bias 127 for the exponent, interpreting the
significand bits as a fractional number with the radix point after the
first bit, which will be hidden:
</p>
<pre class="code">
  <span class='Flt constant id'>Flt</span><span class='dot token'>.</span><span class='define identifier id'>define</span><span class='lparen token'>(</span><span class='symbol val'>:MY_FP</span><span class='comma token'>,</span> <span class='BinaryFormat constant id'>BinaryFormat</span><span class='comma token'>,</span>
    <span class='symbol val'>:fields=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='symbol val'>:significand</span><span class='comma token'>,</span><span class='integer val'>22</span><span class='comma token'>,</span><span class='symbol val'>:exponent</span><span class='comma token'>,</span><span class='integer val'>9</span><span class='comma token'>,</span><span class='symbol val'>:sign</span><span class='comma token'>,</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:bias=</span><span class='gt op'>&gt;</span><span class='integer val'>127</span><span class='comma token'>,</span> <span class='symbol val'>:bias_mode=</span><span class='gt op'>&gt;</span><span class='symbol val'>:scientific_significand</span><span class='comma token'>,</span>
    <span class='symbol val'>:hidden_bit=</span><span class='gt op'>&gt;</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
</pre>
<p>
Now we can encode values in this format, decode values, convet to other
formats, query it&#8217;s range, etc:
</p>
<pre class="code">
     <span class='puts identifier id'>puts</span> <span class='MY_FP constant id'>MY_FP</span><span class='lparen token'>(</span><span class='string val'>'0.1'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_bits_text identifier id'>to_bits_text</span><span class='lparen token'>(</span><span class='integer val'>16</span><span class='rparen token'>)</span>              <span class='comment val'># -&gt; 1ee66666</span>
     <span class='puts identifier id'>puts</span> <span class='MY_FP constant id'>MY_FP</span><span class='dot token'>.</span><span class='max_value identifier id'>max_value</span><span class='dot token'>.</span><span class='to_text identifier id'>to_text</span><span class='lparen token'>(</span><span class='Nio constant id'>Nio</span><span class='colon2 op'>::</span><span class='Fmt constant id'>Fmt</span><span class='dot token'>.</span><span class='prec identifier id'>prec</span><span class='lparen token'>(</span><span class='integer val'>3</span><span class='rparen token'>)</span><span class='rparen token'>)</span>  <span class='comment val'># -&gt; 7.88E115</span>
</pre>
<p>
You can look at float-formats/formats.rb to see how the built-in formats
are defined.
</p>
<h1>License</h1>
<p>
This code is free to use under the terms of the GNU GENERAL PUBLIC LICENSE.
</p>
<h1>References</h1>
<dl>
<dt><em>Floating Point Representations.</em> C.B. Silio.</dt><dd>http://www.ece.umd.edu/class/enpm607.S2000/fltngpt.pdf Description of
formats used in UNIVAC 1100, CDC 6600/7600, PDP-11, IEEE754, IBM360/370

</dd>
<dt><em>Floating-Point Formats.</em> John Savard.</dt><dd>http://www.quadibloc.com/comp/cp0201.htm Description of formats used in VAX
and PDF-11

</dd>
</dl>
<h3>IEEE754 binary formats</h3>
<dl>
<dt><em>IEEE-754 References.</em> Christopher Vickery.</dt><dd>http://babbage.cs.qc.edu/courses/cs341/IEEE-754references.html

</dd>
<dt><em>What Every Computer Scientist Should Know About Floating-Point Arithmetic.</em> David Goldberg.</dt><dd>http://docs.sun.com/source/806-3568/ncg_goldberg.html

</dd>
</dl>
<h3>DPD/IEEE754r decimal formats</h3>
<dl>
<dt><em>Decimal Arithmetic Encoding. Strawman 4d.</em> Mike Cowlishaw.</dt><dd>http://www2.hursley.ibm.com/decimal/decbits.pdf

</dd>
<dt><em>A Summary of Densely Packed Decimal encoding.</em> Mike Cowlishaw.</dt><dd>http://www2.hursley.ibm.com/decimal/DPDecimal.html

</dd>
<dt><em>Packed Decimal Encoding IEEE-754-r.</em> J.H.M. Bonten.</dt><dd>http://home.hetnet.nl/mr_1/81/jhm.bonten/computers/bitsandbytes/wordsizes/ibmpde.htm

</dd>
<dt><em>DRAFT Standard for Floating-Point Arithmetic P754.</em> IEEE.</dt><dd>http://www.validlab.com/754R/drafts/archive/2007-10-05.pdf

</dd>
</dl>
<h3>HP 10 digits calculators</h3>
<dl>
<dt><em>HP CPU and Programming</em>. David G.Hicks.</dt><dd>http://www.hpmuseum.org/techcpu.htm Description of calculator CPUs from the
Museum of HP Calculators.

</dd>
<dt><em>HP 35 ROM step by step.</em> Jacques Laporte</dt><dd>http://www.jacques-laporte.org/HP35%20ROM.htm Description of HP35
registers.

</dd>
<dt><em>Scientific Pocket Calculator Extends Range of Built-In Functions.</em> Eric A. Evett, Paul J. McClellan, Joseph P. Tanzini.</dt><dd>Hewlett Packard Journal 1983-05 pgs 27-28. Describes format used in HP-15C.

</dd>
</dl>
<h3>HP 12 digits calculators</h3>
<dl>
<dt><em>Software Internal Design Specification Volume I For the HP-71</em>. Hewlett Packard.</dt><dd>Available from http://www.hpmuseum.org/cd/cddesc.htm

</dd>
<dt><em>RPL PROGRAMMING GUIDE</em></dt><dd>Excerpted from <em>RPL: A Mathematical Control Language</em>. by W. C.
Wickes. Available at http://www.hpcalc.org/details.php?id=1743

</dd>
</dl>
<h3>HP-3000</h3>
<dl>
<dt><em>A Pocket Calculator for Computer Science Professionals.</em> Eric A. Evett.</dt><dd>Hewlett Packard Journal 1983-05 pg 37. Describes format used in HP-3000

</dd>
</dl>
<h3>IBM</h3>
<dl>
<dt><em>IBM Floating Point Architecture.</em> Wikipedia.</dt><dd>http://en.wikipedia.org/wiki/IBM_Floating_Point_Architecture

</dd>
<dt><em>The IBM eServer z990 floating-point unit</em>. G. Gerwig, H. Wetter, E. M. Schwarz, J. Haess, C. A. Krygowski, B. M. Fleischer and M. Kroener.</dt><dd>http://www.research.ibm.com/journal/rd/483/gerwig.html

</dd>
</dl>
<h3>MBF</h3>
<dl>
<dt><em>Microsoft Knowledbase Article 35826</em></dt><dd>http://support.microsoft.com/?scid=kb%3Ben-us%3B35826&amp;x=17&amp;y=12

</dd>
<dt><em>Microsoft MBF2IEEE library</em></dt><dd>http://download.microsoft.com/download/vb30/install/1/win98/en-us/mbf2ieee.exe

</dd>
</dl>
<h3>Borland</h3>
<p>
[<em>An Overview of Floating Point Numbers.</em> Borland Developer Support
Staff]
</p>
<dl>
<dt>&lt;i&gt;Pascal Floating-Point Page.&lt;i&gt; J R Stockton.</dt><dd>http://www.merlyn.demon.co.uk/pas-real.htm

</dd>
</dl>
<h3>8-bit micros</h3>
<p>
This is the MS Basic format (BASIC09 for TRS-80 Color Computer, Dragon),
also used in the Sinclair Spectrum.
</p>
<dl>
<dt><em>Numbers are followed by information not in listings</em></dt><dd>Sinclair User October 1983 http://www.sincuser.f9.co.uk/019/helplne.htm

</dd>
<dt><em>Sinclair ZX Spectrum / Basic Programming.</em>. Steven Vickers.</dt><dd>Chapter 24. http://www.worldofspectrum.org/ZXBasicManual/zxmanchap24.html

</dd>
</dl>
<h3>Apple II</h3>
<dl>
<dt><em>Floating Point Routines for the 6502</em> Roy Rankin and Steve Wozniak.</dt><dd>Dr. Dobb&#8217;s Journal, August 1976, pages 17-19.

</dd>
</dl>
<h3>C51</h3>
<dl>
<dt><em>Advanced Development System</em> Franklin Software, Inc.</dt><dd>http://www.fsinc.com/reference/html/com9anm.htm

</dd>
</dl>
<h3>CDC6600</h3>
<dl>
<dt><em>CONTROL DATA 6400/6500/6600 COMPUTER SYSTEMS Reference Manual</em></dt><dd>Manuals available at http://bitsavers.org/

</dd>
</dl>
<h3>Cray</h3>
<dl>
<dt><em>CRAY-1 COMPUTER SYSTEM Hardware Reference Manual</em></dt><dd>See pg 3-20 from 2240004 or pg 4-30 from HR-0808 or pg 4-21 from HP-0032.
Manuals available at http://bitsavers.org/

</dd>
</dl>
<h3>Wang 2200</h3>
<dl>
<dt><em>Internal Floating Point Representation</em></dt><dd>http://www.wang2200.org/fp_format.html

</dd>
</dl>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>