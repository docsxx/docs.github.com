<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jmettraux's rufus-tokyo - Class: Rufus::Tokyo::Cabinet - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jmettraux/commits/rufus-tokyo/master" rel="alternate" title="Recent Commits to rufus-tokyo:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jmettraux", "rufus-tokyo", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jmettraux", "rufus-tokyo", "8404756ff277c84ed479a34d58eb2a355b6cfe90", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jmettraux/rufus-tokyo/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jmettraux/rufus-tokyo/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jmettraux/rufus-tokyo/network">Network</a></li>            
            <li class=""><a href="http://github.com/jmettraux/rufus-tokyo/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jmettraux/rufus-tokyo">Wiki</a></li>
            <li class=""><a href="http://github.com/jmettraux/rufus-tokyo/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jmettraux/rufus-tokyo">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jmettraux">jmettraux</a> / <b><a href="http://github.com/jmettraux/rufus-tokyo/tree">rufus-tokyo</a></b>        
                <a id="namespaces_button" rel="jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Rufus_Tokyo_Cabinet">
  <h1>Class: Rufus::Tokyo::Cabinet</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="Cabinet/HashMethods.html" title="Rufus::Tokyo::HashMethods">Rufus::Tokyo::HashMethods</a>, <a href="Cabinet/Transactions.html" title="Rufus::Tokyo::Transactions">Rufus::Tokyo::Transactions</a></p>
</div><div class="section docstring">
  <p>
A &#8216;cabinet&#8217;, ie a Tokyo Cabinet [abstract] database.
</p>
<p>
Follows the abstract API described at :
</p>
<pre class="code">
  <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/tokyocabinet.sourceforge.net/s</span><span class='pex identifier id'>pex</span><span class='minus op'>-</span><span class='en identifier id'>en</span><span class='dot token'>.</span><span class='html identifier id'>html</span><span class='comment val'>#tcadbapi</span>
</pre>
<p>
An usage example :
</p>
<pre class="code">
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'test_data.tch'</span><span class='rparen token'>)</span>
  <span class='db identifier id'>db</span><span class='lbrack token'>[</span><span class='string val'>'pillow'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>'Shonagon'</span>

  <span class='db identifier id'>db</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='comment val'># =&gt; 1</span>
  <span class='db identifier id'>db</span><span class='lbrack token'>[</span><span class='string val'>'pillow'</span><span class='rbrack token'>]</span> <span class='comment val'># =&gt; 'Shonagon'</span>

  <span class='db identifier id'>db</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='string val'>'pillow'</span><span class='rparen token'>)</span> <span class='comment val'># =&gt; 'Shonagon'</span>
  <span class='db identifier id'>db</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='comment val'># =&gt; 0</span>

  <span class='db identifier id'>db</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
</pre>

</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(name, params = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates/opens the cabinet, raises an exception in case of creation/opening
failure.
</p>
<p>
This method accepts a &#8216;name&#8217; parameter and an optional
&#8216;params&#8217; hash parameter.
</p>
<p>
&#8216;name&#8217; follows the syntax described at
</p>
<pre class="code">
  <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/tokyocabinet.sourceforge.net/s</span><span class='pex identifier id'>pex</span><span class='minus op'>-</span><span class='en identifier id'>en</span><span class='dot token'>.</span><span class='html identifier id'>html</span><span class='comment val'>#tcadbapi</span>
</pre>
<p>
under tcadbopen(). For example :
</p>
<pre class="code">
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'casket.tch#bnum=100000#opts=ld'</span><span class='rparen token'>)</span>
</pre>
<p>
will open (eventually create) a hash database backed in the file
&#8216;casket.tch&#8217; with a bucket number of 100000 and the
&#8216;large&#8217; and &#8216;deflate&#8217; options (opts) turned on.
</p>
<p>
Note that there is an #open method similar to File#open for openening a db
and closing it when it&#8217;s no longer needed :
</p>
<pre class="code">
  <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'data.tch'</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='db identifier id'>db</span><span class='bitor op'>|</span>
    <span class='db identifier id'>db</span><span class='lbrack token'>[</span><span class='string val'>'key'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span>
  <span class='end end kw'>end</span>
</pre>
<h2>database name</h2>
<p>
From http://tokyocabinet.sourceforge.net/spex-en.html#tcadbapi :
</p>
<p>
&#8216;If it is &quot;*&quot;, the database will be an on-memory hash
database. If it is
</p>
<pre class="code">
 <span class='string val'>&quot;&lt;tt&gt;&quot;</span><span class='comma token'>,</span> <span class='the identifier id'>the</span> <span class='database identifier id'>database</span> <span class='will identifier id'>will</span> <span class='be identifier id'>be</span> <span class='an identifier id'>an</span> <span class='on identifier id'>on</span><span class='minus op'>-</span><span class='memory identifier id'>memory</span> <span class='tree identifier id'>tree</span> <span class='database identifier id'>database</span><span class='dot token'>.</span> <span class='If constant id'>If</span> <span class='its identifier id'>its</span> <span class='suffix identifier id'>suffix</span> <span class='is identifier id'>is</span>
 <span class='string val'>&quot;.tch&quot;</span><span class='comma token'>,</span> <span class='the identifier id'>the</span> <span class='database identifier id'>database</span> <span class='will identifier id'>will</span> <span class='be identifier id'>be</span> <span class='a identifier id'>a</span> <span class='hash identifier id'>hash</span> <span class='database identifier id'>database</span><span class='dot token'>.</span> <span class='If constant id'>If</span> <span class='its identifier id'>its</span> <span class='suffix identifier id'>suffix</span> <span class='is identifier id'>is</span> <span class='string val'>&quot;.tcb&quot;</span><span class='comma token'>,</span>
 <span class='the identifier id'>the</span> <span class='database identifier id'>database</span> <span class='will identifier id'>will</span> <span class='be identifier id'>be</span> <span class='a identifier id'>a</span> <span class='B constant id'>B</span><span class='lt op'>&lt;</span><span class='regexp val'>/tt&gt; tree database. If its suffix is &quot;.tcf&quot;, the
 database will be a fixed-length database. If its suffix is &quot;.tct&quot;, the
 database will be a table database.'
</span></pre>
<p>
You&#8217;re supposed to give a path to the database file you want to use
and Cabinet expects you to give the proper prefix.
</p>
<pre class="code">
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'data.tch'</span><span class='rparen token'>)</span> <span class='comment val'># hash database</span>
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'data.tcb'</span><span class='rparen token'>)</span> <span class='comment val'># B+ tree db</span>
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'data.tcf'</span><span class='rparen token'>)</span> <span class='comment val'># fixed-length db</span>
</pre>
<p>
will result with the same file names :
</p>
<pre class="code">
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'data'</span><span class='comma token'>,</span> <span class='symbol val'>:type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:hash</span><span class='rparen token'>)</span> <span class='comment val'># hash database</span>
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'data'</span><span class='comma token'>,</span> <span class='symbol val'>:type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:btree</span><span class='rparen token'>)</span> <span class='comment val'># B+ tree db</span>
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'data'</span><span class='comma token'>,</span> <span class='symbol val'>:type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:fixed</span><span class='rparen token'>)</span> <span class='comment val'># fixed-length db</span>
</pre>
<p>
You can open an in-memory hash and an in-memory B+ tree with :
</p>
<pre class="code">
  <span class='h identifier id'>h</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:mem_hash</span><span class='rparen token'>)</span> <span class='comment val'># or</span>
  <span class='h identifier id'>h</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'*'</span><span class='rparen token'>)</span>

  <span class='t identifier id'>t</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:mem_tree</span><span class='rparen token'>)</span> <span class='comment val'># or</span>
  <span class='t identifier id'>t</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'+'</span><span class='rparen token'>)</span>
</pre>
<h2>parameters</h2>
<p>
There are two ways to pass parameters at the opening of a db :
</p>
<pre class="code">
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'data.tch#opts=ld#mode=w'</span><span class='rparen token'>)</span> <span class='comment val'># or</span>
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'data.tch'</span><span class='comma token'>,</span> <span class='symbol val'>:opts</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'ld'</span><span class='comma token'>,</span> <span class='symbol val'>:mode</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'w'</span><span class='rparen token'>)</span>
</pre>
<p>
most verbose :
</p>
<pre class="code">
  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span>
    <span class='string val'>'data'</span><span class='comma token'>,</span> <span class='symbol val'>:type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:hash</span><span class='comma token'>,</span> <span class='symbol val'>:opts</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'ld'</span><span class='comma token'>,</span> <span class='symbol val'>:mode</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'w'</span><span class='rparen token'>)</span>
</pre>
<h3>mode</h3>
<pre class="code">
  <span class='mult op'>*</span> <span class='symbol val'>:mode</span>    <span class='a identifier id'>a</span> <span class='set identifier id'>set</span> <span class='of identifier id'>of</span> <span class='chars identifier id'>chars</span> <span class='lparen token'>(</span><span class='string val'>'r'</span><span class='ead identifier id'>ead</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rite identifier id'>rite</span><span class='comma token'>,</span> <span class='string val'>'c'</span><span class='reate identifier id'>reate</span><span class='comma token'>,</span> <span class='string val'>'t'</span><span class='runcate identifier id'>runcate</span><span class='comma token'>,</span>
             <span class='string val'>'e'</span> <span class='non identifier id'>non</span> <span class='locking identifier id'>locking</span><span class='comma token'>,</span> <span class='string val'>'f'</span> <span class='non identifier id'>non</span> <span class='blocking identifier id'>blocking</span> <span class='lock identifier id'>lock</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='default identifier id'>default</span> <span class='is identifier id'>is</span> <span class='string val'>'wc'</span>
</pre>
<h3>other parameters</h3>
<p>
&#8216;On-memory hash database supports &quot;bnum&quot;,
&quot;capnum&quot;, and &quot;capsiz&quot;.
</p>
<pre class="code">
 <span class='On constant id'>On</span><span class='minus op'>-</span><span class='memory identifier id'>memory</span> <span class='tree identifier id'>tree</span> <span class='database identifier id'>database</span> <span class='supports identifier id'>supports</span> <span class='string val'>&quot;capnum&quot;</span> <span class='and and kw'>and</span> <span class='string val'>&quot;capsiz&quot;</span><span class='dot token'>.</span>
 <span class='Hash constant id'>Hash</span> <span class='database identifier id'>database</span> <span class='supports identifier id'>supports</span> <span class='string val'>&quot;mode&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;bnum&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;apow&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;fpow&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;opts&quot;</span><span class='comma token'>,</span>
 <span class='string val'>&quot;rcnum&quot;</span><span class='comma token'>,</span> <span class='and and kw'>and</span> <span class='string val'>&quot;xmsiz&quot;</span><span class='dot token'>.</span>
 <span class='B constant id'>B</span><span class='plus op'>+</span> <span class='tree identifier id'>tree</span> <span class='database identifier id'>database</span> <span class='supports identifier id'>supports</span> <span class='string val'>&quot;mode&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;lmemb&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;nmemb&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;bnum&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;apow&quot;</span><span class='comma token'>,</span>
 <span class='string val'>&quot;fpow&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;opts&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;lcnum&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;ncnum&quot;</span><span class='comma token'>,</span> <span class='and and kw'>and</span> <span class='string val'>&quot;xmsiz&quot;</span><span class='dot token'>.</span>
 <span class='Fixed constant id'>Fixed</span><span class='minus op'>-</span><span class='length identifier id'>length</span> <span class='database identifier id'>database</span> <span class='supports identifier id'>supports</span> <span class='string val'>&quot;mode&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;width&quot;</span><span class='comma token'>,</span> <span class='and and kw'>and</span> <span class='string val'>&quot;limsiz&quot;</span><span class='string val'>'

  * :opts    a set of chars ('</span><span class='l identifier id'>l</span><span class='string val'>'arge, '</span><span class='d identifier id'>d</span><span class='string val'>'eflate, '</span><span class='b identifier id'>b</span><span class='string val'>'zip2, '</span><span class='t identifier id'>t</span><span class='string val'>'cbs)
             (usually empty or something like '</span><span class='ld identifier id'>ld</span><span class='string val'>' or '</span><span class='lb identifier id'>lb</span><span class='string val'>')

  * :bnum    number of elements of the bucket array
  * :apow    size of record alignment by power of 2 (defaults to 4)
  * :fpow    maximum number of elements of the free block pool by
             power of 2 (defaults to 10)
  * :mutex   when set to true, makes sure only 1 thread at a time
             accesses the table (well, Ruby, global thread lock, ...)

  * :rcnum   specifies the maximum number of records to be cached.
             If it is not more than 0, the record cache is disabled.
             It is disabled by default.
  * :lcnum   specifies the maximum number of leaf nodes to be cached.
             If it is not more than 0, the default value is specified.
             The default value is 2048.
  * :ncnum   specifies the maximum number of non-leaf nodes to be
             cached. If it is not more than 0, the default value is
             specified. The default value is 512.

  * :xmsiz   specifies the size of the extra mapped memory. If it is
             not more than 0, the extra mapped memory is disabled.
             The default size is 67108864.

  * :capnum  specifies the capacity number of records.
  * :capsiz  specifies the capacity size of using memory.

  * :dfunit  unit step number. If it is not more than 0,
             the auto defragmentation is disabled. (Since TC 1.4.21)
</span></pre>
<h1>NOTE :</h1>
<p>
On reopening a file, Cabinet will tend to stick to the parameters as set
when the file was opened. To change that, have a look at the man pages of
the various command line tools coming with Tokyo Cabinet.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 177</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L177">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span> <span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='@db ivar id'>@db</span> <span class='assign token'>=</span> <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='tcadbnew identifier id'>tcadbnew</span>

  <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='string val'>'*'</span> <span class='if if_mod kw'>if</span> <span class='name identifier id'>name</span> <span class='eq op'>==</span> <span class='symbol val'>:mem_hash</span> <span class='comment val'># in memory hash database</span>
  <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='string val'>'+'</span> <span class='if if_mod kw'>if</span> <span class='name identifier id'>name</span> <span class='eq op'>==</span> <span class='symbol val'>:mem_tree</span> <span class='comment val'># in memory B+ tree database</span>

  <span class='if if kw'>if</span> <span class='type identifier id'>type</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:type</span><span class='rparen token'>)</span>
    <span class='name identifier id'>name</span> <span class='opasgn op'>+=</span> <span class='lbrace token'>{</span> <span class='symbol val'>:hash</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'.tch'</span><span class='comma token'>,</span> <span class='symbol val'>:btree</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'.tcb'</span><span class='comma token'>,</span> <span class='symbol val'>:fixed</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'.tcf'</span> <span class='rbrace token'>}</span><span class='lbrack token'>[</span><span class='type identifier id'>type</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>

  <span class='@path ivar id'>@path</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span>

  <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span> <span class='plus op'>+</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='dstring node'>&quot;##{k}=#{v}&quot;</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>''</span><span class='rparen token'>)</span>

  <span class='lparen token'>(</span><span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='tcadbopen identifier id'>tcadbopen</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='orop op'>||</span>
    <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='dstring node'>&quot;failed to open/create db '#{name}'  #{params.inspect}&quot;</span><span class='rparen token'>)</span>

  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='default identifier id'>default</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:default</span><span class='rbrack token'>]</span>
  <span class='@default_proc ivar id'>@default_proc</span> <span class='opasgn op'>||=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:default_proc</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#new_hash-class_method">new_hash</span><span class='args'>(params = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a new in-memory hash.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#new_tree-class_method">new_tree</span><span class='args'>(params = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a new in-memory B+ tree.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#open-class_method">open</span><span class='args'>(name, params = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Same args as initialize, but can take a block form that will close the db
when done.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#-5B-5D-3D-instance_method">#[]=</span><span class='args'>(k, v)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
No comment.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#clear-instance_method">#clear</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Removes all the records in the cabinet (use with care).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#close-instance_method">#close</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Closes the cabinet (and frees the datastructure allocated for it), returns
true in case of success.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#compact_copy-instance_method">#compact_copy</span><span class='args'>(target_path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Copies the current cabinet to a new file.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#copy-instance_method">#copy</span><span class='args'>(target_path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Copies the current cabinet to a new file.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#defrag-instance_method">#defrag</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Triggers a defrag run (TC &gt;= 1.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete-instance_method">#delete</span><span class='args'>(k)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Removes a record from the cabinet, returns the value if successful else
nil.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete_keys_with_prefix-instance_method">#delete_keys_with_prefix</span><span class='args'>(prefix)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes all the entries whose keys begin with the given prefix.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#incr-instance_method">#incr</span><span class='args'>(key, inc = 1)</span>
        <span class='block'></span>
        
          <span class='alias'>#add_double</span>
        
          <span class='alias'>#add_int</span>
        
          <span class='alias'>#adddouble</span>
        
          <span class='alias'>#addint</span>
        
      </th>
      <td class="docstring">
        <p>
Increments the value stored under the given key with the given increment
(defaults to 1 (integer)).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#keys-instance_method">#keys</span><span class='args'>(options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns an array with all the keys in the databse.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#ldelete-instance_method">#ldelete</span><span class='args'>(keys)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Given a list of keys, deletes all the matching entries (in one sweep).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#lget-instance_method">#lget</span><span class='args'>(keys)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Given a list of keys, returns a Hash { key =&gt; value } of the matching
entries (in one sweep).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#lib-instance_method">#lib</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Using the cabinet lib.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#merge-21-instance_method">#merge!</span><span class='args'>(hash)</span>
        <span class='block'></span>
        
          <span class='alias'>#lput</span>
        
      </th>
      <td class="docstring">
        <p>
Merges the given hash into this Cabinet (or Tyrant) and returns self.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#path-instance_method">#path</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the path to this database.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#putkeep-instance_method">#putkeep</span><span class='args'>(k, v)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Like #put but doesn&#8217;t overwrite the value if already set.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#size-instance_method">#size</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the number of records in the &#8216;cabinet&#8217;.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#sync-instance_method">#sync</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
&quot;synchronize updated contents of an abstract database object with the
file and the device&quot;.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#tranabort-instance_method">#tranabort</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Warning : this method is low-level, you probably only need to use
#transaction and a block.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#tranbegin-instance_method">#tranbegin</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Warning : this method is low-level, you probably only need to use
#transaction and a block.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#trancommit-instance_method">#trancommit</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Warning : this method is low-level, you probably only need to use
#transaction and a block.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#weight-instance_method">#weight</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the &#8216;weight&#8217; of the db (in bytes).
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="Cabinet/HashMethods.html" title="Rufus::Tokyo::HashMethods">Rufus::Tokyo::HashMethods</a></h2>
    <p><span class='name'><a href="HashMethods.html#%5B%5D-instance_method" title="[]">[]</a></span>, <span class='name'><a href="HashMethods.html#default-instance_method" title="default">default</a></span>, <span class='name'><a href="HashMethods.html#default%3D-instance_method" title="default=">default=</a></span>, <span class='name'><a href="HashMethods.html#each-instance_method" title="each">each</a></span>, <span class='name'><a href="HashMethods.html#merge-instance_method" title="merge">merge</a></span>, <span class='name'><a href="HashMethods.html#to_a-instance_method" title="to_a">to_a</a></span>, <span class='name'><a href="HashMethods.html#to_h-instance_method" title="to_h">to_h</a></span>, <span class='name'><a href="HashMethods.html#values-instance_method" title="values">values</a></span></p>
  </div>
  
  <div>
    <h2>Public Instance Methods Included from <a href="Cabinet/Transactions.html" title="Rufus::Tokyo::Transactions">Rufus::Tokyo::Transactions</a></h2>
    <p><span class='name'><a href="Transactions.html#abort-instance_method" title="abort">abort</a></span>, <span class='name'><a href="Transactions.html#transaction-instance_method" title="transaction">transaction</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>new_hash</h3>
</div><div id="new_hash-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>new_hash</span><span class='args'>(params = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a new in-memory hash. Accepts the same optional params hash as
new().
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 221</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L221">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">221
222
223
224</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='new_hash identifier id'>new_hash</span> <span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:hash</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>new_tree</h3>
</div><div id="new_tree-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>new_tree</span><span class='args'>(params = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a new in-memory B+ tree. Accepts the same optional params hash as
new().
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 229</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L229">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">229
230
231
232</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='new_tree identifier id'>new_tree</span> <span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:tree</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>open</h3>
</div><div id="open-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>open</span><span class='args'>(name, params = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Same args as initialize, but can take a block form that will close the db
when done. Similar to File.open
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 202</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L202">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">202
203
204
205
206
207
208
209
210
211
212
213
214
215
216</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='open identifier id'>open</span> <span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='db identifier id'>db</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>

  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='yield yield kw'>yield</span> <span class='db identifier id'>db</span>
    <span class='nil nil kw'>nil</span>
  <span class='else else kw'>else</span>
    <span class='db identifier id'>db</span>
  <span class='end end kw'>end</span>

<span class='ensure ensure kw'>ensure</span>

  <span class='db identifier id'>db</span><span class='dot token'>.</span><span class='close identifier id'>close</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span> <span class='andop op'>&amp;&amp;</span> <span class='db identifier id'>db</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>[]=</h3>
</div><div id="-5B-5D-3D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>[]=</span><span class='args'>(k, v)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
No comment
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 250</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L250">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">250
251
252
253</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='aset op'>[]=</span> <span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>

  <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_put identifier id'>abs_put</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='dot token'>.</span><span class='blen identifier id'>blen</span><span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='dot token'>.</span><span class='blen identifier id'>blen</span><span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>clear</h3>
</div><div id="clear-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>clear</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Removes all the records in the cabinet (use with care)
</p>
<p>
Returns self (like Ruby&#8217;s Hash does).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 293</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L293">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">293
294
295
296
297
298</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='clear identifier id'>clear</span>

  <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_vanish identifier id'>abs_vanish</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='rparen token'>)</span>

  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>close</h3>
</div><div id="close-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>close</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Closes the cabinet (and frees the datastructure allocated for it), returns
true in case of success.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 310</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L310">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">310
311
312
313
314
315
316</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='close identifier id'>close</span>

  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_close identifier id'>abs_close</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='rparen token'>)</span>
  <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_del identifier id'>abs_del</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='rparen token'>)</span>

  <span class='lparen token'>(</span><span class='result identifier id'>result</span> <span class='eq op'>==</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>compact_copy</h3>
</div><div id="compact_copy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>compact_copy</span><span class='args'>(target_path)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Copies the current cabinet to a new file.
</p>
<p>
Does it by copying each entry afresh to the target file. Spares some space,
hence the &#8216;compact&#8217; label&#8230;
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 332</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L332">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">332
333
334
335
336
337</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='compact_copy identifier id'>compact_copy</span> <span class='lparen token'>(</span><span class='target_path identifier id'>target_path</span><span class='rparen token'>)</span>

  <span class='@other_db ivar id'>@other_db</span> <span class='assign token'>=</span> <span class='Cabinet constant id'>Cabinet</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='target_path identifier id'>target_path</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='@other_db ivar id'>@other_db</span><span class='lbrack token'>[</span><span class='k identifier id'>k</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span> <span class='rbrace token'>}</span>
  <span class='@other_db ivar id'>@other_db</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>copy</h3>
</div><div id="copy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>copy</span><span class='args'>(target_path)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Copies the current cabinet to a new file.
</p>
<p>
Returns true if it was successful.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 322</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L322">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">322
323
324
325</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='copy identifier id'>copy</span> <span class='lparen token'>(</span><span class='target_path identifier id'>target_path</span><span class='rparen token'>)</span>

  <span class='lparen token'>(</span><span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_copy identifier id'>abs_copy</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='target_path identifier id'>target_path</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>defrag</h3>
</div><div id="defrag-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>defrag</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Triggers a defrag run (TC &gt;= 1.4.21 only)
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>NotImplementedError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 461</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L461">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">461
462
463
464
465
466
467
468
469</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='defrag identifier id'>defrag</span>

  <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='NotImplementedError constant id'>NotImplementedError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span>
    <span class='string val'>&quot;method defrag is supported since Tokyo Cabinet 1.4.21. &quot;</span> <span class='plus op'>+</span>
    <span class='string val'>&quot;your TC version doesn't support it&quot;</span>
  <span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:tctdbsetdfunit</span><span class='rparen token'>)</span>

  <span class='call_misc identifier id'>call_misc</span><span class='lparen token'>(</span><span class='string val'>'defrag'</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='List constant id'>List</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete</h3>
</div><div id="delete-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete</span><span class='args'>(k)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Removes a record from the cabinet, returns the value if successful else
nil.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 275</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L275">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">275
276
277
278
279
280</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete identifier id'>delete</span> <span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='rparen token'>)</span>

  <span class='v identifier id'>v</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='k identifier id'>k</span><span class='rbrack token'>]</span>

  <span class='lparen token'>(</span><span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_out identifier id'>abs_out</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='dot token'>.</span><span class='blen identifier id'>blen</span><span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='v identifier id'>v</span> <span class='colon op'>:</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete_keys_with_prefix</h3>
</div><div id="delete_keys_with_prefix-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete_keys_with_prefix</span><span class='args'>(prefix)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes all the entries whose keys begin with the given prefix
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 401</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L401">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">401
402
403
404
405
406
407
408</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete_keys_with_prefix identifier id'>delete_keys_with_prefix</span> <span class='lparen token'>(</span><span class='prefix identifier id'>prefix</span><span class='rparen token'>)</span>

  <span class='call_misc identifier id'>call_misc</span><span class='lparen token'>(</span>
    <span class='string val'>'outlist'</span><span class='comma token'>,</span> <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_fwmkeys identifier id'>abs_fwmkeys</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='prefix identifier id'>prefix</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='dot token'>.</span><span class='blen identifier id'>blen</span><span class='lparen token'>(</span><span class='prefix identifier id'>prefix</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='integer val'>-1</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
      <span class='comment val'># -1 for no limits</span>

  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>incr</h3>
</div><div id="incr-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>incr</span><span class='args'>(key, inc = 1)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="add_double-instance_method">add_double</tt>
  
    <tt id="add_int-instance_method">add_int</tt>
  
    <tt id="adddouble-instance_method">adddouble</tt>
  
    <tt id="addint-instance_method">addint</tt>
  
</p>
</div><div class="section docstring">
  <p>
Increments the value stored under the given key with the given increment
(defaults to 1 (integer)).
</p>
<p>
Accepts an integer or a double value.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="TokyoError.html" title="TokyoError">TokyoError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 441</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L441">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">441
442
443
444
445
446
447
448
449
450
451
452
453</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='incr identifier id'>incr</span> <span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='inc identifier id'>inc</span><span class='assign token'>=</span><span class='integer val'>1</span><span class='rparen token'>)</span>

  <span class='v identifier id'>v</span> <span class='assign token'>=</span> <span class='inc identifier id'>inc</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Fixnum constant id'>Fixnum</span><span class='rparen token'>)</span> <span class='question op'>?</span>
    <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='addint identifier id'>addint</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='dot token'>.</span><span class='blen identifier id'>blen</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='inc identifier id'>inc</span><span class='rparen token'>)</span> <span class='colon op'>:</span>
    <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='adddouble identifier id'>adddouble</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='dot token'>.</span><span class='blen identifier id'>blen</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='inc identifier id'>inc</span><span class='rparen token'>)</span>

  <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='TokyoError constant id'>TokyoError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span>
    <span class='string val'>&quot;incr failed, there is probably already a string value set &quot;</span> <span class='plus op'>+</span>
    <span class='dstring node'>&quot;for the key '#{key}'&quot;</span>
  <span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='v identifier id'>v</span> <span class='eq op'>==</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='INT_MIN constant id'>INT_MIN</span> <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:nan?</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='nan? fid id'>nan?</span><span class='rparen token'>)</span>

  <span class='v identifier id'>v</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>keys</h3>
</div><div id="keys-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>keys</span><span class='args'>(options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns an array with all the keys in the databse
</p>
<p>
With no options given, this method will return all the keys (strings) in a
Ruby array.
</p>
<pre class="code">
  <span class='symbol val'>:prefix</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='gt op'>&gt;</span> <span class='returns identifier id'>returns</span> <span class='only identifier id'>only</span> <span class='the identifier id'>the</span> <span class='keys identifier id'>keys</span> <span class='who identifier id'>who</span> <span class='match identifier id'>match</span> <span class='a identifier id'>a</span> <span class='given identifier id'>given</span> <span class='string identifier id'>string</span> <span class='prefix identifier id'>prefix</span>

  <span class='symbol val'>:limit</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='gt op'>&gt;</span> <span class='returns identifier id'>returns</span> <span class='a identifier id'>a</span> <span class='limited identifier id'>limited</span> <span class='number identifier id'>number</span> <span class='of identifier id'>of</span> <span class='keys identifier id'>keys</span>

  <span class='symbol val'>:native</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='gt op'>&gt;</span> <span class='returns identifier id'>returns</span> <span class='an identifier id'>an</span> <span class='instance identifier id'>instance</span> <span class='of identifier id'>of</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='List constant id'>List</span> <span class='instead identifier id'>instead</span> <span class='of identifier id'>of</span>
    <span class='a identifier id'>a</span> <span class='Ruby constant id'>Ruby</span> <span class='Hash constant id'>Hash</span><span class='comma token'>,</span> <span class='you identifier id'>you</span> <span class='have identifier id'>have</span> <span class='to identifier id'>to</span> <span class='call identifier id'>call</span> <span class='comment val'>#free on that List when done with it !</span>
    <span class='Else constant id'>Else</span> <span class='you identifier id'>you</span><span class='string val'>'re exposing yourself to a memory leak.
</span></pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 360</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L360">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='keys identifier id'>keys</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='outlen identifier id'>outlen</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>

  <span class='if if kw'>if</span> <span class='pre identifier id'>pre</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:prefix</span><span class='rbrack token'>]</span>

    <span class='l identifier id'>l</span> <span class='assign token'>=</span> <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_fwmkeys identifier id'>abs_fwmkeys</span><span class='lparen token'>(</span>
      <span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='pre identifier id'>pre</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='dot token'>.</span><span class='blen identifier id'>blen</span><span class='lparen token'>(</span><span class='pre identifier id'>pre</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:limit</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>-1</span><span class='rparen token'>)</span>

    <span class='l identifier id'>l</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='List constant id'>List</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='l identifier id'>l</span><span class='rparen token'>)</span>

    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:native</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='l identifier id'>l</span> <span class='colon op'>:</span> <span class='l identifier id'>l</span><span class='dot token'>.</span><span class='release identifier id'>release</span>

  <span class='else else kw'>else</span>

    <span class='limit identifier id'>limit</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:limit</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='integer val'>-1</span>
    <span class='limit identifier id'>limit</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='limit identifier id'>limit</span> <span class='lt op'>&lt;</span> <span class='integer val'>1</span>

    <span class='l identifier id'>l</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:native</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='List constant id'>List</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='colon op'>:</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

    <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_iterinit identifier id'>abs_iterinit</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='rparen token'>)</span>

    <span class='outlen identifier id'>outlen</span> <span class='assign token'>=</span> <span class='FFI constant id'>FFI</span><span class='colon2 op'>::</span><span class='MemoryPointer constant id'>MemoryPointer</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:int</span><span class='rparen token'>)</span>

    <span class='loop identifier id'>loop</span> <span class='do do kw'>do</span>
      <span class='break break kw'>break</span> <span class='if if_mod kw'>if</span> <span class='limit identifier id'>limit</span> <span class='and and kw'>and</span> <span class='l identifier id'>l</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='geq op'>&gt;=</span> <span class='limit identifier id'>limit</span>
      <span class='out identifier id'>out</span> <span class='assign token'>=</span> <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_iternext identifier id'>abs_iternext</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='outlen identifier id'>outlen</span><span class='rparen token'>)</span>
      <span class='break break kw'>break</span> <span class='if if_mod kw'>if</span> <span class='out identifier id'>out</span><span class='dot token'>.</span><span class='address identifier id'>address</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
      <span class='l identifier id'>l</span> <span class='lshft op'>&lt;&lt;</span> <span class='out identifier id'>out</span><span class='dot token'>.</span><span class='get_bytes identifier id'>get_bytes</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='comma token'>,</span> <span class='outlen identifier id'>outlen</span><span class='dot token'>.</span><span class='get_int identifier id'>get_int</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='l identifier id'>l</span>
  <span class='end end kw'>end</span>

<span class='ensure ensure kw'>ensure</span>

  <span class='outlen identifier id'>outlen</span><span class='dot token'>.</span><span class='free identifier id'>free</span> <span class='if if_mod kw'>if</span> <span class='outlen identifier id'>outlen</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>ldelete</h3>
</div><div id="ldelete-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>ldelete</span><span class='args'>(keys)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Given a list of keys, deletes all the matching entries (in one sweep).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 431</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L431">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">431
432
433
434</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='ldelete identifier id'>ldelete</span> <span class='lparen token'>(</span><span class='keys identifier id'>keys</span><span class='rparen token'>)</span>

  <span class='call_misc identifier id'>call_misc</span><span class='lparen token'>(</span><span class='string val'>'outlist'</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='List constant id'>List</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='keys identifier id'>keys</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>lget</h3>
</div><div id="lget-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>lget</span><span class='args'>(keys)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Given a list of keys, returns a Hash { key =&gt; value } of the matching
entries (in one sweep).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 413</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L413">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">413
414
415
416</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='lget identifier id'>lget</span> <span class='lparen token'>(</span><span class='keys identifier id'>keys</span><span class='rparen token'>)</span>

  <span class='Hash constant id'>Hash</span><span class='lbrack token'>[</span><span class='mult op'>*</span><span class='call_misc identifier id'>call_misc</span><span class='lparen token'>(</span><span class='string val'>'getlist'</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='List constant id'>List</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='keys identifier id'>keys</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>lib</h3>
</div><div id="lib-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>lib</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Using the cabinet lib
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 236</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L236">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">236
237
238
239</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='lib identifier id'>lib</span>

  <span class='CabinetLib constant id'>CabinetLib</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>merge!</h3>
</div><div id="merge-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>merge!</span><span class='args'>(hash)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="lput-instance_method">lput</tt>
  
</p>
</div><div class="section docstring">
  <p>
Merges the given hash into this Cabinet (or Tyrant) and returns self.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 420</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L420">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">420
421
422
423
424
425
426</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='merge! fid id'>merge!</span> <span class='lparen token'>(</span><span class='hash identifier id'>hash</span><span class='rparen token'>)</span>

  <span class='call_misc identifier id'>call_misc</span><span class='lparen token'>(</span>
    <span class='string val'>'putlist'</span><span class='comma token'>,</span>
    <span class='hash identifier id'>hash</span><span class='dot token'>.</span><span class='inject identifier id'>inject</span><span class='lparen token'>(</span><span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='colon2 op'>::</span><span class='List constant id'>List</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='l identifier id'>l</span><span class='comma token'>,</span> <span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span><span class='bitor op'>|</span> <span class='l identifier id'>l</span> <span class='lshft op'>&lt;&lt;</span> <span class='k identifier id'>k</span><span class='semicolon token'>;</span> <span class='l identifier id'>l</span> <span class='lshft op'>&lt;&lt;</span> <span class='v identifier id'>v</span><span class='semicolon token'>;</span> <span class='l identifier id'>l</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>path</h3>
</div><div id="path-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>path</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the path to this database.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 243</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L243">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">243
244
245
246</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='path identifier id'>path</span>

  <span class='@path ivar id'>@path</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>putkeep</h3>
</div><div id="putkeep-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>putkeep</span><span class='args'>(k, v)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Like #put but doesn&#8217;t overwrite the value if already set. Returns
true only if there no previous entry for k.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 258</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L258">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">258
259
260
261
262</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='putkeep identifier id'>putkeep</span> <span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>

  <span class='lparen token'>(</span><span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_putkeep identifier id'>abs_putkeep</span><span class='lparen token'>(</span>
    <span class='@db ivar id'>@db</span><span class='comma token'>,</span> <span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='dot token'>.</span><span class='blen identifier id'>blen</span><span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='comma token'>,</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='Tokyo constant id'>Tokyo</span><span class='dot token'>.</span><span class='blen identifier id'>blen</span><span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>size</h3>
</div><div id="size-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>size</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the number of records in the &#8216;cabinet&#8217;
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 284</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L284">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">284
285
286
287</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='size identifier id'>size</span>

  <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_rnum identifier id'>abs_rnum</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>sync</h3>
</div><div id="sync-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>sync</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
&quot;synchronize updated contents of an abstract database object with the
file and the device&quot;
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 342</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L342">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">342
343
344
345</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='sync identifier id'>sync</span>

  <span class='lparen token'>(</span><span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_sync identifier id'>abs_sync</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>tranabort</h3>
</div><div id="tranabort-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>tranabort</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Warning : this method is low-level, you probably only need to use
#transaction and a block.
</p>
<p>
Direct call for &#8216;transaction abort&#8217;.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 500</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L500">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">500
501
502
503
504
505</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='tranabort identifier id'>tranabort</span>

  <span class='check_transaction_support identifier id'>check_transaction_support</span>

  <span class='libcall identifier id'>libcall</span><span class='lparen token'>(</span><span class='symbol val'>:tcadbtranabort</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>tranbegin</h3>
</div><div id="tranbegin-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>tranbegin</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Warning : this method is low-level, you probably only need to use
#transaction and a block.
</p>
<p>
Direct call for &#8216;transaction begin&#8217;.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 476</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L476">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">476
477
478
479
480
481</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='tranbegin identifier id'>tranbegin</span>

  <span class='check_transaction_support identifier id'>check_transaction_support</span>

  <span class='libcall identifier id'>libcall</span><span class='lparen token'>(</span><span class='symbol val'>:tcadbtranbegin</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>trancommit</h3>
</div><div id="trancommit-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>trancommit</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Warning : this method is low-level, you probably only need to use
#transaction and a block.
</p>
<p>
Direct call for &#8216;transaction commit&#8217;.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 488</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L488">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">488
489
490
491
492
493</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='trancommit identifier id'>trancommit</span>

  <span class='check_transaction_support identifier id'>check_transaction_support</span>

  <span class='libcall identifier id'>libcall</span><span class='lparen token'>(</span><span class='symbol val'>:tcadbtrancommit</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>weight</h3>
</div><div id="weight-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>weight</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the &#8216;weight&#8217; of the db (in bytes)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/tokyo/cabinet/abstract.rb', line 302</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-tokyo/blob/8404756ff277c84ed479a34d58eb2a355b6cfe90/lib/rufus/tokyo/cabinet/abstract.rb#L302">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">302
303
304
305</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='weight identifier id'>weight</span>

  <span class='lib identifier id'>lib</span><span class='dot token'>.</span><span class='abs_size identifier id'>abs_size</span><span class='lparen token'>(</span><span class='@db ivar id'>@db</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>