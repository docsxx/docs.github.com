<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jmettraux's rufus-scheduler - Module: Rufus - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jmettraux/commits/rufus-scheduler/master" rel="alternate" title="Recent Commits to rufus-scheduler:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jmettraux", "rufus-scheduler", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jmettraux", "rufus-scheduler", "a03914c535513316208a4a17b945f87912175c41", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jmettraux/rufus-scheduler/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jmettraux/rufus-scheduler/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jmettraux/rufus-scheduler/network">Network</a></li>            
            <li class=""><a href="http://github.com/jmettraux/rufus-scheduler/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jmettraux/rufus-scheduler">Wiki</a></li>
            <li class=""><a href="http://github.com/jmettraux/rufus-scheduler/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jmettraux/rufus-scheduler">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jmettraux">jmettraux</a> / <b><a href="http://github.com/jmettraux/rufus-scheduler/tree">rufus-scheduler</a></b>        
                <a id="namespaces_button" rel="jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Rufus">
  <h1>Module: Rufus</h1>
  <div class="section docstring">
  <p>
&#8212; Copyright &#169; 2006-2009, John Mettraux, jmettraux@gmail.com
</p>
<p>
Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&quot;Software&quot;), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to the
following conditions:
</p>
<p>
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
</p>
<p>
THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.
</p>
<p>
Made in Japan. ++
</p>

</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="DU_KEYS-constant">DU_KEYS</dt>
      <dd>DURATIONS2M.collect { |k, v| k.to_sym }</dd>
    
      <dt id="DURATIONS-constant">DURATIONS</dt>
      <dd>DURATIONS2M.inject({}) do |r, (k, v)|
  r[k] = v
  r
end</dd>
    
      <dt id="DURATIONS2-constant">DURATIONS2</dt>
      <dd>DURATIONS2M.dup</dd>
    
      <dt id="DURATIONS2M-constant">DURATIONS2M</dt>
      <dd>[
  [ 'y', 365 * 24 * 3600 ],
  [ 'M', 30 * 24 * 3600 ],
  [ 'w', 7 * 24 * 3600 ],
  [ 'd', 24 * 3600 ],
  [ 'h', 3600 ],
  [ 'm', 60 ],
  [ 's', 1 ]
]</dd>
    
  </dl>
</div>

</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#at_to_f-class_method">at_to_f</span><span class='args'>(at)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Ensures an &#8216;at&#8217; value is translated to a float (to be compared
with the float coming from time.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#current_time_millis-class_method">current_time_millis</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Equivalent to java.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#duration_to_f-class_method">duration_to_f</span><span class='args'>(s)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Ensures that a duration is a expressed as a Float instance.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#now-class_method">now</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the current time as an ISO date string.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#parse_time_string-class_method">parse_time_string</span><span class='args'>(string)</span>
        <span class='block'></span>
        
          <span class='alias'>parse_duration_string</span>
        
      </th>
      <td class="docstring">
        <p>
Turns a string like &#8216;1m10s&#8217; into a float like &#8216;70.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#time_to_iso8601_date-class_method">time_to_iso8601_date</span><span class='args'>(time)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
the old method we used to generate our ISO datetime strings.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_datetime-class_method">to_datetime</span><span class='args'>(time)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
conversion methods between Date[Time] and Time &#8212; Ruby Cookbook 1st
edition p.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_duration_hash-class_method">to_duration_hash</span><span class='args'>(seconds, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Turns a number of seconds (integer or Float) into a hash like in :.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_duration_string-class_method">to_duration_string</span><span class='args'>(seconds, options = {})</span>
        <span class='block'></span>
        
          <span class='alias'>to_time_string</span>
        
      </th>
      <td class="docstring">
        <p>
Turns a number of seconds into a a time string.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_gm_time-class_method">to_gm_time</span><span class='args'>(dtime)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_iso8601_date-class_method">to_iso8601_date</span><span class='args'>(date)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
As the name implies.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_local_time-class_method">to_local_time</span><span class='args'>(dtime)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_ruby_time-class_method">to_ruby_time</span><span class='args'>(sdate)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a Ruby time.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_ttime-class_method">to_ttime</span><span class='args'>(d, method)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>at_to_f</h3>
</div><div id="at_to_f-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>at_to_f</span><span class='args'>(at)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Ensures an &#8216;at&#8217; value is translated to a float (to be compared
with the float coming from time.to_f)
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>ArgumentError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 322</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L322">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">322
323
324
325
326
327
328
329
330
331
332
333
334
335
336</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='at_to_f identifier id'>at_to_f</span> <span class='lparen token'>(</span><span class='at identifier id'>at</span><span class='rparen token'>)</span>

  <span class='comment val'># TODO : use chronic if present</span>

  <span class='at identifier id'>at</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='to_ruby_time identifier id'>to_ruby_time</span><span class='lparen token'>(</span><span class='at identifier id'>at</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='at identifier id'>at</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='String constant id'>String</span><span class='rparen token'>)</span>
  <span class='at identifier id'>at</span> <span class='assign token'>=</span> <span class='Rufus constant id'>Rufus</span><span class='colon2 op'>::</span><span class='to_gm_time identifier id'>to_gm_time</span><span class='lparen token'>(</span><span class='at identifier id'>at</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='at identifier id'>at</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='DateTime constant id'>DateTime</span><span class='rparen token'>)</span>
  <span class='comment val'>#at = at.to_f if at.is_a?(Time)</span>
  <span class='at identifier id'>at</span> <span class='assign token'>=</span> <span class='at identifier id'>at</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span> <span class='if if_mod kw'>if</span> <span class='at identifier id'>at</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:to_f</span><span class='rparen token'>)</span>

  <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span>
    <span class='dstring node'>&quot;cannot determine 'at' time from : #{at.inspect}&quot;</span>
  <span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='at identifier id'>at</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='rparen token'>)</span>

  <span class='at identifier id'>at</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>current_time_millis</h3>
</div><div id="current_time_millis-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>current_time_millis</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Equivalent to java.lang.System.currentTimeMillis()
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 78</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L78">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">78
79
80
81</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='current_time_millis identifier id'>current_time_millis</span>

  <span class='lparen token'>(</span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span> <span class='mult op'>*</span> <span class='integer val'>1000</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>duration_to_f</h3>
</div><div id="duration_to_f-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>duration_to_f</span><span class='args'>(s)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Ensures that a duration is a expressed as a Float instance.
</p>
<pre class="code">
  <span class='duration_to_f identifier id'>duration_to_f</span><span class='lparen token'>(</span><span class='string val'>&quot;10s&quot;</span><span class='rparen token'>)</span>
</pre>
<p>
will yield 10.0
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 311</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L311">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">311
312
313
314
315
316</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='duration_to_f identifier id'>duration_to_f</span> <span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span>

  <span class='return return kw'>return</span> <span class='s identifier id'>s</span> <span class='if if_mod kw'>if</span> <span class='s identifier id'>s</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='parse_time_string identifier id'>parse_time_string</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='s identifier id'>s</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='String constant id'>String</span><span class='rparen token'>)</span>
  <span class='Float constant id'>Float</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>now</h3>
</div><div id="now-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>now</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the current time as an ISO date string
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 34</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L34">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">34
35
36
37</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='now identifier id'>now</span>

  <span class='to_iso8601_date identifier id'>to_iso8601_date</span><span class='lparen token'>(</span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>parse_time_string</h3>
</div><div id="parse_time_string-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>parse_time_string</span><span class='args'>(string)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="parse_duration_string-class_method">parse_duration_string</tt>
  
</p>
</div><div class="section docstring">
  <p>
Turns a string like &#8216;1m10s&#8217; into a float like
&#8216;70.0&#8217;, more formally, turns a time duration expressed as a
string into a Float instance (millisecond count).
</p>
<p>
w -&gt; week d -&gt; day h -&gt; hour m -&gt; minute s -&gt; second M -&gt;
month y -&gt; year &#8216;nada&#8217; -&gt; millisecond
</p>
<p>
Some examples :
</p>
<pre class="code">
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='parse_time_string identifier id'>parse_time_string</span> <span class='string val'>&quot;500&quot;</span>    <span class='comment val'># =&gt; 0.5</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='parse_time_string identifier id'>parse_time_string</span> <span class='string val'>&quot;1000&quot;</span>     <span class='comment val'># =&gt; 1.0</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='parse_time_string identifier id'>parse_time_string</span> <span class='string val'>&quot;1h&quot;</span>     <span class='comment val'># =&gt; 3600.0</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='parse_time_string identifier id'>parse_time_string</span> <span class='string val'>&quot;1h10s&quot;</span>    <span class='comment val'># =&gt; 3610.0</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='parse_time_string identifier id'>parse_time_string</span> <span class='string val'>&quot;1w2d&quot;</span>     <span class='comment val'># =&gt; 777600.0</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 104</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L104">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='parse_time_string identifier id'>parse_time_string</span> <span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>

  <span class='string identifier id'>string</span> <span class='assign token'>=</span> <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>

  <span class='index identifier id'>index</span> <span class='assign token'>=</span> <span class='integer val'>-1</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='integer val'>.0</span>

  <span class='number identifier id'>number</span> <span class='assign token'>=</span> <span class='string val'>''</span>

  <span class='loop identifier id'>loop</span> <span class='do do kw'>do</span>

    <span class='index identifier id'>index</span> <span class='assign token'>=</span> <span class='index identifier id'>index</span> <span class='plus op'>+</span> <span class='integer val'>1</span>

    <span class='if if kw'>if</span> <span class='index identifier id'>index</span> <span class='geq op'>&gt;=</span> <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='result identifier id'>result</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='rparen token'>)</span> <span class='div op'>/</span> <span class='float val'>1000.0</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='number identifier id'>number</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
      <span class='break break kw'>break</span>
    <span class='end end kw'>end</span>

    <span class='c identifier id'>c</span> <span class='assign token'>=</span> <span class='string identifier id'>string</span><span class='lbrack token'>[</span><span class='index identifier id'>index</span><span class='comma token'>,</span> <span class='integer val'>1</span><span class='rbrack token'>]</span>

    <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='c identifier id'>c</span> <span class='geq op'>&gt;=</span> <span class='string val'>'0'</span> <span class='and and kw'>and</span> <span class='c identifier id'>c</span> <span class='leq op'>&lt;=</span> <span class='string val'>'9'</span><span class='rparen token'>)</span>
      <span class='number identifier id'>number</span> <span class='assign token'>=</span> <span class='number identifier id'>number</span> <span class='plus op'>+</span> <span class='c identifier id'>c</span>
      <span class='next next kw'>next</span>
    <span class='end end kw'>end</span>

    <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='Integer constant id'>Integer</span><span class='lparen token'>(</span><span class='number identifier id'>number</span><span class='rparen token'>)</span>
    <span class='number identifier id'>number</span> <span class='assign token'>=</span> <span class='string val'>''</span>

    <span class='multiplier identifier id'>multiplier</span> <span class='assign token'>=</span> <span class='DURATIONS constant id'>DURATIONS</span><span class='lbrack token'>[</span><span class='c identifier id'>c</span><span class='rbrack token'>]</span>

    <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;unknown time char '#{c}'&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='multiplier identifier id'>multiplier</span>

    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='result identifier id'>result</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='value identifier id'>value</span> <span class='mult op'>*</span> <span class='multiplier identifier id'>multiplier</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='result identifier id'>result</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>time_to_iso8601_date</h3>
</div><div id="time_to_iso8601_date-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>time_to_iso8601_date</span><span class='args'>(time)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
the old method we used to generate our ISO datetime strings
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 58</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L58">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">58
59
60
61
62
63
64
65
66
67</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='time_to_iso8601_date identifier id'>time_to_iso8601_date</span> <span class='lparen token'>(</span><span class='time identifier id'>time</span><span class='rparen token'>)</span>

  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='getutc identifier id'>getutc</span><span class='lparen token'>(</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='TIME_FORMAT constant id'>TIME_FORMAT</span><span class='rparen token'>)</span>
  <span class='o identifier id'>o</span> <span class='assign token'>=</span> <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='utc_offset identifier id'>utc_offset</span> <span class='div op'>/</span> <span class='integer val'>3600</span>
  <span class='o identifier id'>o</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{o}00&quot;</span>
  <span class='o identifier id'>o</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;0#{o}&quot;</span> <span class='if if_mod kw'>if</span> <span class='o identifier id'>o</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='lt op'>&lt;</span> <span class='integer val'>4</span>
  <span class='o identifier id'>o</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;+#{o}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='o identifier id'>o</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>'-'</span>

  <span class='dstring node'>&quot;#{s} #{o}&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_datetime</h3>
</div><div id="to_datetime-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_datetime</span><span class='args'>(time)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
conversion methods between Date[Time] and Time &#8212; Ruby Cookbook 1st
edition p.111 http://www.oreilly.com/catalog/rubyckbk/ a must ++ Converts a
Time instance to a DateTime one
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 157</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L157">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_datetime identifier id'>to_datetime</span> <span class='lparen token'>(</span><span class='time identifier id'>time</span><span class='rparen token'>)</span>

  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='sec identifier id'>sec</span> <span class='plus op'>+</span> <span class='Rational constant id'>Rational</span><span class='lparen token'>(</span><span class='time identifier id'>time</span><span class='dot token'>.</span><span class='usec identifier id'>usec</span><span class='comma token'>,</span> <span class='integer val'>10</span><span class='pow op'>**</span><span class='integer val'>6</span><span class='rparen token'>)</span>
  <span class='o identifier id'>o</span> <span class='assign token'>=</span> <span class='Rational constant id'>Rational</span><span class='lparen token'>(</span><span class='time identifier id'>time</span><span class='dot token'>.</span><span class='utc_offset identifier id'>utc_offset</span><span class='comma token'>,</span> <span class='integer val'>3600</span> <span class='mult op'>*</span> <span class='integer val'>24</span><span class='rparen token'>)</span>

  <span class='begin begin kw'>begin</span>

    <span class='DateTime constant id'>DateTime</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='year identifier id'>year</span><span class='comma token'>,</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='month identifier id'>month</span><span class='comma token'>,</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='day identifier id'>day</span><span class='comma token'>,</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='hour identifier id'>hour</span><span class='comma token'>,</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='min identifier id'>min</span><span class='comma token'>,</span>
      <span class='s identifier id'>s</span><span class='comma token'>,</span>
      <span class='o identifier id'>o</span><span class='rparen token'>)</span>

  <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>

    <span class='DateTime constant id'>DateTime</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='year identifier id'>year</span><span class='comma token'>,</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='month identifier id'>month</span><span class='comma token'>,</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='day identifier id'>day</span><span class='comma token'>,</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='hour identifier id'>hour</span><span class='comma token'>,</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='min identifier id'>min</span><span class='comma token'>,</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='sec identifier id'>sec</span><span class='comma token'>,</span>
      <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='utc_offset identifier id'>utc_offset</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_duration_hash</h3>
</div><div id="to_duration_hash-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_duration_hash</span><span class='args'>(seconds, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Turns a number of seconds (integer or Float) into a hash like in :
</p>
<pre class="code">
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_hash identifier id'>to_duration_hash</span> <span class='integer val'>0</span><span class='integer val'>.051</span>
    <span class='comment val'># =&gt; { :ms =&gt; &quot;51&quot; }</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_hash identifier id'>to_duration_hash</span> <span class='float val'>7.051</span>
    <span class='comment val'># =&gt; { :s =&gt; 7, :ms =&gt; &quot;51&quot; }</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_hash identifier id'>to_duration_hash</span> <span class='integer val'>0</span><span class='integer val'>.120</span> <span class='plus op'>+</span> <span class='integer val'>30</span> <span class='mult op'>*</span> <span class='integer val'>24</span> <span class='mult op'>*</span> <span class='integer val'>3600</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
    <span class='comment val'># =&gt; { :w =&gt; 4, :d =&gt; 2, :s =&gt; 1, :ms =&gt; &quot;120&quot; }</span>
</pre>
<p>
This method is used by to_duration_string (to_time_string) behind the
scene.
</p>
<p>
Options are :
</p>
<ul>
<li>:months, if set to true, months (M) of 30 days will be taken into account
when building up the result

</li>
<li>:drop_seconds, if set to true, seconds and milliseconds will be trimmed
from the result

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 278</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L278">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_hash identifier id'>to_duration_hash</span> <span class='lparen token'>(</span><span class='seconds identifier id'>seconds</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='h identifier id'>h</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

  <span class='if if kw'>if</span> <span class='seconds identifier id'>seconds</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Float constant id'>Float</span><span class='rparen token'>)</span>
    <span class='h identifier id'>h</span><span class='lbrack token'>[</span><span class='symbol val'>:ms</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='seconds identifier id'>seconds</span> <span class='mod op'>%</span> <span class='integer val'>1</span> <span class='mult op'>*</span> <span class='integer val'>1000</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
    <span class='seconds identifier id'>seconds</span> <span class='assign token'>=</span> <span class='seconds identifier id'>seconds</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:drop_seconds</span><span class='rbrack token'>]</span>
    <span class='h identifier id'>h</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span> <span class='symbol val'>:ms</span>
    <span class='seconds identifier id'>seconds</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='seconds identifier id'>seconds</span> <span class='minus op'>-</span> <span class='seconds identifier id'>seconds</span> <span class='mod op'>%</span> <span class='integer val'>60</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='durations identifier id'>durations</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:months</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='DURATIONS2M constant id'>DURATIONS2M</span> <span class='colon op'>:</span> <span class='DURATIONS2 constant id'>DURATIONS2</span>

  <span class='durations identifier id'>durations</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='duration identifier id'>duration</span><span class='bitor op'>|</span>

    <span class='count identifier id'>count</span> <span class='assign token'>=</span> <span class='seconds identifier id'>seconds</span> <span class='div op'>/</span> <span class='duration identifier id'>duration</span>
    <span class='seconds identifier id'>seconds</span> <span class='assign token'>=</span> <span class='seconds identifier id'>seconds</span> <span class='mod op'>%</span> <span class='duration identifier id'>duration</span>

    <span class='h identifier id'>h</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='count identifier id'>count</span> <span class='if if_mod kw'>if</span> <span class='count identifier id'>count</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='end end kw'>end</span>

  <span class='h identifier id'>h</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_duration_string</h3>
</div><div id="to_duration_string-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_duration_string</span><span class='args'>(seconds, options = {})</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="to_time_string-class_method">to_time_string</tt>
  
</p>
</div><div class="section docstring">
  <p>
Turns a number of seconds into a a time string
</p>
<pre class="code">
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_string identifier id'>to_duration_string</span> <span class='integer val'>0</span>          <span class='comment val'># =&gt; '0s'</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_string identifier id'>to_duration_string</span> <span class='integer val'>60</span>           <span class='comment val'># =&gt; '1m'</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_string identifier id'>to_duration_string</span> <span class='integer val'>3661</span>         <span class='comment val'># =&gt; '1h1m1s'</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_string identifier id'>to_duration_string</span> <span class='integer val'>7</span> <span class='mult op'>*</span> <span class='integer val'>24</span> <span class='mult op'>*</span> <span class='integer val'>3600</span>    <span class='comment val'># =&gt; '1w'</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_string identifier id'>to_duration_string</span> <span class='integer val'>30</span> <span class='mult op'>*</span> <span class='integer val'>24</span> <span class='mult op'>*</span> <span class='integer val'>3600</span> <span class='plus op'>+</span> <span class='integer val'>1</span>   <span class='comment val'># =&gt; &quot;4w2d1s&quot;</span>
</pre>
<p>
It goes from seconds to the year. Months are not counted (as they are of
variable length). Weeks are counted.
</p>
<p>
For 30 days months to be counted, the second parameter of this method can
be set to true.
</p>
<pre class="code">
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_time_string identifier id'>to_time_string</span> <span class='integer val'>30</span> <span class='mult op'>*</span> <span class='integer val'>24</span> <span class='mult op'>*</span> <span class='integer val'>3600</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='true true kw'>true</span>   <span class='comment val'># =&gt; &quot;1M1s&quot;</span>
</pre>
<p>
(to_time_string is an alias for to_duration_string)
</p>
<p>
If a Float value is passed, milliseconds will be displayed without
&#8216;marker&#8217;
</p>
<pre class="code">
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_string identifier id'>to_duration_string</span> <span class='integer val'>0</span><span class='integer val'>.051</span>             <span class='comment val'># =&gt;&quot;51&quot;</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_string identifier id'>to_duration_string</span> <span class='float val'>7.051</span>             <span class='comment val'># =&gt;&quot;7s51&quot;</span>
  <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_string identifier id'>to_duration_string</span> <span class='integer val'>0</span><span class='integer val'>.120</span> <span class='plus op'>+</span> <span class='integer val'>30</span> <span class='mult op'>*</span> <span class='integer val'>24</span> <span class='mult op'>*</span> <span class='integer val'>3600</span> <span class='plus op'>+</span> <span class='integer val'>1</span>  <span class='comment val'># =&gt;&quot;4w2d1s120&quot;</span>
</pre>
<p>
(this behaviour mirrors the one found for parse_time_string()).
</p>
<p>
Options are :
</p>
<ul>
<li>:months, if set to true, months (M) of 30 days will be taken into account
when building up the result

</li>
<li>:drop_seconds, if set to true, seconds and milliseconds will be trimmed
from the result

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 236</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L236">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_duration_string identifier id'>to_duration_string</span> <span class='lparen token'>(</span><span class='seconds identifier id'>seconds</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='return return kw'>return</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:drop_seconds</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='string val'>'0m'</span> <span class='colon op'>:</span> <span class='string val'>'0s'</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='seconds identifier id'>seconds</span> <span class='leq op'>&lt;=</span> <span class='integer val'>0</span>

  <span class='h identifier id'>h</span> <span class='assign token'>=</span> <span class='to_duration_hash identifier id'>to_duration_hash</span> <span class='seconds identifier id'>seconds</span><span class='comma token'>,</span> <span class='options identifier id'>options</span>

  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='DU_KEYS constant id'>DU_KEYS</span><span class='dot token'>.</span><span class='inject identifier id'>inject</span><span class='lparen token'>(</span><span class='string val'>''</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='bitor op'>|</span>
    <span class='count identifier id'>count</span> <span class='assign token'>=</span> <span class='h identifier id'>h</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='rbrack token'>]</span>
    <span class='count identifier id'>count</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='count identifier id'>count</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
    <span class='r identifier id'>r</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{count}#{key}&quot;</span> <span class='if if_mod kw'>if</span> <span class='count identifier id'>count</span>
    <span class='r identifier id'>r</span>
  <span class='end end kw'>end</span>

  <span class='ms identifier id'>ms</span> <span class='assign token'>=</span> <span class='h identifier id'>h</span><span class='lbrack token'>[</span><span class='symbol val'>:ms</span><span class='rbrack token'>]</span>
  <span class='s identifier id'>s</span> <span class='lshft op'>&lt;&lt;</span> <span class='ms identifier id'>ms</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='if if_mod kw'>if</span> <span class='ms identifier id'>ms</span>

  <span class='s identifier id'>s</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_gm_time</h3>
</div><div id="to_gm_time-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_gm_time</span><span class='args'>(dtime)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 186</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L186">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">186
187
188
189</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_gm_time identifier id'>to_gm_time</span> <span class='lparen token'>(</span><span class='dtime identifier id'>dtime</span><span class='rparen token'>)</span>

  <span class='to_ttime identifier id'>to_ttime</span><span class='lparen token'>(</span><span class='dtime identifier id'>dtime</span><span class='dot token'>.</span><span class='new_offset identifier id'>new_offset</span><span class='comma token'>,</span> <span class='symbol val'>:gm</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_iso8601_date</h3>
</div><div id="to_iso8601_date-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_iso8601_date</span><span class='args'>(date)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
As the name implies.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 41</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L41">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_iso8601_date identifier id'>to_iso8601_date</span> <span class='lparen token'>(</span><span class='date identifier id'>date</span><span class='rparen token'>)</span>

  <span class='date identifier id'>date</span> <span class='assign token'>=</span> <span class='case case kw'>case</span> <span class='date identifier id'>date</span>
    <span class='when when kw'>when</span> <span class='Date constant id'>Date</span> <span class='then then kw'>then</span> <span class='date identifier id'>date</span>
    <span class='when when kw'>when</span> <span class='Float constant id'>Float</span> <span class='then then kw'>then</span> <span class='to_datetime identifier id'>to_datetime</span><span class='lparen token'>(</span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='date identifier id'>date</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='Time constant id'>Time</span> <span class='then then kw'>then</span> <span class='to_datetime identifier id'>to_datetime</span><span class='lparen token'>(</span><span class='date identifier id'>date</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span> <span class='DateTime constant id'>DateTime</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='date identifier id'>date</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='date identifier id'>date</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='comment val'># this is costly</span>
  <span class='s identifier id'>s</span><span class='lbrack token'>[</span><span class='integer val'>10</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>' '</span>

  <span class='s identifier id'>s</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_local_time</h3>
</div><div id="to_local_time-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_local_time</span><span class='args'>(dtime)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 191</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L191">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">191
192
193
194</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_local_time identifier id'>to_local_time</span> <span class='lparen token'>(</span><span class='dtime identifier id'>dtime</span><span class='rparen token'>)</span>

  <span class='to_ttime identifier id'>to_ttime</span><span class='lparen token'>(</span><span class='dtime identifier id'>dtime</span><span class='dot token'>.</span><span class='new_offset identifier id'>new_offset</span><span class='lparen token'>(</span><span class='DateTime constant id'>DateTime</span><span class='dot token'>.</span><span class='now identifier id'>now</span><span class='dot token'>.</span><span class='offset identifier id'>offset</span><span class='minus op'>-</span><span class='offset identifier id'>offset</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:local</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_ruby_time</h3>
</div><div id="to_ruby_time-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_ruby_time</span><span class='args'>(sdate)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a Ruby time
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 71</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L71">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">71
72
73
74</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_ruby_time identifier id'>to_ruby_time</span> <span class='lparen token'>(</span><span class='sdate identifier id'>sdate</span><span class='rparen token'>)</span>

  <span class='DateTime constant id'>DateTime</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='sdate identifier id'>sdate</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_ttime</h3>
</div><div id="to_ttime-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_ttime</span><span class='args'>(d, method)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rufus/sc/rtime.rb', line 196</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/rufus-scheduler/blob/a03914c535513316208a4a17b945f87912175c41/lib/rufus/sc/rtime.rb#L196">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">196
197
198
199
200</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='Rufus constant id'>Rufus</span><span class='dot token'>.</span><span class='to_ttime identifier id'>to_ttime</span> <span class='lparen token'>(</span><span class='d identifier id'>d</span><span class='comma token'>,</span> <span class='method identifier id'>method</span><span class='rparen token'>)</span>

  <span class='usec identifier id'>usec</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='d identifier id'>d</span><span class='dot token'>.</span><span class='sec_fraction identifier id'>sec_fraction</span> <span class='mult op'>*</span> <span class='integer val'>3600</span> <span class='mult op'>*</span> <span class='integer val'>24</span> <span class='mult op'>*</span> <span class='lparen token'>(</span><span class='integer val'>10</span><span class='pow op'>**</span><span class='integer val'>6</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='year identifier id'>year</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='month identifier id'>month</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='day identifier id'>day</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='hour identifier id'>hour</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='min identifier id'>min</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='sec identifier id'>sec</span><span class='comma token'>,</span> <span class='usec identifier id'>usec</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>