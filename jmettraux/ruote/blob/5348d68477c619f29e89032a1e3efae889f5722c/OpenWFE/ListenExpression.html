<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jmettraux's ruote - Class: OpenWFE::ListenExpression - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jmettraux/commits/ruote/master" rel="alternate" title="Recent Commits to ruote:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jmettraux", "ruote", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jmettraux/ruote/blob/5348d68477c619f29e89032a1e3efae889f5722c' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jmettraux/ruote/blob/5348d68477c619f29e89032a1e3efae889f5722c' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jmettraux", "ruote", "5348d68477c619f29e89032a1e3efae889f5722c", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jmettraux/ruote/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jmettraux/ruote/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jmettraux/ruote/network">Network</a></li>            
            <li class=""><a href="http://github.com/jmettraux/ruote/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jmettraux/ruote">Wiki</a></li>
            <li class=""><a href="http://github.com/jmettraux/ruote/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jmettraux/ruote">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jmettraux">jmettraux</a> / <b><a href="http://github.com/jmettraux/ruote/tree">ruote</a></b>        
                <a id="namespaces_button" rel="jmettraux/ruote/blob/5348d68477c619f29e89032a1e3efae889f5722c" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jmettraux/ruote/blob/5348d68477c619f29e89032a1e3efae889f5722c" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class OpenWFE_ListenExpression">
  <h1>Class: OpenWFE::ListenExpression</h1>
  <div class="section inheritance">
  <ul>
  <li><a title="OpenWFE::ObjectWithMeta" href="ObjectWithMeta.html">OpenWFE::ObjectWithMeta</a></li><ul><li><a title="OpenWFE::FlowExpression" href="FlowExpression.html">OpenWFE::FlowExpression</a></li><ul><li>OpenWFE::ListenExpression</li>
  </ul></ul></ul>
</div><div class="section mixins">
  <h2>Included Modules</h2>
  <p><a title="OpenWFE::TimeoutMixin" href="ListenExpression/TimeoutMixin.html">OpenWFE::TimeoutMixin</a>, <a title="OpenWFE::ConditionMixin" href="ListenExpression/ConditionMixin.html">OpenWFE::ConditionMixin</a>, <a title="OpenWFE::MergeMixin" href="ListenExpression/MergeMixin.html">OpenWFE::MergeMixin</a></p>
</div><div class="section docstring">
  <p>
An expression for listening to participant activity in the engine (across
process instances).
</p>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='listen identifier id'>listen</span> <span class='to identifier id'>to</span><span class='assign token'>=</span><span class='string val'>&quot;alice&quot;</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='subprocess identifier id'>subprocess</span> <span class='ref identifier id'>ref</span><span class='assign token'>=</span><span class='string val'>&quot;notify_bob&quot;</span> <span class='div op'>/</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='regexp val'>/listen&gt;
</span></pre>
<p>
Whenever a workitem is dispatched (applied) to the participant named
&quot;alice&quot;, the subprocess named &quot;notify_bob&quot; is triggered
(once).
</p>
<pre class="code">
  <span class='listen identifier id'>listen</span> <span class='symbol val'>:to</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;^channel_.*&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:upon</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;reply&quot;</span> <span class='do do kw'>do</span>
    <span class='sequence identifier id'>sequence</span> <span class='do do kw'>do</span>
      <span class='participant identifier id'>participant</span> <span class='symbol val'>:ref</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;delta&quot;</span>
      <span class='participant identifier id'>participant</span> <span class='symbol val'>:ref</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;echo&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
After the listen has been applied, the first workitem coming back from a
participant whose named starts with &quot;channel_&quot; will trigger a
sequence with the participants &#8216;delta&#8217; and &#8216;echo&#8217;.
</p>
<pre class="code">
  <span class='listen identifier id'>listen</span> <span class='symbol val'>:to</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;alpha&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:where</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;${f:color} == red&quot;</span> <span class='do do kw'>do</span>
    <span class='participant identifier id'>participant</span> <span class='symbol val'>:ref</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;echo&quot;</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Will send a copy of the first workitem meant for participant
&quot;alpha&quot; to participant &quot;echo&quot; if this workitem&#8217;s
color field is set to &#8216;red&#8217;.
</p>
<pre class="code">
  <span class='listen identifier id'>listen</span> <span class='symbol val'>:to</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;alpha&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:once</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;false&quot;</span> <span class='do do kw'>do</span>
    <span class='send_email_to_stakeholders identifier id'>send_email_to_stakeholders</span>
  <span class='end end kw'>end</span>
</pre>
<p>
This is some kind of a server : each time a workitem is dispatched to
participant &quot;alpha&quot;, the subprocess (or participant) named
&#8216;send_email_to_stakeholders&#8217;) will receive a copy of that
workitem. Use with care.
</p>
<pre class="code">
  <span class='listen identifier id'>listen</span> <span class='symbol val'>:to</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;alpha&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:once</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;false&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:timeout</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;1M2w&quot;</span> <span class='do do kw'>do</span>
    <span class='send_email_to_stakeholders identifier id'>send_email_to_stakeholders</span>
  <span class='end end kw'>end</span>
</pre>
<p>
The &#8216;listen&#8217; expression understands the &#8216;timeout&#8217;
attribute. It can thus be instructed to stop listening after a certain
amount of time (here, after one month and two weeks).
</p>
<p>
The listen expression can be used without a child expression. It blocks
until a valid messages comes in the channel, at which point it resumes the
process, with workitem that came as the message (not with the workitem at
apply time). (no merge implemented for now).
</p>
<pre class="code">
  <span class='sequence identifier id'>sequence</span> <span class='do do kw'>do</span>
    <span class='listen identifier id'>listen</span> <span class='symbol val'>:to</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;channel_z&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:upon</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:reply</span>
    <span class='participant identifier id'>participant</span> <span class='symbol val'>:the_rest_of_the_process</span>
  <span class='end end kw'>end</span>
</pre>
<p>
In this example, the process will block until a workitem comes for a
participant named &#8216;channel_z&#8217;.
</p>
<p>
The engine accept (in its reply() method) workitems that don&#8217;t belong
to a process intance (ie workitems that have a nil flow_expression_id). So
it&#8217;s entirely feasible to send &#8216;notifications only&#8217;
workitems to the OpenWFEru engine. (see
http://github.com/jmettraux/ruote/tree/master/test/ft_54b_listen.rb)
</p>
<p>
This expression has been aliased &#8216;intercept&#8217; and
&#8216;receive&#8217;. It also accepts the &#8216;on&#8217; parameter as an
alias parameter to the &#8216;to&#8217; parameter. Think &quot;listen
to&quot; and &quot;receive on&quot;.
</p>
<p>
A &#8216;merge&#8217; attribute can be set to true (the default value being
false), the incoming workitem will then be merged with a copy of the
workitem that &#8216;applied&#8217; (activated) the listen expression.
</p>
<p>
Since Ruote 0.9.20, a &#8216;wfid&#8217; attribute is available. When set
to :current or &#8216;current&#8217;, it indicates that the listen is only
concerned with the current process instance. It&#8217;s handy for defining
intra process listens.
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">applied_workitem</td>
          <td class="readwrite">
            [<span id='applied_workitem-instance_method'>R</span><span id='applied_workitem=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
&#8216;listen&#8217; accepts a :merge attribute, when set to true, this
field will contain a copy of the workitem that activated the listen
activity.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">call_count</td>
          <td class="readwrite">
            [<span id='call_count-instance_method'>R</span><span id='call_count=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
how many messages were received (can more than 0 or 1 if &#8216;once&#8217;
is set to false).
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">once</td>
          <td class="readwrite">
            [<span id='once-instance_method'>R</span><span id='once=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
is set to true if the expression listen to 1! workitem and then replies to
its parent.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">participant_regex</td>
          <td class="readwrite">
            [<span id='participant_regex-instance_method'>R</span><span id='participant_regex=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
the channel on which this expression &#8216;listens&#8217;.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">upon</td>
          <td class="readwrite">
            [<span id='upon-instance_method'>R</span><span id='upon=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
can take :apply or :reply as a value, if not set (nil), will listen on both
&#8216;directions&#8217;.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="included">
  
  <div>
    <h2>Constants Included from <a title="OpenWFE::ConditionMixin" href="ListenExpression/ConditionMixin.html">OpenWFE::ConditionMixin</a></h2>
    <p><span class='name'><a title="SET_REGEX" href="ConditionMixin.html#SET_REGEX-constant">SET_REGEX</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <div class="inherited">
  
  <div>
    <h2>Public Class Methods Inherited from <a title="OpenWFE::FlowExpression" href="FlowExpression.html">OpenWFE::FlowExpression</a></h2>
    <p><span class='name'><a title="is_definition" href="FlowExpression.html#is_definition-class_method">is_definition</a></span>, <span class='name'><a title="is_definition?" href="FlowExpression.html#is_definition%3F-class_method">is_definition?</a></span>, <span class='name'><a title="names" href="FlowExpression.html#names-class_method">names</a></span>, <span class='name'><a title="new_exp" href="FlowExpression.html#new_exp-class_method">new_exp</a></span></p>
  </div>
  
  <div>
    <h2>Public Class Methods Inherited from <a title="OpenWFE::ObjectWithMeta" href="ObjectWithMeta.html">OpenWFE::ObjectWithMeta</a></h2>
    <p><span class='name'><a title="meta_def" href="ObjectWithMeta.html#meta_def-class_method">meta_def</a></span>, <span class='name'><a title="meta_eval" href="ObjectWithMeta.html#meta_eval-class_method">meta_eval</a></span>, <span class='name'><a title="metaclass" href="ObjectWithMeta.html#metaclass-class_method">metaclass</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#apply-instance_method">#apply</span><span class='args'>(workitem)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#call-instance_method">#call</span><span class='args'>(channel, *args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
This is the method called when a &#8216;listenable&#8217; workitem comes
in.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#cancel-instance_method">#cancel</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#reply_to_parent-instance_method">#reply_to_parent</span><span class='args'>(workitem)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#reschedule-instance_method">#reschedule</span><span class='args'>(scheduler)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Registers for timeout and start observing the participant activity.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#trigger-instance_method">#trigger</span><span class='args'>(params)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Only called in case of timeout.
</p>

        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h2>Public Instance Methods Inherited from <a title="OpenWFE::FlowExpression" href="FlowExpression.html">OpenWFE::FlowExpression</a></h2>
    <p><span class='name'><a title="apply_child" href="FlowExpression.html#apply_child-instance_method">apply_child</a></span>, <span class='name'><a title="clean_children" href="FlowExpression.html#clean_children-instance_method">clean_children</a></span>, <span class='name'><a title="delete_variable" href="FlowExpression.html#delete_variable-instance_method">delete_variable</a></span>, <span class='name'><a title="descendant_of?" href="FlowExpression.html#descendant_of%3F-instance_method">descendant_of?</a></span>, <span class='name'><a title="dup_environment" href="FlowExpression.html#dup_environment-instance_method">dup_environment</a></span>, <span class='name'><a title="fetch_environment" href="FlowExpression.html#fetch_environment-instance_method">fetch_environment</a></span>, <span class='name'><a title="fetch_text_content" href="FlowExpression.html#fetch_text_content-instance_method">fetch_text_content</a></span>, <span class='name'><a title="first_expression_child" href="FlowExpression.html#first_expression_child-instance_method">first_expression_child</a></span>, <span class='name'><a title="get_binding" href="FlowExpression.html#get_binding-instance_method">get_binding</a></span>, <span class='name'><a title="get_environment" href="FlowExpression.html#get_environment-instance_method">get_environment</a></span>, <span class='name'><a title="get_next_sub_id" href="FlowExpression.html#get_next_sub_id-instance_method">get_next_sub_id</a></span>, <span class='name'><a title="get_parent" href="FlowExpression.html#get_parent-instance_method">get_parent</a></span>, <span class='name'><a title="get_root_environment" href="FlowExpression.html#get_root_environment-instance_method">get_root_environment</a></span>, <span class='name'><a title="has_attribute" href="FlowExpression.html#has_attribute-instance_method">has_attribute</a></span>, <span class='name'><a title="has_no_expression_child" href="FlowExpression.html#has_no_expression_child-instance_method">has_no_expression_child</a></span>, <span class='name'><a title="lookup_array_attribute" href="FlowExpression.html#lookup_array_attribute-instance_method">lookup_array_attribute</a></span>, <span class='name'><a title="lookup_attribute" href="FlowExpression.html#lookup_attribute-instance_method">lookup_attribute</a></span>, <span class='name'><a title="lookup_attributes" href="FlowExpression.html#lookup_attributes-instance_method">lookup_attributes</a></span>, <span class='name'><a title="lookup_boolean_attribute" href="FlowExpression.html#lookup_boolean_attribute-instance_method">lookup_boolean_attribute</a></span>, <span class='name'><a title="lookup_downcase_attribute" href="FlowExpression.html#lookup_downcase_attribute-instance_method">lookup_downcase_attribute</a></span>, <span class='name'><a title="lookup_ref" href="FlowExpression.html#lookup_ref-instance_method">lookup_ref</a></span>, <span class='name'><a title="lookup_string_attribute" href="FlowExpression.html#lookup_string_attribute-instance_method">lookup_string_attribute</a></span>, <span class='name'><a title="lookup_sym_attribute" href="FlowExpression.html#lookup_sym_attribute-instance_method">lookup_sym_attribute</a></span>, <span class='name'><a title="lookup_value" href="FlowExpression.html#lookup_value-instance_method">lookup_value</a></span>, <span class='name'><a title="lookup_variable" href="FlowExpression.html#lookup_variable-instance_method">lookup_variable</a></span>, <span class='name'><a title="lookup_variable_stack" href="FlowExpression.html#lookup_variable_stack-instance_method">lookup_variable_stack</a></span>, <span class='name'><a title="lookup_vf_attribute" href="FlowExpression.html#lookup_vf_attribute-instance_method">lookup_vf_attribute</a></span>, <span class='name'><a title="marshal_dump" href="FlowExpression.html#marshal_dump-instance_method">marshal_dump</a></span>, <span class='name'><a title="marshal_load" href="FlowExpression.html#marshal_load-instance_method">marshal_load</a></span>, <span class='name'><a title="new_environment" href="FlowExpression.html#new_environment-instance_method">new_environment</a></span>, <span class='name'><a title="owns_its_environment?" href="FlowExpression.html#owns_its_environment%3F-instance_method">owns_its_environment?</a></span>, <span class='name'><a title="paused?" href="FlowExpression.html#paused%3F-instance_method">paused?</a></span>, <span class='name'><a title="raw_children" href="FlowExpression.html#raw_children-instance_method">raw_children</a></span>, <span class='name'><a title="raw_expression_children" href="FlowExpression.html#raw_expression_children-instance_method">raw_expression_children</a></span>, <span class='name'><a title="remove_child" href="FlowExpression.html#remove_child-instance_method">remove_child</a></span>, <span class='name'><a title="reply" href="FlowExpression.html#reply-instance_method">reply</a></span>, <span class='name'><a title="set_variable" href="FlowExpression.html#set_variable-instance_method">set_variable</a></span>, <span class='name'><a title="store_itself" href="FlowExpression.html#store_itself-instance_method">store_itself</a></span>, <span class='name'><a title="to_s" href="FlowExpression.html#to_s-instance_method">to_s</a></span>, <span class='name'><a title="to_yaml_properties" href="FlowExpression.html#to_yaml_properties-instance_method">to_yaml_properties</a></span>, <span class='name'><a title="trigger_on_cancel" href="FlowExpression.html#trigger_on_cancel-instance_method">trigger_on_cancel</a></span></p>
  </div>
  
  <div>
    <h2>Public Instance Methods Inherited from <a title="OpenWFE::ObjectWithMeta" href="ObjectWithMeta.html">OpenWFE::ObjectWithMeta</a></h2>
    <p><span class='name'><a title="class_def" href="ObjectWithMeta.html#class_def-instance_method">class_def</a></span></p>
  </div>
  
</div>
<div class="clear"></div><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a title="OpenWFE::TimeoutMixin" href="ListenExpression/TimeoutMixin.html">OpenWFE::TimeoutMixin</a></h2>
    <p><span class='name'><a title="determine_timeout" href="TimeoutMixin.html#determine_timeout-instance_method">determine_timeout</a></span>, <span class='name'><a title="remove_timedout_flag" href="TimeoutMixin.html#remove_timedout_flag-instance_method">remove_timedout_flag</a></span>, <span class='name'><a title="schedule_timeout" href="TimeoutMixin.html#schedule_timeout-instance_method">schedule_timeout</a></span>, <span class='name'><a title="set_timedout_flag" href="TimeoutMixin.html#set_timedout_flag-instance_method">set_timedout_flag</a></span></p>
  </div>
  
  <div>
    <h2>Public Instance Methods Included from <a title="OpenWFE::ConditionMixin" href="ListenExpression/ConditionMixin.html">OpenWFE::ConditionMixin</a></h2>
    <p><span class='name'><a title="determine_condition_attribute" href="ConditionMixin.html#determine_condition_attribute-instance_method">determine_condition_attribute</a></span>, <span class='name'><a title="eval_condition" href="ConditionMixin.html#eval_condition-instance_method">eval_condition</a></span></p>
  </div>
  
  <div>
    <h2>Public Instance Methods Included from <a title="OpenWFE::MergeMixin" href="ListenExpression/MergeMixin.html">OpenWFE::MergeMixin</a></h2>
    <p><span class='name'><a title="merge_workitems" href="MergeMixin.html#merge_workitems-instance_method">merge_workitems</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>apply</h3>
</div><div id="apply-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>apply</span><span class='args'>(workitem)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/openwfe/expressions/fe_listen.rb', line 155</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/ruote/blob/5348d68477c619f29e89032a1e3efae889f5722c/lib/openwfe/expressions/fe_listen.rb#L155">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='apply identifier id'>apply</span> <span class='lparen token'>(</span><span class='workitem identifier id'>workitem</span><span class='rparen token'>)</span>

  <span class='comment val'>#return reply_to_parent(workitem) if has_no_expression_child</span>
    <span class='comment val'># 'listen' blocks if there is no children</span>

  <span class='comment val'>#</span>
  <span class='comment val'># participant regex</span>

  <span class='@participant_regex ivar id'>@participant_regex</span> <span class='assign token'>=</span>
    <span class='lookup_string_attribute identifier id'>lookup_string_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:to</span><span class='comma token'>,</span> <span class='workitem identifier id'>workitem</span><span class='rparen token'>)</span> <span class='orop op'>||</span>
    <span class='lookup_string_attribute identifier id'>lookup_string_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:on</span><span class='comma token'>,</span> <span class='workitem identifier id'>workitem</span><span class='rparen token'>)</span>

  <span class='raise identifier id'>raise</span> <span class='string val'>&quot;attribute 'to' is missing for expression 'listen'&quot;</span> \
    <span class='unless unless_mod kw'>unless</span> <span class='@participant_regex ivar id'>@participant_regex</span>

  <span class='comment val'>#</span>
  <span class='comment val'># wfid</span>

  <span class='@wfid_regex ivar id'>@wfid_regex</span> <span class='assign token'>=</span>
    <span class='lookup_string_attribute identifier id'>lookup_string_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:wfid</span><span class='comma token'>,</span> <span class='workitem identifier id'>workitem</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span> <span class='eq op'>==</span> <span class='string val'>'current'</span>

  <span class='comment val'>#</span>
  <span class='comment val'># once</span>

  <span class='@once ivar id'>@once</span> <span class='assign token'>=</span>
    <span class='has_no_expression_child identifier id'>has_no_expression_child</span> <span class='orop op'>||</span>
    <span class='lookup_boolean_attribute identifier id'>lookup_boolean_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:once</span><span class='comma token'>,</span> <span class='workitem identifier id'>workitem</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>

  <span class='comment val'>#</span>
  <span class='comment val'># merge</span>

  <span class='merge identifier id'>merge</span> <span class='assign token'>=</span> <span class='lookup_boolean_attribute identifier id'>lookup_boolean_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:merge</span><span class='comma token'>,</span> <span class='workitem identifier id'>workitem</span><span class='comma token'>,</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>

  <span class='@applied_workitem ivar id'>@applied_workitem</span> <span class='assign token'>=</span> <span class='workitem identifier id'>workitem</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span> <span class='if if_mod kw'>if</span> <span class='merge identifier id'>merge</span>

  <span class='comment val'>#</span>
  <span class='comment val'># upon</span>

  <span class='@upon ivar id'>@upon</span> <span class='assign token'>=</span> <span class='lookup_sym_attribute identifier id'>lookup_sym_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:upon</span><span class='comma token'>,</span> <span class='workitem identifier id'>workitem</span><span class='comma token'>,</span> <span class='symbol val'>:default</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:apply</span><span class='rparen token'>)</span>
  <span class='@upon ivar id'>@upon</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='@upon ivar id'>@upon</span> <span class='eq op'>==</span> <span class='symbol val'>:reply</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='symbol val'>:reply</span> <span class='colon op'>:</span> <span class='symbol val'>:apply</span>

  <span class='@call_count ivar id'>@call_count</span> <span class='assign token'>=</span> <span class='integer val'>0</span>

  <span class='determine_timeout identifier id'>determine_timeout</span><span class='lparen token'>(</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span> <span class='comment val'># workitem set to nil, no stamp needed.</span>
  <span class='reschedule identifier id'>reschedule</span><span class='lparen token'>(</span><span class='get_scheduler identifier id'>get_scheduler</span><span class='rparen token'>)</span>

  <span class='store_itself identifier id'>store_itself</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>call</h3>
</div><div id="call-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>call</span><span class='args'>(channel, *args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
This is the method called when a &#8216;listenable&#8217; workitem comes in
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/openwfe/expressions/fe_listen.rb', line 229</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/ruote/blob/5348d68477c619f29e89032a1e3efae889f5722c/lib/openwfe/expressions/fe_listen.rb#L229">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='call identifier id'>call</span> <span class='lparen token'>(</span><span class='channel identifier id'>channel</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>

  <span class='upon identifier id'>upon</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>

  <span class='ldebug identifier id'>ldebug</span> <span class='lbrace token'>{</span> <span class='dstring node'>&quot;call() channel : '#{channel}' upon '#{upon}'&quot;</span> <span class='rbrace token'>}</span>

  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='upon identifier id'>upon</span> <span class='neq op'>!=</span> <span class='@upon ivar id'>@upon</span>

  <span class='workitem identifier id'>workitem</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>

  <span class='if if kw'>if</span> <span class='@wfid_regex ivar id'>@wfid_regex</span>

    <span class='wfid identifier id'>wfid</span> <span class='assign token'>=</span> <span class='workitem identifier id'>workitem</span><span class='dot token'>.</span><span class='fei identifier id'>fei</span><span class='dot token'>.</span><span class='wfid identifier id'>wfid</span><span class='lparen token'>(</span><span class='true true kw'>true</span><span class='rparen token'>)</span>

    <span class='if if kw'>if</span> <span class='@wfid_regex ivar id'>@wfid_regex</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>
      <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='wfid identifier id'>wfid</span> <span class='neq op'>!=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='fei identifier id'>fei</span><span class='dot token'>.</span><span class='wfid identifier id'>wfid</span><span class='lparen token'>(</span><span class='true true kw'>true</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='return return kw'>return</span> <span class='unless unless_mod kw'>unless</span> <span class='wfid identifier id'>wfid</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='@wfid_regex ivar id'>@wfid_regex</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='conditional identifier id'>conditional</span> <span class='assign token'>=</span> <span class='eval_condition identifier id'>eval_condition</span><span class='lparen token'>(</span><span class='symbol val'>:where</span><span class='comma token'>,</span> <span class='workitem identifier id'>workitem</span><span class='rparen token'>)</span>
    <span class='comment val'>#</span>
    <span class='comment val'># note that the values if the incoming workitem (not the</span>
    <span class='comment val'># workitem at apply time) are used for the evaluation</span>
    <span class='comment val'># of the condition (if necessary).</span>

  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='conditional identifier id'>conditional</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>

  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='@once ivar id'>@once</span> <span class='and and kw'>and</span> <span class='@call_count ivar id'>@call_count</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>

  <span class='comment val'>#</span>
  <span class='comment val'># workitem does match...</span>

  <span class='ldebug identifier id'>ldebug</span> <span class='do do kw'>do</span>
    <span class='string val'>&quot;call() &quot;</span><span class='plus op'>+</span>
    <span class='dstring node'>&quot;through for fei #{workitem.fei} / &quot;</span><span class='plus op'>+</span>
    <span class='dstring node'>&quot;'#{workitem.participant_name}'&quot;</span>
  <span class='end end kw'>end</span>

  <span class='@call_count ivar id'>@call_count</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>

  <span class='comment val'>#ldebug { &quot;call() @call_count is #{@call_count}&quot; }</span>

  <span class='comment val'>#</span>
  <span class='comment val'># eventual merge</span>

  <span class='workitem identifier id'>workitem</span> <span class='assign token'>=</span> <span class='merge_workitems identifier id'>merge_workitems</span><span class='lparen token'>(</span><span class='@applied_workitem ivar id'>@applied_workitem</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span><span class='comma token'>,</span> <span class='workitem identifier id'>workitem</span><span class='rparen token'>)</span> \
    <span class='if if_mod kw'>if</span> <span class='@applied_workitem ivar id'>@applied_workitem</span>

  <span class='comment val'>#</span>
  <span class='comment val'># reply or launch nested child expression</span>

  <span class='return return kw'>return</span> <span class='reply_to_parent identifier id'>reply_to_parent</span><span class='lparen token'>(</span><span class='workitem identifier id'>workitem</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='has_no_expression_child identifier id'>has_no_expression_child</span>
    <span class='comment val'># was just a &quot;blocking listen&quot;</span>

  <span class='get_expression_pool identifier id'>get_expression_pool</span><span class='dot token'>.</span><span class='tlaunch_child identifier id'>tlaunch_child</span><span class='lparen token'>(</span>
    <span class='self self kw'>self</span><span class='comma token'>,</span>
    <span class='raw_children identifier id'>raw_children</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='comma token'>,</span>
    <span class='@call_count ivar id'>@call_count</span> <span class='minus op'>-</span> <span class='integer val'>1</span><span class='comma token'>,</span>
    <span class='workitem identifier id'>workitem</span><span class='comma token'>,</span>
    <span class='symbol val'>:orphan</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='not not kw'>not</span> <span class='@once ivar id'>@once</span><span class='rparen token'>)</span><span class='comma token'>,</span>
    <span class='symbol val'>:register_child</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span> <span class='comment val'># (in case of cancel)</span>

  <span class='comment val'>#store_itself</span>
    <span class='comment val'># now done in tlaunch_child()</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>cancel</h3>
</div><div id="cancel-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cancel</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/openwfe/expressions/fe_listen.rb', line 204</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/ruote/blob/5348d68477c619f29e89032a1e3efae889f5722c/lib/openwfe/expressions/fe_listen.rb#L204">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">204
205
206
207
208</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='cancel identifier id'>cancel</span>

  <span class='stop_observing identifier id'>stop_observing</span>
  <span class='super super kw'>super</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reply_to_parent</h3>
</div><div id="reply_to_parent-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>reply_to_parent</span><span class='args'>(workitem)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/openwfe/expressions/fe_listen.rb', line 210</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/ruote/blob/5348d68477c619f29e89032a1e3efae889f5722c/lib/openwfe/expressions/fe_listen.rb#L210">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">210
211
212
213
214
215
216</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='reply_to_parent identifier id'>reply_to_parent</span> <span class='lparen token'>(</span><span class='workitem identifier id'>workitem</span><span class='rparen token'>)</span>

  <span class='ldebug identifier id'>ldebug</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;reply_to_parent() 'listen' done.&quot;</span> <span class='rbrace token'>}</span>

  <span class='stop_observing identifier id'>stop_observing</span>
  <span class='super super kw'>super</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reschedule</h3>
</div><div id="reschedule-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>reschedule</span><span class='args'>(scheduler)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Registers for timeout and start observing the participant activity.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/openwfe/expressions/fe_listen.rb', line 301</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/ruote/blob/5348d68477c619f29e89032a1e3efae889f5722c/lib/openwfe/expressions/fe_listen.rb#L301">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">301
302
303
304
305</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='reschedule identifier id'>reschedule</span> <span class='lparen token'>(</span><span class='scheduler identifier id'>scheduler</span><span class='rparen token'>)</span>

  <span class='to_reschedule identifier id'>to_reschedule</span><span class='lparen token'>(</span><span class='scheduler identifier id'>scheduler</span><span class='rparen token'>)</span>
  <span class='start_observing identifier id'>start_observing</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>trigger</h3>
</div><div id="trigger-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>trigger</span><span class='args'>(params)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Only called in case of timeout.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/openwfe/expressions/fe_listen.rb', line 221</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/jmettraux/ruote/blob/5348d68477c619f29e89032a1e3efae889f5722c/lib/openwfe/expressions/fe_listen.rb#L221">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">221
222
223
224</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='trigger identifier id'>trigger</span> <span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='rparen token'>)</span>

  <span class='reply_to_parent identifier id'>reply_to_parent</span><span class='lparen token'>(</span><span class='workitem identifier id'>workitem</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>