<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>michael's dm-core - Module: DataMapper::Model - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/michael/commits/dm-core/master" rel="alternate" title="Recent Commits to dm-core:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("michael", "dm-core", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("michael", "dm-core", "e1bd009dff9b6c1bfd91751e87b3989c1c7a1866", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/michael/dm-core/tree/">Source</a></li>
            <li class=""><a href="http://github.com/michael/dm-core/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/michael/dm-core/network">Network</a></li>            
            <li class=""><a href="http://github.com/michael/dm-core/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/michael/dm-core">Wiki</a></li>
            <li class=""><a href="http://github.com/michael/dm-core/graphs">Graphs</a></li>                    
            <li class="active"><a href="/michael/dm-core">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/michael">michael</a> / <b><a href="http://github.com/michael/dm-core/tree">dm-core</a></b>        
                <a id="namespaces_button" rel="michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module DataMapper_Model">
  <h1>Module: DataMapper::Model</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="Model/Chainable.html" title="DataMapper::Chainable">DataMapper::Chainable</a>, <a href="Model/Scope.html" title="DataMapper::Model::Scope">DataMapper::Model::Scope</a>, <a href="Model/Is.html" title="DataMapper::Model::Is">DataMapper::Model::Is</a></p>
</div><div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="Model/Chainable.html" title="DataMapper::Chainable">DataMapper::Chainable</a>, <a href="Model/Scope.html" title="DataMapper::Model::Scope">DataMapper::Model::Scope</a>, <a href="Model/Is.html" title="DataMapper::Model::Is">DataMapper::Model::Is</a></p>
</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#append_extensions-class_method">append_extensions</span><span class='args'>(*extensions)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Extends the model with this module after Resource has been included.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>TrueClass</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#append_inclusions-class_method">append_inclusions</span><span class='args'>(*inclusions)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Appends a module for inclusion into the model class after Resource.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>TrueClass</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#descendants-class_method">descendants</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Return all classes that extend the Model module.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Set</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#extended-class_method">extended</span><span class='args'>(model)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: document.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#extra_extensions-class_method">extra_extensions</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The current registered extra extensions.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Set</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#extra_inclusions-class_method">extra_inclusions</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The current registered extra inclusions.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Set</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Class Methods Included from <a href="Model/Chainable.html" title="DataMapper::Chainable">DataMapper::Chainable</a></h2>
    <p><span class='name'><a href="Chainable.html#chainable-instance_method" title="chainable">chainable</a></span>, <span class='name'><a href="Chainable.html#extendable-instance_method" title="extendable">extendable</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#all-instance_method">#all</span><span class='args'>(query = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Find a set of records matching an optional set of conditions.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="Collection.html" title="Collection">Collection</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#base_model-instance_method">#base_model</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: document.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#copy-instance_method">#copy</span><span class='args'>(source, destination, query = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Copy a set of records from one repository to another.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="Collection.html" title="Collection">Collection</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create-instance_method">#create</span><span class='args'>(attributes = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Create an instance of Resource with the given attributes.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="Resource.html" title="Resource">Resource</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#default_order-instance_method">#default_order</span><span class='args'>(repository_name = default_repository_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: document.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#default_repository_name-instance_method">#default_repository_name</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: document.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#first-instance_method">#first</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Performs a query just like #all, however, only return the first record
found, rather than a collection.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="Resource.html" title="Resource">Resource</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#first_or_create-instance_method">#first_or_create</span><span class='args'>(conditions = {}, attributes = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Finds the first Resource by conditions, or creates a new Resource with the
attributes if none found.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="Resource.html" title="Resource">Resource</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#first_or_new-instance_method">#first_or_new</span><span class='args'>(conditions = {}, attributes = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: add #last.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="Resource.html" title="Resource">Resource</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get-instance_method">#get</span><span class='args'>(*key)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Grab a single record by its key.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="Resource.html" title="Resource">Resource</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get-21-instance_method">#get!</span><span class='args'>(*key)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Grab a single record just like #get, but raise an ObjectNotFoundError if
the record doesn&#8217;t exist.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="Resource.html" title="Resource">Resource</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#load-instance_method">#load</span><span class='args'>(records, query)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Loads an instance of this Model, taking into account IdentityMap lookup,
inheritance columns(s) and Property typecasting.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="Resource.html" title="Resource">Resource</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#new-instance_method">#new</span><span class='args'>(attributes = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Initializes an instance of Resource with the given attributes.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="Resource.html" title="Resource">Resource</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#repositories-instance_method">#repositories</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Gets the current Set of repositories for which this Model has been defined
(beyond default).
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Set</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#repository-instance_method">#repository</span><span class='args'>(name = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the repository with a given name, or the default one for the current
context, or the default one for this class.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Object</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#repository_name-instance_method">#repository_name</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the current <tt>repository_name</tt> for this Model.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>String</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#resource_method_defined-3F-instance_method">#resource_method_defined?</span><span class='args'>(method)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: document.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#resource_methods-instance_method">#resource_methods</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: document.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#storage_name-instance_method">#storage_name</span><span class='args'>(repository_name = default_repository_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Gets the name of the storage receptacle for this resource in the given
Repository (ie.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>String</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#storage_names-instance_method">#storage_names</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
the names of the storage receptacles for this resource across all
repositories.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Hash(Symbol =&gt;String)</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="Model/Scope.html" title="DataMapper::Model::Scope">DataMapper::Model::Scope</a></h2>
    <p><span class='name'><a href="Model/Scope.html#default_scope-instance_method" title="default_scope">default_scope</a></span>, <span class='name'><a href="Model/Scope.html#query-instance_method" title="query">query</a></span></p>
  </div>
  
  <div>
    <h2>Public Instance Methods Included from <a href="Model/Is.html" title="DataMapper::Model::Is">DataMapper::Model::Is</a></h2>
    <p><span class='name'><a href="Model/Is.html#is-instance_method" title="is">is</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>append_extensions</h3>
</div><div id="append_extensions-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>TrueClass</tt></span>
    <span class='name'>append_extensions</span><span class='args'>(*extensions)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Extends the model with this module after Resource has been included.
</p>
<p>
This is a useful way to extend Model while still retaining a self.extended
method.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Module</tt>]</span>
        <span class='name'>extensions</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
List of modules that will extend the model after it is extended by Model
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>TrueClass</tt>, <tt>FalseClass</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
whether or not the inclusions have been successfully appended to the list
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 102</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L102">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">102
103
104
105</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='append_extensions identifier id'>append_extensions</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='extensions identifier id'>extensions</span><span class='rparen token'>)</span>
  <span class='extra_extensions identifier id'>extra_extensions</span><span class='dot token'>.</span><span class='concat identifier id'>concat</span> <span class='extensions identifier id'>extensions</span>
  <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>append_inclusions</h3>
</div><div id="append_inclusions-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>TrueClass</tt></span>
    <span class='name'>append_inclusions</span><span class='args'>(*inclusions)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Appends a module for inclusion into the model class after Resource.
</p>
<p>
This is a useful way to extend Resource while still retaining a
self.included method.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Module</tt>]</span>
        <span class='name'>inclusions</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the module that is to be appended to the module after Resource
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>TrueClass</tt>, <tt>FalseClass</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
true if the inclusions have been successfully appended to the list
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 75</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L75">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">75
76
77
78</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='append_inclusions identifier id'>append_inclusions</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='inclusions identifier id'>inclusions</span><span class='rparen token'>)</span>
  <span class='extra_inclusions identifier id'>extra_inclusions</span><span class='dot token'>.</span><span class='concat identifier id'>concat</span> <span class='inclusions identifier id'>inclusions</span>
  <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>descendants</h3>
</div><div id="descendants-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Set</tt></span>
    <span class='name'>descendants</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Return all classes that extend the Model module
</p>
<pre class="code">
  <span class='Class constant id'>Class</span> <span class='Foo constant id'>Foo</span>
    <span class='include identifier id'>include</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span>
  <span class='end end kw'>end</span>

  <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Model constant id'>Model</span><span class='dot token'>.</span><span class='descendants identifier id'>descendants</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='first identifier id'>first</span>   <span class='comment val'>#=&gt; Foo</span>
</pre>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Set</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
Set containing the including classes
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 58</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L58">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">58
59
60</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='descendants identifier id'>descendants</span>
  <span class='@descendants ivar id'>@descendants</span> <span class='opasgn op'>||=</span> <span class='Set constant id'>Set</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>extended</h3>
</div><div id="extended-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>extended</span><span class='args'>(model)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: document
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 119</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L119">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='extended identifier id'>extended</span><span class='lparen token'>(</span><span class='model identifier id'>model</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='Model constant id'>Model</span><span class='dot token'>.</span><span class='descendants identifier id'>descendants</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='model identifier id'>model</span><span class='rparen token'>)</span>

  <span class='unless unless kw'>unless</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='ancestors identifier id'>ancestors</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='Resource constant id'>Resource</span><span class='rparen token'>)</span>
    <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:include</span><span class='comma token'>,</span> <span class='Resource constant id'>Resource</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='Model constant id'>Model</span><span class='dot token'>.</span><span class='descendants identifier id'>descendants</span> <span class='lshft op'>&lt;&lt;</span> <span class='model identifier id'>model</span>

  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@valid</span><span class='comma token'>,</span>         <span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@storage_names</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='extra_extensions identifier id'>extra_extensions</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='mod identifier id'>mod</span><span class='bitor op'>|</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extend identifier id'>extend</span><span class='lparen token'>(</span><span class='mod identifier id'>mod</span><span class='rparen token'>)</span>         <span class='rbrace token'>}</span>
  <span class='extra_inclusions identifier id'>extra_inclusions</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='mod identifier id'>mod</span><span class='bitor op'>|</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:include</span><span class='comma token'>,</span> <span class='mod identifier id'>mod</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>extra_extensions</h3>
</div><div id="extra_extensions-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Set</tt></span>
    <span class='name'>extra_extensions</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The current registered extra extensions
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Set</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 113</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L113">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">113
114
115</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='extra_extensions identifier id'>extra_extensions</span>
  <span class='@extra_extensions ivar id'>@extra_extensions</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>extra_inclusions</h3>
</div><div id="extra_inclusions-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Set</tt></span>
    <span class='name'>extra_inclusions</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The current registered extra inclusions
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Set</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 86</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L86">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">86
87
88</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='extra_inclusions identifier id'>extra_inclusions</span>
  <span class='@extra_inclusions ivar id'>@extra_inclusions</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>all</h3>
</div><div id="all-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="Collection.html" title="Collection">Collection</a></tt></span>
    <span class='name'>all</span><span class='args'>(query = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Find a set of records matching an optional set of conditions. Additionally,
specify the order that the records are return.
</p>
<pre class="code">
  <span class='Zoo constant id'>Zoo</span><span class='dot token'>.</span><span class='all identifier id'>all</span>                         <span class='comment val'># all zoos</span>
  <span class='Zoo constant id'>Zoo</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='symbol val'>:open</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>          <span class='comment val'># all zoos that are open</span>
  <span class='Zoo constant id'>Zoo</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='symbol val'>:opened_on</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='dot2 op'>..</span><span class='e identifier id'>e</span><span class='rparen token'>)</span><span class='rparen token'>)</span>   <span class='comment val'># all zoos that opened on a date in the date-range</span>
  <span class='Zoo constant id'>Zoo</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='symbol val'>:order</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='symbol val'>:tiger_count</span><span class='dot token'>.</span><span class='desc identifier id'>desc</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>  <span class='comment val'># Ordered by tiger_count</span>
</pre>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Hash</tt>]</span>
        <span class='name'>query</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
A hash describing the conditions and order for the query
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Collection.html" title="Collection">Collection</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
A set of records found matching the conditions in <tt>query</tt>
</p>
</span>
    </dd>
  
  </dl>
</div>
<div class="see">
  <h3>See Also:</h3>
  <dl>
    <dt></dt>
    <dd>
      <span class='desc'>
        <tt><a href="Collection.html" title="Collection">Collection</a></tt>
      </span>
    </dd>
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 234</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L234">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">234
235
236
237
238
239
240
241
242</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span><span class='rparen token'>)</span>
    <span class='comment val'># TODO: after adding Enumerable methods to Model, try to return self here</span>
    <span class='comment val'># TODO: try to simplify self.query to return the default scope instead of nil</span>
    <span class='new_collection identifier id'>new_collection</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='query identifier id'>query</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='new_collection identifier id'>new_collection</span><span class='lparen token'>(</span><span class='scoped_query identifier id'>scoped_query</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>base_model</h3>
</div><div id="base_model-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>base_model</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: document
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 451</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L451">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">451
452
453</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='base_model identifier id'>base_model</span>
  <span class='@base_model ivar id'>@base_model</span> <span class='opasgn op'>||=</span> <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>copy</h3>
</div><div id="copy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="Collection.html" title="Collection">Collection</a></tt></span>
    <span class='name'>copy</span><span class='args'>(source, destination, query = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Copy a set of records from one repository to another.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>String</tt>]</span>
        <span class='name'>source</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The name of the Repository the resources should be copied <em>from</em>
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>String</tt>]</span>
        <span class='name'>destination</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The name of the Repository the resources should be copied <em>to</em>
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>Hash</tt>]</span>
        <span class='name'>query</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The conditions with which to find the records to copy. These conditions are
merged with Model.query
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Collection.html" title="Collection">Collection</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
A Collection of the Resource instances created in the operation
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 353</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L353">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">353
354
355
356
357
358
359
360
361
362
363
364</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='copy identifier id'>copy</span><span class='lparen token'>(</span><span class='source identifier id'>source</span><span class='comma token'>,</span> <span class='destination identifier id'>destination</span><span class='comma token'>,</span> <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='comment val'># get the list of properties that exist in the source and destination</span>
  <span class='destination_properties identifier id'>destination_properties</span> <span class='assign token'>=</span> <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='destination identifier id'>destination</span><span class='rparen token'>)</span>
  <span class='fields identifier id'>fields</span> <span class='assign token'>=</span> <span class='query identifier id'>query</span><span class='lbrack token'>[</span><span class='symbol val'>:fields</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='source identifier id'>source</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='p identifier id'>p</span><span class='bitor op'>|</span> <span class='destination_properties identifier id'>destination_properties</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='p identifier id'>p</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

  <span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='destination identifier id'>destination</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:repository</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='source identifier id'>source</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='resource identifier id'>resource</span><span class='bitor op'>|</span>
      <span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='fields identifier id'>fields</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='p identifier id'>p</span><span class='bitor op'>|</span> <span class='lbrack token'>[</span> <span class='p identifier id'>p</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='p identifier id'>p</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='rparen token'>)</span> <span class='rbrack token'>]</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='to_hash identifier id'>to_hash</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create</h3>
</div><div id="create-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="Resource.html" title="Resource">Resource</a></tt></span>
    <span class='name'>create</span><span class='args'>(attributes = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Create an instance of Resource with the given attributes
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Hash(Symbol =&gt;Object)</tt>]</span>
        <span class='name'>attributes</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
hash of attributes to set
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Resource.html" title="Resource">Resource</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
the newly created (and saved) Resource instance
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 332</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L332">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">332
333
334
335
336</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
  <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
  <span class='resource identifier id'>resource</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>default_order</h3>
</div><div id="default_order-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>default_order</span><span class='args'>(repository_name = default_repository_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: document
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 463</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L463">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">463
464
465
466</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='default_order identifier id'>default_order</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='default_repository_name identifier id'>default_repository_name</span><span class='rparen token'>)</span>
  <span class='@default_order ivar id'>@default_order</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='@default_order ivar id'>@default_order</span><span class='lbrack token'>[</span><span class='repository_name identifier id'>repository_name</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='key identifier id'>key</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span> <span class='Query constant id'>Query</span><span class='colon2 op'>::</span><span class='Direction constant id'>Direction</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>default_repository_name</h3>
</div><div id="default_repository_name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>default_repository_name</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: document
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 457</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L457">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">457
458
459</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='default_repository_name identifier id'>default_repository_name</span>
  <span class='Repository constant id'>Repository</span><span class='dot token'>.</span><span class='default_name identifier id'>default_name</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>first</h3>
</div><div id="first-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="Resource.html" title="Resource">Resource</a></tt></span>
    <span class='name'>first</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Performs a query just like #all, however, only return the first record
found, rather than a collection
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Resource.html" title="Resource">Resource</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
The first record found by the query
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 254</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L254">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">254
255
256
257
258
259
260
261
262</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='scoped_query identifier id'>scoped_query</span><span class='lparen token'>(</span><span class='args identifier id'>args</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:merge</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span> <span class='colon op'>:</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='if if kw'>if</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='any? fid id'>any?</span>
    <span class='new_collection identifier id'>new_collection</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='dot token'>.</span><span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='symbol val'>:limit</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>first_or_create</h3>
</div><div id="first_or_create-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="Resource.html" title="Resource">Resource</a></tt></span>
    <span class='name'>first_or_create</span><span class='args'>(conditions = {}, attributes = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Finds the first Resource by conditions, or creates a new Resource with the
attributes if none found
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Hash</tt>]</span>
        <span class='name'>conditions</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The conditions to be used to search
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>Hash</tt>]</span>
        <span class='name'>attributes</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The attributes to be used to create the record of none is found.
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Resource.html" title="Resource">Resource</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
The instance found by <tt>query</tt>, or created with <tt>attributes</tt>
if none found
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 294</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L294">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">294
295
296</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='first_or_create identifier id'>first_or_create</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>first_or_new</h3>
</div><div id="first_or_new-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="Resource.html" title="Resource">Resource</a></tt></span>
    <span class='name'>first_or_new</span><span class='args'>(conditions = {}, attributes = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: add #last
</p>
<p>
Finds the first Resource by conditions, or initializes a new Resource with
the attributes if none found
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Hash</tt>]</span>
        <span class='name'>conditions</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The conditions to be used to search
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>Hash</tt>]</span>
        <span class='name'>attributes</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The attributes to be used to create the record of none is found.
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Resource.html" title="Resource">Resource</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
The instance found by <tt>query</tt>, or created with <tt>attributes</tt>
if none found
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 278</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L278">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">278
279
280</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='first_or_new identifier id'>first_or_new</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get</h3>
</div><div id="get-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="Resource.html" title="Resource">Resource</a></tt></span>
    <span class='name'>get</span><span class='args'>(*key)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Grab a single record by its key. Supports natural and composite key lookups
as well.
</p>
<pre class="code">
  <span class='Zoo constant id'>Zoo</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='integer val'>1</span><span class='rparen token'>)</span>                <span class='comment val'># get the zoo with primary key of 1.</span>
  <span class='Zoo constant id'>Zoo</span><span class='dot token'>.</span><span class='get! fid id'>get!</span><span class='lparen token'>(</span><span class='integer val'>1</span><span class='rparen token'>)</span>               <span class='comment val'># Or get! if you want an ObjectNotFoundError on failure</span>
  <span class='Zoo constant id'>Zoo</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='string val'>'DFW'</span><span class='rparen token'>)</span>            <span class='comment val'># wow, support for natural primary keys</span>
  <span class='Zoo constant id'>Zoo</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='string val'>'Metro'</span><span class='comma token'>,</span> <span class='string val'>'DFW'</span><span class='rparen token'>)</span>   <span class='comment val'># more wow, composite key look-up</span>
</pre>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Object</tt>]</span>
        <span class='name'>*key</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The primary key or keys to use for lookup
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Resource.html" title="Resource">Resource</a></tt>, <tt>NilClass</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
A single model that was found If no instance was found matching
<tt>key</tt>
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 195</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L195">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">195
196
197
198
199
200</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='repository identifier id'>repository</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span>
  <span class='key identifier id'>key</span>        <span class='assign token'>=</span> <span class='typecast_key identifier id'>typecast_key</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>

  <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='identity_map identifier id'>identity_map</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='key_conditions identifier id'>key_conditions</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get!</h3>
</div><div id="get-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="Resource.html" title="Resource">Resource</a></tt></span>
    <span class='name'>get!</span><span class='args'>(*key)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Grab a single record just like #get, but raise an ObjectNotFoundError if
the record doesn&#8217;t exist.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Object</tt>]</span>
        <span class='name'>*key</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The primary key or keys to use for lookup
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Resource.html" title="Resource">Resource</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
A single model that was found
</p>
</span>
    </dd>
  
  </dl>
</div>
<div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="ObjectNotFoundError.html" title="ObjectNotFoundError">ObjectNotFoundError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'><p>
The record was not found
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 214</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L214">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">214
215
216</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='get! fid id'>get!</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='key identifier id'>key</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='ObjectNotFoundError constant id'>ObjectNotFoundError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Could not find #{self.name} with key #{key.inspect}&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>load</h3>
</div><div id="load-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="Resource.html" title="Resource">Resource</a></tt></span>
    <span class='name'>load</span><span class='args'>(records, query)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Loads an instance of this Model, taking into account IdentityMap lookup,
inheritance columns(s) and Property typecasting.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Enumerable(Object)</tt>]</span>
        <span class='name'>records</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
an Array of Resource or Hashes to load a Resource with
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Resource.html" title="Resource">Resource</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
the loaded Resource instance
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 377</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L377">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='load identifier id'>load</span><span class='lparen token'>(</span><span class='records identifier id'>records</span><span class='comma token'>,</span> <span class='query identifier id'>query</span><span class='rparen token'>)</span>
  <span class='repository identifier id'>repository</span>    <span class='assign token'>=</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span>
  <span class='fields identifier id'>fields</span>        <span class='assign token'>=</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='fields identifier id'>fields</span>
  <span class='discriminator identifier id'>discriminator</span> <span class='assign token'>=</span> <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='discriminator identifier id'>discriminator</span>
  <span class='no_reload identifier id'>no_reload</span>     <span class='assign token'>=</span> <span class='notop op'>!</span><span class='query identifier id'>query</span><span class='dot token'>.</span><span class='reload? fid id'>reload?</span>

  <span class='field_map identifier id'>field_map</span> <span class='assign token'>=</span> <span class='fields identifier id'>fields</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='p identifier id'>p</span><span class='bitor op'>|</span> <span class='lbrack token'>[</span> <span class='p identifier id'>p</span><span class='comma token'>,</span> <span class='p identifier id'>p</span><span class='dot token'>.</span><span class='field identifier id'>field</span> <span class='rbrack token'>]</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='to_hash identifier id'>to_hash</span>

  <span class='records identifier id'>records</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='record identifier id'>record</span><span class='bitor op'>|</span>
    <span class='identity_map identifier id'>identity_map</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
    <span class='key_values identifier id'>key_values</span>   <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
    <span class='resource identifier id'>resource</span>     <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>

    <span class='case case kw'>case</span> <span class='record identifier id'>record</span>
      <span class='when when kw'>when</span> <span class='Hash constant id'>Hash</span>
        <span class='comment val'># remap fields to use the Property object</span>
        <span class='record identifier id'>record</span> <span class='assign token'>=</span> <span class='record identifier id'>record</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
        <span class='field_map identifier id'>field_map</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='p identifier id'>p</span><span class='comma token'>,</span> <span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='record identifier id'>record</span><span class='lbrack token'>[</span><span class='p identifier id'>p</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='record identifier id'>record</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='record identifier id'>record</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

        <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='discriminator identifier id'>discriminator</span> <span class='andop op'>&amp;&amp;</span> <span class='record identifier id'>record</span><span class='lbrack token'>[</span><span class='discriminator identifier id'>discriminator</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='self self kw'>self</span>

        <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='key_values identifier id'>key_values</span> <span class='assign token'>=</span> <span class='record identifier id'>record</span><span class='dot token'>.</span><span class='values_at identifier id'>values_at</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='key identifier id'>key</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='all? fid id'>all?</span>
          <span class='identity_map identifier id'>identity_map</span> <span class='assign token'>=</span> <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='identity_map identifier id'>identity_map</span><span class='lparen token'>(</span><span class='model identifier id'>model</span><span class='rparen token'>)</span>
          <span class='identity_map identifier id'>identity_map</span><span class='lbrack token'>[</span><span class='key_values identifier id'>key_values</span><span class='rbrack token'>]</span>
        <span class='end end kw'>end</span>

        <span class='resource identifier id'>resource</span> <span class='opasgn op'>||=</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='allocate identifier id'>allocate</span>

        <span class='fields identifier id'>fields</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span>
          <span class='next next kw'>next</span> <span class='if if_mod kw'>if</span> <span class='no_reload identifier id'>no_reload</span> <span class='andop op'>&amp;&amp;</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='loaded? fid id'>loaded?</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='rparen token'>)</span>

          <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='record identifier id'>record</span><span class='lbrack token'>[</span><span class='property identifier id'>property</span><span class='rbrack token'>]</span>

          <span class='if if kw'>if</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='custom? fid id'>custom?</span>
            <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='dot token'>.</span><span class='load identifier id'>load</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='comma token'>,</span> <span class='property identifier id'>property</span><span class='rparen token'>)</span>
          <span class='end end kw'>end</span>

          <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='set! fid id'>set!</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>

      <span class='when when kw'>when</span> <span class='Resource constant id'>Resource</span>
        <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='record identifier id'>record</span><span class='dot token'>.</span><span class='model identifier id'>model</span>

        <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='key_values identifier id'>key_values</span> <span class='assign token'>=</span> <span class='record identifier id'>record</span><span class='dot token'>.</span><span class='key identifier id'>key</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='all? fid id'>all?</span>
          <span class='identity_map identifier id'>identity_map</span> <span class='assign token'>=</span> <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='identity_map identifier id'>identity_map</span><span class='lparen token'>(</span><span class='model identifier id'>model</span><span class='rparen token'>)</span>
          <span class='identity_map identifier id'>identity_map</span><span class='lbrack token'>[</span><span class='key_values identifier id'>key_values</span><span class='rbrack token'>]</span>
        <span class='end end kw'>end</span>

        <span class='resource identifier id'>resource</span> <span class='opasgn op'>||=</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='allocate identifier id'>allocate</span>

        <span class='fields identifier id'>fields</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span>
          <span class='next next kw'>next</span> <span class='if if_mod kw'>if</span> <span class='no_reload identifier id'>no_reload</span> <span class='andop op'>&amp;&amp;</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='loaded? fid id'>loaded?</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='rparen token'>)</span>

          <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='set! fid id'>set!</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='comma token'>,</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='get! fid id'>get!</span><span class='lparen token'>(</span><span class='record identifier id'>record</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@repository</span><span class='comma token'>,</span> <span class='repository identifier id'>repository</span><span class='rparen token'>)</span>
    <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@saved</span><span class='comma token'>,</span>      <span class='true true kw'>true</span><span class='rparen token'>)</span>

    <span class='if if kw'>if</span> <span class='identity_map identifier id'>identity_map</span>
      <span class='comment val'># defer setting the IdentityMap so second level caches can</span>
      <span class='comment val'># record the state of the resource after loaded</span>
      <span class='identity_map identifier id'>identity_map</span><span class='lbrack token'>[</span><span class='key_values identifier id'>key_values</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='resource identifier id'>resource</span>
    <span class='else else kw'>else</span>
      <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='freeze identifier id'>freeze</span>
    <span class='end end kw'>end</span>

    <span class='resource identifier id'>resource</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>new</h3>
</div><div id="new-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="Resource.html" title="Resource">Resource</a></tt></span>
    <span class='name'>new</span><span class='args'>(attributes = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Initializes an instance of Resource with the given attributes
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Hash(Symbol =&gt;Object)</tt>]</span>
        <span class='name'>attributes</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
hash of attributes to set
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="Resource.html" title="Resource">Resource</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
the newly initialized Resource instance
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 308</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L308">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">308
309
310
311
312
313
314
315
316
317
318
319
320</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='assert_valid identifier id'>assert_valid</span>

  <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='if if kw'>if</span> <span class='discriminator identifier id'>discriminator</span> <span class='assign token'>=</span> <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='discriminator identifier id'>discriminator</span>
    <span class='attributes identifier id'>attributes</span><span class='lbrack token'>[</span><span class='discriminator identifier id'>discriminator</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>

  <span class='model identifier id'>model</span> <span class='opasgn op'>||=</span> <span class='self self kw'>self</span>

  <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='allocate identifier id'>allocate</span>
  <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:initialize</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
  <span class='resource identifier id'>resource</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>repositories</h3>
</div><div id="repositories-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Set</tt></span>
    <span class='name'>repositories</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Gets the current Set of repositories for which this Model has been defined
(beyond default)
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Set</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
The Set of repositories for which this Model has been defined (beyond
default)
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 516</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L516">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">516
517
518</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='repositories identifier id'>repositories</span>
  <span class='lbrack token'>[</span> <span class='repository identifier id'>repository</span> <span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_set identifier id'>to_set</span> <span class='plus op'>+</span> <span class='@properties ivar id'>@properties</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span> <span class='DataMapper constant id'>DataMapper</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>repository</h3>
</div><div id="repository-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Object</tt></span>
    <span class='name'>repository</span><span class='args'>(name = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the repository with a given name, or the default one for the current
context, or the default one for this class.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a href="../Symbol.html" title="Symbol">Symbol</a></tt>]</span>
        <span class='name'>name</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name of the repository wanted
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Object</tt>, <tt>Respository</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
whatever the block returns, if given a block, otherwise the requested
repository.
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 482</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L482">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">482
483
484
485
486
487
488
489
490
491
492
493</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='comment val'>#</span>
  <span class='comment val'># There has been a couple of different strategies here, but me (zond) and dkubb are at least</span>
  <span class='comment val'># united in the concept of explicitness over implicitness. That is - the explicit wish of the</span>
  <span class='comment val'># caller (+name+) should be given more priority than the implicit wish of the caller (Repository.context.last).</span>
  <span class='comment val'>#</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='DataMapper constant id'>DataMapper</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='name identifier id'>name</span> <span class='orop op'>||</span> <span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='mult op'>*</span><span class='block_args identifier id'>block_args</span><span class='bitor op'>|</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='block_args identifier id'>block_args</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='else else kw'>else</span>
    <span class='DataMapper constant id'>DataMapper</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='name identifier id'>name</span> <span class='orop op'>||</span> <span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>repository_name</h3>
</div><div id="repository_name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>String</tt></span>
    <span class='name'>repository_name</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the current <tt>repository_name</tt> for this Model.
</p>
<p>
If there are any Repository contexts, the name of the last one will be
returned, else the <tt>default_repository_name</tt> of this model will be
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>String</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
the current repository name to use for this Model
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 504</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L504">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">504
505
506</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='repository_name identifier id'>repository_name</span>
  <span class='Repository constant id'>Repository</span><span class='dot token'>.</span><span class='context identifier id'>context</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='integer val'>? </span><span class='Repository constant id'>Repository</span><span class='dot token'>.</span><span class='context identifier id'>context</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='colon op'>:</span> <span class='default_repository_name identifier id'>default_repository_name</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>resource_method_defined?</h3>
</div><div id="resource_method_defined-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>resource_method_defined?</span><span class='args'>(method)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: document
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 535</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L535">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">535
536
537</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='resource_method_defined? fid id'>resource_method_defined?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
  <span class='resource_methods identifier id'>resource_methods</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>resource_methods</h3>
</div><div id="resource_methods-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>resource_methods</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: document
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 522</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L522">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">522
523
524
525
526
527
528
529
530
531</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='resource_methods identifier id'>resource_methods</span>
  <span class='resource_methods identifier id'>resource_methods</span> <span class='assign token'>=</span> <span class='Set constant id'>Set</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

  <span class='ancestors identifier id'>ancestors</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='mod identifier id'>mod</span><span class='bitor op'>|</span>
    <span class='next next kw'>next</span> <span class='unless unless_mod kw'>unless</span> <span class='mod identifier id'>mod</span> <span class='leq op'>&lt;=</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span>
    <span class='resource_methods identifier id'>resource_methods</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='mod identifier id'>mod</span><span class='dot token'>.</span><span class='instance_methods identifier id'>instance_methods</span><span class='lparen token'>(</span><span class='false false kw'>false</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='method identifier id'>method</span><span class='bitor op'>|</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='resource_methods identifier id'>resource_methods</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>storage_name</h3>
</div><div id="storage_name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>String</tt></span>
    <span class='name'>storage_name</span><span class='args'>(repository_name = default_repository_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Gets the name of the storage receptacle for this resource in the given
Repository (ie., table name, for database stores).
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>String</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
the storage name (ie., table name, for database stores) associated with
this resource in the given repository
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 163</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L163">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">163
164
165</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='storage_name identifier id'>storage_name</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='default_repository_name identifier id'>default_repository_name</span><span class='rparen token'>)</span>
  <span class='@storage_names ivar id'>@storage_names</span><span class='lbrack token'>[</span><span class='repository_name identifier id'>repository_name</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='adapter identifier id'>adapter</span><span class='dot token'>.</span><span class='resource_naming_convention identifier id'>resource_naming_convention</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='base_model identifier id'>base_model</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:default_storage_name</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='freeze identifier id'>freeze</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>storage_names</h3>
</div><div id="storage_names-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Hash(Symbol =&gt;String)</tt></span>
    <span class='name'>storage_names</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
the names of the storage receptacles for this resource across all
repositories
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Hash(Symbol =&gt;String)</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
All available names of storage recepticles
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 174</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/model.rb#L174">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">174
175
176</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='storage_names identifier id'>storage_names</span>
  <span class='@storage_names ivar id'>@storage_names</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>