<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>michael's dm-core - Class: DataMapper::Query - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/michael/commits/dm-core/master" rel="alternate" title="Recent Commits to dm-core:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("michael", "dm-core", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("michael", "dm-core", "e1bd009dff9b6c1bfd91751e87b3989c1c7a1866", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/michael/dm-core/tree/">Source</a></li>
            <li class=""><a href="http://github.com/michael/dm-core/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/michael/dm-core/network">Network</a></li>            
            <li class=""><a href="http://github.com/michael/dm-core/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/michael/dm-core">Wiki</a></li>
            <li class=""><a href="http://github.com/michael/dm-core/graphs">Graphs</a></li>                    
            <li class="active"><a href="/michael/dm-core">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/michael">michael</a> / <b><a href="http://github.com/michael/dm-core/tree">dm-core</a></b>        
                <a id="namespaces_button" rel="michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class DataMapper_Query">
  <h1>Class: DataMapper::Query</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p>Extlib::Assertions</p>
</div><div class="section docstring">
  <p>
Query class represents a query which will be run against the data-store.
Generally Query objects can be found inside Collection objects.
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">conditions</td>
          <td class="readwrite">
            [<span id='conditions-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the conditions of the query.
</p>

            
              <p class='returns'>
                Returns: 
                  <span class='return_types'>
                     <tt>Array</tt>
                  </span>
              </p>
            
          </td>
        </tr>
      
        <tr>
          <th class="name">fields</td>
          <td class="readwrite">
            [<span id='fields-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the fields.
</p>

            
              <p class='returns'>
                Returns: 
                  <span class='return_types'>
                     <tt><a href="PropertySet.html" title="PropertySet">PropertySet</a></tt>
                  </span>
              </p>
            
          </td>
        </tr>
      
        <tr>
          <th class="name">limit</td>
          <td class="readwrite">
            [<span id='limit-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the limit query uses.
</p>

            
              <p class='returns'>
                Returns: 
                  <span class='return_types'>
                     <tt>Integer</tt>
                  </span>
              </p>
            
          </td>
        </tr>
      
        <tr>
          <th class="name">links</td>
          <td class="readwrite">
            [<span id='links-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the links (associations) query fetches.
</p>

            
              <p class='returns'>
                Returns: 
                  <span class='return_types'>
                     <tt>Array&lt;<a href="Associations/Relationship.html" title="DataMapper::Associations::Relationship">DataMapper::Associations::Relationship</a>></tt>
                  </span>
              </p>
            
          </td>
        </tr>
      
        <tr>
          <th class="name">model</td>
          <td class="readwrite">
            [<span id='model-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns model (class) that is used to instantiate objects from query result
returned by adapter.
</p>

            
              <p class='returns'>
                Returns: 
                  <span class='return_types'>
                     <tt><a href="Model.html" title="Model">Model</a></tt>
                  </span>
              </p>
            
          </td>
        </tr>
      
        <tr>
          <th class="name">offset</td>
          <td class="readwrite">
            [<span id='offset-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the offset query uses.
</p>

            
              <p class='returns'>
                Returns: 
                  <span class='return_types'>
                     <tt>Integer</tt>
                  </span>
              </p>
            
          </td>
        </tr>
      
        <tr>
          <th class="name">options</td>
          <td class="readwrite">
            [<span id='options-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the original options.
</p>

            
              <p class='returns'>
                Returns: 
                  <span class='return_types'>
                     <tt>Hash</tt>
                  </span>
              </p>
            
          </td>
        </tr>
      
        <tr>
          <th class="name">order</td>
          <td class="readwrite">
            [<span id='order-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the order.
</p>

            
              <p class='returns'>
                Returns: 
                  <span class='return_types'>
                     <tt>Array</tt>
                  </span>
              </p>
            
          </td>
        </tr>
      
        <tr>
          <th class="name">repository</td>
          <td class="readwrite">
            [<span id='repository-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the repository query should be executed in.
</p>

            
              <p class='returns'>
                Returns: 
                  <span class='return_types'>
                     <tt><a href="Repository.html" title="Repository">Repository</a></tt>
                  </span>
              </p>
            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="OPTIONS-constant">OPTIONS</dt>
      <dd>[ :fields, :links, :conditions, :offset, :limit, :order, :unique, :add_reversed, :reload ].to_set.freeze</dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>private</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(repository, model, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Initializes a Query instance
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a href="Repository.html" title="Repository">Repository</a></tt>]</span>
        <span class='name'>repository</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the Repository to retrieve results from
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt><a href="Model.html" title="Model">Model</a></tt>]</span>
        <span class='name'>model</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the Model to retrieve results from
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>Hash</tt>]</span>
        <span class='name'>options</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the conditions and scope
</p>
</span>
      </dd>
    
  
  </dl>
</div>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 588</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L588">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='assert_kind_of identifier id'>assert_kind_of</span> <span class='string val'>'repository'</span><span class='comma token'>,</span> <span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='Repository constant id'>Repository</span>
  <span class='assert_kind_of identifier id'>assert_kind_of</span> <span class='string val'>'model'</span><span class='comma token'>,</span>      <span class='model identifier id'>model</span><span class='comma token'>,</span>      <span class='Model constant id'>Model</span>

  <span class='@repository ivar id'>@repository</span> <span class='assign token'>=</span> <span class='repository identifier id'>repository</span>
  <span class='@model ivar id'>@model</span>      <span class='assign token'>=</span> <span class='model identifier id'>model</span>
  <span class='@options ivar id'>@options</span>    <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='freeze identifier id'>freeze</span>

  <span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='name identifier id'>name</span>

  <span class='@properties ivar id'>@properties</span>    <span class='assign token'>=</span> <span class='@model ivar id'>@model</span><span class='dot token'>.</span><span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span>
  <span class='@relationships ivar id'>@relationships</span> <span class='assign token'>=</span> <span class='@model ivar id'>@model</span><span class='dot token'>.</span><span class='relationships identifier id'>relationships</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span>

  <span class='assert_valid_options identifier id'>assert_valid_options</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='rparen token'>)</span>

  <span class='@fields ivar id'>@fields</span>       <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span> <span class='symbol val'>:fields</span><span class='comma token'>,</span>       <span class='@properties ivar id'>@properties</span><span class='dot token'>.</span><span class='defaults identifier id'>defaults</span>
  <span class='@links ivar id'>@links</span>        <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span> <span class='symbol val'>:links</span><span class='comma token'>,</span>        <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@conditions ivar id'>@conditions</span>   <span class='assign token'>=</span> <span class='Conditions constant id'>Conditions</span><span class='colon2 op'>::</span><span class='Operation constant id'>Operation</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:and</span><span class='rparen token'>)</span>  <span class='comment val'># AND all the conditions together</span>
  <span class='@offset ivar id'>@offset</span>       <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span> <span class='symbol val'>:offset</span><span class='comma token'>,</span>       <span class='integer val'>0</span>
  <span class='@limit ivar id'>@limit</span>        <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span> <span class='symbol val'>:limit</span><span class='comma token'>,</span>        <span class='nil nil kw'>nil</span>
  <span class='@order ivar id'>@order</span>        <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span> <span class='symbol val'>:order</span><span class='comma token'>,</span>        <span class='@model ivar id'>@model</span><span class='dot token'>.</span><span class='default_order identifier id'>default_order</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span>
  <span class='@unique ivar id'>@unique</span>       <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span> <span class='symbol val'>:unique</span><span class='comma token'>,</span>       <span class='false false kw'>false</span>
  <span class='@add_reversed ivar id'>@add_reversed</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span> <span class='symbol val'>:add_reversed</span><span class='comma token'>,</span> <span class='false false kw'>false</span>
  <span class='@reload ivar id'>@reload</span>       <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span> <span class='symbol val'>:reload</span><span class='comma token'>,</span>       <span class='false false kw'>false</span>
  <span class='@raw ivar id'>@raw</span>          <span class='assign token'>=</span> <span class='false false kw'>false</span>

  <span class='@links ivar id'>@links</span> <span class='assign token'>=</span> <span class='@links ivar id'>@links</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>

  <span class='comment val'># treat all non-options as conditions</span>
  <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='except identifier id'>except</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='OPTIONS constant id'>OPTIONS</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='kv identifier id'>kv</span><span class='bitor op'>|</span> <span class='append_condition identifier id'>append_condition</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='kv identifier id'>kv</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

  <span class='comment val'># parse @options[:conditions] differently</span>
  <span class='case case kw'>case</span> <span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:conditions</span><span class='rbrack token'>]</span>
    <span class='when when kw'>when</span> <span class='Conditions constant id'>Conditions</span><span class='colon2 op'>::</span><span class='AbstractOperation constant id'>AbstractOperation</span>
      <span class='@conditions ivar id'>@conditions</span> <span class='lshft op'>&lt;&lt;</span> <span class='conditions identifier id'>conditions</span>

    <span class='when when kw'>when</span> <span class='Hash constant id'>Hash</span>
      <span class='conditions identifier id'>conditions</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='kv identifier id'>kv</span><span class='bitor op'>|</span> <span class='append_condition identifier id'>append_condition</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='kv identifier id'>kv</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

    <span class='when when kw'>when</span> <span class='Array constant id'>Array</span>
      <span class='statement identifier id'>statement</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='bind_values identifier id'>bind_values</span> <span class='assign token'>=</span> <span class='mult op'>*</span><span class='conditions identifier id'>conditions</span>
      <span class='@conditions ivar id'>@conditions</span> <span class='lshft op'>&lt;&lt;</span> <span class='lbrack token'>[</span> <span class='statement identifier id'>statement</span><span class='comma token'>,</span> <span class='bind_values identifier id'>bind_values</span> <span class='rbrack token'>]</span>
      <span class='@raw ivar id'>@raw</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>

  <span class='normalize_order identifier id'>normalize_order</span>
  <span class='normalize_fields identifier id'>normalize_fields</span>
  <span class='normalize_links identifier id'>normalize_links</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#-3D-3D-instance_method">#==</span><span class='args'>(other)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Compares another Query for equivalency.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>TrueClass</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_reversed-3F-instance_method">#add_reversed?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: move these checks inside assert_valid_conditions and blow up if
invalid conditions used def valid?
</p>
<pre class="code">
 <span class='notop op'>!</span><span class='conditions identifier id'>conditions</span><span class='dot token'>.</span>
</pre>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>TrueClass</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#condition_properties-instance_method">#condition_properties</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the properties used in the conditions.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Set&lt;<a href="Property.html" title="Property">Property</a>></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#eql-3F-instance_method">#eql?</span><span class='args'>(other)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Compares another Query for equality.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>TrueClass</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#filter_records-instance_method">#filter_records</span><span class='args'>(records)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Takes an Enumerable of records, and destructively filters it.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Enumerable</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#inspect-instance_method">#inspect</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns detailed human readable string representation of the query.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>String</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#limit_records-instance_method">#limit_records</span><span class='args'>(records)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Limits a set of records by the offset and/or limit.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Enumerable</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#match_records-instance_method">#match_records</span><span class='args'>(records)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Filter a set of records by the conditions.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Enumerable</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#merge-instance_method">#merge</span><span class='args'>(other)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Similar to Query#update, but acts on a duplicate.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="" title="Query">Query</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#raw-3F-instance_method">#raw?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Indicates if the Query has raw conditions.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>TrueClass</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#relative-instance_method">#relative</span><span class='args'>(options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Builds and returns new query that merges original with one given, and
slices the result with respect to :limit and :offset options.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#reload-3F-instance_method">#reload?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Indicates if the Query results should replace the results in the Identity
Map.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>TrueClass</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#reverse-instance_method">#reverse</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a new Query with a reversed order.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="" title="Query">Query</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#reverse-21-instance_method">#reverse!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Reverses the sort order of the Query.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="" title="Query">Query</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#slice-instance_method">#slice</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
          <span class='alias'>#[]</span>
        
      </th>
      <td class="docstring">
        <p>
Slices collection by adding limit and offset to the query, so a single
query is executed.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#slice-21-instance_method">#slice!</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Slices collection by adding limit and offset to the query, so a single
query is executed.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#sort_records-instance_method">#sort_records</span><span class='args'>(records)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sorts a list of Records by the order.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Enumerable</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#unique-3F-instance_method">#unique?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Indicates if the Query results should be unique.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>TrueClass</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#update-instance_method">#update</span><span class='args'>(other)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Updates the Query with another Query or conditions.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a href="" title="Query">Query</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>==</h3>
</div><div id="-3D-3D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>TrueClass</tt></span>
    <span class='name'>==</span><span class='args'>(other)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Compares another Query for equivalency
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a href="" title="Query">Query</a></tt>]</span>
        <span class='name'>other</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the other Query to compare with
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>TrueClass</tt>, <tt>FalseClass</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
true if they are equivalent, false if not
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 444</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L444">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">444
445
446
447
448
449
450
451
452
453
454</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='eq op'>==</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='equal? fid id'>equal?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
    <span class='return return kw'>return</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>

  <span class='unless unless kw'>unless</span> <span class='lbrack token'>[</span> <span class='symbol val'>:repository</span><span class='comma token'>,</span> <span class='symbol val'>:model</span><span class='comma token'>,</span> <span class='symbol val'>:fields</span><span class='comma token'>,</span> <span class='symbol val'>:links</span><span class='comma token'>,</span> <span class='symbol val'>:conditions</span><span class='comma token'>,</span> <span class='symbol val'>:order</span><span class='comma token'>,</span> <span class='symbol val'>:offset</span><span class='comma token'>,</span> <span class='symbol val'>:limit</span><span class='comma token'>,</span> <span class='symbol val'>:reload?</span><span class='comma token'>,</span> <span class='symbol val'>:unique?</span><span class='comma token'>,</span> <span class='symbol val'>:add_reversed?</span> <span class='rbrack token'>]</span><span class='dot token'>.</span><span class='all? fid id'>all?</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='m identifier id'>m</span><span class='bitor op'>|</span> <span class='other identifier id'>other</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='m identifier id'>m</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>

  <span class='cmp? fid id'>cmp?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='comma token'>,</span> <span class='symbol val'>:==</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>add_reversed?</h3>
</div><div id="add_reversed-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>TrueClass</tt></span>
    <span class='name'>add_reversed?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: move these checks inside assert_valid_conditions and blow up if
invalid conditions used def valid?
</p>
<pre class="code">
 <span class='notop op'>!</span><span class='conditions identifier id'>conditions</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='operator identifier id'>operator</span><span class='comma token'>,</span> <span class='property identifier id'>property</span><span class='comma token'>,</span> <span class='bind_value identifier id'>bind_value</span><span class='bitor op'>|</span>
   <span class='next next kw'>next</span> <span class='if if_mod kw'>if</span> <span class='operator identifier id'>operator</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span>

   <span class='case case kw'>case</span> <span class='bind_value identifier id'>bind_value</span>
     <span class='when when kw'>when</span> <span class='Array constant id'>Array</span>
       <span class='bind_value identifier id'>bind_value</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
     <span class='when when kw'>when</span> <span class='Range constant id'>Range</span>
       <span class='operator identifier id'>operator</span> <span class='neq op'>!=</span> <span class='symbol val'>:eql</span> <span class='andop op'>&amp;&amp;</span> <span class='operator identifier id'>operator</span> <span class='neq op'>!=</span> <span class='symbol val'>:in</span> <span class='andop op'>&amp;&amp;</span> <span class='operator identifier id'>operator</span> <span class='neq op'>!=</span> <span class='symbol val'>:not</span>
   <span class='end end kw'>end</span>
 <span class='end end kw'>end</span>
</pre>
<p>
end
</p>
<p>
Indicates if each result should be returned in reverse order
</p>
<p>
Set in cases like the following:
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>TrueClass</tt>, <tt>FalseClass</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
true if the results should be reversed, false if not
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 183</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L183">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">183
184
185</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_reversed? fid id'>add_reversed?</span>
  <span class='@add_reversed ivar id'>@add_reversed</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>condition_properties</h3>
</div><div id="condition_properties-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Set&lt;<a href="Property.html" title="Property">Property</a>></tt></span>
    <span class='name'>condition_properties</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the properties used in the conditions
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Set&lt;<a href="Property.html" title="Property">Property</a>></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
Set of Property objects used in the conditions
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 554</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L554">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">554
555
556
557
558
559
560
561
562
563
564
565
566</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='condition_properties identifier id'>condition_properties</span>
  <span class='properties identifier id'>properties</span> <span class='assign token'>=</span> <span class='Set constant id'>Set</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='operands identifier id'>operands</span>   <span class='assign token'>=</span> <span class='conditions identifier id'>conditions</span><span class='dot token'>.</span><span class='operands identifier id'>operands</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>

  <span class='while while kw'>while</span> <span class='operand identifier id'>operand</span> <span class='assign token'>=</span> <span class='operands identifier id'>operands</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span>
    <span class='case case kw'>case</span> <span class='operand identifier id'>operand</span>
      <span class='when when kw'>when</span> <span class='Conditions constant id'>Conditions</span><span class='colon2 op'>::</span><span class='AbstractOperation constant id'>AbstractOperation</span>  <span class='then then kw'>then</span> <span class='operands identifier id'>operands</span><span class='dot token'>.</span><span class='concat identifier id'>concat</span><span class='lparen token'>(</span><span class='operand identifier id'>operand</span><span class='dot token'>.</span><span class='operands identifier id'>operands</span><span class='rparen token'>)</span>
      <span class='when when kw'>when</span> <span class='Conditions constant id'>Conditions</span><span class='colon2 op'>::</span><span class='AbstractComparison constant id'>AbstractComparison</span> <span class='then then kw'>then</span> <span class='properties identifier id'>properties</span> <span class='lshft op'>&lt;&lt;</span> <span class='operand identifier id'>operand</span><span class='dot token'>.</span><span class='property identifier id'>property</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='properties identifier id'>properties</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>eql?</h3>
</div><div id="eql-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>TrueClass</tt></span>
    <span class='name'>eql?</span><span class='args'>(other)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Compares another Query for equality
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a href="" title="Query">Query</a></tt>]</span>
        <span class='name'>other</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the other Query to compare with
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>TrueClass</tt>, <tt>FalseClass</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
true if they are equal, false if not
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 466</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L466">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">466
467
468
469
470
471
472
473
474
475
476</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='eql? fid id'>eql?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='equal? fid id'>equal?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
    <span class='return return kw'>return</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>

  <span class='unless unless kw'>unless</span> <span class='other identifier id'>other</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='equal? fid id'>equal?</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='rparen token'>)</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>

  <span class='cmp? fid id'>cmp?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='comma token'>,</span> <span class='symbol val'>:eql?</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>filter_records</h3>
</div><div id="filter_records-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Enumerable</tt></span>
    <span class='name'>filter_records</span><span class='args'>(records)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Takes an Enumerable of records, and destructively filters it. First finds
all matching conditions, then sorts it, then does offset &amp; limit
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Enumerable</tt>]</span>
        <span class='name'>records</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The set of records to be filtered
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Enumerable</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
Whats left of the given array after the filtering
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 368</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L368">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">368
369
370
371
372
373
374</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='filter_records identifier id'>filter_records</span><span class='lparen token'>(</span><span class='records identifier id'>records</span><span class='rparen token'>)</span>
  <span class='records identifier id'>records</span> <span class='assign token'>=</span> <span class='records identifier id'>records</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span> <span class='if if_mod kw'>if</span> <span class='unique? fid id'>unique?</span>
  <span class='records identifier id'>records</span> <span class='assign token'>=</span> <span class='match_records identifier id'>match_records</span><span class='lparen token'>(</span><span class='records identifier id'>records</span><span class='rparen token'>)</span>
  <span class='records identifier id'>records</span> <span class='assign token'>=</span> <span class='sort_records identifier id'>sort_records</span><span class='lparen token'>(</span><span class='records identifier id'>records</span><span class='rparen token'>)</span>
  <span class='records identifier id'>records</span> <span class='assign token'>=</span> <span class='limit_records identifier id'>limit_records</span><span class='lparen token'>(</span><span class='records identifier id'>records</span><span class='rparen token'>)</span>
  <span class='records identifier id'>records</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>inspect</h3>
</div><div id="inspect-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>String</tt></span>
    <span class='name'>inspect</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns detailed human readable string representation of the query
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>String</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
detailed string representation of the query
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 530</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L530">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='inspect identifier id'>inspect</span>
  <span class='attrs identifier id'>attrs</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span>
    <span class='lbrack token'>[</span> <span class='symbol val'>:repository</span><span class='comma token'>,</span> <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='lbrack token'>[</span> <span class='symbol val'>:model</span><span class='comma token'>,</span>      <span class='model identifier id'>model</span>           <span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='lbrack token'>[</span> <span class='symbol val'>:fields</span><span class='comma token'>,</span>     <span class='fields identifier id'>fields</span>          <span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='lbrack token'>[</span> <span class='symbol val'>:links</span><span class='comma token'>,</span>      <span class='links identifier id'>links</span>           <span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='lbrack token'>[</span> <span class='symbol val'>:conditions</span><span class='comma token'>,</span> <span class='conditions identifier id'>conditions</span>      <span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='lbrack token'>[</span> <span class='symbol val'>:order</span><span class='comma token'>,</span>      <span class='order identifier id'>order</span>           <span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='lbrack token'>[</span> <span class='symbol val'>:limit</span><span class='comma token'>,</span>      <span class='limit identifier id'>limit</span>           <span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='lbrack token'>[</span> <span class='symbol val'>:offset</span><span class='comma token'>,</span>     <span class='offset identifier id'>offset</span>          <span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='lbrack token'>[</span> <span class='symbol val'>:reload</span><span class='comma token'>,</span>     <span class='reload? fid id'>reload?</span>         <span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='lbrack token'>[</span> <span class='symbol val'>:unique</span><span class='comma token'>,</span>     <span class='unique? fid id'>unique?</span>         <span class='rbrack token'>]</span><span class='comma token'>,</span>
  <span class='rbrack token'>]</span>

  <span class='dstring node'>&quot;#&lt;#{self.class.name} #{attrs.map { |k, v| &quot;@#{k}=#{v.inspect}&quot; }.join(' ')}&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>limit_records</h3>
</div><div id="limit_records-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Enumerable</tt></span>
    <span class='name'>limit_records</span><span class='args'>(records)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Limits a set of records by the offset and/or limit
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Enumerable</tt>]</span>
        <span class='name'>records</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
A list of Recrods to sort
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Enumerable</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
The offset &amp; limited records
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 422</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L422">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">422
423
424
425
426
427
428
429
430
431
432</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='limit_records identifier id'>limit_records</span><span class='lparen token'>(</span><span class='records identifier id'>records</span><span class='rparen token'>)</span>
  <span class='size identifier id'>size</span> <span class='assign token'>=</span> <span class='records identifier id'>records</span><span class='dot token'>.</span><span class='size identifier id'>size</span>

  <span class='if if kw'>if</span> <span class='offset identifier id'>offset</span> <span class='gt op'>&gt;</span> <span class='size identifier id'>size</span> <span class='minus op'>-</span> <span class='integer val'>1</span>
    <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='elsif elsif kw'>elsif</span> <span class='lparen token'>(</span><span class='limit identifier id'>limit</span> <span class='andop op'>&amp;&amp;</span> <span class='limit identifier id'>limit</span> <span class='neq op'>!=</span> <span class='size identifier id'>size</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='offset identifier id'>offset</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
    <span class='records identifier id'>records</span><span class='lbrack token'>[</span><span class='offset identifier id'>offset</span><span class='comma token'>,</span> <span class='limit identifier id'>limit</span> <span class='orop op'>||</span> <span class='size identifier id'>size</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>
    <span class='records identifier id'>records</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>match_records</h3>
</div><div id="match_records-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Enumerable</tt></span>
    <span class='name'>match_records</span><span class='args'>(records)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Filter a set of records by the conditions
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Enumerable</tt>]</span>
        <span class='name'>records</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The set of records to be filtered
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Enumerable</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
Whats left of the given array after the matching
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 386</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L386">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">386
387
388
389
390</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='match_records identifier id'>match_records</span><span class='lparen token'>(</span><span class='records identifier id'>records</span><span class='rparen token'>)</span>
  <span class='records identifier id'>records</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='record identifier id'>record</span><span class='bitor op'>|</span>
    <span class='conditions identifier id'>conditions</span><span class='dot token'>.</span><span class='matches? fid id'>matches?</span><span class='lparen token'>(</span><span class='record identifier id'>record</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>merge</h3>
</div><div id="merge-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="" title="Query">Query</a></tt></span>
    <span class='name'>merge</span><span class='args'>(other)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Similar to Query#update, but acts on a duplicate.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a href="" title="Query">Query</a></tt>, <tt>Hash</tt>]</span>
        <span class='name'>other</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
other query to merge with
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="" title="Query">Query</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
updated duplicate of original query
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 318</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L318">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">318
319
320</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
  <span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>raw?</h3>
</div><div id="raw-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>TrueClass</tt></span>
    <span class='name'>raw?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Indicates if the Query has raw conditions
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>TrueClass</tt>, <tt>FalseClass</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
true if the query has raw conditions, false if not
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 220</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L220">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">220
221
222</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='raw? fid id'>raw?</span>
  <span class='@raw ivar id'>@raw</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>relative</h3>
</div><div id="relative-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>relative</span><span class='args'>(options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Builds and returns new query that merges original with one given, and
slices the result with respect to :limit and :offset options
</p>
<p>
This method is used by Collection to concatenate options from multiple
chained calls in cases like the following:
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 335</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L335">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='relative identifier id'>relative</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='assert_kind_of identifier id'>assert_kind_of</span> <span class='string val'>'options'</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='Hash constant id'>Hash</span>

  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>

  <span class='repository identifier id'>repository</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:repository</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span>

  <span class='if if kw'>if</span> <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Symbol constant id'>Symbol</span><span class='rparen token'>)</span>
    <span class='repository identifier id'>repository</span> <span class='assign token'>=</span> <span class='DataMapper constant id'>DataMapper</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='symbol val'>:offset</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='symbol val'>:limit</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='limit identifier id'>limit</span><span class='rparen token'>)</span>
    <span class='offset identifier id'>offset</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:offset</span><span class='rparen token'>)</span>
    <span class='limit identifier id'>limit</span>  <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:limit</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='limit identifier id'>limit</span> <span class='minus op'>-</span> <span class='offset identifier id'>offset</span>

    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='comma token'>,</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='slice! fid id'>slice!</span><span class='lparen token'>(</span><span class='offset identifier id'>offset</span><span class='comma token'>,</span> <span class='limit identifier id'>limit</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='comma token'>,</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reload?</h3>
</div><div id="reload-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>TrueClass</tt></span>
    <span class='name'>reload?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Indicates if the Query results should replace the results in the Identity
Map
</p>
<pre class="code">
  <span class='TODO constant id'>TODO</span><span class='colon op'>:</span> <span class='needs identifier id'>needs</span> <span class='example identifier id'>example</span>
</pre>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>TrueClass</tt>, <tt>FalseClass</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
true if the results should be reloaded, false if not
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 196</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L196">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">196
197
198</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='reload? fid id'>reload?</span>
  <span class='@reload ivar id'>@reload</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reverse</h3>
</div><div id="reverse-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="" title="Query">Query</a></tt></span>
    <span class='name'>reverse</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a new Query with a reversed order
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="" title="Query">Query</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
new Query with reversed order
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 237</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L237">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">237
238
239</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='reverse identifier id'>reverse</span>
  <span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='reverse! fid id'>reverse!</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reverse!</h3>
</div><div id="reverse-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="" title="Query">Query</a></tt></span>
    <span class='name'>reverse!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Reverses the sort order of the Query
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="" title="Query">Query</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
self
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 255</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L255">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">255
256
257
258
259
260
261
262
263</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='reverse! fid id'>reverse!</span>
  <span class='comment val'># reverse the sort order</span>
  <span class='@order ivar id'>@order</span><span class='dot token'>.</span><span class='map! fid id'>map!</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='o identifier id'>o</span><span class='bitor op'>|</span> <span class='o identifier id'>o</span><span class='dot token'>.</span><span class='reverse! fid id'>reverse!</span> <span class='rbrace token'>}</span>

  <span class='comment val'># copy the order to the options</span>
  <span class='@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:order</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@order ivar id'>@order</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='o identifier id'>o</span><span class='bitor op'>|</span> <span class='o identifier id'>o</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='freeze identifier id'>freeze</span>

  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>slice</h3>
</div><div id="slice-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>slice</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="[]-instance_method">[]</tt>
  
</p>
</div><div class="section docstring">
  <p>
Slices collection by adding limit and offset to the query, so a single
query is executed
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 492</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L492">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">492
493
494</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='slice identifier id'>slice</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='slice! fid id'>slice!</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>slice!</h3>
</div><div id="slice-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>slice!</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Slices collection by adding limit and offset to the query, so a single
query is executed
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 514</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L514">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">514
515
516
517
518
519
520
521
522</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='slice! fid id'>slice!</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='offset identifier id'>offset</span><span class='comma token'>,</span> <span class='limit identifier id'>limit</span> <span class='assign token'>=</span> <span class='extract_slice_arguments identifier id'>extract_slice_arguments</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>

  <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='limit identifier id'>limit</span> <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='offset identifier id'>offset</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
    <span class='offset identifier id'>offset</span><span class='comma token'>,</span> <span class='limit identifier id'>limit</span> <span class='assign token'>=</span> <span class='get_relative_position identifier id'>get_relative_position</span><span class='lparen token'>(</span><span class='offset identifier id'>offset</span><span class='comma token'>,</span> <span class='limit identifier id'>limit</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='symbol val'>:offset</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='offset identifier id'>offset</span><span class='comma token'>,</span> <span class='symbol val'>:limit</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='limit identifier id'>limit</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>sort_records</h3>
</div><div id="sort_records-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Enumerable</tt></span>
    <span class='name'>sort_records</span><span class='args'>(records)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sorts a list of Records by the order
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Enumerable</tt>]</span>
        <span class='name'>records</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
A list of Resources to sort
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Enumerable</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
The sorted records
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 402</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L402">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">402
403
404
405
406
407
408
409
410</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='sort_records identifier id'>sort_records</span><span class='lparen token'>(</span><span class='records identifier id'>records</span><span class='rparen token'>)</span>
  <span class='sort_order identifier id'>sort_order</span> <span class='assign token'>=</span> <span class='order identifier id'>order</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='direction identifier id'>direction</span><span class='bitor op'>|</span> <span class='lbrack token'>[</span> <span class='direction identifier id'>direction</span><span class='dot token'>.</span><span class='target identifier id'>target</span><span class='comma token'>,</span> <span class='direction identifier id'>direction</span><span class='dot token'>.</span><span class='operator identifier id'>operator</span> <span class='eq op'>==</span> <span class='symbol val'>:asc</span> <span class='rbrack token'>]</span> <span class='rbrace token'>}</span>

  <span class='records identifier id'>records</span><span class='dot token'>.</span><span class='sort_by identifier id'>sort_by</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='record identifier id'>record</span><span class='bitor op'>|</span>
    <span class='sort_order identifier id'>sort_order</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='comma token'>,</span> <span class='ascending identifier id'>ascending</span><span class='rparen token'>)</span><span class='bitor op'>|</span>
      <span class='Sort constant id'>Sort</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='record_value identifier id'>record_value</span><span class='lparen token'>(</span><span class='record identifier id'>record</span><span class='comma token'>,</span> <span class='property identifier id'>property</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='ascending identifier id'>ascending</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>unique?</h3>
</div><div id="unique-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>TrueClass</tt></span>
    <span class='name'>unique?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Indicates if the Query results should be unique
</p>
<pre class="code">
  <span class='TODO constant id'>TODO</span><span class='colon op'>:</span> <span class='needs identifier id'>needs</span> <span class='example identifier id'>example</span>
</pre>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>TrueClass</tt>, <tt>FalseClass</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
true if the results should be unique, false if not
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 209</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L209">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">209
210
211</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='unique? fid id'>unique?</span>
  <span class='@unique ivar id'>@unique</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>update</h3>
</div><div id="update-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a href="" title="Query">Query</a></tt></span>
    <span class='name'>update</span><span class='args'>(other)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Updates the Query with another Query or conditions
</p>
<p>
Pretty unrealistic example:
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a href="" title="Query">Query</a></tt>, <tt>Hash</tt>]</span>
        <span class='name'>other</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
other Query or conditions
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="" title="Query">Query</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
self
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/query.rb', line 282</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/michael/dm-core/blob/e1bd009dff9b6c1bfd91751e87b3989c1c7a1866/lib/dm-core/query.rb#L282">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
  <span class='assert_kind_of identifier id'>assert_kind_of</span> <span class='string val'>'other'</span><span class='comma token'>,</span> <span class='other identifier id'>other</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='comma token'>,</span> <span class='Hash constant id'>Hash</span>

  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='case case kw'>case</span> <span class='other identifier id'>other</span>
    <span class='when when kw'>when</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span>
      <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='eql? fid id'>eql?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
        <span class='return return kw'>return</span> <span class='self self kw'>self</span>
      <span class='end end kw'>end</span>

      <span class='assert_valid_other identifier id'>assert_valid_other</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>

      <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='dot token'>.</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>

    <span class='when when kw'>when</span> <span class='Hash constant id'>Hash</span>
      <span class='if if kw'>if</span> <span class='other identifier id'>other</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
        <span class='return return kw'>return</span> <span class='self self kw'>self</span>
      <span class='end end kw'>end</span>

      <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>

  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>