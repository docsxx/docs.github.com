<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>delano's rye - Module: Escape - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/delano/commits/rye/master" rel="alternate" title="Recent Commits to rye:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("delano", "rye", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("delano", "rye", "197018175bfc197a70b8dd756b683d6759fe55e0", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/delano/rye/tree/">Source</a></li>
            <li class=""><a href="http://github.com/delano/rye/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/delano/rye/network">Network</a></li>            
            <li class=""><a href="http://github.com/delano/rye/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/delano/rye">Wiki</a></li>
            <li class=""><a href="http://github.com/delano/rye/graphs">Graphs</a></li>                    
            <li class="active"><a href="/delano/rye">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/delano">delano</a> / <b><a href="http://github.com/delano/rye/tree">rye</a></b>        
                <a id="namespaces_button" rel="delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Escape">
  <h1>Module: Escape</h1>
  <div class="section docstring">
  <ul>
<li>URI

</li>
<li>HTML

</li>
<li>shell command

</li>
</ul>

</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="HTML_ATTR_ESCAPE_HASH-constant">HTML_ATTR_ESCAPE_HASH</dt>
      <dd>{ #:nodoc:all
  '&amp;' =&gt; '&amp;amp;',
  '&lt;' =&gt; '&amp;lt;',
  '&gt;' =&gt; '&amp;gt;',
  '&quot;' =&gt; '&amp;quot;',
}</dd>
    
      <dt id="HTML_TEXT_ESCAPE_HASH-constant">HTML_TEXT_ESCAPE_HASH</dt>
      <dd>{
  '&amp;' =&gt; '&amp;amp;',
  '&lt;' =&gt; '&amp;lt;',
  '&gt;' =&gt; '&amp;gt;',
}</dd>
    
  </dl>
</div>

</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#html_attr_value-instance_method">#html_attr_value</span><span class='args'>(str)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Escape.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#html_form-instance_method">#html_form</span><span class='args'>(pairs, sep = '&amp;')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Escape.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#html_form_fast-instance_method">#html_form_fast</span><span class='args'>(pairs, sep = '&amp;')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#html_text-instance_method">#html_text</span><span class='args'>(str)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Escape.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#shell_command-instance_method">#shell_command</span><span class='args'>(*command)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Escape.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#shell_single_word-instance_method">#shell_single_word</span><span class='args'>(str)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Escape.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#uri_path-instance_method">#uri_path</span><span class='args'>(str)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Escape.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#uri_segment-instance_method">#uri_segment</span><span class='args'>(str)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Escape.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>html_attr_value</h3>
</div><div id="html_attr_value-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>html_attr_value</span><span class='args'>(str)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Escape.html_attr_value encodes a string as a double-quoted HTML attribute
using character references. It returns an instance of HTMLAttrValue.
</p>
<pre class="code">
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_attr_value identifier id'>html_attr_value</span><span class='lparen token'>(</span><span class='string val'>&quot;abc&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::HTMLAttrValue: &quot;abc&quot;&gt;</span>
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_attr_value identifier id'>html_attr_value</span><span class='lparen token'>(</span><span class='string val'>&quot;a&amp;b&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::HTMLAttrValue: &quot;a&amp;amp;b&quot;&gt;</span>
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_attr_value identifier id'>html_attr_value</span><span class='lparen token'>(</span><span class='string val'>&quot;ab&amp;&lt;&gt;\&quot;c&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::HTMLAttrValue: &quot;ab&amp;amp;&amp;lt;&amp;gt;&amp;quot;c&quot;&gt;</span>
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_attr_value identifier id'>html_attr_value</span><span class='lparen token'>(</span><span class='string val'>&quot;a'c&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::HTMLAttrValue: &quot;a'c&quot;&gt;</span>
</pre>
<p>
It escapes 4 characters:
</p>
<ul>
<li>&#8217;&amp;&#8217; to &#8217;&amp;amp;&#8217;

</li>
<li>&#8217;&lt;&#8217; to &#8217;&amp;lt;&#8217;

</li>
<li>&#8217;&gt;&#8217; to &#8217;&amp;gt;&#8217;

</li>
<li>&#8217;&quot;&#8217; to &#8217;&amp;quot;&#8217;

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/esc.rb', line 297</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0/lib/esc.rb#L297">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">297
298
299
300</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='html_attr_value identifier id'>html_attr_value</span><span class='lparen token'>(</span><span class='str identifier id'>str</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:all</span>
  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='string val'>'&quot;'</span> <span class='plus op'>+</span> <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/[&amp;&lt;&gt;&quot;]/</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='ch identifier id'>ch</span><span class='bitor op'>|</span> <span class='HTML_ATTR_ESCAPE_HASH constant id'>HTML_ATTR_ESCAPE_HASH</span><span class='lbrack token'>[</span><span class='ch identifier id'>ch</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span> <span class='plus op'>+</span> <span class='string val'>'&quot;'</span>
  <span class='HTMLAttrValue constant id'>HTMLAttrValue</span><span class='dot token'>.</span><span class='new_no_dup identifier id'>new_no_dup</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>html_form</h3>
</div><div id="html_form-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>html_form</span><span class='args'>(pairs, sep = '&amp;')</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Escape.html_form composes HTML form key-value pairs as a
x-www-form-urlencoded encoded string. It returns an instance of
PercentEncoded.
</p>
<p>
Escape.html_form takes an array of pair of strings or an hash from string
to string.
</p>
<pre class="code">
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_form identifier id'>html_form</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='lbrack token'>[</span><span class='string val'>&quot;a&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;b&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;c&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;d&quot;</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::PercentEncoded: a=b&amp;c=d&gt;</span>
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_form identifier id'>html_form</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='string val'>&quot;a&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;b&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;c&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;d&quot;</span><span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::PercentEncoded: a=b&amp;c=d&gt;</span>
</pre>
<p>
In the array form, it is possible to use same key more than once. (It is
required for a HTML form which contains checkboxes and select element with
multiple attribute.)
</p>
<pre class="code">
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_form identifier id'>html_form</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='lbrack token'>[</span><span class='string val'>&quot;k&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;1&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;k&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;2&quot;</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::PercentEncoded: k=1&amp;k=2&gt;</span>
</pre>
<p>
If the strings contains characters which must be escaped in
x-www-form-urlencoded, they are escaped using %-encoding.
</p>
<pre class="code">
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_form identifier id'>html_form</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='lbrack token'>[</span><span class='string val'>&quot;k=&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;&amp;;=&quot;</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::PercentEncoded: k%3D=%26%3B%3D&gt;</span>
</pre>
<p>
The separator can be specified by the optional second argument.
</p>
<pre class="code">
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_form identifier id'>html_form</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='lbrack token'>[</span><span class='string val'>&quot;a&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;b&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;c&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;d&quot;</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='string val'>&quot;;&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::PercentEncoded: a=b;c=d&gt;</span>
</pre>
<p>
See HTML 4.01 for details.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/esc.rb', line 210</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0/lib/esc.rb#L210">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='html_form identifier id'>html_form</span><span class='lparen token'>(</span><span class='pairs identifier id'>pairs</span><span class='comma token'>,</span> <span class='sep identifier id'>sep</span><span class='assign token'>=</span><span class='string val'>'&amp;'</span><span class='rparen token'>)</span>
  <span class='r identifier id'>r</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='first identifier id'>first</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='pairs identifier id'>pairs</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='bitor op'>|</span>
    <span class='comment val'># query-chars - pct-encoded - x-www-form-urlencoded-delimiters =</span>
    <span class='comment val'>#   unreserved / &quot;!&quot; / &quot;$&quot; / &quot;'&quot; / &quot;(&quot; / &quot;)&quot; / &quot;*&quot; / &quot;,&quot; / &quot;:&quot; / &quot;@&quot; / &quot;/&quot; / &quot;?&quot;</span>
    <span class='comment val'># query-char - pct-encoded = unreserved / sub-delims / &quot;:&quot; / &quot;@&quot; / &quot;/&quot; / &quot;?&quot;</span>
    <span class='comment val'># query-char = pchar / &quot;/&quot; / &quot;?&quot; = unreserved / pct-encoded / sub-delims / &quot;:&quot; / &quot;@&quot; / &quot;/&quot; / &quot;?&quot;</span>
    <span class='comment val'># unreserved = ALPHA / DIGIT / &quot;-&quot; / &quot;.&quot; / &quot;_&quot; / &quot;~&quot;</span>
    <span class='comment val'># sub-delims = &quot;!&quot; / &quot;$&quot; / &quot;&amp;&quot; / &quot;'&quot; / &quot;(&quot; / &quot;)&quot; / &quot;*&quot; / &quot;+&quot; / &quot;,&quot; / &quot;;&quot; / &quot;=&quot;</span>
    <span class='comment val'># x-www-form-urlencoded-delimiters = &quot;&amp;&quot; / &quot;+&quot; / &quot;;&quot; / &quot;=&quot;</span>
    <span class='r identifier id'>r</span> <span class='lshft op'>&lt;&lt;</span> <span class='sep identifier id'>sep</span> <span class='if if_mod kw'>if</span> <span class='notop op'>!</span><span class='first identifier id'>first</span>
    <span class='first identifier id'>first</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='each_byte identifier id'>each_byte</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='byte identifier id'>byte</span><span class='bitor op'>|</span>
      <span class='ch identifier id'>ch</span> <span class='assign token'>=</span> <span class='byte identifier id'>byte</span><span class='dot token'>.</span><span class='chr identifier id'>chr</span>
      <span class='if if kw'>if</span> <span class='regexp val'>%r{[^0-9A-Za-z\-\._~:/?@!\$'()*,]}n</span> <span class='match op'>=~</span> <span class='ch identifier id'>ch</span>
        <span class='r identifier id'>r</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;%&quot;</span> <span class='lshft op'>&lt;&lt;</span> <span class='ch identifier id'>ch</span><span class='dot token'>.</span><span class='unpack identifier id'>unpack</span><span class='lparen token'>(</span><span class='string val'>&quot;H2&quot;</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='upcase identifier id'>upcase</span>
      <span class='else else kw'>else</span>
        <span class='r identifier id'>r</span> <span class='lshft op'>&lt;&lt;</span> <span class='ch identifier id'>ch</span>
      <span class='end end kw'>end</span>
    <span class='rbrace token'>}</span>
    <span class='r identifier id'>r</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>'='</span>
    <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='each_byte identifier id'>each_byte</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='byte identifier id'>byte</span><span class='bitor op'>|</span>
      <span class='ch identifier id'>ch</span> <span class='assign token'>=</span> <span class='byte identifier id'>byte</span><span class='dot token'>.</span><span class='chr identifier id'>chr</span>
      <span class='if if kw'>if</span> <span class='regexp val'>%r{[^0-9A-Za-z\-\._~:/?@!\$'()*,]}n</span> <span class='match op'>=~</span> <span class='ch identifier id'>ch</span>
        <span class='r identifier id'>r</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;%&quot;</span> <span class='lshft op'>&lt;&lt;</span> <span class='ch identifier id'>ch</span><span class='dot token'>.</span><span class='unpack identifier id'>unpack</span><span class='lparen token'>(</span><span class='string val'>&quot;H2&quot;</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='upcase identifier id'>upcase</span>
      <span class='else else kw'>else</span>
        <span class='r identifier id'>r</span> <span class='lshft op'>&lt;&lt;</span> <span class='ch identifier id'>ch</span>
      <span class='end end kw'>end</span>
    <span class='rbrace token'>}</span>
  <span class='rbrace token'>}</span>
  <span class='PercentEncoded constant id'>PercentEncoded</span><span class='dot token'>.</span><span class='new_no_dup identifier id'>new_no_dup</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>html_form_fast</h3>
</div><div id="html_form_fast-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>html_form_fast</span><span class='args'>(pairs, sep = '&amp;')</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/esc.rb', line 165</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0/lib/esc.rb#L165">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='html_form_fast identifier id'>html_form_fast</span><span class='lparen token'>(</span><span class='pairs identifier id'>pairs</span><span class='comma token'>,</span> <span class='sep identifier id'>sep</span><span class='assign token'>=</span><span class='string val'>'&amp;'</span><span class='rparen token'>)</span>
  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='pairs identifier id'>pairs</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='bitor op'>|</span>
    <span class='comment val'># query-chars - pct-encoded - x-www-form-urlencoded-delimiters =</span>
    <span class='comment val'>#   unreserved / &quot;!&quot; / &quot;$&quot; / &quot;'&quot; / &quot;(&quot; / &quot;)&quot; / &quot;*&quot; / &quot;,&quot; / &quot;:&quot; / &quot;@&quot; / &quot;/&quot; / &quot;?&quot;</span>
    <span class='comment val'># query-char - pct-encoded = unreserved / sub-delims / &quot;:&quot; / &quot;@&quot; / &quot;/&quot; / &quot;?&quot;</span>
    <span class='comment val'># query-char = pchar / &quot;/&quot; / &quot;?&quot; = unreserved / pct-encoded / sub-delims / &quot;:&quot; / &quot;@&quot; / &quot;/&quot; / &quot;?&quot;</span>
    <span class='comment val'># unreserved = ALPHA / DIGIT / &quot;-&quot; / &quot;.&quot; / &quot;_&quot; / &quot;~&quot;</span>
    <span class='comment val'># sub-delims = &quot;!&quot; / &quot;$&quot; / &quot;&amp;&quot; / &quot;'&quot; / &quot;(&quot; / &quot;)&quot; / &quot;*&quot; / &quot;+&quot; / &quot;,&quot; / &quot;;&quot; / &quot;=&quot;</span>
    <span class='comment val'># x-www-form-urlencoded-delimiters = &quot;&amp;&quot; / &quot;+&quot; / &quot;;&quot; / &quot;=&quot;</span>
    <span class='k identifier id'>k</span> <span class='assign token'>=</span> <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>%r{[^0-9A-Za-z\-\._~:/?@!\$'()*,]}n</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='string val'>'%'</span> <span class='plus op'>+</span> <span class='$&amp; back_ref id'>$&amp;</span><span class='dot token'>.</span><span class='unpack identifier id'>unpack</span><span class='lparen token'>(</span><span class='string val'>&quot;H2&quot;</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='upcase identifier id'>upcase</span>
    <span class='rbrace token'>}</span>
    <span class='v identifier id'>v</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>%r{[^0-9A-Za-z\-\._~:/?@!\$'()*,]}n</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='string val'>'%'</span> <span class='plus op'>+</span> <span class='$&amp; back_ref id'>$&amp;</span><span class='dot token'>.</span><span class='unpack identifier id'>unpack</span><span class='lparen token'>(</span><span class='string val'>&quot;H2&quot;</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='upcase identifier id'>upcase</span>
    <span class='rbrace token'>}</span>
    <span class='dstring node'>&quot;#{k}=#{v}&quot;</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='sep identifier id'>sep</span><span class='rparen token'>)</span>
  <span class='PercentEncoded constant id'>PercentEncoded</span><span class='dot token'>.</span><span class='new_no_dup identifier id'>new_no_dup</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>html_text</h3>
</div><div id="html_text-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>html_text</span><span class='args'>(str)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Escape.html_text escapes a string appropriate for HTML text using character
references. It returns an instance of HTMLEscaped.
</p>
<p>
It escapes 3 characters:
</p>
<ul>
<li>&#8217;&amp;&#8217; to &#8217;&amp;amp;&#8217;

</li>
<li>&#8217;&lt;&#8217; to &#8217;&amp;lt;&#8217;

</li>
<li>&#8217;&gt;&#8217; to &#8217;&amp;gt;&#8217;

</li>
</ul>
<pre class="code">
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_text identifier id'>html_text</span><span class='lparen token'>(</span><span class='string val'>&quot;abc&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::HTMLEscaped: abc&gt;</span>
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='html_text identifier id'>html_text</span><span class='lparen token'>(</span><span class='string val'>&quot;a &amp; b &lt; c &gt; d&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::HTMLEscaped: a &amp;amp; b &amp;lt; c &amp;gt; d&gt;</span>
</pre>
<p>
This function is not appropriate for escaping HTML element attribute
because quotes are not escaped.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/esc.rb', line 267</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0/lib/esc.rb#L267">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">267
268
269
270</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='html_text identifier id'>html_text</span><span class='lparen token'>(</span><span class='str identifier id'>str</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:all</span>
  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/[&amp;&lt;&gt;]/</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='ch identifier id'>ch</span><span class='bitor op'>|</span> <span class='HTML_TEXT_ESCAPE_HASH constant id'>HTML_TEXT_ESCAPE_HASH</span><span class='lbrack token'>[</span><span class='ch identifier id'>ch</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
  <span class='HTMLEscaped constant id'>HTMLEscaped</span><span class='dot token'>.</span><span class='new_no_dup identifier id'>new_no_dup</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>shell_command</h3>
</div><div id="shell_command-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>shell_command</span><span class='args'>(*command)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Escape.shell_command composes a sequence of words to a single shell command
line. All shell meta characters are quoted and the words are concatenated
with interleaving space. It returns an instance of ShellEscaped.
</p>
<pre class="code">
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='shell_command identifier id'>shell_command</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='string val'>&quot;ls&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;/&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::ShellEscaped: ls /&gt;</span>
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='shell_command identifier id'>shell_command</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='string val'>&quot;echo&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;*&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::ShellEscaped: echo '*'&gt;</span>
</pre>
<p>
Note that system(*command) and system(Escape.shell_command(command)) is
roughly same. There are two exception as follows.
</p>
<ul>
<li>The first is that the later may invokes /bin/sh.

</li>
<li>The second is an interpretation of an array with only one element: the
element is parsed by the shell with the former but it is recognized as
single word with the later. For example, system(*[&quot;echo foo&quot;])
invokes echo command with an argument &quot;foo&quot;. But
system(Escape.shell_command([&quot;echo foo&quot;])) invokes &quot;echo
foo&quot; command without arguments (and it probably fails).

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/esc.rb', line 86</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0/lib/esc.rb#L86">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">86
87
88
89
90</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='shell_command identifier id'>shell_command</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='command identifier id'>command</span><span class='rparen token'>)</span>
  <span class='command identifier id'>command</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='command identifier id'>command</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span> <span class='comment val'># Delano</span>
  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='command identifier id'>command</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='word identifier id'>word</span><span class='bitor op'>|</span> <span class='shell_single_word identifier id'>shell_single_word</span><span class='lparen token'>(</span><span class='word identifier id'>word</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>' '</span><span class='rparen token'>)</span>
  <span class='ShellEscaped constant id'>ShellEscaped</span><span class='dot token'>.</span><span class='new_no_dup identifier id'>new_no_dup</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>shell_single_word</h3>
</div><div id="shell_single_word-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>shell_single_word</span><span class='args'>(str)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Escape.shell_single_word quotes shell meta characters. It returns an
instance of ShellEscaped.
</p>
<p>
The result string is always single shell word, even if the argument is
&quot;&quot;. Escape.shell_single_word(&quot;&quot;) returns
#&lt;Escape::ShellEscaped: &#8217;&#8217;&gt;.
</p>
<pre class="code">
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='shell_single_word identifier id'>shell_single_word</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::ShellEscaped: ''&gt;</span>
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='shell_single_word identifier id'>shell_single_word</span><span class='lparen token'>(</span><span class='string val'>&quot;foo&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::ShellEscaped: foo&gt;</span>
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='shell_single_word identifier id'>shell_single_word</span><span class='lparen token'>(</span><span class='string val'>&quot;*&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::ShellEscaped: '*'&gt;</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/esc.rb', line 102</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0/lib/esc.rb#L102">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='shell_single_word identifier id'>shell_single_word</span><span class='lparen token'>(</span><span class='str identifier id'>str</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='unless unless_mod kw'>unless</span> <span class='str identifier id'>str</span>
  <span class='str identifier id'>str</span> <span class='opasgn op'>&amp;&amp;=</span> <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='comment val'># Delano fix</span>
  <span class='if if kw'>if</span> <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='ShellEscaped constant id'>ShellEscaped</span><span class='dot token'>.</span><span class='new_no_dup identifier id'>new_no_dup</span><span class='lparen token'>(</span><span class='string val'>&quot;''&quot;</span><span class='rparen token'>)</span>
  <span class='elsif elsif kw'>elsif</span> <span class='regexp val'>%r{\A[0-9A-Za-z+,./:=@_-]+\z}</span> <span class='match op'>=~</span> <span class='str identifier id'>str</span>
    <span class='ShellEscaped constant id'>ShellEscaped</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='str identifier id'>str</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='string val'>''</span>
    <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='scan identifier id'>scan</span><span class='lparen token'>(</span><span class='regexp val'>/('+)|[^']+/</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='if if kw'>if</span> <span class='$1 nth_ref id'>$1</span>
        <span class='result identifier id'>result</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>%q{\'}</span> <span class='mult op'>*</span> <span class='$1 nth_ref id'>$1</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
      <span class='else else kw'>else</span>
        <span class='result identifier id'>result</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;'#{$&amp;}'&quot;</span>
      <span class='end end kw'>end</span>
    <span class='rbrace token'>}</span>
    <span class='ShellEscaped constant id'>ShellEscaped</span><span class='dot token'>.</span><span class='new_no_dup identifier id'>new_no_dup</span><span class='lparen token'>(</span><span class='result identifier id'>result</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>uri_path</h3>
</div><div id="uri_path-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>uri_path</span><span class='args'>(str)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Escape.uri_path escapes URI path using percent-encoding. The given path
should be a sequence of (non-escaped) segments separated by &quot;/&quot;.
The segments cannot contains &quot;/&quot;. It returns an instance of
PercentEncoded.
</p>
<pre class="code">
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='uri_path identifier id'>uri_path</span><span class='lparen token'>(</span><span class='string val'>&quot;a/b/c&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::PercentEncoded: a/b/c&gt;</span>
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='uri_path identifier id'>uri_path</span><span class='lparen token'>(</span><span class='string val'>&quot;a?b/c?d/e?f&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::PercentEncoded: a%3Fb/c%3Fd/e%3Ff&gt;</span>
</pre>
<p>
The path is the part after authority before query in URI, as follows.
</p>
<pre class="code">
  <span class='scheme identifier id'>scheme</span><span class='symbol val'>:/</span><span class='regexp val'>/authority/</span><span class='path identifier id'>path</span><span class='comment val'>#fragment</span>
</pre>
<p>
See RFC 3986 for details of URI.
</p>
<p>
Note that this function is not appropriate to convert OS path to URI.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/esc.rb', line 160</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0/lib/esc.rb#L160">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">160
161
162
163</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='uri_path identifier id'>uri_path</span><span class='lparen token'>(</span><span class='str identifier id'>str</span><span class='rparen token'>)</span>
  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>%r{[^/]+}n</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='uri_segment identifier id'>uri_segment</span><span class='lparen token'>(</span><span class='$&amp; back_ref id'>$&amp;</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='PercentEncoded constant id'>PercentEncoded</span><span class='dot token'>.</span><span class='new_no_dup identifier id'>new_no_dup</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>uri_segment</h3>
</div><div id="uri_segment-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>uri_segment</span><span class='args'>(str)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Escape.uri_segment escapes URI segment using percent-encoding. It returns
an instance of PercentEncoded.
</p>
<pre class="code">
 <span class='Escape constant id'>Escape</span><span class='dot token'>.</span><span class='uri_segment identifier id'>uri_segment</span><span class='lparen token'>(</span><span class='string val'>&quot;a/b&quot;</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; #&lt;Escape::PercentEncoded: a%2Fb&gt;</span>
</pre>
<p>
The segment is &quot;/&quot;-splitted element after authority before query
in URI, as follows.
</p>
<pre class="code">
  <span class='scheme identifier id'>scheme</span><span class='symbol val'>:/</span><span class='regexp val'>/authority/s</span><span class='egment1 identifier id'>egment1</span><span class='div op'>/</span><span class='segment2 identifier id'>segment2</span><span class='div op'>/</span><span class='dot3 op'>...</span><span class='regexp val'>/segmentN?query#fragment
</span></pre>
<p>
See RFC 3986 for details of URI.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/esc.rb', line 135</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/delano/rye/blob/197018175bfc197a70b8dd756b683d6759fe55e0/lib/esc.rb#L135">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">135
136
137
138
139
140
141
142
143</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='uri_segment identifier id'>uri_segment</span><span class='lparen token'>(</span><span class='str identifier id'>str</span><span class='rparen token'>)</span>
  <span class='comment val'># pchar - pct-encoded = unreserved / sub-delims / &quot;:&quot; / &quot;@&quot;</span>
  <span class='comment val'># unreserved = ALPHA / DIGIT / &quot;-&quot; / &quot;.&quot; / &quot;_&quot; / &quot;~&quot;</span>
  <span class='comment val'># sub-delims = &quot;!&quot; / &quot;$&quot; / &quot;&amp;&quot; / &quot;'&quot; / &quot;(&quot; / &quot;)&quot; / &quot;*&quot; / &quot;+&quot; / &quot;,&quot; / &quot;;&quot; / &quot;=&quot;</span>
  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='str identifier id'>str</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>%r{[^A-Za-z0-9\-._~!$&amp;'()*+,;=:@]}n</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='string val'>'%'</span> <span class='plus op'>+</span> <span class='$&amp; back_ref id'>$&amp;</span><span class='dot token'>.</span><span class='unpack identifier id'>unpack</span><span class='lparen token'>(</span><span class='string val'>&quot;H2&quot;</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='upcase identifier id'>upcase</span>
  <span class='rbrace token'>}</span>
  <span class='PercentEncoded constant id'>PercentEncoded</span><span class='dot token'>.</span><span class='new_no_dup identifier id'>new_no_dup</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>