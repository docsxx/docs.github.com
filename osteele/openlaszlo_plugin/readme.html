<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="syntax_highlight.css" type="text/css" charset="utf-8" />

    <title>README</title>
  </head>
  <body>
    <div id="content">
      <div class="section docstring readme">
        <h1>OpenLaszlo Rails Plugin</h1>
<p>
The OpenLaszlo Rails plugin makes it easy to use OpenLaszlo[openlaszlo.org]
client-side applications with Rails. It includes a generator and helper for
creating OpenLaszlo applications and displaying them within Rails views.
</p>
<p>
For example, the following shell command will create an OpenLaszlo
application named <tt>applet</tt>, and a view named
<tt>controller/index</tt>. Requesting the view will recompile the applet.
</p>
<pre class="code">
  $ <span class='dot token'>.</span><span class='div op'>/</span><span class='script identifier id'>script</span><span class='div op'>/</span><span class='generate identifier id'>generate</span> <span class='applet identifier id'>applet</span> <span class='contact identifier id'>contact</span> <span class='applet identifier id'>applet</span>
</pre>
<h3>View Helper</h3>
<p>
The plugin introduces two view helpers. <tt>swfobject_tag</tt> generates
code that embeds a flash object in the page (using the
swfobject[http://code.google.com/p/swfobject/] JavaScript library).
<tt>applet_tag</tt> additionally recompiles the applet if it is out of
date, and swaps in a version of the applet compiled with the debug flag set
if the <tt>debug</tt> query parameter is present in the request that
resulted in the call &#8212; both of these additional features are
available only in development mode.
</p>
<h3>Generators</h3>
<p>
The plugin defines the following generators, that can be used to quickly
create an OpenLaszlo stub application and a view that displays it.
</p>
<p>
This generates an OpenLaszlo source file in <tt>app/applets/my-app</tt>:
</p>
<pre class="code">
  $ <span class='dot token'>.</span><span class='div op'>/</span><span class='script identifier id'>script</span><span class='div op'>/</span><span class='generate identifier id'>generate</span> <span class='applet identifier id'>applet</span> <span class='my identifier id'>my</span><span class='minus op'>-</span><span class='app identifier id'>app</span>
</pre>
<p>
This also creates a model and view at <tt>/my-controller/index</tt> that
displays the applet. When the app&#8217;s source changes, requesting the
view recompiles the app.
</p>
<pre class="code">
  $ <span class='dot token'>.</span><span class='div op'>/</span><span class='script identifier id'>script</span><span class='div op'>/</span><span class='generate identifier id'>generate</span> <span class='applet identifier id'>applet</span> <span class='my identifier id'>my</span><span class='minus op'>-</span><span class='app identifier id'>app</span> <span class='my identifier id'>my</span><span class='minus op'>-</span><span class='controller identifier id'>controller</span> <span class='index identifier id'>index</span>
</pre>
<h3>Rails Tasks</h3>
<p>
The plugin defines the following tasks:
</p>
<pre class="code">
  <span class='comment val'># Recompile any applets in the app/applets directory</span>
  <span class='rake identifier id'>rake</span> <span class='openlaszlo identifier id'>openlaszlo</span><span class='symbol val'>:build</span><span class='symbol val'>:applets</span>

  <span class='comment val'># Clean the applets directory</span>
  <span class='rake identifier id'>rake</span> <span class='openlaszlo identifier id'>openlaszlo</span><span class='symbol val'>:clobber</span><span class='symbol val'>:applets</span>

  <span class='comment val'># Copies the swfobject javascripts to public/javascripts</span>
  <span class='rake identifier id'>rake</span> <span class='openlaszlo identifier id'>openlaszlo</span><span class='symbol val'>:install</span><span class='symbol val'>:javascripts</span>
</pre>
<h2>Requirements</h2>
<ul>
<li>Rails 2.0 or later. (Might work with earlier versions, but is untested with
them.)

</li>
<li>{OpenLaszlo 3.1 or later}[openlaszlo.org]

</li>
<li>The {OpenLaszlo ruby gem}[github.com/osteele/ropenlaszlo]

</li>
</ul>
<h2>Installation (using templates; for Rails 2.3 or later)</h2>
<p>
In Rails 2.3 or later, you can use the Rails template mechanism to install
the OpenLaszlo plugin and the gem that it depends on.
</p>
<p>
The template requires that you give it <tt>sudo</tt> access, in order to
run <tt>sudo rake gems:install</tt>. If you don&#8217;t want to or
can&#8217;t do this, you can use the instructions for previous versions of
Rails below.
</p>
<p>
To create a new Rails app:
</p>
<pre class="code">
  <span class='rails identifier id'>rails</span> <span class='webapp identifier id'>webapp</span> <span class='minus op'>-</span><span class='m identifier id'>m</span> <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gist.github.com/</span><span class='float val'>83809</span><span class='dot token'>.</span><span class='txt identifier id'>txt</span>
</pre>
<p>
To upgrade an existing app:
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='rails identifier id'>rails</span><span class='symbol val'>:template</span> <span class='LOCATION constant id'>LOCATION</span><span class='assign token'>=</span><span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gist.github.com/</span><span class='float val'>83809</span><span class='dot token'>.</span><span class='txt identifier id'>txt</span>
</pre>
<p>
To create a new Rails app, or upgrade an existing one, <b>and</b> create a
starter applet that&#8217;s served from <tt>/home/applet</tt>, do one of:
</p>
<pre class="code">
  <span class='generate identifier id'>generate</span><span class='assign token'>=</span><span class='myapp identifier id'>myapp</span> <span class='rails identifier id'>rails</span> <span class='webapp identifier id'>webapp</span> <span class='minus op'>-</span><span class='m identifier id'>m</span> <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gist.github.com/</span><span class='float val'>83809</span><span class='dot token'>.</span><span class='txt identifier id'>txt</span>
  <span class='generate identifier id'>generate</span><span class='assign token'>=</span><span class='myapp identifier id'>myapp</span> <span class='rake identifier id'>rake</span> <span class='rails identifier id'>rails</span><span class='symbol val'>:template</span> <span class='LOCATION constant id'>LOCATION</span><span class='assign token'>=</span><span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gist.github.com/</span><span class='float val'>83809</span><span class='dot token'>.</span><span class='txt identifier id'>txt</span>
</pre>
<h2>Installation (Rails 2.1 or later)</h2>
<p>
0: Install OpenLaszlo, Ruby, and Ruby on Rails.
</p>
<p>
1: In <tt>config/environment</tt>, place the following code inside the
<tt>Rails::Initializer.run</tt> block:
</p>
<pre class="code">
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>'ropenlaszlo'</span><span class='comma token'>,</span> <span class='symbol val'>:lib</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'openlaszlo'</span><span class='comma token'>,</span> <span class='symbol val'>:version</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'&gt;= 0.6.3'</span>
</pre>
<p>
2: Install the {ropenlaszlo}[github.com/osteele/ropenlaszlo] gem:
</p>
<pre class="code">
  $ <span class='sudo identifier id'>sudo</span> <span class='rake identifier id'>rake</span> <span class='gems identifier id'>gems</span><span class='symbol val'>:install</span>
</pre>
<p>
3: Install this plugin:
</p>
<pre class="code">
  $ <span class='dot token'>.</span><span class='div op'>/</span><span class='script identifier id'>script</span><span class='div op'>/</span><span class='plugin identifier id'>plugin</span> <span class='install identifier id'>install</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/o</span><span class='steele identifier id'>steele</span><span class='div op'>/</span><span class='openlaszlo identifier id'>openlaszlo</span><span class='minus op'>-</span><span class='plugin identifier id'>plugin</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
</pre>
<p>
4: Set the <tt>OPENLASZLO_HOME</tt> environment variable to the directory
that contains the OpenLaszlo SDK. The first line below is an example of
this in bash (although you will probably want to put this in your
<tt>.bashrc</tt> or <tt>.profile</tt> too). If you&#8217;re not using
Windows, the second line of shell script will tell you whether you&#8217;ve
set it right.
</p>
<pre class="code">
  $ <span class='export identifier id'>export</span> <span class='OPENLASZLO_HOME constant id'>OPENLASZLO_HOME</span><span class='assign token'>=</span><span class='string val'>&quot;/Applications/OpenLaszlo Server 4.2.0.2&quot;</span>
  $ <span class='grep identifier id'>grep</span> <span class='minus op'>-</span><span class='qs identifier id'>qs</span> <span class='Laszlo constant id'>Laszlo</span> <span class='string val'>&quot;$OPENLASZLO_HOME/README.txt&quot;</span> <span class='andop op'>&amp;&amp;</span> <span class='echo identifier id'>echo</span> <span class='yes identifier id'>yes</span> <span class='orop op'>||</span> <span class='echo identifier id'>echo</span> <span class='no identifier id'>no</span>
</pre>
<h2>Usage</h2>
<p>
In your RAILS application directory:
</p>
<p>
1: Create an applet, and a view that displays it:
</p>
<pre class="code">
  $ <span class='dot token'>.</span><span class='div op'>/</span><span class='script identifier id'>script</span><span class='div op'>/</span><span class='generate identifier id'>generate</span> <span class='applet identifier id'>applet</span> <span class='my identifier id'>my</span><span class='minus op'>-</span><span class='applet identifier id'>applet</span> <span class='controller identifier id'>controller</span> <span class='index identifier id'>index</span>
</pre>
<p>
2: Compile the applet (this step is optional):
</p>
<pre class="code">
  $ <span class='rake identifier id'>rake</span> <span class='openlaszlo identifier id'>openlaszlo</span><span class='symbol val'>:build</span><span class='symbol val'>:applets</span>
</pre>
<p>
Now launch the server (<tt>script/server</tt>), and you can view your
applet at <tt>http:127.0.0.1:3000/controller/index</tt>.
</p>
<h2>Using the Compile Server</h2>
<p>
The steps described above use the OpenLaszlo command-line compiler to
compile applications. A faster technique, although one that requires more
configuration, is to leave the OpenLaszlo server running as a compile
server.
</p>
<p>
The instructions for setting up an OpenLaszlo compile server are
{here}[http://wiki.github.com/osteele/openlaszlo-plugin/using-the-compile-server].
</p>
<h2>Resources</h2>
<ul>
<li>{OpenLaszlo Plugin Rubyforge project
page}[rubyforge.org/projects/laszlo-plugin]

</li>
<li>{OpenLaszlo Plugin Github repository}[github.com/osteele/openlaszlo-plugin]

</li>
<li>{OpenLaszlo Plugin Wiki}[wiki.github.com/osteele/openlaszlo-plugin]

</li>
<li>{OpenLaszlo Site}[openlaszlo.org]

</li>
<li>{OpenLaszlo Gem project page}[github.com/osteele/ropenlaszlo]

</li>
<li>{swfobject}[http://code.google.com/p/swfobject/]

</li>
</ul>
<h2>Authors</h2>
<ul>
<li>{Oliver Steele}[osteele.com]

</li>
<li>Max Carlson

</li>
</ul>

      </div>
    </div>
  </body>
</html>