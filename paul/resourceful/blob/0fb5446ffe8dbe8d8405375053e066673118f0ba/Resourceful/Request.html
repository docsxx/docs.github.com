<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>paul's resourceful - Class: Resourceful::Request - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/paul/commits/resourceful/master" rel="alternate" title="Recent Commits to resourceful:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("paul", "resourceful", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("paul", "resourceful", "0fb5446ffe8dbe8d8405375053e066673118f0ba", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/paul/resourceful/tree/">Source</a></li>
            <li class=""><a href="http://github.com/paul/resourceful/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/paul/resourceful/network">Network</a></li>            
            <li class=""><a href="http://github.com/paul/resourceful/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/paul/resourceful">Wiki</a></li>
            <li class=""><a href="http://github.com/paul/resourceful/graphs">Graphs</a></li>                    
            <li class="active"><a href="/paul/resourceful">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/paul">paul</a> / <b><a href="http://github.com/paul/resourceful/tree">resourceful</a></b>        
                <a id="namespaces_button" rel="paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Resourceful_Request">
  <h1>Class: Resourceful::Request</h1>
  <div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">accessor</td>
          <td class="readwrite">
            [<span id='accessor-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>accessor</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">body</td>
          <td class="readwrite">
            [<span id='body-instance_method'>R</span><span id='body=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>body</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">header</td>
          <td class="readwrite">
            [<span id='header-instance_method'>R</span><span id='header=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>header</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">method</td>
          <td class="readwrite">
            [<span id='method-instance_method'>R</span><span id='method=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>method</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">request_time</td>
          <td class="readwrite">
            [<span id='request_time-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>request_time</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">resource</td>
          <td class="readwrite">
            [<span id='resource-instance_method'>R</span><span id='resource=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>resource</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="CACHEABLE_METHODS-constant">CACHEABLE_METHODS</dt>
      <dd>[:get, :head]</dd>
    
      <dt id="INVALIDATING_METHODS-constant">INVALIDATING_METHODS</dt>
      <dd>[:post, :put, :delete]</dd>
    
      <dt id="REDIRECTABLE_METHODS-constant">REDIRECTABLE_METHODS</dt>
      <dd>[:get, :head]</dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(http_method, resource, body = nil, header = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Symbol</tt>]</span>
        <span class='name'>http_method</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
:get, :put, :post, :delete or :head
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt><a href="Resource.html" title="Resourceful::Resource">Resourceful::Resource</a></tt>]</span>
        <span class='name'>resource</span>
        
      </dt>
      <dd>
        <span class='desc'></span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>String</tt>]</span>
        <span class='name'>body</span>
        
      </dt>
      <dd>
        <span class='desc'></span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt><a href="Header.html" title="Resourceful::Header">Resourceful::Header</a></tt>, <tt>Hash</tt>]</span>
        <span class='name'>header</span>
        
      </dt>
      <dd>
        <span class='desc'></span>
      </dd>
    
  
  </dl>
</div>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 23</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L23">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='http_method identifier id'>http_method</span><span class='comma token'>,</span> <span class='resource identifier id'>resource</span><span class='comma token'>,</span> <span class='body identifier id'>body</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='header identifier id'>header</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='@method ivar id'>@method</span><span class='comma token'>,</span> <span class='@resource ivar id'>@resource</span><span class='comma token'>,</span> <span class='@body ivar id'>@body</span> <span class='assign token'>=</span> <span class='http_method identifier id'>http_method</span><span class='comma token'>,</span> <span class='resource identifier id'>resource</span><span class='comma token'>,</span> <span class='body identifier id'>body</span>
  <span class='@accessor ivar id'>@accessor</span> <span class='assign token'>=</span> <span class='@resource ivar id'>@resource</span><span class='dot token'>.</span><span class='accessor identifier id'>accessor</span>
  <span class='@header ivar id'>@header</span> <span class='assign token'>=</span> <span class='header identifier id'>header</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Resourceful constant id'>Resourceful</span><span class='colon2 op'>::</span><span class='Header constant id'>Header</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='header identifier id'>header</span> <span class='colon op'>:</span> <span class='Resourceful constant id'>Resourceful</span><span class='colon2 op'>::</span><span class='Header constant id'>Header</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='header identifier id'>header</span><span class='rparen token'>)</span>

  <span class='comment val'># Resourceful handled gzip encoding transparently, so set that up</span>
  <span class='@header ivar id'>@header</span><span class='dot token'>.</span><span class='accept_encoding identifier id'>accept_encoding</span> <span class='opasgn op'>||=</span> <span class='string val'>'gzip, identity'</span>

  <span class='comment val'># 'Host' is a required HTTP/1.1 header, overrides Host in user-provided headers</span>
  <span class='@header ivar id'>@header</span><span class='dot token'>.</span><span class='host identifier id'>host</span> <span class='assign token'>=</span> <span class='@resource ivar id'>@resource</span><span class='dot token'>.</span><span class='host identifier id'>host</span>

  <span class='comment val'># Setting the date isn't a bad idea, either</span>
  <span class='@header ivar id'>@header</span><span class='dot token'>.</span><span class='date identifier id'>date</span> <span class='opasgn op'>||=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span><span class='dot token'>.</span><span class='httpdate identifier id'>httpdate</span>

  <span class='comment val'># Add any auth credentials we might want</span>
  <span class='add_credentials! fid id'>add_credentials!</span>

<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_credentials-21-instance_method">#add_credentials!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Uses the auth manager to add any valid credentials to this request.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#cacheable-3F-instance_method">#cacheable?</span><span class='args'>(response)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is this request &amp; response permitted to be stored in this (private)
cache?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#cached_response-instance_method">#cached_response</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The cached response.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#fetch_response-instance_method">#fetch_response</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Performs all the work.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#follow_redirect-instance_method">#follow_redirect</span><span class='args'>(response)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Follow a redirect response.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#forces_revalidation-3F-instance_method">#forces_revalidation?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Does this request force us to revalidate the cache?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#invalidate_cache-instance_method">#invalidate_cache</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Invalidated the cache for this uri (eg, after a POST).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#invalidates_cache-3F-instance_method">#invalidates_cache?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Does this request invalidate the cache?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#logger-instance_method">#logger</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#max_age-instance_method">#max_age</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Indicates the maxmimum response age in seconds we are willing to accept.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#needs_authorization-3F-instance_method">#needs_authorization?</span><span class='args'>(response)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Does this request need to be authorized? Will only be true if we
haven&#8217;t already tried with auth.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#needs_revalidation-3F-instance_method">#needs_revalidation?</span><span class='args'>(response)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Do we need to revalidate our cache?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#perform-21-instance_method">#perform!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Perform the request, with no magic handling of anything.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#retry_with_auth-instance_method">#retry_with_auth</span><span class='args'>(response)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Add any auth headers from the response to the auth manager, and try the
request again.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#revalidate_cached_response-instance_method">#revalidate_cached_response</span><span class='args'>(not_modified_response)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Revalidate the cached response with what we got from a 304 response.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_validation_headers-21-instance_method">#set_validation_headers!</span><span class='args'>(response)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Set the validation headers of a request based on the response in the cache.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#should_be_redirected-3F-instance_method">#should_be_redirected?</span><span class='args'>(response)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is this a response a redirect, and are we permitted to follow it?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#skip_cache-3F-instance_method">#skip_cache?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Should we look for a response to this request in the cache?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#store_in_cache-instance_method">#store_in_cache</span><span class='args'>(response)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Store the response to this request in the cache.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#uri-instance_method">#uri</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>String</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>add_credentials!</h3>
</div><div id="add_credentials-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_credentials!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Uses the auth manager to add any valid credentials to this request
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 43</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L43">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">43
44
45</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_credentials! fid id'>add_credentials!</span>
  <span class='@accessor ivar id'>@accessor</span><span class='dot token'>.</span><span class='auth_manager identifier id'>auth_manager</span><span class='dot token'>.</span><span class='add_credentials identifier id'>add_credentials</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>cacheable?</h3>
</div><div id="cacheable-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cacheable?</span><span class='args'>(response)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is this request &amp; response permitted to be stored in this (private)
cache?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 150</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L150">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">150
151
152
153
154
155</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='cacheable? fid id'>cacheable?</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='unless unless_mod kw'>unless</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='success? fid id'>success?</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='unless unless_mod kw'>unless</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='in? fid id'>in?</span> <span class='CACHEABLE_METHODS constant id'>CACHEABLE_METHODS</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='header identifier id'>header</span><span class='dot token'>.</span><span class='cache_control identifier id'>cache_control</span> <span class='andop op'>&amp;&amp;</span> <span class='header identifier id'>header</span><span class='dot token'>.</span><span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'no-store'</span><span class='rparen token'>)</span>
  <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>cached_response</h3>
</div><div id="cached_response-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>cached_response</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The cached response
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 83</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L83">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">83
84
85
86
87
88
89
90
91
92</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='cached_response identifier id'>cached_response</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='skip_cache? fid id'>skip_cache?</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='@cached_response ivar id'>@cached_response</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='andop op'>&amp;&amp;</span> <span class='@already_checked_cache ivar id'>@already_checked_cache</span>
  <span class='@cached_response ivar id'>@cached_response</span> <span class='opasgn op'>||=</span> <span class='begin begin kw'>begin</span>
    <span class='@already_checked_cache ivar id'>@already_checked_cache</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='resp identifier id'>resp</span> <span class='assign token'>=</span> <span class='accessor identifier id'>accessor</span><span class='dot token'>.</span><span class='cache_manager identifier id'>cache_manager</span><span class='dot token'>.</span><span class='lookup identifier id'>lookup</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lparen token'>(</span><span class='string val'>&quot;    Retrieved from cache&quot;</span><span class='rparen token'>)</span>
    <span class='resp identifier id'>resp</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>fetch_response</h3>
</div><div id="fetch_response-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>fetch_response</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Performs all the work. Handles caching, redirects, auth retries, etc
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="UnsuccessfulHttpRequestError.html" title="UnsuccessfulHttpRequestError">UnsuccessfulHttpRequestError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 48</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L48">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='fetch_response identifier id'>fetch_response</span>
  <span class='if if kw'>if</span> <span class='cached_response identifier id'>cached_response</span>
    <span class='if if kw'>if</span> <span class='needs_revalidation? fid id'>needs_revalidation?</span><span class='lparen token'>(</span><span class='cached_response identifier id'>cached_response</span><span class='rparen token'>)</span>
      <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lparen token'>(</span><span class='string val'>&quot;    Cache needs revalidation&quot;</span><span class='rparen token'>)</span>
      <span class='set_validation_headers! fid id'>set_validation_headers!</span><span class='lparen token'>(</span><span class='cached_response identifier id'>cached_response</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='comment val'># We're done!</span>
      <span class='return return kw'>return</span> <span class='cached_response identifier id'>cached_response</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='perform! fid id'>perform!</span>

  <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='revalidate_cached_response identifier id'>revalidate_cached_response</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='cached_response identifier id'>cached_response</span> <span class='andop op'>&amp;&amp;</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='not_modified? fid id'>not_modified?</span>
  <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='follow_redirect identifier id'>follow_redirect</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>            <span class='if if_mod kw'>if</span> <span class='should_be_redirected? fid id'>should_be_redirected?</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='retry_with_auth identifier id'>retry_with_auth</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>            <span class='if if_mod kw'>if</span> <span class='needs_authorization? fid id'>needs_authorization?</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>

  <span class='raise identifier id'>raise</span> <span class='UnsuccessfulHttpRequestError constant id'>UnsuccessfulHttpRequestError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='response identifier id'>response</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='error? fid id'>error?</span>

  <span class='if if kw'>if</span> <span class='cacheable? fid id'>cacheable?</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
    <span class='store_in_cache identifier id'>store_in_cache</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='elsif elsif kw'>elsif</span> <span class='invalidates_cache? fid id'>invalidates_cache?</span>
    <span class='invalidate_cache identifier id'>invalidate_cache</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='response identifier id'>response</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>follow_redirect</h3>
</div><div id="follow_redirect-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>follow_redirect</span><span class='args'>(response)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Follow a redirect response
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="MalformedServerResponse.html" title="MalformedServerResponse">MalformedServerResponse</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 102</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L102">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='follow_redirect identifier id'>follow_redirect</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='MalformedServerResponse constant id'>MalformedServerResponse</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='response identifier id'>response</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='header identifier id'>header</span><span class='dot token'>.</span><span class='location identifier id'>location</span>
  <span class='if if kw'>if</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='moved_permanently? fid id'>moved_permanently?</span>
    <span class='new_uri identifier id'>new_uri</span> <span class='assign token'>=</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='header identifier id'>header</span><span class='dot token'>.</span><span class='location identifier id'>location</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lparen token'>(</span><span class='dstring node'>&quot;    Permanently redirected to #{new_uri} - Storing new location.&quot;</span><span class='rparen token'>)</span>
    <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='update_uri identifier id'>update_uri</span> <span class='new_uri identifier id'>new_uri</span>
    <span class='@header ivar id'>@header</span><span class='dot token'>.</span><span class='host identifier id'>host</span> <span class='assign token'>=</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='host identifier id'>host</span>
    <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='fetch_response identifier id'>fetch_response</span>
  <span class='elsif elsif kw'>elsif</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='see_other? fid id'>see_other?</span> <span class='comment val'># Always use GET for this redirect, regardless of initial method</span>
    <span class='redirected_resource identifier id'>redirected_resource</span> <span class='assign token'>=</span> <span class='Resourceful constant id'>Resourceful</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='accessor identifier id'>accessor</span><span class='comma token'>,</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='header identifier id'>header</span><span class='lbrack token'>[</span><span class='string val'>'Location'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rparen token'>)</span>
    <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='Request constant id'>Request</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:get</span><span class='comma token'>,</span> <span class='redirected_resource identifier id'>redirected_resource</span><span class='comma token'>,</span> <span class='body identifier id'>body</span><span class='comma token'>,</span> <span class='header identifier id'>header</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='fetch_response identifier id'>fetch_response</span>
  <span class='else else kw'>else</span>
    <span class='redirected_resource identifier id'>redirected_resource</span> <span class='assign token'>=</span> <span class='Resourceful constant id'>Resourceful</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='accessor identifier id'>accessor</span><span class='comma token'>,</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='header identifier id'>header</span><span class='lbrack token'>[</span><span class='string val'>'Location'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rparen token'>)</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lparen token'>(</span><span class='dstring node'>&quot;    Redirected to #{redirected_resource.uri} - Caching new location.&quot;</span><span class='rparen token'>)</span>
    <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='Request constant id'>Request</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='redirected_resource identifier id'>redirected_resource</span><span class='comma token'>,</span> <span class='body identifier id'>body</span><span class='comma token'>,</span> <span class='header identifier id'>header</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='fetch_response identifier id'>fetch_response</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>forces_revalidation?</h3>
</div><div id="forces_revalidation-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>forces_revalidation?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Does this request force us to revalidate the cache?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 208</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L208">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">208
209
210
211
212
213
214
215</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='forces_revalidation? fid id'>forces_revalidation?</span>
  <span class='if if kw'>if</span> <span class='max_age identifier id'>max_age</span> <span class='eq op'>==</span> <span class='integer val'>0</span> <span class='orop op'>||</span> <span class='header identifier id'>header</span><span class='dot token'>.</span><span class='cache_control identifier id'>cache_control</span> <span class='andop op'>&amp;&amp;</span> <span class='cc identifier id'>cc</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'no-cache'</span><span class='rparen token'>)</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lparen token'>(</span><span class='string val'>&quot;    Client forced revalidation&quot;</span><span class='rparen token'>)</span>
    <span class='true true kw'>true</span>
  <span class='else else kw'>else</span> 
    <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>invalidate_cache</h3>
</div><div id="invalidate_cache-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>invalidate_cache</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Invalidated the cache for this uri (eg, after a POST)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 145</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L145">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">145
146
147</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='invalidate_cache identifier id'>invalidate_cache</span>
  <span class='accessor identifier id'>accessor</span><span class='dot token'>.</span><span class='cache_manager identifier id'>cache_manager</span><span class='dot token'>.</span><span class='invalidate identifier id'>invalidate</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>invalidates_cache?</h3>
</div><div id="invalidates_cache-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>invalidates_cache?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Does this request invalidate the cache?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 158</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L158">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">158
159
160</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='invalidates_cache? fid id'>invalidates_cache?</span>
  <span class='return return kw'>return</span> <span class='true true kw'>true</span> <span class='if if_mod kw'>if</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='in? fid id'>in?</span> <span class='INVALIDATING_METHODS constant id'>INVALIDATING_METHODS</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>logger</h3>
</div><div id="logger-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>logger</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 226</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L226">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">226
227
228</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='logger identifier id'>logger</span>
  <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='logger identifier id'>logger</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>max_age</h3>
</div><div id="max_age-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>max_age</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Indicates the maxmimum response age in seconds we are willing to accept
</p>
<p>
Returns nil if we don&#8217;t care how old the response is
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 220</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L220">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">220
221
222
223
224</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='max_age identifier id'>max_age</span>
  <span class='if if kw'>if</span> <span class='header identifier id'>header</span><span class='lbrack token'>[</span><span class='string val'>'Cache-Control'</span><span class='rbrack token'>]</span> <span class='and and kw'>and</span> <span class='header identifier id'>header</span><span class='lbrack token'>[</span><span class='string val'>'Cache-Control'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'max-age'</span><span class='rparen token'>)</span>
    <span class='header identifier id'>header</span><span class='lbrack token'>[</span><span class='string val'>'Cache-Control'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>','</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='grep identifier id'>grep</span><span class='lparen token'>(</span><span class='regexp val'>/max-age/</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'='</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>needs_authorization?</h3>
</div><div id="needs_authorization-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>needs_authorization?</span><span class='args'>(response)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Does this request need to be authorized? Will only be true if we
haven&#8217;t already tried with auth
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 130</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L130">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">130
131
132</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='needs_authorization? fid id'>needs_authorization?</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='notop op'>!</span><span class='@already_tried_with_auth ivar id'>@already_tried_with_auth</span> <span class='andop op'>&amp;&amp;</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='unauthorized? fid id'>unauthorized?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>needs_revalidation?</h3>
</div><div id="needs_revalidation-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>needs_revalidation?</span><span class='args'>(response)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Do we need to revalidate our cache?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 187</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L187">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">187
188
189
190
191
192
193</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='needs_revalidation? fid id'>needs_revalidation?</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='true true kw'>true</span> <span class='if if_mod kw'>if</span> <span class='forces_revalidation? fid id'>forces_revalidation?</span>
  <span class='return return kw'>return</span> <span class='true true kw'>true</span> <span class='if if_mod kw'>if</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='stale? fid id'>stale?</span>
  <span class='return return kw'>return</span> <span class='true true kw'>true</span> <span class='if if_mod kw'>if</span> <span class='max_age identifier id'>max_age</span> <span class='andop op'>&amp;&amp;</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='current_age identifier id'>current_age</span> <span class='gt op'>&gt;</span> <span class='max_age identifier id'>max_age</span>
  <span class='return return kw'>return</span> <span class='true true kw'>true</span> <span class='if if_mod kw'>if</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='must_be_revalidated? fid id'>must_be_revalidated?</span>
  <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>perform!</h3>
</div><div id="perform-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>perform!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Perform the request, with no magic handling of anything.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 163</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L163">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">163
164
165
166
167
168
169
170
171
172
173</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='perform! fid id'>perform!</span>
  <span class='@request_time ivar id'>@request_time</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span><span class='lparen token'>(</span><span class='dstring node'>&quot;DEBUG: Request Header: #{@header.inspect}&quot;</span><span class='rparen token'>)</span>

  <span class='http_resp identifier id'>http_resp</span> <span class='assign token'>=</span> <span class='NetHttpAdapter constant id'>NetHttpAdapter</span><span class='dot token'>.</span><span class='make_request identifier id'>make_request</span><span class='lparen token'>(</span><span class='@method ivar id'>@method</span><span class='comma token'>,</span> <span class='@resource ivar id'>@resource</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span><span class='comma token'>,</span> <span class='@body ivar id'>@body</span><span class='comma token'>,</span> <span class='@header ivar id'>@header</span><span class='rparen token'>)</span>
  <span class='@response ivar id'>@response</span> <span class='assign token'>=</span> <span class='Resourceful constant id'>Resourceful</span><span class='colon2 op'>::</span><span class='Response constant id'>Response</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='http_resp identifier id'>http_resp</span><span class='rparen token'>)</span>
  <span class='@response ivar id'>@response</span><span class='dot token'>.</span><span class='request_time identifier id'>request_time</span> <span class='assign token'>=</span> <span class='@request_time ivar id'>@request_time</span>
  <span class='@response ivar id'>@response</span><span class='dot token'>.</span><span class='authoritative identifier id'>authoritative</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>

  <span class='@response ivar id'>@response</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>retry_with_auth</h3>
</div><div id="retry_with_auth-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>retry_with_auth</span><span class='args'>(response)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Add any auth headers from the response to the auth manager, and try the
request again
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 121</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L121">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">121
122
123
124
125
126
127</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='retry_with_auth identifier id'>retry_with_auth</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='@already_tried_with_auth ivar id'>@already_tried_with_auth</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lparen token'>(</span><span class='string val'>&quot;Authentication Required. Retrying with auth info&quot;</span><span class='rparen token'>)</span>
  <span class='accessor identifier id'>accessor</span><span class='dot token'>.</span><span class='auth_manager identifier id'>auth_manager</span><span class='dot token'>.</span><span class='associate_auth_info identifier id'>associate_auth_info</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='add_credentials! fid id'>add_credentials!</span>
  <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='fetch_response identifier id'>fetch_response</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>revalidate_cached_response</h3>
</div><div id="revalidate_cached_response-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>revalidate_cached_response</span><span class='args'>(not_modified_response)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Revalidate the cached response with what we got from a 304 response
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 95</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L95">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">95
96
97
98
99</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='revalidate_cached_response identifier id'>revalidate_cached_response</span><span class='lparen token'>(</span><span class='not_modified_response identifier id'>not_modified_response</span><span class='rparen token'>)</span>
  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lparen token'>(</span><span class='string val'>&quot;    Resource not modified&quot;</span><span class='rparen token'>)</span>
  <span class='cached_response identifier id'>cached_response</span><span class='dot token'>.</span><span class='revalidate! fid id'>revalidate!</span><span class='lparen token'>(</span><span class='not_modified_response identifier id'>not_modified_response</span><span class='rparen token'>)</span>
  <span class='cached_response identifier id'>cached_response</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_validation_headers!</h3>
</div><div id="set_validation_headers-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_validation_headers!</span><span class='args'>(response)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Set the validation headers of a request based on the response in the cache
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 196</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L196">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">196
197
198
199
200</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_validation_headers! fid id'>set_validation_headers!</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='@header ivar id'>@header</span><span class='lbrack token'>[</span><span class='string val'>'If-None-Match'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='header identifier id'>header</span><span class='lbrack token'>[</span><span class='string val'>'ETag'</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='header identifier id'>header</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>'ETag'</span><span class='rparen token'>)</span>
  <span class='@header ivar id'>@header</span><span class='lbrack token'>[</span><span class='string val'>'If-Modified-Since'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='header identifier id'>header</span><span class='lbrack token'>[</span><span class='string val'>'Last-Modified'</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='header identifier id'>header</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>'Last-Modified'</span><span class='rparen token'>)</span>
  <span class='@header ivar id'>@header</span><span class='lbrack token'>[</span><span class='string val'>'Cache-Control'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>'max-age=0'</span> <span class='if if_mod kw'>if</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='must_be_revalidated? fid id'>must_be_revalidated?</span>    
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>should_be_redirected?</h3>
</div><div id="should_be_redirected-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>should_be_redirected?</span><span class='args'>(response)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is this a response a redirect, and are we permitted to follow it?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 176</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L176">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">176
177
178
179
180
181
182
183
184</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='should_be_redirected? fid id'>should_be_redirected?</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='unless unless_mod kw'>unless</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='redirect? fid id'>redirect?</span>
  <span class='if if kw'>if</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='on_redirect identifier id'>on_redirect</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='return return kw'>return</span> <span class='true true kw'>true</span> <span class='if if_mod kw'>if</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='in? fid id'>in?</span> <span class='REDIRECTABLE_METHODS constant id'>REDIRECTABLE_METHODS</span>
    <span class='false false kw'>false</span>
  <span class='else else kw'>else</span>
    <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='on_redirect identifier id'>on_redirect</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>skip_cache?</h3>
</div><div id="skip_cache-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>skip_cache?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Should we look for a response to this request in the cache?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 77</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L77">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">77
78
79
80</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='skip_cache? fid id'>skip_cache?</span>
  <span class='return return kw'>return</span> <span class='true true kw'>true</span> <span class='unless unless_mod kw'>unless</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='in? fid id'>in?</span> <span class='CACHEABLE_METHODS constant id'>CACHEABLE_METHODS</span>
  <span class='header identifier id'>header</span><span class='dot token'>.</span><span class='cache_control identifier id'>cache_control</span> <span class='andop op'>&amp;&amp;</span> <span class='header identifier id'>header</span><span class='dot token'>.</span><span class='cache_control identifier id'>cache_control</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'no-cache'</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>store_in_cache</h3>
</div><div id="store_in_cache-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>store_in_cache</span><span class='args'>(response)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Store the response to this request in the cache
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 135</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L135">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">135
136
137
138
139
140
141
142</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='store_in_cache identifier id'>store_in_cache</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='comment val'># RFC2618 - 14.18 : A received message that does not have a Date header </span>
  <span class='comment val'># field MUST be assigned one by the recipient if the message will be cached </span>
  <span class='comment val'># by that recipient.</span>
  <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='header identifier id'>header</span><span class='dot token'>.</span><span class='date identifier id'>date</span> <span class='opasgn op'>||=</span> <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='response_time identifier id'>response_time</span><span class='dot token'>.</span><span class='httpdate identifier id'>httpdate</span>

  <span class='accessor identifier id'>accessor</span><span class='dot token'>.</span><span class='cache_manager identifier id'>cache_manager</span><span class='dot token'>.</span><span class='store identifier id'>store</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='response identifier id'>response</span><span class='rparen token'>)</span> 
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>uri</h3>
</div><div id="uri-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>String</tt></span>
    <span class='name'>uri</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>String</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
The URI against which this request will be, or was, made.
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/resourceful/request.rb', line 203</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paul/resourceful/blob/0fb5446ffe8dbe8d8405375053e066673118f0ba/lib/resourceful/request.rb#L203">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">203
204
205</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='uri identifier id'>uri</span>
  <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='uri identifier id'>uri</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>