<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>capistrano's capistrano - Class: Capistrano::Deploy::SCM::Git - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/capistrano/commits/capistrano/master" rel="alternate" title="Recent Commits to capistrano:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("capistrano", "capistrano", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("capistrano", "capistrano", "31e16a1c469f797fa4a35a68aecae1acd4d0f471", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/capistrano/capistrano/tree/">Source</a></li>
            <li class=""><a href="http://github.com/capistrano/capistrano/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/capistrano/capistrano/network">Network</a></li>            
            <li class=""><a href="http://github.com/capistrano/capistrano/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/capistrano/capistrano">Wiki</a></li>
            <li class=""><a href="http://github.com/capistrano/capistrano/graphs">Graphs</a></li>                    
            <li class="active"><a href="/capistrano/capistrano">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/capistrano">capistrano</a> / <b><a href="http://github.com/capistrano/capistrano/tree">capistrano</a></b>        
                <a id="namespaces_button" rel="capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Capistrano_Deploy_SCM_Git">
  <h1>Class: Capistrano::Deploy::SCM::Git</h1>
  <div class="section inheritance">
  <ul>
  <li><a href="Base.html" title="Capistrano::Deploy::SCM::Base">Capistrano::Deploy::SCM::Base</a></li><ul><li>Capistrano::Deploy::SCM::Git</li>
  </ul></ul>
</div><div class="section docstring">
  <p>
An SCM module for using Git as your source control tool with Capistrano
2.0. If you are using Capistrano 1.x, use this plugin instead:
</p>
<pre class="code">
  <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/scie.nti.st/</span><span class='integer val'>2007</span><span class='div op'>/</span><span class='integer val'>3</span><span class='div op'>/</span><span class='integer val'>16</span><span class='div op'>/</span><span class='capistrano identifier id'>capistrano</span><span class='minus op'>-</span><span class='with identifier id'>with</span><span class='minus op'>-</span><span class='git identifier id'>git</span><span class='minus op'>-</span><span class='shared identifier id'>shared</span><span class='minus op'>-</span><span class='repository identifier id'>repository</span>
</pre>
<p>
Assumes you are using a shared Git repository.
</p>
<p>
Parts of this plugin borrowed from Scott Chacon&#8217;s version, which I
found on the Capistrano mailing list but failed to be able to get working.
</p>
<p>
FEATURES:
</p>
<pre class="code">
  <span class='mult op'>*</span> <span class='Very constant id'>Very</span> <span class='simple identifier id'>simple</span><span class='comma token'>,</span> <span class='only identifier id'>only</span> <span class='requiring identifier id'>requiring</span> <span class='integer val'>2</span> <span class='lines identifier id'>lines</span> <span class='in in kw'>in</span> <span class='your identifier id'>your</span> <span class='deploy identifier id'>deploy</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span><span class='dot token'>.</span>
  <span class='mult op'>*</span> <span class='Can constant id'>Can</span> <span class='deploy identifier id'>deploy</span> <span class='different identifier id'>different</span> <span class='branches identifier id'>branches</span><span class='comma token'>,</span> <span class='tags identifier id'>tags</span><span class='comma token'>,</span> <span class='or or kw'>or</span> <span class='any identifier id'>any</span> <span class='SHA1 constant id'>SHA1</span> <span class='easily identifier id'>easily</span><span class='dot token'>.</span>
  <span class='mult op'>*</span> <span class='Supports constant id'>Supports</span> <span class='prompting identifier id'>prompting</span> <span class='for for kw'>for</span> <span class='password identifier id'>password</span> <span class='div op'>/</span> <span class='passphrase identifier id'>passphrase</span> <span class='upon identifier id'>upon</span> <span class='checkout identifier id'>checkout</span><span class='dot token'>.</span>
    <span class='lparen token'>(</span><span class='I constant id'>I</span> <span class='am identifier id'>am</span> <span class='amazed identifier id'>amazed</span> <span class='at identifier id'>at</span> <span class='how identifier id'>how</span> <span class='some identifier id'>some</span> <span class='plugins identifier id'>plugins</span> <span class='don identifier id'>don</span><span class='string val'>'t do this)
  * Supports :scm_command, :scm_password, :scm_passphrase Capistrano
    directives.
</span></pre>
<p>
CONFIGURATION
</p>
<hr size="10"></hr><p>
Use this plugin by adding the following line in your config/deploy.rb:
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:scm</span><span class='comma token'>,</span> <span class='symbol val'>:git</span>
</pre>
<p>
Set <tt>:repository</tt> to the path of your Git repo:
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:repository</span><span class='comma token'>,</span> <span class='string val'>&quot;someuser@somehost:/home/myproject&quot;</span>
</pre>
<p>
The above two options are required to be set, the ones below are optional.
</p>
<p>
You may set <tt>:branch</tt>, which is the reference to the branch, tag, or
any SHA1 you are deploying, for example:
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:branch</span><span class='comma token'>,</span> <span class='string val'>&quot;master&quot;</span>
</pre>
<p>
Otherwise, HEAD is assumed. I strongly suggest you set this. HEAD is not
always the best assumption.
</p>
<p>
You may also set <tt>:remote</tt>, which will be used as a name for remote
tracking of repositories. This option is intended for use with the
<tt>:remote_cache</tt> strategy in a distributed git environment.
</p>
<p>
For example in the projects <tt>config/deploy.rb</tt>:
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:repository</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{scm_user}@somehost:~/projects/project.git&quot;</span>
  <span class='set identifier id'>set</span> <span class='symbol val'>:remote</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{scm_user}&quot;</span>
</pre>
<p>
Then each person with deploy priveledges can add the following to their
local <tt>~/.caprc</tt> file:
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:scm_user</span><span class='comma token'>,</span> <span class='string val'>'someuser'</span>
</pre>
<p>
Now any time a person deploys the project, their repository will be setup
as a remote git repository within the cached repository.
</p>
<p>
The <tt>:scm_command</tt> configuration variable, if specified, will be
used as the full path to the git executable on the <b>remote</b> machine:
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:scm_command</span><span class='comma token'>,</span> <span class='string val'>&quot;/opt/local/bin/git&quot;</span>
</pre>
<p>
For compatibility with deploy scripts that may have used the 1.x version of
this plugin before upgrading, <tt>:git</tt> is still recognized as an alias
for :scm_command.
</p>
<p>
Set <tt>:scm_password</tt> to the password needed to clone your repo if you
don&#8217;t have password-less (public key) entry:
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:scm_password</span><span class='comma token'>,</span> <span class='string val'>&quot;my_secret'
</span></pre>
<p>
Otherwise, you will be prompted for a password.
</p>
<p>
<tt>:scm_passphrase</tt> is also supported.
</p>
<p>
The remote cache strategy is also supported.
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:repository_cache</span><span class='comma token'>,</span> <span class='string val'>&quot;git_master&quot;</span>
  <span class='set identifier id'>set</span> <span class='symbol val'>:deploy_via</span><span class='comma token'>,</span> <span class='symbol val'>:remote_cache</span>
</pre>
<p>
For faster clone, you can also use shallow cloning. This will set the
&#8217;--depth&#8217; flag using the depth specified. This
<b>cannot</b> be used together with the :remote_cache strategy
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:git_shallow_clone</span><span class='comma token'>,</span> <span class='integer val'>1</span>
</pre>
<p>
For those that don&#8217;t like to leave your entire repository on your
production server you can:
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:deploy_via</span><span class='comma token'>,</span> <span class='symbol val'>:export</span>
</pre>
<p>
To deploy from a local repository:
</p>
<pre class="code">
  <span class='set identifier id'>set</span> <span class='symbol val'>:repository</span><span class='comma token'>,</span> <span class='string val'>&quot;file://.&quot;</span>
  <span class='set identifier id'>set</span> <span class='symbol val'>:deploy_via</span><span class='comma token'>,</span> <span class='symbol val'>:copy</span>
</pre>
<p>
AUTHORS
</p>
<hr size="5"></hr><p>
Garry Dolley http://scie.nti.st Contributions by Geoffrey Grosenbach
http://topfunky.com
</p>
<pre class="code">
             <span class='Scott constant id'>Scott</span> <span class='Chacon constant id'>Chacon</span> <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/jointheconversation.org
                         Alex Arnell http:/</span><span class='div op'>/</span><span class='twologic identifier id'>twologic</span><span class='dot token'>.</span><span class='com identifier id'>com</span>
                                  <span class='and and kw'>and</span> <span class='Phillip constant id'>Phillip</span> <span class='Goldenburg constant id'>Goldenburg</span>
</pre>

</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <p class="inherited_msg">
    This class inherits a constructor from <a href="Base.html#initialize-instance_method" title="Capistrano::Deploy::SCM::Base">Capistrano::Deploy::SCM::Base</a>.
  </p>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <div class="inherited">
  
  <div>
    <h2>Public Class Methods Inherited from <a href="Base.html" title="Capistrano::Deploy::SCM::Base">Capistrano::Deploy::SCM::Base</a></h2>
    <p><span class='name'><a href="Base.html#default_command-class_method" title="default_command">default_command</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#checkout-instance_method">#checkout</span><span class='args'>(revision, destination)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Performs a clone on the remote machine, then checkout on the branch you
want to deploy.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#command-instance_method">#command</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#diff-instance_method">#diff</span><span class='args'>(from, to = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a string of diffs between two revisions.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#export-instance_method">#export</span><span class='args'>(revision, destination)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
An expensive export.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#handle_data-instance_method">#handle_data</span><span class='args'>(state, stream, text)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Determines what the response should be for a particular bit of text from
the SCM.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#head-instance_method">#head</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
When referencing &quot;head&quot;, use the branch we want to deploy or, by
default, Git&#8217;s reference of HEAD (the latest changeset in the default
branch, usually called &quot;master&quot;).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#log-instance_method">#log</span><span class='args'>(from, to = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a log of changes between the two revisions (inclusive).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#origin-instance_method">#origin</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#query_revision-instance_method">#query_revision</span><span class='args'>(revision)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Getting the actual commit id, in case we were passed a tag or partial sha
or something - it will return the sha if you pass a sha, too.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#sync-instance_method">#sync</span><span class='args'>(revision, destination)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Merges the changes to &#8216;head&#8217; since the last fetch, for
remote_cache deployment strategy.
</p>

        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h2>Public Instance Methods Inherited from <a href="Base.html" title="Capistrano::Deploy::SCM::Base">Capistrano::Deploy::SCM::Base</a></h2>
    <p><span class='name'><a href="Base.html#local-instance_method" title="local">local</a></span>, <span class='name'><a href="Base.html#local%3F-instance_method" title="local?">local?</a></span>, <span class='name'><a href="Base.html#next_revision-instance_method" title="next_revision">next_revision</a></span>, <span class='name'><a href="Base.html#scm-instance_method" title="scm">scm</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>checkout</h3>
</div><div id="checkout-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>checkout</span><span class='args'>(revision, destination)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Performs a clone on the remote machine, then checkout on the branch you
want to deploy.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/capistrano/recipes/deploy/scm/git.rb', line 132</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471/lib/capistrano/recipes/deploy/scm/git.rb#L132">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='checkout identifier id'>checkout</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='comma token'>,</span> <span class='destination identifier id'>destination</span><span class='rparen token'>)</span>
  <span class='git identifier id'>git</span>    <span class='assign token'>=</span> <span class='command identifier id'>command</span>
  <span class='remote identifier id'>remote</span> <span class='assign token'>=</span> <span class='origin identifier id'>origin</span>

  <span class='args identifier id'>args</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='args identifier id'>args</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;-o #{remote}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='remote identifier id'>remote</span> <span class='eq op'>==</span> <span class='string val'>'origin'</span>
  <span class='if if kw'>if</span> <span class='depth identifier id'>depth</span> <span class='assign token'>=</span> <span class='configuration identifier id'>configuration</span><span class='lbrack token'>[</span><span class='symbol val'>:git_shallow_clone</span><span class='rbrack token'>]</span>
    <span class='args identifier id'>args</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;--depth #{depth}&quot;</span>
  <span class='end end kw'>end</span>

  <span class='execute identifier id'>execute</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='if if kw'>if</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} clone #{verbose} #{configuration[:repository]} #{destination}&quot;</span>
  <span class='else else kw'>else</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} clone #{verbose} #{args.join(' ')} #{configuration[:repository]} #{destination}&quot;</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># checkout into a local branch rather than a detached HEAD</span>
  <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;cd #{destination} &amp;&amp; #{git} checkout #{verbose} -b deploy #{revision}&quot;</span>
  
  <span class='if if kw'>if</span> <span class='configuration identifier id'>configuration</span><span class='lbrack token'>[</span><span class='symbol val'>:git_enable_submodules</span><span class='rbrack token'>]</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} submodule #{verbose} init&quot;</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} submodule #{verbose} sync&quot;</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} submodule #{verbose} update&quot;</span>
  <span class='end end kw'>end</span>

  <span class='execute identifier id'>execute</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot; &amp;&amp; &quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>command</h3>
</div><div id="command-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>command</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/capistrano/recipes/deploy/scm/git.rb', line 235</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471/lib/capistrano/recipes/deploy/scm/git.rb#L235">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">235
236
237
238</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='command identifier id'>command</span>
  <span class='comment val'># For backwards compatibility with 1.x version of this module</span>
  <span class='configuration identifier id'>configuration</span><span class='lbrack token'>[</span><span class='symbol val'>:git</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='super super kw'>super</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>diff</h3>
</div><div id="diff-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>diff</span><span class='args'>(from, to = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a string of diffs between two revisions
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/capistrano/recipes/deploy/scm/git.rb', line 205</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471/lib/capistrano/recipes/deploy/scm/git.rb#L205">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">205
206
207
208</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='diff identifier id'>diff</span><span class='lparen token'>(</span><span class='from identifier id'>from</span><span class='comma token'>,</span> <span class='to identifier id'>to</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='from identifier id'>from</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;..#{to}&quot;</span> <span class='if if_mod kw'>if</span> <span class='to identifier id'>to</span>
  <span class='scm identifier id'>scm</span> <span class='symbol val'>:diff</span><span class='comma token'>,</span> <span class='from identifier id'>from</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>export</h3>
</div><div id="export-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>export</span><span class='args'>(revision, destination)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
An expensive export. Performs a checkout as above, then removes the repo.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/capistrano/recipes/deploy/scm/git.rb', line 163</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471/lib/capistrano/recipes/deploy/scm/git.rb#L163">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">163
164
165</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='export identifier id'>export</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='comma token'>,</span> <span class='destination identifier id'>destination</span><span class='rparen token'>)</span>
  <span class='checkout identifier id'>checkout</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='comma token'>,</span> <span class='destination identifier id'>destination</span><span class='rparen token'>)</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot; &amp;&amp; rm -Rf #{destination}/.git&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_data</h3>
</div><div id="handle_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_data</span><span class='args'>(state, stream, text)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Determines what the response should be for a particular bit of text from
the SCM. Password prompts, connection requests, passphrases, etc. are
handled here.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/capistrano/recipes/deploy/scm/git.rb', line 243</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471/lib/capistrano/recipes/deploy/scm/git.rb#L243">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='handle_data identifier id'>handle_data</span><span class='lparen token'>(</span><span class='state identifier id'>state</span><span class='comma token'>,</span> <span class='stream identifier id'>stream</span><span class='comma token'>,</span> <span class='text identifier id'>text</span><span class='rparen token'>)</span>
  <span class='host identifier id'>host</span> <span class='assign token'>=</span> <span class='state identifier id'>state</span><span class='lbrack token'>[</span><span class='symbol val'>:channel</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:host</span><span class='rbrack token'>]</span>
  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='dstring node'>&quot;[#{host} :: #{stream}] #{text}&quot;</span>
  <span class='case case kw'>case</span> <span class='text identifier id'>text</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/\bpassword.*:/i</span>
    <span class='comment val'># git is prompting for a password</span>
    <span class='unless unless kw'>unless</span> <span class='pass identifier id'>pass</span> <span class='assign token'>=</span> <span class='configuration identifier id'>configuration</span><span class='lbrack token'>[</span><span class='symbol val'>:scm_password</span><span class='rbrack token'>]</span>
      <span class='pass identifier id'>pass</span> <span class='assign token'>=</span> <span class='Capistrano constant id'>Capistrano</span><span class='colon2 op'>::</span><span class='CLI constant id'>CLI</span><span class='dot token'>.</span><span class='password_prompt identifier id'>password_prompt</span>
    <span class='end end kw'>end</span>
    <span class='dstring node'>&quot;#{pass}\n&quot;</span>
  <span class='when when kw'>when</span> <span class='regexp val'>%r{\(yes/no\)}</span>
    <span class='comment val'># git is asking whether or not to connect</span>
    <span class='string val'>&quot;yes\n&quot;</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/passphrase/i</span>
    <span class='comment val'># git is asking for the passphrase for the user's key</span>
    <span class='unless unless kw'>unless</span> <span class='pass identifier id'>pass</span> <span class='assign token'>=</span> <span class='configuration identifier id'>configuration</span><span class='lbrack token'>[</span><span class='symbol val'>:scm_passphrase</span><span class='rbrack token'>]</span>
      <span class='pass identifier id'>pass</span> <span class='assign token'>=</span> <span class='Capistrano constant id'>Capistrano</span><span class='colon2 op'>::</span><span class='CLI constant id'>CLI</span><span class='dot token'>.</span><span class='password_prompt identifier id'>password_prompt</span>
    <span class='end end kw'>end</span>
    <span class='dstring node'>&quot;#{pass}\n&quot;</span>
  <span class='when when kw'>when</span> <span class='regexp val'>/accept \(t\)emporarily/</span>
    <span class='comment val'># git is asking whether to accept the certificate</span>
    <span class='string val'>&quot;t\n&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>head</h3>
</div><div id="head-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>head</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
When referencing &quot;head&quot;, use the branch we want to deploy or, by
default, Git&#8217;s reference of HEAD (the latest changeset in the default
branch, usually called &quot;master&quot;).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/capistrano/recipes/deploy/scm/git.rb', line 122</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471/lib/capistrano/recipes/deploy/scm/git.rb#L122">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">122
123
124</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='head identifier id'>head</span>
  <span class='configuration identifier id'>configuration</span><span class='lbrack token'>[</span><span class='symbol val'>:branch</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='string val'>'HEAD'</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>log</h3>
</div><div id="log-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>log</span><span class='args'>(from, to = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a log of changes between the two revisions (inclusive).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/capistrano/recipes/deploy/scm/git.rb', line 211</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471/lib/capistrano/recipes/deploy/scm/git.rb#L211">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">211
212
213</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='log identifier id'>log</span><span class='lparen token'>(</span><span class='from identifier id'>from</span><span class='comma token'>,</span> <span class='to identifier id'>to</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='scm identifier id'>scm</span> <span class='symbol val'>:log</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{from}..#{to}&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>origin</h3>
</div><div id="origin-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>origin</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/capistrano/recipes/deploy/scm/git.rb', line 126</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471/lib/capistrano/recipes/deploy/scm/git.rb#L126">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">126
127
128</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='origin identifier id'>origin</span>
  <span class='configuration identifier id'>configuration</span><span class='lbrack token'>[</span><span class='symbol val'>:remote</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='string val'>'origin'</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>query_revision</h3>
</div><div id="query_revision-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>query_revision</span><span class='args'>(revision)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Getting the actual commit id, in case we were passed a tag or partial sha
or something - it will return the sha if you pass a sha, too
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>ArgumentError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/capistrano/recipes/deploy/scm/git.rb', line 217</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471/lib/capistrano/recipes/deploy/scm/git.rb#L217">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='query_revision identifier id'>query_revision</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Deploying remote branches is no longer supported.  Specify the remote branch as a local branch for the git repository you're deploying from (ie: '#{revision.gsub('origin/', '')}' rather than '#{revision}').&quot;</span> <span class='if if_mod kw'>if</span> <span class='revision identifier id'>revision</span> <span class='match op'>=~</span> <span class='regexp val'>/^origin\//</span>
  <span class='return return kw'>return</span> <span class='revision identifier id'>revision</span> <span class='if if_mod kw'>if</span> <span class='revision identifier id'>revision</span> <span class='match op'>=~</span> <span class='regexp val'>/^[0-9a-f]{40}$/</span>
  <span class='command identifier id'>command</span> <span class='assign token'>=</span> <span class='scm identifier id'>scm</span><span class='lparen token'>(</span><span class='string val'>'ls-remote'</span><span class='comma token'>,</span> <span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='revision identifier id'>revision</span><span class='rparen token'>)</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='command identifier id'>command</span><span class='rparen token'>)</span>
  <span class='revdata identifier id'>revdata</span> <span class='assign token'>=</span> <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>/[\t\n]/</span><span class='rparen token'>)</span>
  <span class='newrev identifier id'>newrev</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='revdata identifier id'>revdata</span><span class='dot token'>.</span><span class='each_slice identifier id'>each_slice</span><span class='lparen token'>(</span><span class='integer val'>2</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='refs identifier id'>refs</span><span class='bitor op'>|</span>
    <span class='rev identifier id'>rev</span><span class='comma token'>,</span> <span class='ref identifier id'>ref</span> <span class='assign token'>=</span> <span class='mult op'>*</span><span class='refs identifier id'>refs</span>
    <span class='if if kw'>if</span> <span class='ref identifier id'>ref</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/refs\/.*?\//</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span> <span class='eq op'>==</span> <span class='revision identifier id'>revision</span>
      <span class='newrev identifier id'>newrev</span> <span class='assign token'>=</span> <span class='rev identifier id'>rev</span>
      <span class='break break kw'>break</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Unable to resolve revision for '#{revision}' on repository '#{repository}'.&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='newrev identifier id'>newrev</span> <span class='match op'>=~</span> <span class='regexp val'>/^[0-9a-f]{40}$/</span>
  <span class='return return kw'>return</span> <span class='newrev identifier id'>newrev</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>sync</h3>
</div><div id="sync-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>sync</span><span class='args'>(revision, destination)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Merges the changes to &#8216;head&#8217; since the last fetch, for
remote_cache deployment strategy
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/capistrano/recipes/deploy/scm/git.rb', line 169</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/capistrano/capistrano/blob/31e16a1c469f797fa4a35a68aecae1acd4d0f471/lib/capistrano/recipes/deploy/scm/git.rb#L169">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='sync identifier id'>sync</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='comma token'>,</span> <span class='destination identifier id'>destination</span><span class='rparen token'>)</span>
  <span class='git identifier id'>git</span>     <span class='assign token'>=</span> <span class='command identifier id'>command</span>
  <span class='remote identifier id'>remote</span>  <span class='assign token'>=</span> <span class='origin identifier id'>origin</span>

  <span class='execute identifier id'>execute</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;cd #{destination}&quot;</span>

  <span class='comment val'># Use git-config to setup a remote tracking branches. Could use</span>
  <span class='comment val'># git-remote but it complains when a remote of the same name already</span>
  <span class='comment val'># exists, git-config will just silenty overwrite the setting every</span>
  <span class='comment val'># time. This could cause wierd-ness in the remote cache if the url</span>
  <span class='comment val'># changes between calls, but as long as the repositories are all</span>
  <span class='comment val'># based from each other it should still work fine.</span>
  <span class='if if kw'>if</span> <span class='remote identifier id'>remote</span> <span class='neq op'>!=</span> <span class='string val'>'origin'</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} config remote.#{remote}.url #{configuration[:repository]}&quot;</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} config remote.#{remote}.fetch +refs/heads/*:refs/remotes/#{remote}/*&quot;</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># since we're in a local branch already, just reset to specified revision rather than merge</span>
  <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} fetch #{verbose} #{remote} &amp;&amp; #{git} reset #{verbose} --hard #{revision}&quot;</span>

  <span class='if if kw'>if</span> <span class='configuration identifier id'>configuration</span><span class='lbrack token'>[</span><span class='symbol val'>:git_enable_submodules</span><span class='rbrack token'>]</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} submodule #{verbose} init&quot;</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;for mod in `#{git} submodule status | awk '{ print $2 }'`; do #{git} config -f .git/config submodule.${mod}.url `#{git} config -f .gitmodules --get submodule.${mod}.url` &amp;&amp; echo Synced $mod; done&quot;</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} submodule #{verbose} sync&quot;</span>
    <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} submodule #{verbose} update&quot;</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Make sure there's nothing else lying around in the repository (for</span>
  <span class='comment val'># example, a submodule that has subsequently been removed).</span>
  <span class='execute identifier id'>execute</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{git} clean #{verbose} -d -x -f&quot;</span>

  <span class='execute identifier id'>execute</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot; &amp;&amp; &quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>