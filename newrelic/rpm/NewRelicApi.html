<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: NewRelicApi</title>
  </head>
  <body>
    <div id="content">
      <div class="section module NewRelicApi">
  <h1 class="title">Module: NewRelicApi</h1>
  <div class="section docstring">
  <p>
Ruby lib for working with the New Relic API&#8217;s XML interface. Requires
Rails 2.0 or later to be loaded.
</p>
<p>
Can also be used as a script using script/runner
</p>
<p>
Authentication is handled using your agent license key or HTTP Basic
Authentication. To authenticate using your license key your newrelic.yml
configuration file must be in your application config directory and contain
your license key. The New Relic account associated with the license key
must allow api access. Log into RPM, click Account at the top of the page
and check the &quot;Make my account data accessible&quot; checkbox.
</p>
<p>
Basic authentication uses your site credentials to authenticate.
</p>
<pre class="code">
  <span class='comment val'># To authenticate using basic authentication, make this call with your username and password:</span>
  <span class='NewRelicApi constant id'>NewRelicApi</span><span class='dot token'>.</span><span class='authenticate identifier id'>authenticate</span><span class='lparen token'>(</span><span class='string val'>'user@example.com'</span><span class='comma token'>,</span> <span class='string val'>'test'</span><span class='rparen token'>)</span>
</pre>
<p>
This API does not have any agent dependencies. It can be used independent
of the agent by copying it into your application.
</p>
<h2>Examples</h2>
<pre class="code">
  <span class='comment val'># Fetching the list of applications for an account</span>
  <span class='NewRelicApi constant id'>NewRelicApi</span><span class='colon2 op'>::</span><span class='Account constant id'>Account</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:first</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='applications identifier id'>applications</span>

  <span class='comment val'># Fetching the health values for all account applications</span>
  <span class='NewRelicApi constant id'>NewRelicApi</span><span class='colon2 op'>::</span><span class='Account constant id'>Account</span><span class='dot token'>.</span><span class='application_health identifier id'>application_health</span>

  <span class='comment val'># Fetching the health values for an application</span>
  <span class='NewRelicApi constant id'>NewRelicApi</span><span class='colon2 op'>::</span><span class='Account constant id'>Account</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:first</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='applications identifier id'>applications</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='threshold_values identifier id'>threshold_values</span>

  <span class='comment val'># Finding an application by name</span>
  <span class='NewRelicApi constant id'>NewRelicApi</span><span class='colon2 op'>::</span><span class='Account constant id'>Account</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:first</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='applications identifier id'>applications</span><span class='lparen token'>(</span><span class='symbol val'>:params</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'My App'</span><span class='rbrace token'>}</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
</pre>

</div><div class="section attributes">
  <h1>Attributes</h1>

  
    <div class="class">
      <h2>Class Attributes</h2>
      <table>
      
        <tr>
          <th class="name">email</td>
          <td class="readwrite">
            [<span id='email-class_method'>R</span><span id='email%3D-class_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>email</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">host</td>
          <td class="readwrite">
            [<span id='host-class_method'>R</span><span id='host%3D-class_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>host</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">license_key</td>
          <td class="readwrite">
            [<span id='license_key-class_method'>R</span><span id='license_key%3D-class_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>license_key</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">password</td>
          <td class="readwrite">
            [<span id='password-class_method'>R</span><span id='password%3D-class_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>password</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">port</td>
          <td class="readwrite">
            [<span id='port-class_method'>R</span><span id='port%3D-class_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>port</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">ssl</td>
          <td class="readwrite">
            [<span id='ssl-class_method'>R</span><span id='ssl%3D-class_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>ssl</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h1>Constants</h1>
  <dl>
    
      <dt id="ACCOUNT_AGENT_RESOURCE_PATH-constant">ACCOUNT_AGENT_RESOURCE_PATH</dt>
      <dd>ACCOUNT_RESOURCE_PATH + 'agents/:agent_id/' </dd>
    
      <dt id="ACCOUNT_APPLICATION_RESOURCE_PATH-constant">ACCOUNT_APPLICATION_RESOURCE_PATH</dt>
      <dd>ACCOUNT_RESOURCE_PATH + 'applications/:application_id/' </dd>
    
      <dt id="ACCOUNT_RESOURCE_PATH-constant">ACCOUNT_RESOURCE_PATH</dt>
      <dd>'/accounts/:account_id/' </dd>
    
  </dl>
</div>

</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary class public">
    <h1>Public Class Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#authenticate-class_method' title='authenticate'>authenticate</a></span><span class='args'>(email, password)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sets up basic authentication credentials for all the resources.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#reset%21-class_method' title='reset!'>reset!</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Resets the base path of all resources.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#track_resource-class_method' title='track_resource'>track_resource</a></span><span class='args'>(klass)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails class public">
  <h1>Public Class Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>authenticate</h3>
</div><div id="authenticate-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>authenticate</span><span class='args'>(email, password)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sets up basic authentication credentials for all the resources. This is not
necessary if you are using agent license key authentication.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


76
77
78
79</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/new_relic_api.rb', line 76</span>

<span class='def def kw'>def</span> <span class='authenticate identifier id'>authenticate</span><span class='lparen token'>(</span><span class='email identifier id'>email</span><span class='comma token'>,</span> <span class='password identifier id'>password</span><span class='rparen token'>)</span>
  <span class='@password ivar id'>@password</span> <span class='assign token'>=</span> <span class='password identifier id'>password</span>
  <span class='@email ivar id'>@email</span>    <span class='assign token'>=</span> <span class='email identifier id'>email</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reset!</h3>
</div><div id="reset%21-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>reset!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Resets the base path of all resources. This should be called when
overridding the newrelic.yml settings using the ssl, host or port
accessors.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


83
84
85
86</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/new_relic_api.rb', line 83</span>

<span class='def def kw'>def</span> <span class='reset! fid id'>reset!</span>
  <span class='@classes ivar id'>@classes</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='klass identifier id'>klass</span><span class='bitor op'>|</span> <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='reset! fid id'>reset!</span><span class='rbrace token'>}</span> <span class='if if_mod kw'>if</span> <span class='@classes ivar id'>@classes</span>
  <span class='NewRelicApi constant id'>NewRelicApi</span><span class='colon2 op'>::</span><span class='Account constant id'>Account</span><span class='dot token'>.</span><span class='site_url identifier id'>site_url</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>track_resource</h3>
</div><div id="track_resource-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>track_resource</span><span class='args'>(klass)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


89
90
91</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/new_relic_api.rb', line 89</span>

<span class='def def kw'>def</span> <span class='track_resource identifier id'>track_resource</span><span class='lparen token'>(</span><span class='klass identifier id'>klass</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='lparen token'>(</span><span class='@classes ivar id'>@classes</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='lshft op'>&lt;&lt;</span> <span class='klass identifier id'>klass</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>