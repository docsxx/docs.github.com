<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="syntax_highlight.css" type="text/css" charset="utf-8" />

    <title>README</title>
  </head>
  <body>
    <div id="content">
      <div class="section docstring readme">
        <p>
# smoke
</p>
<p>
smoke is a Ruby based DSL that allows you to take data from YQL, RSS / Atom
(and more, if you think of a useful source). This &quot;data&quot; can then
be re-represented, sorted and filtered. You can collect data from a
multiude of sources, sort them on a common property and return a plain old
ruby object or json (You could add in something to output XML too)
</p>
<p>
In an early attempt to get feedback I created [this
screencast](http://vimeo.com/4272804). I will do another once the library
becomes closer to 1.0.0.
</p>
<p>
## The concept
</p>
<p>
The concept comes from using [Yahoo Pipes](http://pipes.yahoo.com) to make
little mash ups, get a list of tv shows for my torrent client, compile a
recipe book or make tools to give me a list of albums that artists in my
music library are about to be release.
</p>
<p>
## How or what to contribute
</p>
<ul>
<li>Test everything you do

</li>
<li>Add a source (I was thinking a source that took simply took a url and
parsed whatever it got)

</li>
<li>Add a way to output (XML, anyone?)

</li>
<li>Examples of queries you&#8217;d like to be able to do

</li>
</ul>
<p>
## API Examples ### YQL
</p>
<pre class="code">
    <span class='comment val'># This will use yahoo search to get an array of search results about Ruby</span>
    <span class='Smoke constant id'>Smoke</span><span class='dot token'>.</span><span class='yql identifier id'>yql</span><span class='lparen token'>(</span><span class='symbol val'>:ruby</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
      <span class='select identifier id'>select</span>  <span class='symbol val'>:all</span>
      <span class='from identifier id'>from</span>    <span class='string val'>&quot;search.web&quot;</span>
      <span class='where identifier id'>where</span>   <span class='symbol val'>:query</span><span class='comma token'>,</span> <span class='string val'>&quot;ruby&quot;</span>

      <span class='discard identifier id'>discard</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='regexp val'>/tuesday/i</span>
    <span class='end end kw'>end</span>

    <span class='Smoke constant id'>Smoke</span><span class='dot token'>.</span><span class='yql identifier id'>yql</span><span class='lparen token'>(</span><span class='symbol val'>:python</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
      <span class='select identifier id'>select</span>  <span class='symbol val'>:all</span>
      <span class='from identifier id'>from</span>    <span class='string val'>&quot;search.web&quot;</span>
      <span class='where identifier id'>where</span>   <span class='symbol val'>:query</span><span class='comma token'>,</span> <span class='string val'>&quot;python&quot;</span>
    <span class='end end kw'>end</span>
</pre>
<p>
### Join sources and use them together
</p>
<pre class="code">
    <span class='Smoke constant id'>Smoke</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='symbol val'>:ruby</span><span class='comma token'>,</span> <span class='symbol val'>:python</span><span class='rparen token'>)</span>
</pre>
<p>
or even
</p>
<pre class="code">
    <span class='Smoke constant id'>Smoke</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='symbol val'>:python</span><span class='comma token'>,</span> <span class='symbol val'>:ruby</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
      <span class='emit identifier id'>emit</span> <span class='do do kw'>do</span>
        <span class='sort identifier id'>sort</span> <span class='symbol val'>:title</span>
        <span class='rename identifier id'>rename</span> <span class='symbol val'>:shit_name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:title</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
</pre>
<p>
### CI
</p>
<p>
Integrity [is running for smoke](http://integrity.ffolio.net/smoke)
</p>
<p>
### TODO (working on, just mental notes)
</p>
<ul>
<li>Look at moving object transformations into the origin class

</li>
<li>Allow for sources to explicitly set the content type being returned for
those stupid content providers

</li>
<li>Consider invokation methods (registering of sources, namespacing et al)

</li>
<li>YQL Definitions

</li>
<li>YQL w/oAuth

</li>
<li>YQL Subqueries?

</li>
</ul>
<p>
### Copyright
</p>
<p>
Copyright &#169; 2009 Ben Schwarz. See LICENSE for details.
</p>

      </div>
    </div>
  </body>
</html>