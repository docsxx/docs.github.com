<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>andreasronge's neo4j - Class: Neo4j::Transaction - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/andreasronge/commits/neo4j/master" rel="alternate" title="Recent Commits to neo4j:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("andreasronge", "neo4j", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("andreasronge", "neo4j", "b379f71cfbbe0b1ff5c3506e216964d06b94b7d4", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/andreasronge/neo4j/tree/">Source</a></li>
            <li class=""><a href="http://github.com/andreasronge/neo4j/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/andreasronge/neo4j/network">Network</a></li>            
            <li class=""><a href="http://github.com/andreasronge/neo4j/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/andreasronge/neo4j">Wiki</a></li>
            <li class=""><a href="http://github.com/andreasronge/neo4j/graphs">Graphs</a></li>                    
            <li class="active"><a href="/andreasronge/neo4j">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/andreasronge">andreasronge</a> / <b><a href="http://github.com/andreasronge/neo4j/tree">neo4j</a></b>        
                <a id="namespaces_button" rel="andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Neo4j_Transaction">
  <h1>Class: Neo4j::Transaction</h1>
  <div class="section docstring">
  <p>
Wraps a Neo4j java transaction and lucene transactions. There can only be
one transaction per thread.
</p>

</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">neo_tx</td>
          <td class="readwrite">
            [<span id='neo_tx-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>neo_tx</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#called-class_method">called</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:nodoc: debugging method.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_placebo_tx_if_not_already_exists-class_method">create_placebo_tx_if_not_already_exists</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#current-class_method">current</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the current running transaction or nil.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#failure-class_method">failure</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Marks this transaction as failed, which means that it will inexplicably be
rolled back upon invocation of finish().
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#failure-3F-class_method">failure?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns true if the transaction will rollback.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#finish-class_method">finish</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Commits or marks this transaction for rollback, depending on whether
success() or failure() has been previously invoked.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#initialize-class_method">initialize</span><span class='args'>(neo_tx)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <hr size="10"></hr><p>
Instance methods.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#placebo-3F-class_method">placebo?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#run-class_method">run</span><span class='args'></span>
        <span class='block'>{|The| ... }</span>
        
      </th>
      <td class="docstring">
        <p>
Runs a block in a Neo4j transaction.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#running-3F-class_method">running?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns true if there is a transaction for the current thread.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#success-class_method">success</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Marks this transaction as successful, which means that it will be commited
upon invocation of finish() unless failure() has or will be invoked before
then.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_s-class_method">to_s</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>called</h3>
</div><div id="called-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>called</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:nodoc: debugging method
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 36</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L36">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='called identifier id'>called</span>
    <span class='res identifier id'>res</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
    <span class='for for kw'>for</span> <span class='i identifier id'>i</span> <span class='in in kw'>in</span> <span class='float val'>2</span><span class='dot2 op'>..</span><span class='integer val'>7</span> <span class='do do kw'>do</span>
      <span class='res identifier id'>res</span> <span class='lshft op'>&lt;&lt;</span> <span class='regexp val'>/\`([^\']+)\'/</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='caller identifier id'>caller</span><span class='lparen token'>(</span><span class='i identifier id'>i</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
      <span class='res identifier id'>res</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>', '</span> 
    <span class='end end kw'>end</span>
    <span class='res identifier id'>res</span>
  <span class='end end kw'>end</span> 

  <span class='def def kw'>def</span> <span class='placebo? fid id'>placebo?</span><span class='lparen token'>(</span><span class='tx identifier id'>tx</span><span class='rparen token'>)</span>
    <span class='tx identifier id'>tx</span><span class='dot token'>.</span><span class='java_object identifier id'>java_object</span><span class='dot token'>.</span><span class='java_type identifier id'>java_type</span> <span class='eq op'>==</span> <span class='string val'>'org.neo4j.api.core.EmbeddedNeo$PlaceboTransaction'</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Creates a transaction. If one is already running then a 'placebo' transaction will be created instead.</span>
  <span class='comment val'># A placebo transactions wraps the real transaction by not allowing the finish method to finish the</span>
  <span class='comment val'># real transaction.</span>
  <span class='comment val'>#</span>
  <span class='def def kw'>def</span> <span class='new identifier id'>new</span>
    <span class='tx identifier id'>tx</span> <span class='assign token'>=</span> <span class='Neo4j constant id'>Neo4j</span><span class='dot token'>.</span><span class='instance identifier id'>instance</span><span class='dot token'>.</span><span class='begin_transaction identifier id'>begin_transaction</span>
    <span class='if if kw'>if</span> <span class='running? fid id'>running?</span>
      <span class='comment val'># expects a placebo transaction, check just in case</span>
      <span class='raise identifier id'>raise</span> <span class='string val'>&quot;Expected placebo transaction since one normal is already running&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='placebo? fid id'>placebo?</span><span class='lparen token'>(</span><span class='tx identifier id'>tx</span><span class='rparen token'>)</span>
      <span class='tx identifier id'>tx</span> <span class='assign token'>=</span> <span class='Transaction constant id'>Transaction</span><span class='dot token'>.</span><span class='current identifier id'>current</span><span class='dot token'>.</span><span class='create_placebo_tx_if_not_already_exists identifier id'>create_placebo_tx_if_not_already_exists</span>
      <span class='tx identifier id'>tx</span>
    <span class='else else kw'>else</span>
      <span class='raise identifier id'>raise</span> <span class='string val'>&quot;Expected NOT placebo transaction since no TX is running&quot;</span> <span class='if if_mod kw'>if</span> <span class='placebo? fid id'>placebo?</span><span class='lparen token'>(</span><span class='tx identifier id'>tx</span><span class='rparen token'>)</span>
      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='tx identifier id'>tx</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># Runs a block in a Neo4j transaction</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Most operations on neo requires an transaction. In Neo4j all read and write operations are</span>
  <span class='comment val'># wrapped automatically in an transaction. You will get much better performance if</span>
  <span class='comment val'># one transaction is wrapped around several neo operation instead of running one transaction per</span>
  <span class='comment val'># neo operation.</span>
  <span class='comment val'># If one transaction is already running then a 'placebo' transaction will be created.</span>
  <span class='comment val'># Performing a finish on a placebo transaction will not finish the 'real' transaction.</span>
  <span class='comment val'>#  </span>
  <span class='comment val'># ==== Params</span>
  <span class='comment val'># @yield the block to be performed in one transaction</span>
  <span class='comment val'># @yieldparam [Neo4j::Transaction] The transaction</span>
  <span class='comment val'>#</span>
  <span class='comment val'># ==== Examples</span>
  <span class='comment val'>#  include 'neo4j'</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#  Neo4j::Transaction.run {</span>
  <span class='comment val'>#    node = PersonNode.new</span>
  <span class='comment val'>#  }</span>
  <span class='comment val'>#</span>
  <span class='comment val'># You have also access to transaction object</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#   Neo4j::Transaction.run { |t|</span>
  <span class='comment val'>#     # something failed</span>
  <span class='comment val'>#     t.failure # will cause a rollback</span>
  <span class='comment val'>#   }</span>
  <span class='comment val'>#</span>
  <span class='comment val'>#</span>
  <span class='comment val'># ==== Returns</span>
  <span class='comment val'># The value of the evaluated provided block</span>
  <span class='comment val'>#</span>
  <span class='comment val'># :api: public</span>
  <span class='comment val'>#</span>
  <span class='def def kw'>def</span> <span class='run identifier id'>run</span>   <span class='comment val'># :yield: block of code to run inside a transaction</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Expected a block to run in Transaction.run&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='block_given? fid id'>block_given?</span>

    <span class='ret identifier id'>ret</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>

    <span class='begin begin kw'>begin</span>
      <span class='tx identifier id'>tx</span> <span class='assign token'>=</span> <span class='Neo4j constant id'>Neo4j</span><span class='colon2 op'>::</span><span class='Transaction constant id'>Transaction</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
      <span class='ret identifier id'>ret</span> <span class='assign token'>=</span> <span class='yield yield kw'>yield</span> <span class='tx identifier id'>tx</span>
    <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
      <span class='comment val'>#$NEO_LOGGER.warn{e.backtrace.join(&quot;\n&quot;)}</span>
      <span class='tx identifier id'>tx</span><span class='dot token'>.</span><span class='failure identifier id'>failure</span>
      <span class='raise identifier id'>raise</span> <span class='e identifier id'>e</span>  
    <span class='ensure ensure kw'>ensure</span>
      <span class='tx identifier id'>tx</span><span class='dot token'>.</span><span class='finish identifier id'>finish</span>  
    <span class='end end kw'>end</span>      
    <span class='ret identifier id'>ret</span>
  <span class='end end kw'>end</span>  


  <span class='comment val'># Returns the current running transaction or nil</span>
  <span class='comment val'>#</span>
  <span class='comment val'># :api: public</span>
  <span class='def def kw'>def</span> <span class='current identifier id'>current</span>
    <span class='Thread constant id'>Thread</span><span class='dot token'>.</span><span class='current identifier id'>current</span><span class='lbrack token'>[</span><span class='symbol val'>:transaction</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>


  <span class='comment val'># Returns true if there is a transaction for the current thread</span>
  <span class='comment val'>#</span>
  <span class='comment val'># :api: public</span>
  <span class='def def kw'>def</span> <span class='running? fid id'>running?</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='current identifier id'>current</span> <span class='neq op'>!=</span> <span class='nil nil kw'>nil</span> <span class='comment val'># &amp;&amp; self.current.neo_tx != nil</span>
  <span class='end end kw'>end</span>


  <span class='comment val'># Returns true if the transaction has been marked for failure/rollback</span>
  <span class='comment val'>#</span>
  <span class='comment val'># :api: public</span>
  <span class='def def kw'>def</span> <span class='failure? fid id'>failure?</span>
    <span class='current identifier id'>current</span><span class='dot token'>.</span><span class='failure? fid id'>failure?</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Finish the current transaction if it is running.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># See Neo4j::Transaction#failure</span>
  <span class='comment val'>#</span>
  <span class='comment val'># :api: public</span>
  <span class='def def kw'>def</span> <span class='failure identifier id'>failure</span>
    <span class='current identifier id'>current</span><span class='dot token'>.</span><span class='failure identifier id'>failure</span> <span class='if if_mod kw'>if</span> <span class='running? fid id'>running?</span>
  <span class='end end kw'>end</span>


  <span class='comment val'># Finish the current transaction if it is running</span>
  <span class='comment val'>#</span>
  <span class='comment val'># :api: public</span>
  <span class='def def kw'>def</span> <span class='finish identifier id'>finish</span>
    <span class='current identifier id'>current</span><span class='dot token'>.</span><span class='finish identifier id'>finish</span> <span class='if if_mod kw'>if</span> <span class='running? fid id'>running?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_placebo_tx_if_not_already_exists</h3>
</div><div id="create_placebo_tx_if_not_already_exists-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_placebo_tx_if_not_already_exists</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 193</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L193">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">193
194
195</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create_placebo_tx_if_not_already_exists identifier id'>create_placebo_tx_if_not_already_exists</span>
  <span class='@placebo ivar id'>@placebo</span> <span class='opasgn op'>||=</span> <span class='PlaceboTransaction constant id'>PlaceboTransaction</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>current</h3>
</div><div id="current-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>current</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the current running transaction or nil
</p>
<p>
:api: public
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 121</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L121">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">121
122
123</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='current identifier id'>current</span>
  <span class='Thread constant id'>Thread</span><span class='dot token'>.</span><span class='current identifier id'>current</span><span class='lbrack token'>[</span><span class='symbol val'>:transaction</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>failure</h3>
</div><div id="failure-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>failure</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Marks this transaction as failed, which means that it will inexplicably be
rolled back upon invocation of finish().
</p>
<p>
:api: public
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="NotInTransactionError.html" title="NotInTransactionError">NotInTransactionError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 146</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L146">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">146
147
148
149
150
151</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='failure identifier id'>failure</span>
  <span class='raise identifier id'>raise</span> <span class='NotInTransactionError constant id'>NotInTransactionError</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='unless unless_mod kw'>unless</span> <span class='Transaction constant id'>Transaction</span><span class='dot token'>.</span><span class='running? fid id'>running?</span>
  <span class='@neo_tx ivar id'>@neo_tx</span><span class='dot token'>.</span><span class='failure identifier id'>failure</span>
  <span class='@failure ivar id'>@failure</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='$NEO_LOGGER gvar id'>$NEO_LOGGER</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lbrace token'>{</span><span class='dstring node'>&quot;failure #{self.to_s}&quot;</span><span class='rbrace token'>}</span>                        
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>failure?</h3>
</div><div id="failure-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>failure?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns true if the transaction will rollback
</p>
<p>
:api: public
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 137</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L137">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">137
138
139</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='failure? fid id'>failure?</span>
  <span class='@failure ivar id'>@failure</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>finish</h3>
</div><div id="finish-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>finish</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Commits or marks this transaction for rollback, depending on whether
success() or failure() has been previously invoked.
</p>
<p>
:api: public
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="NotInTransactionError.html" title="NotInTransactionError">NotInTransactionError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 154</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L154">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='finish identifier id'>finish</span>
  <span class='raise identifier id'>raise</span> <span class='NotInTransactionError constant id'>NotInTransactionError</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='unless unless_mod kw'>unless</span> <span class='Transaction constant id'>Transaction</span><span class='dot token'>.</span><span class='running? fid id'>running?</span>
  <span class='Neo4j constant id'>Neo4j</span><span class='dot token'>.</span><span class='event_handler identifier id'>event_handler</span><span class='dot token'>.</span><span class='tx_finished identifier id'>tx_finished</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='failure? fid id'>failure?</span>
  <span class='@neo_tx ivar id'>@neo_tx</span><span class='dot token'>.</span><span class='success identifier id'>success</span> <span class='unless unless_mod kw'>unless</span> <span class='failure? fid id'>failure?</span>
  <span class='@neo_tx ivar id'>@neo_tx</span><span class='dot token'>.</span><span class='finish identifier id'>finish</span>
  <span class='@neo_tx ivar id'>@neo_tx</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span>
  <span class='Thread constant id'>Thread</span><span class='dot token'>.</span><span class='current identifier id'>current</span><span class='lbrack token'>[</span><span class='symbol val'>:transaction</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>

  <span class='if if kw'>if</span> <span class='Lucene constant id'>Lucene</span><span class='colon2 op'>::</span><span class='Transaction constant id'>Transaction</span><span class='dot token'>.</span><span class='running? fid id'>running?</span>
    <span class='$NEO_LOGGER gvar id'>$NEO_LOGGER</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span><span class='lbrace token'>{</span><span class='dstring node'>&quot;LUCENE TX running failure: #{failure?}&quot;</span><span class='rbrace token'>}</span>

    <span class='comment val'># mark lucene transaction for failure if the neo transaction fails</span>
    <span class='Lucene constant id'>Lucene</span><span class='colon2 op'>::</span><span class='Transaction constant id'>Transaction</span><span class='dot token'>.</span><span class='current identifier id'>current</span><span class='dot token'>.</span><span class='failure identifier id'>failure</span> <span class='if if_mod kw'>if</span> <span class='failure? fid id'>failure?</span>
    <span class='Lucene constant id'>Lucene</span><span class='colon2 op'>::</span><span class='Transaction constant id'>Transaction</span><span class='dot token'>.</span><span class='current identifier id'>current</span><span class='dot token'>.</span><span class='commit identifier id'>commit</span>
  <span class='else else kw'>else</span>
    <span class='$NEO_LOGGER gvar id'>$NEO_LOGGER</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span><span class='lbrace token'>{</span><span class='string val'>&quot;NO LUCENE TX running&quot;</span><span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>initialize</h3>
</div><div id="initialize-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(neo_tx)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="10"></hr><p>
Instance methods
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="AlreadyInTransactionError.html" title="AlreadyInTransactionError">AlreadyInTransactionError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 166</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L166">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">166
167
168
169
170
171
172
173</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='neo_tx identifier id'>neo_tx</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='AlreadyInTransactionError constant id'>AlreadyInTransactionError</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='if if_mod kw'>if</span> <span class='Transaction constant id'>Transaction</span><span class='dot token'>.</span><span class='running? fid id'>running?</span>
  <span class='@neo_tx ivar id'>@neo_tx</span> <span class='assign token'>=</span> <span class='neo_tx identifier id'>neo_tx</span>
  <span class='@@counter ivar id'>@@counter</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
  <span class='@id ivar id'>@id</span> <span class='assign token'>=</span> <span class='@@counter ivar id'>@@counter</span>
  <span class='@failure ivar id'>@failure</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>      
  <span class='Thread constant id'>Thread</span><span class='dot token'>.</span><span class='current identifier id'>current</span><span class='lbrack token'>[</span><span class='symbol val'>:transaction</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>placebo?</h3>
</div><div id="placebo-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>placebo?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 45</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L45">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">45
46
47</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='placebo? fid id'>placebo?</span>
  <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>run</h3>
</div><div id="run-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>run</span><span class='args'></span>
    <span class='block'>{|The| ... }</span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Runs a block in a Neo4j transaction
</p>
<p>
Most operations on neo requires an transaction. In Neo4j all read and write
operations are wrapped automatically in an transaction. You will get much
better performance if one transaction is wrapped around several neo
operation instead of running one transaction per neo operation. If one
transaction is already running then a &#8216;placebo&#8217; transaction
will be created. Performing a finish on a placebo transaction will not
finish the &#8216;real&#8217; transaction.
</p>
<h4>Params</h4>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="yieldparam">
  <h3>Yield Parameters:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="" title="Neo4j::Transaction">Neo4j::Transaction</a></tt>]</span>
      
      
        <span class='name'>The</span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
transaction
</p>
<h4>Examples include &#8216;neo4j&#8217;</h4>
<p>
Neo4j::Transaction.run { node = PersonNode.new }
</p>
<p>
You have also access to transaction object
</p>
<p>
Neo4j::Transaction.run { |t| # something failed t.failure # will cause a
rollback }
</p>
<h4>Returns The value of the evaluated provided block</h4>
<p>
:api: public
</p>
</span>
    </dd>
  
  </dl>
</div>
<div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>ArgumentError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 99</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L99">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='run identifier id'>run</span>   
  <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Expected a block to run in Transaction.run&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='block_given? fid id'>block_given?</span>

  <span class='ret identifier id'>ret</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
    
  <span class='begin begin kw'>begin</span>
    <span class='tx identifier id'>tx</span> <span class='assign token'>=</span> <span class='Neo4j constant id'>Neo4j</span><span class='colon2 op'>::</span><span class='Transaction constant id'>Transaction</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
    <span class='ret identifier id'>ret</span> <span class='assign token'>=</span> <span class='yield yield kw'>yield</span> <span class='tx identifier id'>tx</span>
  <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='comment val'>#$NEO_LOGGER.warn{e.backtrace.join(&quot;\n&quot;)}</span>
    <span class='tx identifier id'>tx</span><span class='dot token'>.</span><span class='failure identifier id'>failure</span>
    <span class='raise identifier id'>raise</span> <span class='e identifier id'>e</span>  
  <span class='ensure ensure kw'>ensure</span>
    <span class='tx identifier id'>tx</span><span class='dot token'>.</span><span class='finish identifier id'>finish</span>  
  <span class='end end kw'>end</span>      
  <span class='ret identifier id'>ret</span>
<span class='end end kw'>end</span>  
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>running?</h3>
</div><div id="running-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>running?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns true if there is a transaction for the current thread
</p>
<p>
:api: public
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 129</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L129">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">129
130
131</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='running? fid id'>running?</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='current identifier id'>current</span> <span class='neq op'>!=</span> <span class='nil nil kw'>nil</span> <span class='comment val'># &amp;&amp; self.current.neo_tx != nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>success</h3>
</div><div id="success-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>success</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Marks this transaction as successful, which means that it will be commited
upon invocation of finish() unless failure() has or will be invoked before
then.
</p>
<p>
:api: public
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href="NotInTransactionError.html" title="NotInTransactionError">NotInTransactionError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 202</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L202">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">202
203
204
205
206</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='success identifier id'>success</span>
  <span class='raise identifier id'>raise</span> <span class='NotInTransactionError constant id'>NotInTransactionError</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='unless unless_mod kw'>unless</span> <span class='Transaction constant id'>Transaction</span><span class='dot token'>.</span><span class='running? fid id'>running?</span>
  <span class='$NEO_LOGGER gvar id'>$NEO_LOGGER</span><span class='dot token'>.</span><span class='info identifier id'>info</span><span class='lbrace token'>{</span><span class='dstring node'>&quot;success #{self.to_s}&quot;</span><span class='rbrace token'>}</span>      
  <span class='@neo_tx ivar id'>@neo_tx</span><span class='dot token'>.</span><span class='success identifier id'>success</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_s</h3>
</div><div id="to_s-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_s</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/neo4j/transaction.rb', line 175</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/andreasronge/neo4j/blob/b379f71cfbbe0b1ff5c3506e216964d06b94b7d4/lib/neo4j/transaction.rb#L175">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">175
176
177</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_s identifier id'>to_s</span>
  <span class='dstring node'>&quot;Transaction: placebo: #{placebo?}, #{@id} failure: #{failure?}, running #{Transaction.running?}, lucene: #{Lucene::Transaction.running?}, thread: #{Thread.current.to_s} #{@neo_tx}&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>