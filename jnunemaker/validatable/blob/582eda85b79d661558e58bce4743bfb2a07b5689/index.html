<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jnunemaker's validatable - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jnunemaker/commits/validatable/master" rel="alternate" title="Recent Commits to validatable:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jnunemaker", "validatable", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jnunemaker/validatable/blob/582eda85b79d661558e58bce4743bfb2a07b5689' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jnunemaker/validatable/blob/582eda85b79d661558e58bce4743bfb2a07b5689' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jnunemaker", "validatable", "582eda85b79d661558e58bce4743bfb2a07b5689", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jnunemaker/validatable/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jnunemaker/validatable/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jnunemaker/validatable/network">Network</a></li>            
            <li class=""><a href="http://github.com/jnunemaker/validatable/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jnunemaker/validatable">Wiki</a></li>
            <li class=""><a href="http://github.com/jnunemaker/validatable/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jnunemaker/validatable">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jnunemaker">jnunemaker</a> / <b><a href="http://github.com/jnunemaker/validatable/tree">validatable</a></b>        
                <a id="namespaces_button" rel="jnunemaker/validatable/blob/582eda85b79d661558e58bce4743bfb2a07b5689" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jnunemaker/validatable/blob/582eda85b79d661558e58bce4743bfb2a07b5689" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Validatable</h1>
<p>
Validatable is a library for adding validations.
</p>
<p>
by Jay[http://jayfields.blogspot.com] Fields[http://jayfields.blogspot.com]
</p>
<h2>Download and Installation</h2>
<p>
You can download Validatable from
here[http://rubyforge.org/projects/validatable] or install it with the
following command.
</p>
<pre class="code">
 $ <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='validatable identifier id'>validatable</span>
</pre>
<h2>License</h2>
<p>
You may use, copy and redistribute this library under the same terms as
Ruby itself (see http://www.ruby-lang.org/en/LICENSE.txt).
</p>
<h2>Examples</h2>
<p>
Validation of an entire hierarchy of objects with errors aggregated at the
root object.
</p>
<pre class="code">
        <span class='class class kw'>class</span> <span class='Person constant id'>Person</span>
          <span class='include identifier id'>include</span> <span class='Validatable constant id'>Validatable</span>
          <span class='validates_presence_of identifier id'>validates_presence_of</span> <span class='symbol val'>:name</span>
          <span class='attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
        <span class='end end kw'>end</span>

        <span class='class class kw'>class</span> <span class='PersonPresenter constant id'>PersonPresenter</span>
          <span class='include identifier id'>include</span> <span class='Validatable constant id'>Validatable</span>
          <span class='include_validations_for identifier id'>include_validations_for</span> <span class='symbol val'>:person</span>
          <span class='attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:person</span>

          <span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='person identifier id'>person</span><span class='rparen token'>)</span>
            <span class='@person ivar id'>@person</span> <span class='assign token'>=</span> <span class='person identifier id'>person</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>

        <span class='presenter identifier id'>presenter</span> <span class='assign token'>=</span> <span class='PersonPresenter constant id'>PersonPresenter</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='rparen token'>)</span>
        <span class='presenter identifier id'>presenter</span><span class='dot token'>.</span><span class='valid? fid id'>valid?</span> <span class='comment val'>#=&gt; false</span>
        <span class='presenter identifier id'>presenter</span><span class='dot token'>.</span><span class='errors identifier id'>errors</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='symbol val'>:name</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; &quot;can't be blank&quot;</span>
</pre>
<p>
Validations that turn off after X times of failed attempts.
</p>
<pre class="code">
        <span class='class class kw'>class</span> <span class='Person constant id'>Person</span>
          <span class='include identifier id'>include</span> <span class='Validatable constant id'>Validatable</span>
          <span class='validates_presence_of identifier id'>validates_presence_of</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:times</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span>
          <span class='attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
        <span class='end end kw'>end</span>

        <span class='person identifier id'>person</span> <span class='assign token'>=</span> <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
        <span class='person identifier id'>person</span><span class='dot token'>.</span><span class='valid? fid id'>valid?</span> <span class='comment val'>#=&gt; false</span>
        <span class='person identifier id'>person</span><span class='dot token'>.</span><span class='valid? fid id'>valid?</span> <span class='comment val'>#=&gt; true</span>
</pre>
<p>
Validations can be given levels. If a validation fails on a level the
validations for subsequent levels will not be executed.
</p>
<pre class="code">
        <span class='class class kw'>class</span> <span class='Person constant id'>Person</span>
          <span class='include identifier id'>include</span> <span class='Validatable constant id'>Validatable</span>
          <span class='validates_presence_of identifier id'>validates_presence_of</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:level</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;name message&quot;</span>
          <span class='validates_presence_of identifier id'>validates_presence_of</span> <span class='symbol val'>:address</span><span class='comma token'>,</span> <span class='symbol val'>:level</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span>
          <span class='attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:address</span>
        <span class='end end kw'>end</span>

        <span class='person identifier id'>person</span> <span class='assign token'>=</span> <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
        <span class='person identifier id'>person</span><span class='dot token'>.</span><span class='valid? fid id'>valid?</span> <span class='comment val'>#=&gt; false</span>
        <span class='person identifier id'>person</span><span class='dot token'>.</span><span class='errors identifier id'>errors</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='symbol val'>:name</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; &quot;name message&quot;</span>
        <span class='person identifier id'>person</span><span class='dot token'>.</span><span class='errors identifier id'>errors</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='symbol val'>:address</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; nil</span>
</pre>
<p>
Validations can also be given groups. Groups can be used to validate an
object when it can be valid in various states. For example a mortgage
application may be valid for saving (saving a partial application), but
that same mortgage application would not be valid for underwriting. In our
example a application can be saved as long as a Social Security Number is
present; however, an application can not be underwritten unless the name
attribute contains a value.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='MortgageApplication constant id'>MortgageApplication</span>
    <span class='include identifier id'>include</span> <span class='Validatable constant id'>Validatable</span>
    <span class='validates_presence_of identifier id'>validates_presence_of</span> <span class='symbol val'>:ssn</span><span class='comma token'>,</span> <span class='symbol val'>:groups</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='symbol val'>:saving</span><span class='comma token'>,</span> <span class='symbol val'>:underwriting</span><span class='rbrack token'>]</span>
    <span class='validates_presence_of identifier id'>validates_presence_of</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:groups</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:underwriting</span>
    <span class='attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:ssn</span>
  <span class='end end kw'>end</span>

  <span class='application identifier id'>application</span> <span class='assign token'>=</span> <span class='MortgageApplication constant id'>MortgageApplication</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='application identifier id'>application</span><span class='dot token'>.</span><span class='ssn identifier id'>ssn</span> <span class='assign token'>=</span> <span class='integer val'>377990118</span>
  <span class='application identifier id'>application</span><span class='dot token'>.</span><span class='valid_for_saving? fid id'>valid_for_saving?</span> <span class='comment val'>#=&gt; true</span>
  <span class='application identifier id'>application</span><span class='dot token'>.</span><span class='valid_for_underwriting? fid id'>valid_for_underwriting?</span> <span class='comment val'>#=&gt; false</span>
</pre>
<p>
As you can see, you can use an array if the validation needs to be part of
various groups. However, if the validation only applies to one group you
can simply use a symbol for the group name.
</p>
<p>
Similar to Rails, Validatable also supports conditional validation.
</p>
<pre class="code">
        <span class='class class kw'>class</span> <span class='Person constant id'>Person</span>
          <span class='include identifier id'>include</span> <span class='Validatable constant id'>Validatable</span>
          <span class='attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
          <span class='validates_format_of identifier id'>validates_format_of</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:with</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='regexp val'>/.+/</span><span class='comma token'>,</span> <span class='symbol val'>:if</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Proc constant id'>Proc</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='lbrace token'>{</span> <span class='notop op'>!</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='rbrace token'>}</span>
        <span class='end end kw'>end</span>
        <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='dot token'>.</span><span class='valid? fid id'>valid?</span> <span class='comment val'>#=&gt; true</span>
</pre>
<p>
Validatable also exposes an after_validate hook method.
</p>
<pre class="code">
        <span class='class class kw'>class</span> <span class='Person constant id'>Person</span>
          <span class='include identifier id'>include</span> <span class='Validatable constant id'>Validatable</span>
          <span class='validates_presence_of identifier id'>validates_presence_of</span> <span class='symbol val'>:name</span>
          <span class='attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:name</span>
        <span class='end end kw'>end</span>

        <span class='class class kw'>class</span> <span class='ValidatesPresenceOf constant id'>ValidatesPresenceOf</span>
          <span class='after_validate identifier id'>after_validate</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='comma token'>,</span> <span class='instance identifier id'>instance</span><span class='comma token'>,</span> <span class='attribute identifier id'>attribute</span><span class='bitor op'>|</span>
                        <span class='instance identifier id'>instance</span><span class='dot token'>.</span><span class='errors identifier id'>errors</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{attribute} can't be blank&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='result identifier id'>result</span>
                <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>

        <span class='person identifier id'>person</span> <span class='assign token'>=</span> <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
        <span class='person identifier id'>person</span><span class='dot token'>.</span><span class='valid? fid id'>valid?</span> <span class='comment val'>#=&gt; false</span>
        <span class='person identifier id'>person</span><span class='dot token'>.</span><span class='errors identifier id'>errors</span><span class='dot token'>.</span><span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='symbol val'>:name</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; &quot;name can't be blank&quot;</span>
</pre>
<p>
The after_validate hook yields the result of the validation being run, the
instance the validation was run on, and the attribute that was validated
</p>
<p>
In the above example the attribute &quot;name&quot; is appended to the
message.
</p>
<p>
See the tests for more examples
</p>
<h2>Contributors</h2>
<p>
Rick Bradley, Anonymous Z, Jason Miller, Ali Aghareza, Xavier Shay, Dan
Manges, Karthik Krishnan and Venkat, Clint Bishop, Chris Didyk, Yi Wen
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>