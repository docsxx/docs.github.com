<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>pauldix's feedzirra - Class: Feedzirra::Feed - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/pauldix/commits/feedzirra/master" rel="alternate" title="Recent Commits to feedzirra:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("pauldix", "feedzirra", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("pauldix", "feedzirra", "7e44171efe7bc7c89361e3245d1ff8ad534e18a5", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/pauldix/feedzirra/tree/">Source</a></li>
            <li class=""><a href="http://github.com/pauldix/feedzirra/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/pauldix/feedzirra/network">Network</a></li>            
            <li class=""><a href="http://github.com/pauldix/feedzirra/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/pauldix/feedzirra">Wiki</a></li>
            <li class=""><a href="http://github.com/pauldix/feedzirra/graphs">Graphs</a></li>                    
            <li class="active"><a href="/pauldix/feedzirra">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/pauldix">pauldix</a> / <b><a href="http://github.com/pauldix/feedzirra/tree">feedzirra</a></b>        
                <a id="namespaces_button" rel="pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Feedzirra_Feed">
  <h1>Class: Feedzirra::Feed</h1>
  <div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="USER_AGENT-constant">USER_AGENT</dt>
      <dd>&quot;feedzirra http://github.com/pauldix/feedzirra/tree/master&quot;</dd>
    
  </dl>
</div>

</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_common_feed_entry_element-class_method">add_common_feed_entry_element</span><span class='args'>(element_tag, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Makes all entry types look for the passed in element to parse.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_feed_class-class_method">add_feed_class</span><span class='args'>(klass)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Adds a new feed parsing class that will be used for parsing.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_feed_to_multi-class_method">add_feed_to_multi</span><span class='args'>(multi, feed, feed_queue, responses, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
An abstraction for adding a feed by a Feed object to the passed Curb::multi
stack.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_url_to_multi-class_method">add_url_to_multi</span><span class='args'>(multi, url, url_queue, responses, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
An abstraction for adding a feed by URL to the passed Curb::multi stack.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#decode_content-class_method">decode_content</span><span class='args'>(c)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Decodes the XML document if it was compressed.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#determine_feed_parser_for_xml-class_method">determine_feed_parser_for_xml</span><span class='args'>(xml)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Determines the correct parser class to use for parsing the feed.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#etag_from_header-class_method">etag_from_header</span><span class='args'>(header)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Determines the etag from the request headers.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#feed_classes-class_method">feed_classes</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Provides a list of registered feed parsing classes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#fetch_and_parse-class_method">fetch_and_parse</span><span class='args'>(urls, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Fetches and returns the parsed XML for each URL provided.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#fetch_raw-class_method">fetch_raw</span><span class='args'>(urls, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Fetches and returns the raw XML for each URL provided.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#last_modified_from_header-class_method">last_modified_from_header</span><span class='args'>(header)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Determines the last modified date from the request headers.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#parse-class_method">parse</span><span class='args'>(xml)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Takes a raw XML feed and attempts to parse it.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#update-class_method">update</span><span class='args'>(feeds, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Updates each feed for each Feed object provided.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>add_common_feed_entry_element</h3>
</div><div id="add_common_feed_entry_element-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_common_feed_entry_element</span><span class='args'>(element_tag, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Makes all entry types look for the passed in element to parse. This is
actually just a call to element (a SAXMachine call) in the class
</p>
<h3>Parameters</h3>
<p>
[element_tag&lt;String&gt;]
</p>
<dl>
<dt>options&lt;Hash&gt;</dt><dd>Valid keys are same as with SAXMachine

</dd>
</dl>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 58</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L58">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">58
59
60
61
62
63
64</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='add_common_feed_entry_element identifier id'>add_common_feed_entry_element</span><span class='lparen token'>(</span><span class='element_tag identifier id'>element_tag</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='comment val'># need to think of a better way to do this. will break for people who want this behavior</span>
  <span class='comment val'># across their added classes</span>
  <span class='feed_classes identifier id'>feed_classes</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='bitor op'>|</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{k}Entry&quot;</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='klass identifier id'>klass</span><span class='bitor op'>|</span>
    <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:element</span><span class='comma token'>,</span> <span class='element_tag identifier id'>element_tag</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>add_feed_class</h3>
</div><div id="add_feed_class-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_feed_class</span><span class='args'>(klass)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Adds a new feed parsing class that will be used for parsing.
</p>
<h3>Parameters</h3>
<dl>
<dt>klass&lt;Constant&gt;</dt><dd>The class/constant that you want to register.

</dd>
</dl>
<h3>Returns</h3>
<p>
A updated array of feed parser class names.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 40</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L40">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">40
41
42</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='add_feed_class identifier id'>add_feed_class</span><span class='lparen token'>(</span><span class='klass identifier id'>klass</span><span class='rparen token'>)</span> 
  <span class='feed_classes identifier id'>feed_classes</span><span class='dot token'>.</span><span class='unshift identifier id'>unshift</span> <span class='klass identifier id'>klass</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>add_feed_to_multi</h3>
</div><div id="add_feed_to_multi-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_feed_to_multi</span><span class='args'>(multi, feed, feed_queue, responses, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
An abstraction for adding a feed by a Feed object to the passed Curb::multi
stack.
</p>
<h3>Parameters</h3>
<dl>
<dt>multi&lt;Curl::Multi&gt;</dt><dd>The Curl::Multi object that the request should be added too.

</dd>
<dt>feed&lt;Feed&gt;</dt><dd>A feed object that you would like to be fetched.

</dd>
<dt>url_queue&lt;Array&gt;</dt><dd>An array of feed objects that are queued for request.

</dd>
<dt>responses&lt;Hash&gt;</dt><dd>Existing responses that you want the response from the request added to.

</dd>
<dt>feeds&lt;String&gt;</dt><dd>or &lt;Array&gt; A single feed object, or an array of feed objects.

</dd>
<dt>options&lt;Hash&gt;</dt><dd>Valid keys for this argument as as followed:

<ul>
<li>:user_agent - String that overrides the default user agent.

</li>
<li>:on_success - Block that gets executed after a successful request.

</li>
<li>:on_failure - Block that gets executed after a failed request.

</li>
</ul>
</dd>
</dl>
<h3>Returns</h3>
<p>
The updated Curl::Multi object with the request details added to it&#8217;s
stack.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 261</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L261">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='add_feed_to_multi identifier id'>add_feed_to_multi</span><span class='lparen token'>(</span><span class='multi identifier id'>multi</span><span class='comma token'>,</span> <span class='feed identifier id'>feed</span><span class='comma token'>,</span> <span class='feed_queue identifier id'>feed_queue</span><span class='comma token'>,</span> <span class='responses identifier id'>responses</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> 
  <span class='easy identifier id'>easy</span> <span class='assign token'>=</span> <span class='Curl constant id'>Curl</span><span class='colon2 op'>::</span><span class='Easy constant id'>Easy</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='feed_url identifier id'>feed_url</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='curl identifier id'>curl</span><span class='bitor op'>|</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;User-Agent&quot;</span><span class='rbrack token'>]</span>        <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_agent</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='USER_AGENT constant id'>USER_AGENT</span><span class='rparen token'>)</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;If-Modified-Since&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='last_modified identifier id'>last_modified</span><span class='dot token'>.</span><span class='httpdate identifier id'>httpdate</span> <span class='if if_mod kw'>if</span> <span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='last_modified identifier id'>last_modified</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;If-None-Match&quot;</span><span class='rbrack token'>]</span>     <span class='assign token'>=</span> <span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='etag identifier id'>etag</span> <span class='if if_mod kw'>if</span> <span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='etag identifier id'>etag</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='userpwd identifier id'>userpwd</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:http_authentication</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>':'</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:http_authentication</span><span class='rparen token'>)</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='follow_location identifier id'>follow_location</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>

    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='max_redirects identifier id'>max_redirects</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:max_redirects</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:max_redirects</span><span class='rbrack token'>]</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='timeout identifier id'>timeout</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:timeout</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:timeout</span><span class='rbrack token'>]</span>

    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='on_success identifier id'>on_success</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span>
      <span class='begin begin kw'>begin</span>
        <span class='add_feed_to_multi identifier id'>add_feed_to_multi</span><span class='lparen token'>(</span><span class='multi identifier id'>multi</span><span class='comma token'>,</span> <span class='feed_queue identifier id'>feed_queue</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='comma token'>,</span> <span class='feed_queue identifier id'>feed_queue</span><span class='comma token'>,</span> <span class='responses identifier id'>responses</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='feed_queue identifier id'>feed_queue</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
        <span class='updated_feed identifier id'>updated_feed</span> <span class='assign token'>=</span> <span class='Feed constant id'>Feed</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='body_str identifier id'>body_str</span><span class='rparen token'>)</span>
        <span class='updated_feed identifier id'>updated_feed</span><span class='dot token'>.</span><span class='feed_url identifier id'>feed_url</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='last_effective_url identifier id'>last_effective_url</span>
        <span class='updated_feed identifier id'>updated_feed</span><span class='dot token'>.</span><span class='etag identifier id'>etag</span> <span class='assign token'>=</span> <span class='etag_from_header identifier id'>etag_from_header</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='rparen token'>)</span>
        <span class='updated_feed identifier id'>updated_feed</span><span class='dot token'>.</span><span class='last_modified identifier id'>last_modified</span> <span class='assign token'>=</span> <span class='last_modified_from_header identifier id'>last_modified_from_header</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='rparen token'>)</span>
        <span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='update_from_feed identifier id'>update_from_feed</span><span class='lparen token'>(</span><span class='updated_feed identifier id'>updated_feed</span><span class='rparen token'>)</span>
        <span class='responses identifier id'>responses</span><span class='lbrack token'>[</span><span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='feed_url identifier id'>feed_url</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='feed identifier id'>feed</span>
        <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:on_success</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='feed identifier id'>feed</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:on_success</span><span class='rparen token'>)</span>
      <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
        <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:on_failure</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='feed identifier id'>feed</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='response_code identifier id'>response_code</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='body_str identifier id'>body_str</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:on_failure</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='on_failure identifier id'>on_failure</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='comma token'>,</span> <span class='err identifier id'>err</span><span class='bitor op'>|</span>
      <span class='add_feed_to_multi identifier id'>add_feed_to_multi</span><span class='lparen token'>(</span><span class='multi identifier id'>multi</span><span class='comma token'>,</span> <span class='feed_queue identifier id'>feed_queue</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='comma token'>,</span> <span class='feed_queue identifier id'>feed_queue</span><span class='comma token'>,</span> <span class='responses identifier id'>responses</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='feed_queue identifier id'>feed_queue</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
      <span class='response_code identifier id'>response_code</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='response_code identifier id'>response_code</span>
      <span class='if if kw'>if</span> <span class='response_code identifier id'>response_code</span> <span class='eq op'>==</span> <span class='integer val'>304</span> <span class='comment val'># it's not modified. this isn't an error condition</span>
        <span class='responses identifier id'>responses</span><span class='lbrack token'>[</span><span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='feed_url identifier id'>feed_url</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='feed identifier id'>feed</span>
        <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:on_success</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='feed identifier id'>feed</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:on_success</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='responses identifier id'>responses</span><span class='lbrack token'>[</span><span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='url identifier id'>url</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='response_code identifier id'>response_code</span>
        <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:on_failure</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='feed identifier id'>feed</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='response_code identifier id'>response_code</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='body_str identifier id'>body_str</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:on_failure</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='multi identifier id'>multi</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='easy identifier id'>easy</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>add_url_to_multi</h3>
</div><div id="add_url_to_multi-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_url_to_multi</span><span class='args'>(multi, url, url_queue, responses, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
An abstraction for adding a feed by URL to the passed Curb::multi stack.
</p>
<h3>Parameters</h3>
<dl>
<dt>multi&lt;Curl::Multi&gt;</dt><dd>The Curl::Multi object that the request should be added too.

</dd>
<dt>url&lt;String&gt;</dt><dd>The URL of the feed that you would like to be fetched.

</dd>
<dt>url_queue&lt;Array&gt;</dt><dd>An array of URLs that are queued for request.

</dd>
<dt>responses&lt;Hash&gt;</dt><dd>Existing responses that you want the response from the request added to.

</dd>
<dt>feeds&lt;String&gt; or &lt;Array&gt;</dt><dd>A single feed object, or an array of feed objects.

</dd>
<dt>options&lt;Hash&gt;</dt><dd>Valid keys for this argument as as followed:

<ul>
<li>:user_agent - String that overrides the default user agent.

</li>
<li>:on_success - Block that gets executed after a successful request.

</li>
<li>:on_failure - Block that gets executed after a failed request.

</li>
</ul>
</dd>
</dl>
<h3>Returns</h3>
<p>
The updated Curl::Multi object with the request details added to it&#8217;s
stack.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 203</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L203">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='add_url_to_multi identifier id'>add_url_to_multi</span><span class='lparen token'>(</span><span class='multi identifier id'>multi</span><span class='comma token'>,</span> <span class='url identifier id'>url</span><span class='comma token'>,</span> <span class='url_queue identifier id'>url_queue</span><span class='comma token'>,</span> <span class='responses identifier id'>responses</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='easy identifier id'>easy</span> <span class='assign token'>=</span> <span class='Curl constant id'>Curl</span><span class='colon2 op'>::</span><span class='Easy constant id'>Easy</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='url identifier id'>url</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='curl identifier id'>curl</span><span class='bitor op'>|</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;User-Agent&quot;</span><span class='rbrack token'>]</span>        <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_agent</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='USER_AGENT constant id'>USER_AGENT</span><span class='rparen token'>)</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;If-Modified-Since&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:if_modified_since</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='httpdate identifier id'>httpdate</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:if_modified_since</span><span class='rparen token'>)</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;If-None-Match&quot;</span><span class='rbrack token'>]</span>     <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:if_none_match</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:if_none_match</span><span class='rparen token'>)</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;Accept-encoding&quot;</span><span class='rbrack token'>]</span>   <span class='assign token'>=</span> <span class='string val'>'gzip, deflate'</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:compress</span><span class='rparen token'>)</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='follow_location identifier id'>follow_location</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='userpwd identifier id'>userpwd</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:http_authentication</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>':'</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:http_authentication</span><span class='rparen token'>)</span>

    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='max_redirects identifier id'>max_redirects</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:max_redirects</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:max_redirects</span><span class='rbrack token'>]</span>
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='timeout identifier id'>timeout</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:timeout</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:timeout</span><span class='rbrack token'>]</span>
    
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='on_success identifier id'>on_success</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span>
      <span class='add_url_to_multi identifier id'>add_url_to_multi</span><span class='lparen token'>(</span><span class='multi identifier id'>multi</span><span class='comma token'>,</span> <span class='url_queue identifier id'>url_queue</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='comma token'>,</span> <span class='url_queue identifier id'>url_queue</span><span class='comma token'>,</span> <span class='responses identifier id'>responses</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='url_queue identifier id'>url_queue</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
      <span class='xml identifier id'>xml</span> <span class='assign token'>=</span> <span class='decode_content identifier id'>decode_content</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='rparen token'>)</span>
      <span class='klass identifier id'>klass</span> <span class='assign token'>=</span> <span class='determine_feed_parser_for_xml identifier id'>determine_feed_parser_for_xml</span><span class='lparen token'>(</span><span class='xml identifier id'>xml</span><span class='rparen token'>)</span>
      
      <span class='if if kw'>if</span> <span class='klass identifier id'>klass</span>
        <span class='begin begin kw'>begin</span>
          <span class='feed identifier id'>feed</span> <span class='assign token'>=</span> <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='xml identifier id'>xml</span><span class='rparen token'>)</span>
          <span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='feed_url identifier id'>feed_url</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='last_effective_url identifier id'>last_effective_url</span>
          <span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='etag identifier id'>etag</span> <span class='assign token'>=</span> <span class='etag_from_header identifier id'>etag_from_header</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='rparen token'>)</span>
          <span class='feed identifier id'>feed</span><span class='dot token'>.</span><span class='last_modified identifier id'>last_modified</span> <span class='assign token'>=</span> <span class='last_modified_from_header identifier id'>last_modified_from_header</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='rparen token'>)</span>
          <span class='responses identifier id'>responses</span><span class='lbrack token'>[</span><span class='url identifier id'>url</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='feed identifier id'>feed</span>
          <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:on_success</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='url identifier id'>url</span><span class='comma token'>,</span> <span class='feed identifier id'>feed</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:on_success</span><span class='rparen token'>)</span>
        <span class='rescue rescue kw'>rescue</span> <span class='Exception constant id'>Exception</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
          <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:on_failure</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='url identifier id'>url</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='response_code identifier id'>response_code</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='body_str identifier id'>body_str</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:on_failure</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
      <span class='else else kw'>else</span>
        <span class='comment val'># puts &quot;Error determining parser for #{url} - #{c.last_effective_url}&quot;</span>
        <span class='comment val'># raise NoParserAvailable.new(&quot;no valid parser for content.&quot;) (this would unfirtunately fail the whole 'multi', so it's not really useable)</span>
        <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:on_failure</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='url identifier id'>url</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='response_code identifier id'>response_code</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='body_str identifier id'>body_str</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:on_failure</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    
    <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='on_failure identifier id'>on_failure</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='comma token'>,</span> <span class='err identifier id'>err</span><span class='bitor op'>|</span>
      <span class='add_url_to_multi identifier id'>add_url_to_multi</span><span class='lparen token'>(</span><span class='multi identifier id'>multi</span><span class='comma token'>,</span> <span class='url_queue identifier id'>url_queue</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='comma token'>,</span> <span class='url_queue identifier id'>url_queue</span><span class='comma token'>,</span> <span class='responses identifier id'>responses</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='url_queue identifier id'>url_queue</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
      <span class='responses identifier id'>responses</span><span class='lbrack token'>[</span><span class='url identifier id'>url</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='response_code identifier id'>response_code</span>
      <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:on_failure</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='url identifier id'>url</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='response_code identifier id'>response_code</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='comma token'>,</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='body_str identifier id'>body_str</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:on_failure</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='multi identifier id'>multi</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='easy identifier id'>easy</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>decode_content</h3>
</div><div id="decode_content-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>decode_content</span><span class='args'>(c)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Decodes the XML document if it was compressed.
</p>
<h3>Parameters</h3>
<dl>
<dt>curl_request&lt;Curl::Easy&gt;</dt><dd>The Curl::Easy response object from the request.

</dd>
</dl>
<h3>Returns</h3>
<p>
A decoded string of XML.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 145</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L145">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='decode_content identifier id'>decode_content</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='regexp val'>/Content-Encoding: gzip/</span><span class='rparen token'>)</span>
    <span class='begin begin kw'>begin</span>
      <span class='gz identifier id'>gz</span> <span class='assign token'>=</span>  <span class='Zlib constant id'>Zlib</span><span class='colon2 op'>::</span><span class='GzipReader constant id'>GzipReader</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='StringIO constant id'>StringIO</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='body_str identifier id'>body_str</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
      <span class='xml identifier id'>xml</span> <span class='assign token'>=</span> <span class='gz identifier id'>gz</span><span class='dot token'>.</span><span class='read identifier id'>read</span>
      <span class='gz identifier id'>gz</span><span class='dot token'>.</span><span class='close identifier id'>close</span>
    <span class='rescue rescue kw'>rescue</span> <span class='Zlib constant id'>Zlib</span><span class='colon2 op'>::</span><span class='GzipFile constant id'>GzipFile</span><span class='colon2 op'>::</span><span class='Error constant id'>Error</span> 
      <span class='comment val'># Maybe this is not gzipped?</span>
      <span class='xml identifier id'>xml</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='body_str identifier id'>body_str</span>
    <span class='end end kw'>end</span>
  <span class='elsif elsif kw'>elsif</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='header_str identifier id'>header_str</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='regexp val'>/Content-Encoding: deflate/</span><span class='rparen token'>)</span>
    <span class='xml identifier id'>xml</span> <span class='assign token'>=</span> <span class='Zlib constant id'>Zlib</span><span class='colon2 op'>::</span><span class='Inflate constant id'>Inflate</span><span class='dot token'>.</span><span class='inflate identifier id'>inflate</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='dot token'>.</span><span class='body_str identifier id'>body_str</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='xml identifier id'>xml</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='body_str identifier id'>body_str</span>
  <span class='end end kw'>end</span>

  <span class='xml identifier id'>xml</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>determine_feed_parser_for_xml</h3>
</div><div id="determine_feed_parser_for_xml-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>determine_feed_parser_for_xml</span><span class='args'>(xml)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Determines the correct parser class to use for parsing the feed.
</p>
<h3>Parameters</h3>
<dl>
<dt>xml&lt;String&gt;</dt><dd>The XML that you would like determine the parser for.

</dd>
</dl>
<h3>Returns</h3>
<p>
The class name of the parser that can handle the XML.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 29</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L29">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">29
30
31
32</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='determine_feed_parser_for_xml identifier id'>determine_feed_parser_for_xml</span><span class='lparen token'>(</span><span class='xml identifier id'>xml</span><span class='rparen token'>)</span>
  <span class='start_of_doc identifier id'>start_of_doc</span> <span class='assign token'>=</span> <span class='xml identifier id'>xml</span><span class='dot token'>.</span><span class='slice identifier id'>slice</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='comma token'>,</span> <span class='integer val'>2000</span><span class='rparen token'>)</span>
  <span class='feed_classes identifier id'>feed_classes</span><span class='dot token'>.</span><span class='detect identifier id'>detect</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='klass identifier id'>klass</span><span class='bitor op'>|</span> <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='able_to_parse? fid id'>able_to_parse?</span><span class='lparen token'>(</span><span class='start_of_doc identifier id'>start_of_doc</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>etag_from_header</h3>
</div><div id="etag_from_header-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>etag_from_header</span><span class='args'>(header)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Determines the etag from the request headers.
</p>
<h3>Parameters</h3>
<dl>
<dt>header&lt;String&gt;</dt><dd>Raw request header returned from the request

</dd>
</dl>
<h3>Returns</h3>
<p>
A string of the etag or nil if it cannot be found in the headers.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 308</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L308">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">308
309
310
311</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='etag_from_header identifier id'>etag_from_header</span><span class='lparen token'>(</span><span class='header identifier id'>header</span><span class='rparen token'>)</span>
  <span class='header identifier id'>header</span> <span class='match op'>=~</span> <span class='regexp val'>/.*ETag:\s(.*)\r/</span>
  <span class='$1 nth_ref id'>$1</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>feed_classes</h3>
</div><div id="feed_classes-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>feed_classes</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Provides a list of registered feed parsing classes.
</p>
<h3>Returns</h3>
<p>
A array of class names.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 48</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L48">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">48
49
50</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='feed_classes identifier id'>feed_classes</span>
  <span class='@feed_classes ivar id'>@feed_classes</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='Feedzirra constant id'>Feedzirra</span><span class='colon2 op'>::</span><span class='Parser constant id'>Parser</span><span class='colon2 op'>::</span><span class='RSS constant id'>RSS</span><span class='comma token'>,</span> <span class='Feedzirra constant id'>Feedzirra</span><span class='colon2 op'>::</span><span class='Parser constant id'>Parser</span><span class='colon2 op'>::</span><span class='AtomFeedBurner constant id'>AtomFeedBurner</span><span class='comma token'>,</span> <span class='Feedzirra constant id'>Feedzirra</span><span class='colon2 op'>::</span><span class='Parser constant id'>Parser</span><span class='colon2 op'>::</span><span class='Atom constant id'>Atom</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>fetch_and_parse</h3>
</div><div id="fetch_and_parse-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>fetch_and_parse</span><span class='args'>(urls, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Fetches and returns the parsed XML for each URL provided.
</p>
<h3>Parameters</h3>
<dl>
<dt>urls&lt;String&gt; or &lt;Array&gt;</dt><dd>A single feed URL, or an array of feed URLs.

</dd>
<dt>options&lt;Hash&gt;</dt><dd>Valid keys for this argument as as followed:

</dd>
</dl>
<ul>
<li>:user_agent - String that overrides the default user agent.

</li>
<li>:if_modified_since - Time object representing when the feed was last
updated.

</li>
<li>:if_none_match - String, an etag for the request that was stored
previously.

</li>
<li>:on_success - Block that gets executed after a successful request.

</li>
<li>:on_failure - Block that gets executed after a failed request.

</li>
</ul>
<h3>Returns</h3>
<p>
A Feed object if a single URL is passed.
</p>
<p>
A Hash if multiple URL&#8217;s are passed. The key will be the URL, and the
value the Feed object.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 124</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L124">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">124
125
126
127
128
129
130
131
132
133
134
135
136
137</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='fetch_and_parse identifier id'>fetch_and_parse</span><span class='lparen token'>(</span><span class='urls identifier id'>urls</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='url_queue identifier id'>url_queue</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='mult op'>*</span><span class='urls identifier id'>urls</span><span class='rbrack token'>]</span>
  <span class='multi identifier id'>multi</span> <span class='assign token'>=</span> <span class='Curl constant id'>Curl</span><span class='colon2 op'>::</span><span class='Multi constant id'>Multi</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='responses identifier id'>responses</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  
  <span class='comment val'># I broke these down so I would only try to do 30 simultaneously because</span>
  <span class='comment val'># I was getting weird errors when doing a lot. As one finishes it pops another off the queue.</span>
  <span class='url_queue identifier id'>url_queue</span><span class='dot token'>.</span><span class='slice! fid id'>slice!</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='comma token'>,</span> <span class='integer val'>30</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='url identifier id'>url</span><span class='bitor op'>|</span>
    <span class='add_url_to_multi identifier id'>add_url_to_multi</span><span class='lparen token'>(</span><span class='multi identifier id'>multi</span><span class='comma token'>,</span> <span class='url identifier id'>url</span><span class='comma token'>,</span> <span class='url_queue identifier id'>url_queue</span><span class='comma token'>,</span> <span class='responses identifier id'>responses</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
 
  <span class='multi identifier id'>multi</span><span class='dot token'>.</span><span class='perform identifier id'>perform</span>
  <span class='return return kw'>return</span> <span class='urls identifier id'>urls</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='String constant id'>String</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='responses identifier id'>responses</span><span class='dot token'>.</span><span class='values identifier id'>values</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='colon op'>:</span> <span class='responses identifier id'>responses</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>fetch_raw</h3>
</div><div id="fetch_raw-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>fetch_raw</span><span class='args'>(urls, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Fetches and returns the raw XML for each URL provided.
</p>
<h3>Parameters</h3>
<dl>
<dt>urls&lt;String&gt; or &lt;Array&gt;</dt><dd>A single feed URL, or an array of feed URLs.

</dd>
<dt>options&lt;Hash&gt;</dt><dd>Valid keys for this argument as as followed: :user_agent - String that
overrides the default user agent. :if_modified_since - Time object
representing when the feed was last updated. :if_none_match - String
that&#8217;s normally an etag for the request that was stored previously.
:on_success - Block that gets executed after a successful request.
:on_failure - Block that gets executed after a failed request.

</dd>
</dl>
<h3>Returns</h3>
<p>
A String of XML if a single URL is passed.
</p>
<p>
A Hash if multiple URL&#8217;s are passed. The key will be the URL, and the
value the XML.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 80</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L80">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='fetch_raw identifier id'>fetch_raw</span><span class='lparen token'>(</span><span class='urls identifier id'>urls</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='url_queue identifier id'>url_queue</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='mult op'>*</span><span class='urls identifier id'>urls</span><span class='rbrack token'>]</span>
  <span class='multi identifier id'>multi</span> <span class='assign token'>=</span> <span class='Curl constant id'>Curl</span><span class='colon2 op'>::</span><span class='Multi constant id'>Multi</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='responses identifier id'>responses</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='url_queue identifier id'>url_queue</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='url identifier id'>url</span><span class='bitor op'>|</span>
    <span class='easy identifier id'>easy</span> <span class='assign token'>=</span> <span class='Curl constant id'>Curl</span><span class='colon2 op'>::</span><span class='Easy constant id'>Easy</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='url identifier id'>url</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='curl identifier id'>curl</span><span class='bitor op'>|</span>
      <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;User-Agent&quot;</span><span class='rbrack token'>]</span>        <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_agent</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='USER_AGENT constant id'>USER_AGENT</span><span class='rparen token'>)</span>
      <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;If-Modified-Since&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:if_modified_since</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='httpdate identifier id'>httpdate</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:if_modified_since</span><span class='rparen token'>)</span>
      <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;If-None-Match&quot;</span><span class='rbrack token'>]</span>     <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:if_none_match</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:if_none_match</span><span class='rparen token'>)</span>
      <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>&quot;Accept-encoding&quot;</span><span class='rbrack token'>]</span>   <span class='assign token'>=</span> <span class='string val'>'gzip, deflate'</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:compress</span><span class='rparen token'>)</span>
      <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='follow_location identifier id'>follow_location</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
      <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='userpwd identifier id'>userpwd</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:http_authentication</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>':'</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:http_authentication</span><span class='rparen token'>)</span>
      
      <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='max_redirects identifier id'>max_redirects</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:max_redirects</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:max_redirects</span><span class='rbrack token'>]</span>
      <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='timeout identifier id'>timeout</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:timeout</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:timeout</span><span class='rbrack token'>]</span>

      <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='on_success identifier id'>on_success</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span>
        <span class='responses identifier id'>responses</span><span class='lbrack token'>[</span><span class='url identifier id'>url</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='decode_content identifier id'>decode_content</span><span class='lparen token'>(</span><span class='c identifier id'>c</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
      <span class='curl identifier id'>curl</span><span class='dot token'>.</span><span class='on_failure identifier id'>on_failure</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='comma token'>,</span> <span class='err identifier id'>err</span><span class='bitor op'>|</span>
        <span class='responses identifier id'>responses</span><span class='lbrack token'>[</span><span class='url identifier id'>url</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='response_code identifier id'>response_code</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='multi identifier id'>multi</span><span class='dot token'>.</span><span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='easy identifier id'>easy</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='multi identifier id'>multi</span><span class='dot token'>.</span><span class='perform identifier id'>perform</span>
  <span class='urls identifier id'>urls</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='String constant id'>String</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='responses identifier id'>responses</span><span class='dot token'>.</span><span class='values identifier id'>values</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='colon op'>:</span> <span class='responses identifier id'>responses</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>last_modified_from_header</h3>
</div><div id="last_modified_from_header-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>last_modified_from_header</span><span class='args'>(header)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Determines the last modified date from the request headers.
</p>
<h3>Parameters</h3>
<dl>
<dt>header&lt;String&gt;</dt><dd>Raw request header returned from the request

</dd>
</dl>
<h3>Returns</h3>
<p>
A Time object of the last modified date or nil if it cannot be found in the
headers.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 319</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L319">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">319
320
321
322</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='last_modified_from_header identifier id'>last_modified_from_header</span><span class='lparen token'>(</span><span class='header identifier id'>header</span><span class='rparen token'>)</span>
  <span class='header identifier id'>header</span> <span class='match op'>=~</span> <span class='regexp val'>/.*Last-Modified:\s(.*)\r/</span>
  <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='$1 nth_ref id'>$1</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='$1 nth_ref id'>$1</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>parse</h3>
</div><div id="parse-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>parse</span><span class='args'>(xml)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Takes a raw XML feed and attempts to parse it. If no parser is available a
Feedzirra::NoParserAvailable exception is raised.
</p>
<h3>Parameters</h3>
<dl>
<dt>xml&lt;String&gt;</dt><dd>The XML that you would like parsed.

</dd>
</dl>
<h3>Returns</h3>
<p>
An instance of the determined feed type. By default a Feedzirra::Atom,
Feedzirra::AtomFeedBurner, Feedzirra::RDF, or Feedzirra::RSS object.
</p>
<h3>Raises</h3>
<p>
Feedzirra::NoParserAvailable : If no valid parser classes could be found
for the feed.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 15</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L15">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">15
16
17
18
19
20
21</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='xml identifier id'>xml</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='parser identifier id'>parser</span> <span class='assign token'>=</span> <span class='determine_feed_parser_for_xml identifier id'>determine_feed_parser_for_xml</span><span class='lparen token'>(</span><span class='xml identifier id'>xml</span><span class='rparen token'>)</span>
    <span class='parser identifier id'>parser</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='xml identifier id'>xml</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='NoParserAvailable constant id'>NoParserAvailable</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;No valid parser for XML.&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>update</h3>
</div><div id="update-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>update</span><span class='args'>(feeds, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Updates each feed for each Feed object provided.
</p>
<h3>Parameters</h3>
<dl>
<dt>feeds&lt;Feed&gt; or &lt;Array&gt;</dt><dd>A single feed object, or an array of feed objects.

</dd>
<dt>options&lt;Hash&gt;</dt><dd>Valid keys for this argument as as followed:

<ul>
<li>:user_agent - String that overrides the default user agent.

</li>
<li>:on_success - Block that gets executed after a successful request.

</li>
<li>:on_failure - Block that gets executed after a failed request.

</li>
</ul>
</dd>
</dl>
<h3>Returns</h3>
<p>
A updated Feed object if a single URL is passed.
</p>
<p>
A Hash if multiple Feeds are passed. The key will be the URL, and the value
the updated Feed object.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/feedzirra/feed.rb', line 176</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/pauldix/feedzirra/blob/7e44171efe7bc7c89361e3245d1ff8ad534e18a5/lib/feedzirra/feed.rb#L176">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">176
177
178
179
180
181
182
183
184
185
186
187</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='feeds identifier id'>feeds</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='feed_queue identifier id'>feed_queue</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='mult op'>*</span><span class='feeds identifier id'>feeds</span><span class='rbrack token'>]</span>
  <span class='multi identifier id'>multi</span> <span class='assign token'>=</span> <span class='Curl constant id'>Curl</span><span class='colon2 op'>::</span><span class='Multi constant id'>Multi</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='responses identifier id'>responses</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  
  <span class='feed_queue identifier id'>feed_queue</span><span class='dot token'>.</span><span class='slice! fid id'>slice!</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='comma token'>,</span> <span class='integer val'>30</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='feed identifier id'>feed</span><span class='bitor op'>|</span>
    <span class='add_feed_to_multi identifier id'>add_feed_to_multi</span><span class='lparen token'>(</span><span class='multi identifier id'>multi</span><span class='comma token'>,</span> <span class='feed identifier id'>feed</span><span class='comma token'>,</span> <span class='feed_queue identifier id'>feed_queue</span><span class='comma token'>,</span> <span class='responses identifier id'>responses</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='multi identifier id'>multi</span><span class='dot token'>.</span><span class='perform identifier id'>perform</span>
  <span class='responses identifier id'>responses</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='eq op'>==</span> <span class='integer val'>1</span> <span class='question op'>?</span> <span class='responses identifier id'>responses</span><span class='dot token'>.</span><span class='values identifier id'>values</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='colon op'>:</span> <span class='responses identifier id'>responses</span><span class='dot token'>.</span><span class='values identifier id'>values</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>