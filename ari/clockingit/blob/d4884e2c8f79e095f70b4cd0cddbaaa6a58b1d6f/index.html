<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>ari's clockingit - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/ari/commits/clockingit/master" rel="alternate" title="Recent Commits to clockingit:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("ari", "clockingit", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='ari/clockingit/blob/d4884e2c8f79e095f70b4cd0cddbaaa6a58b1d6f' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='ari/clockingit/blob/d4884e2c8f79e095f70b4cd0cddbaaa6a58b1d6f' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("ari", "clockingit", "d4884e2c8f79e095f70b4cd0cddbaaa6a58b1d6f", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/ari/clockingit/tree/">Source</a></li>
            <li class=""><a href="http://github.com/ari/clockingit/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/ari/clockingit/network">Network</a></li>            
            <li class=""><a href="http://github.com/ari/clockingit/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/ari/clockingit">Wiki</a></li>
            <li class=""><a href="http://github.com/ari/clockingit/graphs">Graphs</a></li>                    
            <li class="active"><a href="/ari/clockingit">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/ari">ari</a> / <b><a href="http://github.com/ari/clockingit/tree">clockingit</a></b>        
                <a id="namespaces_button" rel="ari/clockingit/blob/d4884e2c8f79e095f70b4cd0cddbaaa6a58b1d6f" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="ari/clockingit/blob/d4884e2c8f79e095f70b4cd0cddbaaa6a58b1d6f" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h2>Installing CIT on your server</h2>
<h3>Step 1: Getting the source</h3>
<p>
The source is released under the MIT/X Consortium License.
</p>
<p>
The easiest way to get the source and easily update it from time to time is
with git. You&#8217;ll need to install that on your machine and then run:
</p>
<pre class="code">
  <span class='git identifier id'>git</span> <span class='clone identifier id'>clone</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/</span><span class='ari identifier id'>ari</span><span class='div op'>/</span><span class='clockingit identifier id'>clockingit</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
</pre>
<h3>Step 2: Prerequsites</h3>
<p>
You need to be running some type of Unix: OSX, Linux, Solaris, BSD. Windows
will probably not work. You will also need a database. MySQL has been
heavily tested, and some people are running postgresql.
</p>
<p>
Install the following packages:
</p>
<ul>
<li>ruby gems

</li>
<li>ruby mysql driver (you could also choose postgresql)

</li>
<li>rake

</li>
<li>ImageMagick

</li>
</ul>
<p>
How to install these will differ on each platform. Some possibilities:
</p>
<h4>FreeBSD</h4>
<pre class="code">
  <span class='portinstall identifier id'>portinstall</span> <span class='ruby identifier id'>ruby</span><span class='minus op'>-</span><span class='iconv identifier id'>iconv</span> <span class='ruby18 identifier id'>ruby18</span><span class='minus op'>-</span><span class='gems identifier id'>gems</span> <span class='ruby18 identifier id'>ruby18</span><span class='minus op'>-</span><span class='mysql identifier id'>mysql</span> <span class='rubygem identifier id'>rubygem</span><span class='minus op'>-</span><span class='rake identifier id'>rake</span> <span class='ImageMagick constant id'>ImageMagick</span>
</pre>
<h4>OSX</h4>
<p>
First install the Macports system from http://www.macports.org. Then:
</p>
<pre class="code">
  <span class='sudo identifier id'>sudo</span> <span class='port identifier id'>port</span> <span class='install identifier id'>install</span> <span class='rb identifier id'>rb</span><span class='minus op'>-</span><span class='rubygems identifier id'>rubygems</span> <span class='rb identifier id'>rb</span><span class='minus op'>-</span><span class='mysql identifier id'>mysql</span> <span class='rb identifier id'>rb</span><span class='minus op'>-</span><span class='rake identifier id'>rake</span> <span class='ImageMagick constant id'>ImageMagick</span>
</pre>
<h4>Other</h4>
<p>
Under other operating systems use your favourite package manager to ensure
you have Ruby 1.8.x, rubygems, Imagemagick, Rake and the Ruby mysql driver
installed.
</p>
<h3>Step 3: Phusion Passenger</h3>
<p>
Install Phusion Passenger from http://www.modrails.com/install.html You can
also run CIT with Mongrel, but it tends to be a little easier with Phusion
to set up.
</p>
<p>
Naturally you&#8217;ll want to be running Apache httpd and have an
appropriate virtual host set up. There are lots of great resources out
there to help with that. The virtual host should point to the top of the
CIT installation directory.
</p>
<h3>Step 4: Setup configuration and database</h3>
<pre class="code">
  <span class='ruby identifier id'>ruby</span> <span class='setup identifier id'>setup</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
</pre>
<h3>Step 5: Ruby gems</h3>
<p>
There are a few Ruby gems which are needed for running CIT. Change
directory into the top of your CIT installation, then type:
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='gems identifier id'>gems</span><span class='symbol val'>:install</span>
</pre>
<p>
That will install the gems you need.
</p>
<p>
If you have trouble on OSX with the mysql gem (this seems to be an issue on
10.5 and 10.6), then try this
</p>
<pre class="code">
  <span class='sudo identifier id'>sudo</span> <span class='env identifier id'>env</span> <span class='ARCHFLAGS constant id'>ARCHFLAGS</span><span class='assign token'>=</span><span class='string val'>&quot;-arch i386&quot;</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='mysql identifier id'>mysql</span> <span class='minus op'>-</span><span class='minus op'>-</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='with identifier id'>with</span><span class='minus op'>-</span><span class='mysql identifier id'>mysql</span><span class='minus op'>-</span><span class='include identifier id'>include</span><span class='assign token'>=</span><span class='regexp val'>/opt/</span><span class='local identifier id'>local</span><span class='div op'>/</span><span class='include identifier id'>include</span><span class='div op'>/</span><span class='mysql5 identifier id'>mysql5</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='with identifier id'>with</span><span class='minus op'>-</span><span class='mysql identifier id'>mysql</span><span class='minus op'>-</span><span class='lib identifier id'>lib</span><span class='assign token'>=</span><span class='regexp val'>/opt/</span><span class='local identifier id'>local</span><span class='div op'>/</span><span class='lib identifier id'>lib</span><span class='div op'>/</span><span class='mysql5 identifier id'>mysql5</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='with identifier id'>with</span><span class='minus op'>-</span><span class='mysql identifier id'>mysql</span><span class='minus op'>-</span><span class='config identifier id'>config</span><span class='assign token'>=</span><span class='regexp val'>/opt/</span><span class='local identifier id'>local</span><span class='div op'>/</span><span class='lib identifier id'>lib</span><span class='div op'>/</span><span class='mysql5 identifier id'>mysql5</span><span class='div op'>/</span><span class='bin identifier id'>bin</span><span class='div op'>/</span><span class='mysql_config identifier id'>mysql_config</span>
</pre>
<h2>Upgrading to a newer revision</h2>
<pre class="code">
  <span class='git identifier id'>git</span> <span class='checkout identifier id'>checkout</span> <span class='db identifier id'>db</span><span class='div op'>/</span><span class='schema identifier id'>schema</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
  <span class='git identifier id'>git</span> <span class='pull identifier id'>pull</span>
</pre>
<p>
Check that there aren&#8217;t any updated gems or new gems to install. If
there are, just follow the instructions you will be given on screen.
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='gems identifier id'>gems</span>
</pre>
<p>
Next, make sure the database is updated and javascript/css rebuilt.
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='db identifier id'>db</span><span class='symbol val'>:migrate</span> <span class='RAILS_ENV constant id'>RAILS_ENV</span><span class='assign token'>=</span><span class='production identifier id'>production</span>
  <span class='rake identifier id'>rake</span> <span class='asset identifier id'>asset</span><span class='symbol val'>:packager</span><span class='symbol val'>:build_all</span>
</pre>
<p>
Depending on which environment you are updating, you can change the
RAIL_ENV value to &quot;test&quot; or &quot;development&quot; and the
appropriate database will be updated.
</p>
<p>
Find the daemons running with
</p>
<pre class="code">
  <span class='ps identifier id'>ps</span> <span class='ax identifier id'>ax</span> <span class='bitor op'>|</span> <span class='grep identifier id'>grep</span> <span class='ruby identifier id'>ruby</span>
</pre>
<p>
then kill each of the three running daemons.
</p>
<p>
Restart daemons
</p>
<pre class="code">
  <span class='cd identifier id'>cd</span> <span class='regexp val'>/usr/</span><span class='local identifier id'>local</span><span class='div op'>/</span><span class='www identifier id'>www</span><span class='div op'>/</span><span class='clockingit identifier id'>clockingit</span>
  <span class='nohup identifier id'>nohup</span> <span class='dot token'>.</span><span class='div op'>/</span><span class='script identifier id'>script</span><span class='div op'>/</span><span class='push_server identifier id'>push_server</span> <span class='bitand op'>&amp;</span>
  <span class='dot token'>.</span><span class='div op'>/</span><span class='script identifier id'>script</span><span class='div op'>/</span><span class='ferret_server identifier id'>ferret_server</span> <span class='minus op'>-</span><span class='e identifier id'>e</span> <span class='production identifier id'>production</span> <span class='start identifier id'>start</span>
  <span class='apachectl identifier id'>apachectl</span> <span class='restart identifier id'>restart</span>
</pre>
<h2>Setting up Email Integration</h2>
<p>
You need to set up your email software so that it sends all emails for a
subdomain to your rails user, and set up the alias so that it runs the
mailman script.
</p>
<p>
For example to configure sendmail to pass to ClockingIT all emails sent to
domain.com. See http://www.freebsd.org/doc/en/books/handbook/sendmail.html
for more help on configuring sendmail on FreeBSD systems.
</p>
<p>
Add an entry to /etc/mail/local-host-names to contain your domain
</p>
<pre class="code">
  <span class='domain identifier id'>domain</span><span class='dot token'>.</span><span class='com identifier id'>com</span>
</pre>
<p>
Add an entry to /etc/mail/aliases to create an alias that will hand off
emails to the mailman script
</p>
<pre class="code">
  <span class='cit identifier id'>cit</span><span class='colon op'>:</span> <span class='string val'>&quot;|/path/to/cit/script/runner -e production 'Mailman.receive(STDIN.read)'&quot;</span>
</pre>
<p>
Add an entry to /etc/mail/virtusertable to redirect all emails to your
domain to the above alias
</p>
<pre class="code">
  <span class='@domain ivar id'>@domain</span><span class='dot token'>.</span><span class='com identifier id'>com</span>        <span class='cit identifier id'>cit</span>
</pre>
<p>
run &quot;make; make restart&quot; in /etc/mail
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>