<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Class: Sequel::SQL::BooleanExpression</title>
  </head>
  <body>
    <div id="content">
      <div class="section class Sequel_SQL_BooleanExpression">
  <h1 class="title">Class: Sequel::SQL::BooleanExpression</h1>
  <div class="section inheritance">
  <ul>
  <li><a href='Expression.html' title='Sequel::SQL::Expression'>Sequel::SQL::Expression</a></li><ul><li><a href='ComplexExpression.html' title='Sequel::SQL::ComplexExpression'>Sequel::SQL::ComplexExpression</a></li><ul><li>Sequel::SQL::BooleanExpression</li>
  </ul></ul></ul>
</div><div class="section mixins">
  <h1>Included Modules</h1>
  <p><a href='BooleanExpression/BooleanMethods.html' title='Sequel::SQL::BooleanMethods'>Sequel::SQL::BooleanMethods</a></p>
</div><div class="section docstring">
  <p>
Subclass of ComplexExpression where the expression results in a boolean
value in SQL.
</p>

</div><div class="section constants">
  <div class="inherited">
  
  <div>
    <h1>Constants Inherited from <a href='ComplexExpression.html' title='Sequel::SQL::ComplexExpression'>Sequel::SQL::ComplexExpression</a></h1>
    <p><span class='name'><a href='ComplexExpression.html#BITWISE_OPERATORS-constant' title='BITWISE_OPERATORS'>BITWISE_OPERATORS</a></span>, <span class='name'><a href='ComplexExpression.html#BOOLEAN_OPERATOR_METHODS-constant' title='BOOLEAN_OPERATOR_METHODS'>BOOLEAN_OPERATOR_METHODS</a></span>, <span class='name'><a href='ComplexExpression.html#INEQUALITY_OPERATORS-constant' title='INEQUALITY_OPERATORS'>INEQUALITY_OPERATORS</a></span>, <span class='name'><a href='ComplexExpression.html#IS_OPERATORS-constant' title='IS_OPERATORS'>IS_OPERATORS</a></span>, <span class='name'><a href='ComplexExpression.html#MATHEMATICAL_OPERATORS-constant' title='MATHEMATICAL_OPERATORS'>MATHEMATICAL_OPERATORS</a></span>, <span class='name'><a href='ComplexExpression.html#N_ARITY_OPERATORS-constant' title='N_ARITY_OPERATORS'>N_ARITY_OPERATORS</a></span>, <span class='name'><a href='ComplexExpression.html#ONE_ARITY_OPERATORS-constant' title='ONE_ARITY_OPERATORS'>ONE_ARITY_OPERATORS</a></span>, <span class='name'><a href='ComplexExpression.html#OPERTATOR_INVERSIONS-constant' title='OPERTATOR_INVERSIONS'>OPERTATOR_INVERSIONS</a></span>, <span class='name'><a href='ComplexExpression.html#TWO_ARITY_OPERATORS-constant' title='TWO_ARITY_OPERATORS'>TWO_ARITY_OPERATORS</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
</div><div class="section constructor">
<h1>Constructor Summary</h1>
  <p class="inherited_msg">
    This class inherits a constructor from <a href='ComplexExpression.html#initialize-instance_method' title='Sequel::SQL::ComplexExpression'>Sequel::SQL::ComplexExpression</a>.
  </p>
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary class public">
    <h1>Public Class Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#from_value_pairs-class_method' title='from_value_pairs'>from_value_pairs</a></span><span class='args'>(pairs, op=:AND, negate=false)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Take pairs of values (e.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#invert-class_method' title='invert'>invert</a></span><span class='args'>(ce)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Invert the expression, if possible.
</p>

        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h1>Public Class Methods Inherited from <a href='Expression.html' title='Sequel::SQL::Expression'>Sequel::SQL::Expression</a></h1>
    <p><span class='name'><a href='Expression.html#to_s_method-class_method' title='to_s_method'>to_s_method</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
  <div class="section methodsummary instance public">
    <div class="inherited">
  
  <div>
    <h1>Public Instance Methods Inherited from <a href='ComplexExpression.html' title='Sequel::SQL::ComplexExpression'>Sequel::SQL::ComplexExpression</a></h1>
    <p><span class='name'><a href='ComplexExpression.html#eql%3F-instance_method' title='eql?'>eql?</a></span></p>
  </div>
  
  <div>
    <h1>Public Instance Methods Inherited from <a href='Expression.html' title='Sequel::SQL::Expression'>Sequel::SQL::Expression</a></h1>
    <p><span class='name'><a href='Expression.html#lit-instance_method' title='lit'>lit</a></span></p>
  </div>
  
</div>
<div class="clear"></div><div class="included">
  
  <div>
    <h1>Public Instance Methods Included from <a href='BooleanExpression/BooleanMethods.html' title='Sequel::SQL::BooleanMethods'>Sequel::SQL::BooleanMethods</a></h1>
    <p><span class='name'><a href='BooleanMethods.html#%7E-instance_method' title='~'>~</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails class public">
  <h1>Public Class Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>from_value_pairs</h3>
</div><div id="from_value_pairs-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>from_value_pairs</span><span class='args'>(pairs, op=:AND, negate=false)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Take pairs of values (e.g. a hash or array of arrays of two pairs) and
converts it to a BooleanExpression. The operator and args used depends on
the case of the right (2nd) argument:
</p>
<ul>
<li>0..10 - left &gt;= 0 AND left &lt;= 10

</li>
<li>[1,2] - left IN (1,2)

</li>
<li>nil - left IS NULL

</li>
<li>/as/ - left ~ &#8216;as&#8217;

</li>
<li>:blah - left = blah

</li>
<li>&#8216;blah&#8217; - left = &#8216;blah&#8217;

</li>
</ul>
<p>
If multiple arguments are given, they are joined with the op given (AND by
default, OR possible). If negate is set to true, all subexpressions are
inverted before used. Therefore, the following expressions are equivalent:
</p>
<pre class="code">
  <span class='bitnot op'>~</span><span class='from_value_pairs identifier id'>from_value_pairs</span><span class='lparen token'>(</span><span class='hash identifier id'>hash</span><span class='rparen token'>)</span>
  <span class='from_value_pairs identifier id'>from_value_pairs</span><span class='lparen token'>(</span><span class='hash identifier id'>hash</span><span class='comma token'>,</span> <span class='symbol val'>:OR</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/sequel/sql.rb', line 423</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='from_value_pairs identifier id'>from_value_pairs</span><span class='lparen token'>(</span><span class='pairs identifier id'>pairs</span><span class='comma token'>,</span> <span class='op identifier id'>op</span><span class='assign token'>=</span><span class='symbol val'>:AND</span><span class='comma token'>,</span> <span class='negate identifier id'>negate</span><span class='assign token'>=</span><span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='pairs identifier id'>pairs</span> <span class='assign token'>=</span> <span class='pairs identifier id'>pairs</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='l identifier id'>l</span><span class='comma token'>,</span><span class='r identifier id'>r</span><span class='bitor op'>|</span>
    <span class='ce identifier id'>ce</span> <span class='assign token'>=</span> <span class='case case kw'>case</span> <span class='r identifier id'>r</span>
    <span class='when when kw'>when</span> <span class='Range constant id'>Range</span>
      <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:AND</span><span class='comma token'>,</span> <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:&gt;=</span><span class='comma token'>,</span> <span class='l identifier id'>l</span><span class='comma token'>,</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='begin identifier id'>begin</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='dot token'>.</span><span class='exclude_end? fid id'>exclude_end?</span> <span class='integer val'>? </span><span class='symbol val'>:&lt;</span> <span class='colon op'>:</span> <span class='symbol val'>:&lt;=</span><span class='comma token'>,</span> <span class='l identifier id'>l</span><span class='comma token'>,</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='end identifier id'>end</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='Array constant id'>Array</span><span class='comma token'>,</span> <span class='colon3 op'>::</span><span class='Sequel constant id'>Sequel</span><span class='colon2 op'>::</span><span class='Dataset constant id'>Dataset</span><span class='comma token'>,</span> <span class='SQLArray constant id'>SQLArray</span>
      <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:IN</span><span class='comma token'>,</span> <span class='l identifier id'>l</span><span class='comma token'>,</span> <span class='r identifier id'>r</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='NilClass constant id'>NilClass</span><span class='comma token'>,</span> <span class='TrueClass constant id'>TrueClass</span><span class='comma token'>,</span> <span class='FalseClass constant id'>FalseClass</span>
      <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:IS</span><span class='comma token'>,</span> <span class='l identifier id'>l</span><span class='comma token'>,</span> <span class='r identifier id'>r</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='Regexp constant id'>Regexp</span>
      <span class='StringExpression constant id'>StringExpression</span><span class='dot token'>.</span><span class='like identifier id'>like</span><span class='lparen token'>(</span><span class='l identifier id'>l</span><span class='comma token'>,</span> <span class='r identifier id'>r</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:'='</span><span class='comma token'>,</span> <span class='l identifier id'>l</span><span class='comma token'>,</span> <span class='r identifier id'>r</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='negate identifier id'>negate</span> <span class='integer val'>? </span><span class='invert identifier id'>invert</span><span class='lparen token'>(</span><span class='ce identifier id'>ce</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='ce identifier id'>ce</span>
  <span class='end end kw'>end</span>
  <span class='pairs identifier id'>pairs</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='eq op'>==</span> <span class='integer val'>1</span> <span class='question op'>?</span> <span class='pairs identifier id'>pairs</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='op identifier id'>op</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='pairs identifier id'>pairs</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>invert</h3>
</div><div id="invert-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>invert</span><span class='args'>(ce)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Invert the expression, if possible. If the expression cannot be inverted,
raise an error. An inverted expression should match everything that the
uninverted expression did not match, and vice-versa, except for possible
issues with SQL NULL (i.e. 1 == NULL is NULL and 1 != NULL is also NULL).
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


446
447
448
449
450
451
452
453
454
455
456
457
458
459
460</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/sequel/sql.rb', line 446</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='invert identifier id'>invert</span><span class='lparen token'>(</span><span class='ce identifier id'>ce</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='ce identifier id'>ce</span>
  <span class='when when kw'>when</span> <span class='BooleanExpression constant id'>BooleanExpression</span>
    <span class='case case kw'>case</span> <span class='op identifier id'>op</span> <span class='assign token'>=</span> <span class='ce identifier id'>ce</span><span class='dot token'>.</span><span class='op identifier id'>op</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:AND</span><span class='comma token'>,</span> <span class='symbol val'>:OR</span>
      <span class='BooleanExpression constant id'>BooleanExpression</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='OPERTATOR_INVERSIONS constant id'>OPERTATOR_INVERSIONS</span><span class='lbrack token'>[</span><span class='op identifier id'>op</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='ce identifier id'>ce</span><span class='dot token'>.</span><span class='args identifier id'>args</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='BooleanExpression constant id'>BooleanExpression</span><span class='dot token'>.</span><span class='invert identifier id'>invert</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='BooleanExpression constant id'>BooleanExpression</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='OPERTATOR_INVERSIONS constant id'>OPERTATOR_INVERSIONS</span><span class='lbrack token'>[</span><span class='op identifier id'>op</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='ce identifier id'>ce</span><span class='dot token'>.</span><span class='args identifier id'>args</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='when when kw'>when</span> <span class='ComplexExpression constant id'>ComplexExpression</span>
    <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='Sequel constant id'>Sequel</span><span class='colon2 op'>::</span><span class='Error constant id'>Error</span><span class='comma token'>,</span> <span class='dstring node'>&quot;operator #{ce.op} cannot be inverted&quot;</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='BooleanExpression constant id'>BooleanExpression</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:NOT</span><span class='comma token'>,</span> <span class='ce identifier id'>ce</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>