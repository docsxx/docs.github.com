<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Class: Sequel::SQL::ComplexExpression</title>
  </head>
  <body>
    <div id="content">
      <div class="section class Sequel_SQL_ComplexExpression">
  <h1 class="title">Class: Sequel::SQL::ComplexExpression</h1>
  <div class="section inheritance">
  <ul>
  <li><a href='Expression.html' title='Sequel::SQL::Expression'>Sequel::SQL::Expression</a></li><ul><li>Sequel::SQL::ComplexExpression</li>
  </ul></ul>
</div><div class="section mixins">
  <h1>Included Modules</h1>
  <p><a href='ComplexExpression/AliasMethods.html' title='Sequel::SQL::AliasMethods'>Sequel::SQL::AliasMethods</a>, <a href='ComplexExpression/CastMethods.html' title='Sequel::SQL::CastMethods'>Sequel::SQL::CastMethods</a>, <a href='ComplexExpression/OrderMethods.html' title='Sequel::SQL::OrderMethods'>Sequel::SQL::OrderMethods</a></p>
</div><div class="section docstring">
  <p>
Represents a complex SQL expression, with a given operator and one or more
attributes (which may also be ComplexExpressions, forming a tree). This
class is the backbone of the blockless filter support in Sequel.
</p>
<p>
This is an abstract class that is not that useful by itself. The subclasses
BooleanExpression, NumericExpression, and StringExpression define the
behavior of the DSL via operators.
</p>

</div><div class="section attributes">
  <h1>Attributes</h1>

  
    <div class="instance">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">args</td>
          <td class="readwrite">
            [<span id='args-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
An array of args for this object.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">op</td>
          <td class="readwrite">
            [<span id='op-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
The operator symbol for this object.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  <div class="thisclass">
  <h1>Constants</h1>
  <dl>
    
      <dt id="BITWISE_OPERATORS-constant">BITWISE_OPERATORS</dt>
      <dd>[:&amp;, :|, :^, :&lt;&lt;, :&gt;&gt;]</dd>
    
      <dt id="BOOLEAN_OPERATOR_METHODS-constant">BOOLEAN_OPERATOR_METHODS</dt>
      <dd>{:&amp; =&gt; :AND, :| =&gt;:OR}</dd>
    
      <dt id="INEQUALITY_OPERATORS-constant">INEQUALITY_OPERATORS</dt>
      <dd>[:&lt;, :&gt;, :&lt;=, :&gt;=]</dd>
    
      <dt id="IS_OPERATORS-constant">IS_OPERATORS</dt>
      <dd>[:IS, :'IS NOT']</dd>
    
      <dt id="MATHEMATICAL_OPERATORS-constant">MATHEMATICAL_OPERATORS</dt>
      <dd>[:+, :-, :/, :*]</dd>
    
      <dt id="N_ARITY_OPERATORS-constant">N_ARITY_OPERATORS</dt>
      <dd>[:AND, :OR, :'||'] + MATHEMATICAL_OPERATORS</dd>
    
      <dt id="ONE_ARITY_OPERATORS-constant">ONE_ARITY_OPERATORS</dt>
      <dd>[:NOT, :NOOP, :'B~']</dd>
    
      <dt id="OPERTATOR_INVERSIONS-constant">OPERTATOR_INVERSIONS</dt>
      <dd>{:AND =&gt; :OR, :OR =&gt; :AND, :&lt; =&gt; :&gt;=, :&gt; =&gt; :&lt;=,        :&lt;= =&gt; :&gt;, :&gt;= =&gt; :&lt;, :'=' =&gt; :'!=' , :'!=' =&gt; :'=', :LIKE =&gt; :'NOT LIKE',        :'NOT LIKE' =&gt; :LIKE, :~ =&gt; :'!~', :'!~' =&gt; :~, :IN =&gt; :'NOT IN',        :'NOT IN' =&gt; :IN, :IS =&gt; :'IS NOT', :'IS NOT' =&gt; :IS, :'~*' =&gt; :'!~*',        :'!~*' =&gt; :'~*', :NOT =&gt; :NOOP, :NOOP =&gt; :NOT, :ILIKE =&gt; :'NOT ILIKE',        :'NOT ILIKE'=&gt;:ILIKE}</dd>
    
      <dt id="TWO_ARITY_OPERATORS-constant">TWO_ARITY_OPERATORS</dt>
      <dd>[:'=', :'!=', :LIKE, :'NOT LIKE', \
:~, :'!~', :'~*', :'!~*', :IN, :'NOT IN', :ILIKE, :'NOT ILIKE'] + \
INEQUALITY_OPERATORS + BITWISE_OPERATORS + IS_OPERATORS </dd>
    
  </dl>
</div>

</div><div class="section constructor">
<h1>Constructor Summary</h1>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(op, *args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Set the operator symbol and arguments for this object to the ones given.
Convert all args that are hashes or arrays with all two pairs to
BooleanExpressions. Raise an error if the operator doesn&#8217;t allow
boolean input and a boolean argument is given. Raise an error if the wrong
number of arguments for a given operator is used.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/sequel/sql.rb', line 82</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='op identifier id'>op</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='map! fid id'>map!</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='Sequel constant id'>Sequel</span><span class='dot token'>.</span><span class='condition_specifier? fid id'>condition_specifier?</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='SQL constant id'>SQL</span><span class='colon2 op'>::</span><span class='BooleanExpression constant id'>BooleanExpression</span><span class='dot token'>.</span><span class='from_value_pairs identifier id'>from_value_pairs</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='a identifier id'>a</span><span class='rbrace token'>}</span>
  <span class='case case kw'>case</span> <span class='op identifier id'>op</span>
  <span class='when when kw'>when</span> <span class='mult op'>*</span><span class='N_ARITY_OPERATORS constant id'>N_ARITY_OPERATORS</span>
    <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='Error constant id'>Error</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The #{op} operator requires at least 1 argument&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='geq op'>&gt;=</span> <span class='integer val'>1</span>
  <span class='when when kw'>when</span> <span class='mult op'>*</span><span class='TWO_ARITY_OPERATORS constant id'>TWO_ARITY_OPERATORS</span>
    <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='Error constant id'>Error</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The #{op} operator requires precisely 2 arguments&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='eq op'>==</span> <span class='integer val'>2</span>
  <span class='when when kw'>when</span> <span class='mult op'>*</span><span class='ONE_ARITY_OPERATORS constant id'>ONE_ARITY_OPERATORS</span>
    <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='Error constant id'>Error</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The #{op} operator requires a single argument&quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='Error constant id'>Error</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Invalid operator #{op}&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='@op ivar id'>@op</span> <span class='assign token'>=</span> <span class='op identifier id'>op</span>
  <span class='@args ivar id'>@args</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary class public">
    <div class="inherited">
  
  <div>
    <h1>Public Class Methods Inherited from <a href='Expression.html' title='Sequel::SQL::Expression'>Sequel::SQL::Expression</a></h1>
    <p><span class='name'><a href='Expression.html#to_s_method-class_method' title='to_s_method'>to_s_method</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
  <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#eql%3F-instance_method' title='#eql?'>#eql?</a></span><span class='args'>(other)</span>
        <span class='block'></span>
        
          <span class='alias'>#==</span>
        
      </th>
      <td class="docstring">
        <p>
Returns true if the receiver is the same expression as the the
<tt>other</tt> expression.
</p>

        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h1>Public Instance Methods Inherited from <a href='Expression.html' title='Sequel::SQL::Expression'>Sequel::SQL::Expression</a></h1>
    <p><span class='name'><a href='Expression.html#lit-instance_method' title='lit'>lit</a></span></p>
  </div>
  
</div>
<div class="clear"></div><div class="included">
  
  <div>
    <h1>Public Instance Methods Included from <a href='ComplexExpression/AliasMethods.html' title='Sequel::SQL::AliasMethods'>Sequel::SQL::AliasMethods</a></h1>
    <p><span class='name'><a href='AliasMethods.html#as-instance_method' title='as'>as</a></span></p>
  </div>
  
  <div>
    <h1>Public Instance Methods Included from <a href='ComplexExpression/CastMethods.html' title='Sequel::SQL::CastMethods'>Sequel::SQL::CastMethods</a></h1>
    <p><span class='name'><a href='CastMethods.html#cast-instance_method' title='cast'>cast</a></span>, <span class='name'><a href='CastMethods.html#cast_numeric-instance_method' title='cast_numeric'>cast_numeric</a></span>, <span class='name'><a href='CastMethods.html#cast_string-instance_method' title='cast_string'>cast_string</a></span></p>
  </div>
  
  <div>
    <h1>Public Instance Methods Included from <a href='ComplexExpression/OrderMethods.html' title='Sequel::SQL::OrderMethods'>Sequel::SQL::OrderMethods</a></h1>
    <p><span class='name'><a href='OrderMethods.html#asc-instance_method' title='asc'>asc</a></span>, <span class='name'><a href='OrderMethods.html#desc-instance_method' title='desc'>desc</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>eql?</h3>
</div><div id="eql%3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>eql?</span><span class='args'>(other)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="%3D%3D-instance_method">==</tt>
  
</p>
</div><div class="section docstring">
  <p>
Returns true if the receiver is the same expression as the the
<tt>other</tt> expression.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


100
101
102</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/sequel/sql.rb', line 100</span>

<span class='def def kw'>def</span> <span class='eql? fid id'>eql?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
  <span class='other identifier id'>other</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='@op ivar id'>@op</span><span class='dot token'>.</span><span class='eql? fid id'>eql?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='dot token'>.</span><span class='op identifier id'>op</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='@args ivar id'>@args</span><span class='dot token'>.</span><span class='eql? fid id'>eql?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='dot token'>.</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>