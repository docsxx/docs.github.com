<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>sant0sk1's dreamy - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/sant0sk1/commits/dreamy/master" rel="alternate" title="Recent Commits to dreamy:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("sant0sk1", "dreamy", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='sant0sk1/dreamy/blob/db8cb8136786111d7138c3848916cf251ffd14df' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='sant0sk1/dreamy/blob/db8cb8136786111d7138c3848916cf251ffd14df' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("sant0sk1", "dreamy", "db8cb8136786111d7138c3848916cf251ffd14df", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/sant0sk1/dreamy/tree/">Source</a></li>
            <li class=""><a href="http://github.com/sant0sk1/dreamy/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/sant0sk1/dreamy/network">Network</a></li>            
            <li class=""><a href="http://github.com/sant0sk1/dreamy/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/sant0sk1/dreamy">Wiki</a></li>
            <li class=""><a href="http://github.com/sant0sk1/dreamy/graphs">Graphs</a></li>                    
            <li class="active"><a href="/sant0sk1/dreamy">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/sant0sk1">sant0sk1</a> / <b><a href="http://github.com/sant0sk1/dreamy/tree">dreamy</a></b>        
                <a id="namespaces_button" rel="sant0sk1/dreamy/blob/db8cb8136786111d7138c3848916cf251ffd14df" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="sant0sk1/dreamy/blob/db8cb8136786111d7138c3848916cf251ffd14df" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>What is it?</h1>

<p><a href="http://github.com/sant0sk1/dreamy">Dreamy</a> is Ruby library and command line tool for interfacing with <a href="http://wiki.Dreamy.com/API">DreamHost's API</a>. The API itself is still very young so this is by no means a comprehensive library. Please fork and contribute!</p>

<h1>Install</h1>

<p>Grab the gem from GitHub</p>

<pre class="code"><span class='gem identifier id'>gem</span> <span class='sources identifier id'>sources</span> <span class='minus op'>-</span><span class='a identifier id'>a</span> <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gems.github.com
gem install sant0sk1-dreamy
</span></pre>

<h1>Library Usage</h1>

<p>DreamHost requires a username (email or webID) and API key (available from your DH Panel) to make API requests. When creating a Dreamy instance you'll need to provide this data. The Dreamy command line tool (dh) gathers the necessary info from a configuration file or environment variables, but you can do it however you'd like.</p>

<p>To get started with the library, just require the gem:</p>

<pre class="code"><span class='require identifier id'>require</span> <span class='string val'>'rubygems'</span>
<span class='require identifier id'>require</span> <span class='string val'>'dreamy'</span>
</pre>

<p>Create a new object using your username and API key.</p>

<pre class="code"><span class='account identifier id'>account</span> <span class='assign token'>=</span> <span class='Dreamy constant id'>Dreamy</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='username identifier id'>username</span><span class='comma token'>,</span><span class='api_key identifier id'>api_key</span><span class='rparen token'>)</span>
</pre>

<p>Fetch an array of Dreamy::Domain objects:</p>

<pre class="code"><span class='account identifier id'>account</span><span class='dot token'>.</span><span class='domains identifier id'>domains</span>
</pre>

<p>Now that you have an array you can have your way with the data:</p>

<pre class="code"><span class='account identifier id'>account</span><span class='dot token'>.</span><span class='domains identifier id'>domains</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='d identifier id'>d</span><span class='bitor op'>|</span>
  <span class='puts identifier id'>puts</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='domain identifier id'>domain</span>
  <span class='puts identifier id'>puts</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  <span class='puts identifier id'>puts</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='home identifier id'>home</span>
<span class='end end kw'>end</span>
</pre>

<p>Same goes with Users, DNS records, announcement list subscribers, MySQL databases, MySQL hosts, and MySQL users</p>

<pre class="code"><span class='comment val'># fetch an array of Dreamy::User objects</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='users identifier id'>users</span>

<span class='comment val'># fetch an array of Dreamy::Dns objects</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='dns identifier id'>dns</span>

<span class='comment val'># fetch an array of Dreamy::AnnounceList objects</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='announce_lists identifier id'>announce_lists</span> 

<span class='comment val'># fetch an array of Dreamy::Subscribers to an announcement list</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='announce_list identifier id'>announce_list</span><span class='lparen token'>(</span><span class='listname identifier id'>listname</span><span class='comma token'>,</span><span class='domain identifier id'>domain</span><span class='rparen token'>)</span>

<span class='comment val'># fetch an array of Dreamy::MysqlUser objects</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='mysql_users identifier id'>mysql_users</span>
</pre>

<p>You can interact with announcement lists by adding and removing subscribers</p>

<pre class="code"><span class='comment val'># add a new subscriber to an announcement list</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='announce_add identifier id'>announce_add</span><span class='lparen token'>(</span><span class='listname identifier id'>listname</span><span class='comma token'>,</span><span class='domain identifier id'>domain</span><span class='comma token'>,</span><span class='email identifier id'>email</span><span class='rparen token'>)</span>

<span class='comment val'># remove a subscriber from an announcement list</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='announce_remove identifier id'>announce_remove</span><span class='lparen token'>(</span><span class='listname identifier id'>listname</span><span class='comma token'>,</span><span class='domain identifier id'>domain</span><span class='comma token'>,</span><span class='email identifier id'>email</span><span class='rparen token'>)</span>
</pre>

<p>You can interact with DNS by adding and removing records</p>

<pre class="code"><span class='comment val'># add a new A record for a subdomain of an hosted domain</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='dns_add identifier id'>dns_add</span><span class='lparen token'>(</span><span class='subdomain identifier id'>subdomain</span><span class='comma token'>,</span><span class='string val'>&quot;A&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;123.321.123.321&quot;</span><span class='rparen token'>)</span>

<span class='comment val'># remove the A record just created</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='dns_remove identifier id'>dns_remove</span><span class='lparen token'>(</span><span class='subdomain identifier id'>subdomain</span><span class='comma token'>,</span><span class='string val'>&quot;A&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;123.321.123.321&quot;</span><span class='rparen token'>)</span>
</pre>

<p>You can interact with your Private Server in many different ways</p>

<pre class="code"><span class='comment val'># change a private server setting</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='ps_set identifier id'>ps_set</span><span class='lparen token'>(</span><span class='ps_name identifier id'>ps_name</span><span class='comma token'>,</span><span class='setting identifier id'>setting</span><span class='comma token'>,</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>

<span class='comment val'># set the memory size (MB)</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='ps_size_set identifier id'>ps_size_set</span><span class='lparen token'>(</span><span class='ps_name identifier id'>ps_name</span><span class='comma token'>,</span><span class='string val'>&quot;200&quot;</span><span class='rparen token'>)</span>

<span class='comment val'># reboot the server</span>
<span class='account identifier id'>account</span><span class='dot token'>.</span><span class='ps_reboot! fid id'>ps_reboot!</span><span class='lparen token'>(</span><span class='ps_name identifier id'>ps_name</span><span class='rparen token'>)</span>
</pre>

<p>Check the base class for all the different API calls.</p>

<p>More and more functions will be added as time allows. If there's something missing that you want in, please:</p>

<p>fork -> commit -> pull request</p>

<h1>Command Line Usage</h1>

<p>The Dreamy gem will install an executable called "dh". In order to use it, you'll need to set your DreamHost account username and API key. You can acquire an API key from the DreamHost panel. "dh" will fetch your API credentials from 2 places, respectively:</p>

<p>1)  A file called .dreamyrc in your $HOME directory with username on line 1, api key on line 2</p>

<p>An example ~/.dreamyrc would look like:</p>

<pre class="code"><span class='dh_user identifier id'>dh_user</span><span class='@gmail ivar id'>@gmail</span><span class='dot token'>.</span><span class='com identifier id'>com</span>
<span class='integer val'>34</span><span class='TGGGKBRG3YD1EA constant id'>TGGGKBRG3YD1EA</span>
</pre>

<p>2) Environment variables DH_USER and DH_KEY. You can set these by typing this in your shell:</p>

<pre class="code"><span class='export identifier id'>export</span> <span class='DH_USER constant id'>DH_USER</span><span class='assign token'>=</span><span class='dh_user identifier id'>dh_user</span><span class='@gmail ivar id'>@gmail</span><span class='dot token'>.</span><span class='com identifier id'>com</span>
<span class='export identifier id'>export</span> <span class='DH_KEY constant id'>DH_KEY</span><span class='assign token'>=</span><span class='integer val'>34</span><span class='TGGGKBRG3YD1EA constant id'>TGGGKBRG3YD1EA</span>
</pre>

<p>If you want to make those environment variables permanent, add those 2 lines to the bottom of your ~/.bashrc</p>

<p>Run this from the command line to print the usage:</p>

<pre class="code"><span class='dh identifier id'>dh</span> <span class='help identifier id'>help</span>

<span class='eqq op'>===</span> <span class='Commands constant id'>Commands</span>

 <span class='announce identifier id'>announce</span>                           <span class='comment val'># list announce lists</span>
 <span class='announce identifier id'>announce</span><span class='symbol val'>:list</span> <span class='lt op'>&lt;</span><span class='list identifier id'>list</span><span class='gt op'>&gt;</span>               <span class='comment val'># list all subscribers to &lt;name&gt; list</span>
 <span class='announce identifier id'>announce</span><span class='symbol val'>:add</span> <span class='lt op'>&lt;</span><span class='list identifier id'>list</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='email identifier id'>email</span><span class='gt op'>&gt;</span>        <span class='comment val'># add subscriber with &lt;email&gt; to &lt;list&gt;</span>
 <span class='announce identifier id'>announce</span><span class='symbol val'>:remove</span> <span class='lt op'>&lt;</span><span class='list identifier id'>list</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='email identifier id'>email</span><span class='gt op'>&gt;</span>     <span class='comment val'># remove subscriber with &lt;email&gt; from &lt;list&gt;</span>

 <span class='dns identifier id'>dns</span>                                <span class='comment val'># list DNS records</span>
 <span class='dns identifier id'>dns</span> <span class='lt op'>&lt;</span><span class='name identifier id'>name</span><span class='gt op'>&gt;</span>                         <span class='comment val'># list DNS records for &lt;name&gt;</span>
 <span class='dns identifier id'>dns</span><span class='symbol val'>:add</span> <span class='lt op'>&lt;</span><span class='record identifier id'>record</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='type identifier id'>type</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='value identifier id'>value</span><span class='gt op'>&gt;</span>    <span class='comment val'># add DNS record </span>
 <span class='dns identifier id'>dns</span><span class='symbol val'>:remove</span> <span class='lt op'>&lt;</span><span class='record identifier id'>record</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='type identifier id'>type</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='value identifier id'>value</span><span class='gt op'>&gt;</span> <span class='comment val'># remove DNS record</span>

 <span class='domains identifier id'>domains</span><span class='symbol val'>:http</span>                       <span class='comment val'># list HTTP domain details</span>
 <span class='domains identifier id'>domains</span><span class='symbol val'>:mysql</span>                      <span class='comment val'># list MySQL domains</span>
 <span class='domains identifier id'>domains</span><span class='symbol val'>:status</span>                     <span class='comment val'># check availability of all domains (pingability)</span>

 <span class='mysql identifier id'>mysql</span><span class='symbol val'>:dbs</span>                          <span class='comment val'># list MySQL database details</span>
 <span class='mysql identifier id'>mysql</span><span class='symbol val'>:hosts</span>                        <span class='comment val'># list MySQL database hostnames</span>
 <span class='mysql identifier id'>mysql</span><span class='symbol val'>:users</span>                        <span class='comment val'># list MySQL user details</span>

 <span class='ps identifier id'>ps</span>                                 <span class='comment val'># list private servers</span>
 <span class='ps identifier id'>ps</span><span class='symbol val'>:add</span> <span class='lt op'>&lt;</span><span class='web identifier id'>web</span><span class='bitor op'>|</span><span class='mysql identifier id'>mysql</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='yes identifier id'>yes</span><span class='bitor op'>|</span><span class='no identifier id'>no</span><span class='gt op'>&gt;</span>        <span class='comment val'># adds a private server of type &lt;web|mysql&gt;. Yes = move data</span>
 <span class='ps identifier id'>ps</span><span class='symbol val'>:pending</span>                         <span class='comment val'># list private servers scheduled to be created</span>
 <span class='ps identifier id'>ps</span><span class='symbol val'>:reboots</span> <span class='lt op'>&lt;</span><span class='name identifier id'>name</span><span class='gt op'>&gt;</span>                  <span class='comment val'># list historical reboots for &lt;name&gt;</span>
 <span class='ps identifier id'>ps</span><span class='symbol val'>:reboot</span> <span class='lt op'>&lt;</span><span class='name identifier id'>name</span><span class='gt op'>&gt;</span> <span class='now! fid id'>now!</span>              <span class='comment val'># reboot &lt;name&gt; now! (proceed with caution)</span>
 <span class='ps identifier id'>ps</span><span class='symbol val'>:remove</span>                          <span class='comment val'># removes all pending private servers</span>
 <span class='ps identifier id'>ps</span><span class='symbol val'>:settings</span> <span class='lt op'>&lt;</span><span class='name identifier id'>name</span><span class='gt op'>&gt;</span>                 <span class='comment val'># list settings for private server &lt;name&gt;</span>
 <span class='ps identifier id'>ps</span><span class='symbol val'>:set</span> <span class='lt op'>&lt;</span><span class='name identifier id'>name</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='setting identifier id'>setting</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='value identifier id'>value</span><span class='gt op'>&gt;</span>    <span class='comment val'># change &lt;setting&gt; on &lt;name&gt; to &lt;value&gt;</span>
 <span class='ps identifier id'>ps</span><span class='symbol val'>:size</span> <span class='lt op'>&lt;</span><span class='name identifier id'>name</span><span class='gt op'>&gt;</span>                     <span class='comment val'># list historical memory sizes for &lt;name&gt;</span>
 <span class='ps identifier id'>ps</span><span class='symbol val'>:size</span> <span class='lt op'>&lt;</span><span class='name identifier id'>name</span><span class='gt op'>&gt;</span> <span class='lt op'>&lt;</span><span class='value identifier id'>value</span><span class='gt op'>&gt;</span>             <span class='comment val'># set new memory &lt;value&gt; for &lt;name&gt;</span>
 <span class='ps identifier id'>ps</span><span class='symbol val'>:usage</span> <span class='lt op'>&lt;</span><span class='name identifier id'>name</span><span class='gt op'>&gt;</span>                    <span class='comment val'># list historical memory &amp; CPU usage for &lt;name&gt;</span>

 <span class='users identifier id'>users</span>                              <span class='comment val'># list user accounts: details</span>
 <span class='users identifier id'>users</span><span class='symbol val'>:pw</span>                           <span class='comment val'># list user accounts: usernames &amp; passwords</span>
</pre>

<p>That's it for now. New commands should be springing up as Dreamy and the DreamHost API mature!</p>

<h1>TODO</h1>

<ul>
<li>add real rdocs</li>
</ul>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>