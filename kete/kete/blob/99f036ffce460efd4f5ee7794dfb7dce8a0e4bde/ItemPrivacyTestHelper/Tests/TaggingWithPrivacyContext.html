<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>kete's kete - Module: ItemPrivacyTestHelper::Tests::TaggingWithPrivacyContext - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/kete/commits/kete/master" rel="alternate" title="Recent Commits to kete:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    GitHubRepo.init("kete", "kete", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='kete/kete/blob/99f036ffce460efd4f5ee7794dfb7dce8a0e4bde' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='kete/kete/blob/99f036ffce460efd4f5ee7794dfb7dce8a0e4bde' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("kete", "kete", "99f036ffce460efd4f5ee7794dfb7dce8a0e4bde", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/kete/kete/tree/">Source</a></li>
            <li class=""><a href="http://github.com/kete/kete/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/kete/kete/network">Network</a></li>            
            <li class=""><a href="http://github.com/kete/kete/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/kete/kete">Wiki</a></li>
            <li class=""><a href="http://github.com/kete/kete/graphs">Graphs</a></li>                    
            <li class="active"><a href="/kete/kete">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/kete">kete</a> / <b><a href="http://github.com/kete/kete/tree">kete</a></b>        
                <a id="namespaces_button" rel="kete/kete/blob/99f036ffce460efd4f5ee7794dfb7dce8a0e4bde" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="kete/kete/blob/99f036ffce460efd4f5ee7794dfb7dce8a0e4bde" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module ItemPrivacyTestHelper_Tests_TaggingWithPrivacyContext">
  <h1>Module: ItemPrivacyTestHelper::Tests::TaggingWithPrivacyContext</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_class_responds_to_class_methods_as_expected-instance_method">#test_class_responds_to_class_methods_as_expected</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_class_tag_counts_accepts_an_required_argument_and_one_optional_one-instance_method">#test_class_tag_counts_accepts_an_required_argument_and_one_optional_one</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_instances_respond_to_instance_methods_as_expected-instance_method">#test_instances_respond_to_instance_methods_as_expected</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_tags_are_preserved_on_private_items-instance_method">#test_tags_are_preserved_on_private_items</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_tags_are_preserved_on_public_items-instance_method">#test_tags_are_preserved_on_public_items</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_tags_are_preserved_separately_by_privacy_setting-instance_method">#test_tags_are_preserved_separately_by_privacy_setting</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_tags_on_private_items_are_kept_private-instance_method">#test_tags_on_private_items_are_kept_private</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_tags_on_private_items_are_kept_private_on_re_find-instance_method">#test_tags_on_private_items_are_kept_private_on_re_find</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_tags_on_private_items_are_of_private_context-instance_method">#test_tags_on_private_items_are_of_private_context</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_tags_on_public_items_are_of_public_context-instance_method">#test_tags_on_public_items_are_of_public_context</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>test_class_responds_to_class_methods_as_expected</h3>
</div><div id="test_class_responds_to_class_methods_as_expected-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_class_responds_to_class_methods_as_expected</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/item_privacy_test_helper.rb', line 551</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/item_privacy_test_helper.rb#L551">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">551
552
553
554
555
556
557
558
559
560
561
562
563</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_class_responds_to_class_methods_as_expected identifier id'>test_class_responds_to_class_methods_as_expected</span>
  <span class='klass identifier id'>klass</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span>
  
  <span class='should_respond_to identifier id'>should_respond_to</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span>
    <span class='symbol val'>:tag_counts</span><span class='comma token'>,</span>
    <span class='symbol val'>:private_tag_counts</span><span class='comma token'>,</span>
    <span class='symbol val'>:public_tag_counts</span>
  <span class='rbrack token'>]</span>
  
  <span class='should_respond_to identifier id'>should_respond_to</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='method identifier id'>method</span><span class='bitor op'>|</span>
    <span class='assert_respond_to identifier id'>assert_respond_to</span> <span class='klass identifier id'>klass</span><span class='comma token'>,</span> <span class='method identifier id'>method</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_class_tag_counts_accepts_an_required_argument_and_one_optional_one</h3>
</div><div id="test_class_tag_counts_accepts_an_required_argument_and_one_optional_one-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_class_tag_counts_accepts_an_required_argument_and_one_optional_one</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/item_privacy_test_helper.rb', line 565</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/item_privacy_test_helper.rb#L565">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">565
566
567</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_class_tag_counts_accepts_an_required_argument_and_one_optional_one identifier id'>test_class_tag_counts_accepts_an_required_argument_and_one_optional_one</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>-2</span><span class='comma token'>,</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='method identifier id'>method</span><span class='lparen token'>(</span><span class='symbol val'>:tag_counts</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_instances_respond_to_instance_methods_as_expected</h3>
</div><div id="test_instances_respond_to_instance_methods_as_expected-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_instances_respond_to_instance_methods_as_expected</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/item_privacy_test_helper.rb', line 569</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/item_privacy_test_helper.rb#L569">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_instances_respond_to_instance_methods_as_expected identifier id'>test_instances_respond_to_instance_methods_as_expected</span>
  <span class='instance identifier id'>instance</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='@new_model ivar id'>@new_model</span><span class='rparen token'>)</span>

  <span class='should_respond_to identifier id'>should_respond_to</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span>
    <span class='symbol val'>:tags</span><span class='comma token'>,</span>
    <span class='symbol val'>:tag_list</span><span class='comma token'>,</span>
    <span class='symbol val'>:tag_list=</span><span class='comma token'>,</span>
    <span class='symbol val'>:public_tags</span><span class='comma token'>,</span>
    <span class='symbol val'>:public_tags=</span><span class='comma token'>,</span>
    <span class='symbol val'>:public_tag_list</span><span class='comma token'>,</span>
    <span class='symbol val'>:public_tag_list=</span><span class='comma token'>,</span>
    <span class='symbol val'>:private_tags</span><span class='comma token'>,</span>
    <span class='symbol val'>:private_tags=</span><span class='comma token'>,</span>
    <span class='symbol val'>:private_tag_list</span><span class='comma token'>,</span>
    <span class='symbol val'>:private_tag_list=</span>
  <span class='rbrack token'>]</span>
  
  <span class='should_respond_to identifier id'>should_respond_to</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='method identifier id'>method</span><span class='bitor op'>|</span>
    <span class='assert_respond_to identifier id'>assert_respond_to</span> <span class='instance identifier id'>instance</span><span class='comma token'>,</span> <span class='method identifier id'>method</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_tags_are_preserved_on_private_items</h3>
</div><div id="test_tags_are_preserved_on_private_items-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_tags_are_preserved_on_private_items</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/item_privacy_test_helper.rb', line 603</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/item_privacy_test_helper.rb#L603">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">603
604
605
606
607
608
609
610
611
612
613
614
615
616</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_tags_are_preserved_on_private_items identifier id'>test_tags_are_preserved_on_private_items</span>
  <span class='d identifier id'>d</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='@new_model ivar id'>@new_model</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:private</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:raw_tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private_version identifier id'>private_version</span> <span class='do do kw'>do</span>
    <span class='assert_equal identifier id'>assert_equal</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
    <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
    <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='description identifier id'>description</span>
    <span class='assert identifier id'>assert</span> <span class='dstring node'>%w{one two three}</span><span class='dot token'>.</span><span class='all? fid id'>all?</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='member? fid id'>member?</span><span class='lparen token'>(</span><span class='t identifier id'>t</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
    <span class='assert_equal identifier id'>assert_equal</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private_tags identifier id'>private_tags</span>
    <span class='assert identifier id'>assert</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='public_tags identifier id'>public_tags</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_tags_are_preserved_on_public_items</h3>
</div><div id="test_tags_are_preserved_on_public_items-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_tags_are_preserved_on_public_items</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/item_privacy_test_helper.rb', line 591</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/item_privacy_test_helper.rb#L591">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">591
592
593
594
595
596
597
598
599
600
601</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_tags_are_preserved_on_public_items identifier id'>test_tags_are_preserved_on_public_items</span>
  <span class='d identifier id'>d</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='@new_model ivar id'>@new_model</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:private</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='symbol val'>:tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:raw_tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='reload identifier id'>reload</span>
  
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='versions identifier id'>versions</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='description identifier id'>description</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='assert identifier id'>assert</span> <span class='dstring node'>%w{one two three}</span><span class='dot token'>.</span><span class='all? fid id'>all?</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='g identifier id'>g</span><span class='bitor op'>|</span> <span class='g identifier id'>g</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='member? fid id'>member?</span><span class='lparen token'>(</span><span class='t identifier id'>t</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='public_tags identifier id'>public_tags</span>
  <span class='assert identifier id'>assert</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private_tags identifier id'>private_tags</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_tags_are_preserved_separately_by_privacy_setting</h3>
</div><div id="test_tags_are_preserved_separately_by_privacy_setting-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_tags_are_preserved_separately_by_privacy_setting</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/item_privacy_test_helper.rb', line 680</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/item_privacy_test_helper.rb#L680">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_tags_are_preserved_separately_by_privacy_setting identifier id'>test_tags_are_preserved_separately_by_privacy_setting</span>
  
  <span class='comment val'># Create a private version</span>
  <span class='d identifier id'>d</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='@new_model ivar id'>@new_model</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:private</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:raw_tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='reload identifier id'>reload</span>
  
  <span class='comment val'># Create a public version with different tags</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='update_attributes! fid id'>update_attributes!</span><span class='lparen token'>(</span><span class='symbol val'>:private</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='symbol val'>:title</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;A public version&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Version 3&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;four, five, six&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:raw_tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;four, five, six&quot;</span><span class='rparen token'>)</span>
  
  <span class='comment val'># Create a second private version without tags</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private_version! fid id'>private_version!</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='update_attributes! fid id'>update_attributes!</span><span class='lparen token'>(</span><span class='symbol val'>:private</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:title</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Another private version&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Version 4&quot;</span><span class='rparen token'>)</span>
  
  <span class='comment val'># Check the public version has tags from public version</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='comment val'># assert_equal &quot;four, five, six&quot;, d.raw_tag_list</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>&quot;four, five, six&quot;</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span> <span class='t identifier id'>t</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span>
  
  <span class='comment val'># Check the private version has tags from the private version</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private_version! fid id'>private_version!</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='comment val'># assert_equal &quot;one, two, three&quot;, d.raw_tag_list</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>&quot;one, two, three&quot;</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span> <span class='t identifier id'>t</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span>
  
  <span class='comment val'># Check the public tags present on natural version</span>
  <span class='e identifier id'>e</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='d identifier id'>d</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='e identifier id'>e</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='e identifier id'>e</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='comment val'># assert_equal &quot;four, five, six&quot;, e.raw_tag_list</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>&quot;four, five, six&quot;</span><span class='comma token'>,</span> <span class='e identifier id'>e</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span> <span class='t identifier id'>t</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_tags_on_private_items_are_kept_private</h3>
</div><div id="test_tags_on_private_items_are_kept_private-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_tags_on_private_items_are_kept_private</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/item_privacy_test_helper.rb', line 618</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/item_privacy_test_helper.rb#L618">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_tags_on_private_items_are_kept_private identifier id'>test_tags_on_private_items_are_kept_private</span>
  <span class='d identifier id'>d</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='@new_model ivar id'>@new_model</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:private</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:raw_tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='reload identifier id'>reload</span>
  
  <span class='comment val'># Check there are no tags on public version</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>2</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='versions identifier id'>versions</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='NO_PUBLIC_VERSION_TITLE constant id'>NO_PUBLIC_VERSION_TITLE</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='title identifier id'>title</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  
  <span class='comment val'># Topic#raw_tag_list is set in the controllers, so cannot be tested here.</span>
  <span class='comment val'># assert_equal nil, d.raw_tag_list</span>
  
  <span class='comment val'># Check the original tags are present on the private version</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private_version identifier id'>private_version</span> <span class='do do kw'>do</span>
    <span class='assert_equal identifier id'>assert_equal</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
    
    <span class='comment val'># Topic#raw_tag_list is set in the controllers, so cannot be tested here.</span>
    <span class='comment val'># assert_equal &quot;one, two, three&quot;, d.raw_tag_list</span>
    
    <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
    <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='description identifier id'>description</span>
    <span class='assert identifier id'>assert</span> <span class='dstring node'>%w{one two three}</span><span class='dot token'>.</span><span class='all? fid id'>all?</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='tag identifier id'>tag</span><span class='bitor op'>|</span> <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='member? fid id'>member?</span><span class='lparen token'>(</span><span class='t identifier id'>t</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># Check there are no tags on public version upon restoration</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='NO_PUBLIC_VERSION_TITLE constant id'>NO_PUBLIC_VERSION_TITLE</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='title identifier id'>title</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  
  <span class='comment val'># Topic#raw_tag_list is set in the controllers, so cannot be tested here.</span>
  <span class='comment val'># assert_equal nil, d.raw_tag_list</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_tags_on_private_items_are_kept_private_on_re_find</h3>
</div><div id="test_tags_on_private_items_are_kept_private_on_re_find-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_tags_on_private_items_are_kept_private_on_re_find</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/item_privacy_test_helper.rb', line 652</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/item_privacy_test_helper.rb#L652">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_tags_on_private_items_are_kept_private_on_re_find identifier id'>test_tags_on_private_items_are_kept_private_on_re_find</span>
  <span class='d identifier id'>d</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='@new_model ivar id'>@new_model</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:private</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:raw_tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  
  <span class='d identifier id'>d</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='d identifier id'>d</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='rparen token'>)</span>
  
  <span class='comment val'># Check there are no tags on public version</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>2</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='versions identifier id'>versions</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='NO_PUBLIC_VERSION_TITLE constant id'>NO_PUBLIC_VERSION_TITLE</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='title identifier id'>title</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='comment val'># assert_equal nil, d.raw_tag_list</span>
  
  <span class='comment val'># Check the original tags are present on the private version</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private_version identifier id'>private_version</span> <span class='do do kw'>do</span>
    <span class='assert_equal identifier id'>assert_equal</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
    <span class='comment val'># assert_equal &quot;one, two, three&quot;, d.raw_tag_list</span>
    <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
    <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='description identifier id'>description</span>
    <span class='assert identifier id'>assert</span> <span class='dstring node'>%w{one two three}</span><span class='dot token'>.</span><span class='all? fid id'>all?</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='tag identifier id'>tag</span><span class='bitor op'>|</span> <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='member? fid id'>member?</span><span class='lparen token'>(</span><span class='t identifier id'>t</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># Check there are no tags on public version upon restoration</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='NO_PUBLIC_VERSION_TITLE constant id'>NO_PUBLIC_VERSION_TITLE</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='title identifier id'>title</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='comment val'># assert_equal nil, d.raw_tag_list</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_tags_on_private_items_are_of_private_context</h3>
</div><div id="test_tags_on_private_items_are_of_private_context-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_tags_on_private_items_are_of_private_context</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/item_privacy_test_helper.rb', line 714</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/item_privacy_test_helper.rb#L714">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">714
715
716
717
718
719
720
721
722
723
724
725</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_tags_on_private_items_are_of_private_context identifier id'>test_tags_on_private_items_are_of_private_context</span>
  <span class='d identifier id'>d</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='@new_model ivar id'>@new_model</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:private</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:raw_tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='reload identifier id'>reload</span>
  
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private_version! fid id'>private_version!</span>
  
  <span class='assert_equal identifier id'>assert_equal</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private_tags identifier id'>private_tags</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>&quot;one, two, three&quot;</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span> <span class='t identifier id'>t</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span>
  <span class='assert identifier id'>assert</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='public_tags identifier id'>public_tags</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_tags_on_public_items_are_of_public_context</h3>
</div><div id="test_tags_on_public_items_are_of_public_context-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_tags_on_public_items_are_of_public_context</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/item_privacy_test_helper.rb', line 727</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/item_privacy_test_helper.rb#L727">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">727
728
729
730
731
732
733
734
735
736</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_tags_on_public_items_are_of_public_context identifier id'>test_tags_on_public_items_are_of_public_context</span>
  <span class='d identifier id'>d</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='@new_model ivar id'>@new_model</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Version 1&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:private</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='symbol val'>:tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:raw_tag_list</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;one, two, three&quot;</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='reload identifier id'>reload</span>
  
  <span class='assert_equal identifier id'>assert_equal</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private? fid id'>private?</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='public_tags identifier id'>public_tags</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>&quot;one, two, three&quot;</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span> <span class='t identifier id'>t</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, &quot;</span><span class='rparen token'>)</span>
  <span class='assert identifier id'>assert</span> <span class='d identifier id'>d</span><span class='dot token'>.</span><span class='private_tags identifier id'>private_tags</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>