<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>kete's kete - Module: ExtendedContentTestUnitHelper - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/kete/commits/kete/master" rel="alternate" title="Recent Commits to kete:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    GitHubRepo.init("kete", "kete", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='kete/kete/blob/99f036ffce460efd4f5ee7794dfb7dce8a0e4bde' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='kete/kete/blob/99f036ffce460efd4f5ee7794dfb7dce8a0e4bde' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("kete", "kete", "99f036ffce460efd4f5ee7794dfb7dce8a0e4bde", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/kete/kete/tree/">Source</a></li>
            <li class=""><a href="http://github.com/kete/kete/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/kete/kete/network">Network</a></li>            
            <li class=""><a href="http://github.com/kete/kete/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/kete/kete">Wiki</a></li>
            <li class=""><a href="http://github.com/kete/kete/graphs">Graphs</a></li>                    
            <li class="active"><a href="/kete/kete">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/kete">kete</a> / <b><a href="http://github.com/kete/kete/tree">kete</a></b>        
                <a id="namespaces_button" rel="kete/kete/blob/99f036ffce460efd4f5ee7794dfb7dce8a0e4bde" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="kete/kete/blob/99f036ffce460efd4f5ee7794dfb7dce8a0e4bde" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module ExtendedContentTestUnitHelper">
  <h1>Module: ExtendedContentTestUnitHelper</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#included-class_method">included</span><span class='args'>(base)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
See individual model tests for model specific tests, i.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_extended_content-instance_method">#test_extended_content</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_extended_content_pairs-instance_method">#test_extended_content_pairs</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_extended_content_setter_with_undefined_field-instance_method">#test_extended_content_setter_with_undefined_field</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_extended_content_with_multiple_nodes-instance_method">#test_extended_content_with_multiple_nodes</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_extended_content_without_data-instance_method">#test_extended_content_without_data</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_xml_attributes_without_position-instance_method">#test_xml_attributes_without_position</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
xml attributes pulls extended_content column xml out into a hash TODO: test
case where the model is a topic and we need form fields from ancestors
TODO: test case where extended_field is a multiple TODO: test that position
is in right order?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#test_xml_attributes_without_position_without_data-instance_method">#test_xml_attributes_without_position_without_data</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>included</h3>
</div><div id="included-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>included</span><span class='args'>(base)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
See individual model tests for model specific tests, i.e. TopicTest.
Because there are no extended fields mapped to all item classes, all setter
type tests must be performed there. if you are using shoulda methods, you
have to declare your tests this way
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extended_content_test_unit_helper.rb', line 100</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/extended_content_test_unit_helper.rb#L100">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='included identifier id'>included</span><span class='lparen token'>(</span><span class='base identifier id'>base</span><span class='rparen token'>)</span>
  <span class='base identifier id'>base</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span> <span class='do do kw'>do</span>

    <span class='comment val'># test around setter and getter methods generated for each extended field</span>
    <span class='context identifier id'>context</span> <span class='string val'>&quot;An extended field mapped to a type&quot;</span> <span class='do do kw'>do</span>

      <span class='setup identifier id'>setup</span> <span class='do do kw'>do</span>
        <span class='comment val'># add a extended field to the base class or topic type in the case of topics</span>
        <span class='create_extended_field identifier id'>create_extended_field</span><span class='lparen token'>(</span><span class='symbol val'>:label</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'Some tag'</span><span class='rparen token'>)</span>
        <span class='@extended_item ivar id'>@extended_item</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create! fid id'>create!</span> <span class='@new_model ivar id'>@new_model</span>

        <span class='unless unless kw'>unless</span> <span class='@base_class ivar id'>@base_class</span> <span class='eq op'>==</span> <span class='string val'>'Topic'</span>
          <span class='@mapped_to_type_instance ivar id'>@mapped_to_type_instance</span> <span class='assign token'>=</span> <span class='ContentType constant id'>ContentType</span><span class='dot token'>.</span><span class='find_by_class_name identifier id'>find_by_class_name</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span>
        <span class='else else kw'>else</span>
          <span class='@mapped_to_type_instance ivar id'>@mapped_to_type_instance</span> <span class='assign token'>=</span> <span class='@extended_item ivar id'>@extended_item</span><span class='dot token'>.</span><span class='topic_type identifier id'>topic_type</span>
        <span class='end end kw'>end</span>

        <span class='@mapped_to_type_instance ivar id'>@mapped_to_type_instance</span><span class='dot token'>.</span><span class='form_fields identifier id'>form_fields</span> <span class='lshft op'>&lt;&lt;</span> <span class='@extended_field ivar id'>@extended_field</span>
      <span class='end end kw'>end</span>

      <span class='should identifier id'>should</span> <span class='string val'>&quot;have a method that will set its value&quot;</span> <span class='do do kw'>do</span>
        <span class='method_name identifier id'>method_name</span> <span class='assign token'>=</span> <span class='@extended_field ivar id'>@extended_field</span><span class='dot token'>.</span><span class='label_for_params identifier id'>label_for_params</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span>
        <span class='comment val'># not sure if respond_to? works in the context of method missing</span>
        <span class='comment val'># may need a begin rescue block instead</span>
        <span class='comment val'># assert_equal @extended_item.respond_to?(method_name), true</span>

        <span class='@extended_item ivar id'>@extended_item</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='comma token'>,</span> <span class='string val'>'something'</span><span class='rparen token'>)</span>
        <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'something'</span><span class='comma token'>,</span> <span class='@extended_item ivar id'>@extended_item</span><span class='dot token'>.</span><span class='xml_attributes_without_position identifier id'>xml_attributes_without_position</span><span class='lbrack token'>[</span><span class='string val'>'some_tag'</span><span class='rbrack token'>]</span>
      <span class='end end kw'>end</span>

      <span class='should identifier id'>should</span> <span class='string val'>&quot;have a method that will append its value to existing value&quot;</span> <span class='do do kw'>do</span>
        <span class='@extended_item ivar id'>@extended_item</span><span class='dot token'>.</span><span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:extended_content</span><span class='comma token'>,</span> <span class='string val'>'&lt;some_tag&gt;something&lt;/some_tag&gt;'</span><span class='rparen token'>)</span>
        <span class='@extended_item ivar id'>@extended_item</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='@extended_field ivar id'>@extended_field</span><span class='dot token'>.</span><span class='label_for_params identifier id'>label_for_params</span> <span class='plus op'>+</span> <span class='string val'>&quot;+=&quot;</span><span class='comma token'>,</span> <span class='string val'>'something'</span><span class='rparen token'>)</span>
        <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'something'</span> <span class='plus op'>+</span> <span class='string val'>'something'</span><span class='comma token'>,</span> <span class='@extended_item ivar id'>@extended_item</span><span class='dot token'>.</span><span class='xml_attributes_without_position identifier id'>xml_attributes_without_position</span><span class='lbrack token'>[</span><span class='string val'>'some_tag'</span><span class='rbrack token'>]</span>
      <span class='end end kw'>end</span>

      <span class='should identifier id'>should</span> <span class='string val'>&quot;have a method that will set return its value&quot;</span> <span class='do do kw'>do</span>
        <span class='@extended_item ivar id'>@extended_item</span><span class='dot token'>.</span><span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:extended_content</span><span class='comma token'>,</span> <span class='string val'>'&lt;some_tag&gt;something&lt;/some_tag&gt;'</span><span class='rparen token'>)</span>
        <span class='assert_equal identifier id'>assert_equal</span> <span class='@extended_item ivar id'>@extended_item</span><span class='dot token'>.</span><span class='xml_attributes_without_position identifier id'>xml_attributes_without_position</span><span class='lbrack token'>[</span><span class='string val'>'some_tag'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='@extended_item ivar id'>@extended_item</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='@extended_field ivar id'>@extended_field</span><span class='dot token'>.</span><span class='label_for_params identifier id'>label_for_params</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>test_extended_content</h3>
</div><div id="test_extended_content-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_extended_content</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extended_content_test_unit_helper.rb', line 30</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/extended_content_test_unit_helper.rb#L30">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">30
31
32
33
34
35
36
37
38</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_extended_content identifier id'>test_extended_content</span>
  <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create! fid id'>create!</span><span class='lparen token'>(</span><span class='new_model_attributes identifier id'>new_model_attributes</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:extended_content</span><span class='comma token'>,</span> <span class='string val'>'&lt;some_tag xml_element_name=&quot;dc:something&quot;&gt;something&lt;/some_tag&gt;'</span><span class='rparen token'>)</span>

  <span class='assert_valid identifier id'>assert_valid</span> <span class='model identifier id'>model</span>

  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'&lt;some_tag xml_element_name=&quot;dc:something&quot;&gt;something&lt;/some_tag&gt;'</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content identifier id'>extended_content</span>
  <span class='assert_equal identifier id'>assert_equal</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='string val'>&quot;xml_element_name&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;dc:something&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;value&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;something&quot;</span> <span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content_values identifier id'>extended_content_values</span><span class='lbrack token'>[</span><span class='string val'>'some_tag'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_extended_content_pairs</h3>
</div><div id="test_extended_content_pairs-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_extended_content_pairs</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extended_content_test_unit_helper.rb', line 62</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/extended_content_test_unit_helper.rb#L62">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_extended_content_pairs identifier id'>test_extended_content_pairs</span>

  <span class='comment val'># Test with a single node</span>
  <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create! fid id'>create!</span><span class='lparen token'>(</span><span class='new_model_attributes identifier id'>new_model_attributes</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:extended_content</span><span class='comma token'>,</span> <span class='string val'>'&lt;some_tag xml_element_name=&quot;dc:something&quot;&gt;something&lt;/some_tag&gt;'</span><span class='rparen token'>)</span>

  <span class='assert_valid identifier id'>assert_valid</span> <span class='model identifier id'>model</span>

  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'&lt;some_tag xml_element_name=&quot;dc:something&quot;&gt;something&lt;/some_tag&gt;'</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content identifier id'>extended_content</span>
  <span class='assert_equal identifier id'>assert_equal</span>  <span class='lbrack token'>[</span><span class='lbrack token'>[</span><span class='string val'>&quot;some_tag&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;something&quot;</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content_pairs identifier id'>extended_content_pairs</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span>

  <span class='comment val'># Test with multiple nodes</span>
  <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create! fid id'>create!</span><span class='lparen token'>(</span><span class='new_model_attributes identifier id'>new_model_attributes</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:extended_content</span><span class='comma token'>,</span> <span class='string val'>'&lt;some_tag xml_element_name=&quot;dc:something&quot;&gt;something&lt;/some_tag&gt;&lt;some_other_tag xml_element_name=&quot;dc:something_else&quot;&gt;something_else&lt;/some_other_tag&gt;'</span><span class='rparen token'>)</span>

  <span class='assert_valid identifier id'>assert_valid</span> <span class='model identifier id'>model</span>

  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'&lt;some_tag xml_element_name=&quot;dc:something&quot;&gt;something&lt;/some_tag&gt;&lt;some_other_tag xml_element_name=&quot;dc:something_else&quot;&gt;something_else&lt;/some_other_tag&gt;'</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content identifier id'>extended_content</span>
  <span class='assert_equal identifier id'>assert_equal</span>  <span class='lbrack token'>[</span><span class='lbrack token'>[</span><span class='string val'>&quot;some_other_tag&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;something_else&quot;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;some_tag&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;something&quot;</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content_pairs identifier id'>extended_content_pairs</span>

<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_extended_content_setter_with_undefined_field</h3>
</div><div id="test_extended_content_setter_with_undefined_field-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_extended_content_setter_with_undefined_field</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extended_content_test_unit_helper.rb', line 84</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/extended_content_test_unit_helper.rb#L84">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">84
85
86
87
88
89
90
91
92
93
94</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_extended_content_setter_with_undefined_field identifier id'>test_extended_content_setter_with_undefined_field</span>
  <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create! fid id'>create!</span><span class='lparen token'>(</span><span class='new_model_attributes identifier id'>new_model_attributes</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content_values identifier id'>extended_content_values</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;some_tag&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;value&quot;</span> <span class='rbrace token'>}</span>

  <span class='assert_valid identifier id'>assert_valid</span> <span class='model identifier id'>model</span>

  <span class='comment val'># We can't expect the XML to be empty because empty tags will be generated for all mapped extended fields.</span>
  <span class='comment val'># assert_equal '', model.extended_content</span>

  <span class='assert_nil identifier id'>assert_nil</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content_values identifier id'>extended_content_values</span><span class='lbrack token'>[</span><span class='string val'>&quot;some_tag&quot;</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_extended_content_with_multiple_nodes</h3>
</div><div id="test_extended_content_with_multiple_nodes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_extended_content_with_multiple_nodes</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extended_content_test_unit_helper.rb', line 40</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/extended_content_test_unit_helper.rb#L40">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">40
41
42
43
44
45
46
47
48
49
50</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_extended_content_with_multiple_nodes identifier id'>test_extended_content_with_multiple_nodes</span>
  <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create! fid id'>create!</span><span class='lparen token'>(</span><span class='new_model_attributes identifier id'>new_model_attributes</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:extended_content</span><span class='comma token'>,</span> <span class='string val'>'&lt;some_tag xml_element_name=&quot;dc:something&quot;&gt;something&lt;/some_tag&gt;&lt;some_other_tag xml_element_name=&quot;dc:something_else&quot;&gt;something_else&lt;/some_other_tag&gt;'</span><span class='rparen token'>)</span>

  <span class='assert_valid identifier id'>assert_valid</span> <span class='model identifier id'>model</span>

  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'&lt;some_tag xml_element_name=&quot;dc:something&quot;&gt;something&lt;/some_tag&gt;&lt;some_other_tag xml_element_name=&quot;dc:something_else&quot;&gt;something_else&lt;/some_other_tag&gt;'</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content identifier id'>extended_content</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='integer val'>2</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content_values identifier id'>extended_content_values</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
  <span class='assert_equal identifier id'>assert_equal</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='string val'>&quot;xml_element_name&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;dc:something&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;value&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;something&quot;</span> <span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content_values identifier id'>extended_content_values</span><span class='lbrack token'>[</span><span class='string val'>'some_tag'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='assert_equal identifier id'>assert_equal</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='string val'>&quot;xml_element_name&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;dc:something_else&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;value&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;something_else&quot;</span> <span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content_values identifier id'>extended_content_values</span><span class='lbrack token'>[</span><span class='string val'>'some_other_tag'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_extended_content_without_data</h3>
</div><div id="test_extended_content_without_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_extended_content_without_data</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extended_content_test_unit_helper.rb', line 52</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/extended_content_test_unit_helper.rb#L52">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">52
53
54
55
56
57
58
59
60</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_extended_content_without_data identifier id'>test_extended_content_without_data</span>
  <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create! fid id'>create!</span><span class='lparen token'>(</span><span class='new_model_attributes identifier id'>new_model_attributes</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:extended_content</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>

  <span class='assert_valid identifier id'>assert_valid</span> <span class='model identifier id'>model</span>

  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>''</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content identifier id'>extended_content</span>
  <span class='assert identifier id'>assert</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content_values identifier id'>extended_content_values</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_xml_attributes_without_position</h3>
</div><div id="test_xml_attributes_without_position-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_xml_attributes_without_position</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
xml attributes pulls extended_content column xml out into a hash TODO: test
case where the model is a topic and we need form fields from ancestors
TODO: test case where extended_field is a multiple TODO: test that position
is in right order?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extended_content_test_unit_helper.rb', line 9</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/extended_content_test_unit_helper.rb#L9">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">9
10
11
12
13
14
15
16
17</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_xml_attributes_without_position identifier id'>test_xml_attributes_without_position</span>
  <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create! fid id'>create!</span><span class='lparen token'>(</span><span class='new_model_attributes identifier id'>new_model_attributes</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:extended_content</span><span class='comma token'>,</span> <span class='string val'>'&lt;some_tag&gt;something&lt;/some_tag&gt;'</span><span class='rparen token'>)</span>

  <span class='assert_valid identifier id'>assert_valid</span> <span class='model identifier id'>model</span>

  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'&lt;some_tag&gt;something&lt;/some_tag&gt;'</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content identifier id'>extended_content</span>
  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>'something'</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='xml_attributes_without_position identifier id'>xml_attributes_without_position</span><span class='lbrack token'>[</span><span class='string val'>'some_tag'</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>test_xml_attributes_without_position_without_data</h3>
</div><div id="test_xml_attributes_without_position_without_data-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>test_xml_attributes_without_position_without_data</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extended_content_test_unit_helper.rb', line 19</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/kete/kete/blob/master/lib/extended_content_test_unit_helper.rb#L19">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">19
20
21
22
23
24
25
26
27
28</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='test_xml_attributes_without_position_without_data identifier id'>test_xml_attributes_without_position_without_data</span>
  <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='@base_class ivar id'>@base_class</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='create! fid id'>create!</span><span class='lparen token'>(</span><span class='new_model_attributes identifier id'>new_model_attributes</span><span class='rparen token'>)</span>

  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='symbol val'>:extended_content</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>

  <span class='assert_valid identifier id'>assert_valid</span> <span class='model identifier id'>model</span>

  <span class='assert_equal identifier id'>assert_equal</span> <span class='string val'>''</span><span class='comma token'>,</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extended_content identifier id'>extended_content</span>
  <span class='assert identifier id'>assert</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='xml_attributes_without_position identifier id'>xml_attributes_without_position</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>