<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>datamapper's dm-core - Module: DataMapper::Model - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/datamapper/commits/dm-core/master" rel="alternate" title="Recent Commits to dm-core:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("datamapper", "dm-core", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("datamapper", "dm-core", "1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/datamapper/dm-core/tree/">Source</a></li>
            <li class=""><a href="http://github.com/datamapper/dm-core/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/datamapper/dm-core/network">Network</a></li>            
            <li class=""><a href="http://github.com/datamapper/dm-core/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/datamapper/dm-core">Wiki</a></li>
            <li class=""><a href="http://github.com/datamapper/dm-core/graphs">Graphs</a></li>                    
            <li class="active"><a href="/datamapper/dm-core">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/datamapper">datamapper</a> / <b><a href="http://github.com/datamapper/dm-core/tree">dm-core</a></b>        
                <a id="namespaces_button" rel="datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module DataMapper_Model">
  <h1>Module: DataMapper::Model</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a title="DataMapper::Model::Transaction" href="Model/Transaction.html">DataMapper::Model::Transaction</a>, <a title="DataMapper::Model::Migration" href="Model/Migration.html">DataMapper::Model::Migration</a></p>
</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#append_extensions-class_method">append_extensions</span><span class='args'>(*extensions)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Extends the model with this module after DataMapper::Resource has been
included.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>TrueClass</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#extended-class_method">extended</span><span class='args'>(model)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#extra_extensions-class_method">extra_extensions</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#-5B-5D-instance_method">#[]</span><span class='args'>(*key)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#_load-instance_method">#_load</span><span class='args'>(marshalled)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: add docs.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#all-instance_method">#all</span><span class='args'>(query = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#base_model-instance_method">#base_model</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#copy-instance_method">#copy</span><span class='args'>(source, destination, query = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Copy a set of records from one repository to another.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt><a title="DataMapper::Collection" href="Collection.html">DataMapper::Collection</a></tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create-instance_method">#create</span><span class='args'>(attributes = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Create an instance of Resource with the given attributes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create-21-instance_method">#create!</span><span class='args'>(attributes = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
This method is deprecated, and will be removed from dm-core.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#default_order-instance_method">#default_order</span><span class='args'>(repository_name = default_repository_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#default_repository_name-instance_method">#default_repository_name</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#eager_properties-instance_method">#eager_properties</span><span class='args'>(repository_name = default_repository_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#field_naming_convention-instance_method">#field_naming_convention</span><span class='args'>(repository_name = default_storage_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The field naming conventions for this resource across all repositories.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>String</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#first-instance_method">#first</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#first_or_create-instance_method">#first_or_create</span><span class='args'>(query, attributes = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get-instance_method">#get</span><span class='args'>(*key)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get-21-instance_method">#get!</span><span class='args'>(*key)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#inheritance_property-instance_method">#inheritance_property</span><span class='args'>(repository_name = default_repository_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#inherited-instance_method">#inherited</span><span class='args'>(target)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#key-instance_method">#key</span><span class='args'>(repository_name = default_repository_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#load-instance_method">#load</span><span class='args'>(values, query)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#paranoid_properties-instance_method">#paranoid_properties</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#properties-instance_method">#properties</span><span class='args'>(repository_name = default_repository_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#properties_with_subclasses-instance_method">#properties_with_subclasses</span><span class='args'>(repository_name = default_repository_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#property-instance_method">#property</span><span class='args'>(name, type, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
defines a property on the resource.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#repositories-instance_method">#repositories</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#repository-instance_method">#repository</span><span class='args'>(name = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the repository with a given name, or the default one for the current
context, or the default one for this class.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Object</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#repository_name-instance_method">#repository_name</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#storage_name-instance_method">#storage_name</span><span class='args'>(repository_name = default_repository_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
the name of the storage recepticle for this resource.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>String</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#storage_names-instance_method">#storage_names</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
the names of the storage recepticles for this resource across all
repositories.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>Hash(Symbol =&gt;String)</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_query-instance_method">#to_query</span><span class='args'>(repository, key, query = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: spec this.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#typecast_key-instance_method">#typecast_key</span><span class='args'>(key)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a title="DataMapper::Model::Transaction" href="Model/Transaction.html">DataMapper::Model::Transaction</a></h2>
    <p><span class='name'><a title="transaction" href="Model/Transaction.html#transaction-instance_method">transaction</a></span></p>
  </div>
  
  <div>
    <h2>Public Instance Methods Included from <a title="DataMapper::Model::Migration" href="Model/Migration.html">DataMapper::Model::Migration</a></h2>
    <p><span class='name'><a title="storage_exists?" href="Model/Migration.html#storage_exists%3F-instance_method">storage_exists?</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>append_extensions</h3>
</div><div id="append_extensions-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>TrueClass</tt></span>
    <span class='name'>append_extensions</span><span class='args'>(*extensions)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Extends the model with this module after DataMapper::Resource has been
included.
</p>
<p>
This is a useful way to extend DataMapper::Model while still retaining a
self.extended method.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Module</tt>]</span>
        <span class='name'>extensions</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the module that is to be extend the model after after DataMapper::Model
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>TrueClass</tt>, <tt>FalseClass</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
whether or not the inclusions have been successfully appended to the list -
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 22</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L22">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">22
23
24
25</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='append_extensions identifier id'>append_extensions</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='extensions identifier id'>extensions</span><span class='rparen token'>)</span>
  <span class='extra_extensions identifier id'>extra_extensions</span><span class='dot token'>.</span><span class='concat identifier id'>concat</span> <span class='extensions identifier id'>extensions</span>
  <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>extended</h3>
</div><div id="extended-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>extended</span><span class='args'>(model)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 31</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L31">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">31
32
33
34
35
36</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='extended identifier id'>extended</span><span class='lparen token'>(</span><span class='model identifier id'>model</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@storage_names</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@properties</span><span class='comma token'>,</span>    <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@field_naming_conventions</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='extra_extensions identifier id'>extra_extensions</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='extension identifier id'>extension</span><span class='bitor op'>|</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extend identifier id'>extend</span><span class='lparen token'>(</span><span class='extension identifier id'>extension</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>extra_extensions</h3>
</div><div id="extra_extensions-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>extra_extensions</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 27</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L27">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">27
28
29</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='extra_extensions identifier id'>extra_extensions</span>
  <span class='@extra_extensions ivar id'>@extra_extensions</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>[]</h3>
</div><div id="-5B-5D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>[]</span><span class='args'>(*key)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 272</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L272">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">272
273
274
275</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='aref op'>[]</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='warn identifier id'>warn</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{name}[] is deprecated. Use #{name}.get! instead.&quot;</span><span class='rparen token'>)</span>
  <span class='get! fid id'>get!</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>_load</h3>
</div><div id="_load-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>_load</span><span class='args'>(marshalled)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: add docs
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 401</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L401">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">401
402
403
404
405</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='_load identifier id'>_load</span><span class='lparen token'>(</span><span class='marshalled identifier id'>marshalled</span><span class='rparen token'>)</span>
  <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='allocate identifier id'>allocate</span>
  <span class='Marshal constant id'>Marshal</span><span class='dot token'>.</span><span class='load identifier id'>load</span><span class='lparen token'>(</span><span class='marshalled identifier id'>marshalled</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='kv identifier id'>kv</span><span class='bitor op'>|</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='kv identifier id'>kv</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='resource identifier id'>resource</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>all</h3>
</div><div id="all-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>all</span><span class='args'>(query = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 256</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L256">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">256
257
258
259</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='scoped_query identifier id'>scoped_query</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='rparen token'>)</span>
  <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='read_many identifier id'>read_many</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>base_model</h3>
</div><div id="base_model-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>base_model</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 88</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L88">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">88
89
90</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='base_model identifier id'>base_model</span>
  <span class='@base_model ivar id'>@base_model</span> <span class='opasgn op'>||=</span> <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>copy</h3>
</div><div id="copy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt><a title="DataMapper::Collection" href="Collection.html">DataMapper::Collection</a></tt></span>
    <span class='name'>copy</span><span class='args'>(source, destination, query = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Copy a set of records from one repository to another.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>String</tt>]</span>
        <span class='name'>source</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The name of the Repository the resources should be copied <em>from</em>
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>String</tt>]</span>
        <span class='name'>destination</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The name of the Repository the resources should be copied <em>to</em>
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>Hash</tt>]</span>
        <span class='name'>query</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
The conditions with which to find the records to copy. These conditions are
merged with Model.query
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="DataMapper::Collection" href="Collection.html">DataMapper::Collection</a></tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
A Collection of the Resource instances created in the operation
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 329</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L329">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">329
330
331
332
333
334
335
336
337
338
339
340</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='copy identifier id'>copy</span><span class='lparen token'>(</span><span class='source identifier id'>source</span><span class='comma token'>,</span> <span class='destination identifier id'>destination</span><span class='comma token'>,</span> <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

  <span class='comment val'># get the list of properties that exist in the source and destination</span>
  <span class='destination_properties identifier id'>destination_properties</span> <span class='assign token'>=</span> <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='destination identifier id'>destination</span><span class='rparen token'>)</span>
  <span class='fields identifier id'>fields</span> <span class='assign token'>=</span> <span class='query identifier id'>query</span><span class='lbrack token'>[</span><span class='symbol val'>:fields</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='source identifier id'>source</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='p identifier id'>p</span><span class='bitor op'>|</span> <span class='destination_properties identifier id'>destination_properties</span><span class='dot token'>.</span><span class='has_property? fid id'>has_property?</span><span class='lparen token'>(</span><span class='p identifier id'>p</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

  <span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='destination identifier id'>destination</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:repository</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='source identifier id'>source</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='resource identifier id'>resource</span><span class='bitor op'>|</span>
      <span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='fields identifier id'>fields</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='p identifier id'>p</span><span class='bitor op'>|</span> <span class='lbrack token'>[</span> <span class='p identifier id'>p</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='p identifier id'>p</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='rparen token'>)</span> <span class='rbrack token'>]</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='to_hash identifier id'>to_hash</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create</h3>
</div><div id="create-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create</span><span class='args'>(attributes = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Create an instance of Resource with the given attributes
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt>Hash(Symbol =&gt;Object)</tt>]</span>
        <span class='name'>attributes</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
hash of attributes to set
</p>
</span>
      </dd>
    
  
  </dl>
</div>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 298</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L298">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">298
299
300
301
302</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
  <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
  <span class='resource identifier id'>resource</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create!</h3>
</div><div id="create-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create!</span><span class='args'>(attributes = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
This method is deprecated, and will be removed from dm-core.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="PersistenceError" href="PersistenceError.html">PersistenceError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 307</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L307">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">307
308
309
310
311
312</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create! fid id'>create!</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='warn identifier id'>warn</span><span class='lparen token'>(</span><span class='string val'>&quot;Model#create! is deprecated. It is moving to dm-validations, and will be used to create a record without validations&quot;</span><span class='rparen token'>)</span>
  <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='PersistenceError constant id'>PersistenceError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Resource not saved: :new_record =&gt; #{resource.new_record?}, :dirty_attributes =&gt; #{resource.dirty_attributes.inspect}&quot;</span> <span class='if if_mod kw'>if</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='new_record? fid id'>new_record?</span>
  <span class='resource identifier id'>resource</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>default_order</h3>
</div><div id="default_order-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>default_order</span><span class='args'>(repository_name = default_repository_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 242</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L242">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">242
243
244
245</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='default_order identifier id'>default_order</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='default_repository_name identifier id'>default_repository_name</span><span class='rparen token'>)</span>
  <span class='@default_order ivar id'>@default_order</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='@default_order ivar id'>@default_order</span><span class='lbrack token'>[</span><span class='repository_name identifier id'>repository_name</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='key identifier id'>key</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span> <span class='Query constant id'>Query</span><span class='colon2 op'>::</span><span class='Direction constant id'>Direction</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>default_repository_name</h3>
</div><div id="default_repository_name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>default_repository_name</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 411</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L411">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">411
412
413</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='default_repository_name identifier id'>default_repository_name</span>
  <span class='Repository constant id'>Repository</span><span class='dot token'>.</span><span class='default_name identifier id'>default_name</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>eager_properties</h3>
</div><div id="eager_properties-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>eager_properties</span><span class='args'>(repository_name = default_repository_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 217</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L217">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">217
218
219</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='eager_properties identifier id'>eager_properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='default_repository_name identifier id'>default_repository_name</span><span class='rparen token'>)</span>
  <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='defaults identifier id'>defaults</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>field_naming_convention</h3>
</div><div id="field_naming_convention-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>String</tt></span>
    <span class='name'>field_naming_convention</span><span class='args'>(repository_name = default_storage_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The field naming conventions for this resource across all repositories.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>String</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
The naming convention for the given repository
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 140</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L140">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">140
141
142</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='field_naming_convention identifier id'>field_naming_convention</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='default_storage_name identifier id'>default_storage_name</span><span class='rparen token'>)</span>
  <span class='@field_naming_conventions ivar id'>@field_naming_conventions</span><span class='lbrack token'>[</span><span class='repository_name identifier id'>repository_name</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='adapter identifier id'>adapter</span><span class='dot token'>.</span><span class='field_naming_convention identifier id'>field_naming_convention</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>first</h3>
</div><div id="first-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>first</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 261</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L261">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">261
262
263
264
265
266
267
268
269
270</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:merge</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span> <span class='colon op'>:</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='scoped_query identifier id'>scoped_query</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:limit</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='orop op'>||</span> <span class='integer val'>1</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

  <span class='if if kw'>if</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='any? fid id'>any?</span>
    <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='read_many identifier id'>read_many</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='read_one identifier id'>read_one</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>first_or_create</h3>
</div><div id="first_or_create-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>first_or_create</span><span class='args'>(query, attributes = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 277</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L277">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='first_or_create identifier id'>first_or_create</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='begin begin kw'>begin</span>
    <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='allocate identifier id'>allocate</span>
    <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>

    <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='key identifier id'>key</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span>
      <span class='if if kw'>if</span> <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
        <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{property.name}=&quot;</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
    <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
    <span class='resource identifier id'>resource</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get</h3>
</div><div id="get-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get</span><span class='args'>(*key)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 247</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L247">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">247
248
249
250</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='key identifier id'>key</span> <span class='assign token'>=</span> <span class='typecast_key identifier id'>typecast_key</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='identity_map identifier id'>identity_map</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='first identifier id'>first</span><span class='lparen token'>(</span><span class='to_query identifier id'>to_query</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get!</h3>
</div><div id="get-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get!</span><span class='args'>(*key)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 252</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L252">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">252
253
254</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='get! fid id'>get!</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='key identifier id'>key</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='ObjectNotFoundError constant id'>ObjectNotFoundError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Could not find #{self.name} with key #{key.inspect}&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>inheritance_property</h3>
</div><div id="inheritance_property-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>inheritance_property</span><span class='args'>(repository_name = default_repository_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 238</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L238">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">238
239
240</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='inheritance_property identifier id'>inheritance_property</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='default_repository_name identifier id'>default_repository_name</span><span class='rparen token'>)</span>
  <span class='@properties ivar id'>@properties</span><span class='lbrack token'>[</span><span class='repository_name identifier id'>repository_name</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='detect identifier id'>detect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='eq op'>==</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Types constant id'>Types</span><span class='colon2 op'>::</span><span class='Discriminator constant id'>Discriminator</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>inherited</h3>
</div><div id="inherited-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>inherited</span><span class='args'>(target)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 38</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L38">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='inherited identifier id'>inherited</span><span class='lparen token'>(</span><span class='target identifier id'>target</span><span class='rparen token'>)</span>
  <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@storage_names</span><span class='comma token'>,</span>       <span class='@storage_names ivar id'>@storage_names</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span><span class='rparen token'>)</span>
  <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@properties</span><span class='comma token'>,</span>          <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@base_model</span><span class='comma token'>,</span>          <span class='self self kw'>self</span><span class='dot token'>.</span><span class='base_model identifier id'>base_model</span><span class='rparen token'>)</span>
  <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@paranoid_properties</span><span class='comma token'>,</span> <span class='@paranoid_properties ivar id'>@paranoid_properties</span><span class='rparen token'>)</span>
  <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@field_naming_conventions</span><span class='comma token'>,</span>  <span class='@field_naming_conventions ivar id'>@field_naming_conventions</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span><span class='rparen token'>)</span>

  <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:validators</span><span class='rparen token'>)</span>
    <span class='@validations ivar id'>@validations</span><span class='dot token'>.</span><span class='contexts identifier id'>contexts</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='context identifier id'>context</span><span class='comma token'>,</span> <span class='validators identifier id'>validators</span><span class='bitor op'>|</span>
      <span class='validators identifier id'>validators</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='validator identifier id'>validator</span><span class='bitor op'>|</span> <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='validators identifier id'>validators</span><span class='dot token'>.</span><span class='context identifier id'>context</span><span class='lparen token'>(</span><span class='context identifier id'>context</span><span class='rparen token'>)</span> <span class='lshft op'>&lt;&lt;</span> <span class='validator identifier id'>validator</span> <span class='rbrace token'>}</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='@properties ivar id'>@properties</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='repository_name identifier id'>repository_name</span><span class='comma token'>,</span><span class='properties identifier id'>properties</span><span class='bitor op'>|</span>
    <span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
      <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span>
        <span class='next next kw'>next</span> <span class='if if_mod kw'>if</span> <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='has_property? fid id'>has_property?</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
        <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='property identifier id'>property</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='options identifier id'>options</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='@relationships ivar id'>@relationships</span>
    <span class='duped_relationships identifier id'>duped_relationships</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='@relationships ivar id'>@relationships</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='repository_name identifier id'>repository_name</span><span class='comma token'>,</span><span class='relationships identifier id'>relationships</span><span class='bitor op'>|</span>
      <span class='relationships identifier id'>relationships</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='bitor op'>|</span>
        <span class='dup identifier id'>dup</span> <span class='assign token'>=</span> <span class='relationship identifier id'>relationship</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
        <span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@child_model</span><span class='comma token'>,</span> <span class='target identifier id'>target</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='symbol val'>:@child_model</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='self self kw'>self</span>
        <span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@parent_model</span><span class='comma token'>,</span> <span class='target identifier id'>target</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='symbol val'>:@parent_model</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='self self kw'>self</span>
        <span class='duped_relationships identifier id'>duped_relationships</span><span class='lbrack token'>[</span><span class='repository_name identifier id'>repository_name</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
        <span class='duped_relationships identifier id'>duped_relationships</span><span class='lbrack token'>[</span><span class='repository_name identifier id'>repository_name</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='dup identifier id'>dup</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@relationships</span><span class='comma token'>,</span> <span class='duped_relationships identifier id'>duped_relationships</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>key</h3>
</div><div id="key-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>key</span><span class='args'>(repository_name = default_repository_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 234</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L234">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">234
235
236</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='key identifier id'>key</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='default_repository_name identifier id'>default_repository_name</span><span class='rparen token'>)</span>
  <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='key identifier id'>key</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>load</h3>
</div><div id="load-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>load</span><span class='args'>(values, query)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 344</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L344">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='load identifier id'>load</span><span class='lparen token'>(</span><span class='values identifier id'>values</span><span class='comma token'>,</span> <span class='query identifier id'>query</span><span class='rparen token'>)</span>
  <span class='repository identifier id'>repository</span> <span class='assign token'>=</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span>
  <span class='model identifier id'>model</span>      <span class='assign token'>=</span> <span class='self self kw'>self</span>

  <span class='if if kw'>if</span> <span class='inheritance_property_index identifier id'>inheritance_property_index</span> <span class='assign token'>=</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='inheritance_property_index identifier id'>inheritance_property_index</span>
    <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='inheritance_property_index identifier id'>inheritance_property_index</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='model identifier id'>model</span>
  <span class='end end kw'>end</span>

  <span class='key_values identifier id'>key_values</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='identity_map identifier id'>identity_map</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>

  <span class='if if kw'>if</span> <span class='key_property_indexes identifier id'>key_property_indexes</span> <span class='assign token'>=</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='key_property_indexes identifier id'>key_property_indexes</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='rparen token'>)</span>
    <span class='key_values identifier id'>key_values</span>   <span class='assign token'>=</span> <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='values_at identifier id'>values_at</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='key_property_indexes identifier id'>key_property_indexes</span><span class='rparen token'>)</span>
    <span class='identity_map identifier id'>identity_map</span> <span class='assign token'>=</span> <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='identity_map identifier id'>identity_map</span><span class='lparen token'>(</span><span class='model identifier id'>model</span><span class='rparen token'>)</span>

    <span class='if if kw'>if</span> <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='identity_map identifier id'>identity_map</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='key_values identifier id'>key_values</span><span class='rparen token'>)</span>
      <span class='return return kw'>return</span> <span class='resource identifier id'>resource</span> <span class='unless unless_mod kw'>unless</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='reload? fid id'>reload?</span>
    <span class='else else kw'>else</span>
      <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='allocate identifier id'>allocate</span>
      <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@repository</span><span class='comma token'>,</span> <span class='repository identifier id'>repository</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='resource identifier id'>resource</span> <span class='assign token'>=</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='allocate identifier id'>allocate</span>
    <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='readonly! fid id'>readonly!</span>
  <span class='end end kw'>end</span>

  <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='symbol val'>:@new_record</span><span class='comma token'>,</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>

  <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='fields identifier id'>fields</span><span class='dot token'>.</span><span class='zip identifier id'>zip</span><span class='lparen token'>(</span><span class='values identifier id'>values</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='comma token'>,</span><span class='value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='custom? fid id'>custom?</span> <span class='integer val'>? </span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='dot token'>.</span><span class='load identifier id'>load</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='comma token'>,</span> <span class='property identifier id'>property</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='typecast identifier id'>typecast</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='set! fid id'>set!</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>

    <span class='if if kw'>if</span> <span class='track identifier id'>track</span> <span class='assign token'>=</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='track identifier id'>track</span>
      <span class='case case kw'>case</span> <span class='track identifier id'>track</span>
        <span class='when when kw'>when</span> <span class='symbol val'>:hash</span>
          <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='original_values identifier id'>original_values</span><span class='lbrack token'>[</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='hash identifier id'>hash</span> <span class='unless unless_mod kw'>unless</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='original_values identifier id'>original_values</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='hash identifier id'>hash</span>
        <span class='when when kw'>when</span> <span class='symbol val'>:load</span>
          <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='original_values identifier id'>original_values</span><span class='lbrack token'>[</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span> <span class='unless unless_mod kw'>unless</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='original_values identifier id'>original_values</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='if if kw'>if</span> <span class='key_values identifier id'>key_values</span> <span class='andop op'>&amp;&amp;</span> <span class='identity_map identifier id'>identity_map</span>
    <span class='identity_map identifier id'>identity_map</span><span class='dot token'>.</span><span class='set identifier id'>set</span><span class='lparen token'>(</span><span class='key_values identifier id'>key_values</span><span class='comma token'>,</span> <span class='resource identifier id'>resource</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='resource identifier id'>resource</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>paranoid_properties</h3>
</div><div id="paranoid_properties-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>paranoid_properties</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 415</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L415">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">415
416
417
418</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='paranoid_properties identifier id'>paranoid_properties</span>
  <span class='@paranoid_properties ivar id'>@paranoid_properties</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='@paranoid_properties ivar id'>@paranoid_properties</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>properties</h3>
</div><div id="properties-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>properties</span><span class='args'>(repository_name = default_repository_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 199</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L199">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='default_repository_name identifier id'>default_repository_name</span><span class='rparen token'>)</span>
  <span class='comment val'># We need to check whether all relations are already set up.</span>
  <span class='comment val'># If this isn't the case, we try to reload them here</span>
  <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='@_valid_relations ivar id'>@_valid_relations</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:many_to_one_relationships</span><span class='rparen token'>)</span>
    <span class='@_valid_relations ivar id'>@_valid_relations</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='begin begin kw'>begin</span>
      <span class='many_to_one_relationships identifier id'>many_to_one_relationships</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span>
        <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='child_key identifier id'>child_key</span>
      <span class='end end kw'>end</span>
    <span class='rescue rescue kw'>rescue</span> <span class='NameError constant id'>NameError</span>
      <span class='comment val'># Apparently not all relations are loaded,</span>
      <span class='comment val'># so we will try again later on</span>
      <span class='@_valid_relations ivar id'>@_valid_relations</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='@properties ivar id'>@properties</span><span class='lbrack token'>[</span><span class='repository_name identifier id'>repository_name</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='repository_name identifier id'>repository_name</span> <span class='eq op'>==</span> <span class='Repository constant id'>Repository</span><span class='dot token'>.</span><span class='default_name identifier id'>default_name</span> <span class='integer val'>? </span><span class='PropertySet constant id'>PropertySet</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='colon op'>:</span> <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='Repository constant id'>Repository</span><span class='dot token'>.</span><span class='default_name identifier id'>default_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>properties_with_subclasses</h3>
</div><div id="properties_with_subclasses-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>properties_with_subclasses</span><span class='args'>(repository_name = default_repository_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 222</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L222">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">222
223
224
225
226
227
228
229
230
231
232</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='properties_with_subclasses identifier id'>properties_with_subclasses</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='default_repository_name identifier id'>default_repository_name</span><span class='rparen token'>)</span>
  <span class='properties identifier id'>properties</span> <span class='assign token'>=</span> <span class='PropertySet constant id'>PropertySet</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='lparen token'>(</span><span class='lbrack token'>[</span> <span class='self self kw'>self</span> <span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_set identifier id'>to_set</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:descendants</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='descendants identifier id'>descendants</span> <span class='colon op'>:</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='model identifier id'>model</span><span class='bitor op'>|</span>
    <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='relationships identifier id'>relationships</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each_value identifier id'>each_value</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='relationship identifier id'>relationship</span><span class='bitor op'>|</span> <span class='relationship identifier id'>relationship</span><span class='dot token'>.</span><span class='child_key identifier id'>child_key</span> <span class='rbrace token'>}</span>
    <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='many_to_one_relationships identifier id'>many_to_one_relationships</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='relationship identifier id'>relationship</span><span class='bitor op'>|</span> <span class='relationship identifier id'>relationship</span><span class='dot token'>.</span><span class='child_key identifier id'>child_key</span> <span class='end end kw'>end</span>
    <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span>
      <span class='properties identifier id'>properties</span> <span class='lshft op'>&lt;&lt;</span> <span class='property identifier id'>property</span> <span class='unless unless_mod kw'>unless</span> <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='has_property? fid id'>has_property?</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='properties identifier id'>properties</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>property</h3>
</div><div id="property-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>property</span><span class='args'>(name, type, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
defines a property on the resource
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a title="Symbol" href="../Symbol.html">Symbol</a></tt>]</span>
        <span class='name'>name</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name for which to call this property
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt><a title="Type" href="Type.html">Type</a></tt>]</span>
        <span class='name'>type</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the type to define this property ass
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>Hash(Symbol =&gt;String)</tt>]</span>
        <span class='name'>options</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
a hash of available options
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="see">
  <h3>See Also:</h3>
  <dl>
    <dt></dt>
    <dd>
      <span class='desc'>
        <tt><a title="DataMapper::Property" href="Property.html">DataMapper::Property</a></tt>
      </span>
    </dd>
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 151</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L151">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='property identifier id'>property</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='property identifier id'>property</span> <span class='assign token'>=</span> <span class='Property constant id'>Property</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>

  <span class='create_property_getter identifier id'>create_property_getter</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='rparen token'>)</span>
  <span class='create_property_setter identifier id'>create_property_setter</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='rparen token'>)</span>

  <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='property identifier id'>property</span>
  <span class='@_valid_relations ivar id'>@_valid_relations</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>

  <span class='comment val'># Add property to the other mappings as well if this is for the default</span>
  <span class='comment val'># repository.</span>
  <span class='if if kw'>if</span> <span class='repository_name identifier id'>repository_name</span> <span class='eq op'>==</span> <span class='default_repository_name identifier id'>default_repository_name</span>
    <span class='@properties ivar id'>@properties</span><span class='dot token'>.</span><span class='each_pair identifier id'>each_pair</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='repository_name identifier id'>repository_name</span><span class='comma token'>,</span> <span class='properties identifier id'>properties</span><span class='bitor op'>|</span>
      <span class='next next kw'>next</span> <span class='if if_mod kw'>if</span> <span class='repository_name identifier id'>repository_name</span> <span class='eq op'>==</span> <span class='default_repository_name identifier id'>default_repository_name</span>
      <span class='properties identifier id'>properties</span> <span class='lshft op'>&lt;&lt;</span> <span class='property identifier id'>property</span> <span class='unless unless_mod kw'>unless</span> <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='has_property? fid id'>has_property?</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Add the property to the lazy_loads set for this resources repository</span>
  <span class='comment val'># only.</span>
  <span class='comment val'># TODO Is this right or should we add the lazy contexts to all</span>
  <span class='comment val'># repositories?</span>
  <span class='if if kw'>if</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='lazy? fid id'>lazy?</span>
    <span class='context identifier id'>context</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='symbol val'>:lazy</span><span class='comma token'>,</span> <span class='symbol val'>:default</span><span class='rparen token'>)</span>
    <span class='context identifier id'>context</span> <span class='assign token'>=</span> <span class='symbol val'>:default</span> <span class='if if_mod kw'>if</span> <span class='context identifier id'>context</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>

    <span class='Array constant id'>Array</span><span class='lparen token'>(</span><span class='context identifier id'>context</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='item identifier id'>item</span><span class='bitor op'>|</span>
      <span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='lazy_context identifier id'>lazy_context</span><span class='lparen token'>(</span><span class='item identifier id'>item</span><span class='rparen token'>)</span> <span class='lshft op'>&lt;&lt;</span> <span class='name identifier id'>name</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># add the property to the child classes only if the property was</span>
  <span class='comment val'># added after the child classes' properties have been copied from</span>
  <span class='comment val'># the parent</span>
  <span class='if if kw'>if</span> <span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:descendants</span><span class='rparen token'>)</span>
    <span class='descendants identifier id'>descendants</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='model identifier id'>model</span><span class='bitor op'>|</span>
      <span class='next next kw'>next</span> <span class='if if_mod kw'>if</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='has_property? fid id'>has_property?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
      <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='property identifier id'>property</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='property identifier id'>property</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>repositories</h3>
</div><div id="repositories-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>repositories</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 195</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L195">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">195
196
197</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='repositories identifier id'>repositories</span>
  <span class='lbrack token'>[</span> <span class='repository identifier id'>repository</span> <span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_set identifier id'>to_set</span> <span class='plus op'>+</span> <span class='@properties ivar id'>@properties</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='repository_name identifier id'>repository_name</span><span class='bitor op'>|</span> <span class='DataMapper constant id'>DataMapper</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>repository</h3>
</div><div id="repository-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Object</tt></span>
    <span class='name'>repository</span><span class='args'>(name = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the repository with a given name, or the default one for the current
context, or the default one for this class.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a title="Symbol" href="../Symbol.html">Symbol</a></tt>]</span>
        <span class='name'>name</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name of the repository wanted
</p>
</span>
      </dd>
    
  
  </dl>
</div><div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Object</tt>, <tt>DataMapper::Respository</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
whatever the block returns, if given a block, otherwise the requested
repository. -
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 107</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L107">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">107
108
109
110
111
112
113
114
115
116
117
118</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='comment val'>#</span>
  <span class='comment val'># There has been a couple of different strategies here, but me (zond) and dkubb are at least</span>
  <span class='comment val'># united in the concept of explicitness over implicitness. That is - the explicit wish of the</span>
  <span class='comment val'># caller (+name+) should be given more priority than the implicit wish of the caller (Repository.context.last).</span>
  <span class='comment val'>#</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='DataMapper constant id'>DataMapper</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='name identifier id'>name</span> <span class='orop op'>||</span> <span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='mult op'>*</span><span class='block_args identifier id'>block_args</span><span class='bitor op'>|</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='block_args identifier id'>block_args</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='else else kw'>else</span>
    <span class='DataMapper constant id'>DataMapper</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='name identifier id'>name</span> <span class='orop op'>||</span> <span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>repository_name</h3>
</div><div id="repository_name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>repository_name</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 92</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L92">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">92
93
94</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='repository_name identifier id'>repository_name</span>
  <span class='Repository constant id'>Repository</span><span class='dot token'>.</span><span class='context identifier id'>context</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='integer val'>? </span><span class='Repository constant id'>Repository</span><span class='dot token'>.</span><span class='context identifier id'>context</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='colon op'>:</span> <span class='default_repository_name identifier id'>default_repository_name</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>storage_name</h3>
</div><div id="storage_name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>String</tt></span>
    <span class='name'>storage_name</span><span class='args'>(repository_name = default_repository_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
the name of the storage recepticle for this resource. IE. table name, for
database stores
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>String</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
the storage name (IE table name, for database stores) associated with this
resource in the given repository
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 124</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L124">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">124
125
126</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='storage_name identifier id'>storage_name</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span> <span class='assign token'>=</span> <span class='default_repository_name identifier id'>default_repository_name</span><span class='rparen token'>)</span>
  <span class='@storage_names ivar id'>@storage_names</span><span class='lbrack token'>[</span><span class='repository_name identifier id'>repository_name</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='repository identifier id'>repository</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='adapter identifier id'>adapter</span><span class='dot token'>.</span><span class='resource_naming_convention identifier id'>resource_naming_convention</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='base_model identifier id'>base_model</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:default_storage_name</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>storage_names</h3>
</div><div id="storage_names-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>Hash(Symbol =&gt;String)</tt></span>
    <span class='name'>storage_names</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
the names of the storage recepticles for this resource across all
repositories
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Hash(Symbol =&gt;String)</tt>]</span>
      
      
        <span class='name'></span>
      
      
    </dt>
    <dd>
      <span class='desc'><p>
All available names of storage recepticles
</p>
</span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 132</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L132">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">132
133
134</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='storage_names identifier id'>storage_names</span>
  <span class='@storage_names ivar id'>@storage_names</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_query</h3>
</div><div id="to_query-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_query</span><span class='args'>(repository, key, query = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: spec this
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 394</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L394">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">394
395
396
397</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_query identifier id'>to_query</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='Hash constant id'>Hash</span><span class='lbrack token'>[</span> <span class='mult op'>*</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='key identifier id'>key</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='zip identifier id'>zip</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span> <span class='rbrack token'>]</span>
  <span class='Query constant id'>Query</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='comma token'>,</span> <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>typecast_key</h3>
</div><div id="typecast_key-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>typecast_key</span><span class='args'>(key)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/dm-core/model.rb', line 407</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/dm-core/blob/1a0edcdccba4d9540b42bbd2cc5ae239fbe1d296/lib/dm-core/model.rb#L407">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">407
408
409</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='typecast_key identifier id'>typecast_key</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='key identifier id'>key</span><span class='lparen token'>(</span><span class='repository_name identifier id'>repository_name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='zip identifier id'>zip</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='typecast identifier id'>typecast</span><span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>