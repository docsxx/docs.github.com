<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: DataMapper::Resource</title>
  </head>
  <body>
    <div id="content">
      <div class="section module DataMapper_Resource">
  <h1 class="title">Module: DataMapper::Resource</h1>
  <div class="section mixins">
  <h1>Included Modules</h1>
  <p><a href='Resource/Assertions.html' title='DataMapper::Assertions'>DataMapper::Assertions</a>, <a href='Resource/Transaction.html' title='DataMapper::Resource::Transaction'>DataMapper::Resource::Transaction</a>, <a href='Resource/Types.html' title='DataMapper::Types'>DataMapper::Types</a></p>
</div><div class="section attributes">
  <h1>Attributes</h1>

  
    <div class="instance">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">collection</td>
          <td class="readwrite">
            [R<span id='collection%3D-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
+&#8212;&#8212;&#8212;&#8212;&#8212; Instance methods.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary class public">
    <h1>Public Class Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#append_inclusions-class_method' title='append_inclusions'>append_inclusions</a></span><span class='args'>(*inclusions)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Appends a module for inclusion into the model class after
DataMapper::Resource.
</p>

        
          <p class='returns'>
            Returns: 
              <span class='return_types'>
                 <tt>TrueClass</tt>
              </span>
          </p>
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#descendants-class_method' title='descendants'>descendants</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Return all classes that include the DataMapper::Resource module.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#extra_inclusions-class_method' title='extra_inclusions'>extra_inclusions</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#included-class_method' title='included'>included</a></span><span class='args'>(model)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
When Resource is included in a class this method makes sure it gets all the
methods.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#_dump-instance_method' title='#_dump'>#_dump</a></span><span class='args'>(*)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: add docs.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#attribute_dirty%3F-instance_method' title='#attribute_dirty?'>#attribute_dirty?</a></span><span class='args'>(name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Checks if the attribute is dirty.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#attribute_loaded%3F-instance_method' title='#attribute_loaded?'>#attribute_loaded?</a></span><span class='args'>(name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Checks if the attribute has been loaded.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#attribute_set-instance_method' title='#attribute_set'>#attribute_set</a></span><span class='args'>(name, value)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
sets the value of the attribute and marks the attribute as dirty if it has
been changed so that it may be saved.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#attributes-instance_method' title='#attributes'>#attributes</a></span><span class='args'>=(values_hash)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Mass assign of attributes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#collection-instance_method' title='#collection'>#collection</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#destroy-instance_method' title='#destroy'>#destroy</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
destroy the instance, remove it from the repository.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#dirty%3F-instance_method' title='#dirty?'>#dirty?</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Checks if the class is dirty.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#dirty_attributes-instance_method' title='#dirty_attributes'>#dirty_attributes</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Hash of attributes that have been marked dirty.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#eql%3F-instance_method' title='#eql?'>#eql?</a></span><span class='args'>(other)</span>
        <span class='block'></span>
        
          <span class='alias'>#==</span>
        
      </th>
      <td class="docstring">
        <p>
Compares if its the same object or if attributes are equal.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#hash-instance_method' title='#hash'>#hash</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Computes a hash for the resource.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#id-instance_method' title='#id'>#id</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
default id method to return the resource id when there is a single key, and
the model was defined with a primary key named something other than id.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#inspect-instance_method' title='#inspect'>#inspect</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Inspection of the class name and the attributes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#key-instance_method' title='#key'>#key</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#loaded_attributes-instance_method' title='#loaded_attributes'>#loaded_attributes</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
fetches all the names of the attributes that have been loaded, even if they
are lazy but have been called.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#new_record%3F-instance_method' title='#new_record?'>#new_record?</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Checks if the model has been saved.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#original_values-instance_method' title='#original_values'>#original_values</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
set of original values of properties.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#pretty_print-instance_method' title='#pretty_print'>#pretty_print</a></span><span class='args'>(pp)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO docs.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#readonly%21-instance_method' title='#readonly!'>#readonly!</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#readonly%3F-instance_method' title='#readonly?'>#readonly?</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#reload-instance_method' title='#reload'>#reload</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Reload association and all child association.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#reload_attributes-instance_method' title='#reload_attributes'>#reload_attributes</a></span><span class='args'>(*attributes)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Reload specific attributes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#repository-instance_method' title='#repository'>#repository</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h4>Returns</h4>
<table>
<tr><td valign="top">&lt;Repository&gt;:</td><td>the respository this resource belongs to in the context of a collection OR
in the class&#8217;s context.

</td></tr>
</table>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#save-instance_method' title='#save'>#save</a></span><span class='args'>(context = :default)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
save the instance to the data-store.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#to_query-instance_method' title='#to_query'>#to_query</a></span><span class='args'>(query = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
TODO: add docs.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#update_attributes-instance_method' title='#update_attributes'>#update_attributes</a></span><span class='args'>(hash, *update_only)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Updates attributes and saves model.
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h1>Public Instance Methods Included from <a href='Resource/Assertions.html' title='DataMapper::Assertions'>DataMapper::Assertions</a></h1>
    <p><span class='name'><a href='Assertions.html#assert_kind_of-instance_method' title='assert_kind_of'>assert_kind_of</a></span></p>
  </div>
  
  <div>
    <h1>Public Instance Methods Included from <a href='Resource/Transaction.html' title='DataMapper::Resource::Transaction'>DataMapper::Resource::Transaction</a></h1>
    <p><span class='name'><a href='Resource/Transaction.html#transaction-instance_method' title='transaction'>transaction</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails class public">
  <h1>Public Class Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>append_inclusions</h3>
</div><div id="append_inclusions-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'><tt>TrueClass</tt></span>
    <span class='name'>append_inclusions</span><span class='args'>(*inclusions)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Appends a module for inclusion into the model class after
DataMapper::Resource.
</p>
<p>
This is a useful way to extend DataMapper::Resource while still retaining a
self.included method.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>Module</tt>]</span>
      
      
        <span class='name'>inclusion</span>
      
    </dt>
    <dd>
      <span class='desc'><p>
the module that is to be appended to the module after DataMapper::Resource
</p>
</span>
    </dd>
  
  </dl>
</div>
<div class="return">
  <h3>Returns:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>TrueClass</tt>, <tt>FalseClass</tt>]</span>
      
      
        <span class='name'></span>
      
    </dt>
    <dd>
      <span class='desc'><p>
whether or not the inclusions have been successfully appended to the list
</p>
</span>
    </dd>
  
    <dt>
      
        <span class='type'></span>
      
      
        <span class='name'></span>
      
    </dt>
    <dd>
      <span class='desc'><p>
&lt;TrueClass, FalseClass&gt; -
</p>
</span>
    </dd>
  
  </dl>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


23
24
25
26</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 23</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='append_inclusions identifier id'>append_inclusions</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='inclusions identifier id'>inclusions</span><span class='rparen token'>)</span>
  <span class='extra_inclusions identifier id'>extra_inclusions</span><span class='dot token'>.</span><span class='concat identifier id'>concat</span> <span class='inclusions identifier id'>inclusions</span>
  <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>descendants</h3>
</div><div id="descendants-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>descendants</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Return all classes that include the DataMapper::Resource module
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">Set:</td><td>a set containing the including classes

</td></tr>
</table>
<h4>Example</h4>
<pre class="code">
  <span class='Class constant id'>Class</span> <span class='Foo constant id'>Foo</span>
    <span class='include identifier id'>include</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span>
  <span class='end end kw'>end</span>

  <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span><span class='dot token'>.</span><span class='descendants identifier id'>descendants</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='eq op'>==</span> <span class='Foo constant id'>Foo</span>
</pre>
<p>
-
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


64
65
66</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 64</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='descendants identifier id'>descendants</span>
  <span class='@descendants ivar id'>@descendants</span> <span class='opasgn op'>||=</span> <span class='Set constant id'>Set</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>extra_inclusions</h3>
</div><div id="extra_inclusions-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>extra_inclusions</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


28
29
30</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 28</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='extra_inclusions identifier id'>extra_inclusions</span>
  <span class='@extra_inclusions ivar id'>@extra_inclusions</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>included</h3>
</div><div id="included-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>included</span><span class='args'>(model)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
When Resource is included in a class this method makes sure it gets all the
methods
</p>
<p>
-
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


37
38
39
40
41
42
43
44
45
46
47</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 37</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='included identifier id'>included</span><span class='lparen token'>(</span><span class='model identifier id'>model</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extend identifier id'>extend</span> <span class='Model constant id'>Model</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='extend identifier id'>extend</span> <span class='ClassMethods constant id'>ClassMethods</span> <span class='if if_mod kw'>if</span> <span class='defined? defined kw'>defined?</span><span class='lparen token'>(</span><span class='ClassMethods constant id'>ClassMethods</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='const_set identifier id'>const_set</span><span class='lparen token'>(</span><span class='string val'>'Resource'</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='const_defined? fid id'>const_defined?</span><span class='lparen token'>(</span><span class='string val'>'Resource'</span><span class='rparen token'>)</span>
  <span class='extra_inclusions identifier id'>extra_inclusions</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='inclusion identifier id'>inclusion</span><span class='bitor op'>|</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:include</span><span class='comma token'>,</span> <span class='inclusion identifier id'>inclusion</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='descendants identifier id'>descendants</span> <span class='lshft op'>&lt;&lt;</span> <span class='model identifier id'>model</span>
  <span class='class class kw'>class</span> <span class='lshft op'>&lt;&lt;</span> <span class='model identifier id'>model</span>
    <span class='@_valid_model ivar id'>@_valid_model</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
    <span class='attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:_valid_model</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div><div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>_dump</h3>
</div><div id="_dump-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>_dump</span><span class='args'>(*)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: add docs
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 548</span>

<span class='def def kw'>def</span> <span class='_dump identifier id'>_dump</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='rparen token'>)</span>
  <span class='ivars identifier id'>ivars</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

  <span class='comment val'># dump all the loaded properties</span>
  <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span>
    <span class='next next kw'>next</span> <span class='unless unless_mod kw'>unless</span> <span class='attribute_loaded? fid id'>attribute_loaded?</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='ivars identifier id'>ivars</span><span class='lbrack token'>[</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='instance_variable_name identifier id'>instance_variable_name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='get! fid id'>get!</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># dump ivars used internally</span>
  <span class='dstring node'>%w[ @new_record @original_values @readonly @repository ]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='bitor op'>|</span>
    <span class='ivars identifier id'>ivars</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='Marshal constant id'>Marshal</span><span class='dot token'>.</span><span class='dump identifier id'>dump</span><span class='lparen token'>(</span><span class='ivars identifier id'>ivars</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>attribute_dirty?</h3>
</div><div id="attribute_dirty%3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>attribute_dirty?</span><span class='args'>(name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Checks if the attribute is dirty
</p>
<h4>Parameters</h4>
<table>
<tr><td valign="top">name&lt;Symbol&gt;:</td><td>name of attribute

</td></tr>
</table>
<h4>Returns</h4>
<table>
<tr><td valign="top">True:</td><td>returns if attribute is dirty

</td></tr>
</table>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


433
434
435</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 433</span>

<span class='def def kw'>def</span> <span class='attribute_dirty? fid id'>attribute_dirty?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='dirty_attributes identifier id'>dirty_attributes</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='properties identifier id'>properties</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>attribute_loaded?</h3>
</div><div id="attribute_loaded%3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>attribute_loaded?</span><span class='args'>(name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Checks if the attribute has been loaded
</p>
<h4>Example</h4>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Foo constant id'>Foo</span>
    <span class='include identifier id'>include</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='String constant id'>String</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:description</span><span class='comma token'>,</span> <span class='Text constant id'>Text</span><span class='comma token'>,</span> <span class='symbol val'>:lazy</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>

  <span class='Foo constant id'>Foo</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='dot token'>.</span><span class='attribute_loaded? fid id'>attribute_loaded?</span><span class='lparen token'>(</span><span class='symbol val'>:description</span><span class='rparen token'>)</span> <span class='comment val'># will return false</span>
</pre>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


345
346
347</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 345</span>

<span class='def def kw'>def</span> <span class='attribute_loaded? fid id'>attribute_loaded?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='instance_variable_defined? fid id'>instance_variable_defined?</span><span class='lparen token'>(</span><span class='properties identifier id'>properties</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='instance_variable_name identifier id'>instance_variable_name</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>attribute_set</h3>
</div><div id="attribute_set-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>attribute_set</span><span class='args'>(name, value)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
sets the value of the attribute and marks the attribute as dirty if it has
been changed so that it may be saved. Do not set from instance variables
directly, but use this method. This method handels the lazy loading the
property and returning of defaults if nessesary.
</p>
<h4>Parameters</h4>
<table>
<tr><td valign="top">name&lt;Symbol&gt;:</td><td>name attribute to set

</td></tr>
<tr><td valign="top">value&lt;Type&gt;:</td><td>value to store at that location

</td></tr>
</table>
<h4>Returns</h4>
<table>
<tr><td valign="top">&lt;Types&gt;:</td><td>the value stored at that given attribute, nil if none, and default if
necessary

</td></tr>
</table>
<h4>Example</h4>
<pre class="code">
  <span class='Class constant id'>Class</span> <span class='Foo constant id'>Foo</span>
    <span class='include identifier id'>include</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span>

    <span class='property identifier id'>property</span> <span class='symbol val'>:first_name</span><span class='comma token'>,</span> <span class='String constant id'>String</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:last_name</span><span class='comma token'>,</span> <span class='String constant id'>String</span>

    <span class='def def kw'>def</span> <span class='full_name identifier id'>full_name</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
      <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>' '</span><span class='rparen token'>)</span>
      <span class='attribute_set identifier id'>attribute_set</span><span class='lparen token'>(</span><span class='symbol val'>:first_name</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='attribute_set identifier id'>attribute_set</span><span class='lparen token'>(</span><span class='symbol val'>:last_name</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># using the shorter syntax</span>
    <span class='def def kw'>def</span> <span class='name_from_address_book identifier id'>name_from_address_book</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
      <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>', '</span><span class='rparen token'>)</span>
      <span class='first_name identifier id'>first_name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
      <span class='last_name identifier id'>last_name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
-
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


146
147
148</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 146</span>

<span class='def def kw'>def</span> <span class='attribute_set identifier id'>attribute_set</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='properties identifier id'>properties</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='set identifier id'>set</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>attributes</h3>
</div><div id="attributes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>attributes</span><span class='args'>=(values_hash)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Mass assign of attributes
</p>
<h4>Parameters</h4>
<p>
value_hash &lt;Hash[&lt;Symbol&gt;]&gt;::
</p>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


508
509
510
511
512
513
514
515
516
517
518</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 508</span>

<span class='def def kw'>def</span> <span class='attributes= identifier id'>attributes=</span><span class='lparen token'>(</span><span class='values_hash identifier id'>values_hash</span><span class='rparen token'>)</span>
  <span class='values_hash identifier id'>values_hash</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\?\z/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>

    <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='public_method_defined? fid id'>public_method_defined?</span><span class='lparen token'>(</span><span class='setter identifier id'>setter</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{name}=&quot;</span><span class='rparen token'>)</span>
      <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='setter identifier id'>setter</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The property '#{name}' is not a public property.&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>collection</h3>
</div><div id="collection-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>collection</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


437
438
439
440
441</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 437</span>

<span class='def def kw'>def</span> <span class='collection identifier id'>collection</span>
  <span class='@collection ivar id'>@collection</span> <span class='opasgn op'>||=</span> <span class='if if kw'>if</span> <span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='to_query identifier id'>to_query</span>
    <span class='Collection constant id'>Collection</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='c identifier id'>c</span><span class='bitor op'>|</span> <span class='c identifier id'>c</span> <span class='lshft op'>&lt;&lt;</span> <span class='self self kw'>self</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>destroy</h3>
</div><div id="destroy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>destroy</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
destroy the instance, remove it from the repository
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">&lt;True, False&gt;:</td><td>results of the destruction

</td></tr>
</table>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


315
316
317
318
319
320
321
322
323
324
325
326
327
328
329</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 315</span>

<span class='def def kw'>def</span> <span class='destroy identifier id'>destroy</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='new_record? fid id'>new_record?</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='unless unless_mod kw'>unless</span> <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='to_query identifier id'>to_query</span><span class='rparen token'>)</span>

  <span class='@new_record ivar id'>@new_record</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='identity_map identifier id'>identity_map</span><span class='lparen token'>(</span><span class='model identifier id'>model</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='original_values identifier id'>original_values</span><span class='dot token'>.</span><span class='clear identifier id'>clear</span>

  <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span>
    <span class='comment val'># We'll set the original value to nil as if we had a new record</span>
    <span class='original_values identifier id'>original_values</span><span class='lbrack token'>[</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='attribute_loaded? fid id'>attribute_loaded?</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>dirty?</h3>
</div><div id="dirty%3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>dirty?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Checks if the class is dirty
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">True:</td><td>returns if class is dirty

</td></tr>
</table>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


419
420
421</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 419</span>

<span class='def def kw'>def</span> <span class='dirty? fid id'>dirty?</span>
  <span class='dirty_attributes identifier id'>dirty_attributes</span><span class='dot token'>.</span><span class='any? fid id'>any?</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>dirty_attributes</h3>
</div><div id="dirty_attributes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>dirty_attributes</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Hash of attributes that have been marked dirty
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">Hash:</td><td>attributes that have been marked dirty

</td></tr>
</table>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 389</span>

<span class='def def kw'>def</span> <span class='dirty_attributes identifier id'>dirty_attributes</span>
  <span class='dirty_attributes identifier id'>dirty_attributes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='properties identifier id'>properties</span>       <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='properties identifier id'>properties</span>

  <span class='original_values identifier id'>original_values</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='old_value identifier id'>old_value</span><span class='bitor op'>|</span>
    <span class='property identifier id'>property</span>  <span class='assign token'>=</span> <span class='properties identifier id'>properties</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span>
    <span class='new_value identifier id'>new_value</span> <span class='assign token'>=</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='get! fid id'>get!</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span>

    <span class='dirty identifier id'>dirty</span> <span class='assign token'>=</span> <span class='case case kw'>case</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='track identifier id'>track</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:hash</span> <span class='then then kw'>then</span> <span class='old_value identifier id'>old_value</span> <span class='neq op'>!=</span> <span class='new_value identifier id'>new_value</span><span class='dot token'>.</span><span class='hash identifier id'>hash</span>
    <span class='else else kw'>else</span>
      <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='value identifier id'>value</span><span class='lparen token'>(</span><span class='old_value identifier id'>old_value</span><span class='rparen token'>)</span> <span class='neq op'>!=</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='value identifier id'>value</span><span class='lparen token'>(</span><span class='new_value identifier id'>new_value</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='if if kw'>if</span> <span class='dirty identifier id'>dirty</span>
      <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='hash identifier id'>hash</span>
      <span class='dirty_attributes identifier id'>dirty_attributes</span><span class='lbrack token'>[</span><span class='property identifier id'>property</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='value identifier id'>value</span><span class='lparen token'>(</span><span class='new_value identifier id'>new_value</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='dirty_attributes identifier id'>dirty_attributes</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>eql?</h3>
</div><div id="eql%3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>eql?</span><span class='args'>(other)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="%3D%3D-instance_method">==</tt>
  
</p>
</div><div class="section docstring">
  <p>
Compares if its the same object or if attributes are equal
</p>
<p>
The comparaison is
</p>
<pre class="code">
 <span class='mult op'>*</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='object identifier id'>object</span> <span class='not not kw'>not</span> <span class='from identifier id'>from</span> <span class='same identifier id'>same</span> <span class='repository identifier id'>repository</span>
 <span class='mult op'>*</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='object identifier id'>object</span> <span class='has identifier id'>has</span> <span class='no identifier id'>no</span> <span class='all identifier id'>all</span> <span class='same identifier id'>same</span> <span class='properties identifier id'>properties</span>
</pre>
<h4>Parameters</h4>
<table>
<tr><td valign="top">other&lt;Object&gt;:</td><td>Object to compare to

</td></tr>
</table>
<h4>Returns</h4>
<table>
<tr><td valign="top">&lt;True&gt;:</td><td>the outcome of the comparison as a boolean

</td></tr>
</table>
<p>
-
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 165</span>

<span class='def def kw'>def</span> <span class='eql? fid id'>eql?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='true true kw'>true</span> <span class='if if_mod kw'>if</span> <span class='equal? fid id'>equal?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>

  <span class='comment val'># two instances for different models cannot be equivalent</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='unless unless_mod kw'>unless</span> <span class='other identifier id'>other</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='model identifier id'>model</span><span class='rparen token'>)</span>

  <span class='comment val'># two instances with different keys cannot be equivalent</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='key identifier id'>key</span> <span class='neq op'>!=</span> <span class='other identifier id'>other</span><span class='dot token'>.</span><span class='key identifier id'>key</span>

  <span class='comment val'># neither object has changed since loaded, so they are equivalent</span>
  <span class='return return kw'>return</span> <span class='true true kw'>true</span> <span class='if if_mod kw'>if</span> <span class='repository identifier id'>repository</span> <span class='eq op'>==</span> <span class='other identifier id'>other</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='dirty? fid id'>dirty?</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='other identifier id'>other</span><span class='dot token'>.</span><span class='dirty? fid id'>dirty?</span>

  <span class='comment val'># get all the loaded and non-loaded properties that are not keys,</span>
  <span class='comment val'># since the key comparison was performed earlier</span>
  <span class='loaded identifier id'>loaded</span><span class='comma token'>,</span> <span class='not_loaded identifier id'>not_loaded</span> <span class='assign token'>=</span> <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='p identifier id'>p</span><span class='bitor op'>|</span> <span class='notop op'>!</span><span class='p identifier id'>p</span><span class='dot token'>.</span><span class='key? fid id'>key?</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='partition identifier id'>partition</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span>
    <span class='attribute_loaded? fid id'>attribute_loaded?</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='other identifier id'>other</span><span class='dot token'>.</span><span class='attribute_loaded? fid id'>attribute_loaded?</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># check all loaded properties, and then all unloaded properties</span>
  <span class='lparen token'>(</span><span class='loaded identifier id'>loaded</span> <span class='plus op'>+</span> <span class='not_loaded identifier id'>not_loaded</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='all? fid id'>all?</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='p identifier id'>p</span><span class='bitor op'>|</span> <span class='p identifier id'>p</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='p identifier id'>p</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>hash</h3>
</div><div id="hash-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>hash</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Computes a hash for the resource
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">&lt;Integer&gt;:</td><td>the hash value of the resource

</td></tr>
</table>
<p>
-
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


196
197
198</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 196</span>

<span class='def def kw'>def</span> <span class='hash identifier id'>hash</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='hash identifier id'>hash</span> <span class='plus op'>+</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='hash identifier id'>hash</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>id</h3>
</div><div id="id-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>id</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
default id method to return the resource id when there is a single key, and
the model was defined with a primary key named something other than id
</p>
<h4>Returns</h4>
<p>
&lt;Array[Key], Key&gt; key or keys
</p>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


259
260
261
262</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 259</span>

<span class='def def kw'>def</span> <span class='id identifier id'>id</span>
  <span class='key identifier id'>key</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='key identifier id'>key</span>
  <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='if if_mod kw'>if</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>inspect</h3>
</div><div id="inspect-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>inspect</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Inspection of the class name and the attributes
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">&lt;String&gt;:</td><td>with the class name, attributes with their values

</td></tr>
</table>
<h4>Example</h4>
<p>
&gt;&gt; Foo.new
</p>
<h1>&gt; #&lt;Foo name=nil updated_at=nil created_at=nil id=nil&gt;</h1>
<p>
-
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


212
213
214
215
216
217
218
219
220
221
222
223
224
225
226</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 212</span>

<span class='def def kw'>def</span> <span class='inspect identifier id'>inspect</span>
  <span class='attrs identifier id'>attrs</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

  <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span>
    <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='attribute_loaded? fid id'>attribute_loaded?</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='new_record? fid id'>new_record?</span>
      <span class='string val'>'&lt;not loaded&gt;'</span>
    <span class='else else kw'>else</span>
      <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='getter identifier id'>getter</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='inspect identifier id'>inspect</span>
    <span class='end end kw'>end</span>

    <span class='attrs identifier id'>attrs</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{property.name}=#{value}&quot;</span>
  <span class='end end kw'>end</span>

  <span class='dstring node'>&quot;#&lt;#{model.name} #{attrs * ' '}&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>key</h3>
</div><div id="key-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>key</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


264
265
266
267
268</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 264</span>

<span class='def def kw'>def</span> <span class='key identifier id'>key</span>
  <span class='key_properties identifier id'>key_properties</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='property identifier id'>property</span><span class='bitor op'>|</span>
    <span class='original_values identifier id'>original_values</span><span class='lbrack token'>[</span><span class='property identifier id'>property</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='property identifier id'>property</span><span class='dot token'>.</span><span class='get! fid id'>get!</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>loaded_attributes</h3>
</div><div id="loaded_attributes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>loaded_attributes</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
fetches all the names of the attributes that have been loaded, even if they
are lazy but have been called
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">Array[&lt;Symbol&gt;]:</td><td>names of attributes that have been loaded

</td></tr>
</table>
<h4>Example</h4>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Foo constant id'>Foo</span>
    <span class='include identifier id'>include</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='String constant id'>String</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:description</span><span class='comma token'>,</span> <span class='Text constant id'>Text</span><span class='comma token'>,</span> <span class='symbol val'>:lazy</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>

  <span class='Foo constant id'>Foo</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='dot token'>.</span><span class='loaded_attributes identifier id'>loaded_attributes</span> <span class='comment val'># returns [:name]</span>
</pre>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


367
368
369</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 367</span>

<span class='def def kw'>def</span> <span class='loaded_attributes identifier id'>loaded_attributes</span>
  <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='p identifier id'>p</span><span class='bitor op'>|</span> <span class='p identifier id'>p</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='if if_mod kw'>if</span> <span class='attribute_loaded? fid id'>attribute_loaded?</span><span class='lparen token'>(</span><span class='p identifier id'>p</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>new_record?</h3>
</div><div id="new_record%3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>new_record?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Checks if the model has been saved
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">True:</td><td>status if the model is new

</td></tr>
</table>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


484
485
486</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 484</span>

<span class='def def kw'>def</span> <span class='new_record? fid id'>new_record?</span>
  <span class='notop op'>!</span><span class='defined? defined kw'>defined?</span><span class='lparen token'>(</span><span class='@new_record ivar id'>@new_record</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='@new_record ivar id'>@new_record</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>original_values</h3>
</div><div id="original_values-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>original_values</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
set of original values of properties
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">Hash:</td><td>original values of properties

</td></tr>
</table>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


378
379
380</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 378</span>

<span class='def def kw'>def</span> <span class='original_values identifier id'>original_values</span>
  <span class='@original_values ivar id'>@original_values</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>pretty_print</h3>
</div><div id="pretty_print-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>pretty_print</span><span class='args'>(pp)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO docs
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


229
230
231
232
233
234
235
236
237
238</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 229</span>

<span class='def def kw'>def</span> <span class='pretty_print identifier id'>pretty_print</span><span class='lparen token'>(</span><span class='pp identifier id'>pp</span><span class='rparen token'>)</span>
  <span class='pp identifier id'>pp</span><span class='dot token'>.</span><span class='group identifier id'>group</span><span class='lparen token'>(</span><span class='integer val'>1</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#&lt;#{model.name}&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;&gt;&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='pp identifier id'>pp</span><span class='dot token'>.</span><span class='breakable identifier id'>breakable</span>
    <span class='pp identifier id'>pp</span><span class='dot token'>.</span><span class='seplist identifier id'>seplist</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='k_v identifier id'>k_v</span><span class='bitor op'>|</span>
      <span class='pp identifier id'>pp</span><span class='dot token'>.</span><span class='text identifier id'>text</span> <span class='k_v identifier id'>k_v</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
      <span class='pp identifier id'>pp</span><span class='dot token'>.</span><span class='text identifier id'>text</span> <span class='string val'>&quot; = &quot;</span>
      <span class='pp identifier id'>pp</span><span class='dot token'>.</span><span class='pp identifier id'>pp</span> <span class='k_v identifier id'>k_v</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>readonly!</h3>
</div><div id="readonly%21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>readonly!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


270
271
272</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 270</span>

<span class='def def kw'>def</span> <span class='readonly! fid id'>readonly!</span>
  <span class='@readonly ivar id'>@readonly</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>readonly?</h3>
</div><div id="readonly%3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>readonly?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


274
275
276</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 274</span>

<span class='def def kw'>def</span> <span class='readonly? fid id'>readonly?</span>
  <span class='@readonly ivar id'>@readonly</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reload</h3>
</div><div id="reload-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>reload</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Reload association and all child association
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">self:</td><td>returns the class itself

</td></tr>
</table>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


450
451
452
453
454
455
456
457</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 450</span>

<span class='def def kw'>def</span> <span class='reload identifier id'>reload</span>
  <span class='unless unless kw'>unless</span> <span class='new_record? fid id'>new_record?</span>
    <span class='reload_attributes identifier id'>reload_attributes</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='loaded_attributes identifier id'>loaded_attributes</span><span class='rparen token'>)</span>
    <span class='lparen token'>(</span><span class='parent_associations identifier id'>parent_associations</span> <span class='plus op'>+</span> <span class='child_associations identifier id'>child_associations</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='association identifier id'>association</span><span class='bitor op'>|</span> <span class='association identifier id'>association</span><span class='dot token'>.</span><span class='reload identifier id'>reload</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>

  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reload_attributes</h3>
</div><div id="reload_attributes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>reload_attributes</span><span class='args'>(*attributes)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Reload specific attributes
</p>
<h4>Parameters</h4>
<table>
<tr><td valign="top">*attributes&lt;Array[&lt;Symbol&gt;]&gt;:</td><td>name of attribute

</td></tr>
</table>
<h4>Returns</h4>
<table>
<tr><td valign="top">self:</td><td>returns the class itself

</td></tr>
</table>
<p>
&#8212;
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


469
470
471
472
473
474
475</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 469</span>

<span class='def def kw'>def</span> <span class='reload_attributes identifier id'>reload_attributes</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='attributes identifier id'>attributes</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span> <span class='orop op'>||</span> <span class='new_record? fid id'>new_record?</span>
    <span class='collection identifier id'>collection</span><span class='dot token'>.</span><span class='reload identifier id'>reload</span><span class='lparen token'>(</span><span class='symbol val'>:fields</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>repository</h3>
</div><div id="repository-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>repository</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h4>Returns</h4>
<table>
<tr><td valign="top">&lt;Repository&gt;:</td><td>the respository this resource belongs to in the context of a collection OR
in the class&#8217;s context

</td></tr>
</table>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


246
247
248</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 246</span>

<span class='def def kw'>def</span> <span class='repository identifier id'>repository</span>
  <span class='@repository ivar id'>@repository</span> <span class='orop op'>||</span> <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save</h3>
</div><div id="save-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save</span><span class='args'>(context = :default)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
save the instance to the data-store
</p>
<h4>Returns</h4>
<table>
<tr><td valign="top">&lt;True, False&gt;:</td><td>results of the save

</td></tr>
</table>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="see">
  <h3>See Also:</h3>
  <dl>
    <dt></dt>
    <dd>
      <span class='desc'>
        <tt>DataMapper::Repository#save

-- #public</tt>
      </span>
    </dd>
  </dl>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 287</span>

<span class='def def kw'>def</span> <span class='save identifier id'>save</span><span class='lparen token'>(</span><span class='context identifier id'>context</span> <span class='assign token'>=</span> <span class='symbol val'>:default</span><span class='rparen token'>)</span>
  <span class='comment val'># Takes a context, but does nothing with it. This is to maintain the</span>
  <span class='comment val'># same API through out all of dm-more. dm-validations requires a</span>
  <span class='comment val'># context to be passed</span>

  <span class='associations_saved identifier id'>associations_saved</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='child_associations identifier id'>child_associations</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='associations_saved identifier id'>associations_saved</span> <span class='opasgn op'>|=</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='save identifier id'>save</span> <span class='rbrace token'>}</span>

  <span class='saved identifier id'>saved</span> <span class='assign token'>=</span> <span class='new_record? fid id'>new_record?</span> <span class='integer val'>? </span><span class='create identifier id'>create</span> <span class='colon op'>:</span> <span class='update identifier id'>update</span>

  <span class='if if kw'>if</span> <span class='saved identifier id'>saved</span>
    <span class='original_values identifier id'>original_values</span><span class='dot token'>.</span><span class='clear identifier id'>clear</span>
  <span class='end end kw'>end</span>

  <span class='parent_associations identifier id'>parent_associations</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='associations_saved identifier id'>associations_saved</span> <span class='opasgn op'>|=</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='save identifier id'>save</span> <span class='rbrace token'>}</span>

  <span class='comment val'># We should return true if the model (or any of its associations)</span>
  <span class='comment val'># were saved.</span>
  <span class='lparen token'>(</span><span class='saved identifier id'>saved</span> <span class='bitor op'>|</span> <span class='associations_saved identifier id'>associations_saved</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_query</h3>
</div><div id="to_query-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_query</span><span class='args'>(query = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
TODO: add docs
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


542
543
544</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 542</span>

<span class='def def kw'>def</span> <span class='to_query identifier id'>to_query</span><span class='lparen token'>(</span><span class='query identifier id'>query</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span><span class='dot token'>.</span><span class='to_query identifier id'>to_query</span><span class='lparen token'>(</span><span class='repository identifier id'>repository</span><span class='comma token'>,</span> <span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='query identifier id'>query</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='new_record? fid id'>new_record?</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>update_attributes</h3>
</div><div id="update_attributes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>update_attributes</span><span class='args'>(hash, *update_only)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Updates attributes and saves model
</p>
<h4>Parameters</h4>
<p>
attributes&lt;Hash&gt; Attributes to be updated keys&lt;Symbol, String,
Array&gt; keys of Hash to update (others won&#8217;t be updated)
</p>
<h4>Returns</h4>
<p>
&lt;TrueClass, FalseClass&gt; if model got saved or not
</p>
<p>
-
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


531
532
533
534
535
536
537
538
539</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/dm-core/resource.rb', line 531</span>

<span class='def def kw'>def</span> <span class='update_attributes identifier id'>update_attributes</span><span class='lparen token'>(</span><span class='hash identifier id'>hash</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='update_only identifier id'>update_only</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='hash identifier id'>hash</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;Expecting the first parameter of &quot;</span> <span class='plus op'>+</span>
      <span class='dstring node'>&quot;update_attributes to be a hash; got #{hash.inspect}&quot;</span>
  <span class='end end kw'>end</span>
  <span class='loop_thru identifier id'>loop_thru</span> <span class='assign token'>=</span> <span class='update_only identifier id'>update_only</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span> <span class='integer val'>? </span><span class='hash identifier id'>hash</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span> <span class='colon op'>:</span> <span class='update_only identifier id'>update_only</span>
  <span class='loop_thru identifier id'>loop_thru</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='attr identifier id'>attr</span><span class='bitor op'>|</span>  <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{attr}=&quot;</span><span class='comma token'>,</span> <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='attr identifier id'>attr</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='save identifier id'>save</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>