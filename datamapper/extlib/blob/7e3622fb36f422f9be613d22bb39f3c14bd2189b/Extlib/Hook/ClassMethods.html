<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>datamapper's extlib - Module: Extlib::Hook::ClassMethods - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/datamapper/commits/extlib/master" rel="alternate" title="Recent Commits to extlib:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("datamapper", "extlib", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("datamapper", "extlib", "7e3622fb36f422f9be613d22bb39f3c14bd2189b", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/datamapper/extlib/tree/">Source</a></li>
            <li class=""><a href="http://github.com/datamapper/extlib/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/datamapper/extlib/network">Network</a></li>            
            <li class=""><a href="http://github.com/datamapper/extlib/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/datamapper/extlib">Wiki</a></li>
            <li class=""><a href="http://github.com/datamapper/extlib/graphs">Graphs</a></li>                    
            <li class="active"><a href="/datamapper/extlib">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/datamapper">datamapper</a> / <b><a href="http://github.com/datamapper/extlib/tree">extlib</a></b>        
                <a id="namespaces_button" rel="datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Extlib_Hook_ClassMethods">
  <h1>Module: Extlib::Hook::ClassMethods</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="../Assertions.html" title="Extlib::Assertions">Extlib::Assertions</a></p>
</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after-instance_method">#after</span><span class='args'>(target_method, method_sym = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Inject code that executes after the target instance method.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_class_method-instance_method">#after_class_method</span><span class='args'>(target_method, method_sym = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Inject code that executes after the target class method.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#args_for-instance_method">#args_for</span><span class='args'>(method)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
&#8212; Helpers --.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before-instance_method">#before</span><span class='args'>(target_method, method_sym = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Inject code that executes before the target instance method.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_class_method-instance_method">#before_class_method</span><span class='args'>(target_method, method_sym = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Inject code that executes before the target class method.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#class_hooks-instance_method">#class_hooks</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#define_advised_method-instance_method">#define_advised_method</span><span class='args'>(target_method, scope)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#define_hook_stack_execution_methods-instance_method">#define_hook_stack_execution_methods</span><span class='args'>(target_method, scope)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Defines two methods.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#hook_method_name-instance_method">#hook_method_name</span><span class='args'>(target_method, prefix, suffix)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Generates names for the various utility methods.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#hooks_with_scope-instance_method">#hooks_with_scope</span><span class='args'>(scope)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
&#8212; Alright kids.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#inline_call-instance_method">#inline_call</span><span class='args'>(method_info, scope)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns ruby code that will invoke the hook.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#install_hook-instance_method">#install_hook</span><span class='args'>(type, target_method, method_sym, scope, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
&#8212; Add a hook --.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#instance_hooks-instance_method">#instance_hooks</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#method_with_scope-instance_method">#method_with_scope</span><span class='args'>(name, scope)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#process_method_added-instance_method">#process_method_added</span><span class='args'>(method_name, scope)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
This will need to be refactored.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#quote_method-instance_method">#quote_method</span><span class='args'>(name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#register_class_hooks-instance_method">#register_class_hooks</span><span class='args'>(*hooks)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Register a class method as hookable.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#register_hook-instance_method">#register_hook</span><span class='args'>(target_method, scope)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Registers a method as hookable.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#register_instance_hooks-instance_method">#register_instance_hooks</span><span class='args'>(*hooks)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Register aninstance method as hookable.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#registered_as_hook-3F-instance_method">#registered_as_hook?</span><span class='args'>(target_method, scope)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Is the method registered as a hookable in the given scope.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#reset_hook-21-instance_method">#reset_hook!</span><span class='args'>(target_method, scope)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Not yet implemented.
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="../Assertions.html" title="Extlib::Assertions">Extlib::Assertions</a></h2>
    <p><span class='name'><a href="../Assertions.html#assert_kind_of-instance_method" title="assert_kind_of">assert_kind_of</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>after</h3>
</div><div id="after-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after</span><span class='args'>(target_method, method_sym = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Inject code that executes after the target instance method.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a href="../../Symbol.html" title="Symbol">Symbol</a></tt>]</span>
        <span class='name'>target_method</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name of the instance method to inject after
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt><a href="../../Symbol.html" title="Symbol">Symbol</a></tt>]</span>
        <span class='name'>method_sym</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name of the method to run after the target_method
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>Block</tt>]</span>
        <span class='name'>block</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the code to run after the target_method
</p>
</span>
      </dd>
    
  
  </dl>
</div>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 102</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L102">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">102
103
104</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after identifier id'>after</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='method_sym identifier id'>method_sym</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='install_hook identifier id'>install_hook</span> <span class='symbol val'>:after</span><span class='comma token'>,</span> <span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='method_sym identifier id'>method_sym</span><span class='comma token'>,</span> <span class='symbol val'>:instance</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_class_method</h3>
</div><div id="after_class_method-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_class_method</span><span class='args'>(target_method, method_sym = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Inject code that executes after the target class method.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a href="../../Symbol.html" title="Symbol">Symbol</a></tt>]</span>
        <span class='name'>target_method</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name of the class method to inject after
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt><a href="../../Symbol.html" title="Symbol">Symbol</a></tt>]</span>
        <span class='name'>method_sym</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name of the method to run after the target_method
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>Block</tt>]</span>
        <span class='name'>block</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the code to run after the target_method
</p>
</span>
      </dd>
    
  
  </dl>
</div>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 70</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L70">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">70
71
72</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after_class_method identifier id'>after_class_method</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='method_sym identifier id'>method_sym</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='install_hook identifier id'>install_hook</span> <span class='symbol val'>:after</span><span class='comma token'>,</span> <span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='method_sym identifier id'>method_sym</span><span class='comma token'>,</span> <span class='symbol val'>:class</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>args_for</h3>
</div><div id="args_for-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>args_for</span><span class='args'>(method)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
&#8212; Helpers &#8212;
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 378</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L378">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">378
379
380
381
382
383
384
385
386
387
388</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='args_for identifier id'>args_for</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
    <span class='string val'>&quot;&amp;block&quot;</span>
  <span class='elsif elsif kw'>elsif</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
    <span class='string val'>&quot;_&quot;</span> <span class='lshft op'>&lt;&lt;</span> <span class='lparen token'>(</span><span class='integer val'>1</span> <span class='dot2 op'>..</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, _&quot;</span><span class='rparen token'>)</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;, &amp;block&quot;</span>
  <span class='elsif elsif kw'>elsif</span> <span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span>
    <span class='string val'>&quot;_&quot;</span> <span class='lshft op'>&lt;&lt;</span> <span class='lparen token'>(</span><span class='integer val'>1</span> <span class='dot2 op'>..</span> <span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='abs identifier id'>abs</span> <span class='minus op'>-</span> <span class='integer val'>1</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, _&quot;</span><span class='rparen token'>)</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;, *args, &amp;block&quot;</span>
  <span class='else else kw'>else</span>
    <span class='string val'>&quot;*args, &amp;block&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before</h3>
</div><div id="before-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before</span><span class='args'>(target_method, method_sym = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Inject code that executes before the target instance method.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a href="../../Symbol.html" title="Symbol">Symbol</a></tt>]</span>
        <span class='name'>target_method</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name of the instance method to inject before
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt><a href="../../Symbol.html" title="Symbol">Symbol</a></tt>]</span>
        <span class='name'>method_sym</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name of the method to run before the target_method
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>Block</tt>]</span>
        <span class='name'>block</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the code to run before the target_method
</p>
</span>
      </dd>
    
  
  </dl>
</div>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 86</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L86">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">86
87
88</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before identifier id'>before</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='method_sym identifier id'>method_sym</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='install_hook identifier id'>install_hook</span> <span class='symbol val'>:before</span><span class='comma token'>,</span> <span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='method_sym identifier id'>method_sym</span><span class='comma token'>,</span> <span class='symbol val'>:instance</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_class_method</h3>
</div><div id="before_class_method-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_class_method</span><span class='args'>(target_method, method_sym = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Inject code that executes before the target class method.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
    
      <dt>
        <span class='type'>[<tt><a href="../../Symbol.html" title="Symbol">Symbol</a></tt>]</span>
        <span class='name'>target_method</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name of the class method to inject before
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt><a href="../../Symbol.html" title="Symbol">Symbol</a></tt>]</span>
        <span class='name'>method_sym</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the name of the method to run before the target_method
</p>
</span>
      </dd>
    
  
    
      <dt>
        <span class='type'>[<tt>Block</tt>]</span>
        <span class='name'>block</span>
        
      </dt>
      <dd>
        <span class='desc'><p>
the code to run before the target_method
</p>
</span>
      </dd>
    
  
  </dl>
</div>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 55</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L55">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">55
56
57</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before_class_method identifier id'>before_class_method</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='method_sym identifier id'>method_sym</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='install_hook identifier id'>install_hook</span> <span class='symbol val'>:before</span><span class='comma token'>,</span> <span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='method_sym identifier id'>method_sym</span><span class='comma token'>,</span> <span class='symbol val'>:class</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>class_hooks</h3>
</div><div id="class_hooks-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>class_hooks</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 147</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L147">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">147
148
149</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='class_hooks identifier id'>class_hooks</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='const_get identifier id'>const_get</span><span class='lparen token'>(</span><span class='string val'>&quot;CLASS_HOOKS&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>define_advised_method</h3>
</div><div id="define_advised_method-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>define_advised_method</span><span class='args'>(target_method, scope)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 275</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L275">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='define_advised_method identifier id'>define_advised_method</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='args identifier id'>args</span> <span class='assign token'>=</span> <span class='args_for identifier id'>args_for</span><span class='lparen token'>(</span><span class='method_with_scope identifier id'>method_with_scope</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

  <span class='renamed_target identifier id'>renamed_target</span> <span class='assign token'>=</span> <span class='hook_method_name identifier id'>hook_method_name</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='string val'>'hookable_'</span><span class='comma token'>,</span> <span class='string val'>'before_advised'</span><span class='rparen token'>)</span>

  <span class='source identifier id'>source</span> <span class='assign token'>=</span> <span class='string val'>&quot;def \#{target_method}(\#{args})\nretval = nil\ncatch(:halt) do\n\#{hook_method_name(target_method, 'execute_before', 'hook_stack')}(\#{args})\nretval = \#{renamed_target}(\#{args})\n\#{hook_method_name(target_method, 'execute_after', 'hook_stack')}(retval, \#{args})\nretval\nend\nend\n&quot;</span>

  <span class='if if kw'>if</span> <span class='scope identifier id'>scope</span> <span class='eq op'>==</span> <span class='symbol val'>:instance</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='instance_methods identifier id'>instance_methods</span><span class='lparen token'>(</span><span class='false false kw'>false</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='m identifier id'>m</span><span class='bitor op'>|</span> <span class='m identifier id'>m</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span> <span class='eq op'>==</span> <span class='target_method identifier id'>target_method</span> <span class='rbrace token'>}</span>
    <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:alias_method</span><span class='comma token'>,</span> <span class='renamed_target identifier id'>renamed_target</span><span class='comma token'>,</span> <span class='target_method identifier id'>target_method</span><span class='rparen token'>)</span>

    <span class='proxy_module identifier id'>proxy_module</span> <span class='assign token'>=</span> <span class='Module constant id'>Module</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
    <span class='proxy_module identifier id'>proxy_module</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='source identifier id'>source</span><span class='comma token'>,</span> <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span><span class='rparen token'>)</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:include</span><span class='comma token'>,</span> <span class='proxy_module identifier id'>proxy_module</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='source identifier id'>source</span> <span class='assign token'>=</span> <span class='dstring node'>%{alias_method :#{renamed_target}, :#{target_method}\n#{source}}</span>
    <span class='source identifier id'>source</span> <span class='assign token'>=</span> <span class='dstring node'>%{class &lt;&lt; self\n#{source}\nend}</span> <span class='if if_mod kw'>if</span> <span class='scope identifier id'>scope</span> <span class='eq op'>==</span> <span class='symbol val'>:class</span>
    <span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='source identifier id'>source</span><span class='comma token'>,</span> <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>define_hook_stack_execution_methods</h3>
</div><div id="define_hook_stack_execution_methods-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>define_hook_stack_execution_methods</span><span class='args'>(target_method, scope)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Defines two methods. One method executes the before hook stack. The other
executes the after hook stack. This method will be called many times during
the Class definition process. It should be called for each hook that is
defined. It will also be called when a hook is redefined (to make sure that
the arity hasn&#8217;t changed).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 225</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L225">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='define_hook_stack_execution_methods identifier id'>define_hook_stack_execution_methods</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='registered_as_hook? fid id'>registered_as_hook?</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{target_method} has not be registered as a hookable #{scope} method&quot;</span>
  <span class='end end kw'>end</span>

  <span class='hooks identifier id'>hooks</span> <span class='assign token'>=</span> <span class='hooks_with_scope identifier id'>hooks_with_scope</span><span class='lparen token'>(</span><span class='scope identifier id'>scope</span><span class='rparen token'>)</span>

  <span class='before_hooks identifier id'>before_hooks</span> <span class='assign token'>=</span> <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:before</span><span class='rbrack token'>]</span>
  <span class='before_hooks identifier id'>before_hooks</span> <span class='assign token'>=</span> <span class='before_hooks identifier id'>before_hooks</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='info identifier id'>info</span><span class='bitor op'>|</span> <span class='inline_call identifier id'>inline_call</span><span class='lparen token'>(</span><span class='info identifier id'>info</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span>

  <span class='after_hooks identifier id'>after_hooks</span>  <span class='assign token'>=</span> <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:after</span><span class='rbrack token'>]</span>
  <span class='after_hooks identifier id'>after_hooks</span>  <span class='assign token'>=</span> <span class='after_hooks identifier id'>after_hooks</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='info identifier id'>info</span><span class='bitor op'>|</span> <span class='inline_call identifier id'>inline_call</span><span class='lparen token'>(</span><span class='info identifier id'>info</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span>

  <span class='before_hook_name identifier id'>before_hook_name</span> <span class='assign token'>=</span> <span class='hook_method_name identifier id'>hook_method_name</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='string val'>'execute_before'</span><span class='comma token'>,</span> <span class='string val'>'hook_stack'</span><span class='rparen token'>)</span>
  <span class='after_hook_name identifier id'>after_hook_name</span>  <span class='assign token'>=</span> <span class='hook_method_name identifier id'>hook_method_name</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='string val'>'execute_after'</span><span class='comma token'>,</span>  <span class='string val'>'hook_stack'</span><span class='rparen token'>)</span>

  <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span> <span class='string val'>&quot;\#{scope == :class ? 'class &lt;&lt; self' : ''}\n\nprivate\n\nremove_method :\#{before_hook_name} if instance_methods(false).any? { |m| m.to_sym == :\#{before_hook_name} }\ndef \#{before_hook_name}(*args)\n\#{before_hooks}\nend\n\nremove_method :\#{after_hook_name} if instance_methods(false).any? { |m| m.to_sym == :\#{after_hook_name} }\ndef \#{after_hook_name}(*args)\n\#{after_hooks}\nend\n\n\#{scope == :class ? 'end' : ''}\n&quot;</span><span class='comma token'>,</span> <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>hook_method_name</h3>
</div><div id="hook_method_name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>hook_method_name</span><span class='args'>(target_method, prefix, suffix)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Generates names for the various utility methods. We need to do this because
the various utility methods should not end in = so, while we&#8217;re at
it, we might as well get rid of all punctuation.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 195</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L195">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">195
196
197
198
199
200
201
202
203
204
205
206</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='hook_method_name identifier id'>hook_method_name</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='prefix identifier id'>prefix</span><span class='comma token'>,</span> <span class='suffix identifier id'>suffix</span><span class='rparen token'>)</span>
  <span class='target_method identifier id'>target_method</span> <span class='assign token'>=</span> <span class='target_method identifier id'>target_method</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>

  <span class='case case kw'>case</span> <span class='target_method identifier id'>target_method</span><span class='lbrack token'>[</span><span class='integer val'>-1</span><span class='comma token'>,</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
    <span class='when when kw'>when</span> <span class='string val'>'?'</span> <span class='then then kw'>then</span> <span class='dstring node'>&quot;#{prefix}_#{target_method[0..-2]}_ques_#{suffix}&quot;</span>
    <span class='when when kw'>when</span> <span class='string val'>'!'</span> <span class='then then kw'>then</span> <span class='dstring node'>&quot;#{prefix}_#{target_method[0..-2]}_bang_#{suffix}&quot;</span>
    <span class='when when kw'>when</span> <span class='string val'>'='</span> <span class='then then kw'>then</span> <span class='dstring node'>&quot;#{prefix}_#{target_method[0..-2]}_eq_#{suffix}&quot;</span>
    <span class='comment val'># I add a _nan_ suffix here so that we don't ever encounter</span>
    <span class='comment val'># any naming conflicts.</span>
    <span class='else else kw'>else</span> <span class='dstring node'>&quot;#{prefix}_#{target_method[0..-1]}_nan_#{suffix}&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>hooks_with_scope</h3>
</div><div id="hooks_with_scope-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>hooks_with_scope</span><span class='args'>(scope)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
&#8212; Alright kids&#8230; the rest is internal stuff &#8212; Returns the
correct HOOKS Hash depending on whether we are working with class methods
or instance methods
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 139</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L139">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">139
140
141
142
143
144
145</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='hooks_with_scope identifier id'>hooks_with_scope</span><span class='lparen token'>(</span><span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='scope identifier id'>scope</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:class</span>    <span class='then then kw'>then</span> <span class='class_hooks identifier id'>class_hooks</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:instance</span> <span class='then then kw'>then</span> <span class='instance_hooks identifier id'>instance_hooks</span>
    <span class='else else kw'>else</span> <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>'You need to pass :class or :instance as scope'</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>inline_call</h3>
</div><div id="inline_call-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>inline_call</span><span class='args'>(method_info, scope)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns ruby code that will invoke the hook. It checks the arity of the
hook method and passes arguments accordingly.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 263</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L263">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">263
264
265
266
267
268
269
270
271
272
273</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='inline_call identifier id'>inline_call</span><span class='lparen token'>(</span><span class='method_info identifier id'>method_info</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='method_info identifier id'>method_info</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span>

  <span class='if if kw'>if</span> <span class='scope identifier id'>scope</span> <span class='eq op'>==</span> <span class='symbol val'>:instance</span>
    <span class='args identifier id'>args</span> <span class='assign token'>=</span> <span class='method_defined? fid id'>method_defined?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='instance_method identifier id'>instance_method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='question op'>?</span> <span class='string val'>'*args'</span> <span class='colon op'>:</span> <span class='string val'>''</span>
    <span class='dstring node'>%(#{name}(#{args}) if self.class &lt;= ObjectSpace._id2ref(#{method_info[:from].object_id}))</span>
  <span class='else else kw'>else</span>
    <span class='args identifier id'>args</span> <span class='assign token'>=</span> <span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='method identifier id'>method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span> <span class='neq op'>!=</span> <span class='integer val'>0</span> <span class='question op'>?</span> <span class='string val'>'*args'</span> <span class='colon op'>:</span> <span class='string val'>''</span>
    <span class='dstring node'>%(#{name}(#{args}) if self &lt;= ObjectSpace._id2ref(#{method_info[:from].object_id}))</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>install_hook</h3>
</div><div id="install_hook-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>install_hook</span><span class='args'>(type, target_method, method_sym, scope, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
&#8212; Add a hook &#8212;
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 308</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L308">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='install_hook identifier id'>install_hook</span><span class='lparen token'>(</span><span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='method_sym identifier id'>method_sym</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='assert_kind_of identifier id'>assert_kind_of</span> <span class='string val'>'target_method'</span><span class='comma token'>,</span> <span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='Symbol constant id'>Symbol</span>
    <span class='assert_kind_of identifier id'>assert_kind_of</span> <span class='string val'>'method_sym'</span><span class='comma token'>,</span>    <span class='method_sym identifier id'>method_sym</span><span class='comma token'>,</span>    <span class='Symbol constant id'>Symbol</span> <span class='unless unless_mod kw'>unless</span> <span class='method_sym identifier id'>method_sym</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='assert_kind_of identifier id'>assert_kind_of</span> <span class='string val'>'scope'</span><span class='comma token'>,</span>         <span class='scope identifier id'>scope</span><span class='comma token'>,</span>         <span class='Symbol constant id'>Symbol</span>

    <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='block_given? fid id'>block_given?</span> <span class='and and kw'>and</span> <span class='method_sym identifier id'>method_sym</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
      <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;You need to pass 2 arguments to \&quot;#{type}\&quot;.&quot;</span>
    <span class='end end kw'>end</span>

    <span class='if if kw'>if</span> <span class='method_sym identifier id'>method_sym</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='lbrack token'>[</span><span class='integer val'>-1</span><span class='comma token'>,</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>'='</span>
      <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;Methods ending in = cannot be hooks&quot;</span>
    <span class='end end kw'>end</span>

    <span class='unless unless kw'>unless</span> <span class='lbrack token'>[</span> <span class='symbol val'>:class</span><span class='comma token'>,</span> <span class='symbol val'>:instance</span> <span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
      <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>'You need to pass :class or :instance as scope'</span>
    <span class='end end kw'>end</span>

    <span class='if if kw'>if</span> <span class='registered_as_hook? fid id'>registered_as_hook?</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
      <span class='hooks identifier id'>hooks</span> <span class='assign token'>=</span> <span class='hooks_with_scope identifier id'>hooks_with_scope</span><span class='lparen token'>(</span><span class='scope identifier id'>scope</span><span class='rparen token'>)</span>

      <span class='comment val'>#if this hook is previously declared in a sibling or cousin we must move the :in class</span>
      <span class='comment val'>#to the common ancestor to get both hooks to run.</span>
      <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='lparen token'>(</span><span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span> <span class='cmp op'>&lt;=&gt;</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
        <span class='before_hook_name identifier id'>before_hook_name</span> <span class='assign token'>=</span> <span class='hook_method_name identifier id'>hook_method_name</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='string val'>'execute_before'</span><span class='comma token'>,</span> <span class='string val'>'hook_stack'</span><span class='rparen token'>)</span>
        <span class='after_hook_name identifier id'>after_hook_name</span>  <span class='assign token'>=</span> <span class='hook_method_name identifier id'>hook_method_name</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='string val'>'execute_after'</span><span class='comma token'>,</span>  <span class='string val'>'hook_stack'</span><span class='rparen token'>)</span>

        <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span> <span class='string val'>&quot;remove_method :\#{before_hook_name} if instance_methods(false).any? { |m| m.to_sym == :\#{before_hook_name} }\ndef \#{before_hook_name}(*args)\nsuper\nend\n\nremove_method :\#{after_hook_name} if instance_methods(false).any? { |m| m.to_sym == :\#{before_hook_name} }\ndef \#{after_hook_name}(*args)\nsuper\nend\n&quot;</span><span class='comma token'>,</span> <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span> <span class='plus op'>+</span> <span class='integer val'>1</span>

        <span class='while while kw'>while</span> <span class='notop op'>!</span><span class='lparen token'>(</span><span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span> <span class='cmp op'>&lt;=&gt;</span> <span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
          <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='superclass identifier id'>superclass</span>
        <span class='end end kw'>end</span>

        <span class='define_hook_stack_execution_methods identifier id'>define_hook_stack_execution_methods</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
        <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:in</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lbrace token'>{</span><span class='define_advised_method identifier id'>define_advised_method</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='register_hook identifier id'>register_hook</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
      <span class='hooks identifier id'>hooks</span> <span class='assign token'>=</span> <span class='hooks_with_scope identifier id'>hooks_with_scope</span><span class='lparen token'>(</span><span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='comment val'>#if  we were passed a block, create a method out of it.</span>
    <span class='if if kw'>if</span> <span class='block identifier id'>block</span>
      <span class='method_sym identifier id'>method_sym</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;__hooks_#{type}_#{quote_method(target_method)}_#{hooks[target_method][type].length}&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
      <span class='if if kw'>if</span> <span class='scope identifier id'>scope</span> <span class='eq op'>==</span> <span class='symbol val'>:class</span>
        <span class='meta_class identifier id'>meta_class</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span> <span class='do do kw'>do</span>
          <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='method_sym identifier id'>method_sym</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
      <span class='else else kw'>else</span>
        <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='method_sym identifier id'>method_sym</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Adds method to the stack an redefines the hook invocation method</span>
    <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='type identifier id'>type</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='lbrace token'>{</span> <span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='method_sym identifier id'>method_sym</span><span class='comma token'>,</span> <span class='symbol val'>:from</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='self self kw'>self</span> <span class='rbrace token'>}</span>
    <span class='define_hook_stack_execution_methods identifier id'>define_hook_stack_execution_methods</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># --- Helpers ---</span>

  <span class='def def kw'>def</span> <span class='args_for identifier id'>args_for</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
      <span class='string val'>&quot;&amp;block&quot;</span>
    <span class='elsif elsif kw'>elsif</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
      <span class='string val'>&quot;_&quot;</span> <span class='lshft op'>&lt;&lt;</span> <span class='lparen token'>(</span><span class='integer val'>1</span> <span class='dot2 op'>..</span> <span class='method identifier id'>method</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, _&quot;</span><span class='rparen token'>)</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;, &amp;block&quot;</span>
    <span class='elsif elsif kw'>elsif</span> <span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span>
      <span class='string val'>&quot;_&quot;</span> <span class='lshft op'>&lt;&lt;</span> <span class='lparen token'>(</span><span class='integer val'>1</span> <span class='dot2 op'>..</span> <span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='abs identifier id'>abs</span> <span class='minus op'>-</span> <span class='integer val'>1</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;, _&quot;</span><span class='rparen token'>)</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;, *args, &amp;block&quot;</span>
    <span class='else else kw'>else</span>
      <span class='string val'>&quot;*args, &amp;block&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='method_with_scope identifier id'>method_with_scope</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
    <span class='case case kw'>case</span> <span class='scope identifier id'>scope</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:class</span>    <span class='then then kw'>then</span> <span class='method identifier id'>method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:instance</span> <span class='then then kw'>then</span> <span class='instance_method identifier id'>instance_method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span> <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>'You need to pass :class or :instance as scope'</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='def def kw'>def</span> <span class='quote_method identifier id'>quote_method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\?$/</span><span class='comma token'>,</span> <span class='string val'>'_q_'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/!$/</span><span class='comma token'>,</span> <span class='string val'>'_b_'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/=$/</span><span class='comma token'>,</span> <span class='string val'>'_eq_'</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>instance_hooks</h3>
</div><div id="instance_hooks-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>instance_hooks</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 151</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L151">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">151
152
153</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='instance_hooks identifier id'>instance_hooks</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='const_get identifier id'>const_get</span><span class='lparen token'>(</span><span class='string val'>&quot;INSTANCE_HOOKS&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>method_with_scope</h3>
</div><div id="method_with_scope-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>method_with_scope</span><span class='args'>(name, scope)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 390</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L390">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">390
391
392
393
394
395
396</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='method_with_scope identifier id'>method_with_scope</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='scope identifier id'>scope</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:class</span>    <span class='then then kw'>then</span> <span class='method identifier id'>method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:instance</span> <span class='then then kw'>then</span> <span class='instance_method identifier id'>instance_method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span> <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>'You need to pass :class or :instance as scope'</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>process_method_added</h3>
</div><div id="process_method_added-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>process_method_added</span><span class='args'>(method_name, scope)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
This will need to be refactored
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 209</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L209">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">209
210
211
212
213
214
215
216
217
218
219</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='process_method_added identifier id'>process_method_added</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='hooks_with_scope identifier id'>hooks_with_scope</span><span class='lparen token'>(</span><span class='scope identifier id'>scope</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='hooks identifier id'>hooks</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='symbol val'>:before</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='hook identifier id'>hook</span><span class='bitor op'>|</span> <span class='hook identifier id'>hook</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='method_name identifier id'>method_name</span> <span class='rbrace token'>}</span>
      <span class='define_hook_stack_execution_methods identifier id'>define_hook_stack_execution_methods</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='if if kw'>if</span> <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='symbol val'>:after</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='hook identifier id'>hook</span><span class='bitor op'>|</span> <span class='hook identifier id'>hook</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='method_name identifier id'>method_name</span> <span class='rbrace token'>}</span>
      <span class='define_hook_stack_execution_methods identifier id'>define_hook_stack_execution_methods</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>quote_method</h3>
</div><div id="quote_method-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>quote_method</span><span class='args'>(name)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 398</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L398">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">398
399
400</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='quote_method identifier id'>quote_method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\?$/</span><span class='comma token'>,</span> <span class='string val'>'_q_'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/!$/</span><span class='comma token'>,</span> <span class='string val'>'_b_'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/=$/</span><span class='comma token'>,</span> <span class='string val'>'_eq_'</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>register_class_hooks</h3>
</div><div id="register_class_hooks-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>register_class_hooks</span><span class='args'>(*hooks)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Register a class method as hookable. Registering a method means that before
hooks will be run immediately before the method is invoked and after hooks
will be called immediately after the method is invoked.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 114</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L114">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">114
115
116</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='register_class_hooks identifier id'>register_class_hooks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='hooks identifier id'>hooks</span><span class='rparen token'>)</span>
  <span class='hooks identifier id'>hooks</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='hook identifier id'>hook</span><span class='bitor op'>|</span> <span class='register_hook identifier id'>register_hook</span><span class='lparen token'>(</span><span class='hook identifier id'>hook</span><span class='comma token'>,</span> <span class='symbol val'>:class</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>register_hook</h3>
</div><div id="register_hook-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>register_hook</span><span class='args'>(target_method, scope)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Registers a method as hookable. Registering hooks involves the following
process
</p>
<ul>
<li>Create a blank entry in the HOOK Hash for the method.

</li>
<li>Define the methods that execute the before and after hook stack. These
methods will be no-ops at first, but everytime a new hook is defined, the
methods will be redefined to incorporate the new hook.

</li>
<li>Redefine the method that is to be hookable so that the hook stacks are
invoked approprietly.

</li>
</ul>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 164</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L164">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='register_hook identifier id'>register_hook</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='scope identifier id'>scope</span> <span class='eq op'>==</span> <span class='symbol val'>:instance</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='method_defined? fid id'>method_defined?</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='rparen token'>)</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{target_method} instance method does not exist&quot;</span>
  <span class='elsif elsif kw'>elsif</span> <span class='scope identifier id'>scope</span> <span class='eq op'>==</span> <span class='symbol val'>:class</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='rparen token'>)</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{target_method} class method does not exist&quot;</span>
  <span class='end end kw'>end</span>

  <span class='hooks identifier id'>hooks</span> <span class='assign token'>=</span> <span class='hooks_with_scope identifier id'>hooks_with_scope</span><span class='lparen token'>(</span><span class='scope identifier id'>scope</span><span class='rparen token'>)</span>

  <span class='if if kw'>if</span> <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
      <span class='comment val'># We need to keep track of which class in the Inheritance chain the</span>
      <span class='comment val'># method was declared hookable in. Every time a child declares a new</span>
      <span class='comment val'># hook for the method, the hook stack invocations need to be redefined</span>
      <span class='comment val'># in the original Class. See #define_hook_stack_execution_methods</span>
      <span class='symbol val'>:before</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:after</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:in</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='self self kw'>self</span>
    <span class='rbrace token'>}</span>

    <span class='define_hook_stack_execution_methods identifier id'>define_hook_stack_execution_methods</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
    <span class='define_advised_method identifier id'>define_advised_method</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>register_instance_hooks</h3>
</div><div id="register_instance_hooks-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>register_instance_hooks</span><span class='args'>(*hooks)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Register aninstance method as hookable. Registering a method means that
before hooks will be run immediately before the method is invoked and after
hooks will be called immediately after the method is invoked.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 126</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L126">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">126
127
128</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='register_instance_hooks identifier id'>register_instance_hooks</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='hooks identifier id'>hooks</span><span class='rparen token'>)</span>
  <span class='hooks identifier id'>hooks</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='hook identifier id'>hook</span><span class='bitor op'>|</span> <span class='register_hook identifier id'>register_hook</span><span class='lparen token'>(</span><span class='hook identifier id'>hook</span><span class='comma token'>,</span> <span class='symbol val'>:instance</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>registered_as_hook?</h3>
</div><div id="registered_as_hook-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>registered_as_hook?</span><span class='args'>(target_method, scope)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Is the method registered as a hookable in the given scope.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 188</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L188">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">188
189
190</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='registered_as_hook? fid id'>registered_as_hook?</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='notop op'>!</span> <span class='hooks_with_scope identifier id'>hooks_with_scope</span><span class='lparen token'>(</span><span class='scope identifier id'>scope</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='target_method identifier id'>target_method</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>reset_hook!</h3>
</div><div id="reset_hook-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>reset_hook!</span><span class='args'>(target_method, scope)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Not yet implemented
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt>NotImplementedError</tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/extlib/hook.rb', line 131</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/datamapper/extlib/blob/7e3622fb36f422f9be613d22bb39f3c14bd2189b/lib/extlib/hook.rb#L131">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">131
132
133</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='reset_hook! fid id'>reset_hook!</span><span class='lparen token'>(</span><span class='target_method identifier id'>target_method</span><span class='comma token'>,</span> <span class='scope identifier id'>scope</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='NotImplementedError constant id'>NotImplementedError</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>