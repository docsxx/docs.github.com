<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>mattetti's couchrest - Class: CouchRest::Callbacks::Callback - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/mattetti/commits/couchrest/master" rel="alternate" title="Recent Commits to couchrest:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("mattetti", "couchrest", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("mattetti", "couchrest", "51408990411411f3bf0826cdd0c042f9ccc0c7c7", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/mattetti/couchrest/tree/">Source</a></li>
            <li class=""><a href="http://github.com/mattetti/couchrest/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/mattetti/couchrest/network">Network</a></li>            
            <li class=""><a href="http://github.com/mattetti/couchrest/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/mattetti/couchrest">Wiki</a></li>
            <li class=""><a href="http://github.com/mattetti/couchrest/graphs">Graphs</a></li>                    
            <li class="active"><a href="/mattetti/couchrest">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/mattetti">mattetti</a> / <b><a href="http://github.com/mattetti/couchrest/tree">couchrest</a></b>        
                <a id="namespaces_button" rel="mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class CouchRest_Callbacks_Callback">
  <h1>Class: CouchRest::Callbacks::Callback</h1>
  <div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">filter</td>
          <td class="readwrite">
            [<span id='filter-instance_method'>R</span><span id='filter=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>filter</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">kind</td>
          <td class="readwrite">
            [<span id='kind-instance_method'>R</span><span id='kind=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>kind</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">klass</td>
          <td class="readwrite">
            [<span id='klass-instance_method'>R</span><span id='klass=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>klass</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">name</td>
          <td class="readwrite">
            [<span id='name-instance_method'>R</span><span id='name=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>name</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">options</td>
          <td class="readwrite">
            [<span id='options-instance_method'>R</span><span id='options=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>options</tt>.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">per_key</td>
          <td class="readwrite">
            [<span id='per_key-instance_method'>R</span><span id='per_key=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Sets the attribute <tt>per_key</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(filter, kind, options, klass, name)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couchrest/mixins/callbacks.rb', line 97</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7/lib/couchrest/mixins/callbacks.rb#L97">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">97
98
99
100
101
102
103
104
105
106
107
108
109
110</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='filter identifier id'>filter</span><span class='comma token'>,</span> <span class='kind identifier id'>kind</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='klass identifier id'>klass</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='@kind ivar id'>@kind</span><span class='comma token'>,</span> <span class='@klass ivar id'>@klass</span> <span class='assign token'>=</span> <span class='kind identifier id'>kind</span><span class='comma token'>,</span> <span class='klass identifier id'>klass</span>
  <span class='@name ivar id'>@name</span>         <span class='assign token'>=</span> <span class='name identifier id'>name</span>
  
  <span class='normalize_options! fid id'>normalize_options!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>

  <span class='@per_key ivar id'>@per_key</span>              <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:per_key</span><span class='rparen token'>)</span>
  <span class='@raw_filter ivar id'>@raw_filter</span><span class='comma token'>,</span> <span class='@options ivar id'>@options</span> <span class='assign token'>=</span> <span class='filter identifier id'>filter</span><span class='comma token'>,</span> <span class='options identifier id'>options</span>
  <span class='@filter ivar id'>@filter</span>               <span class='assign token'>=</span> <span class='_compile_filter identifier id'>_compile_filter</span><span class='lparen token'>(</span><span class='filter identifier id'>filter</span><span class='rparen token'>)</span>
  <span class='@compiled_options ivar id'>@compiled_options</span>     <span class='assign token'>=</span> <span class='_compile_options identifier id'>_compile_options</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='@callback_id ivar id'>@callback_id</span>          <span class='assign token'>=</span> <span class='next_id identifier id'>next_id</span>

  <span class='_compile_per_key_options identifier id'>_compile_per_key_options</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#_compile_per_key_options-instance_method">#_compile_per_key_options</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#_update_filter-instance_method">#_update_filter</span><span class='args'>(filter_options, new_options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#clone-instance_method">#clone</span><span class='args'>(klass)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#end-instance_method">#end</span><span class='args'>(key = nil, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
This will supply contents for around and after filters, but not before
filters (for the backward pass).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#matches-3F-instance_method">#matches?</span><span class='args'>(_kind, _name, _filter)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#next_id-instance_method">#next_id</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#normalize_options-21-instance_method">#normalize_options!</span><span class='args'>(options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#recompile-21-instance_method">#recompile!</span><span class='args'>(_options, _per_key)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#start-instance_method">#start</span><span class='args'>(key = nil, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
This will supply contents for before and around filters, and no contents
for after filters (for the forward pass).
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>_compile_per_key_options</h3>
</div><div id="_compile_per_key_options-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>_compile_per_key_options</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couchrest/mixins/callbacks.rb', line 158</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7/lib/couchrest/mixins/callbacks.rb#L158">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">158
159
160
161
162</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='_compile_per_key_options identifier id'>_compile_per_key_options</span>
  <span class='key_options identifier id'>key_options</span>  <span class='assign token'>=</span> <span class='_compile_options identifier id'>_compile_options</span><span class='lparen token'>(</span><span class='@per_key ivar id'>@per_key</span><span class='rparen token'>)</span>

  <span class='@klass ivar id'>@klass</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span> <span class='string val'>&quot;def _one_time_conditions_valid_\#{@callback_id}?\ntrue \#{key_options[0]}\nend\n&quot;</span><span class='comma token'>,</span> <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>_update_filter</h3>
</div><div id="_update_filter-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>_update_filter</span><span class='args'>(filter_options, new_options)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couchrest/mixins/callbacks.rb', line 143</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7/lib/couchrest/mixins/callbacks.rb#L143">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">143
144
145
146</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='_update_filter identifier id'>_update_filter</span><span class='lparen token'>(</span><span class='filter_options identifier id'>filter_options</span><span class='comma token'>,</span> <span class='new_options identifier id'>new_options</span><span class='rparen token'>)</span>
  <span class='filter_options identifier id'>filter_options</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='push identifier id'>push</span><span class='lparen token'>(</span><span class='new_options identifier id'>new_options</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='new_options identifier id'>new_options</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='symbol val'>:unless</span><span class='rparen token'>)</span>
  <span class='filter_options identifier id'>filter_options</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='push identifier id'>push</span><span class='lparen token'>(</span><span class='new_options identifier id'>new_options</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='new_options identifier id'>new_options</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='symbol val'>:if</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>clone</h3>
</div><div id="clone-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>clone</span><span class='args'>(klass)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couchrest/mixins/callbacks.rb', line 112</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7/lib/couchrest/mixins/callbacks.rb#L112">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">112
113
114
115
116
117
118
119
120
121
122</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='clone identifier id'>clone</span><span class='lparen token'>(</span><span class='klass identifier id'>klass</span><span class='rparen token'>)</span>
  <span class='obj identifier id'>obj</span>                  <span class='assign token'>=</span> <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='klass identifier id'>klass</span>            <span class='assign token'>=</span> <span class='klass identifier id'>klass</span>
  <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='per_key identifier id'>per_key</span>          <span class='assign token'>=</span> <span class='@per_key ivar id'>@per_key</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='options identifier id'>options</span>          <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='per_key identifier id'>per_key</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span>     <span class='assign token'>=</span> <span class='@per_key ivar id'>@per_key</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='per_key identifier id'>per_key</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='@per_key ivar id'>@per_key</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span>     <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='obj identifier id'>obj</span><span class='dot token'>.</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='obj identifier id'>obj</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>end</h3>
</div><div id="end-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>end</span><span class='args'>(key = nil, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
This will supply contents for around and after filters, but not before
filters (for the backward pass).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couchrest/mixins/callbacks.rb', line 231</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7/lib/couchrest/mixins/callbacks.rb#L231">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='end end kw'>end</span><span class='lparen token'>(</span><span class='key identifier id'>key</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='object identifier id'>object</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='symbol val'>:object</span><span class='rbrack token'>]</span>
  
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='key identifier id'>key</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='object identifier id'>object</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;_one_time_conditions_valid_#{@callback_id}?&quot;</span><span class='rparen token'>)</span>
  
  <span class='if if kw'>if</span> <span class='@kind ivar id'>@kind</span> <span class='eq op'>==</span> <span class='symbol val'>:around</span> <span class='orop op'>||</span> <span class='@kind ivar id'>@kind</span> <span class='eq op'>==</span> <span class='symbol val'>:after</span>
    <span class='comment val'># if condition    # after_save :filter_name, :if =&gt; :condition</span>
    <span class='comment val'>#   filter_name</span>
    <span class='comment val'># end</span>
    <span class='if if kw'>if</span> <span class='@kind ivar id'>@kind</span> <span class='eq op'>==</span> <span class='symbol val'>:after</span>
      <span class='lbrack token'>[</span><span class='@compiled_options ivar id'>@compiled_options</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='@filter ivar id'>@filter</span><span class='comma token'>,</span> <span class='@compiled_options ivar id'>@compiled_options</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='string val'>&quot;end&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>matches?</h3>
</div><div id="matches-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>matches?</span><span class='args'>(_kind, _name, _filter)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couchrest/mixins/callbacks.rb', line 137</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7/lib/couchrest/mixins/callbacks.rb#L137">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">137
138
139
140
141</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='matches? fid id'>matches?</span><span class='lparen token'>(</span><span class='_kind identifier id'>_kind</span><span class='comma token'>,</span> <span class='_name identifier id'>_name</span><span class='comma token'>,</span> <span class='_filter identifier id'>_filter</span><span class='rparen token'>)</span>
  <span class='@kind ivar id'>@kind</span>   <span class='eq op'>==</span> <span class='_kind identifier id'>_kind</span> <span class='andop op'>&amp;&amp;</span>
  <span class='@name ivar id'>@name</span>   <span class='eq op'>==</span> <span class='_name identifier id'>_name</span> <span class='andop op'>&amp;&amp;</span>
  <span class='@filter ivar id'>@filter</span> <span class='eq op'>==</span> <span class='_filter identifier id'>_filter</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>next_id</h3>
</div><div id="next_id-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>next_id</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couchrest/mixins/callbacks.rb', line 133</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7/lib/couchrest/mixins/callbacks.rb#L133">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">133
134
135</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='next_id identifier id'>next_id</span>
  <span class='@@_callback_sequence ivar id'>@@_callback_sequence</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>normalize_options!</h3>
</div><div id="normalize_options-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>normalize_options!</span><span class='args'>(options)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couchrest/mixins/callbacks.rb', line 124</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7/lib/couchrest/mixins/callbacks.rb#L124">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">124
125
126
127
128
129
130
131</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='normalize_options! fid id'>normalize_options!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Array constant id'>Array</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Array constant id'>Array</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>

  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:per_key</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:per_key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Array constant id'>Array</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:per_key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:if</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:per_key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Array constant id'>Array</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:per_key</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:unless</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>recompile!</h3>
</div><div id="recompile-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>recompile!</span><span class='args'>(_options, _per_key)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couchrest/mixins/callbacks.rb', line 148</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7/lib/couchrest/mixins/callbacks.rb#L148">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">148
149
150
151
152
153
154
155
156</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='recompile! fid id'>recompile!</span><span class='lparen token'>(</span><span class='_options identifier id'>_options</span><span class='comma token'>,</span> <span class='_per_key identifier id'>_per_key</span><span class='rparen token'>)</span>
  <span class='_update_filter identifier id'>_update_filter</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='_options identifier id'>_options</span><span class='rparen token'>)</span>
  <span class='_update_filter identifier id'>_update_filter</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='per_key identifier id'>per_key</span><span class='comma token'>,</span> <span class='_per_key identifier id'>_per_key</span><span class='rparen token'>)</span>
  
  <span class='@callback_id ivar id'>@callback_id</span>      <span class='assign token'>=</span> <span class='next_id identifier id'>next_id</span>
  <span class='@filter ivar id'>@filter</span>           <span class='assign token'>=</span> <span class='_compile_filter identifier id'>_compile_filter</span><span class='lparen token'>(</span><span class='@raw_filter ivar id'>@raw_filter</span><span class='rparen token'>)</span>
  <span class='@compiled_options ivar id'>@compiled_options</span> <span class='assign token'>=</span> <span class='_compile_options identifier id'>_compile_options</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='rparen token'>)</span>
                      <span class='_compile_per_key_options identifier id'>_compile_per_key_options</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>start</h3>
</div><div id="start-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>start</span><span class='args'>(key = nil, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
This will supply contents for before and around filters, and no contents
for after filters (for the forward pass).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/couchrest/mixins/callbacks.rb', line 171</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/couchrest/blob/51408990411411f3bf0826cdd0c042f9ccc0c7c7/lib/couchrest/mixins/callbacks.rb#L171">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='start identifier id'>start</span><span class='lparen token'>(</span><span class='key identifier id'>key</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='object identifier id'>object</span><span class='comma token'>,</span> <span class='terminator identifier id'>terminator</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='values_at identifier id'>values_at</span><span class='lparen token'>(</span><span class='symbol val'>:object</span><span class='comma token'>,</span> <span class='symbol val'>:terminator</span><span class='rparen token'>)</span>
  
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='key identifier id'>key</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='object identifier id'>object</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;_one_time_conditions_valid_#{@callback_id}?&quot;</span><span class='rparen token'>)</span>
  
  <span class='terminator identifier id'>terminator</span> <span class='opasgn op'>||=</span> <span class='false false kw'>false</span>
  
  <span class='comment val'># options[0] is the compiled form of supplied conditions</span>
  <span class='comment val'># options[1] is the &quot;end&quot; for the conditional</span>
          
  <span class='if if kw'>if</span> <span class='@kind ivar id'>@kind</span> <span class='eq op'>==</span> <span class='symbol val'>:before</span> <span class='orop op'>||</span> <span class='@kind ivar id'>@kind</span> <span class='eq op'>==</span> <span class='symbol val'>:around</span>
    <span class='if if kw'>if</span> <span class='@kind ivar id'>@kind</span> <span class='eq op'>==</span> <span class='symbol val'>:before</span>
      <span class='comment val'># if condition    # before_save :filter_name, :if =&gt; :condition</span>
      <span class='comment val'>#   filter_name</span>
      <span class='comment val'># end</span>
      <span class='filter identifier id'>filter</span> <span class='assign token'>=</span> <span class='string val'>&quot;unless halted\nresult = \#{@filter}\nhalted ||= (\#{terminator})\nend\n&quot;</span>
      <span class='lbrack token'>[</span><span class='@compiled_options ivar id'>@compiled_options</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='filter identifier id'>filter</span><span class='comma token'>,</span> <span class='@compiled_options ivar id'>@compiled_options</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='comment val'># Compile around filters with conditions into proxy methods</span>
      <span class='comment val'># that contain the conditions.</span>
      <span class='comment val'>#</span>
      <span class='comment val'># For `around_save :filter_name, :if =&gt; :condition':</span>
      <span class='comment val'>#</span>
      <span class='comment val'># def _conditional_callback_save_17</span>
      <span class='comment val'>#   if condition</span>
      <span class='comment val'>#     filter_name do</span>
      <span class='comment val'>#       yield self</span>
      <span class='comment val'>#     end</span>
      <span class='comment val'>#   else</span>
      <span class='comment val'>#     yield self</span>
      <span class='comment val'>#   end</span>
      <span class='comment val'># end</span>
      
      <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;_conditional_callback_#{@kind}_#{next_id}&quot;</span>
      <span class='txt identifier id'>txt</span> <span class='assign token'>=</span> <span class='string val'>&quot;def \#{name}(halted)\n\#{@compiled_options[0] || \&quot;if true\&quot;} &amp;&amp; !halted\n\#{@filter} do\nyield self\nend\nelse\nyield self\nend\nend\n&quot;</span>
      <span class='@klass ivar id'>@klass</span><span class='dot token'>.</span><span class='class_eval identifier id'>class_eval</span><span class='lparen token'>(</span><span class='txt identifier id'>txt</span><span class='rparen token'>)</span>
      <span class='dstring node'>&quot;#{name}(halted) do&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>