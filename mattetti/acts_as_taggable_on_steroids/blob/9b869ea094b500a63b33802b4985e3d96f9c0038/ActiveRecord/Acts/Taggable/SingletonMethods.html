<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>mattetti's acts_as_taggable_on_steroids - Module: ActiveRecord::Acts::Taggable::SingletonMethods - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/mattetti/commits/acts_as_taggable_on_steroids/master" rel="alternate" title="Recent Commits to acts_as_taggable_on_steroids:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../../../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("mattetti", "acts_as_taggable_on_steroids", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("mattetti", "acts_as_taggable_on_steroids", "9b869ea094b500a63b33802b4985e3d96f9c0038", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../../../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/mattetti/acts_as_taggable_on_steroids/tree/">Source</a></li>
            <li class=""><a href="http://github.com/mattetti/acts_as_taggable_on_steroids/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/mattetti/acts_as_taggable_on_steroids/network">Network</a></li>            
            <li class=""><a href="http://github.com/mattetti/acts_as_taggable_on_steroids/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/mattetti/acts_as_taggable_on_steroids">Wiki</a></li>
            <li class=""><a href="http://github.com/mattetti/acts_as_taggable_on_steroids/graphs">Graphs</a></li>                    
            <li class="active"><a href="/mattetti/acts_as_taggable_on_steroids">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/mattetti">mattetti</a> / <b><a href="http://github.com/mattetti/acts_as_taggable_on_steroids/tree">acts_as_taggable_on_steroids</a></b>        
                <a id="namespaces_button" rel="mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module ActiveRecord_Acts_Taggable_SingletonMethods">
  <h1>Module: ActiveRecord::Acts::Taggable::SingletonMethods</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#caching_tag_list-3F-instance_method">#caching_tag_list?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#count_by_tag-instance_method">#count_by_tag</span><span class='args'>(tag_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Find how many objects are tagged with a certain tag.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#find_all_tagged_with-instance_method">#find_all_tagged_with</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
will_paginate&#8217;s method_missing function wants to hit
find_all_tagged_with if you call paginate_tagged_with, which is obviously
suboptimal.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#find_options_for_find_tagged_with-instance_method">#find_options_for_find_tagged_with</span><span class='args'>(tags, options = )</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#find_options_for_tag_counts-instance_method">#find_options_for_tag_counts</span><span class='args'>(options = )</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#find_tagged_with-instance_method">#find_tagged_with</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Pass either a tag string, or an array of strings or tags.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#tag_counts-instance_method">#tag_counts</span><span class='args'>(options = )</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Calculate the tag counts for all tags.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>caching_tag_list?</h3>
</div><div id="caching_tag_list-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>caching_tag_list?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/acts_as_taggable.rb', line 148</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038/lib/acts_as_taggable.rb#L148">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">148
149
150</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='caching_tag_list? fid id'>caching_tag_list?</span>
  <span class='column_names identifier id'>column_names</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='cached_tag_list_column_name identifier id'>cached_tag_list_column_name</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>count_by_tag</h3>
</div><div id="count_by_tag-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>count_by_tag</span><span class='args'>(tag_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Find how many objects are tagged with a certain tag.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/acts_as_taggable.rb', line 106</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038/lib/acts_as_taggable.rb#L106">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">106
107
108
109</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='count_by_tag identifier id'>count_by_tag</span><span class='lparen token'>(</span><span class='tag_name identifier id'>tag_name</span><span class='rparen token'>)</span>
  <span class='counts identifier id'>counts</span> <span class='assign token'>=</span> <span class='tag_counts identifier id'>tag_counts</span><span class='lparen token'>(</span><span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>&quot;tags.name = #{quote_value(tag_name)}&quot;</span><span class='rparen token'>)</span>
  <span class='counts identifier id'>counts</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:count</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='counts identifier id'>counts</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='count identifier id'>count</span> <span class='colon op'>:</span> <span class='integer val'>0</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>find_all_tagged_with</h3>
</div><div id="find_all_tagged_with-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>find_all_tagged_with</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
will_paginate&#8217;s method_missing function wants to hit
find_all_tagged_with if you call paginate_tagged_with, which is obviously
suboptimal
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/acts_as_taggable.rb', line 46</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038/lib/acts_as_taggable.rb#L46">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">46
47
48</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='find_all_tagged_with identifier id'>find_all_tagged_with</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='find_tagged_with identifier id'>find_tagged_with</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>find_options_for_find_tagged_with</h3>
</div><div id="find_options_for_find_tagged_with-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>find_options_for_find_tagged_with</span><span class='args'>(tags, options = )</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/acts_as_taggable.rb', line 50</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038/lib/acts_as_taggable.rb#L50">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='find_options_for_find_tagged_with identifier id'>find_options_for_find_tagged_with</span><span class='lparen token'>(</span><span class='tags identifier id'>tags</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='semicolon token'>;</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='tags identifier id'>tags</span> <span class='assign token'>=</span> <span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='TagList constant id'>TagList</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:to_s</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='TagList constant id'>TagList</span><span class='dot token'>.</span><span class='from identifier id'>from</span><span class='lparen token'>(</span><span class='tags identifier id'>tags</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  
  <span class='return return kw'>return</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='if if_mod kw'>if</span> <span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  
  <span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='conditions identifier id'>conditions</span> <span class='lshft op'>&lt;&lt;</span> <span class='sanitize_sql identifier id'>sanitize_sql</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:conditions</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:conditions</span><span class='rbrack token'>]</span>
  
  <span class='taggings_alias identifier id'>taggings_alias</span><span class='comma token'>,</span> <span class='tags_alias identifier id'>tags_alias</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{table_name}_taggings&quot;</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{table_name}_tags&quot;</span>
  
  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='colon op'>:</span><span class='exclude identifier id'>exclude</span><span class='rparen token'>)</span>
    <span class='conditions identifier id'>conditions</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;\#{table_name}.id NOT IN\n(SELECT \#{Tagging.table_name}.taggable_id FROM \#{Tagging.table_name}\nINNER JOIN \#{Tag.table_name} ON \#{Tagging.table_name}.tag_id = \#{Tag.table_name}.id\nWHERE \#{tags_condition(tags)} AND \#{Tagging.table_name}.taggable_type = \#{quote_value(base_class.name)})\n&quot;</span>
  <span class='else else kw'>else</span>
    <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='colon op'>:</span><span class='match_all identifier id'>match_all</span><span class='rparen token'>)</span>
      <span class='conditions identifier id'>conditions</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;(SELECT COUNT(*) FROM \#{Tagging.table_name}\nINNER JOIN \#{Tag.table_name} ON \#{Tagging.table_name}.tag_id = \#{Tag.table_name}.id\nWHERE \#{Tagging.table_name}.taggable_type = \#{quote_value(base_class.name)} AND\ntaggable_id = \#{table_name}.id AND\n\#{tags_condition(tags)}) = \#{tags.size}\n&quot;</span>
    <span class='else else kw'>else</span>
      <span class='conditions identifier id'>conditions</span> <span class='lshft op'>&lt;&lt;</span> <span class='tags_condition identifier id'>tags_condition</span><span class='lparen token'>(</span><span class='tags identifier id'>tags</span><span class='comma token'>,</span> <span class='tags_alias identifier id'>tags_alias</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='lbrace token'>{</span> <span class='symbol val'>:select</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>&quot;DISTINCT #{table_name}.*&quot;</span><span class='comma token'>,</span>
    <span class='symbol val'>:joins</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>&quot;INNER JOIN #{Tagging.table_name} #{taggings_alias} ON #{taggings_alias}.taggable_id = #{table_name}.#{primary_key} AND #{taggings_alias}.taggable_type = #{quote_value(base_class.name)} &quot;</span> <span class='plus op'>+</span>
              <span class='dstring node'>&quot;INNER JOIN #{Tag.table_name} #{tags_alias} ON #{tags_alias}.id = #{taggings_alias}.tag_id&quot;</span><span class='comma token'>,</span>
    <span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='conditions identifier id'>conditions</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot; AND &quot;</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='reverse_merge! fid id'>reverse_merge!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>find_options_for_tag_counts</h3>
</div><div id="find_options_for_tag_counts-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>find_options_for_tag_counts</span><span class='args'>(options = )</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/acts_as_taggable.rb', line 111</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038/lib/acts_as_taggable.rb#L111">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='find_options_for_tag_counts identifier id'>find_options_for_tag_counts</span><span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='semicolon token'>;</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='assert_valid_keys identifier id'>assert_valid_keys</span> <span class='symbol val'>:start_at</span><span class='comma token'>,</span> <span class='symbol val'>:end_at</span><span class='comma token'>,</span> <span class='symbol val'>:conditions</span><span class='comma token'>,</span> <span class='symbol val'>:at_least</span><span class='comma token'>,</span> <span class='symbol val'>:at_most</span><span class='comma token'>,</span> <span class='symbol val'>:order</span><span class='comma token'>,</span> <span class='symbol val'>:limit</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  
  <span class='scope identifier id'>scope</span> <span class='assign token'>=</span> <span class='scope identifier id'>scope</span><span class='lparen token'>(</span><span class='symbol val'>:find</span><span class='rparen token'>)</span>
  <span class='start_at identifier id'>start_at</span> <span class='assign token'>=</span> <span class='sanitize_sql identifier id'>sanitize_sql</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='dstring node'>&quot;#{Tagging.table_name}.created_at &gt;= ?&quot;</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:start_at</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:start_at</span><span class='rbrack token'>]</span>
  <span class='end_at identifier id'>end_at</span> <span class='assign token'>=</span> <span class='sanitize_sql identifier id'>sanitize_sql</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='dstring node'>&quot;#{Tagging.table_name}.created_at &lt;= ?&quot;</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:end_at</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:end_at</span><span class='rbrack token'>]</span>
  
  <span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span>
    <span class='dstring node'>&quot;#{Tagging.table_name}.taggable_type = #{quote_value(base_class.name)}&quot;</span><span class='comma token'>,</span>
    <span class='sanitize_sql identifier id'>sanitize_sql</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:conditions</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='comma token'>,</span>
    <span class='scope identifier id'>scope</span> <span class='andop op'>&amp;&amp;</span> <span class='scope identifier id'>scope</span><span class='lbrack token'>[</span><span class='symbol val'>:conditions</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='start_at identifier id'>start_at</span><span class='comma token'>,</span>
    <span class='end_at identifier id'>end_at</span>
  <span class='rbrack token'>]</span>
  
  <span class='conditions identifier id'>conditions</span> <span class='lshft op'>&lt;&lt;</span> <span class='type_condition identifier id'>type_condition</span> <span class='unless unless_mod kw'>unless</span> <span class='descends_from_active_record? fid id'>descends_from_active_record?</span> 
  <span class='conditions identifier id'>conditions</span><span class='dot token'>.</span><span class='compact! fid id'>compact!</span>
  <span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='conditions identifier id'>conditions</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>' AND '</span><span class='rparen token'>)</span>
  
  <span class='joins identifier id'>joins</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='dstring node'>&quot;INNER JOIN #{Tagging.table_name} ON #{Tag.table_name}.id = #{Tagging.table_name}.tag_id&quot;</span><span class='rbrack token'>]</span>
  <span class='joins identifier id'>joins</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;INNER JOIN #{table_name} ON #{table_name}.#{primary_key} = #{Tagging.table_name}.taggable_id&quot;</span>
  <span class='joins identifier id'>joins</span> <span class='lshft op'>&lt;&lt;</span> <span class='scope identifier id'>scope</span><span class='lbrack token'>[</span><span class='symbol val'>:joins</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='scope identifier id'>scope</span> <span class='andop op'>&amp;&amp;</span> <span class='scope identifier id'>scope</span><span class='lbrack token'>[</span><span class='symbol val'>:joins</span><span class='rbrack token'>]</span>
  
  <span class='at_least identifier id'>at_least</span>  <span class='assign token'>=</span> <span class='sanitize_sql identifier id'>sanitize_sql</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='string val'>'COUNT(*) &gt;= ?'</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:at_least</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:at_least</span><span class='rbrack token'>]</span>
  <span class='at_most identifier id'>at_most</span>   <span class='assign token'>=</span> <span class='sanitize_sql identifier id'>sanitize_sql</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='string val'>'COUNT(*) &lt;= ?'</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:at_most</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:at_most</span><span class='rbrack token'>]</span>
  <span class='having identifier id'>having</span>    <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='at_least identifier id'>at_least</span><span class='comma token'>,</span> <span class='at_most identifier id'>at_most</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>' AND '</span><span class='rparen token'>)</span>
  <span class='group_by identifier id'>group_by</span>  <span class='assign token'>=</span> <span class='dstring node'>&quot;#{Tag.table_name}.id, #{Tag.table_name}.name HAVING COUNT(*) &gt; 0&quot;</span>
  <span class='group_by identifier id'>group_by</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot; AND #{having}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='having identifier id'>having</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
  
  <span class='lbrace token'>{</span> <span class='symbol val'>:select</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>&quot;#{Tag.table_name}.id, #{Tag.table_name}.name, COUNT(*) AS count&quot;</span><span class='comma token'>,</span> 
    <span class='symbol val'>:joins</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='joins identifier id'>joins</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span>
    <span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='conditions identifier id'>conditions</span><span class='comma token'>,</span>
    <span class='symbol val'>:group</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='group_by identifier id'>group_by</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='reverse_merge! fid id'>reverse_merge!</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>find_tagged_with</h3>
</div><div id="find_tagged_with-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>find_tagged_with</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Pass either a tag string, or an array of strings or tags
</p>
<p>
Options:
</p>
<pre class="code">
  <span class='symbol val'>:exclude</span> <span class='minus op'>-</span> <span class='Find constant id'>Find</span> <span class='models identifier id'>models</span> <span class='that identifier id'>that</span> <span class='are identifier id'>are</span> <span class='not not kw'>not</span> <span class='tagged identifier id'>tagged</span> <span class='with identifier id'>with</span> <span class='the identifier id'>the</span> <span class='given identifier id'>given</span> <span class='tags identifier id'>tags</span>
  <span class='symbol val'>:match_all</span> <span class='minus op'>-</span> <span class='Find constant id'>Find</span> <span class='models identifier id'>models</span> <span class='that identifier id'>that</span> <span class='match identifier id'>match</span> <span class='all identifier id'>all</span> <span class='of identifier id'>of</span> <span class='the identifier id'>the</span> <span class='given identifier id'>given</span> <span class='tags identifier id'>tags</span><span class='comma token'>,</span> <span class='not not kw'>not</span> <span class='just identifier id'>just</span> <span class='one identifier id'>one</span>
  <span class='symbol val'>:conditions</span> <span class='minus op'>-</span> <span class='A constant id'>A</span> <span class='piece identifier id'>piece</span> <span class='of identifier id'>of</span> <span class='SQL constant id'>SQL</span> <span class='conditions identifier id'>conditions</span> <span class='to identifier id'>to</span> <span class='add identifier id'>add</span> <span class='to identifier id'>to</span> <span class='the identifier id'>the</span> <span class='query identifier id'>query</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/acts_as_taggable.rb', line 38</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038/lib/acts_as_taggable.rb#L38">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">38
39
40
41</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='find_tagged_with identifier id'>find_tagged_with</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='find_options_for_find_tagged_with identifier id'>find_options_for_find_tagged_with</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span> <span class='integer val'>? </span><span class='lbrack token'>[</span><span class='rbrack token'>]</span> <span class='colon op'>:</span> <span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:all</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>tag_counts</h3>
</div><div id="tag_counts-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>tag_counts</span><span class='args'>(options = )</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Calculate the tag counts for all tags.
</p>
<p>
Options:
</p>
<pre class="code">
 <span class='symbol val'>:start_at</span> <span class='minus op'>-</span> <span class='Restrict constant id'>Restrict</span> <span class='the identifier id'>the</span> <span class='tags identifier id'>tags</span> <span class='to identifier id'>to</span> <span class='those identifier id'>those</span> <span class='created identifier id'>created</span> <span class='after identifier id'>after</span> <span class='a identifier id'>a</span> <span class='certain identifier id'>certain</span> <span class='time identifier id'>time</span>
 <span class='symbol val'>:end_at</span> <span class='minus op'>-</span> <span class='Restrict constant id'>Restrict</span> <span class='the identifier id'>the</span> <span class='tags identifier id'>tags</span> <span class='to identifier id'>to</span> <span class='those identifier id'>those</span> <span class='created identifier id'>created</span> <span class='before identifier id'>before</span> <span class='a identifier id'>a</span> <span class='certain identifier id'>certain</span> <span class='time identifier id'>time</span>
 <span class='symbol val'>:conditions</span> <span class='minus op'>-</span> <span class='A constant id'>A</span> <span class='piece identifier id'>piece</span> <span class='of identifier id'>of</span> <span class='SQL constant id'>SQL</span> <span class='conditions identifier id'>conditions</span> <span class='to identifier id'>to</span> <span class='add identifier id'>add</span> <span class='to identifier id'>to</span> <span class='the identifier id'>the</span> <span class='query identifier id'>query</span>
 <span class='symbol val'>:limit</span> <span class='minus op'>-</span> <span class='The constant id'>The</span> <span class='maximum identifier id'>maximum</span> <span class='number identifier id'>number</span> <span class='of identifier id'>of</span> <span class='tags identifier id'>tags</span> <span class='to identifier id'>to</span> <span class='return return kw'>return</span>
 <span class='symbol val'>:order</span> <span class='minus op'>-</span> <span class='A constant id'>A</span> <span class='piece identifier id'>piece</span> <span class='of identifier id'>of</span> <span class='SQL constant id'>SQL</span> <span class='to identifier id'>to</span> <span class='order identifier id'>order</span> <span class='by identifier id'>by</span><span class='dot token'>.</span> <span class='Eg constant id'>Eg</span> <span class='string val'>'tags.count desc'</span> <span class='or or kw'>or</span> <span class='string val'>'taggings.created_at desc'</span>
 <span class='symbol val'>:at_least</span> <span class='minus op'>-</span> <span class='Exclude constant id'>Exclude</span> <span class='tags identifier id'>tags</span> <span class='with identifier id'>with</span> <span class='a identifier id'>a</span> <span class='frequency identifier id'>frequency</span> <span class='less identifier id'>less</span> <span class='than identifier id'>than</span> <span class='the identifier id'>the</span> <span class='given identifier id'>given</span> <span class='value identifier id'>value</span>
 <span class='symbol val'>:at_most</span> <span class='minus op'>-</span> <span class='Exclude constant id'>Exclude</span> <span class='tags identifier id'>tags</span> <span class='with identifier id'>with</span> <span class='a identifier id'>a</span> <span class='frequency identifier id'>frequency</span> <span class='greater identifier id'>greater</span> <span class='than identifier id'>than</span> <span class='the identifier id'>the</span> <span class='given identifier id'>given</span> <span class='value identifier id'>value</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/acts_as_taggable.rb', line 101</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/mattetti/acts_as_taggable_on_steroids/blob/9b869ea094b500a63b33802b4985e3d96f9c0038/lib/acts_as_taggable.rb#L101">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">101
102
103</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='tag_counts identifier id'>tag_counts</span><span class='lparen token'>(</span><span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='semicolon token'>;</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='Tag constant id'>Tag</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:all</span><span class='comma token'>,</span> <span class='find_options_for_tag_counts identifier id'>find_options_for_tag_counts</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>