<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>nex3's haml - Module: Haml::Helpers - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/nex3/commits/haml/master" rel="alternate" title="Recent Commits to haml:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("nex3", "haml", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("nex3", "haml", "233616d322a1eff7af965df25510c6a9fd3da6af", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/nex3/haml/tree/">Source</a></li>
            <li class=""><a href="http://github.com/nex3/haml/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/nex3/haml/network">Network</a></li>            
            <li class=""><a href="http://github.com/nex3/haml/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/nex3/haml">Wiki</a></li>
            <li class=""><a href="http://github.com/nex3/haml/graphs">Graphs</a></li>                    
            <li class="active"><a href="/nex3/haml">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/nex3">nex3</a> / <b><a href="http://github.com/nex3/haml/tree">haml</a></b>        
                <a id="namespaces_button" rel="nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section module Haml_Helpers">
  <h1>Module: Haml::Helpers</h1>
  <div class="section docstring">
  <p>
This module contains various helpful methods to make it easier to do
various tasks. Haml::Helpers is automatically included in the context that
a Haml template is parsed in, so all these methods are at your disposal
from within the template.
</p>

</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#action_view-3F-class_method">action_view?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns whether or not ActionView is installed on the system.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#capture_haml-instance_method">#capture_haml</span><span class='args'>(*args, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Captures the result of the given block of Haml code, gets rid of the excess
indentation, and returns it as a string.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#find_and_preserve-instance_method">#find_and_preserve</span><span class='args'>(input = nil, tags = haml_buffer.options[:preserve], &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
call-seq:
</p>
<pre class="code">
  <span class='find_and_preserve identifier id'>find_and_preserve</span><span class='lparen token'>(</span><span class='input identifier id'>input</span><span class='comma token'>,</span> <span class='tags identifier id'>tags</span> <span class='assign token'>=</span> <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span>
</pre>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#haml_concat-instance_method">#haml_concat</span><span class='args'>(text = &quot;&quot;)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Outputs text directly to the Haml buffer, with the proper tabulation.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#haml_indent-instance_method">#haml_indent</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns the string that should be used to indent the current line.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#haml_tag-instance_method">#haml_tag</span><span class='args'>(name, *rest, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
call-seq:
</p>
<pre class="code">
  <span class='haml_tag identifier id'>haml_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='flags identifier id'>flags</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='dot token'>.</span>
</pre>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#html_attrs-instance_method">#html_attrs</span><span class='args'>(lang = 'en-US')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a hash containing default assignments for the xmlns and xml:lang
attributes of the <tt>html</tt> HTML element.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#init_haml_helpers-instance_method">#init_haml_helpers</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Note: this does <b>not</b> need to be called when using Haml helpers
normally in Rails.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#list_of-instance_method">#list_of</span><span class='args'>(array, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Takes an Enumerable object and a block and iterates over the object,
yielding each element to a Haml block and putting the result into
<tt>&lt;li&gt;</tt> elements.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#non_haml-instance_method">#non_haml</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
call-seq:
</p>
<pre class="code">
  <span class='non_haml identifier id'>non_haml</span> <span class='lbrace token'>{</span> <span class='dot token'>.</span>
</pre>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#precede-instance_method">#precede</span><span class='args'>(char, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Prepends the given character to the beginning of the Haml block, with no
whitespace between.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#preserve-instance_method">#preserve</span><span class='args'>(input = '', &amp;block)</span>
        <span class='block'></span>
        
          <span class='alias'>#flatten</span>
        
      </th>
      <td class="docstring">
        <p>
call-seq:
</p>
<pre class="code">
  <span class='preserve identifier id'>preserve</span><span class='lparen token'>(</span><span class='input identifier id'>input</span><span class='rparen token'>)</span>
  <span class='preserve identifier id'>preserve</span> <span class='lbrace token'>{</span><span class='dot token'>.</span>
</pre>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#puts-instance_method">#puts</span><span class='args'>(*args)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#succeed-instance_method">#succeed</span><span class='args'>(char, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Appends the given character to the end of the Haml block, with no
whitespace between.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#surround-instance_method">#surround</span><span class='args'>(front, back = nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Surrounds the given block of Haml code with the given characters, with no
whitespace in between.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#tab_down-instance_method">#tab_down</span><span class='args'>(i = 1)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Decrements the number of tabs the buffer automatically adds to the lines of
the template.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#tab_up-instance_method">#tab_up</span><span class='args'>(i = 1)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Increments the number of tabs the buffer automatically adds to the lines of
the template.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>action_view?</h3>
</div><div id="action_view-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>action_view?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns whether or not ActionView is installed on the system.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 33</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L33">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">33
34
35</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='action_view? fid id'>action_view?</span>
  <span class='@@action_view_defined ivar id'>@@action_view_defined</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>capture_haml</h3>
</div><div id="capture_haml-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>capture_haml</span><span class='args'>(*args, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Captures the result of the given block of Haml code, gets rid of the excess
indentation, and returns it as a string. For example, after the following,
</p>
<pre class="code">
  <span class='dot token'>.</span><span class='foo identifier id'>foo</span>
    <span class='minus op'>-</span> <span class='foo identifier id'>foo</span> <span class='assign token'>=</span> <span class='capture_haml identifier id'>capture_haml</span><span class='lparen token'>(</span><span class='integer val'>13</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span>
      <span class='p identifier id'>p</span><span class='assign token'>=</span> <span class='a identifier id'>a</span>
</pre>
<p>
the local variable <tt>foo</tt> would be assigned to
&quot;&lt;p&gt;13&lt;/p&gt;\n&quot;.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 273</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L273">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='capture_haml identifier id'>capture_haml</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='buffer identifier id'>buffer</span> <span class='assign token'>=</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='string val'>'_hamlout'</span><span class='comma token'>,</span> <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='binding identifier id'>binding</span><span class='rparen token'>)</span> <span class='rescue rescue kw'>rescue</span> <span class='haml_buffer identifier id'>haml_buffer</span>
  <span class='with_haml_buffer identifier id'>with_haml_buffer</span><span class='lparen token'>(</span><span class='buffer identifier id'>buffer</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='position identifier id'>position</span> <span class='assign token'>=</span> <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='buffer identifier id'>buffer</span><span class='dot token'>.</span><span class='length identifier id'>length</span>

    <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='capture_position identifier id'>capture_position</span> <span class='assign token'>=</span> <span class='position identifier id'>position</span>
    <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>

    <span class='captured identifier id'>captured</span> <span class='assign token'>=</span> <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='buffer identifier id'>buffer</span><span class='dot token'>.</span><span class='slice! fid id'>slice!</span><span class='lparen token'>(</span><span class='position identifier id'>position</span><span class='dot2 op'>..</span><span class='integer val'>-1</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>/^/</span><span class='rparen token'>)</span>

    <span class='min_tabs identifier id'>min_tabs</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
    <span class='captured identifier id'>captured</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span>
      <span class='tabs identifier id'>tabs</span> <span class='assign token'>=</span> <span class='line identifier id'>line</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='regexp val'>/[^ ]/</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='line identifier id'>line</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
      <span class='min_tabs identifier id'>min_tabs</span> <span class='opasgn op'>||=</span> <span class='tabs identifier id'>tabs</span>
      <span class='min_tabs identifier id'>min_tabs</span> <span class='assign token'>=</span> <span class='min_tabs identifier id'>min_tabs</span> <span class='gt op'>&gt;</span> <span class='tabs identifier id'>tabs</span> <span class='integer val'>? </span><span class='tabs identifier id'>tabs</span> <span class='colon op'>:</span> <span class='min_tabs identifier id'>min_tabs</span>
    <span class='end end kw'>end</span>

    <span class='captured identifier id'>captured</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span>
      <span class='line identifier id'>line</span><span class='lbrack token'>[</span><span class='min_tabs identifier id'>min_tabs</span><span class='dot2 op'>..</span><span class='integer val'>-1</span><span class='rbrack token'>]</span>
    <span class='end end kw'>end</span><span class='dot token'>.</span><span class='join identifier id'>join</span>
  <span class='end end kw'>end</span>
<span class='ensure ensure kw'>ensure</span>
  <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='capture_position identifier id'>capture_position</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>find_and_preserve</h3>
</div><div id="find_and_preserve-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>find_and_preserve</span><span class='args'>(input = nil, tags = haml_buffer.options[:preserve], &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
call-seq:
</p>
<pre class="code">
  <span class='find_and_preserve identifier id'>find_and_preserve</span><span class='lparen token'>(</span><span class='input identifier id'>input</span><span class='comma token'>,</span> <span class='tags identifier id'>tags</span> <span class='assign token'>=</span> <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:preserve</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='find_and_preserve identifier id'>find_and_preserve</span><span class='lparen token'>(</span><span class='tags identifier id'>tags</span> <span class='assign token'>=</span> <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:preserve</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='lt op'>&lt;</span><span class='tt identifier id'>tt</span><span class='gt op'>&gt;</span><span class='dot3 op'>...</span><span class='lt op'>&lt;</span><span class='regexp val'>/tt&gt;
</span></pre>
<p>
Uses preserve to convert any newlines inside whitespace-sensitive tags into
the HTML entities for endlines. <tt>tags</tt> is an array of tags to
preserve. It defaults to the value of the <tt>:preserve</tt> option.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 87</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L87">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">87
88
89
90
91
92
93
94</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='find_and_preserve identifier id'>find_and_preserve</span><span class='lparen token'>(</span><span class='input identifier id'>input</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='tags identifier id'>tags</span> <span class='assign token'>=</span> <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:preserve</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='find_and_preserve identifier id'>find_and_preserve</span><span class='lparen token'>(</span><span class='capture_haml identifier id'>capture_haml</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='input identifier id'>input</span> <span class='orop op'>||</span> <span class='tags identifier id'>tags</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block identifier id'>block</span>

  <span class='input identifier id'>input</span> <span class='assign token'>=</span> <span class='input identifier id'>input</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='input identifier id'>input</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='dregexp node'>/&lt;(#{tags.map(&amp;Regexp.method(:escape)).join('|')})([^&gt;]*)&gt;(.*?)(&lt;\/\1&gt;)/i</span><span class='m identifier id'>m</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='dstring node'>&quot;&lt;#{$1}#{$2}&gt;#{preserve($3)}&lt;/#{$1}&gt;&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>haml_concat</h3>
</div><div id="haml_concat-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>haml_concat</span><span class='args'>(text = &quot;&quot;)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Outputs text directly to the Haml buffer, with the proper tabulation
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 309</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L309">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">309
310
311
312</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='haml_concat identifier id'>haml_concat</span><span class='lparen token'>(</span><span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
  <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='buffer identifier id'>buffer</span> <span class='lshft op'>&lt;&lt;</span> <span class='haml_indent identifier id'>haml_indent</span> <span class='lshft op'>&lt;&lt;</span> <span class='text identifier id'>text</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;\n&quot;</span>
  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>haml_indent</h3>
</div><div id="haml_indent-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>haml_indent</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns the string that should be used to indent the current line
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 315</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L315">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">315
316
317</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='haml_indent identifier id'>haml_indent</span>
  <span class='string val'>'  '</span> <span class='mult op'>*</span> <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='tabulation identifier id'>tabulation</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>haml_tag</h3>
</div><div id="haml_tag-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>haml_tag</span><span class='args'>(name, *rest, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
call-seq:
</p>
<pre class="code">
  <span class='haml_tag identifier id'>haml_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='flags identifier id'>flags</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='lt op'>&lt;</span><span class='tt identifier id'>tt</span><span class='gt op'>&gt;</span><span class='lbrace token'>{</span><span class='dot3 op'>...</span><span class='lt op'>&lt;</span><span class='regexp val'>/tt&gt;
  haml_tag(name, text, *flags, attributes = &lt;tt&gt;{...&lt;/</span><span class='tt identifier id'>tt</span><span class='gt op'>&gt;</span>
</pre>
<p>
Creates an HTML tag with the given name and optionally text and attributes.
Can take a block that will be executed between when the opening and closing
tags are output. If the block is a Haml block or outputs text using
haml_concat, the text will be properly indented.
</p>
<p>
<tt>flags</tt> is a list of symbol flags like those that can be put at the
end of a Haml tag (<tt>:/</tt>, <tt>:&lt;</tt>, and <tt>:&gt;</tt>).
Currently, only <tt>:/</tt> and <tt>:&lt;</tt> are supported.
</p>
<p>
For example,
</p>
<pre class="code">
  <span class='haml_tag identifier id'>haml_tag</span> <span class='symbol val'>:table</span> <span class='do do kw'>do</span>
    <span class='haml_tag identifier id'>haml_tag</span> <span class='symbol val'>:tr</span> <span class='do do kw'>do</span>
      <span class='haml_tag identifier id'>haml_tag</span> <span class='symbol val'>:td</span><span class='comma token'>,</span> <span class='lt op'>&lt;</span><span class='tt identifier id'>tt</span><span class='geq op'>&gt;=</span><span class='bitand op'>&amp;</span><span class='gt identifier id'>gt</span><span class='semicolon token'>;</span> <span class='string val'>'cell'</span><span class='lt op'>&lt;</span><span class='regexp val'>/tt&gt; do
        haml_tag :strong, &quot;strong!&quot;
        haml_concat &quot;data&quot;
      end
      haml_tag :td do
        haml_concat &quot;more_data&quot;
      end
    end
  end
</span></pre>
<p>
outputs
</p>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='table identifier id'>table</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='tr identifier id'>tr</span><span class='gt op'>&gt;</span>
      <span class='lt op'>&lt;</span><span class='td identifier id'>td</span> <span class='class class kw'>class</span><span class='assign token'>=</span><span class='string val'>'cell'</span><span class='gt op'>&gt;</span>
        <span class='lt op'>&lt;</span><span class='strong identifier id'>strong</span><span class='gt op'>&gt;</span>
          <span class='strong! fid id'>strong!</span>
        <span class='lt op'>&lt;</span><span class='regexp val'>/strong&gt;
        data
      &lt;/</span><span class='td identifier id'>td</span><span class='gt op'>&gt;</span>
      <span class='lt op'>&lt;</span><span class='td identifier id'>td</span><span class='gt op'>&gt;</span>
        <span class='more_data identifier id'>more_data</span>
      <span class='lt op'>&lt;</span><span class='regexp val'>/td&gt;
    &lt;/</span><span class='tr identifier id'>tr</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='regexp val'>/table&gt;
</span></pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 365</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L365">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='haml_tag identifier id'>haml_tag</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='rest identifier id'>rest</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
      <span class='ret identifier id'>ret</span> <span class='assign token'>=</span> <span class='ErrorReturn constant id'>ErrorReturn</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;haml_tag outputs directly to the Haml template.\nDisregard its return value and use the - operator.\n&quot;</span><span class='rparen token'>)</span>

      <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
      <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='rest identifier id'>rest</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='unless unless_mod kw'>unless</span> <span class='lbrack token'>[</span><span class='Symbol constant id'>Symbol</span><span class='comma token'>,</span> <span class='Hash constant id'>Hash</span><span class='comma token'>,</span> <span class='NilClass constant id'>NilClass</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='any? fid id'>any?</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='bitor op'>|</span> <span class='rest identifier id'>rest</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span> <span class='t identifier id'>t</span><span class='rbrace token'>}</span>
      <span class='flags identifier id'>flags</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
      <span class='flags identifier id'>flags</span> <span class='lshft op'>&lt;&lt;</span> <span class='rest identifier id'>rest</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span> <span class='while while_mod kw'>while</span> <span class='rest identifier id'>rest</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span> <span class='Symbol constant id'>Symbol</span>
      <span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='Haml constant id'>Haml</span><span class='colon2 op'>::</span><span class='Precompiler constant id'>Precompiler</span><span class='dot token'>.</span><span class='build_attributes identifier id'>build_attributes</span><span class='lparen token'>(</span><span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='html? fid id'>html?</span><span class='comma token'>,</span>
                                                      <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:attr_wrapper</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                                                      <span class='rest identifier id'>rest</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>

      <span class='if if kw'>if</span> <span class='text identifier id'>text</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='andop op'>&amp;&amp;</span> <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span><span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='colon op'>:</span><span class='autoclose identifier id'>autoclose</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='flags identifier id'>flags</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='colon op'>:</span><span class='dregexp node'>/))
        haml_concat &quot;&lt;#{name}#{attributes} /</span><span class='gt op'>&gt;</span><span class='string val'>&quot;
        return ret
      end

      if flags.include?(:/)
        raise Error.new(&quot;</span><span class='Self constant id'>Self</span><span class='minus op'>-</span><span class='closing identifier id'>closing</span> <span class='tags identifier id'>tags</span> <span class='can identifier id'>can</span><span class='string val'>'t have content.&quot;) if text
        raise Error.new(&quot;Illegal nesting: nesting within a self-closing tag is illegal.&quot;) if block
      end

      tag = &quot;&lt;#{name}#{attributes}&gt;&quot;
      if block.nil?
        tag &lt;&lt; text.to_s &lt;&lt; &quot;&lt;/#{name}&gt;&quot;
        haml_concat tag
        return ret
      end

      if text
        raise Error.new(&quot;Illegal nesting: content can'</span><span class='t identifier id'>t</span> <span class='be identifier id'>be</span> <span class='both identifier id'>both</span> <span class='given identifier id'>given</span> <span class='to identifier id'>to</span> <span class='haml_tag identifier id'>haml_tag</span> <span class='colon op'>:</span><span class='comment val'>#{name} and nested within it.&quot;)</span>
      <span class='end end kw'>end</span>

      <span class='if if kw'>if</span> <span class='flags identifier id'>flags</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='colon op'>:</span><span class='lt op'>&lt;</span><span class='rparen token'>)</span>
        <span class='tag identifier id'>tag</span> <span class='lshft op'>&lt;&lt;</span> <span class='capture_haml identifier id'>capture_haml</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;&lt;/#{name}&gt;&quot;</span>
        <span class='haml_concat identifier id'>haml_concat</span> <span class='tag identifier id'>tag</span>
        <span class='return return kw'>return</span> <span class='ret identifier id'>ret</span>
      <span class='end end kw'>end</span>

      <span class='haml_concat identifier id'>haml_concat</span> <span class='tag identifier id'>tag</span>
      <span class='tab_up identifier id'>tab_up</span>
      <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span>
      <span class='tab_down identifier id'>tab_down</span>
      <span class='haml_concat identifier id'>haml_concat</span> <span class='dstring node'>&quot;&lt;/#{name}&gt;&quot;</span>

      <span class='ret identifier id'>ret</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Characters that need to be escaped to HTML entities from user input</span>
    <span class='HTML_ESCAPE constant id'>HTML_ESCAPE</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='string val'>'&amp;'</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>'&amp;amp;'</span><span class='comma token'>,</span> <span class='string val'>'&lt;'</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>'&amp;lt;'</span><span class='comma token'>,</span> <span class='string val'>'&gt;'</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>'&amp;gt;'</span><span class='comma token'>,</span> <span class='string val'>'&quot;'</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>'&amp;quot;'</span><span class='comma token'>,</span> <span class='string val'>&quot;'&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='string val'>'&amp;#039;'</span><span class='comma token'>,</span> <span class='rbrace token'>}</span>

    <span class='comment val'># Returns a copy of &lt;tt&gt;text&lt;/tt&gt; with ampersands, angle brackets and quotes</span>
    <span class='comment val'># escaped into HTML entities.</span>
    <span class='def def kw'>def</span> <span class='html_escape identifier id'>html_escape</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
      <span class='text identifier id'>text</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/[\&quot;&gt;&lt;&amp;]/</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span> <span class='HTML_ESCAPE constant id'>HTML_ESCAPE</span><span class='lbrack token'>[</span><span class='s identifier id'>s</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Escapes HTML entities in &lt;tt&gt;text&lt;/tt&gt;, but without escaping an ampersand</span>
    <span class='comment val'># that is already part of an escaped entity.</span>
    <span class='def def kw'>def</span> <span class='escape_once identifier id'>escape_once</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
      <span class='text identifier id'>text</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/[\&quot;&gt;&lt;]|&amp;(?!([a-zA-Z]+|(#\d+));)/</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span> <span class='HTML_ESCAPE constant id'>HTML_ESCAPE</span><span class='lbrack token'>[</span><span class='s identifier id'>s</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Returns whether or not the current template is a Haml template.</span>
    <span class='comment val'>#</span>
    <span class='comment val'># This function, unlike other Haml::Helpers functions,</span>
    <span class='comment val'># also works in other ActionView templates,</span>
    <span class='comment val'># where it will always return false.</span>
    <span class='def def kw'>def</span> <span class='is_haml? fid id'>is_haml?</span>
      <span class='notop op'>!</span><span class='@haml_buffer ivar id'>@haml_buffer</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='andop op'>&amp;&amp;</span> <span class='@haml_buffer ivar id'>@haml_buffer</span><span class='dot token'>.</span><span class='active? fid id'>active?</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Returns whether or not +block+ is defined directly in a Haml template.</span>
    <span class='def def kw'>def</span> <span class='block_is_haml? fid id'>block_is_haml?</span><span class='lparen token'>(</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
      <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='string val'>'_hamlout'</span><span class='comma token'>,</span> <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='binding identifier id'>binding</span><span class='rparen token'>)</span>
      <span class='true true kw'>true</span>
    <span class='rescue rescue kw'>rescue</span>
      <span class='false false kw'>false</span>
    <span class='end end kw'>end</span>

    <span class='private identifier id'>private</span>

    <span class='comment val'># call-seq:</span>
    <span class='comment val'>#   with_haml_buffer(buffer) {...}</span>
    <span class='comment val'>#</span>
    <span class='comment val'># Runs the block with the given buffer as the currently active buffer.</span>
    <span class='def def kw'>def</span> <span class='with_haml_buffer identifier id'>with_haml_buffer</span><span class='lparen token'>(</span><span class='buffer identifier id'>buffer</span><span class='rparen token'>)</span>
      <span class='@haml_buffer ivar id'>@haml_buffer</span><span class='comma token'>,</span> <span class='old_buffer identifier id'>old_buffer</span> <span class='assign token'>=</span> <span class='buffer identifier id'>buffer</span><span class='comma token'>,</span> <span class='@haml_buffer ivar id'>@haml_buffer</span>
      <span class='old_buffer identifier id'>old_buffer</span><span class='dot token'>.</span><span class='active identifier id'>active</span><span class='comma token'>,</span> <span class='was_active identifier id'>was_active</span> <span class='assign token'>=</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='old_buffer identifier id'>old_buffer</span><span class='dot token'>.</span><span class='active? fid id'>active?</span> <span class='if if_mod kw'>if</span> <span class='old_buffer identifier id'>old_buffer</span>
      <span class='@haml_buffer ivar id'>@haml_buffer</span><span class='dot token'>.</span><span class='active identifier id'>active</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
      <span class='yield yield kw'>yield</span>
    <span class='ensure ensure kw'>ensure</span>
      <span class='@haml_buffer ivar id'>@haml_buffer</span><span class='dot token'>.</span><span class='active identifier id'>active</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
      <span class='old_buffer identifier id'>old_buffer</span><span class='dot token'>.</span><span class='active identifier id'>active</span> <span class='assign token'>=</span> <span class='was_active identifier id'>was_active</span> <span class='if if_mod kw'>if</span> <span class='old_buffer identifier id'>old_buffer</span>
      <span class='@haml_buffer ivar id'>@haml_buffer</span> <span class='assign token'>=</span> <span class='old_buffer identifier id'>old_buffer</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Gets a reference to the current Haml::Buffer object.</span>
    <span class='def def kw'>def</span> <span class='haml_buffer identifier id'>haml_buffer</span>
      <span class='@haml_buffer ivar id'>@haml_buffer</span>
    <span class='end end kw'>end</span>

    <span class='comment val'># Gives a proc the same local &quot;_hamlout&quot; and &quot;_erbout&quot; variables</span>
    <span class='comment val'># that the current template has.</span>
    <span class='def def kw'>def</span> <span class='haml_bind_proc identifier id'>haml_bind_proc</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='proc identifier id'>proc</span><span class='rparen token'>)</span>
      <span class='_hamlout identifier id'>_hamlout</span> <span class='assign token'>=</span> <span class='haml_buffer identifier id'>haml_buffer</span>
      <span class='_erbout identifier id'>_erbout</span> <span class='assign token'>=</span> <span class='_hamlout identifier id'>_hamlout</span><span class='dot token'>.</span><span class='buffer identifier id'>buffer</span>
      <span class='proc identifier id'>proc</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='bitor op'>|</span> <span class='proc identifier id'>proc</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
    <span class='end end kw'>end</span>

    <span class='include identifier id'>include</span> <span class='ActionViewExtensions constant id'>ActionViewExtensions</span> <span class='if if_mod kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='const_defined? fid id'>const_defined?</span> <span class='string val'>&quot;ActionViewExtensions&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>

<span class='class class kw'>class</span> <span class='Object constant id'>Object</span>
  <span class='comment val'># Haml overrides various ActionView helpers,</span>
  <span class='comment val'># which call an #is_haml? method</span>
  <span class='comment val'># to determine whether or not the current context object</span>
  <span class='comment val'># is a proper Haml context.</span>
  <span class='comment val'># Because ActionView helpers may be included in non-ActionView::Base classes,</span>
  <span class='comment val'># it's a good idea to define is_haml? for all objects.</span>
  <span class='def def kw'>def</span> <span class='is_haml? fid id'>is_haml?</span>
    <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>html_attrs</h3>
</div><div id="html_attrs-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>html_attrs</span><span class='args'>(lang = 'en-US')</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a hash containing default assignments for the xmlns and xml:lang
attributes of the <tt>html</tt> HTML element. It also takes an optional
argument for the value of xml:lang and lang, which defaults to
&#8216;en-US&#8217;. For example,
</p>
<pre class="code">
  <span class='html identifier id'>html</span><span class='lbrace token'>{</span><span class='html_attrs identifier id'>html_attrs</span><span class='rbrace token'>}</span>
</pre>
<p>
becomes
</p>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='html identifier id'>html</span> <span class='xmlns identifier id'>xmlns</span><span class='assign token'>=</span><span class='string val'>'http://www.w3.org/1999/xhtml'</span> <span class='xml identifier id'>xml</span><span class='symbol val'>:lang=</span><span class='string val'>'en-US'</span> <span class='lang identifier id'>lang</span><span class='assign token'>=</span><span class='string val'>'en-US'</span><span class='gt op'>&gt;</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 171</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L171">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">171
172
173</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='html_attrs identifier id'>html_attrs</span><span class='lparen token'>(</span><span class='lang identifier id'>lang</span> <span class='assign token'>=</span> <span class='string val'>'en-US'</span><span class='rparen token'>)</span>
  <span class='lbrace token'>{</span><span class='symbol val'>:xmlns</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://www.w3.org/1999/xhtml&quot;</span><span class='comma token'>,</span> <span class='string val'>'xml:lang'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lang identifier id'>lang</span><span class='comma token'>,</span> <span class='symbol val'>:lang</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lang identifier id'>lang</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>init_haml_helpers</h3>
</div><div id="init_haml_helpers-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>init_haml_helpers</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Note: this does <b>not</b> need to be called when using Haml helpers
normally in Rails.
</p>
<p>
Initializes the current object as though it were in the same context as a
normal ActionView rendering using Haml. This is useful if you want to use
the helpers in a context other than the normal setup with ActionView. For
example:
</p>
<pre class="code">
  <span class='context identifier id'>context</span> <span class='assign token'>=</span> <span class='Object constant id'>Object</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='class class kw'>class</span> <span class='lshft op'>&lt;&lt;</span> <span class='context identifier id'>context</span>
    <span class='include identifier id'>include</span> <span class='Haml constant id'>Haml</span><span class='colon2 op'>::</span><span class='Helpers constant id'>Helpers</span>
  <span class='end end kw'>end</span>
  <span class='context identifier id'>context</span><span class='dot token'>.</span><span class='init_haml_helpers identifier id'>init_haml_helpers</span>
  <span class='context identifier id'>context</span><span class='dot token'>.</span><span class='haml_tag identifier id'>haml_tag</span> <span class='symbol val'>:p</span><span class='comma token'>,</span> <span class='string val'>&quot;Stuff&quot;</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 56</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L56">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">56
57
58
59</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='init_haml_helpers identifier id'>init_haml_helpers</span>
  <span class='@haml_buffer ivar id'>@haml_buffer</span> <span class='assign token'>=</span> <span class='Haml constant id'>Haml</span><span class='colon2 op'>::</span><span class='Buffer constant id'>Buffer</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='@haml_buffer ivar id'>@haml_buffer</span><span class='comma token'>,</span> <span class='Haml constant id'>Haml</span><span class='colon2 op'>::</span><span class='Engine constant id'>Engine</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:options_for_buffer</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>list_of</h3>
</div><div id="list_of-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>list_of</span><span class='args'>(array, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Takes an Enumerable object and a block and iterates over the object,
yielding each element to a Haml block and putting the result into
<tt>&lt;li&gt;</tt> elements. This creates a list of the results of the
block. For example:
</p>
<pre class="code">
  <span class='assign token'>=</span> <span class='list_of identifier id'>list_of</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='lbrack token'>[</span><span class='string val'>'hello'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>'yall'</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='i identifier id'>i</span><span class='bitor op'>|</span>
    <span class='assign token'>=</span> <span class='i identifier id'>i</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
</pre>
<p>
Produces:
</p>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='li identifier id'>li</span><span class='gt op'>&gt;</span><span class='hello identifier id'>hello</span><span class='lt op'>&lt;</span><span class='regexp val'>/li&gt;
  &lt;li&gt;yall&lt;/</span><span class='li identifier id'>li</span><span class='gt op'>&gt;</span>
</pre>
<p>
And
</p>
<pre class="code">
  <span class='assign token'>=</span> <span class='list_of identifier id'>list_of</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='symbol val'>:title</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'All the stuff'</span><span class='comma token'>,</span> <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'A book about all the stuff.'</span><span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='bitor op'>|</span>
    <span class='h3 identifier id'>h3</span><span class='assign token'>=</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='humanize identifier id'>humanize</span>
    <span class='p identifier id'>p</span><span class='assign token'>=</span> <span class='val identifier id'>val</span>
</pre>
<p>
Produces:
</p>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='li identifier id'>li</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='h3 identifier id'>h3</span><span class='gt op'>&gt;</span><span class='Title constant id'>Title</span><span class='lt op'>&lt;</span><span class='regexp val'>/h3&gt;
    &lt;p&gt;All the stuff&lt;/</span><span class='p identifier id'>p</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='regexp val'>/li&gt;
  &lt;li&gt;
    &lt;h3&gt;Description&lt;/</span><span class='h3 identifier id'>h3</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='p identifier id'>p</span><span class='gt op'>&gt;</span><span class='A constant id'>A</span> <span class='book identifier id'>book</span> <span class='about identifier id'>about</span> <span class='all identifier id'>all</span> <span class='the identifier id'>the</span> <span class='stuff identifier id'>stuff</span><span class='dot token'>.</span><span class='lt op'>&lt;</span><span class='regexp val'>/p&gt;
  &lt;/</span><span class='li identifier id'>li</span><span class='gt op'>&gt;</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 143</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L143">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">143
144
145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='list_of identifier id'>list_of</span><span class='lparen token'>(</span><span class='array identifier id'>array</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span> <span class='comment val'># :yields: item</span>
  <span class='to_return identifier id'>to_return</span> <span class='assign token'>=</span> <span class='array identifier id'>array</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='i identifier id'>i</span><span class='bitor op'>|</span>
    <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='capture_haml identifier id'>capture_haml</span><span class='lparen token'>(</span><span class='i identifier id'>i</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>

    <span class='if if kw'>if</span> <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='count identifier id'>count</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span> <span class='gt op'>&gt;</span> <span class='integer val'>1</span>
      <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;\n  &quot;</span><span class='rparen token'>)</span>
      <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;\n  #{result.strip}\n&quot;</span>
    <span class='else else kw'>else</span>
      <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='strip! fid id'>strip!</span>
    <span class='end end kw'>end</span>

    <span class='dstring node'>&quot;&lt;li&gt;#{result}&lt;/li&gt;&quot;</span>
  <span class='end end kw'>end</span>
  <span class='to_return identifier id'>to_return</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>non_haml</h3>
</div><div id="non_haml-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>non_haml</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
call-seq:
</p>
<pre class="code">
  <span class='non_haml identifier id'>non_haml</span> <span class='lbrace token'>{</span> <span class='dot3 op'>...</span> <span class='rbrace token'>}</span>
</pre>
<p>
Runs a block of code in a non-Haml context (i.e. #is_haml? will return
false).
</p>
<p>
This is mainly useful for rendering sub-templates such as partials in a
non-Haml language, particularly where helpers may behave differently when
run from Haml.
</p>
<p>
Note that this is automatically applied to Rails partials.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 71</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L71">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">71
72
73
74
75
76
77</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='non_haml identifier id'>non_haml</span>
  <span class='was_active identifier id'>was_active</span> <span class='assign token'>=</span> <span class='@haml_buffer ivar id'>@haml_buffer</span><span class='dot token'>.</span><span class='active? fid id'>active?</span>
  <span class='@haml_buffer ivar id'>@haml_buffer</span><span class='dot token'>.</span><span class='active identifier id'>active</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='yield yield kw'>yield</span>
<span class='ensure ensure kw'>ensure</span>
  <span class='@haml_buffer ivar id'>@haml_buffer</span><span class='dot token'>.</span><span class='active identifier id'>active</span> <span class='assign token'>=</span> <span class='was_active identifier id'>was_active</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>precede</h3>
</div><div id="precede-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>precede</span><span class='args'>(char, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Prepends the given character to the beginning of the Haml block, with no
whitespace between. For example:
</p>
<pre class="code">
  <span class='assign token'>=</span> <span class='precede identifier id'>precede</span> <span class='string val'>'*'</span> <span class='do do kw'>do</span>
    <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='small identifier id'>small</span> <span class='Not constant id'>Not</span> <span class='really identifier id'>really</span>
</pre>
<p>
Produces:
</p>
<pre class="code">
  <span class='mult op'>*</span><span class='lt op'>&lt;</span><span class='span identifier id'>span</span> <span class='class class kw'>class</span><span class='assign token'>=</span><span class='string val'>'small'</span><span class='gt op'>&gt;</span><span class='Not constant id'>Not</span> <span class='really identifier id'>really</span><span class='lt op'>&lt;</span><span class='regexp val'>/span&gt;
</span></pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 241</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L241">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">241
242
243</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='precede identifier id'>precede</span><span class='lparen token'>(</span><span class='char identifier id'>char</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;#{char}#{capture_haml(&amp;block).chomp}\n&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>preserve</h3>
</div><div id="preserve-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>preserve</span><span class='args'>(input = '', &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="flatten-instance_method">flatten</tt>
  
</p>
</div><div class="section docstring">
  <p>
call-seq:
</p>
<pre class="code">
  <span class='preserve identifier id'>preserve</span><span class='lparen token'>(</span><span class='input identifier id'>input</span><span class='rparen token'>)</span>
  <span class='preserve identifier id'>preserve</span> <span class='lt op'>&lt;</span><span class='tt identifier id'>tt</span><span class='gt op'>&gt;</span><span class='dot3 op'>...</span><span class='lt op'>&lt;</span><span class='regexp val'>/tt&gt;
</span></pre>
<p>
Takes any string, finds all the endlines and converts them to HTML entities
for endlines so they&#8217;ll render correctly in whitespace-sensitive tags
without screwing up the indentation.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 103</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L103">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">103
104
105
106
107</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='preserve identifier id'>preserve</span><span class='lparen token'>(</span><span class='input identifier id'>input</span> <span class='assign token'>=</span> <span class='string val'>''</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='preserve identifier id'>preserve</span><span class='lparen token'>(</span><span class='capture_haml identifier id'>capture_haml</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block identifier id'>block</span>

  <span class='input identifier id'>input</span><span class='dot token'>.</span><span class='chomp identifier id'>chomp</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\n/</span><span class='comma token'>,</span> <span class='string val'>'&amp;#x000A;'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\r/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>puts</h3>
</div><div id="puts-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>puts</span><span class='args'>(*args)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 298</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L298">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">298
299
300
301</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='puts identifier id'>puts</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='warn identifier id'>warn</span> <span class='string val'>&quot;DEPRECATION WARNING:\nThe Haml #puts helper is deprecated and will be removed in version 2.4.\nUse the #haml_concat helper instead.\n&quot;</span>
  <span class='haml_concat identifier id'>haml_concat</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>succeed</h3>
</div><div id="succeed-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>succeed</span><span class='args'>(char, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Appends the given character to the end of the Haml block, with no
whitespace between. For example:
</p>
<pre class="code">
  <span class='click identifier id'>click</span>
  <span class='assign token'>=</span> <span class='succeed identifier id'>succeed</span> <span class='string val'>'.'</span> <span class='do do kw'>do</span>
    <span class='a identifier id'>a</span><span class='lbrace token'>{</span><span class='symbol val'>:href=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;thing&quot;</span><span class='rbrace token'>}</span> <span class='here identifier id'>here</span>
</pre>
<p>
Produces:
</p>
<pre class="code">
  <span class='click identifier id'>click</span>
  <span class='lt op'>&lt;</span><span class='a identifier id'>a</span> <span class='href identifier id'>href</span><span class='assign token'>=</span><span class='string val'>'thing'</span><span class='gt op'>&gt;</span><span class='here identifier id'>here</span><span class='lt op'>&lt;</span><span class='regexp val'>/a&gt;.
</span></pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 258</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L258">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">258
259
260</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='succeed identifier id'>succeed</span><span class='lparen token'>(</span><span class='char identifier id'>char</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;#{capture_haml(&amp;block).chomp}#{char}\n&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>surround</h3>
</div><div id="surround-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>surround</span><span class='args'>(front, back = nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Surrounds the given block of Haml code with the given characters, with no
whitespace in between. For example:
</p>
<pre class="code">
  <span class='assign token'>=</span> <span class='surround identifier id'>surround</span> <span class='string val'>'('</span><span class='comma token'>,</span> <span class='string val'>')'</span> <span class='do do kw'>do</span>
    <span class='a identifier id'>a</span><span class='lbrace token'>{</span><span class='symbol val'>:href</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;food&quot;</span><span class='rbrace token'>}</span> <span class='chicken identifier id'>chicken</span>
</pre>
<p>
Produces:
</p>
<pre class="code">
  <span class='lparen token'>(</span><span class='lt op'>&lt;</span><span class='a identifier id'>a</span> <span class='href identifier id'>href</span><span class='assign token'>=</span><span class='string val'>'food'</span><span class='gt op'>&gt;</span><span class='chicken identifier id'>chicken</span><span class='lt op'>&lt;</span><span class='regexp val'>/a&gt;)
</span></pre>
<p>
and
</p>
<pre class="code">
  <span class='assign token'>=</span> <span class='surround identifier id'>surround</span> <span class='string val'>'*'</span> <span class='do do kw'>do</span>
    <span class='strong identifier id'>strong</span> <span class='angry identifier id'>angry</span>
</pre>
<p>
Produces:
</p>
<pre class="code">
  <span class='mult op'>*</span><span class='lt op'>&lt;</span><span class='strong identifier id'>strong</span><span class='gt op'>&gt;</span><span class='angry identifier id'>angry</span><span class='lt op'>&lt;</span><span class='regexp val'>/strong&gt;*
</span></pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 223</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L223">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">223
224
225
226
227
228</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='surround identifier id'>surround</span><span class='lparen token'>(</span><span class='front identifier id'>front</span><span class='comma token'>,</span> <span class='back identifier id'>back</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='back identifier id'>back</span> <span class='opasgn op'>||=</span> <span class='front identifier id'>front</span>
  <span class='output identifier id'>output</span> <span class='assign token'>=</span> <span class='capture_haml identifier id'>capture_haml</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>

  <span class='dstring node'>&quot;#{front}#{output.chomp}#{back}\n&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>tab_down</h3>
</div><div id="tab_down-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>tab_down</span><span class='args'>(i = 1)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Decrements the number of tabs the buffer automatically adds to the lines of
the template.
</p>
<p>
See also tab_up.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 199</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L199">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">199
200
201</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='tab_down identifier id'>tab_down</span><span class='lparen token'>(</span><span class='i identifier id'>i</span> <span class='assign token'>=</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='tabulation identifier id'>tabulation</span> <span class='opasgn op'>-=</span> <span class='i identifier id'>i</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>tab_up</h3>
</div><div id="tab_up-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>tab_up</span><span class='args'>(i = 1)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Increments the number of tabs the buffer automatically adds to the lines of
the template. For example:
</p>
<pre class="code">
  <span class='h1 identifier id'>h1</span> <span class='foo identifier id'>foo</span>
  <span class='minus op'>-</span> <span class='tab_up identifier id'>tab_up</span>
  <span class='p identifier id'>p</span> <span class='bar identifier id'>bar</span>
  <span class='minus op'>-</span> <span class='tab_down identifier id'>tab_down</span>
  <span class='strong identifier id'>strong</span> <span class='baz identifier id'>baz</span>
</pre>
<p>
Produces:
</p>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='h1 identifier id'>h1</span><span class='gt op'>&gt;</span><span class='foo identifier id'>foo</span><span class='lt op'>&lt;</span><span class='regexp val'>/h1&gt;
    &lt;p&gt;bar&lt;/</span><span class='p identifier id'>p</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='strong identifier id'>strong</span><span class='gt op'>&gt;</span><span class='baz identifier id'>baz</span><span class='lt op'>&lt;</span><span class='regexp val'>/strong&gt;
</span></pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/haml/helpers.rb', line 191</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/nex3/haml/blob/233616d322a1eff7af965df25510c6a9fd3da6af/lib/haml/helpers.rb#L191">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">191
192
193</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='tab_up identifier id'>tab_up</span><span class='lparen token'>(</span><span class='i identifier id'>i</span> <span class='assign token'>=</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='haml_buffer identifier id'>haml_buffer</span><span class='dot token'>.</span><span class='tabulation identifier id'>tabulation</span> <span class='opasgn op'>+=</span> <span class='i identifier id'>i</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>