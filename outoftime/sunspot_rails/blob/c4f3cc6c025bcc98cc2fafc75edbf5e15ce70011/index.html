<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>outoftime's sunspot_rails - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/outoftime/commits/sunspot_rails/master" rel="alternate" title="Recent Commits to sunspot_rails:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("outoftime", "sunspot_rails", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='outoftime/sunspot_rails/blob/c4f3cc6c025bcc98cc2fafc75edbf5e15ce70011' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='outoftime/sunspot_rails/blob/c4f3cc6c025bcc98cc2fafc75edbf5e15ce70011' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("outoftime", "sunspot_rails", "c4f3cc6c025bcc98cc2fafc75edbf5e15ce70011", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/outoftime/sunspot_rails/tree/">Source</a></li>
            <li class=""><a href="http://github.com/outoftime/sunspot_rails/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/outoftime/sunspot_rails/network">Network</a></li>            
            <li class=""><a href="http://github.com/outoftime/sunspot_rails/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/outoftime/sunspot_rails">Wiki</a></li>
            <li class=""><a href="http://github.com/outoftime/sunspot_rails/graphs">Graphs</a></li>                    
            <li class="active"><a href="/outoftime/sunspot_rails">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/outoftime">outoftime</a> / <b><a href="http://github.com/outoftime/sunspot_rails/tree">sunspot_rails</a></b>        
                <a id="namespaces_button" rel="outoftime/sunspot_rails/blob/c4f3cc6c025bcc98cc2fafc75edbf5e15ce70011" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="outoftime/sunspot_rails/blob/c4f3cc6c025bcc98cc2fafc75edbf5e15ce70011" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Sunspot::Rails</h1>
<p>
Sunspot::Rails is a Rails plugin that provides drop-in integration of the
Sunspot[http://outoftime.github.com/sunspot] Solr search library with
Rails. It provides the following features:
</p>
<ul>
<li>Configure Sunspot using config/sunspot.yml

</li>
<li>Extend ActiveRecord for easy index configuration, search, and indexing

</li>
<li>Automatically index ActiveRecord objects when they are saved, and remove
them from the index when they are destroyed (can be disabled)

</li>
<li>Automatically commit Solr changes at the end of each request

</li>
<li>Provide utility methods to find and fix orphaned documents and rebuild the
Solr index for a given class

</li>
<li>Provide rake tasks for starting and stopping the development Solr instance,
using the configuration in sunspot.yml

</li>
</ul>
<p>
Sunspot::Rails has been tested with Rails versions 2.1, 2.2, and 2.3
</p>
<h2>Installation</h2>
<p>
First, install the Sunspot and Sunspot::Rails gems:
</p>
<pre class="code">
  <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='outoftime identifier id'>outoftime</span><span class='minus op'>-</span><span class='sunspot identifier id'>sunspot</span> <span class='outoftime identifier id'>outoftime</span><span class='minus op'>-</span><span class='sunspot_rails identifier id'>sunspot_rails</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='source identifier id'>source</span><span class='assign token'>=</span><span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gems.github.com
</span></pre>
<p>
In your project&#8217;s <tt>config/environment.rb</tt>, add the following
gem dependencies:
</p>
<pre class="code">
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>'outoftime-sunspot'</span><span class='comma token'>,</span> <span class='symbol val'>:lib</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'sunspot'</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>'outoftime-sunspot_rails'</span><span class='comma token'>,</span> <span class='symbol val'>:lib</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'sunspot/rails'</span>
</pre>
<p>
If you are using an older version of Rails that doesn&#8217;t support
plugins-as-gems, use:
</p>
<pre class="code">
  <span class='script identifier id'>script</span><span class='div op'>/</span><span class='plugin identifier id'>plugin</span> <span class='install identifier id'>install</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/o</span><span class='utoftime identifier id'>utoftime</span><span class='div op'>/</span><span class='sunspot_rails identifier id'>sunspot_rails</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
</pre>
<p>
Create the file <tt>config/sunspot.yml</tt> and set it up for your
environments. Here is a sample:
</p>
<pre class="code">
  <span class='common identifier id'>common</span><span class='colon op'>:</span> <span class='bitand op'>&amp;</span><span class='common identifier id'>common</span>
    <span class='solr identifier id'>solr</span><span class='colon op'>:</span>
      <span class='hostname identifier id'>hostname</span><span class='colon op'>:</span> <span class='localhost identifier id'>localhost</span>
      <span class='port identifier id'>port</span><span class='colon op'>:</span> <span class='integer val'>8983</span>

  <span class='production identifier id'>production</span><span class='colon op'>:</span>
    <span class='lshft op'>&lt;&lt;</span><span class='colon op'>:</span> <span class='mult op'>*</span><span class='common identifier id'>common</span>
    <span class='solr identifier id'>solr</span><span class='colon op'>:</span>
      <span class='path identifier id'>path</span><span class='colon op'>:</span> <span class='regexp val'>/solr/</span><span class='myindex identifier id'>myindex</span>

  <span class='development identifier id'>development</span><span class='colon op'>:</span>
    <span class='lshft op'>&lt;&lt;</span><span class='colon op'>:</span> <span class='mult op'>*</span><span class='common identifier id'>common</span>
    <span class='solr identifier id'>solr</span><span class='colon op'>:</span>
      <span class='port identifier id'>port</span><span class='colon op'>:</span> <span class='integer val'>8982</span>

  <span class='test identifier id'>test</span><span class='colon op'>:</span>
    <span class='lshft op'>&lt;&lt;</span><span class='colon op'>:</span> <span class='mult op'>*</span><span class='common identifier id'>common</span>
    <span class='solr identifier id'>solr</span><span class='colon op'>:</span>
      <span class='port identifier id'>port</span><span class='colon op'>:</span> <span class='integer val'>8981</span>
</pre>
<p>
Rails doesn&#8217;t automatically load rake tasks from plugins installed as
gems (https://rails.lighthouseapp.com/projects/8994/tickets/59). If you
installed Sunspot::Rails as a gem, add the following line to your
project&#8217;s Rakefile:
</p>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'sunspot/rails/tasks'</span>
</pre>
<p>
If you wish to make modifications to the Solr schema, you can create a
custom Solr home in your project directory. In order to do so, create the
directory <tt>RAILS_ROOT/solr/conf</tt>, and copy in the contents of the
Solr gem&#8217;s <tt>solr/solr/conf</tt> directory. If the files are in the
right place, Sunspot::Rails will detect them and tell Solr to use your
local configurations. Use caution when modifying <tt>schema.xml</tt> -
Sunspot relies on the field naming scheme in the packaged schema file.
</p>
<p>
To start up a Solr instance, issue the following:
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='sunspot identifier id'>sunspot</span><span class='symbol val'>:solr</span><span class='symbol val'>:start</span>
</pre>
<p>
Note that using the built-in Solr instance packaged with Sunspot is great
for development, but is not recommended for production. See the Sunspot
documentation for more information.
</p>
<h2>Usage</h2>
<h3>Setup</h3>
<p>
In order for an ActiveRecord model to be indexable and searchable, it must
be configured for search. For example:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Post constant id'>Post</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='searchable identifier id'>searchable</span> <span class='do do kw'>do</span>
      <span class='text identifier id'>text</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:body</span>
      <span class='integer identifier id'>integer</span> <span class='symbol val'>:blog_id</span>
      <span class='time identifier id'>time</span> <span class='symbol val'>:updated_at</span>
      <span class='string identifier id'>string</span> <span class='symbol val'>:sort_title</span> <span class='do do kw'>do</span>
        <span class='title identifier id'>title</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^(an?|the) /</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
See the documentation for Sunspot.setup for full details on what can go in
the configuration block.
</p>
<h3>Indexing</h3>
<p>
By default, models are indexed whenever they are saved, and removed from
the index whenever they are destroyed. This behavior can be disabled:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Post constant id'>Post</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='searchable identifier id'>searchable</span> <span class='symbol val'>:auto_index</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='symbol val'>:auto_remove</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span> <span class='do do kw'>do</span>
      <span class='comment val'># setup...</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Note that <b>using the <tt>:auto_remove</tt> option is not recommended
</b>, as destroying an object without removing it from the index will
create an orphaned document in the index, which is a Bad Thing. Turning off
<tt>:auto_index</tt> is perfectly safe if you prefer to manage indexing
manually (perhaps using a background job).
</p>
<p>
If you have disabled lifecycle indexing hooks, you can invoke indexing
operations directly on your model:
</p>
<pre class="code">
  <span class='post identifier id'>post</span> <span class='assign token'>=</span> <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='create identifier id'>create</span>
  <span class='post identifier id'>post</span><span class='dot token'>.</span><span class='index identifier id'>index</span>
  <span class='post identifier id'>post</span><span class='dot token'>.</span><span class='remove_from_index identifier id'>remove_from_index</span>
</pre>
<h3>Committing</h3>
<p>
When data is changed in Solr, it is initially stored in memory and not made
available to the currently running searcher instance. Issuing a
<tt>commit</tt> to Solr will cause it to write the changes to disk, and
instantiate a new searcher instance. This operation is fairly expensive, so
rather than issuing a commit every time a document is added or removed,
Sunspot::Rails issues a commit at the end of any request where data has
been added to or removed from Solr. If you need to immediately issue a
commit, bang!-versions of the methods are available:
</p>
<pre class="code">
  <span class='post identifier id'>post</span> <span class='assign token'>=</span> <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='create identifier id'>create</span>
  <span class='post identifier id'>post</span><span class='dot token'>.</span><span class='index! fid id'>index!</span>
  <span class='comment val'># this is the same as...</span>
  <span class='post identifier id'>post</span><span class='dot token'>.</span><span class='index identifier id'>index</span>
  <span class='Sunspot constant id'>Sunspot</span><span class='dot token'>.</span><span class='commit identifier id'>commit</span>
</pre>
<p>
When writing tests outside of the context of a controller request, you will
want to use one of these two approaches.
</p>
<h3>Searching</h3>
<p>
Do it like this:
</p>
<pre class="code">
  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='search identifier id'>search</span> <span class='do do kw'>do</span>
    <span class='with identifier id'>with</span> <span class='symbol val'>:blog_id</span><span class='comma token'>,</span> <span class='integer val'>1</span>
    <span class='with identifier id'>with</span><span class='lparen token'>(</span><span class='symbol val'>:updated_at</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='greater_than identifier id'>greater_than</span><span class='lparen token'>(</span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span> <span class='minus op'>-</span> <span class='float val'>2</span><span class='dot token'>.</span><span class='weeks identifier id'>weeks</span><span class='rparen token'>)</span>
    <span class='order identifier id'>order</span> <span class='symbol val'>:sort_title</span><span class='comma token'>,</span> <span class='symbol val'>:asc</span>
    <span class='paginate identifier id'>paginate</span> <span class='symbol val'>:page</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='symbol val'>:per_page</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>15</span>
  <span class='end end kw'>end</span>
</pre>
<p>
See the documentation for <tt>Sunspot.search</tt> for all the options
available in the search block, and the information available in the result
block.
</p>
<h3>Searching for IDs</h3>
<p>
In some situations, you may want to get the IDs for models returned by a
search without actually loading the models out of the database. For that,
you can call <tt>search_ids</tt>, using the same block format as #search.
This will return an array of IDs.
</p>
<h3>Searching for multiple types</h3>
<p>
Sunspot is entirely agnostic about whether searches are for one or more
types; the only restriction is that columns used for restriction, ordering,
etc. are defined in the same way for all types being searched.
Sunspot::Rails does not provide any additional support for this, since
there is not anything useful to be added, so just use the interface
provided by Sunspot:
</p>
<pre class="code">
  <span class='Sunspot constant id'>Sunspot</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span><span class='Post constant id'>Post</span><span class='comma token'>,</span> <span class='Comment constant id'>Comment</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='with identifier id'>with</span> <span class='symbol val'>:blog_id</span><span class='comma token'>,</span> <span class='integer val'>1</span>
    <span class='order identifier id'>order</span> <span class='symbol val'>:created_at</span><span class='comma token'>,</span> <span class='symbol val'>:asc</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Be sure to check out the Sunspot documentation for all the details.
</p>
<h3>Adding search functionality in mixins</h3>
<p>
Sunspot does not require that search setup for a given class happen all in
one place; it is perfectly acceptable to call the <tt>Sunspot.setup</tt>
method more than once. This capability is particularly useful for adding
search functionality in mixins. For instance, if you have a
<tt>Ratable</tt> module, you may wish to add additional search fields for
searchable classes that mix in that module. For example:
</p>
<pre class="code">
  <span class='module module kw'>module</span> <span class='Ratable constant id'>Ratable</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='included identifier id'>included</span><span class='lparen token'>(</span><span class='base identifier id'>base</span><span class='rparen token'>)</span>
      <span class='if if kw'>if</span> <span class='base identifier id'>base</span><span class='dot token'>.</span><span class='searchable? fid id'>searchable?</span>
        <span class='base identifier id'>base</span><span class='dot token'>.</span><span class='searchable identifier id'>searchable</span> <span class='do do kw'>do</span>
          <span class='float identifier id'>float</span> <span class='symbol val'>:average_rating</span> <span class='do do kw'>do</span>
            <span class='ratings identifier id'>ratings</span><span class='dot token'>.</span><span class='average identifier id'>average</span><span class='lparen token'>(</span><span class='symbol val'>:value</span><span class='rparen token'>)</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
Note the use of <tt>base.searchable?</tt> - this ensures that only classes
that already have search enabled will have the additional configuration
added. The above pattern requires that the class be declared searchable
before the module is mixed in; other patterns (such as passing a
:searchable option to an acts_as_-style declaration) may be more flexible.
</p>
<h3>Utility methods</h3>
<p>
If you need to completely reindex all of the instances of a given model
class, you can issue:
</p>
<pre class="code">
  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='reindex identifier id'>reindex</span>
</pre>
<p>
If for some reason models get deleted from the database, but not from the
index, they will become index orphans - not a good situation. To get IDs
that exist in the index but not the database, you can use the
<tt>index_orphans</tt> method; to remove those documents from the index,
use <tt>clean_index_orphans</tt>. Note that neither of these operations
should be needed if Sunspot and Sunspot::Rails are used as intended.
</p>
<h2>Further Reading</h2>
<p>
Reading the <tt><a href="Sunspot.html" title="documentation">documentation</a></tt>[http://outoftime.github.com/sunspot/docs] is highly
recommended. Sunspot::Rails exists to wrap Sunspot with a Rails-friendly
API, but almost all of the functionality you use in Sunspot::Rails is
implemented in Sunspot.
</p>
<p>
Posts about Sunspot on my blog are available at
http://outofti.me/tagged/sunspot
</p>
<h2>Bugs</h2>
<p>
Please submit bug reports to
http://outoftime.lighthouseapp.com/projects/20339-sunspot
</p>
<h2>Contributors</h2>
<ul>
<li>Mat Brown (mat@patch.com)

</li>
<li>Peer Allan (peer.allan@gmail.com)

</li>
<li>Michael Moen (michael@underpantsgnome.com)

</li>
<li>Benjamin Krause (bk@benjaminkrause.com)

</li>
</ul>
<h2>License</h2>
<p>
Sunspot::Rails is distributed under the MIT License, copyright &#169; 2009
Mat Brown
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>