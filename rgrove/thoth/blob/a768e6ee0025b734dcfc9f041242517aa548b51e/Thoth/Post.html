<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>rgrove's thoth - Class: Thoth::Post - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/rgrove/commits/thoth/master" rel="alternate" title="Recent Commits to thoth:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("rgrove", "thoth", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("rgrove", "thoth", "a768e6ee0025b734dcfc9f041242517aa548b51e", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/rgrove/thoth/tree/">Source</a></li>
            <li class=""><a href="http://github.com/rgrove/thoth/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/rgrove/thoth/network">Network</a></li>            
            <li class=""><a href="http://github.com/rgrove/thoth/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/rgrove/thoth">Wiki</a></li>
            <li class=""><a href="http://github.com/rgrove/thoth/graphs">Graphs</a></li>                    
            <li class="active"><a href="/rgrove/thoth">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/rgrove">rgrove</a> / <b><a href="http://github.com/rgrove/thoth/tree">thoth</a></b>        
                <a id="namespaces_button" rel="rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Thoth_Post">
  <h1>Class: Thoth::Post</h1>
  <div class="section inheritance">
  <ul>
  <li><a title="Sequel::Model" href="../Sequel/Model.html">Sequel::Model</a></li><ul><li>Thoth::Post</li>
  </ul></ul>
</div><div class="section mixins">
  <h2>Included Modules</h2>
  <p><a title="Thoth::Helper::Wiki" href="Helper/Wiki.html">Thoth::Helper::Wiki</a></p>
</div><div class="section constants">
  
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get-class_method">get</span><span class='args'>(name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
&#8212; Class Methods ++ Gets the published post with the specified name,
where <em>name</em> can be either a name or an id.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#name_unique-3F-class_method">name_unique?</span><span class='args'>(name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns true if the specified post name is already taken or is a reserved
name.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#name_valid-3F-class_method">name_valid?</span><span class='args'>(name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns true if the specified post name consists of valid characters and is
not too long or too short.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#recent-class_method">recent</span><span class='args'>(page = 1, limit = 10)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Gets a paginated dataset of recent published posts sorted in reverse order
by creation time.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#recent_drafts-class_method">recent_drafts</span><span class='args'>(page = 1, limit = 10)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Gets a paginated dataset of recent draft posts sorted in reverse order by
creation time.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#suggest_name-class_method">suggest_name</span><span class='args'>(title)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns a valid, unique post name based on the specified title.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#atom_url-instance_method">#atom_url</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
&#8212; Instance Methods ++ Gets the Atom feed URL for this post.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#body-instance_method">#body</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#comments-instance_method">#comments</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Gets a dataset of comments attached to this post, ordered by creation time.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#created_at-instance_method">#created_at</span><span class='args'>(format = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Gets the creation time of this post.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#name-instance_method">#name</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#tags-instance_method">#tags</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Gets an Array of tags attached to this post, ordered by name.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#title-instance_method">#title</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#updated_at-instance_method">#updated_at</span><span class='args'>(format = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Gets the time this post was last updated.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#url-instance_method">#url</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Gets the URL for this post.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#validate-instance_method">#validate</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>get</h3>
</div><div id="get-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get</span><span class='args'>(name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
&#8212; Class Methods ++ Gets the published post with the specified name,
where <em>name</em> can be either a name or an id. Does not return drafts.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 59</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L59">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">59
60
61
62
63
64
65</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='Post constant id'>Post</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='symbol val'>:is_draft</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Numeric constant id'>Numeric</span><span class='rparen token'>)</span>

  <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span>
  <span class='name identifier id'>name</span> <span class='match op'>=~</span> <span class='regexp val'>/^\d+$/</span> <span class='question op'>?</span> <span class='Post constant id'>Post</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='symbol val'>:is_draft</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='rbrack token'>]</span> <span class='colon op'>:</span>
      <span class='Post constant id'>Post</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='symbol val'>:is_draft</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>name_unique?</h3>
</div><div id="name_unique-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>name_unique?</span><span class='args'>(name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns true if the specified post name is already taken or is a reserved
name.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 69</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L69">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">69
70
71
72
73</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='name_unique? fid id'>name_unique?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='notop op'>!</span><span class='PostController constant id'>PostController</span><span class='dot token'>.</span><span class='methods identifier id'>methods</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span>
      <span class='notop op'>!</span><span class='PostController constant id'>PostController</span><span class='dot token'>.</span><span class='instance_methods identifier id'>instance_methods</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span>
      <span class='notop op'>!</span><span class='Post constant id'>Post</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>name_valid?</h3>
</div><div id="name_valid-3F-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>name_valid?</span><span class='args'>(name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns true if the specified post name consists of valid characters and is
not too long or too short.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 77</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L77">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">77
78
79</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='name_valid? fid id'>name_valid?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='notop op'>!</span><span class='notop op'>!</span><span class='lparen token'>(</span><span class='name identifier id'>name</span> <span class='match op'>=~</span> <span class='regexp val'>/^[0-9a-z_-]{1,64}$/i</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='lparen token'>(</span><span class='name identifier id'>name</span> <span class='match op'>=~</span> <span class='regexp val'>/^[0-9]+$/</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>recent</h3>
</div><div id="recent-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>recent</span><span class='args'>(page = 1, limit = 10)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Gets a paginated dataset of recent published posts sorted in reverse order
by creation time. Does not return drafts.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 83</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L83">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">83
84
85
86</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='recent identifier id'>recent</span><span class='lparen token'>(</span><span class='page identifier id'>page</span> <span class='assign token'>=</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='limit identifier id'>limit</span> <span class='assign token'>=</span> <span class='integer val'>10</span><span class='rparen token'>)</span>
  <span class='filter identifier id'>filter</span><span class='lparen token'>(</span><span class='symbol val'>:is_draft</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='reverse_order identifier id'>reverse_order</span><span class='lparen token'>(</span><span class='symbol val'>:created_at</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='paginate identifier id'>paginate</span><span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='comma token'>,</span>
      <span class='limit identifier id'>limit</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>recent_drafts</h3>
</div><div id="recent_drafts-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>recent_drafts</span><span class='args'>(page = 1, limit = 10)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Gets a paginated dataset of recent draft posts sorted in reverse order by
creation time. Does not return published posts.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 90</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L90">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">90
91
92
93</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='recent_drafts identifier id'>recent_drafts</span><span class='lparen token'>(</span><span class='page identifier id'>page</span> <span class='assign token'>=</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='limit identifier id'>limit</span> <span class='assign token'>=</span> <span class='integer val'>10</span><span class='rparen token'>)</span>
  <span class='filter identifier id'>filter</span><span class='lparen token'>(</span><span class='symbol val'>:is_draft</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='reverse_order identifier id'>reverse_order</span><span class='lparen token'>(</span><span class='symbol val'>:created_at</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='paginate identifier id'>paginate</span><span class='lparen token'>(</span><span class='page identifier id'>page</span><span class='comma token'>,</span>
      <span class='limit identifier id'>limit</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>suggest_name</h3>
</div><div id="suggest_name-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>suggest_name</span><span class='args'>(title)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns a valid, unique post name based on the specified title. If the
title is empty or cannot be converted into a valid name, an empty string
will be returned.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 98</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L98">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='suggest_name identifier id'>suggest_name</span><span class='lparen token'>(</span><span class='title identifier id'>title</span><span class='rparen token'>)</span>
  <span class='index identifier id'>index</span> <span class='assign token'>=</span> <span class='integer val'>1</span>

  <span class='comment val'># Remove HTML entities and non-alphanumeric characters, replace spaces</span>
  <span class='comment val'># with hyphens, and truncate the name at 64 characters.</span>
  <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='title identifier id'>title</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/&amp;[^\s;]+;/</span><span class='comma token'>,</span> <span class='string val'>'_'</span><span class='rparen token'>)</span><span class='dot token'>.</span>
      <span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/[^\s0-9a-z-]/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\s+/</span><span class='comma token'>,</span> <span class='string val'>'-'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>63</span><span class='rbrack token'>]</span>

  <span class='comment val'># Strip off any trailing non-alphanumeric characters.</span>
  <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/[_-]+$/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>

  <span class='return return kw'>return</span> <span class='string val'>''</span> <span class='if if_mod kw'>if</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>

  <span class='comment val'># If the name consists solely of numeric characters, add an alpha</span>
  <span class='comment val'># character to prevent name/id ambiguity.</span>
  <span class='name identifier id'>name</span> <span class='opasgn op'>+=</span> <span class='string val'>'_'</span> <span class='unless unless_mod kw'>unless</span> <span class='name identifier id'>name</span> <span class='match op'>=~</span> <span class='regexp val'>/[a-z_-]/</span>

  <span class='comment val'># Ensure that the name doesn't conflict with any methods on the Post</span>
  <span class='comment val'># controller and that no two posts have the same name.</span>
  <span class='until until kw'>until</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='name_unique? fid id'>name_unique?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='name identifier id'>name</span><span class='lbrack token'>[</span><span class='integer val'>-1</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='index identifier id'>index</span>
      <span class='name identifier id'>name</span><span class='lbrack token'>[</span><span class='integer val'>-1</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='index identifier id'>index</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='else else kw'>else</span>
      <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>62</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='geq op'>&gt;=</span> <span class='integer val'>64</span>
      <span class='name identifier id'>name</span> <span class='opasgn op'>+=</span> <span class='lparen token'>(</span><span class='index identifier id'>index</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='return return kw'>return</span> <span class='name identifier id'>name</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>atom_url</h3>
</div><div id="atom_url-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>atom_url</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
&#8212; Instance Methods ++ Gets the Atom feed URL for this post.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 134</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L134">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">134
135
136</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='atom_url identifier id'>atom_url</span>
  <span class='Config constant id'>Config</span><span class='dot token'>.</span><span class='site identifier id'>site</span><span class='lbrack token'>[</span><span class='string val'>'url'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='chomp identifier id'>chomp</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='PostController constant id'>PostController</span><span class='dot token'>.</span><span class='r identifier id'>r</span><span class='lparen token'>(</span><span class='symbol val'>:atom</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>body</h3>
</div><div id="body-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>body</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 138</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L138">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">138
139
140
141</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='body= identifier id'>body=</span><span class='lparen token'>(</span><span class='body identifier id'>body</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='symbol val'>:body</span><span class='rbrack token'>]</span>          <span class='assign token'>=</span> <span class='body identifier id'>body</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='symbol val'>:body_rendered</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='RedCloth constant id'>RedCloth</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='wiki_to_html identifier id'>wiki_to_html</span><span class='lparen token'>(</span><span class='body identifier id'>body</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_html identifier id'>to_html</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>comments</h3>
</div><div id="comments-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>comments</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Gets a dataset of comments attached to this post, ordered by creation time.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 145</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L145">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">145
146
147</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='comments identifier id'>comments</span>
  <span class='@comments ivar id'>@comments</span> <span class='opasgn op'>||=</span> <span class='Comment constant id'>Comment</span><span class='dot token'>.</span><span class='filter identifier id'>filter</span><span class='lparen token'>(</span><span class='symbol val'>:post_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='id identifier id'>id</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='order identifier id'>order</span><span class='lparen token'>(</span><span class='symbol val'>:created_at</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>created_at</h3>
</div><div id="created_at-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>created_at</span><span class='args'>(format = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Gets the creation time of this post. If <em>format</em> is provided, the
time will be returned as a formatted String. See Time.strftime for details.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 151</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L151">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">151
152
153
154
155
156
157</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='created_at identifier id'>created_at</span><span class='lparen token'>(</span><span class='format identifier id'>format</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='new? fid id'>new?</span>
    <span class='format identifier id'>format</span> <span class='integer val'>? </span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='format identifier id'>format</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
  <span class='else else kw'>else</span>
    <span class='format identifier id'>format</span> <span class='integer val'>? </span><span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='symbol val'>:created_at</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='format identifier id'>format</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='symbol val'>:created_at</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>name</h3>
</div><div id="name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>name</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 159</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L159">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">159
160
161</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='name= identifier id'>name=</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span> <span class='unless unless_mod kw'>unless</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>tags</h3>
</div><div id="tags-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>tags</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Gets an Array of tags attached to this post, ordered by name.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 164</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L164">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='tags= identifier id'>tags=</span><span class='lparen token'>(</span><span class='tag_names identifier id'>tag_names</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='tag_names identifier id'>tag_names</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='String constant id'>String</span><span class='rparen token'>)</span>
    <span class='tag_names identifier id'>tag_names</span> <span class='assign token'>=</span> <span class='tag_names identifier id'>tag_names</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>','</span><span class='comma token'>,</span> <span class='integer val'>64</span><span class='rparen token'>)</span>
  <span class='elsif elsif kw'>elsif</span> <span class='notop op'>!</span><span class='tag_names identifier id'>tag_names</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Expected String or Array, got #{tag_names.class}&quot;</span>
  <span class='end end kw'>end</span>

  <span class='tag_names identifier id'>tag_names</span> <span class='assign token'>=</span> <span class='tag_names identifier id'>tag_names</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='n identifier id'>n</span><span class='bitor op'>|</span> <span class='n identifier id'>n</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span><span class='dot token'>.</span><span class='delete_if identifier id'>delete_if</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='n identifier id'>n</span><span class='bitor op'>|</span>
      <span class='n identifier id'>n</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span><span class='rbrace token'>}</span>

  <span class='if if kw'>if</span> <span class='new? fid id'>new?</span>
    <span class='comment val'># This Post hasn't been saved yet, so instead of attaching actual tags</span>
    <span class='comment val'># to it, we'll create a bunch of fake tags just for the preview. We</span>
    <span class='comment val'># won't create the real ones until the Post is saved.</span>
    <span class='@fake_tags ivar id'>@fake_tags</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

    <span class='tag_names identifier id'>tag_names</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='bitor op'>|</span> <span class='@fake_tags ivar id'>@fake_tags</span> <span class='lshft op'>&lt;&lt;</span> <span class='Tag constant id'>Tag</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
    <span class='@fake_tags ivar id'>@fake_tags</span><span class='dot token'>.</span><span class='sort! fid id'>sort!</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='comma token'>,</span> <span class='b identifier id'>b</span><span class='bitor op'>|</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='cmp op'>&lt;=&gt;</span> <span class='b identifier id'>b</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='rbrace token'>}</span>

    <span class='return return kw'>return</span> <span class='@fake_tags ivar id'>@fake_tags</span>
  <span class='else else kw'>else</span>
    <span class='real_tags identifier id'>real_tags</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

    <span class='comment val'># First delete any existing tag mappings for this post.</span>
    <span class='TagsPostsMap constant id'>TagsPostsMap</span><span class='dot token'>.</span><span class='filter identifier id'>filter</span><span class='lparen token'>(</span><span class='symbol val'>:post_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='id identifier id'>id</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span>

    <span class='comment val'># Create new tags and new mappings.</span>
    <span class='tag_names identifier id'>tag_names</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='bitor op'>|</span>
      <span class='tag identifier id'>tag</span> <span class='assign token'>=</span> <span class='Tag constant id'>Tag</span><span class='dot token'>.</span><span class='find_or_create identifier id'>find_or_create</span><span class='lparen token'>(</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='name identifier id'>name</span><span class='rparen token'>)</span>
      <span class='real_tags identifier id'>real_tags</span> <span class='lshft op'>&lt;&lt;</span> <span class='tag identifier id'>tag</span>
      <span class='TagsPostsMap constant id'>TagsPostsMap</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='symbol val'>:post_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='id identifier id'>id</span><span class='comma token'>,</span> <span class='symbol val'>:tag_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='return return kw'>return</span> <span class='real_tags identifier id'>real_tags</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>title</h3>
</div><div id="title-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>title</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 209</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L209">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">209
210
211
212
213
214
215
216
217
218</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='title= identifier id'>title=</span><span class='lparen token'>(</span><span class='title identifier id'>title</span><span class='rparen token'>)</span>
  <span class='title identifier id'>title</span><span class='dot token'>.</span><span class='strip! fid id'>strip!</span>

  <span class='comment val'># Set the post's name if it isn't already set.</span>
  <span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='colon op'>:</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='colon op'>:</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='suggest_name identifier id'>suggest_name</span><span class='lparen token'>(</span><span class='title identifier id'>title</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='symbol val'>:title</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='title identifier id'>title</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>updated_at</h3>
</div><div id="updated_at-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>updated_at</span><span class='args'>(format = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Gets the time this post was last updated. If <em>format</em> is provided,
the time will be returned as a formatted String. See Time.strftime for
details.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 223</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L223">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">223
224
225
226
227
228
229</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='updated_at identifier id'>updated_at</span><span class='lparen token'>(</span><span class='format identifier id'>format</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='new? fid id'>new?</span>
    <span class='format identifier id'>format</span> <span class='integer val'>? </span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='format identifier id'>format</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
  <span class='else else kw'>else</span>
    <span class='format identifier id'>format</span> <span class='integer val'>? </span><span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='symbol val'>:updated_at</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='format identifier id'>format</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='self self kw'>self</span><span class='lbrack token'>[</span><span class='symbol val'>:updated_at</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>url</h3>
</div><div id="url-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>url</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Gets the URL for this post.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 232</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L232">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">232
233
234</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='url identifier id'>url</span>
  <span class='Config constant id'>Config</span><span class='dot token'>.</span><span class='site identifier id'>site</span><span class='lbrack token'>[</span><span class='string val'>'url'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='chomp identifier id'>chomp</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='PostController constant id'>PostController</span><span class='dot token'>.</span><span class='r identifier id'>r</span><span class='lparen token'>(</span><span class='symbol val'>:/</span><span class='comma token'>,</span> <span class='name identifier id'>name</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>validate</h3>
</div><div id="validate-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>validate</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/thoth/model/post.rb', line 236</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rgrove/thoth/blob/a768e6ee0025b734dcfc9f041242517aa548b51e/lib/thoth/model/post.rb#L236">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">236
237
238
239
240
241
242
243
244
245
246</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='validate identifier id'>validate</span>
  <span class='validates_presence identifier id'>validates_presence</span><span class='lparen token'>(</span><span class='symbol val'>:name</span><span class='comma token'>,</span>  <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'Please enter a name for this post.'</span><span class='rparen token'>)</span>
  <span class='validates_presence identifier id'>validates_presence</span><span class='lparen token'>(</span><span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'Please enter a title for this post.'</span><span class='rparen token'>)</span>
  <span class='validates_presence identifier id'>validates_presence</span><span class='lparen token'>(</span><span class='symbol val'>:body</span><span class='comma token'>,</span>  <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;What's the matter? Cat got your tongue?&quot;</span><span class='rparen token'>)</span>

  <span class='validates_max_length identifier id'>validates_max_length</span><span class='lparen token'>(</span><span class='integer val'>255</span><span class='comma token'>,</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'Please enter a title under 255 characters.'</span><span class='rparen token'>)</span>
  <span class='validates_max_length identifier id'>validates_max_length</span><span class='lparen token'>(</span><span class='integer val'>64</span><span class='comma token'>,</span>  <span class='symbol val'>:name</span><span class='comma token'>,</span>  <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'Please enter a name under 64 characters.'</span><span class='rparen token'>)</span>

  <span class='validates_format identifier id'>validates_format</span><span class='lparen token'>(</span><span class='regexp val'>/^[0-9a-z_-]+$/i</span><span class='comma token'>,</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'Post names may only contain letters, numbers, underscores, and dashes.'</span><span class='rparen token'>)</span>
  <span class='validates_format identifier id'>validates_format</span><span class='lparen token'>(</span><span class='regexp val'>/[a-z_-]/i</span><span class='comma token'>,</span>       <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'Post names must contain at least one non-numeric character.'</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>