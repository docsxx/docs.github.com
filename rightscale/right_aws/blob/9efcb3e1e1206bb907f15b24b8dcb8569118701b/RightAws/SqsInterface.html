<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>rightscale's right_aws - Class: RightAws::SqsInterface - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/rightscale/commits/right_aws/master" rel="alternate" title="Recent Commits to right_aws:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("rightscale", "right_aws", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("rightscale", "right_aws", "9efcb3e1e1206bb907f15b24b8dcb8569118701b", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/rightscale/right_aws/tree/">Source</a></li>
            <li class=""><a href="http://github.com/rightscale/right_aws/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/rightscale/right_aws/network">Network</a></li>            
            <li class=""><a href="http://github.com/rightscale/right_aws/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/rightscale/right_aws">Wiki</a></li>
            <li class=""><a href="http://github.com/rightscale/right_aws/graphs">Graphs</a></li>                    
            <li class="active"><a href="/rightscale/right_aws">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/rightscale">rightscale</a> / <b><a href="http://github.com/rightscale/right_aws/tree">right_aws</a></b>        
                <a id="namespaces_button" rel="rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class RightAws_SqsInterface">
  <h1>Class: RightAws::SqsInterface</h1>
  <div class="section inheritance">
  <ul>
  <li><a href="RightAwsBase.html" title="RightAws::RightAwsBase">RightAws::RightAwsBase</a></li><ul><li>RightAws::SqsInterface</li>
  </ul></ul>
</div><div class="section mixins">
  <h2>Included Modules</h2>
  <p><a href="SqsInterface/RightAwsBaseInterface.html" title="RightAws::RightAwsBaseInterface">RightAws::RightAwsBaseInterface</a>, <a href="RightAwsBase.html" title="RightAws::RightAwsBase">RightAws::RightAwsBase</a></p>
</div><div class="section constants">
  <div class="thisclass">
  <h2>Constants</h2>
  <dl>
    
      <dt id="API_VERSION-constant">API_VERSION</dt>
      <dd>&quot;2007-05-01&quot;</dd>
    
      <dt id="DEFAULT_HOST-constant">DEFAULT_HOST</dt>
      <dd>&quot;queue.amazonaws.com&quot;</dd>
    
      <dt id="DEFAULT_PORT-constant">DEFAULT_PORT</dt>
      <dd>443</dd>
    
      <dt id="DEFAULT_PROTOCOL-constant">DEFAULT_PROTOCOL</dt>
      <dd>'https'</dd>
    
      <dt id="DEFAULT_VISIBILITY_TIMEOUT-constant">DEFAULT_VISIBILITY_TIMEOUT</dt>
      <dd>30</dd>
    
      <dt id="REQUEST_TTL-constant">REQUEST_TTL</dt>
      <dd>30</dd>
    
  </dl>
</div>
<div class="inherited">
  
  <div>
    <h2>Constants Inherited from <a href="RightAwsBase.html" title="RightAws::RightAwsBase">RightAws::RightAwsBase</a></h2>
    <p><span class='name'><a href="RightAwsBase.html#AMAZON_PROBLEMS-constant" title="AMAZON_PROBLEMS">AMAZON_PROBLEMS</a></span></p>
  </div>
  
</div>
<div class="clear"></div><div class="included">
  
  <div>
    <h2>Constants Included from <a href="SqsInterface/RightAwsBaseInterface.html" title="RightAws::RightAwsBaseInterface">RightAws::RightAwsBaseInterface</a></h2>
    <p><span class='name'><a href="RightAwsBaseInterface.html#DEFAULT_SIGNATURE_VERSION-constant" title="DEFAULT_SIGNATURE_VERSION">DEFAULT_SIGNATURE_VERSION</a></span></p>
  </div>
  
  <div>
    <h2>Constants Included from <a href="RightAwsBase.html" title="RightAws::RightAwsBase">RightAws::RightAwsBase</a></h2>
    <p><span class='name'><a href="RightAwsBase.html#AMAZON_PROBLEMS-constant" title="AMAZON_PROBLEMS">AMAZON_PROBLEMS</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(aws_access_key_id = nil, aws_secret_access_key = nil, params = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates a new SqsInterface instance.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span> <span class='assign token'>=</span> <span class='RightAws constant id'>RightAws</span><span class='colon2 op'>::</span><span class='SqsInterface constant id'>SqsInterface</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'1E3GDYEOGFJPIT75KDT40'</span><span class='comma token'>,</span><span class='string val'>'hgTHt68JY07JKUY08ftHYtERkjgtfERn57DFE379'</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='symbol val'>:multi_thread</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'/tmp/x.log'</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
</pre>
<p>
Params is a hash:
</p>
<pre class="code">
   <span class='lbrace token'>{</span><span class='symbol val'>:server</span>       <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'queue.amazonaws.com'</span> <span class='comment val'># Amazon service host: 'queue.amazonaws.com'(default)</span>
    <span class='symbol val'>:port</span>         <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>443</span>                   <span class='comment val'># Amazon service port: 80 or 443(default)</span>
    <span class='symbol val'>:multi_thread</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='bitor op'>|</span><span class='false false kw'>false</span>            <span class='comment val'># Multi-threaded (connection per each thread): true or false(default)</span>
    <span class='symbol val'>:signature_version</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'0'</span>              <span class='comment val'># The signature version : '0', '1' or '2'(default)</span>
    <span class='symbol val'>:logger</span>       <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Logger constant id'>Logger</span> <span class='Object constant id'>Object</span><span class='rbrace token'>}</span>        <span class='comment val'># Logger instance: logs to STDOUT if omitted }</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 62</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L62">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">62
63
64
65
66
67
68
69
70</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='aws_access_key_id identifier id'>aws_access_key_id</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='aws_secret_access_key identifier id'>aws_secret_access_key</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='init identifier id'>init</span><span class='lparen token'>(</span><span class='lbrace token'>{</span> <span class='symbol val'>:name</span>             <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'SQS'</span><span class='comma token'>,</span> 
         <span class='symbol val'>:default_host</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='host identifier id'>host</span>   <span class='colon op'>:</span> <span class='DEFAULT_HOST constant id'>DEFAULT_HOST</span><span class='comma token'>,</span> 
         <span class='symbol val'>:default_port</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='port identifier id'>port</span>   <span class='colon op'>:</span> <span class='DEFAULT_PORT constant id'>DEFAULT_PORT</span><span class='comma token'>,</span> 
         <span class='symbol val'>:default_protocol</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'SQS_URL'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='scheme identifier id'>scheme</span> <span class='colon op'>:</span> <span class='DEFAULT_PROTOCOL constant id'>DEFAULT_PROTOCOL</span> <span class='rbrace token'>}</span><span class='comma token'>,</span> 
       <span class='aws_access_key_id identifier id'>aws_access_key_id</span>     <span class='orop op'>||</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'AWS_ACCESS_KEY_ID'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> 
       <span class='aws_secret_access_key identifier id'>aws_secret_access_key</span> <span class='orop op'>||</span> <span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'AWS_SECRET_ACCESS_KEY'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> 
       <span class='params identifier id'>params</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#api-class_method">api</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#bench_sqs-class_method">bench_sqs</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#bench_xml-class_method">bench_xml</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#queue_name_by_url-class_method">queue_name_by_url</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns short queue name by url.
</p>

        
      </td>
    </tr>
  
</table><div class="inherited">
  
  <div>
    <h2>Public Class Methods Inherited from <a href="RightAwsBase.html" title="RightAws::RightAwsBase">RightAws::RightAwsBase</a></h2>
    <p><span class='name'><a href="RightAwsBase.html#amazon_problems-class_method" title="amazon_problems">amazon_problems</a></span>, <span class='name'><a href="RightAwsBase.html#amazon_problems%3D-class_method" title="amazon_problems=">amazon_problems=</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_grant-instance_method">#add_grant</span><span class='args'>(queue_url, grantee_email_address, permission = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Adds grants for user (identified by email he registered at Amazon).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#change_message_visibility-instance_method">#change_message_visibility</span><span class='args'>(queue_url, message_id, visibility_timeout = 0)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Changes message visibility timeout.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#clear_queue-instance_method">#clear_queue</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Removes all visible messages from queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_queue-instance_method">#create_queue</span><span class='args'>(queue_name, default_visibility_timeout = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Creates new queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete_message-instance_method">#delete_message</span><span class='args'>(queue_url, message_id)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes message from queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete_queue-instance_method">#delete_queue</span><span class='args'>(queue_url, force_deletion = false)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes queue (queue must be empty or <tt>force_deletion</tt> must be set
to true).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#force_clear_queue-instance_method">#force_clear_queue</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes queue then re-creates it (restores attributes also).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#force_delete_queue-instance_method">#force_delete_queue</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Deletes queue even if it has messages.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#generate_request-instance_method">#generate_request</span><span class='args'>(action, params = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <hr size="10"></hr><pre class="code">
     <span class='Requests constant id'>Requests</span>
</pre>
<hr size="10"></hr><p>
Generates a request hash for the query API.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#generate_rest_request-instance_method">#generate_rest_request</span><span class='args'>(method, param)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Generates a request hash for the REST API.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get_queue_attributes-instance_method">#get_queue_attributes</span><span class='args'>(queue_url, attribute = 'All')</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Retrieves the queue attribute(s).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get_queue_length-instance_method">#get_queue_length</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns approximate number of messages in queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#get_visibility_timeout-instance_method">#get_visibility_timeout</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Retrieves visibility timeout.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#list_grants-instance_method">#list_grants</span><span class='args'>(queue_url, grantee_email_address = nil, permission = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Retrieves hash of <tt>grantee_id</tt> =&gt; <tt>perms</tt> for this queue:.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#list_queues-instance_method">#list_queues</span><span class='args'>(queue_name_prefix = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Lists all queues owned by this user that have names beginning with
<tt>queue_name_prefix</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#peek_message-instance_method">#peek_message</span><span class='args'>(queue_url, message_id)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Peeks message from queue by message id.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#pop_message-instance_method">#pop_message</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Pops (retrieves and deletes) first accessible message from queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#pop_messages-instance_method">#pop_messages</span><span class='args'>(queue_url, number_of_messages = 1)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Pops (retrieves and deletes) up to &#8216;number_of_messages&#8217; from
queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#queue_name_by_url-instance_method">#queue_name_by_url</span><span class='args'>(queue_url)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns short queue name by url.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#queue_url_by_name-instance_method">#queue_url_by_name</span><span class='args'>(queue_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns queue url by queue short name or <tt>nil</tt> if queue is not
found.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#receive_message-instance_method">#receive_message</span><span class='args'>(queue_url, visibility_timeout = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Reads first accessible message from queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#receive_messages-instance_method">#receive_messages</span><span class='args'>(queue_url, number_of_messages = 1, visibility_timeout = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Retrieves a list of messages from queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#remove_grant-instance_method">#remove_grant</span><span class='args'>(queue_url, grantee_email_address_or_id, permission = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Revokes permission from user.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#request_info-instance_method">#request_info</span><span class='args'>(request, parser)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sends request to Amazon and parses the response Raises AwsError if any
banana happened.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#send_message-instance_method">#send_message</span><span class='args'>(queue_url, message)</span>
        <span class='block'></span>
        
          <span class='alias'>#push_message</span>
        
      </th>
      <td class="docstring">
        <p>
Sends new message to queue.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_queue_attributes-instance_method">#set_queue_attributes</span><span class='args'>(queue_url, attribute, value)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sets queue attribute.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_visibility_timeout-instance_method">#set_visibility_timeout</span><span class='args'>(queue_url, visibility_timeout = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Sets visibility timeout.
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a href="SqsInterface/RightAwsBaseInterface.html" title="RightAws::RightAwsBaseInterface">RightAws::RightAwsBaseInterface</a></h2>
    <p><span class='name'><a href="RightAwsBaseInterface.html#amazonize_list-instance_method" title="amazonize_list">amazonize_list</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#cache_hits%3F-instance_method" title="cache_hits?">cache_hits?</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#caching%3F-instance_method" title="caching?">caching?</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#generate_request_impl-instance_method" title="generate_request_impl">generate_request_impl</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#get_connection-instance_method" title="get_connection">get_connection</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#init-instance_method" title="init">init</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#last_request_id-instance_method" title="last_request_id">last_request_id</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#on_exception-instance_method" title="on_exception">on_exception</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#request_cache_or_info-instance_method" title="request_cache_or_info">request_cache_or_info</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#request_info_impl-instance_method" title="request_info_impl">request_info_impl</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#signed_service_params-instance_method" title="signed_service_params">signed_service_params</a></span>, <span class='name'><a href="RightAwsBaseInterface.html#update_cache-instance_method" title="update_cache">update_cache</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>api</h3>
</div><div id="api-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>api</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 46</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L46">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">46
47
48</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='api identifier id'>api</span> 
  <span class='@@api ivar id'>@@api</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>bench_sqs</h3>
</div><div id="bench_sqs-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>bench_sqs</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 41</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L41">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">41
42
43</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='bench_sqs identifier id'>bench_sqs</span>
  <span class='@@bench ivar id'>@@bench</span><span class='dot token'>.</span><span class='service identifier id'>service</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>bench_xml</h3>
</div><div id="bench_xml-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>bench_xml</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 38</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L38">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">38
39
40</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='bench_xml identifier id'>bench_xml</span>
  <span class='@@bench ivar id'>@@bench</span><span class='dot token'>.</span><span class='xml identifier id'>xml</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>queue_name_by_url</h3>
</div><div id="queue_name_by_url-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>queue_name_by_url</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns short queue name by url.
</p>
<pre class="code">
 <span class='RightSqs constant id'>RightSqs</span><span class='dot token'>.</span><span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 'my_awesome_queue'</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 379</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L379">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">379
380
381
382
383</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='queue_url identifier id'>queue_url</span><span class='lbrack token'>[</span><span class='regexp val'>/[^\/]*$/</span><span class='rbrack token'>]</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>add_grant</h3>
</div><div id="add_grant-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_grant</span><span class='args'>(queue_url, grantee_email_address, permission = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Adds grants for user (identified by email he registered at Amazon). Returns
<tt>true</tt> or an exception. Permission = &#8216;FULLCONTROL&#8217; |
&#8216;RECEIVEMESSAGE&#8217; | &#8216;SENDMESSAGE&#8217;.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='add_grant identifier id'>add_grant</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='string val'>'my_awesome_friend@gmail.com'</span><span class='comma token'>,</span> <span class='string val'>'FULLCONTROL'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 237</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L237">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">237
238
239
240
241
242
243
244
245</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_grant identifier id'>add_grant</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='grantee_email_address identifier id'>grantee_email_address</span><span class='comma token'>,</span> <span class='permission identifier id'>permission</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'AddGrant'</span><span class='comma token'>,</span> 
                              <span class='string val'>'Grantee.EmailAddress'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='grantee_email_address identifier id'>grantee_email_address</span><span class='comma token'>,</span>
                              <span class='string val'>'Permission'</span>           <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='permission identifier id'>permission</span><span class='comma token'>,</span>
                              <span class='symbol val'>:queue_url</span>             <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsStatusParser constant id'>SqsStatusParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>change_message_visibility</h3>
</div><div id="change_message_visibility-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>change_message_visibility</span><span class='args'>(queue_url, message_id, visibility_timeout = 0)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Changes message visibility timeout. Returns <tt>true</tt> or an exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='change_message_visibility identifier id'>change_message_visibility</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='string val'>'1234567890...0987654321'</span><span class='comma token'>,</span> <span class='integer val'>10</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 350</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L350">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">350
351
352
353
354
355
356
357
358</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='change_message_visibility identifier id'>change_message_visibility</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='message_id identifier id'>message_id</span><span class='comma token'>,</span> <span class='visibility_timeout identifier id'>visibility_timeout</span><span class='assign token'>=</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'ChangeMessageVisibility'</span><span class='comma token'>,</span> 
                              <span class='string val'>'MessageId'</span>         <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='message_id identifier id'>message_id</span><span class='comma token'>,</span>
                              <span class='string val'>'VisibilityTimeout'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='visibility_timeout identifier id'>visibility_timeout</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span>
                              <span class='symbol val'>:queue_url</span>          <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsStatusParser constant id'>SqsStatusParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>clear_queue</h3>
</div><div id="clear_queue-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>clear_queue</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Removes all visible messages from queue. Return <tt>true</tt> or an
exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='clear_queue identifier id'>clear_queue</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 409</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L409">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">409
410
411
412
413
414</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='clear_queue identifier id'>clear_queue</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='while while kw'>while</span> <span class='lparen token'>(</span><span class='m identifier id'>m</span> <span class='assign token'>=</span> <span class='pop_message identifier id'>pop_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='semicolon token'>;</span> <span class='end end kw'>end</span>   <span class='comment val'># delete all messages in queue</span>
  <span class='true true kw'>true</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_queue</h3>
</div><div id="create_queue-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_queue</span><span class='args'>(queue_name, default_visibility_timeout = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates new queue. Returns new queue link.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='create_queue identifier id'>create_queue</span><span class='lparen token'>(</span><span class='string val'>'my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span>
</pre>
<p>
PS Some queue based requests may not become available until a couple of
minutes after queue creation (permission grant and removal for example)
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 142</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L142">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">142
143
144
145
146
147</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create_queue identifier id'>create_queue</span><span class='lparen token'>(</span><span class='queue_name identifier id'>queue_name</span><span class='comma token'>,</span> <span class='default_visibility_timeout identifier id'>default_visibility_timeout</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'CreateQueue'</span><span class='comma token'>,</span> 
                              <span class='string val'>'QueueName'</span>                <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_name identifier id'>queue_name</span><span class='comma token'>,</span>
                              <span class='string val'>'DefaultVisibilityTimeout'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='default_visibility_timeout identifier id'>default_visibility_timeout</span> <span class='orop op'>||</span> <span class='DEFAULT_VISIBILITY_TIMEOUT constant id'>DEFAULT_VISIBILITY_TIMEOUT</span> <span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsCreateQueueParser constant id'>SqsCreateQueueParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete_message</h3>
</div><div id="delete_message-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete_message</span><span class='args'>(queue_url, message_id)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes message from queue. Returns <tt>true</tt> or an exception. Amazon
returns <tt>true</tt> on deletion of non-existent messages.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='delete_message identifier id'>delete_message</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='string val'>'12345678904...0987654321'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 337</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L337">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">337
338
339
340
341
342
343
344</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete_message identifier id'>delete_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='message_id identifier id'>message_id</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'DeleteMessage'</span><span class='comma token'>,</span> 
                              <span class='string val'>'MessageId'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='message_id identifier id'>message_id</span><span class='comma token'>,</span>
                              <span class='symbol val'>:queue_url</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsStatusParser constant id'>SqsStatusParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete_queue</h3>
</div><div id="delete_queue-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete_queue</span><span class='args'>(queue_url, force_deletion = false)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes queue (queue must be empty or <tt>force_deletion</tt> must be set
to true). Queue is identified by url. Returns <tt>true</tt> or an
exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='delete_queue identifier id'>delete_queue</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue_2'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 166</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L166">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">166
167
168
169
170
171
172
173</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete_queue identifier id'>delete_queue</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='force_deletion identifier id'>force_deletion</span> <span class='assign token'>=</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'DeleteQueue'</span><span class='comma token'>,</span> 
                              <span class='string val'>'ForceDeletion'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='force_deletion identifier id'>force_deletion</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span>
                              <span class='symbol val'>:queue_url</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsStatusParser constant id'>SqsStatusParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>force_clear_queue</h3>
</div><div id="force_clear_queue-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>force_clear_queue</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes queue then re-creates it (restores attributes also). The fastest
method to clear big queue or queue with invisible messages. Return
<tt>true</tt> or an exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='force_clear_queue identifier id'>force_clear_queue</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>
<p>
PS This function is no longer supported. Amazon has changed the SQS
semantics to require at least 60 seconds between queue deletion and
creation. Hence this method will fail with an exception.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 423</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L423">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">423
424
425
426
427
428
429
430
431
432
433
434
435</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='force_clear_queue identifier id'>force_clear_queue</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='queue_name identifier id'>queue_name</span>       <span class='assign token'>=</span> <span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='queue_attributes identifier id'>queue_attributes</span> <span class='assign token'>=</span> <span class='get_queue_attributes identifier id'>get_queue_attributes</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='force_delete_queue identifier id'>force_delete_queue</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='create_queue identifier id'>create_queue</span><span class='lparen token'>(</span><span class='queue_name identifier id'>queue_name</span><span class='rparen token'>)</span>
    <span class='comment val'># hmmm... The next line is a trick. Amazon do not want change attributes immediately after queue creation</span>
    <span class='comment val'># So we do 'empty' get_queue_attributes. Probably they need some time to allow attributes change.</span>
  <span class='get_queue_attributes identifier id'>get_queue_attributes</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>  
  <span class='queue_attributes identifier id'>queue_attributes</span><span class='dot token'>.</span><span class='each identifier id'>each</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='attribute identifier id'>attribute</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span> <span class='set_queue_attributes identifier id'>set_queue_attributes</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='attribute identifier id'>attribute</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='true true kw'>true</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>force_delete_queue</h3>
</div><div id="force_delete_queue-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>force_delete_queue</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Deletes queue even if it has messages. Return <tt>true</tt> or an
exception.
</p>
<pre class="code">
 <span class='force_delete_queue identifier id'>force_delete_queue</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>
<p>
P.S. same as
<tt>delete_queue(&#8216;http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue&#8217;,
true)</tt>
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 442</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L442">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">442
443
444
445
446</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='force_delete_queue identifier id'>force_delete_queue</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='delete_queue identifier id'>delete_queue</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='true true kw'>true</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>generate_request</h3>
</div><div id="generate_request-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>generate_request</span><span class='args'>(action, params = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="10"></hr><pre class="code">
     <span class='Requests constant id'>Requests</span>
</pre>
<hr size="10"></hr><p>
Generates a request hash for the query API
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 78</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L78">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='action identifier id'>action</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>  <span class='comment val'># :nodoc:</span>
    <span class='comment val'># Sometimes we need to use queue uri (delete queue etc)</span>
    <span class='comment val'># In that case we will use Symbol key: 'param[:queue_url]'</span>
  <span class='service identifier id'>service</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:queue_url</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='URI constant id'>URI</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:queue_url</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='colon op'>:</span> <span class='string val'>'/'</span>
    <span class='comment val'># remove unset(=optional) and symbolyc keys</span>
  <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='each identifier id'>each</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='orop op'>||</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Symbol constant id'>Symbol</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
    <span class='comment val'># prepare output hash</span>
  <span class='service_hash identifier id'>service_hash</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;Action&quot;</span>           <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='action identifier id'>action</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;Expires&quot;</span>          <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span> <span class='plus op'>+</span> <span class='REQUEST_TTL constant id'>REQUEST_TTL</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='utc identifier id'>utc</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='string val'>&quot;%Y-%m-%dT%H:%M:%SZ&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;AWSAccessKeyId&quot;</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@aws_access_key_id ivar id'>@aws_access_key_id</span><span class='comma token'>,</span>
                   <span class='string val'>&quot;Version&quot;</span>          <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='API_VERSION constant id'>API_VERSION</span> <span class='rbrace token'>}</span>
  <span class='service_hash identifier id'>service_hash</span><span class='dot token'>.</span><span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='rparen token'>)</span>
  <span class='service_params identifier id'>service_params</span> <span class='assign token'>=</span> <span class='signed_service_params identifier id'>signed_service_params</span><span class='lparen token'>(</span><span class='@aws_secret_access_key ivar id'>@aws_secret_access_key</span><span class='comma token'>,</span> <span class='service_hash identifier id'>service_hash</span><span class='comma token'>,</span> <span class='symbol val'>:get</span><span class='comma token'>,</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:server</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='service identifier id'>service</span><span class='rparen token'>)</span>
  <span class='request identifier id'>request</span>        <span class='assign token'>=</span> <span class='Net constant id'>Net</span><span class='colon2 op'>::</span><span class='HTTP constant id'>HTTP</span><span class='colon2 op'>::</span><span class='Get constant id'>Get</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{AwsUtils::URLencode(service)}?#{service_params}&quot;</span><span class='rparen token'>)</span>
    <span class='comment val'># prepare output hash</span>
  <span class='lbrace token'>{</span> <span class='symbol val'>:request</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='request identifier id'>request</span><span class='comma token'>,</span> 
    <span class='symbol val'>:server</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:server</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:port</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:port</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:protocol</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:protocol</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>generate_rest_request</h3>
</div><div id="generate_rest_request-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>generate_rest_request</span><span class='args'>(method, param)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Generates a request hash for the REST API
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 100</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L100">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='generate_rest_request identifier id'>generate_rest_request</span><span class='lparen token'>(</span><span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='param identifier id'>param</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='queue_uri identifier id'>queue_uri</span> <span class='assign token'>=</span> <span class='param identifier id'>param</span><span class='lbrack token'>[</span><span class='symbol val'>:queue_url</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='URI constant id'>URI</span><span class='lparen token'>(</span><span class='param identifier id'>param</span><span class='lbrack token'>[</span><span class='symbol val'>:queue_url</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='colon op'>:</span> <span class='string val'>'/'</span>
  <span class='message identifier id'>message</span>   <span class='assign token'>=</span> <span class='param identifier id'>param</span><span class='lbrack token'>[</span><span class='symbol val'>:message</span><span class='rbrack token'>]</span>                <span class='comment val'># extract message body if nesessary</span>
    <span class='comment val'># remove unset(=optional) and symbolyc keys</span>
  <span class='param identifier id'>param</span><span class='dot token'>.</span><span class='each identifier id'>each</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span> <span class='param identifier id'>param</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='orop op'>||</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Symbol constant id'>Symbol</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
    <span class='comment val'># created request</span>
  <span class='param_to_str identifier id'>param_to_str</span> <span class='assign token'>=</span> <span class='param identifier id'>param</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span><span class='val identifier id'>val</span><span class='bitor op'>|</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='plus op'>+</span> <span class='string val'>&quot;=&quot;</span> <span class='plus op'>+</span> <span class='CGI constant id'>CGI</span><span class='colon2 op'>::</span><span class='escape identifier id'>escape</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot;&amp;&quot;</span><span class='rparen token'>)</span>
  <span class='param_to_str identifier id'>param_to_str</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;?#{param_to_str}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='param_to_str identifier id'>param_to_str</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
  <span class='request identifier id'>request</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;Net::HTTP::#{method.capitalize}&quot;</span><span class='dot token'>.</span><span class='constantize identifier id'>constantize</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{queue_uri}#{param_to_str}&quot;</span><span class='rparen token'>)</span>
  <span class='request identifier id'>request</span><span class='dot token'>.</span><span class='body identifier id'>body</span> <span class='assign token'>=</span> <span class='message identifier id'>message</span> <span class='if if_mod kw'>if</span> <span class='message identifier id'>message</span>
    <span class='comment val'># set main headers</span>
  <span class='request identifier id'>request</span><span class='lbrack token'>[</span><span class='string val'>'content-md5'</span><span class='rbrack token'>]</span>  <span class='assign token'>=</span> <span class='string val'>''</span>
  <span class='request identifier id'>request</span><span class='lbrack token'>[</span><span class='string val'>'Content-Type'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>'text/plain'</span>
  <span class='request identifier id'>request</span><span class='lbrack token'>[</span><span class='string val'>'Date'</span><span class='rbrack token'>]</span>         <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span><span class='dot token'>.</span><span class='httpdate identifier id'>httpdate</span>
    <span class='comment val'># generate authorization string</span>
  <span class='auth_string identifier id'>auth_string</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{method.upcase}\n#{request['content-md5']}\n#{request['Content-Type']}\n#{request['Date']}\n#{CGI::unescape(queue_uri)}&quot;</span>
  <span class='signature identifier id'>signature</span>   <span class='assign token'>=</span> <span class='AwsUtils constant id'>AwsUtils</span><span class='colon2 op'>::</span><span class='sign identifier id'>sign</span><span class='lparen token'>(</span><span class='@aws_secret_access_key ivar id'>@aws_secret_access_key</span><span class='comma token'>,</span> <span class='auth_string identifier id'>auth_string</span><span class='rparen token'>)</span>
    <span class='comment val'># set other headers</span>
  <span class='request identifier id'>request</span><span class='lbrack token'>[</span><span class='string val'>'Authorization'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;AWS #{@aws_access_key_id}:#{signature}&quot;</span>
  <span class='request identifier id'>request</span><span class='lbrack token'>[</span><span class='string val'>'AWS-Version'</span><span class='rbrack token'>]</span>   <span class='assign token'>=</span> <span class='API_VERSION constant id'>API_VERSION</span>
    <span class='comment val'># prepare output hash</span>
  <span class='lbrace token'>{</span> <span class='symbol val'>:request</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='request identifier id'>request</span><span class='comma token'>,</span> 
    <span class='symbol val'>:server</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:server</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:port</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:port</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:protocol</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@params ivar id'>@params</span><span class='lbrack token'>[</span><span class='symbol val'>:protocol</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get_queue_attributes</h3>
</div><div id="get_queue_attributes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get_queue_attributes</span><span class='args'>(queue_url, attribute = 'All')</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Retrieves the queue attribute(s). Returns a hash of attribute(s) or an
exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='get_queue_attributes identifier id'>get_queue_attributes</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; {&quot;ApproximateNumberOfMessages&quot;=&gt;&quot;0&quot;, &quot;VisibilityTimeout&quot;=&gt;&quot;30&quot;}</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 179</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L179">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">179
180
181
182
183
184
185
186</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='get_queue_attributes identifier id'>get_queue_attributes</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='attribute identifier id'>attribute</span><span class='assign token'>=</span><span class='string val'>'All'</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'GetQueueAttributes'</span><span class='comma token'>,</span> 
                              <span class='string val'>'Attribute'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='attribute identifier id'>attribute</span><span class='comma token'>,</span>
                              <span class='symbol val'>:queue_url</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsGetQueueAttributesParser constant id'>SqsGetQueueAttributesParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get_queue_length</h3>
</div><div id="get_queue_length-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get_queue_length</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns approximate number of messages in queue.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='get_queue_length identifier id'>get_queue_length</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 3</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 399</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L399">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">399
400
401
402
403</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='get_queue_length identifier id'>get_queue_length</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='get_queue_attributes identifier id'>get_queue_attributes</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='string val'>'ApproximateNumberOfMessages'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get_visibility_timeout</h3>
</div><div id="get_visibility_timeout-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get_visibility_timeout</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Retrieves visibility timeout.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='get_visibility_timeout identifier id'>get_visibility_timeout</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 15</span>
</pre>
<p>
See also: <tt>get_queue_attributes</tt>
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 226</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L226">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">226
227
228
229
230
231</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='get_visibility_timeout identifier id'>get_visibility_timeout</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'GetVisibilityTimeout'</span><span class='comma token'>,</span> <span class='symbol val'>:queue_url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span> <span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsGetVisibilityTimeoutParser constant id'>SqsGetVisibilityTimeoutParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>list_grants</h3>
</div><div id="list_grants-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>list_grants</span><span class='args'>(queue_url, grantee_email_address = nil, permission = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Retrieves hash of <tt>grantee_id</tt> =&gt; <tt>perms</tt> for this queue:
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='list_grants identifier id'>list_grants</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt;</span>
   <span class='lbrace token'>{</span><span class='string val'>&quot;000000000000000000000001111111111117476c7fea6efb2c3347ac3ab2792a&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='lbrace token'>{</span><span class='symbol val'>:name=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;root&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:perms=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='string val'>&quot;FULLCONTROL&quot;</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span><span class='comma token'>,</span>
    <span class='string val'>&quot;00000000000000000000000111111111111e5828344600fc9e4a784a09e97041&quot;</span><span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='lbrace token'>{</span><span class='symbol val'>:name=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;myawesomefriend&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:perms=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='string val'>&quot;FULLCONTROL&quot;</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 253</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L253">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='list_grants identifier id'>list_grants</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='grantee_email_address identifier id'>grantee_email_address</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='permission identifier id'>permission</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'ListGrants'</span><span class='comma token'>,</span> 
                              <span class='string val'>'Grantee.EmailAddress'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='grantee_email_address identifier id'>grantee_email_address</span><span class='comma token'>,</span>
                              <span class='string val'>'Permission'</span>           <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='permission identifier id'>permission</span><span class='comma token'>,</span>
                              <span class='symbol val'>:queue_url</span>             <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsListGrantsParser constant id'>SqsListGrantsParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='comment val'># One user may have up to 3 permission records for every queue.</span>
    <span class='comment val'># We will join these records to one.</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>    
  <span class='response identifier id'>response</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='perm identifier id'>perm</span><span class='bitor op'>|</span>
    <span class='id identifier id'>id</span> <span class='assign token'>=</span> <span class='perm identifier id'>perm</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span>
      <span class='comment val'># create hash for new user if unexisit</span>
    <span class='result identifier id'>result</span><span class='lbrack token'>[</span><span class='id identifier id'>id</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:perms=</span><span class='gt op'>&gt;</span><span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span> <span class='unless unless_mod kw'>unless</span> <span class='result identifier id'>result</span><span class='lbrack token'>[</span><span class='id identifier id'>id</span><span class='rbrack token'>]</span>
      <span class='comment val'># fill current grantee params</span>
    <span class='result identifier id'>result</span><span class='lbrack token'>[</span><span class='id identifier id'>id</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:perms</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='perm identifier id'>perm</span><span class='lbrack token'>[</span><span class='symbol val'>:permission</span><span class='rbrack token'>]</span>
    <span class='result identifier id'>result</span><span class='lbrack token'>[</span><span class='id identifier id'>id</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='perm identifier id'>perm</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
  <span class='result identifier id'>result</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>list_queues</h3>
</div><div id="list_queues-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>list_queues</span><span class='args'>(queue_name_prefix = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Lists all queues owned by this user that have names beginning with
<tt>queue_name_prefix</tt>. If <tt>queue_name_prefix</tt> is omitted then
retrieves a list of all queues.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='create_queue identifier id'>create_queue</span><span class='lparen token'>(</span><span class='string val'>'my_awesome_queue'</span><span class='rparen token'>)</span>
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='create_queue identifier id'>create_queue</span><span class='lparen token'>(</span><span class='string val'>'my_awesome_queue_2'</span><span class='rparen token'>)</span>
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='list_queues identifier id'>list_queues</span><span class='lparen token'>(</span><span class='string val'>'my_awesome'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; ['http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue','http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue_2']</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 155</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L155">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">155
156
157
158
159
160</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='list_queues identifier id'>list_queues</span><span class='lparen token'>(</span><span class='queue_name_prefix identifier id'>queue_name_prefix</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'ListQueues'</span><span class='comma token'>,</span> <span class='string val'>'QueueNamePrefix'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_name_prefix identifier id'>queue_name_prefix</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsListQueuesParser constant id'>SqsListQueuesParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>peek_message</h3>
</div><div id="peek_message-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>peek_message</span><span class='args'>(queue_url, message_id)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Peeks message from queue by message id. Returns message in format of
<tt><tt>:body=&amp;gt;&amp;#8217;message_body&amp;#8217;</tt></tt> or <tt>nil</tt>.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='peek_message identifier id'>peek_message</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='string val'>'1234567890...0987654321'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt;</span>
   <span class='lbrace token'>{</span><span class='symbol val'>:id=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;12345678904GEZX9746N|0N9ED344VK5Z3SV1DTM0|1RVYH4X3TJ0987654321&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:body=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;message_1&quot;</span><span class='rbrace token'>}</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 311</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L311">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">311
312
313
314
315
316
317</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='peek_message identifier id'>peek_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='message_id identifier id'>message_id</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_rest_request identifier id'>generate_rest_request</span><span class='lparen token'>(</span><span class='string val'>'GET'</span><span class='comma token'>,</span> <span class='symbol val'>:queue_url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>&quot;#{queue_url}/#{CGI::escape message_id}&quot;</span> <span class='rparen token'>)</span>
  <span class='messages identifier id'>messages</span> <span class='assign token'>=</span> <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsReceiveMessagesParser constant id'>SqsReceiveMessagesParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='messages identifier id'>messages</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span> <span class='integer val'>? </span><span class='nil nil kw'>nil</span> <span class='colon op'>:</span> <span class='messages identifier id'>messages</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>pop_message</h3>
</div><div id="pop_message-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>pop_message</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Pops (retrieves and deletes) first accessible message from queue. Returns
the message in format <tt><tt>:body=&amp;gt;&amp;#8217;message_body&amp;#8217;</tt></tt> or <tt>nil</tt>.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='pop_message identifier id'>pop_message</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt;</span>
   <span class='lbrace token'>{</span><span class='symbol val'>:id=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;12345678904GEZX9746N|0N9ED344VK5Z3SV1DTM0|1RVYH4X3TJ0987654321&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:body=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;message_1&quot;</span><span class='rbrace token'>}</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 483</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L483">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">483
484
485
486
487
488</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='pop_message identifier id'>pop_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='messages identifier id'>messages</span> <span class='assign token'>=</span> <span class='pop_messages identifier id'>pop_messages</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='messages identifier id'>messages</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span> <span class='integer val'>? </span><span class='nil nil kw'>nil</span> <span class='colon op'>:</span> <span class='messages identifier id'>messages</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>pop_messages</h3>
</div><div id="pop_messages-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>pop_messages</span><span class='args'>(queue_url, number_of_messages = 1)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Pops (retrieves and deletes) up to &#8216;number_of_messages&#8217; from
queue. Returns an array of retrieved messages in format:
<tt>[{:id=&gt;&#8217;message_id&#8217;,
:body=&gt;&#8217;message_body&#8217;}]</tt>.
</p>
<pre class="code">
  <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='pop_messages identifier id'>pop_messages</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='integer val'>3</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt;</span>
   <span class='lbrack token'>[</span><span class='lbrace token'>{</span><span class='symbol val'>:id=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;12345678904GEZX9746N|0N9ED344VK5Z3SV1DTM0|1RVYH4X3TJ0987654321&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:body=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;message_1&quot;</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='dot3 op'>...</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rbrack token'>]</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 468</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L468">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">468
469
470
471
472
473
474
475
476</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='pop_messages identifier id'>pop_messages</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='number_of_messages identifier id'>number_of_messages</span><span class='assign token'>=</span><span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='messages identifier id'>messages</span> <span class='assign token'>=</span> <span class='receive_messages identifier id'>receive_messages</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='number_of_messages identifier id'>number_of_messages</span><span class='rparen token'>)</span>
  <span class='messages identifier id'>messages</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='message identifier id'>message</span><span class='bitor op'>|</span>
    <span class='delete_message identifier id'>delete_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='message identifier id'>message</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='messages identifier id'>messages</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>queue_name_by_url</h3>
</div><div id="queue_name_by_url-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>queue_name_by_url</span><span class='args'>(queue_url)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns short queue name by url.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 'my_awesome_queue'</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 389</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L389">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">389
390
391
392
393</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>queue_url_by_name</h3>
</div><div id="queue_url_by_name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>queue_url_by_name</span><span class='args'>(queue_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns queue url by queue short name or <tt>nil</tt> if queue is not found
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='queue_url_by_name identifier id'>queue_url_by_name</span><span class='lparen token'>(</span><span class='string val'>'my_awesome_queue'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 364</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L364">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">364
365
366
367
368
369
370
371
372
373</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='queue_url_by_name identifier id'>queue_url_by_name</span><span class='lparen token'>(</span><span class='queue_name identifier id'>queue_name</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='queue_name identifier id'>queue_name</span> <span class='if if_mod kw'>if</span> <span class='queue_name identifier id'>queue_name</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span>
  <span class='queue_urls identifier id'>queue_urls</span> <span class='assign token'>=</span> <span class='list_queues identifier id'>list_queues</span><span class='lparen token'>(</span><span class='queue_name identifier id'>queue_name</span><span class='rparen token'>)</span>
  <span class='queue_urls identifier id'>queue_urls</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='queue_url identifier id'>queue_url</span><span class='bitor op'>|</span>
    <span class='return return kw'>return</span> <span class='queue_url identifier id'>queue_url</span> <span class='if if_mod kw'>if</span> <span class='queue_name_by_url identifier id'>queue_name_by_url</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='queue_name identifier id'>queue_name</span>
  <span class='end end kw'>end</span>
  <span class='nil nil kw'>nil</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>receive_message</h3>
</div><div id="receive_message-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>receive_message</span><span class='args'>(queue_url, visibility_timeout = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Reads first accessible message from queue. Returns message as a hash:
<tt><tt>:body=&amp;gt;&amp;#8217;message_body&amp;#8217;</tt></tt> or <tt>nil</tt>.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='receive_message identifier id'>receive_message</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='integer val'>10</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt;</span>
   <span class='lbrace token'>{</span><span class='symbol val'>:id=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;12345678904GEZX9746N|0N9ED344VK5Z3SV1DTM0|1RVYH4X3TJ0987654321&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:body=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;message_1&quot;</span><span class='rbrace token'>}</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 453</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L453">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">453
454
455
456
457
458</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='receive_message identifier id'>receive_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='visibility_timeout identifier id'>visibility_timeout</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='receive_messages identifier id'>receive_messages</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='visibility_timeout identifier id'>visibility_timeout</span><span class='rparen token'>)</span>
  <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span> <span class='integer val'>? </span><span class='nil nil kw'>nil</span> <span class='colon op'>:</span> <span class='result identifier id'>result</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>receive_messages</h3>
</div><div id="receive_messages-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>receive_messages</span><span class='args'>(queue_url, number_of_messages = 1, visibility_timeout = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Retrieves a list of messages from queue. Returns an array of hashes in
format: <tt><tt>body=&amp;gt;&amp;#8217;message_body&amp;#8217;</tt></tt>
</p>
<pre class="code">
  <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='receive_messages identifier id'>receive_messages</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span><span class='integer val'>10</span><span class='comma token'>,</span> <span class='integer val'>5</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt;</span>
   <span class='lbrack token'>[</span><span class='lbrace token'>{</span><span class='symbol val'>:id=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;12345678904GEZX9746N|0N9ED344VK5Z3SV1DTM0|1RVYH4X3TJ0987654321&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:body=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;message_1&quot;</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='dot3 op'>...</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rbrack token'>]</span>
</pre>
<p>
P.S. Usually returns fewer messages than requested even if they are
available.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 295</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L295">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">295
296
297
298
299
300
301
302
303
304</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='receive_messages identifier id'>receive_messages</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='number_of_messages identifier id'>number_of_messages</span><span class='assign token'>=</span><span class='integer val'>1</span><span class='comma token'>,</span> <span class='visibility_timeout identifier id'>visibility_timeout</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='number_of_messages identifier id'>number_of_messages</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_rest_request identifier id'>generate_rest_request</span><span class='lparen token'>(</span><span class='string val'>'GET'</span><span class='comma token'>,</span>
                                   <span class='string val'>'NumberOfMessages'</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='number_of_messages identifier id'>number_of_messages</span><span class='comma token'>,</span>
                                   <span class='string val'>'VisibilityTimeout'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='visibility_timeout identifier id'>visibility_timeout</span><span class='comma token'>,</span>
                                   <span class='symbol val'>:queue_url</span>          <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>&quot;#{queue_url}/front&quot;</span> <span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsReceiveMessagesParser constant id'>SqsReceiveMessagesParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>remove_grant</h3>
</div><div id="remove_grant-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>remove_grant</span><span class='args'>(queue_url, grantee_email_address_or_id, permission = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Revokes permission from user. Returns <tt>true</tt> or an exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='remove_grant identifier id'>remove_grant</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='string val'>'my_awesome_friend@gmail.com'</span><span class='comma token'>,</span> <span class='string val'>'FULLCONTROL'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 277</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L277">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">277
278
279
280
281
282
283
284
285
286</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='remove_grant identifier id'>remove_grant</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='grantee_email_address_or_id identifier id'>grantee_email_address_or_id</span><span class='comma token'>,</span> <span class='permission identifier id'>permission</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='grantee_key identifier id'>grantee_key</span> <span class='assign token'>=</span> <span class='grantee_email_address_or_id identifier id'>grantee_email_address_or_id</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'@'</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='string val'>'Grantee.EmailAddress'</span> <span class='colon op'>:</span> <span class='string val'>'Grantee.ID'</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'RemoveGrant'</span><span class='comma token'>,</span> 
                              <span class='grantee_key identifier id'>grantee_key</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='grantee_email_address_or_id identifier id'>grantee_email_address_or_id</span><span class='comma token'>,</span>
                              <span class='string val'>'Permission'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='permission identifier id'>permission</span><span class='comma token'>,</span>
                              <span class='symbol val'>:queue_url</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsStatusParser constant id'>SqsStatusParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>request_info</h3>
</div><div id="request_info-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>request_info</span><span class='args'>(request, parser)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sends request to Amazon and parses the response Raises AwsError if any
banana happened
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 130</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L130">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">130
131
132</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='request identifier id'>request</span><span class='comma token'>,</span> <span class='parser identifier id'>parser</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='request_info_impl identifier id'>request_info_impl</span><span class='lparen token'>(</span><span class='symbol val'>:sqs_connection</span><span class='comma token'>,</span> <span class='@@bench ivar id'>@@bench</span><span class='comma token'>,</span> <span class='request identifier id'>request</span><span class='comma token'>,</span> <span class='parser identifier id'>parser</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>send_message</h3>
</div><div id="send_message-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>send_message</span><span class='args'>(queue_url, message)</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="push_message-instance_method">push_message</tt>
  
</p>
</div><div class="section docstring">
  <p>
Sends new message to queue.Returns &#8216;message_id&#8217; or raises an
exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='send_message identifier id'>send_message</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='string val'>'message_1'</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; &quot;1234567890...0987654321&quot;</span>
</pre>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 323</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L323">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">323
324
325
326
327
328
329
330</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='send_message identifier id'>send_message</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='message identifier id'>message</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_rest_request identifier id'>generate_rest_request</span><span class='lparen token'>(</span><span class='string val'>'PUT'</span><span class='comma token'>,</span>
                                   <span class='symbol val'>:message</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='message identifier id'>message</span><span class='comma token'>,</span>
                                   <span class='symbol val'>:queue_url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>&quot;#{queue_url}/back&quot;</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsSendMessagesParser constant id'>SqsSendMessagesParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_queue_attributes</h3>
</div><div id="set_queue_attributes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_queue_attributes</span><span class='args'>(queue_url, attribute, value)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sets queue attribute. Returns <tt>true</tt> or an exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='set_queue_attributes identifier id'>set_queue_attributes</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='string val'>&quot;VisibilityTimeout&quot;</span><span class='comma token'>,</span> <span class='integer val'>10</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>
<p>
P.S. Amazon returns success even if the attribute does not exist. Also,
attribute values may not be immediately available to other queries for some
time after an update (see the SQS documentation for semantics).
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 195</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L195">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">195
196
197
198
199
200
201
202
203</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_queue_attributes identifier id'>set_queue_attributes</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='attribute identifier id'>attribute</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'SetQueueAttributes'</span><span class='comma token'>,</span> 
                              <span class='string val'>'Attribute'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='attribute identifier id'>attribute</span><span class='comma token'>,</span>
                              <span class='string val'>'Value'</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='value identifier id'>value</span><span class='comma token'>,</span>
                              <span class='symbol val'>:queue_url</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span><span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsStatusParser constant id'>SqsStatusParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_visibility_timeout</h3>
</div><div id="set_visibility_timeout-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_visibility_timeout</span><span class='args'>(queue_url, visibility_timeout = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Sets visibility timeout. Returns <tt>true</tt> or an exception.
</p>
<pre class="code">
 <span class='sqs identifier id'>sqs</span><span class='dot token'>.</span><span class='set_visibility_timeout identifier id'>set_visibility_timeout</span><span class='lparen token'>(</span><span class='string val'>'http://queue.amazonaws.com/ZZ7XXXYYYBINS/my_awesome_queue'</span><span class='comma token'>,</span> <span class='integer val'>15</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; true</span>
</pre>
<p>
See also: <tt>set_queue_attributes</tt>
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/sqs/right_sqs_interface.rb', line 211</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rightscale/right_aws/blob/9efcb3e1e1206bb907f15b24b8dcb8569118701b/lib/sqs/right_sqs_interface.rb#L211">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">211
212
213
214
215
216
217
218</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_visibility_timeout identifier id'>set_visibility_timeout</span><span class='lparen token'>(</span><span class='queue_url identifier id'>queue_url</span><span class='comma token'>,</span> <span class='visibility_timeout identifier id'>visibility_timeout</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='req_hash identifier id'>req_hash</span> <span class='assign token'>=</span> <span class='generate_request identifier id'>generate_request</span><span class='lparen token'>(</span><span class='string val'>'SetVisibilityTimeout'</span><span class='comma token'>,</span> 
                              <span class='string val'>'VisibilityTimeout'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='visibility_timeout identifier id'>visibility_timeout</span> <span class='orop op'>||</span> <span class='DEFAULT_VISIBILITY_TIMEOUT constant id'>DEFAULT_VISIBILITY_TIMEOUT</span><span class='comma token'>,</span>
                              <span class='symbol val'>:queue_url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='queue_url identifier id'>queue_url</span> <span class='rparen token'>)</span>
  <span class='request_info identifier id'>request_info</span><span class='lparen token'>(</span><span class='req_hash identifier id'>req_hash</span><span class='comma token'>,</span> <span class='SqsStatusParser constant id'>SqsStatusParser</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:logger</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@logger ivar id'>@logger</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rescue rescue kw'>rescue</span>
  <span class='on_exception identifier id'>on_exception</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>