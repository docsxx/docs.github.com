<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="syntax_highlight.css" type="text/css" charset="utf-8" />

    <title>README</title>
  </head>
  <body>
    <div id="content">
      <div class="section docstring readme">
        <h1>LazyDeveloper</h1>
<p>
Copyright (C) 2007-2009 Brian P. Hogan and Kevin Gisi
</p>
<p>
Developers are lazy. I know I am. If I have to do things over and over, I
want them to be automated. Maybe that&#8217;s efficient and not lazy.
However, lazy is a shorter word and it&#8217;s funnier to call this plugin
LazyDeveloper.
</p>
<p>
This plugin provides some useful Rake tasks that will make your life a
little easier. I use them in many of my projects and I invite you to do the
same.
</p>
<h1>Usage</h1>
<h2>Nuke</h2>
<p>
The Nuke tasks make cleaning up your project a breeze.
</p>
<p>
Let&#8217;s say a previous developer generated some controllers, models,
helpers, and views using scaffolding and a healthy mix of broken Test::Unit
test cases. You&#8217;ve already generated a nice RESTful controller,
correctly pluralized while the original ones are not. When you look in your
controllers folder, you see this:
</p>
<pre class="code">
  <span class='account_controller identifier id'>account_controller</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
  <span class='accounts_controller identifier id'>accounts_controller</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
</pre>
<p>
If you want to clean this up, you&#8217;d have to delete these files like
so:
</p>
<pre class="code">
  <span class='rm identifier id'>rm</span> <span class='minus op'>-</span><span class='rf identifier id'>rf</span> <span class='app identifier id'>app</span><span class='div op'>/</span><span class='controllers identifier id'>controllers</span><span class='div op'>/</span><span class='account_controller identifier id'>account_controller</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
  <span class='rm identifier id'>rm</span> <span class='minus op'>-</span><span class='rf identifier id'>rf</span> <span class='app identifier id'>app</span><span class='div op'>/</span><span class='helpers identifier id'>helpers</span><span class='div op'>/</span><span class='account_helper identifier id'>account_helper</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
  <span class='rm identifier id'>rm</span> <span class='minus op'>-</span><span class='rf identifier id'>rf</span> <span class='app identifier id'>app</span><span class='div op'>/</span><span class='views identifier id'>views</span><span class='div op'>/</span><span class='account identifier id'>account</span>
  <span class='rm identifier id'>rm</span> <span class='minus op'>-</span><span class='rf identifier id'>rf</span> <span class='test identifier id'>test</span><span class='div op'>/</span><span class='functionals identifier id'>functionals</span><span class='div op'>/</span><span class='account_controller_test identifier id'>account_controller_test</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
</pre>
<p>
Well, with the Nuke tasks, you can do this easily:
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='nuke identifier id'>nuke</span><span class='symbol val'>:vc</span><span class='symbol val'>:account</span>
</pre>
<p>
The &#8216;vc&#8217; is for view and controller. It&#8217;ll take out the
whole controller and view combination, including the helper too.
It&#8217;ll blow away any specs or tests associated, and it&#8217;ll detect
if you&#8217;re using svn or git, so instead of deleting the files
directly, it will schedule them for deletion via your source control
system.
</p>
<p>
The nuke tasks can be quite granular.
</p>
<pre class="code">
 <span class='mult op'>*</span> <span class='rake identifier id'>rake</span> <span class='nuke identifier id'>nuke</span><span class='symbol val'>:model</span><span class='symbol val'>:user</span> <span class='div op'>/</span> <span class='rake identifier id'>rake</span> <span class='nuke identifier id'>nuke</span><span class='symbol val'>:m</span><span class='symbol val'>:user</span>
 <span class='mult op'>*</span> <span class='rake identifier id'>rake</span> <span class='nuke identifier id'>nuke</span><span class='symbol val'>:controller</span><span class='symbol val'>:user</span> <span class='div op'>/</span> <span class='rake identifier id'>rake</span> <span class='nuke identifier id'>nuke</span><span class='symbol val'>:c</span><span class='symbol val'>:user</span>
 <span class='mult op'>*</span> <span class='rake identifier id'>rake</span> <span class='nuke identifier id'>nuke</span><span class='symbol val'>:views</span><span class='symbol val'>:user</span> <span class='div op'>/</span> <span class='rake identifier id'>rake</span> <span class='nuke identifier id'>nuke</span><span class='symbol val'>:v</span><span class='symbol val'>:user</span>
 <span class='mult op'>*</span> <span class='rake identifier id'>rake</span> <span class='nuke identifier id'>nuke</span><span class='symbol val'>:helper</span><span class='symbol val'>:user</span>
 <span class='mult op'>*</span> <span class='rake identifier id'>rake</span> <span class='nuke identifier id'>nuke</span><span class='symbol val'>:vc</span><span class='symbol val'>:user</span>
 <span class='mult op'>*</span> <span class='rake identifier id'>rake</span> <span class='nuke identifier id'>nuke</span><span class='symbol val'>:mvc</span><span class='symbol val'>:user</span>
</pre>
<p>
The only thing these tasks won&#8217;t do is remove migrations, and
that&#8217;s cos I think that&#8217;s dangerous
</p>
<h2>Databases</h2>
<h3>rake db:migrate</h3>
<p>
Everyone I know forgets to clone the test database when they make changes,
so I decided to override rake:db:migrate so that when you run it, it
automatically clones the test database, which is really useful if you run
tests individually via TextMate or through the command line.
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='db identifier id'>db</span><span class='symbol val'>:migrate</span>
  <span class='rake identifier id'>rake</span> <span class='db identifier id'>db</span><span class='symbol val'>:migrate</span><span class='symbol val'>:up</span>
  <span class='rake identifier id'>rake</span> <span class='db identifier id'>db</span><span class='symbol val'>:migrate</span><span class='symbol val'>:down</span>
</pre>
<p>
are all supported.
</p>
<h3>rake db:migrate:compact</h3>
<p>
Uses schema.rb to construct a brand new clean migration and moves all of
your existing migrations out of the way. This might at first seem to
violate the spirit of migrations, but honestly sometimes large projects
have a LOT of migrations and it can get difficult to manage these files.
</p>
<h3>rake db:remigrate</h3>
<p>
Sometimes you just need to wipe out your database tables and start over.
This task drops your tables and starts over by dropping the tables directly
and then re-running your migrations. This provides a great way to test to
make sure you haven&#8217;t broken migrations at some point, which
<b>will</b> happen to you at some point.
</p>
<h3>rake db:to_yaml (formerly rake:db:import)</h3>
<p>
Dump your database to fixtures. Stores them in RAILS_ROOT/production_data.
You can then use this to load the data back into another database, even one
of a different type. We&#8217;ve used this to move data from SQL Server to
MySQL and back again.
</p>
<h3>rake db:from_yaml (formerly rake:db:export)</h3>
<p>
Load fixtures from RAILS_ROOT/production_data into your database. Loads
fixtures dumped by using rake db:export
</p>
<h2>Subversion</h2>
<h3>rake svn:root</h3>
<p>
Displays the root of your repository
</p>
<h3>rake svn:tags</h3>
<p>
Displays all the tags. Assumes you use a tags/ folder and a /trunk folder
</p>
<h3>rake svn:tags:last</h3>
<p>
Displays the last tag.
</p>
<h3>rake svn:tag TAG=rel_1-0-0</h3>
<p>
Creates a new tag from the trunk.
</p>
<h2>Rcov</h2>
<p>
Thanks to Kevin Gisi for these tasks that make running RCov a bit easier.
Requires the RCov gem and the rails_rcov plugin
</p>
<h3>rake rcov:models</h3>
<p>
Runs coverage on your models
</p>
<h3>rake rcov:controllers</h3>
<p>
Runs coverage on your controllers
</p>
<h3>rake rcov:full</h3>
<p>
Runs coverage on models and controllers
</p>
<h2>Tests</h2>
<p>
Based on an idea from Geoffrey Grosenbach, you can run all tests in
units\user_test.rb by doing
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='test identifier id'>test</span><span class='symbol val'>:units</span><span class='symbol val'>:user</span><span class='symbol val'>:all</span>
</pre>
<p>
Or run a specific test by specifying all or part of a name. For example, if
I wanted to run the &quot;test_create&quot; test case, I would use
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='test identifier id'>test</span><span class='symbol val'>:units</span><span class='symbol val'>:user</span><span class='symbol val'>:create</span>
</pre>
<p>
The same rules apply to functional tests
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='test identifier id'>test</span><span class='symbol val'>:functionals</span><span class='symbol val'>:users</span><span class='symbol val'>:list</span>
</pre>
<h2>Specs</h2>
<p>
RSpec gets some love here. If you need nice output for your specs, we
overrode some of the built-in specs.
</p>
<h3>Running all model specs</h3>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='spec identifier id'>spec</span><span class='symbol val'>:models</span>
</pre>
<h3>Running all controller specs</h3>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='spec identifier id'>spec</span><span class='symbol val'>:controllers</span>
</pre>
<h3>Running a specific model or controller spec</h3>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='spec identifier id'>spec</span><span class='symbol val'>:model</span><span class='symbol val'>:user</span>
  <span class='rake identifier id'>rake</span> <span class='spec identifier id'>spec</span><span class='symbol val'>:controller</span><span class='symbol val'>:sessions</span>
</pre>
<h2>Plugins</h2>
<p>
Create a file in your Home folder called .plugins and you can have all of
your favorite plugins easily installed by doing
</p>
<pre class="code">
   <span class='rake identifier id'>rake</span> <span class='rails identifier id'>rails</span><span class='symbol val'>:install</span><span class='symbol val'>:plugins</span>
</pre>
<p>
Just put each plugin name or repository on its own line.
</p>
<p>
Windows users need to set the HOME environment variable.
</p>
<h2>Cleaning Up</h2>
<p>
Run
</p>
<pre class="code">
  <span class='rake identifier id'>rake</span> <span class='rails identifier id'>rails</span><span class='symbol val'>:clear</span>
</pre>
<p>
to clean up tmp, logs, and docs in one easy command.
</p>
<p>
Copyright &#169; 2007-2009 Brian Hogan and Kevin Gisi. Released under the
MIT license
</p>

      </div>
    </div>
  </body>
</html>