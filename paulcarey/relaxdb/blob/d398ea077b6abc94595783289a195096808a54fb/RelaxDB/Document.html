<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>paulcarey's relaxdb - Class: RelaxDB::Document - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/paulcarey/commits/relaxdb/master" rel="alternate" title="Recent Commits to relaxdb:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("paulcarey", "relaxdb", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("paulcarey", "relaxdb", "d398ea077b6abc94595783289a195096808a54fb", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/paulcarey/relaxdb/tree/">Source</a></li>
            <li class=""><a href="http://github.com/paulcarey/relaxdb/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/paulcarey/relaxdb/network">Network</a></li>            
            <li class=""><a href="http://github.com/paulcarey/relaxdb/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/paulcarey/relaxdb">Wiki</a></li>
            <li class=""><a href="http://github.com/paulcarey/relaxdb/graphs">Graphs</a></li>                    
            <li class="active"><a href="/paulcarey/relaxdb">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/paulcarey">paulcarey</a> / <b><a href="http://github.com/paulcarey/relaxdb/tree">relaxdb</a></b>        
                <a id="namespaces_button" rel="paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class RelaxDB_Document">
  <h1>Class: RelaxDB::Document</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a title="RelaxDB::Validators" href="Validators.html">RelaxDB::Validators</a></p>
</div><div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">errors</td>
          <td class="readwrite">
            [<span id='errors-instance_method'>R</span><span id='errors=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Used to store validation messages.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">save_list</td>
          <td class="readwrite">
            [<span id='save_list-instance_method'>R</span><span id='save_list=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
A call issued to save_all will save this object and the contents of the
save_list.
</p>

            
          </td>
        </tr>
      
        <tr>
          <th class="name">validation_skip_list</td>
          <td class="readwrite">
            [<span id='validation_skip_list-instance_method'>R</span><span id='validation_skip_list=-instance_method'>W</span>] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Attribute symbols added to this list won&#8217;t be validated on save.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(hash = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 117</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L117">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='hash identifier id'>hash</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='string val'>&quot;_id&quot;</span><span class='rbrack token'>]</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='_id identifier id'>_id</span> <span class='assign token'>=</span> <span class='UuidGenerator constant id'>UuidGenerator</span><span class='dot token'>.</span><span class='uuid identifier id'>uuid</span> 
  <span class='end end kw'>end</span>
  
  <span class='@errors ivar id'>@errors</span> <span class='assign token'>=</span> <span class='Errors constant id'>Errors</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='@save_list ivar id'>@save_list</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@validation_skip_list ivar id'>@validation_skip_list</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

  <span class='comment val'># Set default properties if this object isn't being loaded from CouchDB</span>
  <span class='unless unless kw'>unless</span> <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='string val'>&quot;_rev&quot;</span><span class='rbrack token'>]</span>
    <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prop identifier id'>prop</span><span class='bitor op'>|</span>
     <span class='if if kw'>if</span> <span class='methods identifier id'>methods</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='dstring node'>&quot;set_default_#{prop}&quot;</span><span class='rparen token'>)</span>
       <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;set_default_#{prop}&quot;</span><span class='rparen token'>)</span>
     <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
        
  <span class='@set_derived_props ivar id'>@set_derived_props</span> <span class='assign token'>=</span> <span class='hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='string val'>&quot;_rev&quot;</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='false false kw'>false</span> <span class='colon op'>:</span> <span class='true true kw'>true</span>
  <span class='set_attributes identifier id'>set_attributes</span><span class='lparen token'>(</span><span class='hash identifier id'>hash</span><span class='rparen token'>)</span>
  <span class='@set_derived_props ivar id'>@set_derived_props</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_derived_prop-class_method">add_derived_prop</span><span class='args'>(prop, deriver)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
See derived_properties_spec.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_save-class_method">after_save</span><span class='args'>(callback)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_save_callbacks-class_method">after_save_callbacks</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#all-class_method">all</span><span class='args'>(params = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#all_relationships-class_method">all_relationships</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_save-class_method">before_save</span><span class='args'>(callback)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Callbacks - define these in a module and mix&#8217;em&#8217;in ?.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_save_callbacks-class_method">before_save_callbacks</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#belongs_to-class_method">belongs_to</span><span class='args'>(relationship, opts = {})</span>
        <span class='block'></span>
        
          <span class='alias'>references</span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_all_by_class_view-class_method">create_all_by_class_view</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Create a view allowing all instances of a particular class to be retreived.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_validation_msg-class_method">create_validation_msg</span><span class='args'>(att, validation_msg)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_validator-class_method">create_validator</span><span class='args'>(att, v)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_views-class_method">create_views</span><span class='args'>(chain)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#has_many-class_method">has_many</span><span class='args'>(relationship, opts = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#has_many_rels-class_method">has_many_rels</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#has_one-class_method">has_one</span><span class='args'>(relationship)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#has_one_rels-class_method">has_one_rels</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#inherited-class_method">inherited</span><span class='args'>(subclass)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#property-class_method">property</span><span class='args'>(prop, opts = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#references_many-class_method">references_many</span><span class='args'>(relationship, opts = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
If you&#8217;re using this method, read the specs and make sure you
understand how it can be used and how it shouldn&#8217;t be used.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#references_many_rels-class_method">references_many_rels</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#up_chain-class_method">up_chain</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#view_by-class_method">view_by</span><span class='args'>(*atts)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Creates the corresponding view and stores it in CouchDB Adds by_ and
paginate_by_ methods to the class.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#-3D-3D-instance_method">#==</span><span class='args'>(other)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns true if CouchDB considers other to be the same as self.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_save-instance_method">#after_save</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#before_save-instance_method">#before_save</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#conflicted-instance_method">#conflicted</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create_or_get_proxy-instance_method">#create_or_get_proxy</span><span class='args'>(klass, relationship, opts = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#destroy-21-instance_method">#destroy!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
destroy! nullifies all relationships with peers and children before
deleting itself in CouchDB The nullification and deletion are not performed
in a transaction.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#inspect-instance_method">#inspect</span><span class='args'></span>
        <span class='block'></span>
        
          <span class='alias'>#to_s</span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#new_document-3F-instance_method">#new_document?</span><span class='args'></span>
        <span class='block'></span>
        
          <span class='alias'>#unsaved?</span>
        
          <span class='alias'>#new_record?</span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#on_update_conflict-instance_method">#on_update_conflict</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#post_save-instance_method">#post_save</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#pre_save-instance_method">#pre_save</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save-instance_method">#save</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Not yet sure of final implemention for hooks - may lean more towards DM
than AR.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save-21-instance_method">#save!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_all-instance_method">#save_all</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
save_all and save_all! are untested.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_all-21-instance_method">#save_all!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#save_to_couch-instance_method">#save_to_couch</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_attributes-instance_method">#set_attributes</span><span class='args'>(data)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#set_timestamps-instance_method">#set_timestamps</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_json-instance_method">#to_json</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_param-instance_method">#to_param</span><span class='args'></span>
        <span class='block'></span>
        
          <span class='alias'>#id</span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#update_conflict-3F-instance_method">#update_conflict?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#validate_att-instance_method">#validate_att</span><span class='args'>(att_name, att_val)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#validates-3F-instance_method">#validates?</span><span class='args'></span>
        <span class='block'></span>
        
          <span class='alias'>#validate</span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#write_derived_props-instance_method">#write_derived_props</span><span class='args'>(source)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
The rationale for rescuing the send below is that the lambda for a derived
property shouldn&#8217;t need to concern itself with checking the validity
of the underlying property.
</p>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a title="RelaxDB::Validators" href="Validators.html">RelaxDB::Validators</a></h2>
    <p><span class='name'><a title="validator_required" href="Validators.html#validator_required-instance_method">validator_required</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>add_derived_prop</h3>
</div><div id="add_derived_prop-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_derived_prop</span><span class='args'>(prop, deriver)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
See derived_properties_spec.rb for usage
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 90</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L90">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">90
91
92
93
94</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='add_derived_prop identifier id'>add_derived_prop</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='comma token'>,</span> <span class='deriver identifier id'>deriver</span><span class='rparen token'>)</span>
    <span class='source identifier id'>source</span><span class='comma token'>,</span> <span class='writer identifier id'>writer</span> <span class='assign token'>=</span> <span class='deriver identifier id'>deriver</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='deriver identifier id'>deriver</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
    <span class='derived_prop_writers identifier id'>derived_prop_writers</span><span class='lbrack token'>[</span><span class='source identifier id'>source</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='derived_prop_writers identifier id'>derived_prop_writers</span><span class='lbrack token'>[</span><span class='source identifier id'>source</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='prop identifier id'>prop</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='writer identifier id'>writer</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_save</h3>
</div><div id="after_save-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_save</span><span class='args'>(callback)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 509</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L509">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">509
510
511</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='after_save identifier id'>after_save</span><span class='lparen token'>(</span><span class='callback identifier id'>callback</span><span class='rparen token'>)</span>
  <span class='after_save_callbacks identifier id'>after_save_callbacks</span> <span class='lshft op'>&lt;&lt;</span> <span class='callback identifier id'>callback</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_save_callbacks</h3>
</div><div id="after_save_callbacks-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_save_callbacks</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 513</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L513">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">513
514
515</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='after_save_callbacks identifier id'>after_save_callbacks</span>
  <span class='@after_save_callbacks ivar id'>@after_save_callbacks</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>all</h3>
</div><div id="all-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>all</span><span class='args'>(params = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 460</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L460">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">460
461
462</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='all identifier id'>all</span> <span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='AllDelegator constant id'>AllDelegator</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='params identifier id'>params</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>all_relationships</h3>
</div><div id="all_relationships-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>all_relationships</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 456</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L456">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">456
457
458</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='all_relationships identifier id'>all_relationships</span>
  <span class='belongs_to_rels identifier id'>belongs_to_rels</span> <span class='plus op'>+</span> <span class='has_one_rels identifier id'>has_one_rels</span> <span class='plus op'>+</span> <span class='has_many_rels identifier id'>has_many_rels</span> <span class='plus op'>+</span> <span class='references_many_rels identifier id'>references_many_rels</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_save</h3>
</div><div id="before_save-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_save</span><span class='args'>(callback)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Callbacks - define these in a module and mix&#8217;em&#8217;in ?
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 491</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L491">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">491
492
493</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='before_save identifier id'>before_save</span><span class='lparen token'>(</span><span class='callback identifier id'>callback</span><span class='rparen token'>)</span>
  <span class='before_save_callbacks identifier id'>before_save_callbacks</span> <span class='lshft op'>&lt;&lt;</span> <span class='callback identifier id'>callback</span>
<span class='end end kw'>end</span> 
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_save_callbacks</h3>
</div><div id="before_save_callbacks-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_save_callbacks</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 495</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L495">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">495
496
497</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='before_save_callbacks identifier id'>before_save_callbacks</span>
  <span class='@before_save ivar id'>@before_save</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>       
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>belongs_to</h3>
</div><div id="belongs_to-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>belongs_to</span><span class='args'>(relationship, opts = {})</span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="references-class_method">references</tt>
  
</p>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 421</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L421">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='belongs_to identifier id'>belongs_to</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='belongs_to_rels identifier id'>belongs_to_rels</span><span class='lbrack token'>[</span><span class='relationship identifier id'>relationship</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span>

  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='create_or_get_proxy identifier id'>create_or_get_proxy</span><span class='lparen token'>(</span><span class='BelongsToProxy constant id'>BelongsToProxy</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='target identifier id'>target</span>
  <span class='end end kw'>end</span>
  
  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{relationship}=&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='new_target identifier id'>new_target</span><span class='bitor op'>|</span>
    <span class='create_or_get_proxy identifier id'>create_or_get_proxy</span><span class='lparen token'>(</span><span class='BelongsToProxy constant id'>BelongsToProxy</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='target identifier id'>target</span> <span class='assign token'>=</span> <span class='new_target identifier id'>new_target</span>
    <span class='write_derived_props identifier id'>write_derived_props</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@set_derived_props ivar id'>@set_derived_props</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># Allows all writers to be invoked from the hash passed to initialize </span>
  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{relationship}_id=&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='id identifier id'>id</span><span class='bitor op'>|</span>
    <span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{relationship}_id&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='comma token'>,</span> <span class='id identifier id'>id</span><span class='rparen token'>)</span>
    <span class='write_derived_props identifier id'>write_derived_props</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@set_derived_props ivar id'>@set_derived_props</span>
    <span class='id identifier id'>id</span>
  <span class='end end kw'>end</span>

  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{relationship}_id&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{relationship}_id&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='create_validator identifier id'>create_validator</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:validator</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:validator</span><span class='rbrack token'>]</span>
  
  <span class='comment val'># Untested below</span>
  <span class='create_validation_msg identifier id'>create_validation_msg</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:validation_msg</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:validation_msg</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_all_by_class_view</h3>
</div><div id="create_all_by_class_view-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_all_by_class_view</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Create a view allowing all instances of a particular class to be retreived
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 561</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L561">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">561
562
563
564
565
566</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='create_all_by_class_view identifier id'>create_all_by_class_view</span>
  <span class='if if kw'>if</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='create_views? fid id'>create_views?</span>        
    <span class='view identifier id'>view</span> <span class='assign token'>=</span> <span class='ViewCreator constant id'>ViewCreator</span><span class='dot token'>.</span><span class='all identifier id'>all</span>
    <span class='view identifier id'>view</span><span class='dot token'>.</span><span class='save identifier id'>save</span> <span class='unless unless_mod kw'>unless</span> <span class='view identifier id'>view</span><span class='dot token'>.</span><span class='exists? fid id'>exists?</span>
  <span class='end end kw'>end</span>        
<span class='end end kw'>end</span>          
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_validation_msg</h3>
</div><div id="create_validation_msg-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_validation_msg</span><span class='args'>(att, validation_msg)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 79</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L79">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">79
80
81
82
83
84
85
86
87</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='create_validation_msg identifier id'>create_validation_msg</span><span class='lparen token'>(</span><span class='att identifier id'>att</span><span class='comma token'>,</span> <span class='validation_msg identifier id'>validation_msg</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='validation_msg identifier id'>validation_msg</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Proc constant id'>Proc</span><span class='rparen token'>)</span>        
    <span class='validation_msg identifier id'>validation_msg</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span> <span class='question op'>?</span>
      <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{att}_validation_msg&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='att_val identifier id'>att_val</span><span class='bitor op'>|</span> <span class='validation_msg identifier id'>validation_msg</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='att_val identifier id'>att_val</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span> <span class='colon op'>:</span>
      <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{att}_validation_msg&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='att_val identifier id'>att_val</span><span class='bitor op'>|</span> <span class='validation_msg identifier id'>validation_msg</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='att_val identifier id'>att_val</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span> 
  <span class='else else kw'>else</span>  
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{att}_validation_msg&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='validation_msg identifier id'>validation_msg</span> <span class='rbrace token'>}</span> 
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_validator</h3>
</div><div id="create_validator-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_validator</span><span class='args'>(att, v)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 66</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L66">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">66
67
68
69
70
71
72
73
74
75
76
77</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='create_validator identifier id'>create_validator</span><span class='lparen token'>(</span><span class='att identifier id'>att</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='rparen token'>)</span>
  <span class='method_name identifier id'>method_name</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;validate_#{att}&quot;</span>
  <span class='if if kw'>if</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span> <span class='Proc constant id'>Proc</span>
    <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='arity identifier id'>arity</span> <span class='eq op'>==</span> <span class='integer val'>1</span> <span class='question op'>?</span>
      <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='att_val identifier id'>att_val</span><span class='bitor op'>|</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='att_val identifier id'>att_val</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span> <span class='colon op'>:</span>
      <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='att_val identifier id'>att_val</span><span class='bitor op'>|</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='att_val identifier id'>att_val</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='elsif elsif kw'>elsif</span> <span class='instance_methods identifier id'>instance_methods</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='dstring node'>&quot;validator_#{v}&quot;</span>
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='att_val identifier id'>att_val</span><span class='bitor op'>|</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;validator_#{v}&quot;</span><span class='comma token'>,</span> <span class='att_val identifier id'>att_val</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='else else kw'>else</span>
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='method_name identifier id'>method_name</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='att_val identifier id'>att_val</span><span class='bitor op'>|</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='comma token'>,</span> <span class='att_val identifier id'>att_val</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>          
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_views</h3>
</div><div id="create_views-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_views</span><span class='args'>(chain)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 582</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L582">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">582
583
584
585
586
587
588
589
590
591
592
593
594</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='create_views identifier id'>create_views</span> <span class='chain identifier id'>chain</span>
  <span class='comment val'># Capture the inheritance hierarchy of this class</span>
  <span class='@hierarchy ivar id'>@hierarchy</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='rbrack token'>]</span>
  <span class='@hierarchy ivar id'>@hierarchy</span> <span class='opasgn op'>+=</span> <span class='chain identifier id'>chain</span>
  <span class='@hierarchy ivar id'>@hierarchy</span><span class='dot token'>.</span><span class='uniq! fid id'>uniq!</span>

  <span class='if if kw'>if</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='create_views? fid id'>create_views?</span>
    <span class='ViewCreator constant id'>ViewCreator</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='@hierarchy ivar id'>@hierarchy</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
    <span class='__view_by_list__ identifier id'>__view_by_list__</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='atts identifier id'>atts</span><span class='bitor op'>|</span>
      <span class='ViewCreator constant id'>ViewCreator</span><span class='dot token'>.</span><span class='by_att_list identifier id'>by_att_list</span><span class='lparen token'>(</span><span class='@hierarchy ivar id'>@hierarchy</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='atts identifier id'>atts</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>has_many</h3>
</div><div id="has_many-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>has_many</span><span class='args'>(relationship, opts = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 370</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L370">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='has_many identifier id'>has_many</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='@has_many_rels ivar id'>@has_many_rels</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@has_many_rels ivar id'>@has_many_rels</span> <span class='lshft op'>&lt;&lt;</span> <span class='relationship identifier id'>relationship</span>
  
  <span class='if if kw'>if</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='create_views? fid id'>create_views?</span>
    <span class='target_class identifier id'>target_class</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:class</span><span class='rbrack token'>]</span>
    <span class='relationship_as_viewed_by_target identifier id'>relationship_as_viewed_by_target</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:known_as</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='snake_case identifier id'>snake_case</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='ViewCreator constant id'>ViewCreator</span><span class='dot token'>.</span><span class='has_n identifier id'>has_n</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='target_class identifier id'>target_class</span><span class='comma token'>,</span> <span class='relationship_as_viewed_by_target identifier id'>relationship_as_viewed_by_target</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
  <span class='end end kw'>end</span>      
  
  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='create_or_get_proxy identifier id'>create_or_get_proxy</span><span class='lparen token'>(</span><span class='HasManyProxy constant id'>HasManyProxy</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{relationship}=&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='children identifier id'>children</span><span class='bitor op'>|</span>
    <span class='create_or_get_proxy identifier id'>create_or_get_proxy</span><span class='lparen token'>(</span><span class='HasManyProxy constant id'>HasManyProxy</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='children identifier id'>children</span> <span class='assign token'>=</span> <span class='children identifier id'>children</span>
    <span class='write_derived_props identifier id'>write_derived_props</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@set_derived_props ivar id'>@set_derived_props</span>
    <span class='children identifier id'>children</span>
  <span class='end end kw'>end</span>      
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>has_many_rels</h3>
</div><div id="has_many_rels-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>has_many_rels</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 391</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L391">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">391
392
393
394</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='has_many_rels identifier id'>has_many_rels</span>
  <span class='comment val'># Don't force clients to check its instantiated</span>
  <span class='@has_many_rels ivar id'>@has_many_rels</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>has_one</h3>
</div><div id="has_one-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>has_one</span><span class='args'>(relationship)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 396</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L396">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='has_one identifier id'>has_one</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span>
  <span class='@has_one_rels ivar id'>@has_one_rels</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@has_one_rels ivar id'>@has_one_rels</span> <span class='lshft op'>&lt;&lt;</span> <span class='relationship identifier id'>relationship</span>
  
  <span class='if if kw'>if</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='create_views? fid id'>create_views?</span>
    <span class='target_class identifier id'>target_class</span> <span class='assign token'>=</span> <span class='relationship identifier id'>relationship</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='camel_case identifier id'>camel_case</span>      
    <span class='relationship_as_viewed_by_target identifier id'>relationship_as_viewed_by_target</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='snake_case identifier id'>snake_case</span>      
    <span class='ViewCreator constant id'>ViewCreator</span><span class='dot token'>.</span><span class='has_n identifier id'>has_n</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='target_class identifier id'>target_class</span><span class='comma token'>,</span> <span class='relationship_as_viewed_by_target identifier id'>relationship_as_viewed_by_target</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
  <span class='end end kw'>end</span>
  
  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>      
    <span class='create_or_get_proxy identifier id'>create_or_get_proxy</span><span class='lparen token'>(</span><span class='HasOneProxy constant id'>HasOneProxy</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='target identifier id'>target</span>
  <span class='end end kw'>end</span>
  
  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{relationship}=&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='new_target identifier id'>new_target</span><span class='bitor op'>|</span>
    <span class='create_or_get_proxy identifier id'>create_or_get_proxy</span><span class='lparen token'>(</span><span class='HasOneProxy constant id'>HasOneProxy</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='target identifier id'>target</span> <span class='assign token'>=</span> <span class='new_target identifier id'>new_target</span>
    <span class='write_derived_props identifier id'>write_derived_props</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@set_derived_props ivar id'>@set_derived_props</span>
    <span class='new_target identifier id'>new_target</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>has_one_rels</h3>
</div><div id="has_one_rels-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>has_one_rels</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 417</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L417">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">417
418
419</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='has_one_rels identifier id'>has_one_rels</span>
  <span class='@has_one_rels ivar id'>@has_one_rels</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>      
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>inherited</h3>
</div><div id="inherited-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>inherited</span><span class='args'>(subclass)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 568</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L568">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">568
569
570
571
572
573</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='inherited identifier id'>inherited</span> <span class='subclass identifier id'>subclass</span>
  <span class='chain identifier id'>chain</span> <span class='assign token'>=</span> <span class='subclass identifier id'>subclass</span><span class='dot token'>.</span><span class='up_chain identifier id'>up_chain</span>
  <span class='while while kw'>while</span> <span class='k identifier id'>k</span> <span class='assign token'>=</span> <span class='chain identifier id'>chain</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span>
    <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='create_views identifier id'>create_views</span> <span class='chain identifier id'>chain</span>
  <span class='end end kw'>end</span>      
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>property</h3>
</div><div id="property-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>property</span><span class='args'>(prop, opts = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 30</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L30">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='property identifier id'>property</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='properties identifier id'>properties</span> <span class='lshft op'>&lt;&lt;</span> <span class='prop identifier id'>prop</span>

  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{prop}&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>        
  <span class='end end kw'>end</span>

  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{prop}=&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='bitor op'>|</span>
    <span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{prop}&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:default</span><span class='rbrack token'>]</span>
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;set_default_#{prop}&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
      <span class='default identifier id'>default</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:default</span><span class='rbrack token'>]</span>
      <span class='default identifier id'>default</span> <span class='assign token'>=</span> <span class='default identifier id'>default</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Proc constant id'>Proc</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='default identifier id'>default</span><span class='dot token'>.</span><span class='call identifier id'>call</span> <span class='colon op'>:</span> <span class='default identifier id'>default</span>
      <span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{prop}&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='comma token'>,</span> <span class='default identifier id'>default</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:validator</span><span class='rbrack token'>]</span>
    <span class='create_validator identifier id'>create_validator</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:validator</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> 
  <span class='end end kw'>end</span>
  
  <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:validation_msg</span><span class='rbrack token'>]</span>
    <span class='create_validation_msg identifier id'>create_validation_msg</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:validation_msg</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='if if kw'>if</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:derived</span><span class='rbrack token'>]</span>
    <span class='add_derived_prop identifier id'>add_derived_prop</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:derived</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>    
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>references_many</h3>
</div><div id="references_many-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>references_many</span><span class='args'>(relationship, opts = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
If you&#8217;re using this method, read the specs and make sure you
understand how it can be used and how it shouldn&#8217;t be used
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 334</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L334">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='references_many identifier id'>references_many</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='comment val'># Treat the representation as a standard property </span>
  <span class='properties identifier id'>properties</span> <span class='lshft op'>&lt;&lt;</span> <span class='relationship identifier id'>relationship</span>
  
  <span class='comment val'># Keep track of the relationship so peers can be disassociated on destroy</span>
  <span class='@references_many_rels ivar id'>@references_many_rels</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@references_many_rels ivar id'>@references_many_rels</span> <span class='lshft op'>&lt;&lt;</span> <span class='relationship identifier id'>relationship</span>
 
  <span class='id_arr_sym identifier id'>id_arr_sym</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;@#{relationship}&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
  
  <span class='if if kw'>if</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='create_views? fid id'>create_views?</span>
    <span class='target_class identifier id'>target_class</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:class</span><span class='rbrack token'>]</span>
    <span class='relationship_as_viewed_by_target identifier id'>relationship_as_viewed_by_target</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:known_as</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='ViewCreator constant id'>ViewCreator</span><span class='dot token'>.</span><span class='references_many identifier id'>references_many</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='target_class identifier id'>target_class</span><span class='comma token'>,</span> <span class='relationship_as_viewed_by_target identifier id'>relationship_as_viewed_by_target</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
  <span class='end end kw'>end</span>            
 
  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='id_arr_sym identifier id'>id_arr_sym</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='instance_variable_defined? fid id'>instance_variable_defined?</span> <span class='id_arr_sym identifier id'>id_arr_sym</span>
    <span class='create_or_get_proxy identifier id'>create_or_get_proxy</span><span class='lparen token'>(</span><span class='ReferencesManyProxy constant id'>ReferencesManyProxy</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{relationship}_ids&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='id_arr_sym identifier id'>id_arr_sym</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='instance_variable_defined? fid id'>instance_variable_defined?</span> <span class='id_arr_sym identifier id'>id_arr_sym</span>
    <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='id_arr_sym identifier id'>id_arr_sym</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{relationship}=&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='val identifier id'>val</span><span class='bitor op'>|</span>
    <span class='comment val'># Don't invoke this method unless you know what you're doing</span>
    <span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='id_arr_sym identifier id'>id_arr_sym</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>           
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>references_many_rels</h3>
</div><div id="references_many_rels-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>references_many_rels</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 366</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L366">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">366
367
368</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='references_many_rels identifier id'>references_many_rels</span>
  <span class='@references_many_rels ivar id'>@references_many_rels</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>up_chain</h3>
</div><div id="up_chain-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>up_chain</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 575</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L575">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">575
576
577
578
579
580</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='up_chain identifier id'>up_chain</span>
  <span class='k identifier id'>k</span> <span class='assign token'>=</span> <span class='self self kw'>self</span>
  <span class='kls identifier id'>kls</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='k identifier id'>k</span><span class='rbrack token'>]</span>
  <span class='kls identifier id'>kls</span> <span class='lshft op'>&lt;&lt;</span> <span class='k identifier id'>k</span> <span class='while while_mod kw'>while</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='k identifier id'>k</span> <span class='assign token'>=</span> <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='superclass identifier id'>superclass</span><span class='rparen token'>)</span> <span class='neq op'>!=</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='colon2 op'>::</span><span class='Document constant id'>Document</span><span class='rparen token'>)</span>
  <span class='kls identifier id'>kls</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>view_by</h3>
</div><div id="view_by-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>view_by</span><span class='args'>(*atts)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates the corresponding view and stores it in CouchDB Adds by_ and
paginate_by_ methods to the class
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 527</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L527">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='view_by identifier id'>view_by</span> <span class='mult op'>*</span><span class='atts identifier id'>atts</span>
  <span class='opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='atts identifier id'>atts</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='atts identifier id'>atts</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span> <span class='colon op'>:</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='__view_by_list__ identifier id'>__view_by_list__</span> <span class='lshft op'>&lt;&lt;</span> <span class='atts identifier id'>atts</span>
  
  <span class='if if kw'>if</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='create_views? fid id'>create_views?</span>
    <span class='ViewCreator constant id'>ViewCreator</span><span class='dot token'>.</span><span class='by_att_list identifier id'>by_att_list</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='atts identifier id'>atts</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
  <span class='end end kw'>end</span>
  
  <span class='by_name identifier id'>by_name</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;by_#{atts.join &quot;_and_&quot;}&quot;</span>
  <span class='meta_class identifier id'>meta_class</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span> <span class='do do kw'>do</span>
    <span class='define_method identifier id'>define_method</span> <span class='by_name identifier id'>by_name</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='mult op'>*</span><span class='params identifier id'>params</span><span class='bitor op'>|</span>
      <span class='view_name identifier id'>view_name</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{self.name}_#{by_name}&quot;</span>
      <span class='if if kw'>if</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
        <span class='res identifier id'>res</span> <span class='assign token'>=</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='view identifier id'>view</span> <span class='view_name identifier id'>view_name</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span>
      <span class='elsif elsif kw'>elsif</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span> <span class='Hash constant id'>Hash</span>
        <span class='res identifier id'>res</span> <span class='assign token'>=</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='view identifier id'>view</span> <span class='view_name identifier id'>view_name</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='res identifier id'>res</span> <span class='assign token'>=</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='view identifier id'>view</span><span class='lparen token'>(</span><span class='view_name identifier id'>view_name</span><span class='comma token'>,</span> <span class='symbol val'>:key</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
      <span class='end end kw'>end</span>            
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='paginate_by_name identifier id'>paginate_by_name</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;paginate_by_#{atts.join &quot;_and_&quot;}&quot;</span>
  <span class='meta_class identifier id'>meta_class</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span> <span class='do do kw'>do</span>
    <span class='define_method identifier id'>define_method</span> <span class='paginate_by_name identifier id'>paginate_by_name</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='params identifier id'>params</span><span class='bitor op'>|</span>
      <span class='view_name identifier id'>view_name</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{self.name}_#{by_name}&quot;</span>
      <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:attributes</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='atts identifier id'>atts</span>
      <span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span> <span class='params identifier id'>params</span>
      <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='paginate_view identifier id'>paginate_view</span> <span class='view_name identifier id'>view_name</span><span class='comma token'>,</span> <span class='params identifier id'>params</span>
    <span class='end end kw'>end</span>    
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>==</h3>
</div><div id="-3D-3D-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>==</span><span class='args'>(other)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns true if CouchDB considers other to be the same as self
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 328</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L328">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">328
329
330</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='eq op'>==</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='rparen token'>)</span>
  <span class='other identifier id'>other</span> <span class='andop op'>&amp;&amp;</span> <span class='_id identifier id'>_id</span> <span class='eq op'>==</span> <span class='other identifier id'>other</span><span class='dot token'>.</span><span class='_id identifier id'>_id</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_save</h3>
</div><div id="after_save-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_save</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 517</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L517">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">517
518
519
520
521</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after_save identifier id'>after_save</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='after_save_callbacks identifier id'>after_save_callbacks</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='callback identifier id'>callback</span><span class='bitor op'>|</span>
    <span class='callback identifier id'>callback</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Proc constant id'>Proc</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='callback identifier id'>callback</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='callback identifier id'>callback</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>before_save</h3>
</div><div id="before_save-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>before_save</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 499</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L499">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">499
500
501
502
503
504
505
506
507</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='before_save identifier id'>before_save</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='before_save_callbacks identifier id'>before_save_callbacks</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='callback identifier id'>callback</span><span class='bitor op'>|</span>
    <span class='resp identifier id'>resp</span> <span class='assign token'>=</span> <span class='callback identifier id'>callback</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Proc constant id'>Proc</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='callback identifier id'>callback</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='callback identifier id'>callback</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='resp identifier id'>resp</span> <span class='eq op'>==</span> <span class='false false kw'>false</span>
      <span class='errors identifier id'>errors</span><span class='lbrack token'>[</span><span class='symbol val'>:before_save</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='symbol val'>:failed</span>
      <span class='return return kw'>return</span> <span class='false false kw'>false</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>conflicted</h3>
</div><div id="conflicted-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>conflicted</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 207</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L207">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">207
208
209
210</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='conflicted identifier id'>conflicted</span>
  <span class='@update_conflict ivar id'>@update_conflict</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='on_update_conflict identifier id'>on_update_conflict</span>
<span class='end end kw'>end</span>    
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_or_get_proxy</h3>
</div><div id="create_or_get_proxy-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_or_get_proxy</span><span class='args'>(klass, relationship, opts = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 317</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L317">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">317
318
319
320
321
322
323
324
325</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create_or_get_proxy identifier id'>create_or_get_proxy</span><span class='lparen token'>(</span><span class='klass identifier id'>klass</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='proxy_sym identifier id'>proxy_sym</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;@proxy_#{relationship}&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
  <span class='proxy identifier id'>proxy</span> <span class='assign token'>=</span> <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='proxy_sym identifier id'>proxy_sym</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='proxy identifier id'>proxy</span>
    <span class='proxy identifier id'>proxy</span> <span class='assign token'>=</span> <span class='opts identifier id'>opts</span> <span class='integer val'>? </span><span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='comma token'>,</span> <span class='relationship identifier id'>relationship</span><span class='rparen token'>)</span>
    <span class='instance_variable_set identifier id'>instance_variable_set</span><span class='lparen token'>(</span><span class='proxy_sym identifier id'>proxy_sym</span><span class='comma token'>,</span> <span class='proxy identifier id'>proxy</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='proxy identifier id'>proxy</span>     
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>destroy!</h3>
</div><div id="destroy-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>destroy!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
destroy! nullifies all relationships with peers and children before
deleting itself in CouchDB The nullification and deletion are not performed
in a transaction
</p>
<p>
TODO: Current implemention may be inappropriate - causing CouchDB to try to
JSON encode undefined. Ensure nil is serialized? See has_many_spec#should
nullify its child relationships
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 470</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L470">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='destroy! fid id'>destroy!</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='references_many_rels identifier id'>references_many_rels</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='rel identifier id'>rel</span><span class='bitor op'>|</span>
    <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='rel identifier id'>rel</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='clear identifier id'>clear</span>
  <span class='end end kw'>end</span>
  
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='has_many_rels identifier id'>has_many_rels</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='rel identifier id'>rel</span><span class='bitor op'>|</span>
    <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='rel identifier id'>rel</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='clear identifier id'>clear</span>
  <span class='end end kw'>end</span>
  
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='has_one_rels identifier id'>has_one_rels</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='rel identifier id'>rel</span><span class='bitor op'>|</span>
    <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{rel}=&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># Implicitly prevent the object from being resaved by failing to update its revision</span>
  <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='db identifier id'>db</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{_id}?rev=#{_rev}&quot;</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>inspect</h3>
</div><div id="inspect-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>inspect</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="to_s-instance_method">to_s</tt>
  
</p>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 156</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L156">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">156
157
158
159
160
161
162
163
164
165
166
167
168
169</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='inspect identifier id'>inspect</span>
  <span class='s identifier id'>s</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#&lt;#{self.class}:#{self.object_id}&quot;</span>
  <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prop identifier id'>prop</span><span class='bitor op'>|</span>
    <span class='prop_val identifier id'>prop_val</span> <span class='assign token'>=</span> <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{prop}&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
    <span class='s identifier id'>s</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;, #{prop}: #{prop_val.inspect}&quot;</span> <span class='if if_mod kw'>if</span> <span class='prop_val identifier id'>prop_val</span>
  <span class='end end kw'>end</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='belongs_to_rels identifier id'>belongs_to_rels</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='bitor op'>|</span>
    <span class='id identifier id'>id</span> <span class='assign token'>=</span> <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{relationship}_id&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
    <span class='s identifier id'>s</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;, #{relationship}_id: #{id}&quot;</span> <span class='if if_mod kw'>if</span> <span class='id identifier id'>id</span>
  <span class='end end kw'>end</span>
  <span class='s identifier id'>s</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;, errors: #{errors.inspect}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='errors identifier id'>errors</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='s identifier id'>s</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;, save_list: #{save_list.map { |o| o.inspect }.join &quot;, &quot; }&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='save_list identifier id'>save_list</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='s identifier id'>s</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>new_document?</h3>
</div><div id="new_document-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>new_document?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="unsaved?-instance_method">unsaved?</tt>
  
    <tt id="new_record?-instance_method">new_record?</tt>
  
</p>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 297</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L297">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">297
298
299</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='new_document? fid id'>new_document?</span>
  <span class='@_rev ivar id'>@_rev</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>on_update_conflict</h3>
</div><div id="on_update_conflict-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>on_update_conflict</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 212</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L212">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">212
213
214
215</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='on_update_conflict identifier id'>on_update_conflict</span>
  <span class='comment val'># override with any behaviour you want to happen when</span>
  <span class='comment val'># CouchDB returns DocumentConflict on an attempt to save</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>post_save</h3>
</div><div id="post_save-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>post_save</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 228</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L228">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">228
229
230</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='post_save identifier id'>post_save</span>
  <span class='after_save identifier id'>after_save</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>pre_save</h3>
</div><div id="pre_save-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>pre_save</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 221</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L221">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">221
222
223
224
225
226</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='pre_save identifier id'>pre_save</span>
  <span class='set_timestamps identifier id'>set_timestamps</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='unless unless_mod kw'>unless</span> <span class='validates? fid id'>validates?</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='unless unless_mod kw'>unless</span> <span class='before_save identifier id'>before_save</span>            
  <span class='true true kw'>true</span> 
<span class='end end kw'>end</span>  
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save</h3>
</div><div id="save-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Not yet sure of final implemention for hooks - may lean more towards DM
than AR
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 188</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L188">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">188
189
190
191
192
193
194
195</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save identifier id'>save</span>
  <span class='if if kw'>if</span> <span class='pre_save identifier id'>pre_save</span> <span class='andop op'>&amp;&amp;</span> <span class='save_to_couch identifier id'>save_to_couch</span>
    <span class='after_save identifier id'>after_save</span>
    <span class='self self kw'>self</span>
  <span class='else else kw'>else</span>
    <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>  
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save!</h3>
</div><div id="save-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 241</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L241">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">241
242
243
244
245
246
247
248
249</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save! fid id'>save!</span>
  <span class='if if kw'>if</span> <span class='save identifier id'>save</span>
    <span class='self self kw'>self</span>
  <span class='elsif elsif kw'>elsif</span> <span class='update_conflict? fid id'>update_conflict?</span>
    <span class='raise identifier id'>raise</span> <span class='UpdateConflict constant id'>UpdateConflict</span><span class='comma token'>,</span> <span class='self self kw'>self</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='ValidationFailure constant id'>ValidationFailure</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='errors identifier id'>errors</span><span class='dot token'>.</span><span class='to_json identifier id'>to_json</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_all</h3>
</div><div id="save_all-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_all</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
save_all and save_all! are untested
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 233</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L233">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">233
234
235</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_all identifier id'>save_all</span>
  <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='bulk_save identifier id'>bulk_save</span> <span class='self self kw'>self</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='save_list identifier id'>save_list</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_all!</h3>
</div><div id="save_all-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_all!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 237</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L237">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">237
238
239</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_all! fid id'>save_all!</span>
  <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='bulk_save! fid id'>bulk_save!</span> <span class='self self kw'>self</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='save_list identifier id'>save_list</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>save_to_couch</h3>
</div><div id="save_to_couch-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>save_to_couch</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 197</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L197">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">197
198
199
200
201
202
203
204
205</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='save_to_couch identifier id'>save_to_couch</span>
  <span class='begin begin kw'>begin</span>
    <span class='resp identifier id'>resp</span> <span class='assign token'>=</span> <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='db identifier id'>db</span><span class='dot token'>.</span><span class='put identifier id'>put</span><span class='lparen token'>(</span><span class='_id identifier id'>_id</span><span class='comma token'>,</span> <span class='to_json identifier id'>to_json</span><span class='rparen token'>)</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='_rev identifier id'>_rev</span> <span class='assign token'>=</span> <span class='JSON constant id'>JSON</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='resp identifier id'>resp</span><span class='dot token'>.</span><span class='body identifier id'>body</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='string val'>&quot;rev&quot;</span><span class='rbrack token'>]</span>
  <span class='rescue rescue kw'>rescue</span> <span class='HTTP_409 constant id'>HTTP_409</span>
    <span class='conflicted identifier id'>conflicted</span>
    <span class='return return kw'>return</span> <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>      
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_attributes</h3>
</div><div id="set_attributes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_attributes</span><span class='args'>(data)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 140</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L140">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">140
141
142
143
144
145
146
147
148
149
150
151
152
153
154</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_attributes identifier id'>set_attributes</span><span class='lparen token'>(</span><span class='data identifier id'>data</span><span class='rparen token'>)</span>
  <span class='data identifier id'>data</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='bitor op'>|</span>
    <span class='comment val'># Only set instance variables on creation - object references are resolved on demand</span>

    <span class='comment val'># If the variable name ends in _at, _on or _date try to convert it to a Time</span>
    <span class='if if kw'>if</span> <span class='lbrack token'>[</span><span class='regexp val'>/_at$/</span><span class='comma token'>,</span> <span class='regexp val'>/_on$/</span><span class='comma token'>,</span> <span class='regexp val'>/_date$/</span><span class='comma token'>,</span> <span class='regexp val'>/_time$/</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='inject identifier id'>inject</span><span class='lparen token'>(</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='i identifier id'>i</span><span class='comma token'>,</span> <span class='r identifier id'>r</span><span class='bitor op'>|</span> <span class='i identifier id'>i</span> <span class='opasgn op'>||=</span> <span class='lparen token'>(</span><span class='key identifier id'>key</span> <span class='match op'>=~</span> <span class='r identifier id'>r</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
        <span class='val identifier id'>val</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='val identifier id'>val</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='utc identifier id'>utc</span> <span class='rescue rescue kw'>rescue</span> <span class='val identifier id'>val</span>
    <span class='end end kw'>end</span>
    
    <span class='comment val'># Ignore param keys that don't have a corresponding writer</span>
    <span class='comment val'># This allows us to comfortably accept a hash containing superflous data </span>
    <span class='comment val'># such as a params hash in a controller </span>
    <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{key}=&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='comma token'>,</span> <span class='val identifier id'>val</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='methods identifier id'>methods</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='dstring node'>&quot;#{key}=&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>  
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>set_timestamps</h3>
</div><div id="set_timestamps-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>set_timestamps</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 308</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L308">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">308
309
310
311
312
313
314
315</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='set_timestamps identifier id'>set_timestamps</span>
  <span class='if if kw'>if</span> <span class='new_document? fid id'>new_document?</span> <span class='andop op'>&amp;&amp;</span> <span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:created_at</span><span class='rparen token'>)</span>
    <span class='comment val'># Don't override it if it's already been set</span>
    <span class='@created_at ivar id'>@created_at</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span> <span class='if if_mod kw'>if</span> <span class='@created_at ivar id'>@created_at</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='end end kw'>end</span>
  
  <span class='@updated_at ivar id'>@updated_at</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span> <span class='if if_mod kw'>if</span> <span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:updated_at</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_json</h3>
</div><div id="to_json-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_json</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 173</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L173">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">173
174
175
176
177
178
179
180
181
182
183
184
185</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_json identifier id'>to_json</span>
  <span class='data identifier id'>data</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='belongs_to_rels identifier id'>belongs_to_rels</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='relationship identifier id'>relationship</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='bitor op'>|</span>
    <span class='id identifier id'>id</span> <span class='assign token'>=</span> <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{relationship}_id&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
    <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='dstring node'>&quot;#{relationship}_id&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='id identifier id'>id</span> <span class='if if_mod kw'>if</span> <span class='id identifier id'>id</span>
  <span class='end end kw'>end</span>
  <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prop identifier id'>prop</span><span class='bitor op'>|</span>
    <span class='prop_val identifier id'>prop_val</span> <span class='assign token'>=</span> <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{prop}&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rparen token'>)</span>
    <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='dstring node'>&quot;#{prop}&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='prop_val identifier id'>prop_val</span> <span class='if if_mod kw'>if</span> <span class='prop_val identifier id'>prop_val</span>
  <span class='end end kw'>end</span>
  <span class='data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;relaxdb_class&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='name identifier id'>name</span>
  <span class='data identifier id'>data</span><span class='dot token'>.</span><span class='to_json identifier id'>to_json</span>      
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_param</h3>
</div><div id="to_param-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_param</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="id-instance_method">id</tt>
  
</p>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 303</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L303">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">303
304
305</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_param identifier id'>to_param</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='_id identifier id'>_id</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>update_conflict?</h3>
</div><div id="update_conflict-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>update_conflict?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 217</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L217">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">217
218
219</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='update_conflict? fid id'>update_conflict?</span>
  <span class='@update_conflict ivar id'>@update_conflict</span>
<span class='end end kw'>end</span>    
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>validate_att</h3>
</div><div id="validate_att-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>validate_att</span><span class='args'>(att_name, att_val)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 273</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L273">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='validate_att identifier id'>validate_att</span><span class='lparen token'>(</span><span class='att_name identifier id'>att_name</span><span class='comma token'>,</span> <span class='att_val identifier id'>att_val</span><span class='rparen token'>)</span>
  <span class='begin begin kw'>begin</span>
    <span class='success identifier id'>success</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;validate_#{att_name}&quot;</span><span class='comma token'>,</span> <span class='att_val identifier id'>att_val</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span> <span class='dstring node'>&quot;Validating #{att_name} with #{att_val} raised #{e}&quot;</span>
    <span class='succes identifier id'>succes</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>

  <span class='unless unless kw'>unless</span> <span class='success identifier id'>success</span>
    <span class='if if kw'>if</span> <span class='methods identifier id'>methods</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='dstring node'>&quot;#{att_name}_validation_msg&quot;</span>
      <span class='begin begin kw'>begin</span>
        <span class='@errors ivar id'>@errors</span><span class='lbrack token'>[</span><span class='att_name identifier id'>att_name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{att_name}_validation_msg&quot;</span><span class='comma token'>,</span> <span class='att_val identifier id'>att_val</span><span class='rparen token'>)</span>
      <span class='rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
        <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='warn identifier id'>warn</span> <span class='dstring node'>&quot;Validation_msg for #{att_name} with #{att_val} raised #{e}&quot;</span>
        <span class='@errors ivar id'>@errors</span><span class='lbrack token'>[</span><span class='att_name identifier id'>att_name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;validation_msg_exception:invalid:#{att_val}&quot;</span>
      <span class='end end kw'>end</span>
    <span class='elsif elsif kw'>elsif</span> <span class='@errors ivar id'>@errors</span><span class='lbrack token'>[</span><span class='att_name identifier id'>att_name</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
      <span class='comment val'># Only set a validation message if a validator hasn't already set one</span>
      <span class='@errors ivar id'>@errors</span><span class='lbrack token'>[</span><span class='att_name identifier id'>att_name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;invalid:#{att_val}&quot;</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='success identifier id'>success</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>validates?</h3>
</div><div id="validates-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>validates?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>
<p class="aliases">
  <span class="aka">Also known as:</span>
  
    <tt id="validate-instance_method">validate</tt>
  
</p>
</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 251</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L251">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='validates? fid id'>validates?</span>
  <span class='props identifier id'>props</span> <span class='assign token'>=</span> <span class='properties identifier id'>properties</span> <span class='minus op'>-</span> <span class='validation_skip_list identifier id'>validation_skip_list</span>
  <span class='prop_vals identifier id'>prop_vals</span> <span class='assign token'>=</span> <span class='props identifier id'>props</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='prop identifier id'>prop</span><span class='bitor op'>|</span> <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{prop}&quot;</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  
  <span class='rels identifier id'>rels</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='belongs_to_rels identifier id'>belongs_to_rels</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span> <span class='minus op'>-</span> <span class='validation_skip_list identifier id'>validation_skip_list</span>
  <span class='rel_vals identifier id'>rel_vals</span> <span class='assign token'>=</span> <span class='rels identifier id'>rels</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rel identifier id'>rel</span><span class='bitor op'>|</span> <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='dstring node'>&quot;@#{rel}_id&quot;</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  
  <span class='att_names identifier id'>att_names</span> <span class='assign token'>=</span> <span class='props identifier id'>props</span> <span class='plus op'>+</span> <span class='rels identifier id'>rels</span>
  <span class='att_vals identifier id'>att_vals</span> <span class='assign token'>=</span>  <span class='prop_vals identifier id'>prop_vals</span> <span class='plus op'>+</span> <span class='rel_vals identifier id'>rel_vals</span>
  
  <span class='total_success identifier id'>total_success</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>      
  <span class='att_names identifier id'>att_names</span><span class='dot token'>.</span><span class='each_index identifier id'>each_index</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='i identifier id'>i</span><span class='bitor op'>|</span>
    <span class='att_name identifier id'>att_name</span><span class='comma token'>,</span> <span class='att_val identifier id'>att_val</span> <span class='assign token'>=</span> <span class='att_names identifier id'>att_names</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='att_vals identifier id'>att_vals</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span><span class='rbrack token'>]</span>
    <span class='if if kw'>if</span> <span class='methods identifier id'>methods</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='dstring node'>&quot;validate_#{att_name}&quot;</span>
      <span class='total_success identifier id'>total_success</span> <span class='opasgn op'>&amp;=</span> <span class='validate_att identifier id'>validate_att</span><span class='lparen token'>(</span><span class='att_name identifier id'>att_name</span><span class='comma token'>,</span> <span class='att_val identifier id'>att_val</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
        
  <span class='total_success identifier id'>total_success</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>write_derived_props</h3>
</div><div id="write_derived_props-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>write_derived_props</span><span class='args'>(source)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
The rationale for rescuing the send below is that the lambda for a derived
property shouldn&#8217;t need to concern itself with checking the validity
of the underlying property. Nor, IMO, should clients be exposed to the
possibility of a writer raising an exception.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/relaxdb/document.rb', line 102</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/paulcarey/relaxdb/blob/d398ea077b6abc94595783289a195096808a54fb/lib/relaxdb/document.rb#L102">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">102
103
104
105
106
107
108
109
110
111
112
113
114
115</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='write_derived_props identifier id'>write_derived_props</span><span class='lparen token'>(</span><span class='source identifier id'>source</span><span class='rparen token'>)</span>
  <span class='writers identifier id'>writers</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='derived_prop_writers identifier id'>derived_prop_writers</span>
  <span class='writers identifier id'>writers</span> <span class='assign token'>=</span> <span class='writers identifier id'>writers</span> <span class='andop op'>&amp;&amp;</span> <span class='writers identifier id'>writers</span><span class='lbrack token'>[</span><span class='source identifier id'>source</span><span class='rbrack token'>]</span>
  <span class='if if kw'>if</span> <span class='writers identifier id'>writers</span> 
    <span class='writers identifier id'>writers</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prop identifier id'>prop</span><span class='comma token'>,</span> <span class='writer identifier id'>writer</span><span class='bitor op'>|</span>
      <span class='current_val identifier id'>current_val</span> <span class='assign token'>=</span> <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='rparen token'>)</span>
      <span class='begin begin kw'>begin</span>
        <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{prop}=&quot;</span><span class='comma token'>,</span> <span class='writer identifier id'>writer</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='current_val identifier id'>current_val</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span><span class='rparen token'>)</span> 
      <span class='rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
        <span class='RelaxDB constant id'>RelaxDB</span><span class='dot token'>.</span><span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='error identifier id'>error</span> <span class='dstring node'>&quot;Deriving #{prop} from #{source} raised #{e}&quot;</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>