<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>mojombo's grit - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/mojombo/commits/grit/master" rel="alternate" title="Recent Commits to grit:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("mojombo", "grit", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='mojombo/grit/blob/b93ec95e50959c39e996f1642313e839bdf94039' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='mojombo/grit/blob/b93ec95e50959c39e996f1642313e839bdf94039' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("mojombo", "grit", "b93ec95e50959c39e996f1642313e839bdf94039", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/mojombo/grit/tree/">Source</a></li>
            <li class=""><a href="http://github.com/mojombo/grit/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/mojombo/grit/network">Network</a></li>            
            <li class=""><a href="http://github.com/mojombo/grit/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/mojombo/grit">Wiki</a></li>
            <li class=""><a href="http://github.com/mojombo/grit/graphs">Graphs</a></li>                    
            <li class="active"><a href="/mojombo/grit">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/mojombo">mojombo</a> / <b><a href="http://github.com/mojombo/grit/tree">grit</a></b>        
                <a id="namespaces_button" rel="mojombo/grit/blob/b93ec95e50959c39e996f1642313e839bdf94039" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="mojombo/grit/blob/b93ec95e50959c39e996f1642313e839bdf94039" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Grit</h1>

<p>Grit gives you object oriented read/write access to Git repositories via Ruby.
The main goals are stability and performance. To this end, some of the
interactions with Git repositories are done by shelling out to the system's
<code>git</code> command, and other interactions are done with pure Ruby
reimplementations of core Git functionality. This choice, however, is
transparent to end users, and you need not know which method is being used.</p>

<p>This software was developed to power GitHub, and should be considered
production ready. An extensive test suite is provided to verify its correctness.</p>

<p>Grit is maintained by Tom Preston-Werner, Scott Chacon, Chris Wanstrath, and
PJ Hyett.</p>

<p>This documentation is accurate as of Grit 1.0.2.</p>

<h2>Requirements</h2>

<ul>
<li>git (http://git-scm.com) tested with 1.6.0.2</li>
</ul>


<h2>Install</h2>

<p>Easiest install is via RubyGems:</p>

<pre class="code">$ <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='grit identifier id'>grit</span>
</pre>

<p>or</p>

<pre class="code">$ <span class='gem identifier id'>gem</span> <span class='sources identifier id'>sources</span> <span class='minus op'>-</span><span class='a identifier id'>a</span> <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gems.github.com/</span> <span class='lparen token'>(</span><span class='you identifier id'>you</span> <span class='only identifier id'>only</span> <span class='need identifier id'>need</span> <span class='to identifier id'>to</span> <span class='do do kw'>do</span> <span class='this identifier id'>this</span> <span class='once identifier id'>once</span><span class='rparen token'>)</span>
$ <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='mojombo identifier id'>mojombo</span><span class='minus op'>-</span><span class='grit identifier id'>grit</span>
</pre>

<p>The gem from GitHub will generally be available sooner than the gem from
Rubyforge. Both sources will eventually contain the same releases.</p>

<h2>Source</h2>

<p>Grit's Git repo is available on GitHub, which can be browsed at:</p>

<pre class="code"><span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/</span><span class='mojombo identifier id'>mojombo</span><span class='div op'>/</span><span class='grit identifier id'>grit</span>
</pre>

<p>and cloned with:</p>

<pre class="code"><span class='git identifier id'>git</span> <span class='clone identifier id'>clone</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/</span><span class='mojombo identifier id'>mojombo</span><span class='div op'>/</span><span class='grit identifier id'>grit</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
</pre>

<h2>Usage</h2>

<p>Grit gives you object model access to your Git repositories. Once you have
created a <code>Repo</code> object, you can traverse it to find parent commits,
trees, blobs, etc.</p>

<h3>Initialize a Repo object</h3>

<p>The first step is to create a <code>Grit::Repo</code> object to represent your repo. In
this documentation I include the <code>Grit</code> module to reduce typing.</p>

<pre class="code"><span class='require identifier id'>require</span> <span class='string val'>'grit'</span>
<span class='include identifier id'>include</span> <span class='Grit constant id'>Grit</span>
<span class='repo identifier id'>repo</span> <span class='assign token'>=</span> <span class='Repo constant id'>Repo</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;/Users/tom/dev/grit&quot;</span><span class='rparen token'>)</span>
</pre>

<p>In the above example, the directory <code>/Users/tom/dev/grit</code> is my working
directory and contains the <code>.git</code> directory. You can also initialize Grit with
a bare repo.</p>

<pre class="code"><span class='repo identifier id'>repo</span> <span class='assign token'>=</span> <span class='Repo constant id'>Repo</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;/var/git/grit.git&quot;</span><span class='rparen token'>)</span>
</pre>

<h3>Getting a list of commits</h3>

<p>From the <code>Repo</code> object, you can get a list of commits as an array of <code>Commit</code>
objects.</p>

<pre class="code"><span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='commits identifier id'>commits</span>
<span class='comment val'># =&gt; [#&lt;Grit::Commit &quot;e80bbd2ce67651aa18e57fb0b43618ad4baf7750&quot;&gt;,</span>
      <span class='comment val'>#&lt;Grit::Commit &quot;91169e1f5fa4de2eaea3f176461f5dc784796769&quot;&gt;,</span>
      <span class='comment val'>#&lt;Grit::Commit &quot;038af8c329ef7c1bae4568b98bd5c58510465493&quot;&gt;,</span>
      <span class='comment val'>#&lt;Grit::Commit &quot;40d3057d09a7a4d61059bca9dca5ae698de58cbe&quot;&gt;,</span>
      <span class='comment val'>#&lt;Grit::Commit &quot;4ea50f4754937bf19461af58ce3b3d24c77311d9&quot;&gt;]</span>
</pre>

<p>Called without arguments, <code>Repo#commits</code> returns a list of up to ten commits
reachable by the <strong>master</strong> branch (starting at the latest commit). You can
ask for commits beginning at a different branch, commit, tag, etc.</p>

<pre class="code"><span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='commits identifier id'>commits</span><span class='lparen token'>(</span><span class='string val'>'mybranch'</span><span class='rparen token'>)</span>
<span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='commits identifier id'>commits</span><span class='lparen token'>(</span><span class='string val'>'40d3057d09a7a4d61059bca9dca5ae698de58cbe'</span><span class='rparen token'>)</span>
<span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='commits identifier id'>commits</span><span class='lparen token'>(</span><span class='string val'>'v0.1'</span><span class='rparen token'>)</span>
</pre>

<p>You can specify the maximum number of commits to return.</p>

<pre class="code"><span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='commits identifier id'>commits</span><span class='lparen token'>(</span><span class='string val'>'master'</span><span class='comma token'>,</span> <span class='integer val'>100</span><span class='rparen token'>)</span>
</pre>

<p>If you need paging, you can specify a number of commits to skip.</p>

<pre class="code"><span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='commits identifier id'>commits</span><span class='lparen token'>(</span><span class='string val'>'master'</span><span class='comma token'>,</span> <span class='integer val'>10</span><span class='comma token'>,</span> <span class='integer val'>20</span><span class='rparen token'>)</span>
</pre>

<p>The above will return commits 21-30 from the commit list.</p>

<h3>The Commit object</h3>

<p><code>Commit</code> objects contain information about that commit.</p>

<pre class="code"><span class='head identifier id'>head</span> <span class='assign token'>=</span> <span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='commits identifier id'>commits</span><span class='dot token'>.</span><span class='first identifier id'>first</span>

<span class='head identifier id'>head</span><span class='dot token'>.</span><span class='id identifier id'>id</span>
<span class='comment val'># =&gt; &quot;e80bbd2ce67651aa18e57fb0b43618ad4baf7750&quot;</span>

<span class='head identifier id'>head</span><span class='dot token'>.</span><span class='parents identifier id'>parents</span>
<span class='comment val'># =&gt; [#&lt;Grit::Commit &quot;91169e1f5fa4de2eaea3f176461f5dc784796769&quot;&gt;]</span>

<span class='head identifier id'>head</span><span class='dot token'>.</span><span class='tree identifier id'>tree</span>
<span class='comment val'># =&gt; #&lt;Grit::Tree &quot;3536eb9abac69c3e4db583ad38f3d30f8db4771f&quot;&gt;</span>

<span class='head identifier id'>head</span><span class='dot token'>.</span><span class='author identifier id'>author</span>
<span class='comment val'># =&gt; #&lt;Grit::Actor &quot;Tom Preston-Werner &lt;tom@mojombo.com&gt;&quot;&gt;</span>

<span class='head identifier id'>head</span><span class='dot token'>.</span><span class='authored_date identifier id'>authored_date</span>
<span class='comment val'># =&gt; Wed Oct 24 22:02:31 -0700 2007</span>

<span class='head identifier id'>head</span><span class='dot token'>.</span><span class='committer identifier id'>committer</span>
<span class='comment val'># =&gt; #&lt;Grit::Actor &quot;Tom Preston-Werner &lt;tom@mojombo.com&gt;&quot;&gt;</span>

<span class='head identifier id'>head</span><span class='dot token'>.</span><span class='committed_date identifier id'>committed_date</span>
<span class='comment val'># =&gt; Wed Oct 24 22:02:31 -0700 2007</span>

<span class='head identifier id'>head</span><span class='dot token'>.</span><span class='message identifier id'>message</span>
<span class='comment val'># =&gt; &quot;add Actor inspect&quot;</span>
</pre>

<p>You can traverse a commit's ancestry by chaining calls to <code>#parents</code>.</p>

<pre class="code"><span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='commits identifier id'>commits</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='parents identifier id'>parents</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='parents identifier id'>parents</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='parents identifier id'>parents</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
</pre>

<p>The above corresponds to <strong>master<sup>^<sup>**</sup></sup> or </strong>master~3** in Git parlance.</p>

<h3>The Tree object</h3>

<p>A tree records pointers to the contents of a directory. Let's say you want
the root tree of the latest commit on the <strong>master</strong> branch.</p>

<pre class="code"><span class='tree identifier id'>tree</span> <span class='assign token'>=</span> <span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='commits identifier id'>commits</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='tree identifier id'>tree</span>
<span class='comment val'># =&gt; #&lt;Grit::Tree &quot;3536eb9abac69c3e4db583ad38f3d30f8db4771f&quot;&gt;</span>

<span class='tree identifier id'>tree</span><span class='dot token'>.</span><span class='id identifier id'>id</span>
<span class='comment val'># =&gt; &quot;3536eb9abac69c3e4db583ad38f3d30f8db4771f&quot;</span>
</pre>

<p>Once you have a tree, you can get the contents.</p>

<pre class="code"><span class='contents identifier id'>contents</span> <span class='assign token'>=</span> <span class='tree identifier id'>tree</span><span class='dot token'>.</span><span class='contents identifier id'>contents</span>
<span class='comment val'># =&gt; [#&lt;Grit::Blob &quot;4ebc8aea50e0a67e000ba29a30809d0a7b9b2666&quot;&gt;,</span>
      <span class='comment val'>#&lt;Grit::Blob &quot;81d2c27608b352814cbe979a6acd678d30219678&quot;&gt;,</span>
      <span class='comment val'>#&lt;Grit::Tree &quot;c3d07b0083f01a6e1ac969a0f32b8d06f20c62e5&quot;&gt;,</span>
      <span class='comment val'>#&lt;Grit::Tree &quot;4d00fe177a8407dbbc64a24dbfc564762c0922d8&quot;&gt;]</span>
</pre>

<p>This tree contains two <code>Blob</code> objects and two <code>Tree</code> objects. The trees are
subdirectories and the blobs are files. Trees below the root have additional
attributes.</p>

<pre class="code"><span class='contents identifier id'>contents</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='name identifier id'>name</span>
<span class='comment val'># =&gt; &quot;lib&quot;</span>

<span class='contents identifier id'>contents</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='mode identifier id'>mode</span>
<span class='comment val'># =&gt; &quot;040000&quot;</span>
</pre>

<p>There is a convenience method that allows you to get a named sub-object
from a tree.</p>

<pre class="code"><span class='tree identifier id'>tree</span> <span class='div op'>/</span> <span class='string val'>&quot;lib&quot;</span>
<span class='comment val'># =&gt; #&lt;Grit::Tree &quot;e74893a3d8a25cbb1367cf241cc741bfd503c4b2&quot;&gt;</span>
</pre>

<p>You can also get a tree directly from the repo if you know its name.</p>

<pre class="code"><span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='tree identifier id'>tree</span>
<span class='comment val'># =&gt; #&lt;Grit::Tree &quot;master&quot;&gt;</span>

<span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='tree identifier id'>tree</span><span class='lparen token'>(</span><span class='string val'>&quot;91169e1f5fa4de2eaea3f176461f5dc784796769&quot;</span><span class='rparen token'>)</span>
<span class='comment val'># =&gt; #&lt;Grit::Tree &quot;91169e1f5fa4de2eaea3f176461f5dc784796769&quot;&gt;</span>
</pre>

<h3>The Blob object</h3>

<p>A blob represents a file. Trees often contain blobs.</p>

<pre class="code"><span class='blob identifier id'>blob</span> <span class='assign token'>=</span> <span class='tree identifier id'>tree</span><span class='dot token'>.</span><span class='contents identifier id'>contents</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
<span class='comment val'># =&gt; #&lt;Grit::Blob &quot;4ebc8aea50e0a67e000ba29a30809d0a7b9b2666&quot;&gt;</span>
</pre>

<p>A blob has certain attributes.</p>

<pre class="code"><span class='blob identifier id'>blob</span><span class='dot token'>.</span><span class='id identifier id'>id</span>
<span class='comment val'># =&gt; &quot;4ebc8aea50e0a67e000ba29a30809d0a7b9b2666&quot;</span>

<span class='blob identifier id'>blob</span><span class='dot token'>.</span><span class='name identifier id'>name</span>
<span class='comment val'># =&gt; &quot;README.txt&quot;</span>

<span class='blob identifier id'>blob</span><span class='dot token'>.</span><span class='mode identifier id'>mode</span>
<span class='comment val'># =&gt; &quot;100644&quot;</span>

<span class='blob identifier id'>blob</span><span class='dot token'>.</span><span class='size identifier id'>size</span>
<span class='comment val'># =&gt; 7726</span>
</pre>

<p>You can get the data of a blob as a string.</p>

<pre class="code"><span class='blob identifier id'>blob</span><span class='dot token'>.</span><span class='data identifier id'>data</span>
<span class='comment val'># =&gt; &quot;Grit is a library to ...&quot;</span>
</pre>

<p>You can also get a blob directly from the repo if you know its name.</p>

<pre class="code"><span class='repo identifier id'>repo</span><span class='dot token'>.</span><span class='blob identifier id'>blob</span><span class='lparen token'>(</span><span class='string val'>&quot;4ebc8aea50e0a67e000ba29a30809d0a7b9b2666&quot;</span><span class='rparen token'>)</span>
<span class='comment val'># =&gt; #&lt;Grit::Blob &quot;4ebc8aea50e0a67e000ba29a30809d0a7b9b2666&quot;&gt;</span>
</pre>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>