<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: Chronic</title>
  </head>
  <body>
    <div id="content">
      <div class="section module Chronic">
  <h1 class="title">Module: Chronic</h1>
  <div class="section constants">
  
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary class public">
    <h1>Public Class Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#apply_endian_precedences-class_method' title='apply_endian_precedences'>apply_endian_precedences</a></span><span class='args'>(precedences)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
&#8212;&#8212;&#8212;&#8212;&#8212;.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#base_tokenize-class_method' title='base_tokenize'>base_tokenize</a></span><span class='args'>(text)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Split the text on spaces and convert each word into a Token.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#day_or_time-class_method' title='day_or_time'>day_or_time</a></span><span class='args'>(day_start, time_tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#dealias_and_disambiguate_times-class_method' title='dealias_and_disambiguate_times'>dealias_and_disambiguate_times</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#definitions-class_method' title='definitions'>definitions</a></span><span class='args'>(options={})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#endian_variable_name_for-class_method' title='endian_variable_name_for'>endian_variable_name_for</a></span><span class='args'>(e)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#find_within-class_method' title='find_within'>find_within</a></span><span class='args'>(tags, span, pointer)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Recursively finds repeaters within other repeaters.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#get_anchor-class_method' title='get_anchor'>get_anchor</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
support methods.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#get_repeaters-class_method' title='get_repeaters'>get_repeaters</a></span><span class='args'>(tokens)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#guess-class_method' title='guess'>guess</a></span><span class='args'>(span)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Guess a specific time within the given span.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_m_d-class_method' title='handle_m_d'>handle_m_d</a></span><span class='args'>(month, day, time_tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
&#8212;&#8212;&#8212;&#8212;&#8212;.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_o_r_g_r-class_method' title='handle_o_r_g_r'>handle_o_r_g_r</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_o_r_s_r-class_method' title='handle_o_r_s_r'>handle_o_r_s_r</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_orr-class_method' title='handle_orr'>handle_orr</a></span><span class='args'>(tokens, outer_span, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
narrows.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_p_s_r-class_method' title='handle_p_s_r'>handle_p_s_r</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_r-class_method' title='handle_r'>handle_r</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
anchors.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_r_g_r-class_method' title='handle_r_g_r'>handle_r_g_r</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_rdn_rmn_sd_t_tz_sy-class_method' title='handle_rdn_rmn_sd_t_tz_sy'>handle_rdn_rmn_sd_t_tz_sy</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_rmn_od-class_method' title='handle_rmn_od'>handle_rmn_od</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_rmn_od_on-class_method' title='handle_rmn_od_on'>handle_rmn_od_on</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_rmn_sd-class_method' title='handle_rmn_sd'>handle_rmn_sd</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_rmn_sd_on-class_method' title='handle_rmn_sd_on'>handle_rmn_sd_on</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_rmn_sd_sy-class_method' title='handle_rmn_sd_sy'>handle_rmn_sd_sy</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_rmn_sy-class_method' title='handle_rmn_sy'>handle_rmn_sy</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_s_r_p-class_method' title='handle_s_r_p'>handle_s_r_p</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_s_r_p_a-class_method' title='handle_s_r_p_a'>handle_s_r_p_a</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_sd_rmn_sy-class_method' title='handle_sd_rmn_sy'>handle_sd_rmn_sy</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_sd_sm_sy-class_method' title='handle_sd_sm_sy'>handle_sd_sm_sy</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_sm_sd_sy-class_method' title='handle_sm_sd_sy'>handle_sm_sd_sy</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_sm_sy-class_method' title='handle_sm_sy'>handle_sm_sy</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_srp-class_method' title='handle_srp'>handle_srp</a></span><span class='args'>(tokens, span, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
arrows.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#handle_sy_sm_sd-class_method' title='handle_sy_sm_sd'>handle_sy_sm_sd</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#numericize_numbers-class_method' title='numericize_numbers'>numericize_numbers</a></span><span class='args'>(text)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Convert number words to numbers (three =&gt; 3).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#numericize_ordinals-class_method' title='numericize_ordinals'>numericize_ordinals</a></span><span class='args'>(text)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Convert ordinal words to numeric ordinals (third =&gt; 3rd).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#parse-class_method' title='parse'>parse</a></span><span class='args'>(text, specified_options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Parses a string containing a natural language date or time.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#pre_normalize-class_method' title='pre_normalize'>pre_normalize</a></span><span class='args'>(text)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Clean up the specified input text by stripping unwanted characters,
converting idioms to their canonical form, converting number words to
numbers (three =&gt; 3), and converting ordinal words to numeric ordinals
(third =&gt; 3rd).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#scan_for_all-class_method' title='scan_for_all'>scan_for_all</a></span><span class='args'>(token)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#swap-class_method' title='swap'>swap</a></span><span class='args'>(arr, a, b)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
exchange two elements in an array.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#tokens_to_span-class_method' title='tokens_to_span'>tokens_to_span</a></span><span class='args'>(tokens, options)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#to_s-instance_method' title='#to_s'>#to_s</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails class public">
  <h1>Public Class Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>apply_endian_precedences</h3>
</div><div id="apply_endian_precedences-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>apply_endian_precedences</span><span class='args'>(precedences)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="10"></hr>
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


108
109
110
111
112
113
114
115
116
117
118
119</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 108</span>

<span class='def def kw'>def</span> <span class='apply_endian_precedences identifier id'>apply_endian_precedences</span><span class='lparen token'>(</span><span class='precedences identifier id'>precedences</span><span class='rparen token'>)</span>
  <span class='date_defs identifier id'>date_defs</span> <span class='assign token'>=</span> <span class='@definitions ivar id'>@definitions</span><span class='lbrack token'>[</span><span class='symbol val'>:date</span><span class='rbrack token'>]</span>

  <span class='comment val'># map the precedence array to indices on @definitions[:date]</span>
  <span class='indices identifier id'>indices</span> <span class='assign token'>=</span> <span class='precedences identifier id'>precedences</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='e identifier id'>e</span><span class='bitor op'>|</span>
    <span class='handler identifier id'>handler</span> <span class='assign token'>=</span> <span class='instance_variable_get identifier id'>instance_variable_get</span><span class='lparen token'>(</span><span class='endian_variable_name_for identifier id'>endian_variable_name_for</span><span class='lparen token'>(</span><span class='e identifier id'>e</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='date_defs identifier id'>date_defs</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='handler identifier id'>handler</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span>

  <span class='comment val'># swap the handlers if we discover they are at odds with the desired preferences</span>
  <span class='swap identifier id'>swap</span><span class='lparen token'>(</span><span class='date_defs identifier id'>date_defs</span><span class='comma token'>,</span> <span class='indices identifier id'>indices</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='comma token'>,</span> <span class='indices identifier id'>indices</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='indices identifier id'>indices</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='gt op'>&gt;</span> <span class='indices identifier id'>indices</span><span class='dot token'>.</span><span class='last identifier id'>last</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>base_tokenize</h3>
</div><div id="base_tokenize-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>base_tokenize</span><span class='args'>(text)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Split the text on spaces and convert each word into a Token
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


147
148
149</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/chronic.rb', line 147</span>

<span class='def def kw'>def</span> <span class='base_tokenize identifier id'>base_tokenize</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='text identifier id'>text</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>' '</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='word identifier id'>word</span><span class='bitor op'>|</span> <span class='Token constant id'>Token</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='word identifier id'>word</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>day_or_time</h3>
</div><div id="day_or_time-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>day_or_time</span><span class='args'>(day_start, time_tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


128
129
130
131
132
133
134
135
136
137
138</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 128</span>

<span class='def def kw'>def</span> <span class='day_or_time identifier id'>day_or_time</span><span class='lparen token'>(</span><span class='day_start identifier id'>day_start</span><span class='comma token'>,</span> <span class='time_tokens identifier id'>time_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='outer_span identifier id'>outer_span</span> <span class='assign token'>=</span> <span class='Span constant id'>Span</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='day_start identifier id'>day_start</span><span class='comma token'>,</span> <span class='day_start identifier id'>day_start</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='integer val'>24</span> <span class='mult op'>*</span> <span class='integer val'>60</span> <span class='mult op'>*</span> <span class='integer val'>60</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  
  <span class='if if kw'>if</span> <span class='notop op'>!</span><span class='time_tokens identifier id'>time_tokens</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='@now ivar id'>@now</span> <span class='assign token'>=</span> <span class='outer_span identifier id'>outer_span</span><span class='dot token'>.</span><span class='begin identifier id'>begin</span>
    <span class='time identifier id'>time</span> <span class='assign token'>=</span> <span class='get_anchor identifier id'>get_anchor</span><span class='lparen token'>(</span><span class='dealias_and_disambiguate_times identifier id'>dealias_and_disambiguate_times</span><span class='lparen token'>(</span><span class='time_tokens identifier id'>time_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='return return kw'>return</span> <span class='time identifier id'>time</span>
  <span class='else else kw'>else</span>
    <span class='return return kw'>return</span> <span class='outer_span identifier id'>outer_span</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>dealias_and_disambiguate_times</h3>
</div><div id="dealias_and_disambiguate_times-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>dealias_and_disambiguate_times</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 408</span>

<span class='def def kw'>def</span> <span class='dealias_and_disambiguate_times identifier id'>dealias_and_disambiguate_times</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='comment val'># handle aliases of am/pm</span>
  <span class='comment val'># 5:00 in the morning -&gt; 5:00 am</span>
  <span class='comment val'># 7:00 in the evening -&gt; 7:00 pm</span>
  
  <span class='day_portion_index identifier id'>day_portion_index</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='each_with_index identifier id'>each_with_index</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='comma token'>,</span> <span class='i identifier id'>i</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='t identifier id'>t</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterDayPortion constant id'>RepeaterDayPortion</span><span class='rparen token'>)</span>
      <span class='day_portion_index identifier id'>day_portion_index</span> <span class='assign token'>=</span> <span class='i identifier id'>i</span>
      <span class='break break kw'>break</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
   
  <span class='time_index identifier id'>time_index</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='each_with_index identifier id'>each_with_index</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='t identifier id'>t</span><span class='comma token'>,</span> <span class='i identifier id'>i</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='t identifier id'>t</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterTime constant id'>RepeaterTime</span><span class='rparen token'>)</span>
      <span class='time_index identifier id'>time_index</span> <span class='assign token'>=</span> <span class='i identifier id'>i</span>
      <span class='break break kw'>break</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='day_portion_index identifier id'>day_portion_index</span> <span class='andop op'>&amp;&amp;</span> <span class='time_index identifier id'>time_index</span><span class='rparen token'>)</span>
    <span class='t1 identifier id'>t1</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='day_portion_index identifier id'>day_portion_index</span><span class='rbrack token'>]</span>
    <span class='t1tag identifier id'>t1tag</span> <span class='assign token'>=</span> <span class='t1 identifier id'>t1</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterDayPortion constant id'>RepeaterDayPortion</span><span class='rparen token'>)</span>
  
    <span class='if if kw'>if</span> <span class='lbrack token'>[</span><span class='colon op'>:</span><span class='morning identifier id'>morning</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='t1tag identifier id'>t1tag</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='rparen token'>)</span>
      <span class='puts identifier id'>puts</span> <span class='string val'>'--morning-&gt;am'</span> <span class='if if_mod kw'>if</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span>
      <span class='t1 identifier id'>t1</span><span class='dot token'>.</span><span class='untag identifier id'>untag</span><span class='lparen token'>(</span><span class='RepeaterDayPortion constant id'>RepeaterDayPortion</span><span class='rparen token'>)</span>
      <span class='t1 identifier id'>t1</span><span class='dot token'>.</span><span class='tag identifier id'>tag</span><span class='lparen token'>(</span><span class='RepeaterDayPortion constant id'>RepeaterDayPortion</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:am</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='elsif elsif kw'>elsif</span> <span class='lbrack token'>[</span><span class='symbol val'>:afternoon</span><span class='comma token'>,</span> <span class='symbol val'>:evening</span><span class='comma token'>,</span> <span class='symbol val'>:night</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='t1tag identifier id'>t1tag</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='rparen token'>)</span>
      <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;--#{t1tag.type}-&gt;pm&quot;</span> <span class='if if_mod kw'>if</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span>
      <span class='t1 identifier id'>t1</span><span class='dot token'>.</span><span class='untag identifier id'>untag</span><span class='lparen token'>(</span><span class='RepeaterDayPortion constant id'>RepeaterDayPortion</span><span class='rparen token'>)</span>
      <span class='t1 identifier id'>t1</span><span class='dot token'>.</span><span class='tag identifier id'>tag</span><span class='lparen token'>(</span><span class='RepeaterDayPortion constant id'>RepeaterDayPortion</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:pm</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># tokens.each_with_index do |t0, i|</span>
  <span class='comment val'>#   t1 = tokens[i + 1]</span>
  <span class='comment val'>#   if t1 &amp;&amp; (t1tag = t1.get_tag(RepeaterDayPortion)) &amp;&amp; t0.get_tag(RepeaterTime)</span>
  <span class='comment val'>#     if [:morning].include?(t1tag.type)</span>
  <span class='comment val'>#       puts '--morning-&gt;am' if Chronic.debug</span>
  <span class='comment val'>#       t1.untag(RepeaterDayPortion)</span>
  <span class='comment val'>#       t1.tag(RepeaterDayPortion.new(:am))</span>
  <span class='comment val'>#     elsif [:afternoon, :evening, :night].include?(t1tag.type)</span>
  <span class='comment val'>#       puts &quot;--#{t1tag.type}-&gt;pm&quot; if Chronic.debug</span>
  <span class='comment val'>#       t1.untag(RepeaterDayPortion)</span>
  <span class='comment val'>#       t1.tag(RepeaterDayPortion.new(:pm))</span>
  <span class='comment val'>#     end</span>
  <span class='comment val'>#   end</span>
  <span class='comment val'># end</span>
        
  <span class='comment val'># handle ambiguous times if :ambiguous_time_range is specified</span>
  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='colon op'>:</span><span class='ambiguous_time_range identifier id'>ambiguous_time_range</span><span class='rbrack token'>]</span> <span class='neq op'>!=</span> <span class='colon op'>:</span><span class='none identifier id'>none</span>
    <span class='ttokens identifier id'>ttokens</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='each_with_index identifier id'>each_with_index</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='t0 identifier id'>t0</span><span class='comma token'>,</span> <span class='i identifier id'>i</span><span class='bitor op'>|</span>
      <span class='ttokens identifier id'>ttokens</span> <span class='lshft op'>&lt;&lt;</span> <span class='t0 identifier id'>t0</span>
      <span class='t1 identifier id'>t1</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='i identifier id'>i</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='rbrack token'>]</span>
      <span class='if if kw'>if</span> <span class='t0 identifier id'>t0</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterTime constant id'>RepeaterTime</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='t0 identifier id'>t0</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterTime constant id'>RepeaterTime</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='dot token'>.</span><span class='ambiguous? fid id'>ambiguous?</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span><span class='notop op'>!</span><span class='t1 identifier id'>t1</span> <span class='orop op'>||</span> <span class='notop op'>!</span><span class='t1 identifier id'>t1</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterDayPortion constant id'>RepeaterDayPortion</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
        <span class='distoken identifier id'>distoken</span> <span class='assign token'>=</span> <span class='Token constant id'>Token</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'disambiguator'</span><span class='rparen token'>)</span>
        <span class='distoken identifier id'>distoken</span><span class='dot token'>.</span><span class='tag identifier id'>tag</span><span class='lparen token'>(</span><span class='RepeaterDayPortion constant id'>RepeaterDayPortion</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:ambiguous_time_range</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
        <span class='ttokens identifier id'>ttokens</span> <span class='lshft op'>&lt;&lt;</span> <span class='distoken identifier id'>distoken</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    <span class='tokens identifier id'>tokens</span> <span class='assign token'>=</span> <span class='ttokens identifier id'>ttokens</span>
  <span class='end end kw'>end</span>
  
  <span class='tokens identifier id'>tokens</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>definitions</h3>
</div><div id="definitions-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>definitions</span><span class='args'>(options={})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a href='Chronic/ChronicPain.html' title='ChronicPain'>ChronicPain</a></tt>]</span>
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 5</span>

<span class='def def kw'>def</span> <span class='definitions identifier id'>definitions</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:endian_precedence</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='symbol val'>:middle</span><span class='comma token'>,</span> <span class='symbol val'>:little</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:endian_precedence</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  
  <span class='comment val'># ensure the endian precedence is exactly two elements long</span>
  <span class='raise identifier id'>raise</span> <span class='ChronicPain constant id'>ChronicPain</span><span class='comma token'>,</span> <span class='string val'>&quot;More than two elements specified for endian precedence array&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:endian_precedence</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='eq op'>==</span> <span class='integer val'>2</span>

  <span class='comment val'># handler for dd/mm/yyyy</span>
  <span class='@little_endian_handler ivar id'>@little_endian_handler</span> <span class='opasgn op'>||=</span> <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:scalar_day</span><span class='comma token'>,</span> <span class='symbol val'>:separator_slash_or_dash</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_month</span><span class='comma token'>,</span> <span class='symbol val'>:separator_slash_or_dash</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_year</span><span class='comma token'>,</span> <span class='symbol val'>:separator_at?</span><span class='comma token'>,</span> <span class='string val'>'time?'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_sd_sm_sy</span><span class='rparen token'>)</span>

  <span class='comment val'># handler for mm/dd/yyyy</span>
  <span class='@middle_endian_handler ivar id'>@middle_endian_handler</span> <span class='opasgn op'>||=</span> <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:scalar_month</span><span class='comma token'>,</span> <span class='symbol val'>:separator_slash_or_dash</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_day</span><span class='comma token'>,</span> <span class='symbol val'>:separator_slash_or_dash</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_year</span><span class='comma token'>,</span> <span class='symbol val'>:separator_at?</span><span class='comma token'>,</span> <span class='string val'>'time?'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_sm_sd_sy</span><span class='rparen token'>)</span>

  <span class='comment val'># ensure we have valid endian values</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:endian_precedence</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='e identifier id'>e</span><span class='bitor op'>|</span>
    <span class='raise identifier id'>raise</span> <span class='ChronicPain constant id'>ChronicPain</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Unknown endian type: #{e.to_s}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='instance_variable_defined? fid id'>instance_variable_defined?</span><span class='lparen token'>(</span><span class='endian_variable_name_for identifier id'>endian_variable_name_for</span><span class='lparen token'>(</span><span class='e identifier id'>e</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='@definitions ivar id'>@definitions</span> <span class='opasgn op'>||=</span> 
  <span class='lbrace token'>{</span><span class='symbol val'>:time</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:repeater_time</span><span class='comma token'>,</span> <span class='symbol val'>:repeater_day_portion?</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    
   <span class='symbol val'>:date</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:repeater_day_name</span><span class='comma token'>,</span> <span class='symbol val'>:repeater_month_name</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_day</span><span class='comma token'>,</span> <span class='symbol val'>:repeater_time</span><span class='comma token'>,</span> <span class='symbol val'>:separator_slash_or_dash?</span><span class='comma token'>,</span> <span class='symbol val'>:time_zone</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_year</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_rdn_rmn_sd_t_tz_sy</span><span class='rparen token'>)</span><span class='comma token'>,</span>
             <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:repeater_month_name</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_day</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_year</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_rmn_sd_sy</span><span class='rparen token'>)</span><span class='comma token'>,</span>
             <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:repeater_month_name</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_day</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_year</span><span class='comma token'>,</span> <span class='symbol val'>:separator_at?</span><span class='comma token'>,</span> <span class='string val'>'time?'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_rmn_sd_sy</span><span class='rparen token'>)</span><span class='comma token'>,</span>
             <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:repeater_month_name</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_day</span><span class='comma token'>,</span> <span class='symbol val'>:separator_at?</span><span class='comma token'>,</span> <span class='string val'>'time?'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_rmn_sd</span><span class='rparen token'>)</span><span class='comma token'>,</span>
             <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:repeater_time</span><span class='comma token'>,</span> <span class='symbol val'>:repeater_day_portion?</span><span class='comma token'>,</span> <span class='symbol val'>:separator_on?</span><span class='comma token'>,</span> <span class='symbol val'>:repeater_month_name</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_day</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_rmn_sd_on</span><span class='rparen token'>)</span><span class='comma token'>,</span>
             <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:repeater_month_name</span><span class='comma token'>,</span> <span class='symbol val'>:ordinal_day</span><span class='comma token'>,</span> <span class='symbol val'>:separator_at?</span><span class='comma token'>,</span> <span class='string val'>'time?'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_rmn_od</span><span class='rparen token'>)</span><span class='comma token'>,</span>
             <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:repeater_time</span><span class='comma token'>,</span> <span class='symbol val'>:repeater_day_portion?</span><span class='comma token'>,</span> <span class='symbol val'>:separator_on?</span><span class='comma token'>,</span> <span class='symbol val'>:repeater_month_name</span><span class='comma token'>,</span> <span class='symbol val'>:ordinal_day</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_rmn_od_on</span><span class='rparen token'>)</span><span class='comma token'>,</span>
             <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:repeater_month_name</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_year</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_rmn_sy</span><span class='rparen token'>)</span><span class='comma token'>,</span>
             <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:scalar_day</span><span class='comma token'>,</span> <span class='symbol val'>:repeater_month_name</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_year</span><span class='comma token'>,</span> <span class='symbol val'>:separator_at?</span><span class='comma token'>,</span> <span class='string val'>'time?'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_sd_rmn_sy</span><span class='rparen token'>)</span><span class='comma token'>,</span>
             <span class='@middle_endian_handler ivar id'>@middle_endian_handler</span><span class='comma token'>,</span>
             <span class='@little_endian_handler ivar id'>@little_endian_handler</span><span class='comma token'>,</span>
             <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:scalar_year</span><span class='comma token'>,</span> <span class='symbol val'>:separator_slash_or_dash</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_month</span><span class='comma token'>,</span> <span class='symbol val'>:separator_slash_or_dash</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_day</span><span class='comma token'>,</span> <span class='symbol val'>:separator_at?</span><span class='comma token'>,</span> <span class='string val'>'time?'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_sy_sm_sd</span><span class='rparen token'>)</span><span class='comma token'>,</span>
             <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:scalar_month</span><span class='comma token'>,</span> <span class='symbol val'>:separator_slash_or_dash</span><span class='comma token'>,</span> <span class='symbol val'>:scalar_year</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_sm_sy</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
             
   <span class='comment val'># tonight at 7pm</span>
   <span class='symbol val'>:anchor</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:grabber?</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='comma token'>,</span> <span class='symbol val'>:separator_at?</span><span class='comma token'>,</span> <span class='symbol val'>:repeater?</span><span class='comma token'>,</span> <span class='symbol val'>:repeater?</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_r</span><span class='rparen token'>)</span><span class='comma token'>,</span>
               <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:grabber?</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='comma token'>,</span> <span class='symbol val'>:separator_at?</span><span class='comma token'>,</span> <span class='symbol val'>:repeater?</span><span class='comma token'>,</span> <span class='symbol val'>:repeater?</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_r</span><span class='rparen token'>)</span><span class='comma token'>,</span>
               <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:repeater</span><span class='comma token'>,</span> <span class='symbol val'>:grabber</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_r_g_r</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
               
   <span class='comment val'># 3 weeks from now, in 2 months</span>
   <span class='symbol val'>:arrow</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:scalar</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='comma token'>,</span> <span class='symbol val'>:pointer</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_s_r_p</span><span class='rparen token'>)</span><span class='comma token'>,</span>
              <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:pointer</span><span class='comma token'>,</span> <span class='symbol val'>:scalar</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_p_s_r</span><span class='rparen token'>)</span><span class='comma token'>,</span>
              <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:scalar</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='comma token'>,</span> <span class='symbol val'>:pointer</span><span class='comma token'>,</span> <span class='string val'>'anchor'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_s_r_p_a</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
              
   <span class='comment val'># 3rd week in march</span>
   <span class='symbol val'>:narrow</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:ordinal</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='comma token'>,</span> <span class='symbol val'>:separator_in</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_o_r_s_r</span><span class='rparen token'>)</span><span class='comma token'>,</span>
               <span class='Handler constant id'>Handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='symbol val'>:ordinal</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='comma token'>,</span> <span class='symbol val'>:grabber</span><span class='comma token'>,</span> <span class='symbol val'>:repeater</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='symbol val'>:handle_o_r_g_r</span><span class='rparen token'>)</span><span class='rbrack token'>]</span>
  <span class='rbrace token'>}</span>
  
  <span class='apply_endian_precedences identifier id'>apply_endian_precedences</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:endian_precedence</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  
  <span class='@definitions ivar id'>@definitions</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>endian_variable_name_for</h3>
</div><div id="endian_variable_name_for-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>endian_variable_name_for</span><span class='args'>(e)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


121
122
123</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 121</span>

<span class='def def kw'>def</span> <span class='endian_variable_name_for identifier id'>endian_variable_name_for</span><span class='lparen token'>(</span><span class='e identifier id'>e</span><span class='rparen token'>)</span>
  <span class='dstring node'>&quot;@#{e.to_s}_endian_handler&quot;</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>find_within</h3>
</div><div id="find_within-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>find_within</span><span class='args'>(tags, span, pointer)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Recursively finds repeaters within other repeaters. Returns a Span
representing the innermost time span or nil if no repeater union could be
found
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


393
394
395
396
397
398
399
400
401
402
403
404
405
406</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 393</span>

<span class='def def kw'>def</span> <span class='find_within identifier id'>find_within</span><span class='lparen token'>(</span><span class='tags identifier id'>tags</span><span class='comma token'>,</span> <span class='span identifier id'>span</span><span class='comma token'>,</span> <span class='pointer identifier id'>pointer</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;--#{span}&quot;</span> <span class='if if_mod kw'>if</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span>
  <span class='return return kw'>return</span> <span class='span identifier id'>span</span> <span class='if if_mod kw'>if</span> <span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  
  <span class='head identifier id'>head</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='rest identifier id'>rest</span> <span class='assign token'>=</span> <span class='tags identifier id'>tags</span>
  <span class='head identifier id'>head</span><span class='dot token'>.</span><span class='start identifier id'>start</span> <span class='assign token'>=</span> <span class='pointer identifier id'>pointer</span> <span class='eq op'>==</span> <span class='symbol val'>:future</span> <span class='question op'>?</span> <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='begin identifier id'>begin</span> <span class='colon op'>:</span> <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='end identifier id'>end</span>
  <span class='h identifier id'>h</span> <span class='assign token'>=</span> <span class='head identifier id'>head</span><span class='dot token'>.</span><span class='this identifier id'>this</span><span class='lparen token'>(</span><span class='symbol val'>:none</span><span class='rparen token'>)</span>
        
  <span class='if if kw'>if</span> <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='h identifier id'>h</span><span class='dot token'>.</span><span class='begin identifier id'>begin</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='h identifier id'>h</span><span class='dot token'>.</span><span class='end identifier id'>end</span><span class='rparen token'>)</span>
    <span class='return return kw'>return</span> <span class='find_within identifier id'>find_within</span><span class='lparen token'>(</span><span class='rest identifier id'>rest</span><span class='comma token'>,</span> <span class='h identifier id'>h</span><span class='comma token'>,</span> <span class='pointer identifier id'>pointer</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get_anchor</h3>
</div><div id="get_anchor-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get_anchor</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
support methods
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 347</span>

<span class='def def kw'>def</span> <span class='get_anchor identifier id'>get_anchor</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='grabber identifier id'>grabber</span> <span class='assign token'>=</span> <span class='Grabber constant id'>Grabber</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:this</span><span class='rparen token'>)</span>
  <span class='pointer identifier id'>pointer</span> <span class='assign token'>=</span> <span class='symbol val'>:future</span>
  
  <span class='repeaters identifier id'>repeaters</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='get_repeaters identifier id'>get_repeaters</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='rparen token'>)</span>
  <span class='repeaters identifier id'>repeaters</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='dot token'>.</span><span class='times identifier id'>times</span> <span class='lbrace token'>{</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span> <span class='rbrace token'>}</span>
                
  <span class='if if kw'>if</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='first identifier id'>first</span> <span class='andop op'>&amp;&amp;</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='Grabber constant id'>Grabber</span><span class='rparen token'>)</span>
    <span class='grabber identifier id'>grabber</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='Grabber constant id'>Grabber</span><span class='rparen token'>)</span>
    <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span>
  <span class='end end kw'>end</span>
  
  <span class='head identifier id'>head</span> <span class='assign token'>=</span> <span class='repeaters identifier id'>repeaters</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span>
  <span class='head identifier id'>head</span><span class='dot token'>.</span><span class='start identifier id'>start</span> <span class='assign token'>=</span> <span class='@now ivar id'>@now</span>
              
  <span class='case case kw'>case</span> <span class='grabber identifier id'>grabber</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:last</span>
      <span class='outer_span identifier id'>outer_span</span> <span class='assign token'>=</span> <span class='head identifier id'>head</span><span class='dot token'>.</span><span class='next identifier id'>next</span><span class='lparen token'>(</span><span class='symbol val'>:past</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:this</span>
      <span class='if if kw'>if</span> <span class='repeaters identifier id'>repeaters</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
        <span class='outer_span identifier id'>outer_span</span> <span class='assign token'>=</span> <span class='head identifier id'>head</span><span class='dot token'>.</span><span class='this identifier id'>this</span><span class='lparen token'>(</span><span class='symbol val'>:none</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='outer_span identifier id'>outer_span</span> <span class='assign token'>=</span> <span class='head identifier id'>head</span><span class='dot token'>.</span><span class='this identifier id'>this</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:context</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:next</span>
      <span class='outer_span identifier id'>outer_span</span> <span class='assign token'>=</span> <span class='head identifier id'>head</span><span class='dot token'>.</span><span class='next identifier id'>next</span><span class='lparen token'>(</span><span class='symbol val'>:future</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span> <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='ChronicPain constant id'>ChronicPain</span><span class='comma token'>,</span> <span class='string val'>&quot;Invalid grabber&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;--#{outer_span}&quot;</span> <span class='if if_mod kw'>if</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span>
  <span class='anchor identifier id'>anchor</span> <span class='assign token'>=</span> <span class='find_within identifier id'>find_within</span><span class='lparen token'>(</span><span class='repeaters identifier id'>repeaters</span><span class='comma token'>,</span> <span class='outer_span identifier id'>outer_span</span><span class='comma token'>,</span> <span class='pointer identifier id'>pointer</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>get_repeaters</h3>
</div><div id="get_repeaters-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>get_repeaters</span><span class='args'>(tokens)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


380
381
382
383
384
385
386
387
388</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 380</span>

<span class='def def kw'>def</span> <span class='get_repeaters identifier id'>get_repeaters</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='repeaters identifier id'>repeaters</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='token identifier id'>token</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='t identifier id'>t</span> <span class='assign token'>=</span> <span class='token identifier id'>token</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='Repeater constant id'>Repeater</span><span class='rparen token'>)</span>
      <span class='repeaters identifier id'>repeaters</span> <span class='lshft op'>&lt;&lt;</span> <span class='t identifier id'>t</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='repeaters identifier id'>repeaters</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span><span class='dot token'>.</span><span class='reverse identifier id'>reverse</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>guess</h3>
</div><div id="guess-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>guess</span><span class='args'>(span)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Guess a specific time within the given span
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


152
153
154
155
156
157
158
159</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/chronic.rb', line 152</span>

<span class='def def kw'>def</span> <span class='guess identifier id'>guess</span><span class='lparen token'>(</span><span class='span identifier id'>span</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='if if kw'>if</span> <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='width identifier id'>width</span> <span class='gt op'>&gt;</span> <span class='integer val'>1</span>
    <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='begin identifier id'>begin</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='span identifier id'>span</span><span class='dot token'>.</span><span class='width identifier id'>width</span> <span class='div op'>/</span> <span class='integer val'>2</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='begin identifier id'>begin</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_m_d</h3>
</div><div id="handle_m_d-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_m_d</span><span class='args'>(month, day, time_tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="10"></hr>
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


142
143
144
145
146
147
148
149</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 142</span>

<span class='def def kw'>def</span> <span class='handle_m_d identifier id'>handle_m_d</span><span class='lparen token'>(</span><span class='month identifier id'>month</span><span class='comma token'>,</span> <span class='day identifier id'>day</span><span class='comma token'>,</span> <span class='time_tokens identifier id'>time_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='month identifier id'>month</span><span class='dot token'>.</span><span class='start identifier id'>start</span> <span class='assign token'>=</span> <span class='@now ivar id'>@now</span>
  <span class='span identifier id'>span</span> <span class='assign token'>=</span> <span class='month identifier id'>month</span><span class='dot token'>.</span><span class='this identifier id'>this</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:context</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  
  <span class='day_start identifier id'>day_start</span> <span class='assign token'>=</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='time_class identifier id'>time_class</span><span class='dot token'>.</span><span class='local identifier id'>local</span><span class='lparen token'>(</span><span class='span identifier id'>span</span><span class='dot token'>.</span><span class='begin identifier id'>begin</span><span class='dot token'>.</span><span class='year identifier id'>year</span><span class='comma token'>,</span> <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='begin identifier id'>begin</span><span class='dot token'>.</span><span class='month identifier id'>month</span><span class='comma token'>,</span> <span class='day identifier id'>day</span><span class='rparen token'>)</span>
  
  <span class='day_or_time identifier id'>day_or_time</span><span class='lparen token'>(</span><span class='day_start identifier id'>day_start</span><span class='comma token'>,</span> <span class='time_tokens identifier id'>time_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_o_r_g_r</h3>
</div><div id="handle_o_r_g_r-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_o_r_g_r</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


340
341
342
343</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 340</span>

<span class='def def kw'>def</span> <span class='handle_o_r_g_r identifier id'>handle_o_r_g_r</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='outer_span identifier id'>outer_span</span> <span class='assign token'>=</span> <span class='get_anchor identifier id'>get_anchor</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='float val'>2</span><span class='dot2 op'>..</span><span class='integer val'>3</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='handle_orr identifier id'>handle_orr</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='outer_span identifier id'>outer_span</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_o_r_s_r</h3>
</div><div id="handle_o_r_s_r-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_o_r_s_r</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


335
336
337
338</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 335</span>

<span class='def def kw'>def</span> <span class='handle_o_r_s_r identifier id'>handle_o_r_s_r</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='outer_span identifier id'>outer_span</span> <span class='assign token'>=</span> <span class='get_anchor identifier id'>get_anchor</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>3</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='handle_orr identifier id'>handle_orr</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='outer_span identifier id'>outer_span</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_orr</h3>
</div><div id="handle_orr-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_orr</span><span class='args'>(tokens, outer_span, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
narrows
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


320
321
322
323
324
325
326
327
328
329
330
331
332
333</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 320</span>

<span class='def def kw'>def</span> <span class='handle_orr identifier id'>handle_orr</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='outer_span identifier id'>outer_span</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='repeater identifier id'>repeater</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='Repeater constant id'>Repeater</span><span class='rparen token'>)</span>
  <span class='repeater identifier id'>repeater</span><span class='dot token'>.</span><span class='start identifier id'>start</span> <span class='assign token'>=</span> <span class='outer_span identifier id'>outer_span</span><span class='dot token'>.</span><span class='begin identifier id'>begin</span> <span class='minus op'>-</span> <span class='integer val'>1</span>
  <span class='ordinal identifier id'>ordinal</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='Ordinal constant id'>Ordinal</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  <span class='span identifier id'>span</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='ordinal identifier id'>ordinal</span><span class='dot token'>.</span><span class='times identifier id'>times</span> <span class='do do kw'>do</span>
    <span class='span identifier id'>span</span> <span class='assign token'>=</span> <span class='repeater identifier id'>repeater</span><span class='dot token'>.</span><span class='next identifier id'>next</span><span class='lparen token'>(</span><span class='symbol val'>:future</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='begin identifier id'>begin</span> <span class='gt op'>&gt;</span> <span class='outer_span identifier id'>outer_span</span><span class='dot token'>.</span><span class='end identifier id'>end</span>
      <span class='span identifier id'>span</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
      <span class='break break kw'>break</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='span identifier id'>span</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_p_s_r</h3>
</div><div id="handle_p_s_r-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_p_s_r</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


308
309
310
311</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 308</span>

<span class='def def kw'>def</span> <span class='handle_p_s_r identifier id'>handle_p_s_r</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='new_tokens identifier id'>new_tokens</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='handle_s_r_p identifier id'>handle_s_r_p</span><span class='lparen token'>(</span><span class='new_tokens identifier id'>new_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_r</h3>
</div><div id="handle_r-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_r</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
anchors
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


268
269
270
271</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 268</span>

<span class='def def kw'>def</span> <span class='handle_r identifier id'>handle_r</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='dd_tokens identifier id'>dd_tokens</span> <span class='assign token'>=</span> <span class='dealias_and_disambiguate_times identifier id'>dealias_and_disambiguate_times</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='get_anchor identifier id'>get_anchor</span><span class='lparen token'>(</span><span class='dd_tokens identifier id'>dd_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_r_g_r</h3>
</div><div id="handle_r_g_r-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_r_g_r</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


273
274
275
276</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 273</span>

<span class='def def kw'>def</span> <span class='handle_r_g_r identifier id'>handle_r_g_r</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='new_tokens identifier id'>new_tokens</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='handle_r identifier id'>handle_r</span><span class='lparen token'>(</span><span class='new_tokens identifier id'>new_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_rdn_rmn_sd_t_tz_sy</h3>
</div><div id="handle_rdn_rmn_sd_t_tz_sy-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_rdn_rmn_sd_t_tz_sy</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


194
195
196
197</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 194</span>

<span class='def def kw'>def</span> <span class='handle_rdn_rmn_sd_t_tz_sy identifier id'>handle_rdn_rmn_sd_t_tz_sy</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='t identifier id'>t</span> <span class='assign token'>=</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='time_class identifier id'>time_class</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='@text ivar id'>@text</span><span class='rparen token'>)</span>
  <span class='Span constant id'>Span</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='t identifier id'>t</span><span class='comma token'>,</span> <span class='t identifier id'>t</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_rmn_od</h3>
</div><div id="handle_rmn_od-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_rmn_od</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


163
164
165</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 163</span>

<span class='def def kw'>def</span> <span class='handle_rmn_od identifier id'>handle_rmn_od</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='handle_m_d identifier id'>handle_m_d</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterMonthName constant id'>RepeaterMonthName</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='OrdinalDay constant id'>OrdinalDay</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='float val'>2</span><span class='dot2 op'>..</span><span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_rmn_od_on</h3>
</div><div id="handle_rmn_od_on-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_rmn_od_on</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


167
168
169
170
171
172
173</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 167</span>

<span class='def def kw'>def</span> <span class='handle_rmn_od_on identifier id'>handle_rmn_od_on</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='if if kw'>if</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>3</span>
    <span class='handle_m_d identifier id'>handle_m_d</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterMonthName constant id'>RepeaterMonthName</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>3</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='OrdinalDay constant id'>OrdinalDay</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='handle_m_d identifier id'>handle_m_d</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterMonthName constant id'>RepeaterMonthName</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='OrdinalDay constant id'>OrdinalDay</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_rmn_sd</h3>
</div><div id="handle_rmn_sd-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_rmn_sd</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


151
152
153</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 151</span>

<span class='def def kw'>def</span> <span class='handle_rmn_sd identifier id'>handle_rmn_sd</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='handle_m_d identifier id'>handle_m_d</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterMonthName constant id'>RepeaterMonthName</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarDay constant id'>ScalarDay</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='float val'>2</span><span class='dot2 op'>..</span><span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='size identifier id'>size</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_rmn_sd_on</h3>
</div><div id="handle_rmn_sd_on-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_rmn_sd_on</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


155
156
157
158
159
160
161</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 155</span>

<span class='def def kw'>def</span> <span class='handle_rmn_sd_on identifier id'>handle_rmn_sd_on</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='if if kw'>if</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='gt op'>&gt;</span> <span class='integer val'>3</span>
    <span class='handle_m_d identifier id'>handle_m_d</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterMonthName constant id'>RepeaterMonthName</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>3</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarDay constant id'>ScalarDay</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='handle_m_d identifier id'>handle_m_d</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterMonthName constant id'>RepeaterMonthName</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarDay constant id'>ScalarDay</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_rmn_sd_sy</h3>
</div><div id="handle_rmn_sd_sy-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_rmn_sd_sy</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


199
200
201
202
203
204
205
206
207
208
209
210
211
212</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 199</span>

<span class='def def kw'>def</span> <span class='handle_rmn_sd_sy identifier id'>handle_rmn_sd_sy</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='month identifier id'>month</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterMonthName constant id'>RepeaterMonthName</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='index identifier id'>index</span>
  <span class='day identifier id'>day</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarDay constant id'>ScalarDay</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  <span class='year identifier id'>year</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarYear constant id'>ScalarYear</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  
  <span class='time_tokens identifier id'>time_tokens</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='minus op'>-</span> <span class='integer val'>3</span><span class='rparen token'>)</span>
  
  <span class='begin begin kw'>begin</span>
    <span class='day_start identifier id'>day_start</span> <span class='assign token'>=</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='time_class identifier id'>time_class</span><span class='dot token'>.</span><span class='local identifier id'>local</span><span class='lparen token'>(</span><span class='year identifier id'>year</span><span class='comma token'>,</span> <span class='month identifier id'>month</span><span class='comma token'>,</span> <span class='day identifier id'>day</span><span class='rparen token'>)</span>
    <span class='day_or_time identifier id'>day_or_time</span><span class='lparen token'>(</span><span class='day_start identifier id'>day_start</span><span class='comma token'>,</span> <span class='time_tokens identifier id'>time_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='ArgumentError constant id'>ArgumentError</span>
    <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_rmn_sy</h3>
</div><div id="handle_rmn_sy-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_rmn_sy</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 175</span>

<span class='def def kw'>def</span> <span class='handle_rmn_sy identifier id'>handle_rmn_sy</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='month identifier id'>month</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='RepeaterMonthName constant id'>RepeaterMonthName</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='index identifier id'>index</span>
  <span class='year identifier id'>year</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarYear constant id'>ScalarYear</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  
  <span class='if if kw'>if</span> <span class='month identifier id'>month</span> <span class='eq op'>==</span> <span class='integer val'>12</span>
    <span class='next_month_year identifier id'>next_month_year</span> <span class='assign token'>=</span> <span class='year identifier id'>year</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
    <span class='next_month_month identifier id'>next_month_month</span> <span class='assign token'>=</span> <span class='integer val'>1</span>
  <span class='else else kw'>else</span>
    <span class='next_month_year identifier id'>next_month_year</span> <span class='assign token'>=</span> <span class='year identifier id'>year</span>
    <span class='next_month_month identifier id'>next_month_month</span> <span class='assign token'>=</span> <span class='month identifier id'>month</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
  <span class='end end kw'>end</span>
  
  <span class='begin begin kw'>begin</span>
    <span class='Span constant id'>Span</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='time_class identifier id'>time_class</span><span class='dot token'>.</span><span class='local identifier id'>local</span><span class='lparen token'>(</span><span class='year identifier id'>year</span><span class='comma token'>,</span> <span class='month identifier id'>month</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='time_class identifier id'>time_class</span><span class='dot token'>.</span><span class='local identifier id'>local</span><span class='lparen token'>(</span><span class='next_month_year identifier id'>next_month_year</span><span class='comma token'>,</span> <span class='next_month_month identifier id'>next_month_month</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='ArgumentError constant id'>ArgumentError</span>
    <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_s_r_p</h3>
</div><div id="handle_s_r_p-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_s_r_p</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 288</span>

<span class='def def kw'>def</span> <span class='handle_s_r_p identifier id'>handle_s_r_p</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='repeater identifier id'>repeater</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='Repeater constant id'>Repeater</span><span class='rparen token'>)</span>
        
  <span class='comment val'># span = </span>
  <span class='comment val'># case true</span>
  <span class='comment val'># when [RepeaterYear, RepeaterSeason, RepeaterSeasonName, RepeaterMonth, RepeaterMonthName, RepeaterFortnight, RepeaterWeek].include?(repeater.class)</span>
  <span class='comment val'>#   self.parse(&quot;this hour&quot;, :guess =&gt; false, :now =&gt; @now)</span>
  <span class='comment val'># when [RepeaterWeekend, RepeaterDay, RepeaterDayName, RepeaterDayPortion, RepeaterHour].include?(repeater.class)</span>
  <span class='comment val'>#   self.parse(&quot;this minute&quot;, :guess =&gt; false, :now =&gt; @now)</span>
  <span class='comment val'># when [RepeaterMinute, RepeaterSecond].include?(repeater.class)</span>
  <span class='comment val'>#   self.parse(&quot;this second&quot;, :guess =&gt; false, :now =&gt; @now)</span>
  <span class='comment val'># else</span>
  <span class='comment val'>#   raise(ChronicPain, &quot;Invalid repeater: #{repeater.class}&quot;)</span>
  <span class='comment val'># end</span>
  
  <span class='span identifier id'>span</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='string val'>&quot;this second&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:guess</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='symbol val'>:now</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@now ivar id'>@now</span><span class='rparen token'>)</span>
  
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='handle_srp identifier id'>handle_srp</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='span identifier id'>span</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_s_r_p_a</h3>
</div><div id="handle_s_r_p_a-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_s_r_p_a</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


313
314
315
316</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 313</span>

<span class='def def kw'>def</span> <span class='handle_s_r_p_a identifier id'>handle_s_r_p_a</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='anchor_span identifier id'>anchor_span</span> <span class='assign token'>=</span> <span class='get_anchor identifier id'>get_anchor</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='float val'>3</span><span class='dot2 op'>..</span><span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='minus op'>-</span> <span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='handle_srp identifier id'>handle_srp</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='anchor_span identifier id'>anchor_span</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_sd_rmn_sy</h3>
</div><div id="handle_sd_rmn_sy-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_sd_rmn_sy</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


214
215
216
217
218</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 214</span>

<span class='def def kw'>def</span> <span class='handle_sd_rmn_sy identifier id'>handle_sd_rmn_sy</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='new_tokens identifier id'>new_tokens</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
  <span class='time_tokens identifier id'>time_tokens</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='minus op'>-</span> <span class='integer val'>3</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='handle_rmn_sd_sy identifier id'>handle_rmn_sd_sy</span><span class='lparen token'>(</span><span class='new_tokens identifier id'>new_tokens</span> <span class='plus op'>+</span> <span class='time_tokens identifier id'>time_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_sd_sm_sy</h3>
</div><div id="handle_sd_sm_sy-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_sd_sm_sy</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


235
236
237
238
239</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 235</span>

<span class='def def kw'>def</span> <span class='handle_sd_sm_sy identifier id'>handle_sd_sm_sy</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='new_tokens identifier id'>new_tokens</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
  <span class='time_tokens identifier id'>time_tokens</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='minus op'>-</span> <span class='integer val'>3</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='handle_sm_sd_sy identifier id'>handle_sm_sd_sy</span><span class='lparen token'>(</span><span class='new_tokens identifier id'>new_tokens</span> <span class='plus op'>+</span> <span class='time_tokens identifier id'>time_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_sm_sd_sy</h3>
</div><div id="handle_sm_sd_sy-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_sm_sd_sy</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


220
221
222
223
224
225
226
227
228
229
230
231
232
233</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 220</span>

<span class='def def kw'>def</span> <span class='handle_sm_sd_sy identifier id'>handle_sm_sd_sy</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='month identifier id'>month</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarMonth constant id'>ScalarMonth</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  <span class='day identifier id'>day</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarDay constant id'>ScalarDay</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  <span class='year identifier id'>year</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarYear constant id'>ScalarYear</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  
  <span class='time_tokens identifier id'>time_tokens</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='minus op'>-</span> <span class='integer val'>3</span><span class='rparen token'>)</span>
  
  <span class='begin begin kw'>begin</span>
    <span class='day_start identifier id'>day_start</span> <span class='assign token'>=</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='time_class identifier id'>time_class</span><span class='dot token'>.</span><span class='local identifier id'>local</span><span class='lparen token'>(</span><span class='year identifier id'>year</span><span class='comma token'>,</span> <span class='month identifier id'>month</span><span class='comma token'>,</span> <span class='day identifier id'>day</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
    <span class='day_or_time identifier id'>day_or_time</span><span class='lparen token'>(</span><span class='day_start identifier id'>day_start</span><span class='comma token'>,</span> <span class='time_tokens identifier id'>time_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='ArgumentError constant id'>ArgumentError</span>
    <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_sm_sy</h3>
</div><div id="handle_sm_sy-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_sm_sy</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 247</span>

<span class='def def kw'>def</span> <span class='handle_sm_sy identifier id'>handle_sm_sy</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='month identifier id'>month</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarMonth constant id'>ScalarMonth</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  <span class='year identifier id'>year</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='ScalarYear constant id'>ScalarYear</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  
  <span class='if if kw'>if</span> <span class='month identifier id'>month</span> <span class='eq op'>==</span> <span class='integer val'>12</span>
    <span class='next_month_year identifier id'>next_month_year</span> <span class='assign token'>=</span> <span class='year identifier id'>year</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
    <span class='next_month_month identifier id'>next_month_month</span> <span class='assign token'>=</span> <span class='integer val'>1</span>
  <span class='else else kw'>else</span>
    <span class='next_month_year identifier id'>next_month_year</span> <span class='assign token'>=</span> <span class='year identifier id'>year</span>
    <span class='next_month_month identifier id'>next_month_month</span> <span class='assign token'>=</span> <span class='month identifier id'>month</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
  <span class='end end kw'>end</span>
  
  <span class='begin begin kw'>begin</span>
    <span class='Span constant id'>Span</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='time_class identifier id'>time_class</span><span class='dot token'>.</span><span class='local identifier id'>local</span><span class='lparen token'>(</span><span class='year identifier id'>year</span><span class='comma token'>,</span> <span class='month identifier id'>month</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='time_class identifier id'>time_class</span><span class='dot token'>.</span><span class='local identifier id'>local</span><span class='lparen token'>(</span><span class='next_month_year identifier id'>next_month_year</span><span class='comma token'>,</span> <span class='next_month_month identifier id'>next_month_month</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='ArgumentError constant id'>ArgumentError</span>
    <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_srp</h3>
</div><div id="handle_srp-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_srp</span><span class='args'>(tokens, span, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
arrows
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


280
281
282
283
284
285
286</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 280</span>

<span class='def def kw'>def</span> <span class='handle_srp identifier id'>handle_srp</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='span identifier id'>span</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='distance identifier id'>distance</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='Scalar constant id'>Scalar</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  <span class='repeater identifier id'>repeater</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='Repeater constant id'>Repeater</span><span class='rparen token'>)</span>
  <span class='pointer identifier id'>pointer</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='Pointer constant id'>Pointer</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='type identifier id'>type</span>
  
  <span class='repeater identifier id'>repeater</span><span class='dot token'>.</span><span class='offset identifier id'>offset</span><span class='lparen token'>(</span><span class='span identifier id'>span</span><span class='comma token'>,</span> <span class='distance identifier id'>distance</span><span class='comma token'>,</span> <span class='pointer identifier id'>pointer</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>handle_sy_sm_sd</h3>
</div><div id="handle_sy_sm_sd-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>handle_sy_sm_sd</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


241
242
243
244
245</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 241</span>

<span class='def def kw'>def</span> <span class='handle_sy_sm_sd identifier id'>handle_sy_sm_sd</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='new_tokens identifier id'>new_tokens</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
  <span class='time_tokens identifier id'>time_tokens</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='minus op'>-</span> <span class='integer val'>3</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='handle_sm_sd_sy identifier id'>handle_sm_sd_sy</span><span class='lparen token'>(</span><span class='new_tokens identifier id'>new_tokens</span> <span class='plus op'>+</span> <span class='time_tokens identifier id'>time_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>numericize_numbers</h3>
</div><div id="numericize_numbers-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>numericize_numbers</span><span class='args'>(text)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Convert number words to numbers (three =&gt; 3)
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


136
137
138</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/chronic.rb', line 136</span>

<span class='def def kw'>def</span> <span class='numericize_numbers identifier id'>numericize_numbers</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='Numerizer constant id'>Numerizer</span><span class='dot token'>.</span><span class='numerize identifier id'>numerize</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>numericize_ordinals</h3>
</div><div id="numericize_ordinals-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>numericize_ordinals</span><span class='args'>(text)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Convert ordinal words to numeric ordinals (third =&gt; 3rd)
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


141
142
143</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/chronic.rb', line 141</span>

<span class='def def kw'>def</span> <span class='numericize_ordinals identifier id'>numericize_ordinals</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='text identifier id'>text</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>parse</h3>
</div><div id="parse-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>parse</span><span class='args'>(text, specified_options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Parses a string containing a natural language date or time. If the parser
can find a date or time, either a Time or Chronic::Span will be returned
(depending on the value of <tt>:guess</tt>). If no date or time can be
found, <tt>nil</tt> will be returned.
</p>
<p>
Options are:
</p>
<dl>
<dt><tt>:context</tt></dt><dd><tt>:past</tt> or <tt>:future</tt> (defaults to <tt>:future</tt>)

<p>
If your string represents a birthday, you can set <tt>:context</tt> to
<tt>:past</tt> and if an ambiguous string is given, it will assume it is in
the past. Specify <tt>:future</tt> or omit to set a future context.
</p>
</dd>
<dt><tt>:now</tt></dt><dd>Time (defaults to Time.now)

<p>
By setting <tt>:now</tt> to a Time, all computations will be based off of
that time instead of Time.now. If set to nil, Chronic will use Time.now.
</p>
</dd>
<dt><tt>:guess</tt></dt><dd><tt>true</tt> or <tt>false</tt> (defaults to <tt>true</tt>)

<p>
By default, the parser will guess a single point in time for the given date
or time. If you&#8217;d rather have the entire time span returned, set
<tt>:guess</tt> to <tt>false</tt> and a Chronic::Span will be returned.
</p>
</dd>
<dt><tt>:ambiguous_time_range</tt></dt><dd>Integer or <tt>:none</tt> (defaults to <tt>6</tt> (6am-6pm))

<p>
If an Integer is given, ambiguous times (like 5:00) will be assumed to be
within the range of that time in the AM to that time in the PM. For
example, if you set it to <tt>7</tt>, then the parser will look for the
time between 7am and 7pm. In the case of 5:00, it would assume that means
5:00pm. If <tt>:none</tt> is given, no assumption will be made, and the
first matching instance of that time will be used.
</p>
</dd>
</dl>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/chronic.rb', line 41</span>

<span class='def def kw'>def</span> <span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='comma token'>,</span> <span class='specified_options identifier id'>specified_options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='@text ivar id'>@text</span> <span class='assign token'>=</span> <span class='text identifier id'>text</span>
  
  <span class='comment val'># get options and set defaults if necessary</span>
  <span class='default_options identifier id'>default_options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:context</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:future</span><span class='comma token'>,</span>
                     <span class='symbol val'>:now</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='time_class identifier id'>time_class</span><span class='dot token'>.</span><span class='now identifier id'>now</span><span class='comma token'>,</span>
                     <span class='symbol val'>:guess</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span>
                     <span class='symbol val'>:ambiguous_time_range</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>6</span><span class='comma token'>,</span>
                     <span class='symbol val'>:endian_precedence</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='rbrace token'>}</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='default_options identifier id'>default_options</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span> <span class='specified_options identifier id'>specified_options</span>
  
  <span class='comment val'># handle options that were set to nil</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:context</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='symbol val'>:future</span> <span class='unless unless_mod kw'>unless</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:context</span><span class='rbrack token'>]</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:now</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='time_class identifier id'>time_class</span><span class='dot token'>.</span><span class='now identifier id'>now</span> <span class='unless unless_mod kw'>unless</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:context</span><span class='rbrack token'>]</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:ambiguous_time_range</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='integer val'>6</span> <span class='unless unless_mod kw'>unless</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:ambiguous_time_range</span><span class='rbrack token'>]</span>
        
  <span class='comment val'># ensure the specified options are valid</span>
  <span class='specified_options identifier id'>specified_options</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='bitor op'>|</span>
    <span class='default_options identifier id'>default_options</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='InvalidArgumentException constant id'>InvalidArgumentException</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{key} is not a valid option key.&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='lbrack token'>[</span><span class='symbol val'>:past</span><span class='comma token'>,</span> <span class='symbol val'>:future</span><span class='comma token'>,</span> <span class='symbol val'>:none</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:context</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='InvalidArgumentException constant id'>InvalidArgumentException</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Invalid value ':#{options[:context]}' for :context specified. Valid values are :past and :future.&quot;</span><span class='rparen token'>)</span>
  
  <span class='comment val'># store now for later =)</span>
  <span class='@now ivar id'>@now</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:now</span><span class='rbrack token'>]</span>
  
  <span class='comment val'># put the text into a normal format to ease scanning</span>
  <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='pre_normalize identifier id'>pre_normalize</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
      
  <span class='comment val'># get base tokens for each word</span>
  <span class='@tokens ivar id'>@tokens</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='base_tokenize identifier id'>base_tokenize</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>

  <span class='comment val'># scan the tokens with each token scanner</span>
  <span class='lbrack token'>[</span><span class='Repeater constant id'>Repeater</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='tokenizer identifier id'>tokenizer</span><span class='bitor op'>|</span>
    <span class='@tokens ivar id'>@tokens</span> <span class='assign token'>=</span> <span class='tokenizer identifier id'>tokenizer</span><span class='dot token'>.</span><span class='scan identifier id'>scan</span><span class='lparen token'>(</span><span class='@tokens ivar id'>@tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='lbrack token'>[</span><span class='Grabber constant id'>Grabber</span><span class='comma token'>,</span> <span class='Pointer constant id'>Pointer</span><span class='comma token'>,</span> <span class='Scalar constant id'>Scalar</span><span class='comma token'>,</span> <span class='Ordinal constant id'>Ordinal</span><span class='comma token'>,</span> <span class='Separator constant id'>Separator</span><span class='comma token'>,</span> <span class='TimeZone constant id'>TimeZone</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='tokenizer identifier id'>tokenizer</span><span class='bitor op'>|</span>
    <span class='@tokens ivar id'>@tokens</span> <span class='assign token'>=</span> <span class='tokenizer identifier id'>tokenizer</span><span class='dot token'>.</span><span class='scan identifier id'>scan</span><span class='lparen token'>(</span><span class='@tokens ivar id'>@tokens</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># strip any non-tagged tokens</span>
  <span class='@tokens ivar id'>@tokens</span> <span class='assign token'>=</span> <span class='@tokens ivar id'>@tokens</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='token identifier id'>token</span><span class='bitor op'>|</span> <span class='token identifier id'>token</span><span class='dot token'>.</span><span class='tagged? fid id'>tagged?</span> <span class='rbrace token'>}</span>
  
  <span class='if if kw'>if</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span>
    <span class='puts identifier id'>puts</span> <span class='string val'>&quot;+---------------------------------------------------&quot;</span>
    <span class='puts identifier id'>puts</span> <span class='string val'>&quot;| &quot;</span> <span class='plus op'>+</span> <span class='@tokens ivar id'>@tokens</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='puts identifier id'>puts</span> <span class='string val'>&quot;+---------------------------------------------------&quot;</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># do the heavy lifting</span>
  <span class='begin begin kw'>begin</span>
    <span class='span identifier id'>span</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='tokens_to_span identifier id'>tokens_to_span</span><span class='lparen token'>(</span><span class='@tokens ivar id'>@tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span>
    <span class='raise identifier id'>raise</span>
    <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># guess a time within a span if required</span>
  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='colon op'>:</span><span class='guess identifier id'>guess</span><span class='rbrack token'>]</span>
    <span class='return return kw'>return</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='guess identifier id'>guess</span><span class='lparen token'>(</span><span class='span identifier id'>span</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='return return kw'>return</span> <span class='span identifier id'>span</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>pre_normalize</h3>
</div><div id="pre_normalize-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>pre_normalize</span><span class='args'>(text)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Clean up the specified input text by stripping unwanted characters,
converting idioms to their canonical form, converting number words to
numbers (three =&gt; 3), and converting ordinal words to numeric ordinals
(third =&gt; 3rd)
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/chronic.rb', line 110</span>

<span class='def def kw'>def</span> <span class='pre_normalize identifier id'>pre_normalize</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='normalized_text identifier id'>normalized_text</span> <span class='assign token'>=</span> <span class='text identifier id'>text</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span>
  <span class='normalized_text identifier id'>normalized_text</span> <span class='assign token'>=</span> <span class='numericize_numbers identifier id'>numericize_numbers</span><span class='lparen token'>(</span><span class='normalized_text identifier id'>normalized_text</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/['&quot;\.,]/</span><span class='comma token'>,</span> <span class='string val'>''</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/ \-(\d{4})\b/</span><span class='comma token'>,</span> <span class='string val'>' tzminus\1'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/([\/\-\,\@])/</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='string val'>' '</span> <span class='plus op'>+</span> <span class='$1 nth_ref id'>$1</span> <span class='plus op'>+</span> <span class='string val'>' '</span> <span class='rbrace token'>}</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\btoday\b/</span><span class='comma token'>,</span> <span class='string val'>'this day'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\btomm?orr?ow\b/</span><span class='comma token'>,</span> <span class='string val'>'next day'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\byesterday\b/</span><span class='comma token'>,</span> <span class='string val'>'last day'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\bnoon\b/</span><span class='comma token'>,</span> <span class='string val'>'12:00'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\bmidnight\b/</span><span class='comma token'>,</span> <span class='string val'>'24:00'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\bbefore now\b/</span><span class='comma token'>,</span> <span class='string val'>'past'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\bnow\b/</span><span class='comma token'>,</span> <span class='string val'>'this second'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\b(ago|before)\b/</span><span class='comma token'>,</span> <span class='string val'>'past'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\bthis past\b/</span><span class='comma token'>,</span> <span class='string val'>'last'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\bthis last\b/</span><span class='comma token'>,</span> <span class='string val'>'last'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\b(?:in|during) the (morning)\b/</span><span class='comma token'>,</span> <span class='string val'>'\1'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\b(?:in the|during the|at) (afternoon|evening|night)\b/</span><span class='comma token'>,</span> <span class='string val'>'\1'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\btonight\b/</span><span class='comma token'>,</span> <span class='string val'>'this night'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\b\d+:?\d*[ap]\b/</span><span class='comma token'>,</span><span class='string val'>'\0m'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/(\d)([ap]m|oclock)\b/</span><span class='comma token'>,</span> <span class='string val'>'\1 \2'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span><span class='lparen token'>(</span><span class='regexp val'>/\b(hence|after|from)\b/</span><span class='comma token'>,</span> <span class='string val'>'future'</span><span class='rparen token'>)</span>
  <span class='normalized_text identifier id'>normalized_text</span> <span class='assign token'>=</span> <span class='numericize_ordinals identifier id'>numericize_ordinals</span><span class='lparen token'>(</span><span class='normalized_text identifier id'>normalized_text</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>scan_for_all</h3>
</div><div id="scan_for_all-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>scan_for_all</span><span class='args'>(token)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


12
13
14
15
16
17
18
19
20</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/pointer.rb', line 12</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='scan_for_all identifier id'>scan_for_all</span><span class='lparen token'>(</span><span class='token identifier id'>token</span><span class='rparen token'>)</span>
  <span class='scanner identifier id'>scanner</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='regexp val'>/\bpast\b/</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:past</span><span class='comma token'>,</span>
             <span class='regexp val'>/\bfuture\b/</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:future</span><span class='comma token'>,</span>
             <span class='regexp val'>/\bin\b/</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:future</span><span class='rbrace token'>}</span>
  <span class='scanner identifier id'>scanner</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='scanner_item identifier id'>scanner_item</span><span class='bitor op'>|</span>
    <span class='return return kw'>return</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='scanner identifier id'>scanner</span><span class='lbrack token'>[</span><span class='scanner_item identifier id'>scanner_item</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='scanner_item identifier id'>scanner_item</span> <span class='match op'>=~</span> <span class='token identifier id'>token</span><span class='dot token'>.</span><span class='word identifier id'>word</span>
  <span class='end end kw'>end</span>
  <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>swap</h3>
</div><div id="swap-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>swap</span><span class='args'>(arr, a, b)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
exchange two elements in an array
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


126</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 126</span>

<span class='def def kw'>def</span> <span class='swap identifier id'>swap</span><span class='lparen token'>(</span><span class='arr identifier id'>arr</span><span class='comma token'>,</span> <span class='a identifier id'>a</span><span class='comma token'>,</span> <span class='b identifier id'>b</span><span class='rparen token'>)</span><span class='semicolon token'>;</span> <span class='arr identifier id'>arr</span><span class='lbrack token'>[</span><span class='a identifier id'>a</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='arr identifier id'>arr</span><span class='lbrack token'>[</span><span class='b identifier id'>b</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='arr identifier id'>arr</span><span class='lbrack token'>[</span><span class='b identifier id'>b</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='arr identifier id'>arr</span><span class='lbrack token'>[</span><span class='a identifier id'>a</span><span class='rbrack token'>]</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>tokens_to_span</h3>
</div><div id="tokens_to_span-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>tokens_to_span</span><span class='args'>(tokens, options)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/handlers.rb', line 59</span>

<span class='def def kw'>def</span> <span class='tokens_to_span identifier id'>tokens_to_span</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='comment val'># maybe it's a specific date</span>
  
  <span class='definitions identifier id'>definitions</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='definitions identifier id'>definitions</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='definitions identifier id'>definitions</span><span class='lbrack token'>[</span><span class='symbol val'>:date</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='handler identifier id'>handler</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='definitions identifier id'>definitions</span><span class='rparen token'>)</span>
      <span class='puts identifier id'>puts</span> <span class='string val'>&quot;-date&quot;</span> <span class='if if_mod kw'>if</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span>
      <span class='good_tokens identifier id'>good_tokens</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='o identifier id'>o</span><span class='bitor op'>|</span> <span class='notop op'>!</span><span class='o identifier id'>o</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span> <span class='Separator constant id'>Separator</span> <span class='rbrace token'>}</span>
      <span class='return return kw'>return</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='handler_method identifier id'>handler_method</span><span class='comma token'>,</span> <span class='good_tokens identifier id'>good_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
        
  <span class='comment val'># I guess it's not a specific date, maybe it's just an anchor</span>
        
  <span class='definitions identifier id'>definitions</span><span class='lbrack token'>[</span><span class='symbol val'>:anchor</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='handler identifier id'>handler</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='definitions identifier id'>definitions</span><span class='rparen token'>)</span>
      <span class='puts identifier id'>puts</span> <span class='string val'>&quot;-anchor&quot;</span> <span class='if if_mod kw'>if</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span>
      <span class='good_tokens identifier id'>good_tokens</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='o identifier id'>o</span><span class='bitor op'>|</span> <span class='notop op'>!</span><span class='o identifier id'>o</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span> <span class='Separator constant id'>Separator</span> <span class='rbrace token'>}</span>
      <span class='return return kw'>return</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='handler_method identifier id'>handler_method</span><span class='comma token'>,</span> <span class='good_tokens identifier id'>good_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
        
  <span class='comment val'># not an anchor, perhaps it's an arrow</span>
  
  <span class='definitions identifier id'>definitions</span><span class='lbrack token'>[</span><span class='symbol val'>:arrow</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='handler identifier id'>handler</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='definitions identifier id'>definitions</span><span class='rparen token'>)</span>
      <span class='puts identifier id'>puts</span> <span class='string val'>&quot;-arrow&quot;</span> <span class='if if_mod kw'>if</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span>
      <span class='good_tokens identifier id'>good_tokens</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='dot token'>.</span><span class='reject identifier id'>reject</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='o identifier id'>o</span><span class='bitor op'>|</span> <span class='o identifier id'>o</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='SeparatorAt constant id'>SeparatorAt</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='o identifier id'>o</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='SeparatorSlashOrDash constant id'>SeparatorSlashOrDash</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='o identifier id'>o</span><span class='dot token'>.</span><span class='get_tag identifier id'>get_tag</span><span class='lparen token'>(</span><span class='SeparatorComma constant id'>SeparatorComma</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
      <span class='return return kw'>return</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='handler_method identifier id'>handler_method</span><span class='comma token'>,</span> <span class='good_tokens identifier id'>good_tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># not an arrow, let's hope it's a narrow</span>
  
  <span class='definitions identifier id'>definitions</span><span class='lbrack token'>[</span><span class='symbol val'>:narrow</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='handler identifier id'>handler</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='definitions identifier id'>definitions</span><span class='rparen token'>)</span>
      <span class='puts identifier id'>puts</span> <span class='string val'>&quot;-narrow&quot;</span> <span class='if if_mod kw'>if</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span>
      <span class='comment val'>#good_tokens = tokens.select { |o| !o.get_tag Separator }</span>
      <span class='return return kw'>return</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='handler_method identifier id'>handler_method</span><span class='comma token'>,</span> <span class='tokens identifier id'>tokens</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># I guess you're out of luck!</span>
  <span class='puts identifier id'>puts</span> <span class='string val'>&quot;-none&quot;</span> <span class='if if_mod kw'>if</span> <span class='Chronic constant id'>Chronic</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span>
  <span class='return return kw'>return</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div><div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>to_s</h3>
</div><div id="to_s-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_s</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


22
23
24</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/chronic/pointer.rb', line 22</span>

<span class='def def kw'>def</span> <span class='to_s identifier id'>to_s</span>
  <span class='string val'>'pointer-'</span> <span class='lshft op'>&lt;&lt;</span> <span class='@type ivar id'>@type</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>