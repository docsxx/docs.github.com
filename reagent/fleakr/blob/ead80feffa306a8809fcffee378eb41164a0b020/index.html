<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>reagent's fleakr - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/reagent/commits/fleakr/master" rel="alternate" title="Recent Commits to fleakr:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("reagent", "fleakr", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='reagent/fleakr/blob/ead80feffa306a8809fcffee378eb41164a0b020' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='reagent/fleakr/blob/ead80feffa306a8809fcffee378eb41164a0b020' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("reagent", "fleakr", "ead80feffa306a8809fcffee378eb41164a0b020", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/reagent/fleakr/tree/">Source</a></li>
            <li class=""><a href="http://github.com/reagent/fleakr/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/reagent/fleakr/network">Network</a></li>            
            <li class=""><a href="http://github.com/reagent/fleakr/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/reagent/fleakr">Wiki</a></li>
            <li class=""><a href="http://github.com/reagent/fleakr/graphs">Graphs</a></li>                    
            <li class="active"><a href="/reagent/fleakr">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/reagent">reagent</a> / <b><a href="http://github.com/reagent/fleakr/tree">fleakr</a></b>        
                <a id="namespaces_button" rel="reagent/fleakr/blob/ead80feffa306a8809fcffee378eb41164a0b020" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="reagent/fleakr/blob/ead80feffa306a8809fcffee378eb41164a0b020" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Fleakr</h1>
<h2>Description</h2>
<p>
A small, yet powerful, gem to interface with Flickr photostreams
</p>
<h2>Installation</h2>
<h3>Stable</h3>
<pre class="code">
    <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='fleakr identifier id'>fleakr</span>
</pre>
<h3>Bleeding Edge</h3>
<pre class="code">
    <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='reagent identifier id'>reagent</span><span class='minus op'>-</span><span class='fleakr identifier id'>fleakr</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='source identifier id'>source</span><span class='assign token'>=</span><span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gems.github.com
</span></pre>
<p>
Or &#8230;
</p>
<pre class="code">
    $ <span class='git identifier id'>git</span> <span class='clone identifier id'>clone</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/</span><span class='reagent identifier id'>reagent</span><span class='div op'>/</span><span class='fleakr identifier id'>fleakr</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
    $ <span class='cd identifier id'>cd</span> <span class='fleakr identifier id'>fleakr</span>
    $ <span class='rake identifier id'>rake</span> <span class='gem identifier id'>gem</span> <span class='andop op'>&amp;&amp;</span> <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='pkg identifier id'>pkg</span><span class='div op'>/</span><span class='fleakr identifier id'>fleakr</span><span class='minus op'>-</span><span class='lt op'>&lt;</span><span class='version identifier id'>version</span><span class='gt op'>&gt;</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span>
</pre>
<h2>Usage</h2>
<p>
To get started, you&#8217;ll need to grab an API key from Flickr to at
least perform any of the non-authenticated, read-only calls. Head on over
to the Flickr site to grab one, I&#8217;ll be here when you get back:
http://www.flickr.com/services/api/misc.api_keys.html
</p>
<p>
Now that you have your key, you can get things rolling with irb and the
fleakr gem:
</p>
<pre class="code">
    $ <span class='irb identifier id'>irb</span> <span class='minus op'>-</span><span class='r identifier id'>r</span> <span class='rubygems identifier id'>rubygems</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='require identifier id'>require</span> <span class='string val'>'fleakr'</span>
</pre>
<p>
Then, set your API key (only need to do this once per session):
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='api_key identifier id'>api_key</span> <span class='assign token'>=</span> <span class='string val'>'&lt;your api key here&gt;'</span>
</pre>
<h3>A Brief Tour</h3>
<p>
With just an API key, you have the ability to retrieve a substantial amount
of data about users, their photosets, photos, contacts, and groups.
Let&#8217;s start by finding a user by his username:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span> <span class='assign token'>=</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='string val'>'the decapitator'</span><span class='rparen token'>)</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;Fleakr::Objects::User:0x692648 @username=&quot;the decapitator&quot;, @id=&quot;21775151@N06&quot;&gt;</span>
</pre>
<p>
Or by email:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span> <span class='assign token'>=</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='string val'>'user@host.com'</span><span class='rparen token'>)</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;Fleakr::Objects::User:0x11f484c @username=&quot;bckspcr&quot;, @id=&quot;84481630@N00&quot;&gt;</span>
</pre>
<p>
Once you have a user, you can find his associated sets:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='sets identifier id'>sets</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Set:0x671358 @title=&quot;The Decapitator&quot;, @description=&quot;&quot;&gt;,</span>
        <span class='comment val'>#&lt;Fleakr::Objects::Set:0x66d898 @title=&quot;londonpaper hijack&quot;, ...</span>
</pre>
<p>
His individual photos:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;Fleakr::Objects::Photo:0x161b024 @title=&quot;\&quot;Be Fabulous\&quot;&quot; ... &gt;</span>
</pre>
<p>
Or contacts:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='contacts identifier id'>contacts</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;Fleakr::Objects::User:0x19039bc @username=&quot;.schill&quot;,</span>
        <span class='@id ivar id'>@id</span><span class='assign token'>=</span><span class='string val'>&quot;12289718@N00&quot;</span><span class='comma token'>,</span> <span class='@icon_farm ivar id'>@icon_farm</span><span class='assign token'>=</span><span class='string val'>&quot;1&quot;</span><span class='comma token'>,</span> <span class='@icon_server ivar id'>@icon_server</span><span class='assign token'>=</span><span class='string val'>&quot;4&quot;</span><span class='gt op'>&gt;</span>
</pre>
<p>
Or his groups if you would like:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='groups identifier id'>groups</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Group:0x11f2330 ...,</span>
        <span class='comment val'>#&lt;Fleakr::Objects::Group:0x11f2308 ...</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='groups identifier id'>groups</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='name identifier id'>name</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Rural Decay&quot;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='groups identifier id'>groups</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='id identifier id'>id</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;14581414@N00&quot;</span>
</pre>
<p>
Groups also contain photos:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='groups identifier id'>groups</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='title identifier id'>title</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Welcome To The Machine&quot;</span>
</pre>
<p>
When accessing a set, you can also grab all the photos that are in that
set:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='sets identifier id'>sets</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;Fleakr::Objects::Set:0x1195bbc @title=&quot;The Decapitator&quot;, @id=&quot;72157603480986566&quot;, @description=&quot;&quot;&gt;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='sets identifier id'>sets</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;Fleakr::Objects::Photo:0x1140108 ... &gt;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='sets identifier id'>sets</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='title identifier id'>title</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Untitled1&quot;</span>
</pre>
<h3>Photos</h3>
<p>
Each photo object contains metadata about a collection of images, each
representing different sizes. Once we have a single photo:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='photo identifier id'>photo</span> <span class='assign token'>=</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;Fleakr::Objects::Photo:0x161b024 @title=&quot;\&quot;Be Fabulous\&quot;&quot; ... &gt;</span>
</pre>
<p>
We can get information about one of the sizes:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='photo identifier id'>photo</span><span class='dot token'>.</span><span class='small identifier id'>small</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;Fleakr::Objects::Image:0x1768f1c @height=&quot;172&quot;, @size=&quot;Small&quot;, @width=&quot;240&quot;,</span>
        <span class='@url ivar id'>@url</span><span class='assign token'>=</span><span class='string val'>&quot;http://farm4.static.flickr.com/3250/2924549350_cbc1804258_m.jpg&quot;</span><span class='comma token'>,</span>
        <span class='@page ivar id'>@page</span><span class='assign token'>=</span><span class='string val'>&quot;http://www.flickr.com/photos/the_decapitator/2924549350/sizes/s/&quot;</span><span class='gt op'>&gt;</span>
</pre>
<p>
Grab the URL for the image itself:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='photo identifier id'>photo</span><span class='dot token'>.</span><span class='small identifier id'>small</span><span class='dot token'>.</span><span class='url identifier id'>url</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://farm4.static.flickr.com/3250/2924549350_cbc1804258_m.jpg&quot;</span>
</pre>
<p>
Or grab the URL for its page on the Flickr site:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='photo identifier id'>photo</span><span class='dot token'>.</span><span class='small identifier id'>small</span><span class='dot token'>.</span><span class='page identifier id'>page</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://www.flickr.com/photos/the_decapitator/2924549350/sizes/s/&quot;</span>
</pre>
<p>
Other sizes are available (:square, :thumbnail, :small, :medium, :large,
:original) and are accessed in the same way:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='photo identifier id'>photo</span><span class='dot token'>.</span><span class='original identifier id'>original</span><span class='dot token'>.</span><span class='url identifier id'>url</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://farm4.static.flickr.com/3250/2924549350_1cf67c2d47_o.jpg&quot;</span>
</pre>
<h3>Tags</h3>
<p>
Tags are available for users and photos. Retrieving them is easy:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span> <span class='assign token'>=</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='string val'>'the decapitator'</span><span class='rparen token'>)</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Tag:0x190d5fc @value=&quot;ad&quot;&gt;,</span>
        <span class='comment val'>#&lt;Fleakr::Objects::Tag:0x1908a20 @value=&quot;ads&quot;&gt;, ...</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Tag:0x17b1b18 @machine_flag=&quot;0&quot;, @author_id=&quot;21775151@N06&quot;, ...</span>
</pre>
<p>
All tags have values, but for tags associated with photos there is some
additional information:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='tag identifier id'>tag</span> <span class='assign token'>=</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='id identifier id'>id</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;21729829-3263659141-427098&quot;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='raw identifier id'>raw</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;decapitator&quot;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='value identifier id'>value</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;decapitator&quot;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;decapitator&quot;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='machine? fid id'>machine?</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='tag identifier id'>tag</span><span class='dot token'>.</span><span class='author identifier id'>author</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;Fleakr::Objects::User:0x1a149f0 @username=&quot;the decapitator&quot;, ... &gt;</span>
</pre>
<p>
Each tag can also have related tags:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='tags identifier id'>tags</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='related identifier id'>related</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='related identifier id'>related</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;face&quot;</span>
</pre>
<p>
You get the idea - see Fleakr::Objects::Tag for more information.
</p>
<h3>Comments</h3>
<p>
Similar to tags, photosets and photos can each have comments:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='sets identifier id'>sets</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='comments identifier id'>comments</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Comment:0x19795cc ...</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='comments identifier id'>comments</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Comment:0x17bf0b0 @body=&quot;Dayum, that's some wishful thinking!&quot; ...</span>
</pre>
<p>
All comments have additional information:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='comment identifier id'>comment</span> <span class='assign token'>=</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='comments identifier id'>comments</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='comment identifier id'>comment</span><span class='dot token'>.</span><span class='id identifier id'>id</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;21729829-3263659141-72157613553885978&quot;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='comment identifier id'>comment</span><span class='dot token'>.</span><span class='body identifier id'>body</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Dayum, that's some wishful thinking!&quot;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='comment identifier id'>comment</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Dayum, that's some wishful thinking!&quot;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='comment identifier id'>comment</span><span class='dot token'>.</span><span class='url identifier id'>url</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://www.flickr.com/photos/the_decapitator/3263659141/#comment72157613553885978&quot;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='comment identifier id'>comment</span><span class='dot token'>.</span><span class='author identifier id'>author</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;Fleakr::Objects::User:0x178e3d4 @username=&quot;jaspertandy&quot;, ... &gt;</span>
</pre>
<p>
See Fleakr::Objects::Comment for more information.
</p>
<h3>Saving Images</h3>
<p>
If a photo interests you, save it down to a directory of your choosing:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='photo identifier id'>photo</span><span class='dot token'>.</span><span class='original identifier id'>original</span><span class='dot token'>.</span><span class='save_to identifier id'>save_to</span><span class='lparen token'>(</span><span class='string val'>'/tmp'</span><span class='rparen token'>)</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='comment val'>#&lt;File:/tmp/2924549350_1cf67c2d47_o.jpg (closed)&gt;</span>
</pre>
<p>
Similarly, you can save down entire sets. Just specify the target directory
and the size of the images you&#8217;re interested in:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='sets identifier id'>sets</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='save_to identifier id'>save_to</span><span class='lparen token'>(</span><span class='string val'>'/tmp'</span><span class='comma token'>,</span> <span class='symbol val'>:square</span><span class='rparen token'>)</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Photo:0x1187a1c @secret=&quot;715587b2cb&quot; ...</span>
</pre>
<p>
This creates a subdirectory within the target directory based on the
set&#8217;s name and preserves the original order of the photos:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='dstring node'>&quot;/tmp/#{user.sets.first.title}/*.jpg&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='map identifier id'>map</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='string val'>&quot;/tmp/The Decapitator/01_2117922283_715587b2cb_s.jpg&quot;</span><span class='comma token'>,</span>
        <span class='string val'>&quot;/tmp/The Decapitator/02_2125604584_9c09348fd6_s.jpg&quot;</span><span class='comma token'>,</span>
        <span class='string val'>&quot;/tmp/The Decapitator/03_2118696542_8af5763bde_s.jpg&quot;</span><span class='comma token'>,</span> <span class='dot3 op'>...</span> <span class='rbrack token'>]</span>
</pre>
<h3>Searching</h3>
<p>
If you would prefer to just search photos, you can do that with search
text:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='photos identifier id'>photos</span> <span class='assign token'>=</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span><span class='string val'>'ponies!!'</span><span class='rparen token'>)</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Photo:0x11f4e64 @title=&quot;hiroshima atomic garden&quot;, @id=&quot;3078234390&quot;&gt;,</span>
        <span class='comment val'>#&lt;Fleakr::Objects::Photo:0x11f4928 @title=&quot;PONYLOV&quot;, @id=&quot;3077360853&quot;&gt;, ...</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='title identifier id'>title</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;hiroshima atomic garden&quot;</span>
</pre>
<p>
You can also search based on tags:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='photos identifier id'>photos</span> <span class='assign token'>=</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span><span class='symbol val'>:tags</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'macro'</span><span class='rparen token'>)</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='title identifier id'>title</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Demure&quot;</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='photos identifier id'>photos</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='id identifier id'>id</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;3076049945&quot;</span>
</pre>
<p>
Searches can also be scoped to other entities in the system (namely Users
and Groups):
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='groups identifier id'>groups</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span><span class='string val'>'awesome'</span><span class='rparen token'>)</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Photo:0x18cb4cc @server_id=&quot;2012&quot;, @id=&quot;2181921273&quot;,</span>
         <span class='@farm_id ivar id'>@farm_id</span><span class='assign token'>=</span><span class='string val'>&quot;3&quot;</span><span class='comma token'>,</span> <span class='@title ivar id'>@title</span><span class='assign token'>=</span><span class='string val'>&quot;&quot;</span><span class='comma token'>,</span> <span class='@secret ivar id'>@secret</span><span class='assign token'>=</span><span class='string val'>&quot;634eda7521&quot;</span><span class='gt op'>&gt;</span><span class='comma token'>,</span> <span class='dot3 op'>...</span>
    <span class='rshft op'>&gt;&gt;</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span><span class='string val'>'serpent'</span><span class='rparen token'>)</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Photo:0x18a6960 @server_id=&quot;41&quot;, @id=&quot;81370156&quot;,</span>
        <span class='@farm_id ivar id'>@farm_id</span><span class='assign token'>=</span><span class='string val'>&quot;1&quot;</span><span class='comma token'>,</span> <span class='@title ivar id'>@title</span><span class='assign token'>=</span><span class='string val'>&quot;Clear and Serpent Danger&quot;</span><span class='comma token'>,</span> <span class='@secret ivar id'>@secret</span><span class='assign token'>=</span><span class='string val'>&quot;013091582a&quot;</span><span class='gt op'>&gt;</span><span class='rbrack token'>]</span>
</pre>
<h3>Uploading Files</h3>
<p>
Before you can upload files, you need to be able to make authenticated
calls to the Flickr API. Skip to the next section (Authenticated Calls) for
details on how to make this work.
</p>
<p>
Uploading single files is simple:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='upload identifier id'>upload</span><span class='lparen token'>(</span><span class='string val'>'/path/to/image.jpg'</span><span class='rparen token'>)</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Photo:0x217fb54 @updated=&quot;1236133594&quot;, @server_id=&quot;3266&quot;, ...&gt;]</span>
</pre>
<p>
Notice that the newly-uploaded image is returned. You can further inspect /
modify this as necessary. The real magic is in uploading multiple files -
the upload method takes a file glob:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='upload identifier id'>upload</span><span class='lparen token'>(</span><span class='string val'>'/path/to/images/*.jpg'</span><span class='rparen token'>)</span>
    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='comment val'>#&lt;Fleakr::Objects::Photo:0x217faa0 ...&gt;,</span>
        <span class='comment val'>#&lt;Fleakr::Objects::Photo:0x212fb18 ...&gt;,</span>
        <span class='comment val'>#&lt;Fleakr::Objects::Photo:0x20e09c8 ...&gt;]</span>
</pre>
<p>
You can also set options on the file(s) that you&#8217;re uploading:
</p>
<pre class="code">
    <span class='rshft op'>&gt;&gt;</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='upload identifier id'>upload</span><span class='lparen token'>(</span><span class='string val'>'/path/to/party/images/*.jpg'</span><span class='comma token'>,</span> <span class='symbol val'>:viewable_by</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:everyone</span><span class='comma token'>,</span>
                                                    <span class='symbol val'>:title</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'Party Pics'</span><span class='rparen token'>)</span>
</pre>
<p>
The full list of options can be found in the Fleakr::Objects::Photo
documentation.
</p>
<h3>Authenticated Calls</h3>
<p>
While read-only access to the API gets you quite a bit of data,
you&#8217;ll need to generate an authentication token if you want access to
the more powerful features (like uploading your own photos).
</p>
<p>
Assuming you&#8217;ve already applied for a key, go back and make sure you
have the right settings to get your auth token. Click on the &#8216;Edit
key details&#8217; link and ensure that:
</p>
<ol>
<li>Your application description and notes are up-to-date

</li>
<li>The value for &#8216;Authentication Type&#8217; is set to &#8216;Mobile
Application&#8217;

</li>
<li>The value for &#8216;Mobile Permissions&#8217; is set to either
&#8216;write&#8217; or &#8216;delete&#8217;

</li>
</ol>
<p>
Once this is set, you&#8217;ll see your Authentication URL on the key
details page (it will look something like
http://www.flickr.com/auth-534525246245). Paste this URL into your browser
and confirm access to get your mini-token. Now you&#8217;re ready to make
authenticated requests:
</p>
<pre class="code">
    <span class='require identifier id'>require</span> <span class='string val'>'rubygems'</span>
    <span class='require identifier id'>require</span> <span class='string val'>'fleakr'</span>

    <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='api_key identifier id'>api_key</span>       <span class='assign token'>=</span> <span class='string val'>'ABC123'</span>
    <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='shared_secret identifier id'>shared_secret</span> <span class='assign token'>=</span> <span class='string val'>'sekrit'</span> <span class='comment val'># Available with your key details on the Flickr site</span>
    <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='mini_token identifier id'>mini_token</span>    <span class='assign token'>=</span> <span class='string val'>'362-133-214'</span>

    <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='upload identifier id'>upload</span><span class='lparen token'>(</span><span class='string val'>'/path/to/my/photo.jpg'</span><span class='rparen token'>)</span>
    <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='token identifier id'>token</span><span class='dot token'>.</span><span class='value identifier id'>value</span> <span class='comment val'># =&gt; &quot;34132412341235-12341234ef34&quot;</span>
</pre>
<p>
Once you use the mini-token once, it is no longer available. To use the
generated auth_token for future requests, just set Fleakr.auth_token to the
generated value. Similarly, if you have an authenticated frob from Flickr
(using authentication for desktop applications, for example) you can also
set <tt>Fleakr.frob</tt> to the frob value returned from the API.
</p>
<h3>What Went Wrong?</h3>
<p>
Because so much of the underlying API is hidden under the covers,
it&#8217;s often tough to know what&#8217;s really going on when you run
into unexpected behavior. To make things easier, you can have Fleakr log
all of the API traffic. Here&#8217;s how:
</p>
<pre class="code">
    <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='logger identifier id'>logger</span> <span class='assign token'>=</span> <span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'/tmp/fleakr.log'</span><span class='rparen token'>)</span>
</pre>
<p>
Now any calls to the API will log both their request and response data to
that file. But be warned, this can be pretty verbose by default (especially
if you&#8217;re doing file uploads). To see just the requests you need to
tune the log level:
</p>
<pre class="code">
    <span class='logger identifier id'>logger</span> <span class='assign token'>=</span> <span class='Logger constant id'>Logger</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'/tmp/fleakr.log'</span><span class='rparen token'>)</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='level identifier id'>level</span> <span class='assign token'>=</span> <span class='Logger constant id'>Logger</span><span class='colon2 op'>::</span><span class='INFO constant id'>INFO</span>

    <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='logger identifier id'>logger</span> <span class='assign token'>=</span> <span class='logger identifier id'>logger</span>
</pre>
<p>
Even if something doesn&#8217;t go wrong, this is a good way to get a sense
for when you&#8217;re making API requests.
</p>
<h2>Roadmap / TODO</h2>
<h3>0.4.x</h3>
<ul>
<li>Implement remaining bits of person and photo-related API calls (read-only)

</li>
</ul>
<h3>0.5.x</h3>
<ul>
<li>Implement asynchronous file upload / replacement w/ ticket checking

</li>
<li>Provide a better searching interface with ruby-like option syntax

</li>
</ul>
<h3>Future</h3>
<ul>
<li>Implement save-able search results (e.g.
Fleakr.search(&#8216;ponies&#8217;).save_to(&#8217;/path&#8217;, :medium))

</li>
<li>Implement deeper associations for core elements (e.g. tags / etc..)

</li>
<li>Implement write methods for photos &amp; photosets

</li>
<li>Implement flickr.places.* portion of API

</li>
</ul>
<h2>License</h2>
<p>
Copyright &#169; 2008 Patrick Reagan (reaganpr@gmail.com)
</p>
<p>
Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&quot;Software&quot;), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to the
following conditions:
</p>
<p>
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
</p>
<p>
THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>