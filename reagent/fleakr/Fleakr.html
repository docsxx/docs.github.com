<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: Fleakr</title>
  </head>
  <body>
    <div id="content">
      <div class="section module Fleakr">
  <h1 class="title">Module: Fleakr</h1>
  <div class="section docstring">
  <h1>Fleakr: A small, yet powerful, gem to interface with Flickr photostreams</h1>
<h2>Quick Start</h2>
<p>
Getting started is easy, just make sure you have a valid API key from
Flickr and you can then start making any non-authenticated request to pull
back data for yours and others&#8217; photostreams, sets, contacts, groups,
etc&#8230;
</p>
<p>
For now, all activity originates from a single user which you can find by
username or email address.
</p>
<p>
Example:
</p>
<pre class="code">
 <span class='require identifier id'>require</span> <span class='string val'>'rubygems'</span>
 <span class='require identifier id'>require</span> <span class='string val'>'fleakr'</span>

 <span class='comment val'># Our API key is ABC123 (http://www.flickr.com/services/api/keys/apply/)</span>
 <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='api_key identifier id'>api_key</span> <span class='assign token'>=</span> <span class='string val'>'ABC123'</span>
 <span class='user identifier id'>user</span> <span class='assign token'>=</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='string val'>'bees'</span><span class='rparen token'>)</span>
 <span class='user identifier id'>user</span> <span class='assign token'>=</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='string val'>'user@host.com'</span><span class='rparen token'>)</span>
 <span class='comment val'># Grab a list of sets</span>
 <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='sets identifier id'>sets</span>
 <span class='comment val'># Grab a list of the user's public groups</span>
 <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='groups identifier id'>groups</span>
</pre>
<p>
To see what other associations and attributes are available, see the
Fleakr::Objects::User class
</p>
<h2>Authentication</h2>
<p>
If you want to do something more than just retrieve public photos (like
upload your own), you&#8217;ll need to generate an authentication token to
use across requests and sessions.
</p>
<p>
Assuming you&#8217;ve already applied for a key, go back and make sure you
have the right settings to get your auth token. Click on the &#8216;Edit
key details&#8217; link and ensure that:
</p>
<ol>
<li>Your application description and notes are up-to-date

</li>
<li>The value for &#8216;Authentication Type&#8217; is set to &#8216;Mobile
Application&#8217;

</li>
<li>The value for &#8216;Mobile Permissions&#8217; is set to either
&#8216;write&#8217; or &#8216;delete&#8217;

</li>
</ol>
<p>
Once this is set, you&#8217;ll see your Authentication URL on the key
details page (it will look something like
http://www.flickr.com/auth-534525246245). Paste this URL into your browser
and confirm access to get your mini-token. Now you&#8217;re ready to make
authenticated requests:
</p>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'rubygems'</span>
  <span class='require identifier id'>require</span> <span class='string val'>'fleakr'</span>

  <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='api_key identifier id'>api_key</span>       <span class='assign token'>=</span> <span class='string val'>'ABC123'</span>
  <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='shared_secret identifier id'>shared_secret</span> <span class='assign token'>=</span> <span class='string val'>'sekrit'</span> <span class='comment val'># Available with your key details on the Flickr site</span>
  <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='mini_token identifier id'>mini_token</span>    <span class='assign token'>=</span> <span class='string val'>'362-133-214'</span>

  <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='upload identifier id'>upload</span><span class='lparen token'>(</span><span class='string val'>'/path/to/my/photo.jpg'</span><span class='rparen token'>)</span>
  <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='token identifier id'>token</span><span class='dot token'>.</span><span class='value identifier id'>value</span> <span class='comment val'># =&gt; &quot;34132412341235-12341234ef34&quot;</span>
</pre>
<p>
Once you use the mini-token once, it is no longer available. To use the
generated auth_token for future requests, just set Fleakr.auth_token to the
generated value.
</p>

</div><div class="section constants">
  
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary class public">
    <h1>Public Class Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#reset_token-class_method' title='reset_token'>reset_token</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#search-class_method' title='search'>search</a></span><span class='args'>(params)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Search all photos on the Flickr site.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#token-class_method' title='token'>token</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Get the authentication token needed for authenticated requests.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#upload-class_method' title='upload'>upload</a></span><span class='args'>(glob, options = {})</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Upload one or more files to your Flickr account (requires authentication).
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#user-class_method' title='user'>user</a></span><span class='args'>(user_data)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Find a user based on some unique user data.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails class public">
  <h1>Public Class Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>reset_token</h3>
</div><div id="reset_token-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>reset_token</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


160
161
162</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/fleakr.rb', line 160</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='reset_token identifier id'>reset_token</span> 
  <span class='@token ivar id'>@token</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>search</h3>
</div><div id="search-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>search</span><span class='args'>(params)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Search all photos on the Flickr site. By default, this searches based on
text, but you can pass different search parameters (passed as hash keys):
</p>
<dl>
<dt>tags</dt><dd>The list of tags to search on (either as an array or comma-separated)

</dd>
<dt>user_id</dt><dd>Scope the search to this user

</dd>
<dt>group_id</dt><dd>Scope the search to this group

</dd>
</dl>
<p>
If you&#8217;re interested in User- and Group-scoped searches, you may want
to use User#search and Group#search instead.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


114
115
116
117</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/fleakr.rb', line 114</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='search identifier id'>search</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='rparen token'>)</span>
  <span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:text</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='params identifier id'>params</span><span class='rbrace token'>}</span> <span class='unless unless_mod kw'>unless</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
  <span class='Objects constant id'>Objects</span><span class='colon2 op'>::</span><span class='Search constant id'>Search</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='results identifier id'>results</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>token</h3>
</div><div id="token-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>token</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Get the authentication token needed for authenticated requests. Will either
use a valid auth_token (if available) or a mini-token to generate the
auth_token.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/fleakr.rb', line 136</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='token identifier id'>token</span>
  <span class='@token ivar id'>@token</span> <span class='opasgn op'>||=</span> <span class='begin begin kw'>begin</span>
    <span class='if if kw'>if</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='auth_token identifier id'>auth_token</span>
      <span class='Fleakr constant id'>Fleakr</span><span class='colon2 op'>::</span><span class='Objects constant id'>Objects</span><span class='colon2 op'>::</span><span class='AuthenticationToken constant id'>AuthenticationToken</span><span class='dot token'>.</span><span class='from_auth_token identifier id'>from_auth_token</span><span class='lparen token'>(</span><span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='auth_token identifier id'>auth_token</span><span class='rparen token'>)</span>
    <span class='elsif elsif kw'>elsif</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='frob identifier id'>frob</span>
      <span class='Fleakr constant id'>Fleakr</span><span class='colon2 op'>::</span><span class='Objects constant id'>Objects</span><span class='colon2 op'>::</span><span class='AuthenticationToken constant id'>AuthenticationToken</span><span class='dot token'>.</span><span class='from_frob identifier id'>from_frob</span><span class='lparen token'>(</span><span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='frob identifier id'>frob</span><span class='rparen token'>)</span>
    <span class='elsif elsif kw'>elsif</span> <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='mini_token identifier id'>mini_token</span>
      <span class='Fleakr constant id'>Fleakr</span><span class='colon2 op'>::</span><span class='Objects constant id'>Objects</span><span class='colon2 op'>::</span><span class='AuthenticationToken constant id'>AuthenticationToken</span><span class='dot token'>.</span><span class='from_mini_token identifier id'>from_mini_token</span><span class='lparen token'>(</span><span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='mini_token identifier id'>mini_token</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>upload</h3>
</div><div id="upload-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>upload</span><span class='args'>(glob, options = {})</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Upload one or more files to your Flickr account (requires authentication).
Simply provide a filename or a pattern to upload one or more files:
</p>
<pre class="code">
 <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='upload identifier id'>upload</span><span class='lparen token'>(</span><span class='string val'>'/path/to/my/mug.jpg'</span><span class='rparen token'>)</span>
 <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='upload identifier id'>upload</span><span class='lparen token'>(</span><span class='string val'>'/User/Pictures/Party/*.jpg'</span><span class='rparen token'>)</span>
</pre>
<p>
Additionally, options can be supplied as part of the upload that will apply
to all files that are matched by the pattern passed to <tt>glob</tt>. For a
full list, see Fleakr::Objects::Photo.
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


129
130
131</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/fleakr.rb', line 129</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='upload identifier id'>upload</span><span class='lparen token'>(</span><span class='glob identifier id'>glob</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='glob identifier id'>glob</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='file identifier id'>file</span><span class='bitor op'>|</span> <span class='Fleakr constant id'>Fleakr</span><span class='colon2 op'>::</span><span class='Objects constant id'>Objects</span><span class='colon2 op'>::</span><span class='Photo constant id'>Photo</span><span class='dot token'>.</span><span class='upload identifier id'>upload</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>user</h3>
</div><div id="user-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>user</span><span class='args'>(user_data)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Find a user based on some unique user data. This method will try to find
the user based on username and will fall back to email if that fails.
Example:
</p>
<pre class="code">
 <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='api_key identifier id'>api_key</span> <span class='assign token'>=</span> <span class='string val'>'ABC123'</span>
 <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='string val'>'the decapitator'</span><span class='rparen token'>)</span> <span class='comment val'># =&gt; #&lt;Fleakr::Objects::User:0x692648 @username=&quot;the decapitator&quot;, @id=&quot;21775151@N06&quot;&gt;</span>
 <span class='Fleakr constant id'>Fleakr</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='string val'>'user@host.com'</span><span class='rparen token'>)</span>   <span class='comment val'># =&gt; #&lt;Fleakr::Objects::User:0x11f484c @username=&quot;bckspcr&quot;, @id=&quot;84481630@N00&quot;&gt;</span>
</pre>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


96
97
98
99
100
101
102</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/fleakr.rb', line 96</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='user identifier id'>user</span><span class='lparen token'>(</span><span class='user_data identifier id'>user_data</span><span class='rparen token'>)</span>
  <span class='begin begin kw'>begin</span>
    <span class='Objects constant id'>Objects</span><span class='colon2 op'>::</span><span class='User constant id'>User</span><span class='dot token'>.</span><span class='find_by_username identifier id'>find_by_username</span><span class='lparen token'>(</span><span class='user_data identifier id'>user_data</span><span class='rparen token'>)</span>
  <span class='rescue rescue kw'>rescue</span> <span class='ApiError constant id'>ApiError</span>
    <span class='Objects constant id'>Objects</span><span class='colon2 op'>::</span><span class='User constant id'>User</span><span class='dot token'>.</span><span class='find_by_email identifier id'>find_by_email</span><span class='lparen token'>(</span><span class='user_data identifier id'>user_data</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>