<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>norman's friendly_id - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/norman/commits/friendly_id/master" rel="alternate" title="Recent Commits to friendly_id:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("norman", "friendly_id", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='norman/friendly_id/blob/26b373414eba639a773e61ac595bb9c1424f6c0b' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='norman/friendly_id/blob/26b373414eba639a773e61ac595bb9c1424f6c0b' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("norman", "friendly_id", "26b373414eba639a773e61ac595bb9c1424f6c0b", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/norman/friendly_id/tree/">Source</a></li>
            <li class=""><a href="http://github.com/norman/friendly_id/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/norman/friendly_id/network">Network</a></li>            
            <li class=""><a href="http://github.com/norman/friendly_id/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/norman/friendly_id">Wiki</a></li>
            <li class=""><a href="http://github.com/norman/friendly_id/graphs">Graphs</a></li>                    
            <li class="active"><a href="/norman/friendly_id">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/norman">norman</a> / <b><a href="http://github.com/norman/friendly_id/tree">friendly_id</a></b>        
                <a id="namespaces_button" rel="norman/friendly_id/blob/26b373414eba639a773e61ac595bb9c1424f6c0b" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="norman/friendly_id/blob/26b373414eba639a773e61ac595bb9c1424f6c0b" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>FriendlyId</h1>
<p>
FriendlyId is the &quot;Swiss Army bulldozer&quot; of slugging and
permalink plugins for Ruby on Rails. It allows you to create pretty
URL&#8217;s and work with human-friendly strings as if they were numeric
ids for ActiveRecord models.
</p>
<p>
Using FriendlyId, it&#8217;s easy to make your application use URL&#8217;s
like:
</p>
<pre class="code">
  <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/example.com/s</span><span class='tates identifier id'>tates</span><span class='div op'>/</span><span class='washington identifier id'>washington</span>
</pre>
<p>
instead of:
</p>
<pre class="code">
  <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/example.com/s</span><span class='tates identifier id'>tates</span><span class='div op'>/</span><span class='integer val'>4323454</span>
</pre>
<p>
Want to find out more? Read on. The {most recent version of the FriendlyId
RDocs}[http://friendly-id.rubyforge.org] can always be found on
Rubyforge[http://www.rubyforge.org].
</p>
<h3>Why?</h3>
<ul>
<li>Text-based id&#8217;s look better

</li>
<li>They make URL&#8217;s easier to remember.

</li>
<li>They give no hint about the number of records in your database.

</li>
<li>They are better for search engine optimization.

</li>
</ul>
<h3>But&#8230;</h3>
<ul>
<li>They can change, breaking your URL&#8217;s and your SEO.

</li>
<li>It can be tricky to ensure they&#8217;re always unique.

</li>
<li>They can become a pain to manage in large Rails applications.

</li>
<li>They can conflict with your application&#8217;s namespace.

</li>
</ul>
<p>
FriendlyId tries to offer you the all the advantages, and avoid or soften
the potential impact of the disadvantages.
</p>
<h2>Typical Uses</h2>
<h3>User names (&quot;non-slugged&quot; models)</h3>
<p>
Usually users have unique user names stored in a column with a unique
constraint or index. In this case, all you need to do is add this to your
model:
</p>
<pre class="code">
  <span class='has_friendly_id identifier id'>has_friendly_id</span> <span class='symbol val'>:login</span>
</pre>
<p>
and you can then write code like this:
</p>
<pre class="code">
  <span class='@member ivar id'>@member</span> <span class='assign token'>=</span> <span class='Member constant id'>Member</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;joe&quot;</span><span class='rparen token'>)</span>   <span class='comment val'># the old Member.find(1) still works, too.</span>
  <span class='@member ivar id'>@member</span><span class='dot token'>.</span><span class='to_param identifier id'>to_param</span>               <span class='comment val'># returns &quot;joe&quot;</span>
  <span class='redirect_to identifier id'>redirect_to</span> <span class='@member ivar id'>@member</span>            <span class='comment val'># The URL would be /members/joe</span>
</pre>
<h3>Blog posts (&quot;slugged&quot; models)</h3>
<p>
Blog posts generally have titles which are distinctive but not necessarily
unique. In this and similar cases, FriendlyId provides a Slug model
separate from your Post model. The Slug model handles duplicate
friendly_ids, as well as versioning.
</p>
<p>
Your model code would look something like this:
</p>
<pre class="code">
  <span class='has_friendly_id identifier id'>has_friendly_id</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:use_slug</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
</pre>
<p>
and you can then write code like this:
</p>
<pre class="code">
  <span class='@post ivar id'>@post</span> <span class='assign token'>=</span> <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;new-version-released&quot;</span><span class='rparen token'>)</span>  <span class='comment val'># Post.find(1) still works, too</span>
  <span class='@post ivar id'>@post</span><span class='dot token'>.</span><span class='to_param identifier id'>to_param</span>                             <span class='comment val'># returns &quot;new-version-released&quot;</span>
  <span class='redirect_to identifier id'>redirect_to</span> <span class='@post ivar id'>@post</span>                          <span class='comment val'># The URL would be /posts/new-version-released</span>
</pre>
<p>
Now in your controllers, if you want to prevent people from accessing your
models by numeric id, you can detect whether they were found by the
friendly_id:
</p>
<pre class="code">
  <span class='@post ivar id'>@post</span> <span class='assign token'>=</span> <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='string val'>&quot;some error&quot;</span> <span class='if if_mod kw'>if</span> <span class='notop op'>!</span><span class='@post ivar id'>@post</span><span class='dot token'>.</span><span class='found_using_friendly_id? fid id'>found_using_friendly_id?</span>
</pre>
<p>
or, you can 301 redirect if the model was found by the numeric id if you
don&#8217;t care about numeric access, but want the SEO value of the
friendly_id:
</p>
<pre class="code">
  <span class='@post ivar id'>@post</span> <span class='assign token'>=</span> <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='redirect_to identifier id'>redirect_to</span> <span class='@post ivar id'>@post</span><span class='comma token'>,</span> <span class='symbol val'>:status</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>301</span> <span class='if if_mod kw'>if</span> <span class='@post ivar id'>@post</span><span class='dot token'>.</span><span class='has_better_id? fid id'>has_better_id?</span>
</pre>
<p>
The &quot;has_better_id?&quot; method returns true if the model was found
with the numeric id, or with an outdated slug.
</p>
<h2>Extra Features</h2>
<h3>Slug Versioning</h3>
<p>
FriendlyId will record changes to slugs so that you can tell when the model
is found with an older slug, or by the numeric id. This can be useful if
you want to do a 301 redirect to your updated URL.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='PostsController constant id'>PostsController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>

    <span class='before_filter identifier id'>before_filter</span> <span class='ensure_current_post_url identifier id'>ensure_current_post_url</span><span class='comma token'>,</span> <span class='symbol val'>:only</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:show</span>

    <span class='dot3 op'>...</span>

    <span class='def def kw'>def</span> <span class='ensure_current_post_url identifier id'>ensure_current_post_url</span>
      <span class='redirect_to identifier id'>redirect_to</span> <span class='@post ivar id'>@post</span><span class='comma token'>,</span> <span class='symbol val'>:status</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:moved_permanently</span> <span class='if if_mod kw'>if</span> <span class='@post ivar id'>@post</span><span class='dot token'>.</span><span class='has_better_id? fid id'>has_better_id?</span>
    <span class='end end kw'>end</span>

  <span class='end end kw'>end</span>
</pre>
<p>
This is particularly useful when implementing FrindlyId on an existing
website that already has many URL&#8217;s with the old numeric id listed on
search engines. When the search engine spiders crawl your site, they will
eventually pick up the new, more SEO-friendly URL&#8217;s.
</p>
<h3>Non-unique Slug Names</h3>
<p>
FriendlyId will append a arbitrary number to the end of the id to keep it
unique if necessary:
</p>
<pre class="code">
  <span class='regexp val'>/posts/n</span><span class='ew identifier id'>ew</span><span class='minus op'>-</span><span class='version identifier id'>version</span><span class='minus op'>-</span><span class='released identifier id'>released</span>
  <span class='regexp val'>/posts/n</span><span class='ew identifier id'>ew</span><span class='minus op'>-</span><span class='version identifier id'>version</span><span class='minus op'>-</span><span class='released identifier id'>released</span><span class='minus op'>-</span><span class='integer val'>-2</span>
  <span class='regexp val'>/posts/n</span><span class='ew identifier id'>ew</span><span class='minus op'>-</span><span class='version identifier id'>version</span><span class='minus op'>-</span><span class='released identifier id'>released</span><span class='minus op'>-</span><span class='integer val'>-3</span>
  <span class='dot3 op'>...</span>
  <span class='etc identifier id'>etc</span><span class='dot token'>.</span>
</pre>
<p>
Note that the number is preceeded by two dashes to distinguish it from the
rest of the slug. This is important to enable having slugs like:
</p>
<pre class="code">
  <span class='regexp val'>/cars/</span><span class='peugeot identifier id'>peugeot</span><span class='minus op'>-</span><span class='integer val'>206</span>
  <span class='regexp val'>/cars/</span><span class='peugeot identifier id'>peugeot</span><span class='minus op'>-</span><span class='integer val'>206</span><span class='minus op'>-</span><span class='integer val'>-2</span>
</pre>
<h3>Reserved Names</h3>
<p>
You can mark off some strings as reserved so that, for example, you
don&#8217;t end up with this problem:
</p>
<pre class="code">
  <span class='regexp val'>/users/</span><span class='joe identifier id'>joe</span><span class='minus op'>-</span><span class='schmoe identifier id'>schmoe</span> <span class='comment val'># A user chose &quot;joe schmoe&quot; as his user name - no worries.</span>
  <span class='regexp val'>/users/n</span><span class='ew identifier id'>ew</span> <span class='comment val'># A user chose &quot;new&quot; as his user name, and now no one can sign up.</span>
</pre>
<p>
Here&#8217;s how to do it:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Restaurant constant id'>Restaurant</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='belongs_to identifier id'>belongs_to</span> <span class='symbol val'>:city</span>
    <span class='has_friendly_id identifier id'>has_friendly_id</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:use_slug</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:reserved</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='string val'>&quot;my&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;values&quot;</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
</pre>
<p>
As of FriendlyId version 2.0.2, &quot;new&quot; and &quot;index&quot; are
reseved by default. When you attempt to store a reserved value, FriendlyId
raises a FriendlyId::SlugGenerationError.
</p>
<h3>Scoped Slugs</h3>
<p>
FriendlyId can generate unique slugs within a given scope. For example:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Restaurant constant id'>Restaurant</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='belongs_to identifier id'>belongs_to</span> <span class='symbol val'>:city</span>
    <span class='has_friendly_id identifier id'>has_friendly_id</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:use_slug</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:scope</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:city</span>
  <span class='end end kw'>end</span>

  <span class='class class kw'>class</span> <span class='City constant id'>City</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='has_many identifier id'>has_many</span> <span class='symbol val'>:restaurants</span>
    <span class='has_friendly_id identifier id'>has_friendly_id</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:use_slug</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>

  <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/example.org/</span><span class='cities identifier id'>cities</span><span class='div op'>/</span><span class='seattle identifier id'>seattle</span><span class='div op'>/</span><span class='restaurants identifier id'>restaurants</span><span class='div op'>/</span><span class='joes identifier id'>joes</span><span class='minus op'>-</span><span class='diner identifier id'>diner</span>
  <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/example.org/</span><span class='cities identifier id'>cities</span><span class='div op'>/</span><span class='chicago identifier id'>chicago</span><span class='div op'>/</span><span class='restaurants identifier id'>restaurants</span><span class='div op'>/</span><span class='joes identifier id'>joes</span><span class='minus op'>-</span><span class='diner identifier id'>diner</span>

  <span class='Restaurant constant id'>Restaurant</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;joes-diner&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:scope</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;seattle&quot;</span><span class='rparen token'>)</span> <span class='comment val'># returns 1 record</span>
  <span class='Restaurant constant id'>Restaurant</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;joes-diner&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:scope</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;chicago&quot;</span><span class='rparen token'>)</span> <span class='comment val'># returns 1 record</span>
  <span class='Restaurant constant id'>Restaurant</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>&quot;joes-diner&quot;</span><span class='rparen token'>)</span> <span class='comment val'># returns both records</span>
</pre>
<p>
The value for the :scope key in your model can be a custom method you
define, or the name of a relation. If it&#8217;s the name of a relation,
then the scope&#8217;s text value will be the result of calling
<tt>to_param</tt> on the related model record. In the example above, the
city model also uses FriendlyId and so its <tt>to_param</tt> method returns
its friendly_id: chicago or seattle.
</p>
<p>
This feature is new in FriendlyId 2 and should be considered of
experimental quality. Please don&#8217;t use this for code that needs to
run on the Space Shuttle.
</p>
<h3>Text Normalization</h3>
<p>
FriendlyId&#8217;s slugging can strip diacritics from Western European
characters, so that you can have ASCII-only URL&#8217;s; for example,
conveting &quot;ñøîéçü&quot; to &quot;noiecu.&quot;
</p>
<pre class="code">
  <span class='has_friendly_id identifier id'>has_friendly_id</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:use_slug</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:strip_diacritics</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
</pre>
<p>
If you are not using slugs, you&#8217;ll have to do this manually for
whatever value you&#8217;re using as the friendly_id.
</p>
<h3>Diacritic-sensitive normalization</h3>
<p>
FriendlyId can also normalize slug text while preserving accented
characters, if you prefer to leave them in your URL&#8217;s:
</p>
<pre class="code">
  <span class='has_friendly_id identifier id'>has_friendly_id</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:use_slug</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
  <span class='dot3 op'>...</span>
  <span class='@post ivar id'>@post</span> <span class='assign token'>=</span> <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='symbol val'>:title</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;¡Feliz Año!&quot;</span><span class='rparen token'>)</span>
  <span class='@post ivar id'>@post</span><span class='dot token'>.</span><span class='friendly_id identifier id'>friendly_id</span> <span class='comment val'># &quot;feliz-año&quot;</span>
</pre>
<h3>Unicode URL&#8217;s</h3>
<p>
FriendlyId can generate slugs in any language that can be written with
Unicode. It does its best to strip away punctuation regardless of the
language being used. Since the authors only speak English, Spanish,
Portuguese and German, this has not been extensively tested with anything
like Chinese, Russian, Greek, etc, but it &quot;should work.&quot; If
you&#8217;re a speaker of a language that uses a non-Roman writing system,
your feedback would be most welcome.
</p>
<pre class="code">
  <span class='has_friendly_id identifier id'>has_friendly_id</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:use_slug</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
  <span class='dot3 op'>...</span>
  <span class='@post ivar id'>@post</span> <span class='assign token'>=</span> <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='symbol val'>:title</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;友好编号在中国&quot;</span><span class='rparen token'>)</span>
  <span class='@post ivar id'>@post</span><span class='dot token'>.</span><span class='friendly_id identifier id'>friendly_id</span> <span class='comment val'># &quot;友好编号在中国&quot;</span>
  <span class='@post2 ivar id'>@post2</span> <span class='assign token'>=</span> <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='symbol val'>:title</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;友好编号在中国&quot;</span><span class='rparen token'>)</span>
  <span class='@post2 ivar id'>@post2</span><span class='dot token'>.</span><span class='friendly_id identifier id'>friendly_id</span> <span class='comment val'># &quot;友好编号在中国--2&quot;</span>
</pre>
<h3>Custom Slug Generation</h3>
<p>
While FriendlyId&#8217;s slug generation options work for most people, you
may need something else. As of version 2.0.4 you can pass in your own
custom slug generation block:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Post constant id'>Post</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='has_friendly_id identifier id'>has_friendly_id</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:use_slug</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='text identifier id'>text</span><span class='bitor op'>|</span>
      <span class='MySlugGeneratorClass constant id'>MySlugGeneratorClass</span><span class='colon2 op'>::</span><span class='my_slug_method identifier id'>my_slug_method</span><span class='lparen token'>(</span><span class='text identifier id'>text</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
FriendlyId will still respect your settings for max length and reserved
words, but will use your block rather than the baked-in methods to
normalize the friendly_id text.
</p>
<h2>Getting it</h2>
<p>
FriendlyId is best installed as a Ruby Gem:
</p>
<pre class="code">
  <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='friendly_id identifier id'>friendly_id</span>
</pre>
<p>
Alternatively, you can install it as a Rails plugin, though this is
discouraged:
</p>
<pre class="code">
  <span class='dot token'>.</span><span class='div op'>/</span><span class='script identifier id'>script</span><span class='div op'>/</span><span class='plugin identifier id'>plugin</span> <span class='install identifier id'>install</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/n</span><span class='orman identifier id'>orman</span><span class='div op'>/</span><span class='friendly_id identifier id'>friendly_id</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
</pre>
<h2>Setting it up</h2>
<p>
The current release works with Rails 2.2 and above, and is compatible with
Ruby 1.8 and 1.9. If you need support for Rails 2.0 - 2.1, you need to
install an older version of FriendlyId. Here&#8217;s how to set it up.
</p>
<p>
1) Install the Gem:
</p>
<pre class="code">
  <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='friendly_id identifier id'>friendly_id</span>
  <span class='cd identifier id'>cd</span> <span class='my_app identifier id'>my_app</span>
  <span class='script identifier id'>script</span><span class='div op'>/</span><span class='generate identifier id'>generate</span> <span class='friendly_id identifier id'>friendly_id</span>
  <span class='rake identifier id'>rake</span> <span class='db identifier id'>db</span><span class='symbol val'>:migrate</span>
</pre>
<p>
2) Load FriendlyId in your app:
</p>
<pre class="code">
  <span class='comment val'># Rails 2.1 and higher; add this to the gem section of environment.rb:</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>&quot;friendly_id&quot;</span>

  <span class='comment val'># Rails 2.0; this goes at the bottom of environment.rb</span>
  <span class='require identifier id'>require</span> <span class='string val'>'friendly_id'</span>
</pre>
<p>
3) Add some code to your models:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Post constant id'>Post</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
    <span class='has_friendly_id identifier id'>has_friendly_id</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:use_slug</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>
</pre>
<p>
4) If you are using slugs, you can use a Rake task to generate slugs for
your existing records:
</p>
<p>
friendly_id:make_slugs MODEL=MyModelName
</p>
<p>
If you eventually want to expire old slugs every so often, or perhaps every
day via cron, you can do:
</p>
<p>
rake:friendly_id:remove_old_slugs
</p>
<p>
The default is to remove dead slugs older than 45 days, but is
configurable:
</p>
<p>
rake:friendly_id:remove_old_slugs MODEL=MyModelName DAYS=60
</p>
<h2>Installing an older version</h2>
<p>
If you are still on Rails 2.1 or lower, please install version 2.0.4:
</p>
<p>
gem install friendly_id --version 2.0.4
</p>
<p>
Note that this version depends on the Unicode gem, which doesn&#8217;t
compile on Windows and is incompatible with Ruby 1.9. It also can&#8217;t
be installed on Heroku. If these are problems, you&#8217;ll need to update
your application to Rails 2.2 or higher and use the current release of
FriendlyId.
</p>
<h2>Upgrading from an older version</h2>
<p>
If you installed an older version of FriendlyId and want to upgrade to
2.0.x, follow these steps:
</p>
<h4>Install the friendly_id Gem:</h4>
<pre class="code">
  <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='friendly_id identifier id'>friendly_id</span>
</pre>
<h4>Add FriendlyId to environment.rb:</h4>
<h5>For Rails 2.1 and higher:</h5>
<pre class="code">
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>&quot;friendly_id&quot;</span>
</pre>
<h5>For Rails 2.0:</h5>
<p>
Add this to the bottom of environment.rb:
</p>
<pre class="code">
  <span class='require identifier id'>require</span> <span class='string val'>'friendly_id'</span>
</pre>
<h4>Remove the older version of FriendlyId:</h4>
<pre class="code">
  <span class='git identifier id'>git</span> <span class='rm identifier id'>rm</span> <span class='minus op'>-</span><span class='rf identifier id'>rf</span> <span class='vendor identifier id'>vendor</span><span class='div op'>/</span><span class='plugins identifier id'>plugins</span><span class='div op'>/</span><span class='friendly_id identifier id'>friendly_id</span>
  <span class='svn identifier id'>svn</span> <span class='delete identifier id'>delete</span> <span class='vendor identifier id'>vendor</span><span class='div op'>/</span><span class='plugins identifier id'>plugins</span><span class='div op'>/</span><span class='friendly_id identifier id'>friendly_id</span>
  <span class='comment val'># or whatever</span>
</pre>
<h4>Generate the upgrade migration and run it</h4>
<pre class="code">
  <span class='dot token'>.</span><span class='div op'>/</span><span class='script identifier id'>script</span> <span class='generate identifier id'>generate</span> <span class='friendly_id_20_upgrade identifier id'>friendly_id_20_upgrade</span>
  <span class='rake identifier id'>rake</span> <span class='db identifier id'>db</span><span class='symbol val'>:migrate</span>
</pre>
<h2>Hacking FriendlyId:</h2>
<p>
FriendlyId is <tt>on Github</tt>[git://github.com/norman/friendly_id.git],
and we love pull requests. :-)
</p>
<h2>Bugs:</h2>
<p>
Please report them on
Lighthouse[http://randomba.lighthouseapp.com/projects/14675-friendly_id].
</p>
<h2>Credits:</h2>
<p>
FriendlyId was created by <tt>Clarke</tt>[mailto:norman@randomba.org],
<tt>Mugnolo</tt>[mailto:adrian@randomba.org], and <tt>Tagua</tt>[mailto:miloops@gmail.com].
</p>
<p>
Copyright &#169; 2008 Norman Clarke, Adrian Mugnolo and Emilio Tagua,
released under the MIT license.
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>