<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jrallison's authlogic_oauth - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jrallison/commits/authlogic_oauth/master" rel="alternate" title="Recent Commits to authlogic_oauth:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jrallison", "authlogic_oauth", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jrallison/authlogic_oauth/blob/0b8eb58d516525e965f5457baba46bb1a08e2290' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jrallison/authlogic_oauth/blob/0b8eb58d516525e965f5457baba46bb1a08e2290' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jrallison", "authlogic_oauth", "0b8eb58d516525e965f5457baba46bb1a08e2290", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jrallison/authlogic_oauth/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jrallison/authlogic_oauth/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jrallison/authlogic_oauth/network">Network</a></li>            
            <li class=""><a href="http://github.com/jrallison/authlogic_oauth/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jrallison/authlogic_oauth">Wiki</a></li>
            <li class=""><a href="http://github.com/jrallison/authlogic_oauth/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jrallison/authlogic_oauth">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jrallison">jrallison</a> / <b><a href="http://github.com/jrallison/authlogic_oauth/tree">authlogic_oauth</a></b>        
                <a id="namespaces_button" rel="jrallison/authlogic_oauth/blob/0b8eb58d516525e965f5457baba46bb1a08e2290" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jrallison/authlogic_oauth/blob/0b8eb58d516525e965f5457baba46bb1a08e2290" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>Authlogic OAuth</h1>
<p>
Authlogic OAuth is an extension of the Authlogic library to add OAuth
support. One use case for authentication with OAuth is allowing users to
log in with their Twitter credentials.
</p>
<h2>Helpful links</h2>
<ul>
<li><b>Authlogic:</b> http://github.com/binarylogic/authlogic

</li>
<li><b>OAuth Example Project:</b>
http://github.com/jrallison/authlogic_example/tree/with-oauth

</li>
<li><b>Live example with Twitter:</b> http://authlogic-oauth.heroku.com/

</li>
</ul>
<h2>Install and use</h2>
<h3>1. Install Authlogic and setup your application</h3>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='b identifier id'>b</span><span class='gt op'>&gt;</span><span class='Authlogic constant id'>Authlogic</span><span class='symbol val'>:&lt;</span><span class='regexp val'>/b&gt; http:/</span><span class='div op'>/</span><span class='github identifier id'>github</span><span class='dot token'>.</span><span class='com identifier id'>com</span><span class='div op'>/</span><span class='binarylogic identifier id'>binarylogic</span><span class='div op'>/</span><span class='authlogic identifier id'>authlogic</span>
  <span class='lt op'>&lt;</span><span class='b identifier id'>b</span><span class='gt op'>&gt;</span><span class='Authlogic constant id'>Authlogic</span> <span class='Example constant id'>Example</span><span class='symbol val'>:&lt;</span><span class='regexp val'>/b&gt; http:/</span><span class='div op'>/</span><span class='github identifier id'>github</span><span class='dot token'>.</span><span class='com identifier id'>com</span><span class='div op'>/</span><span class='binarylogic identifier id'>binarylogic</span><span class='div op'>/</span><span class='authlogic_example identifier id'>authlogic_example</span>
</pre>
<h3>2. Install OAuth and Authlogic_Oauth</h3>
<pre class="code">
  $ <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='oauth identifier id'>oauth</span>
  $ <span class='sudo identifier id'>sudo</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='authlogic identifier id'>authlogic</span><span class='minus op'>-</span><span class='oauth identifier id'>oauth</span>
</pre>
<p>
Now add the gem dependencies in your config:
</p>
<pre class="code">
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>&quot;oauth&quot;</span>
  <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>&quot;authlogic-oauth&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:lib</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;authlogic_oauth&quot;</span>
</pre>
<p>
Or for older version of rails, install it as a plugin:
</p>
<pre class="code">
  $ <span class='script identifier id'>script</span><span class='div op'>/</span><span class='plugin identifier id'>plugin</span> <span class='install identifier id'>install</span> <span class='git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/</span><span class='jrallison identifier id'>jrallison</span><span class='div op'>/</span><span class='authlogic_oauth identifier id'>authlogic_oauth</span><span class='dot token'>.</span><span class='git identifier id'>git</span>
</pre>
<h3>3. Make some simple changes to your database:</h3>
<pre class="code">
  <span class='class class kw'>class</span> <span class='AddUsersOauthFields constant id'>AddUsersOauthFields</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Migration constant id'>Migration</span>
    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='up identifier id'>up</span>
      <span class='add_column identifier id'>add_column</span> <span class='symbol val'>:users</span><span class='comma token'>,</span> <span class='symbol val'>:oauth_token</span><span class='comma token'>,</span> <span class='symbol val'>:string</span>
      <span class='add_column identifier id'>add_column</span> <span class='symbol val'>:users</span><span class='comma token'>,</span> <span class='symbol val'>:oauth_secret</span><span class='comma token'>,</span> <span class='symbol val'>:string</span>
      <span class='add_index identifier id'>add_index</span> <span class='symbol val'>:users</span><span class='comma token'>,</span> <span class='symbol val'>:oauth_token</span>

      <span class='change_column identifier id'>change_column</span> <span class='symbol val'>:users</span><span class='comma token'>,</span> <span class='symbol val'>:login</span><span class='comma token'>,</span> <span class='symbol val'>:string</span><span class='comma token'>,</span> <span class='symbol val'>:default</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='symbol val'>:null</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
      <span class='change_column identifier id'>change_column</span> <span class='symbol val'>:users</span><span class='comma token'>,</span> <span class='symbol val'>:crypted_password</span><span class='comma token'>,</span> <span class='symbol val'>:string</span><span class='comma token'>,</span> <span class='symbol val'>:default</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='symbol val'>:null</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
      <span class='change_column identifier id'>change_column</span> <span class='symbol val'>:users</span><span class='comma token'>,</span> <span class='symbol val'>:password_salt</span><span class='comma token'>,</span> <span class='symbol val'>:string</span><span class='comma token'>,</span> <span class='symbol val'>:default</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='symbol val'>:null</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
    <span class='end end kw'>end</span>

    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='down identifier id'>down</span>
      <span class='remove_column identifier id'>remove_column</span> <span class='symbol val'>:users</span><span class='comma token'>,</span> <span class='symbol val'>:oauth_token</span>
      <span class='remove_column identifier id'>remove_column</span> <span class='symbol val'>:users</span><span class='comma token'>,</span> <span class='symbol val'>:oauth_secret</span>

      <span class='lbrack token'>[</span><span class='symbol val'>:login</span><span class='comma token'>,</span> <span class='symbol val'>:crypted_password</span><span class='comma token'>,</span> <span class='symbol val'>:password_salt</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='field identifier id'>field</span><span class='bitor op'>|</span>
        <span class='User constant id'>User</span><span class='dot token'>.</span><span class='all identifier id'>all</span><span class='lparen token'>(</span><span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>&quot;#{field} is NULL&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='user identifier id'>user</span><span class='bitor op'>|</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='field identifier id'>field</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='user identifier id'>user</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='field identifier id'>field</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> <span class='rbrace token'>}</span>
        <span class='change_column identifier id'>change_column</span> <span class='symbol val'>:users</span><span class='comma token'>,</span> <span class='field identifier id'>field</span><span class='comma token'>,</span> <span class='symbol val'>:string</span><span class='comma token'>,</span> <span class='symbol val'>:default</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:null</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<h3>4. Make sure you save your objects properly</h3>
<p>
You only need to save your objects this way if you want the user to
authenticate with their OAuth provider.
</p>
<p>
That being said, you probably want to do this in your controllers. You
should do this for BOTH your User objects and UserSession objects (assuming
you are authenticating users). It should look something like this:
</p>
<pre class="code">
  <span class='@user_session ivar id'>@user_session</span><span class='dot token'>.</span><span class='save identifier id'>save</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='result identifier id'>result</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='result identifier id'>result</span>
      <span class='flash identifier id'>flash</span><span class='lbrack token'>[</span><span class='symbol val'>:notice</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>&quot;Login successful!&quot;</span>
      <span class='redirect_back_or_default identifier id'>redirect_back_or_default</span> <span class='account_url identifier id'>account_url</span>
    <span class='else else kw'>else</span>
      <span class='render identifier id'>render</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:new</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<p>
You should save your @user objects this way as well, because you also want
the user to authenticate with OAuth.
</p>
<p>
Notice we are saving with a block. Why? Because we need to redirect the
user to their OAuth provider so that they can authenticate. When we do
this, we don&#8217;t want to execute that block of code, because if we do,
we will get a DoubleRender error. This lets us skip that entire block and
send the user along their way without any problems.
</p>
<h3>5. Add a few routes and a OAuth controller</h3>
<p>
This area needs improvement. Also, because of security issues with OAuth
callbacks, this is a bit more complicated then it needs to be.
</p>
<p>
Add the following routes to your routes.rb file:
</p>
<pre class="code">
  <span class='map identifier id'>map</span><span class='dot token'>.</span><span class='oauth_login identifier id'>oauth_login</span> <span class='string val'>'/oauth_login'</span><span class='comma token'>,</span> <span class='lbrace token'>{</span> <span class='symbol val'>:controller</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'user_sessions'</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'create'</span><span class='comma token'>,</span> <span class='symbol val'>:method</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'get'</span> <span class='rbrace token'>}</span>
  <span class='map identifier id'>map</span><span class='dot token'>.</span><span class='oauth_register identifier id'>oauth_register</span> <span class='string val'>'/oauth_register'</span><span class='comma token'>,</span> <span class='lbrace token'>{</span> <span class='symbol val'>:controller</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'users'</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'create'</span><span class='comma token'>,</span> <span class='symbol val'>:method</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'get'</span> <span class='rbrace token'>}</span>
  <span class='map identifier id'>map</span><span class='dot token'>.</span><span class='authorize_oauth identifier id'>authorize_oauth</span> <span class='string val'>'/oauth'</span><span class='comma token'>,</span> <span class='lbrace token'>{</span> <span class='symbol val'>:controller</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'oauth'</span><span class='comma token'>,</span> <span class='symbol val'>:action</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'authorize'</span><span class='comma token'>,</span> <span class='symbol val'>:method</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'get'</span> <span class='rbrace token'>}</span>
</pre>
<p>
Add an OAuth controller to handle the callback from your OAuth provider,
and send it on it&#8217;s way.
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='OauthController constant id'>OauthController</span> <span class='lt op'>&lt;</span> <span class='ApplicationController constant id'>ApplicationController</span>
    <span class='def def kw'>def</span> <span class='authorize identifier id'>authorize</span>
      <span class='redirect_to identifier id'>redirect_to</span> <span class='session identifier id'>session</span><span class='lbrack token'>[</span><span class='symbol val'>:oauth_redirect</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:oauth_token</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:oauth_token</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
</pre>
<h3>6. Config your OAuth provider&#8217;s callback url</h3>
<p>
You&#8217;re callback url should point to the authorize route you added in
step 5.
</p>
<h3>7. Define the oauth_consumer class method on your UserSession model</h3>
<p>
The oauth_consumer should return an OAuth::Consumer which is configured for
your OAuth provider. Here&#8217;s an example for Twitter:
</p>
<pre class="code">
  <span class='class class kw'>class</span> <span class='UserSession constant id'>UserSession</span> <span class='lt op'>&lt;</span> <span class='Authlogic constant id'>Authlogic</span><span class='colon2 op'>::</span><span class='Session constant id'>Session</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>

    <span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='oauth_consumer identifier id'>oauth_consumer</span>
      <span class='OAuth constant id'>OAuth</span><span class='colon2 op'>::</span><span class='Consumer constant id'>Consumer</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;TOKEN&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;SECRET&quot;</span><span class='comma token'>,</span>
      <span class='lbrace token'>{</span> <span class='symbol val'>:site=</span><span class='gt op'>&gt;</span><span class='string val'>&quot;http://twitter.com&quot;</span><span class='comma token'>,</span>
        <span class='symbol val'>:authorize_url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://twitter.com/oauth/authenticate&quot;</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

  <span class='end end kw'>end</span>
</pre>
<h3>8. Add login and register buttons to your views</h3>
<pre class="code">
  <span class='lt op'>&lt;</span><span class='string val'>%= oauth_register_button :value =</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Register with Twitter&quot;</span> <span class='mod op'>%</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='string val'>%= oauth_register_button :value =</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Login with Twitter&quot;</span> <span class='mod op'>%</span><span class='gt op'>&gt;</span>
</pre>
<p>
That&#8217;s it! The rest is taken care of for you.
</p>
<h1>Here are some next steps for the plugin.</h1>
<ol>
<li>Safe OAuth error handling.

</li>
<li>Remove oauth request from the Rails request cycle.

</li>
<li>Cleaning up OAuth controller and routes when OAuth callback_url parameter
is fixed &#8230; or discovered an alternative way of handling it.

</li>
</ol>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> Â©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>