<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>francois's piston - Class: Piston::WorkingCopy - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/francois/commits/piston/master" rel="alternate" title="Recent Commits to piston:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    GitHubRepo.init("francois", "piston", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='francois/piston/blob/b46f6e9d5333b6dfb7c85c5872d983e5266de929' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='francois/piston/blob/b46f6e9d5333b6dfb7c85c5872d983e5266de929' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("francois", "piston", "b46f6e9d5333b6dfb7c85c5872d983e5266de929", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/francois/piston/tree/">Source</a></li>
            <li class=""><a href="http://github.com/francois/piston/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/francois/piston/network">Network</a></li>            
            <li class=""><a href="http://github.com/francois/piston/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/francois/piston">Wiki</a></li>
            <li class=""><a href="http://github.com/francois/piston/graphs">Graphs</a></li>                    
            <li class="active"><a href="/francois/piston">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/francois">francois</a> / <b><a href="http://github.com/francois/piston/tree">piston</a></b>        
                <a id="namespaces_button" rel="francois/piston/blob/b46f6e9d5333b6dfb7c85c5872d983e5266de929" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="francois/piston/blob/b46f6e9d5333b6dfb7c85c5872d983e5266de929" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Piston_WorkingCopy">
  <h1>Class: Piston::WorkingCopy</h1>
  <div class="section attributes">
  
    <div class="">
      <h2>Instance Attributes</h2>
      <table>
      
        <tr>
          <th class="name">path</td>
          <td class="readwrite">
            [<span id='path-instance_method'>R</span>W] 
          </td>
          <td class="visibility">
            public
          </td>
          <td class="docstring">
            <p>
Returns the value of attribute <tt>path</tt>.
</p>

            
          </td>
        </tr>
      
      </table>
    </div>
  
</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(path)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 37</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L37">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">37
38
39
40
41
42
43
44
45</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Pathname constant id'>Pathname</span><span class='rparen token'>)</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{path} must be absolute&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='absolute? fid id'>absolute?</span>
    <span class='@path ivar id'>@path</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span>
  <span class='else else kw'>else</span>
    <span class='@path ivar id'>@path</span> <span class='assign token'>=</span> <span class='Pathname constant id'>Pathname</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Initialized on #{@path}&quot;</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Class Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add_handler-class_method">add_handler</span><span class='args'>(handler)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#guess-class_method">guess</span><span class='args'>(path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#logger-class_method">logger</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
  <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#add-instance_method">#add</span><span class='args'>(added)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
add some files to working copy.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#after_remember-instance_method">#after_remember</span><span class='args'>(path)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Callback after #remember is done, to do whatever the working copy needs to
do with the file.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#copy_from-instance_method">#copy_from</span><span class='args'>(revision)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Copy files from <tt>revision</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#copy_to-instance_method">#copy_to</span><span class='args'>(revision)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Copy files to <tt>revision</tt> to keep local changes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#create-instance_method">#create</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Creates the initial working copy for pistonizing a new repository.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#delete-instance_method">#delete</span><span class='args'>(deleted)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
delete some files from working copy.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#diff-instance_method">#diff</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#downgrade_to-instance_method">#downgrade_to</span><span class='args'>(revision)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Downgrade this working copy to <tt>revision</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#exclude_for_diff-instance_method">#exclude_for_diff</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#exist-3F-instance_method">#exist?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#finalize-instance_method">#finalize</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#import-instance_method">#import</span><span class='args'>(revision, lock)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#info-instance_method">#info</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns basic information about this working copy.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#locally_modified-instance_method">#locally_modified</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#logger-instance_method">#logger</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#merge_local_changes-instance_method">#merge_local_changes</span><span class='args'>(revision)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Merge remote changes with local changes in <tt>revision</tt>.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#pistonized-3F-instance_method">#pistonized?</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#recall-instance_method">#recall</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Recalls a Hash of values from the working copy.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#remember-instance_method">#remember</span><span class='args'>(values, handler_values)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Stores a Hash of values that can be retrieved later.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#remotely_modified-instance_method">#remotely_modified</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#rename-instance_method">#rename</span><span class='args'>(renamed)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
rename some files in working copy.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#repository-instance_method">#repository</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#temp_dir_name-instance_method">#temp_dir_name</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#to_s-instance_method">#to_s</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#update-instance_method">#update</span><span class='args'>(revision, to, lock)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Update this working copy from <tt>from</tt> to <tt>to</tt>, which means
merging local changes back in Return true if changed, false if not.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#validate-21-instance_method">#validate!</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails">
  <h2>Public Class Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>add_handler</h3>
</div><div id="add_handler-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add_handler</span><span class='args'>(handler)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 25</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L25">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">25
26
27</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add_handler identifier id'>add_handler</span><span class='lparen token'>(</span><span class='handler identifier id'>handler</span><span class='rparen token'>)</span>
  <span class='@@handlers ivar id'>@@handlers</span> <span class='lshft op'>&lt;&lt;</span> <span class='handler identifier id'>handler</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>guess</h3>
</div><div id="guess-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>guess</span><span class='args'>(path)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="UnhandledWorkingCopy" href="WorkingCopy/UnhandledWorkingCopy.html">UnhandledWorkingCopy</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 11</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L11">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">11
12
13
14
15
16
17
18
19
20
21
22</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='guess identifier id'>guess</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
  <span class='path identifier id'>path</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Pathname constant id'>Pathname</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='path identifier id'>path</span> <span class='colon op'>:</span> <span class='Pathname constant id'>Pathname</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
  <span class='try_path identifier id'>try_path</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span> <span class='integer val'>? </span><span class='path identifier id'>path</span> <span class='colon op'>:</span> <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='parent identifier id'>parent</span>
  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Guessing the working copy type of #{try_path.inspect}&quot;</span><span class='rbrace token'>}</span>
  <span class='handler identifier id'>handler</span> <span class='assign token'>=</span> <span class='handlers identifier id'>handlers</span><span class='dot token'>.</span><span class='detect identifier id'>detect</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='handler identifier id'>handler</span><span class='bitor op'>|</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Asking #{handler.name} if it understands #{try_path}&quot;</span><span class='rbrace token'>}</span>
    <span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='understands_dir? fid id'>understands_dir?</span><span class='lparen token'>(</span><span class='try_path identifier id'>try_path</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='raise identifier id'>raise</span> <span class='UnhandledWorkingCopy constant id'>UnhandledWorkingCopy</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Don't know what working copy type #{path} is.&quot;</span> <span class='if if_mod kw'>if</span> <span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='handler identifier id'>handler</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='expand_path identifier id'>expand_path</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>logger</h3>
</div><div id="logger-class_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>logger</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 7</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L7">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">7
8
9</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='logger identifier id'>logger</span>
  <span class='@@logger ivar id'>@@logger</span> <span class='opasgn op'>||=</span> <span class='Log4r constant id'>Log4r</span><span class='colon2 op'>::</span><span class='Logger constant id'>Logger</span><span class='lbrack token'>[</span><span class='string val'>&quot;handler&quot;</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div><div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>add</h3>
</div><div id="add-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>add</span><span class='args'>(added)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
add some files to working copy
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="SubclassResponsibilityError" href="../SubclassResponsibilityError.html">SubclassResponsibilityError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 116</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L116">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">116
117
118</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='added identifier id'>added</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='SubclassResponsibilityError constant id'>SubclassResponsibilityError</span><span class='comma token'>,</span> <span class='string val'>&quot;Piston::WorkingCopy#add should be implemented by a subclass.&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>after_remember</h3>
</div><div id="after_remember-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>after_remember</span><span class='args'>(path)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Callback after #remember is done, to do whatever the working copy needs to
do with the file.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 160</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L160">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">160
161</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='after_remember identifier id'>after_remember</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>copy_from</h3>
</div><div id="copy_from-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>copy_from</span><span class='args'>(revision)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Copy files from <tt>revision</tt>. <tt>revision</tt> must
#respond_to?(:each), and return each file that is to be copied. Only files
must be returned.
</p>
<p>
Each item yielded by Revision#each must be a relative path.
</p>
<p>
WorkingCopy will call Revision#copy_to with the full path to where the file
needs to be copied.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 88</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L88">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">88
89
90
91
92
93
94
95
96</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='copy_from identifier id'>copy_from</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='rparen token'>)</span>
  <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='relpath identifier id'>relpath</span><span class='bitor op'>|</span>
    <span class='target identifier id'>target</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span> <span class='plus op'>+</span> <span class='relpath identifier id'>relpath</span>
    <span class='target identifier id'>target</span><span class='dot token'>.</span><span class='dirname identifier id'>dirname</span><span class='dot token'>.</span><span class='mkdir identifier id'>mkdir</span> <span class='rescue rescue kw'>rescue</span> <span class='nil nil kw'>nil</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Copying #{relpath} to #{target}&quot;</span><span class='rbrace token'>}</span>
    <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='copy_to identifier id'>copy_to</span><span class='lparen token'>(</span><span class='relpath identifier id'>relpath</span><span class='comma token'>,</span> <span class='target identifier id'>target</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>copy_to</h3>
</div><div id="copy_to-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>copy_to</span><span class='args'>(revision)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Copy files to <tt>revision</tt> to keep local changes. <tt>revision</tt>
must #respond_to?(:each), and return each file that is to be copied. Only
files must be returned.
</p>
<p>
Each item yielded by Revision#each must be a relative path.
</p>
<p>
WorkingCopy will call Revision#copy_from with the full path from where the
file needs to be copied.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 106</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L106">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">106
107
108
109
110
111
112
113</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='copy_to identifier id'>copy_to</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='rparen token'>)</span>
  <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='relpath identifier id'>relpath</span><span class='bitor op'>|</span>
    <span class='source identifier id'>source</span> <span class='assign token'>=</span> <span class='path identifier id'>path</span> <span class='plus op'>+</span> <span class='relpath identifier id'>relpath</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Copying #{source} to #{relpath}&quot;</span><span class='rbrace token'>}</span>
    <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='copy_from identifier id'>copy_from</span><span class='lparen token'>(</span><span class='source identifier id'>source</span><span class='comma token'>,</span> <span class='relpath identifier id'>relpath</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create</h3>
</div><div id="create-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates the initial working copy for pistonizing a new repository.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 76</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L76">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">76
77
78</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='create identifier id'>create</span>
  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Creating working copy at #{path}&quot;</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>delete</h3>
</div><div id="delete-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>delete</span><span class='args'>(deleted)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
delete some files from working copy
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="SubclassResponsibilityError" href="../SubclassResponsibilityError.html">SubclassResponsibilityError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 121</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L121">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">121
122
123</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='deleted identifier id'>deleted</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='SubclassResponsibilityError constant id'>SubclassResponsibilityError</span><span class='comma token'>,</span> <span class='string val'>&quot;Piston::WorkingCopy#delete should be implemented by a subclass.&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>diff</h3>
</div><div id="diff-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>diff</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 257</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L257">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">257
258
259
260
261
262
263
264
265
266
267
268
269
270</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='diff identifier id'>diff</span>
  <span class='tmpdir identifier id'>tmpdir</span> <span class='assign token'>=</span> <span class='temp_dir_name identifier id'>temp_dir_name</span>
  <span class='begin begin kw'>begin</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Checking out the repository at #{revision.revision}&quot;</span><span class='rbrace token'>}</span>
    <span class='revision identifier id'>revision</span> <span class='assign token'>=</span> <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='symbol val'>:head</span><span class='rparen token'>)</span>
    <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='checkout_to identifier id'>checkout_to</span><span class='lparen token'>(</span><span class='tmpdir identifier id'>tmpdir</span><span class='rparen token'>)</span>

    <span class='excludes identifier id'>excludes</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='string val'>'.piston.yml'</span><span class='rbrack token'>]</span> <span class='plus op'>+</span> <span class='exclude_for_diff identifier id'>exclude_for_diff</span> <span class='plus op'>+</span> <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='exclude_for_diff identifier id'>exclude_for_diff</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='pattern identifier id'>pattern</span><span class='bitor op'>|</span> <span class='dstring node'>&quot;--exclude=#{pattern}&quot;</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span> <span class='string val'>' '</span>
    <span class='system identifier id'>system</span><span class='lparen token'>(</span><span class='dstring node'>&quot;diff -urN #{excludes} '#{tmpdir}' '#{path}'&quot;</span><span class='rparen token'>)</span>
  <span class='ensure ensure kw'>ensure</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Removing temporary directory: #{tmpdir}&quot;</span><span class='rbrace token'>}</span>
    <span class='tmpdir identifier id'>tmpdir</span><span class='dot token'>.</span><span class='rmtree identifier id'>rmtree</span> <span class='rescue rescue kw'>rescue</span> <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>downgrade_to</h3>
</div><div id="downgrade_to-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>downgrade_to</span><span class='args'>(revision)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Downgrade this working copy to <tt>revision</tt>.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="SubclassResponsibilityError" href="../SubclassResponsibilityError.html">SubclassResponsibilityError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 131</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L131">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">131
132
133</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='downgrade_to identifier id'>downgrade_to</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='SubclassResponsibilityError constant id'>SubclassResponsibilityError</span><span class='comma token'>,</span> <span class='string val'>&quot;Piston::WorkingCopy#downgrade_to should be implemented by a subclass.&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>exclude_for_diff</h3>
</div><div id="exclude_for_diff-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>exclude_for_diff</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="SubclassResponsibilityError" href="../SubclassResponsibilityError.html">SubclassResponsibilityError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 314</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L314">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">314
315
316</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='exclude_for_diff identifier id'>exclude_for_diff</span>
  <span class='raise identifier id'>raise</span> <span class='SubclassResponsibilityError constant id'>SubclassResponsibilityError</span><span class='comma token'>,</span> <span class='string val'>&quot;Piston::WorkingCopy#exclude_for_diff should be implemented by a subclass.&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>exist?</h3>
</div><div id="exist-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>exist?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 55</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L55">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">55
56
57</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='exist? fid id'>exist?</span>
  <span class='@path ivar id'>@path</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span> <span class='andop op'>&amp;&amp;</span> <span class='@path ivar id'>@path</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>finalize</h3>
</div><div id="finalize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>finalize</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 168</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L168">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">168
169
170</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='finalize identifier id'>finalize</span>
  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Finalizing #{path}&quot;</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>import</h3>
</div><div id="import-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>import</span><span class='args'>(revision, lock)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 177</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L177">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='import identifier id'>import</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='comma token'>,</span> <span class='lock identifier id'>lock</span><span class='rparen token'>)</span>
  <span class='lock identifier id'>lock</span> <span class='opasgn op'>||=</span> <span class='false false kw'>false</span>
  <span class='repository identifier id'>repository</span> <span class='assign token'>=</span> <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span>
  <span class='tmpdir identifier id'>tmpdir</span> <span class='assign token'>=</span> <span class='temp_dir_name identifier id'>temp_dir_name</span>
  <span class='begin begin kw'>begin</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Checking out the repository&quot;</span><span class='rbrace token'>}</span>
    <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='checkout_to identifier id'>checkout_to</span><span class='lparen token'>(</span><span class='tmpdir identifier id'>tmpdir</span><span class='rparen token'>)</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Creating the local working copy&quot;</span><span class='rbrace token'>}</span>
    <span class='create identifier id'>create</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Copying from #{revision}&quot;</span><span class='rbrace token'>}</span>
    <span class='copy_from identifier id'>copy_from</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='rparen token'>)</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Remembering values&quot;</span><span class='rbrace token'>}</span>
    <span class='remember identifier id'>remember</span><span class='lparen token'>(</span>
      <span class='lbrace token'>{</span><span class='symbol val'>:repository_url</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='url identifier id'>url</span><span class='comma token'>,</span> <span class='symbol val'>:lock</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lock identifier id'>lock</span><span class='comma token'>,</span> <span class='symbol val'>:repository_class</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrace token'>}</span><span class='comma token'>,</span>
      <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='remember_values identifier id'>remember_values</span>
    <span class='rparen token'>)</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Finalizing working copy&quot;</span><span class='rbrace token'>}</span>
    <span class='finalize identifier id'>finalize</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Checked out #{repository.url.inspect} #{revision.name} to #{path.to_s}&quot;</span><span class='rbrace token'>}</span>
  <span class='ensure ensure kw'>ensure</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Removing temporary directory: #{tmpdir}&quot;</span><span class='rbrace token'>}</span>
    <span class='tmpdir identifier id'>tmpdir</span><span class='dot token'>.</span><span class='rmtree identifier id'>rmtree</span> <span class='rescue rescue kw'>rescue</span> <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>info</h3>
</div><div id="info-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>info</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns basic information about this working copy.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 173</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L173">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">173
174
175</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='info identifier id'>info</span>
  <span class='recall identifier id'>recall</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>locally_modified</h3>
</div><div id="locally_modified-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>locally_modified</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="SubclassResponsibilityError" href="../SubclassResponsibilityError.html">SubclassResponsibilityError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 306</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L306">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">306
307
308</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='locally_modified identifier id'>locally_modified</span>
  <span class='raise identifier id'>raise</span> <span class='SubclassResponsibilityError constant id'>SubclassResponsibilityError</span><span class='comma token'>,</span> <span class='string val'>&quot;Piston::WorkingCopy#locally_modified should be implemented by a subclass.&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>logger</h3>
</div><div id="logger-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>logger</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 47</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L47">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">47
48
49</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='logger identifier id'>logger</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='logger identifier id'>logger</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>merge_local_changes</h3>
</div><div id="merge_local_changes-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>merge_local_changes</span><span class='args'>(revision)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Merge remote changes with local changes in <tt>revision</tt>.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="SubclassResponsibilityError" href="../SubclassResponsibilityError.html">SubclassResponsibilityError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 136</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L136">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">136
137
138</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='merge_local_changes identifier id'>merge_local_changes</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='SubclassResponsibilityError constant id'>SubclassResponsibilityError</span><span class='comma token'>,</span> <span class='string val'>&quot;Piston::WorkingCopy#merge_local_changes should be implemented by a subclass.&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>pistonized?</h3>
</div><div id="pistonized-3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>pistonized?</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 59</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L59">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">59
60
61</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='pistonized? fid id'>pistonized?</span>
  <span class='yaml_path identifier id'>yaml_path</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span> <span class='andop op'>&amp;&amp;</span> <span class='yaml_path identifier id'>yaml_path</span><span class='dot token'>.</span><span class='file? fid id'>file?</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>recall</h3>
</div><div id="recall-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>recall</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Recalls a Hash of values from the working copy.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 164</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L164">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">164
165
166</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='recall identifier id'>recall</span>
  <span class='YAML constant id'>YAML</span><span class='dot token'>.</span><span class='load_file identifier id'>load_file</span><span class='lparen token'>(</span><span class='yaml_path identifier id'>yaml_path</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>remember</h3>
</div><div id="remember-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>remember</span><span class='args'>(values, handler_values)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Stores a Hash of values that can be retrieved later.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 141</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L141">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='remember identifier id'>remember</span><span class='lparen token'>(</span><span class='values identifier id'>values</span><span class='comma token'>,</span> <span class='handler_values identifier id'>handler_values</span><span class='rparen token'>)</span>
  <span class='values identifier id'>values</span><span class='lbrack token'>[</span><span class='string val'>&quot;format&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='integer val'>1</span>

  <span class='comment val'># Stringify keys</span>
  <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='bitor op'>|</span>
    <span class='values identifier id'>values</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Remembering #{values.inspect} as well as #{handler_values.inspect}&quot;</span><span class='rbrace token'>}</span>
  <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='yaml_path identifier id'>yaml_path</span><span class='comma token'>,</span> <span class='string val'>&quot;w+&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
    <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='values identifier id'>values</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='string val'>&quot;handler&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='handler_values identifier id'>handler_values</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_yaml identifier id'>to_yaml</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Calling \#after_remember on #{yaml_path}&quot;</span><span class='rbrace token'>}</span>
  <span class='after_remember identifier id'>after_remember</span><span class='lparen token'>(</span><span class='yaml_path identifier id'>yaml_path</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>remotely_modified</h3>
</div><div id="remotely_modified-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>remotely_modified</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 310</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L310">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">310
311
312</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='remotely_modified identifier id'>remotely_modified</span>
  <span class='repository identifier id'>repository</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='recall identifier id'>recall</span><span class='lbrack token'>[</span><span class='string val'>&quot;handler&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='remotely_modified identifier id'>remotely_modified</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>rename</h3>
</div><div id="rename-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>rename</span><span class='args'>(renamed)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
rename some files in working copy
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="SubclassResponsibilityError" href="../SubclassResponsibilityError.html">SubclassResponsibilityError</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 126</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L126">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">126
127
128</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='rename identifier id'>rename</span><span class='lparen token'>(</span><span class='renamed identifier id'>renamed</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='SubclassResponsibilityError constant id'>SubclassResponsibilityError</span><span class='comma token'>,</span> <span class='string val'>&quot;Piston::WorkingCopy#rename should be implemented by a subclass.&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>repository</h3>
</div><div id="repository-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>repository</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 68</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L68">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">68
69
70
71
72
73</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='repository identifier id'>repository</span>
  <span class='values identifier id'>values</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='recall identifier id'>recall</span>
  <span class='repository_class identifier id'>repository_class</span> <span class='assign token'>=</span> <span class='values identifier id'>values</span><span class='lbrack token'>[</span><span class='string val'>&quot;repository_class&quot;</span><span class='rbrack token'>]</span>
  <span class='repository_url identifier id'>repository_url</span> <span class='assign token'>=</span> <span class='values identifier id'>values</span><span class='lbrack token'>[</span><span class='string val'>&quot;repository_url&quot;</span><span class='rbrack token'>]</span>
  <span class='repository_class identifier id'>repository_class</span><span class='dot token'>.</span><span class='constantize identifier id'>constantize</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='repository_url identifier id'>repository_url</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>temp_dir_name</h3>
</div><div id="temp_dir_name-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>temp_dir_name</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 302</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L302">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">302
303
304</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='temp_dir_name identifier id'>temp_dir_name</span>
  <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='parent identifier id'>parent</span> <span class='plus op'>+</span> <span class='dstring node'>&quot;.#{path.basename}.tmp&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>to_s</h3>
</div><div id="to_s-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>to_s</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 51</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L51">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">51
52
53</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='to_s identifier id'>to_s</span>
  <span class='dstring node'>&quot;Piston::WorkingCopy(#{@path})&quot;</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>update</h3>
</div><div id="update-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>update</span><span class='args'>(revision, to, lock)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Update this working copy from <tt>from</tt> to <tt>to</tt>, which means
merging local changes back in Return true if changed, false if not
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 209</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L209">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='comma token'>,</span> <span class='to identifier id'>to</span><span class='comma token'>,</span> <span class='lock identifier id'>lock</span><span class='rparen token'>)</span>
  <span class='lock identifier id'>lock</span> <span class='opasgn op'>||=</span> <span class='false false kw'>false</span>
  <span class='tmpdir identifier id'>tmpdir</span> <span class='assign token'>=</span> <span class='temp_dir_name identifier id'>temp_dir_name</span>
  <span class='begin begin kw'>begin</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Checking out the repository at #{revision.revision}&quot;</span><span class='rbrace token'>}</span>
    <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='checkout_to identifier id'>checkout_to</span><span class='lparen token'>(</span><span class='tmpdir identifier id'>tmpdir</span><span class='rparen token'>)</span>

    <span class='revision_to_return identifier id'>revision_to_return</span> <span class='assign token'>=</span> <span class='current_revision identifier id'>current_revision</span>
    <span class='revision_to_downgrade identifier id'>revision_to_downgrade</span> <span class='assign token'>=</span> <span class='last_changed_revision identifier id'>last_changed_revision</span><span class='lparen token'>(</span><span class='yaml_path identifier id'>yaml_path</span><span class='rparen token'>)</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Downgrading to #{revision_to_downgrade}&quot;</span><span class='rbrace token'>}</span>
    <span class='downgrade_to identifier id'>downgrade_to</span><span class='lparen token'>(</span><span class='revision_to_downgrade identifier id'>revision_to_downgrade</span><span class='rparen token'>)</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Copying old changes to temporary directory in order to keep them&quot;</span><span class='rbrace token'>}</span>
    <span class='copy_to identifier id'>copy_to</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='rparen token'>)</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Looking changes from #{revision.revision} to #{to.revision}&quot;</span><span class='rbrace token'>}</span>
    <span class='added identifier id'>added</span><span class='comma token'>,</span> <span class='deleted identifier id'>deleted</span><span class='comma token'>,</span> <span class='renamed identifier id'>renamed</span> <span class='assign token'>=</span> <span class='revision identifier id'>revision</span><span class='dot token'>.</span><span class='update_to identifier id'>update_to</span><span class='lparen token'>(</span><span class='to identifier id'>to</span><span class='dot token'>.</span><span class='revision identifier id'>revision</span><span class='rparen token'>)</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Updating working copy&quot;</span><span class='rbrace token'>}</span>

    <span class='comment val'># rename before copy because copy_from will copy these files</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Renaming files&quot;</span><span class='rbrace token'>}</span>
    <span class='rename identifier id'>rename</span><span class='lparen token'>(</span><span class='renamed identifier id'>renamed</span><span class='rparen token'>)</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Copying files from temporary directory&quot;</span><span class='rbrace token'>}</span>
    <span class='copy_from identifier id'>copy_from</span><span class='lparen token'>(</span><span class='revision identifier id'>revision</span><span class='rparen token'>)</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Adding new files to version control&quot;</span><span class='rbrace token'>}</span>
    <span class='add identifier id'>add</span><span class='lparen token'>(</span><span class='added identifier id'>added</span><span class='rparen token'>)</span>

    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Deleting files from version control&quot;</span><span class='rbrace token'>}</span>
    <span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='deleted identifier id'>deleted</span><span class='rparen token'>)</span>

    <span class='comment val'># merge local changes updating to revision before downgrade was made</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='string val'>&quot;Merging local changes&quot;</span><span class='rbrace token'>}</span>
    <span class='merge_local_changes identifier id'>merge_local_changes</span><span class='lparen token'>(</span><span class='revision_to_return identifier id'>revision_to_return</span><span class='rparen token'>)</span>

    <span class='remember identifier id'>remember</span><span class='lparen token'>(</span><span class='recall identifier id'>recall</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='symbol val'>:lock</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lock identifier id'>lock</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='to identifier id'>to</span><span class='dot token'>.</span><span class='remember_values identifier id'>remember_values</span><span class='rparen token'>)</span>

    <span class='status identifier id'>status</span> <span class='assign token'>=</span> <span class='status identifier id'>status</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span> <span class='lbrace token'>{</span><span class='symbol val'>:added</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='added identifier id'>added</span><span class='comma token'>,</span> <span class='symbol val'>:deleted</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='deleted identifier id'>deleted</span><span class='comma token'>,</span> <span class='symbol val'>:renamed</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='renamed identifier id'>renamed</span><span class='comma token'>,</span> <span class='symbol val'>:status</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='status identifier id'>status</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='to_yaml identifier id'>to_yaml</span> <span class='rbrace token'>}</span>
    <span class='notop op'>!</span><span class='status identifier id'>status</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='ensure ensure kw'>ensure</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='lbrace token'>{</span><span class='dstring node'>&quot;Removing temporary directory: #{tmpdir}&quot;</span><span class='rbrace token'>}</span>
    <span class='tmpdir identifier id'>tmpdir</span><span class='dot token'>.</span><span class='rmtree identifier id'>rmtree</span> <span class='rescue rescue kw'>rescue</span> <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>validate!</h3>
</div><div id="validate-21-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>validate!</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  <div class="param">
  <h3>Parameters:</h3>
  <dl>
  
  </dl>
</div><div class="raise">
  <h3>Raises:</h3>
  <dl>
  
    <dt>
      
        <span class='type'>[<tt><a title="NotWorkingCopy" href="WorkingCopy/NotWorkingCopy.html">NotWorkingCopy</a></tt>]</span>
      
      
      
    </dt>
    <dd>
      <span class='desc'></span>
    </dd>
  
  </dl>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/piston/working_copy.rb', line 63</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/francois/piston/blob/master/lib/piston/working_copy.rb#L63">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">63
64
65
66</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='validate! fid id'>validate!</span>
  <span class='raise identifier id'>raise</span> <span class='NotWorkingCopy constant id'>NotWorkingCopy</span> <span class='unless unless_mod kw'>unless</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='pistonized? fid id'>pistonized?</span>
  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>