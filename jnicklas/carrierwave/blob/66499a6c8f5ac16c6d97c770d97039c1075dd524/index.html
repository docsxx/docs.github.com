<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>jnicklas's carrierwave - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/jnicklas/commits/carrierwave/master" rel="alternate" title="Recent Commits to carrierwave:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("jnicklas", "carrierwave", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='jnicklas/carrierwave/blob/66499a6c8f5ac16c6d97c770d97039c1075dd524' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='jnicklas/carrierwave/blob/66499a6c8f5ac16c6d97c770d97039c1075dd524' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("jnicklas", "carrierwave", "66499a6c8f5ac16c6d97c770d97039c1075dd524", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/jnicklas/carrierwave/tree/">Source</a></li>
            <li class=""><a href="http://github.com/jnicklas/carrierwave/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/jnicklas/carrierwave/network">Network</a></li>            
            <li class=""><a href="http://github.com/jnicklas/carrierwave/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/jnicklas/carrierwave">Wiki</a></li>
            <li class=""><a href="http://github.com/jnicklas/carrierwave/graphs">Graphs</a></li>                    
            <li class="active"><a href="/jnicklas/carrierwave">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/jnicklas">jnicklas</a> / <b><a href="http://github.com/jnicklas/carrierwave/tree">carrierwave</a></b>        
                <a id="namespaces_button" rel="jnicklas/carrierwave/blob/66499a6c8f5ac16c6d97c770d97039c1075dd524" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="jnicklas/carrierwave/blob/66499a6c8f5ac16c6d97c770d97039c1075dd524" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="section docstring readme wikistyle">
  <h1>CarrierWave</h1>
<p>
This plugin for Merb and Rails provides a simple and extremely flexible way
to upload files.
</p>
<h2>Getting Started</h2>
<p>
Install the latest stable release:
</p>
<pre class="code">
    <span class='lbrack token'>[</span><span class='sudo identifier id'>sudo</span><span class='rbrack token'>]</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='carrierwave identifier id'>carrierwave</span>
</pre>
<p>
Or the cutting edge development version:
</p>
<pre class="code">
    <span class='lbrack token'>[</span><span class='sudo identifier id'>sudo</span><span class='rbrack token'>]</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='jnicklas identifier id'>jnicklas</span><span class='minus op'>-</span><span class='carrierwave identifier id'>carrierwave</span> <span class='minus op'>-</span><span class='minus op'>-</span><span class='source identifier id'>source</span> <span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/gems.github.com
</span></pre>
<p>
In Merb, add it as a dependency to your config/dependencies.rb:
</p>
<pre class="code">
    <span class='dependency identifier id'>dependency</span> <span class='string val'>'carrierwave'</span>
</pre>
<p>
In Rails, add it to your environment.rb:
</p>
<pre class="code">
    <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='gem identifier id'>gem</span> <span class='string val'>&quot;carrierwave&quot;</span>
</pre>
<h2>Quick Start</h2>
<p>
Start off by generating an uploader:
</p>
<pre class="code">
    <span class='merb identifier id'>merb</span><span class='minus op'>-</span><span class='gen identifier id'>gen</span> <span class='uploader identifier id'>uploader</span> <span class='Avatar constant id'>Avatar</span>
</pre>
<p>
or in Rails:
</p>
<pre class="code">
    <span class='script identifier id'>script</span><span class='div op'>/</span><span class='generate identifier id'>generate</span> <span class='uploader identifier id'>uploader</span> <span class='Avatar constant id'>Avatar</span>
</pre>
<p>
this should give you a file in:
</p>
<pre class="code">
    <span class='app identifier id'>app</span><span class='div op'>/</span><span class='uploaders identifier id'>uploaders</span><span class='div op'>/</span><span class='avatar_uploader identifier id'>avatar_uploader</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
</pre>
<p>
Check out this file for some hints on how you can customize your uploader.
It should look something like this:
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='AvatarUploader constant id'>AvatarUploader</span> <span class='lt op'>&lt;</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='Uploader constant id'>Uploader</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
      <span class='storage identifier id'>storage</span> <span class='symbol val'>:file</span>
    <span class='end end kw'>end</span>
</pre>
<p>
You can use your uploader class to store and retrieve files like this:
</p>
<pre class="code">
    <span class='uploader identifier id'>uploader</span> <span class='assign token'>=</span> <span class='AvatarUploader constant id'>AvatarUploader</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

    <span class='uploader identifier id'>uploader</span><span class='dot token'>.</span><span class='store! fid id'>store!</span><span class='lparen token'>(</span><span class='my_file identifier id'>my_file</span><span class='rparen token'>)</span>

    <span class='uploader identifier id'>uploader</span><span class='dot token'>.</span><span class='retrieve_from_store! fid id'>retrieve_from_store!</span><span class='lparen token'>(</span><span class='string val'>'my_file.png'</span><span class='rparen token'>)</span>
</pre>
<p>
CarrierWave gives you a <tt>store</tt> for permanent storage, and a
<tt>cache</tt> for temporary storage. You can use different stores, at the
moment a filesystem store and an Amazon S3 store are bundled.
</p>
<p>
Most of the time you are going to want to use CarrierWave together with an
ORM. It is quite simple to mount uploaders on columns in your model, so you
can simply assign files and get going:
</p>
<h3>ActiveRecord, DataMapper, Sequel</h3>
<p>
First require the relevant extension:
</p>
<pre class="code">
    <span class='require identifier id'>require</span> <span class='string val'>'carrierwave/orm/activerecord'</span>
    <span class='require identifier id'>require</span> <span class='string val'>'carrierwave/orm/datamapper'</span>
    <span class='require identifier id'>require</span> <span class='string val'>'carrierwave/orm/sequel'</span>
</pre>
<p>
You don&#8217;t need to do this if you are using Merb or Rails.
</p>
<p>
Open your model file, for ActiveRecord do something like:
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='User constant id'>User</span> <span class='lt op'>&lt;</span> <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
      <span class='mount_uploader identifier id'>mount_uploader</span> <span class='symbol val'>:avatar</span><span class='comma token'>,</span> <span class='AvatarUploader constant id'>AvatarUploader</span>
    <span class='end end kw'>end</span>
</pre>
<p>
Or for DataMapper:
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='User constant id'>User</span>
      <span class='include identifier id'>include</span> <span class='DataMapper constant id'>DataMapper</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span>

      <span class='mount_uploader identifier id'>mount_uploader</span> <span class='symbol val'>:avatar</span><span class='comma token'>,</span> <span class='AvatarUploader constant id'>AvatarUploader</span>
    <span class='end end kw'>end</span>
</pre>
<p>
Or for Sequel
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='User constant id'>User</span> <span class='lt op'>&lt;</span> <span class='Sequel constant id'>Sequel</span><span class='colon2 op'>::</span><span class='Model constant id'>Model</span>
      <span class='mount_uploader identifier id'>mount_uploader</span> <span class='symbol val'>:avatar</span><span class='comma token'>,</span> <span class='AvatarUploader constant id'>AvatarUploader</span>
    <span class='end end kw'>end</span>
</pre>
<p>
Now you can cache files by assigning them to the attribute, they will
automatically be stored when the record is saved.
</p>
<pre class="code">
    <span class='u identifier id'>u</span> <span class='assign token'>=</span> <span class='User constant id'>User</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
    <span class='u identifier id'>u</span><span class='dot token'>.</span><span class='avatar identifier id'>avatar</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:file</span><span class='rbrack token'>]</span>
    <span class='u identifier id'>u</span><span class='dot token'>.</span><span class='avatar identifier id'>avatar</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='string val'>'somewhere'</span><span class='rparen token'>)</span>
    <span class='u identifier id'>u</span><span class='dot token'>.</span><span class='save! fid id'>save!</span>
    <span class='u identifier id'>u</span><span class='dot token'>.</span><span class='avatar identifier id'>avatar</span><span class='dot token'>.</span><span class='url identifier id'>url</span> <span class='comment val'># =&gt; '/url/to/file.png'</span>
    <span class='u identifier id'>u</span><span class='dot token'>.</span><span class='avatar identifier id'>avatar</span><span class='dot token'>.</span><span class='current_path identifier id'>current_path</span> <span class='comment val'># =&gt; 'path/to/file.png'</span>
</pre>
<h2>Changing the storage directory</h2>
<p>
In order to change where uploaded files are put, just override the
<tt>store_dir</tt> method:
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='MyUploader constant id'>MyUploader</span> <span class='lt op'>&lt;</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='Uploader constant id'>Uploader</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
      <span class='def def kw'>def</span> <span class='store_dir identifier id'>store_dir</span>
        <span class='string val'>'public/my/upload/directory'</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
</pre>
<p>
This works for the file storage as well as Amazon S3.
</p>
<h2>Adding versions</h2>
<p>
Often you&#8217;ll want to add different versions of the same file. The
classic example is image thumbnails. There is built in support for this:
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='MyUploader constant id'>MyUploader</span> <span class='lt op'>&lt;</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='Uploader constant id'>Uploader</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
      <span class='include identifier id'>include</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='RMagick constant id'>RMagick</span>

      <span class='process identifier id'>process</span> <span class='symbol val'>:resize</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='integer val'>800</span><span class='comma token'>,</span> <span class='integer val'>800</span><span class='rbrack token'>]</span>

      <span class='version identifier id'>version</span> <span class='symbol val'>:thumb</span> <span class='do do kw'>do</span>
        <span class='process identifier id'>process</span> <span class='symbol val'>:crop_resized</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='integer val'>200</span><span class='comma token'>,</span><span class='integer val'>200</span><span class='rbrack token'>]</span>
      <span class='end end kw'>end</span>

    <span class='end end kw'>end</span>
</pre>
<p>
When this uploader is used, an uploaded image would be scaled to be no
larger than 800 by 800 pixels. A version called thumb is then created,
which is scaled and cropped to exactly 200 by 200 pixels. The uploader
could be used like this:
</p>
<pre class="code">
    <span class='uploader identifier id'>uploader</span> <span class='assign token'>=</span> <span class='AvatarUploader constant id'>AvatarUploader</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
    <span class='uploader identifier id'>uploader</span><span class='dot token'>.</span><span class='store! fid id'>store!</span><span class='lparen token'>(</span><span class='my_file identifier id'>my_file</span><span class='rparen token'>)</span>                              <span class='comment val'># size: 1024x768</span>

    <span class='uploader identifier id'>uploader</span><span class='dot token'>.</span><span class='url identifier id'>url</span> <span class='comment val'># =&gt; '/url/to/my_file.png'               # size: 800x600</span>
    <span class='uploader identifier id'>uploader</span><span class='dot token'>.</span><span class='thumb identifier id'>thumb</span><span class='dot token'>.</span><span class='url identifier id'>url</span> <span class='comment val'># =&gt; '/url/to/thumb_my_file.png'   # size: 200x200</span>
</pre>
<p>
One important thing to remember is that process is called <b>before</b>
versions are created. This can cut down on processing cost.
</p>
<p>
It is possible to nest versions within versions:
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='MyUploader constant id'>MyUploader</span> <span class='lt op'>&lt;</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='Uploader constant id'>Uploader</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>

      <span class='version identifier id'>version</span> <span class='symbol val'>:animal</span> <span class='do do kw'>do</span>
        <span class='version identifier id'>version</span> <span class='symbol val'>:human</span>
        <span class='version identifier id'>version</span> <span class='symbol val'>:monkey</span>
        <span class='version identifier id'>version</span> <span class='symbol val'>:llama</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
</pre>
<h2>Making uploads work across form redisplays</h2>
<p>
Often you&#8217;ll notice that uploaded files disappear when a validation
fails. CarrierWave has a feature that makes it easy to remember the
uploaded file even in that case. Suppose your <tt>user</tt> model has an
uploader mounted on <tt>avatar</tt> file, just add a hidden field called
<tt>avatar_cache</tt>. In Rails, this would look like this:
</p>
<pre class="code">
    <span class='lt op'>&lt;</span><span class='string val'>% form_for </span><span class='@user ivar id'>@user</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='string val'>%&gt;
      &lt;p&gt;</span>
        <span class='lt op'>&lt;</span><span class='label identifier id'>label</span><span class='gt op'>&gt;</span><span class='My constant id'>My</span> <span class='Avatar constant id'>Avatar</span><span class='lt op'>&lt;</span><span class='regexp val'>/label&gt;
        &lt;%= f.file_field :avatar %&gt;
        &lt;%= f.hidden_field :avatar_cache %&gt;
      &lt;/</span><span class='p identifier id'>p</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='string val'>% end </span><span class='mod op'>%</span><span class='gt op'>&gt;</span>
</pre>
<p>
It might be a good idea to show th user that a file has been uploaded, in
the case of images, a small thumbnail would be a good indicator:
</p>
<pre class="code">
    <span class='lt op'>&lt;</span><span class='string val'>% form_for </span><span class='@user ivar id'>@user</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='string val'>%&gt;
      &lt;p&gt;</span>
        <span class='lt op'>&lt;</span><span class='label identifier id'>label</span><span class='gt op'>&gt;</span><span class='My constant id'>My</span> <span class='Avatar constant id'>Avatar</span><span class='lt op'>&lt;</span><span class='regexp val'>/label&gt;
        &lt;%= image_tag(@user.avatar.url) if @user.avatar %&gt;
        &lt;%= f.file_field :avatar %&gt;
        &lt;%= f.hidden_field :avatar_cache %&gt;
      &lt;/</span><span class='p identifier id'>p</span><span class='gt op'>&gt;</span>
    <span class='lt op'>&lt;</span><span class='string val'>% end </span><span class='mod op'>%</span><span class='gt op'>&gt;</span>
</pre>
<p>
NOTE: this feature currently requires write access to your filesystem. If
write access is unavailable (e.g. Heroku) you will not be able to upload
files. You can prevent CarrierWave from writing to the file system by
setting `CarrierWave.config[:cache_to_cache_dir] = false`. This will
however break redisplays of forms.
</p>
<h2>Providing a default path</h2>
<p>
In many cases, especially when working with images, it might be a good idea
to provide a default path, a fallback in case no file has been uploaded.
You can do this easily by overriding the <tt>default_path</tt> method in
your uploader:
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='MyUploader constant id'>MyUploader</span> <span class='lt op'>&lt;</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='Uploader constant id'>Uploader</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
      <span class='def def kw'>def</span> <span class='default_path identifier id'>default_path</span>
        <span class='string val'>&quot;images/fallback/&quot;</span> <span class='plus op'>+</span> <span class='lbrack token'>[</span><span class='version_name identifier id'>version_name</span><span class='comma token'>,</span> <span class='string val'>&quot;default.png&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>'_'</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
</pre>
<h2>Using Amazon S3</h2>
<p>
You&#8217;ll need to configure a bucket, access id and secret key like
this:
</p>
<pre class="code">
    <span class='CarrierWave constant id'>CarrierWave</span><span class='dot token'>.</span><span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:s3</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:access_key_id</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>'xxxxxx'</span>
    <span class='CarrierWave constant id'>CarrierWave</span><span class='dot token'>.</span><span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:s3</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:secret_access_key</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>'xxxxxx'</span>
    <span class='CarrierWave constant id'>CarrierWave</span><span class='dot token'>.</span><span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:s3</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:bucket</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='string val'>'name_of_bucket'</span>
</pre>
<p>
Do this in an initializer in Rails, and in a <tt>before_app_loads</tt>
block in Merb.
</p>
<p>
And then in your uploader, set the storage to :s3
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='AvatarUploader constant id'>AvatarUploader</span> <span class='lt op'>&lt;</span>
      <span class='storage identifier id'>storage</span> <span class='symbol val'>:s3</span>
    <span class='end end kw'>end</span>
</pre>
<p>
That&#8217;s it! You can still use the <tt>CarrierWave::Uploader#url</tt> method
to return the url to the file on Amazon S3
</p>
<h2>Using RMagick</h2>
<p>
If you&#8217;re uploading images, you&#8217;ll probably want to manipulate
them in some way, you might want to create thumbnail images for example.
CarrierWave comes with a small library to make manipulating images with
RMagick easier, you&#8217;ll need to include it in your Uploader:
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='AvatarUploader constant id'>AvatarUploader</span> <span class='lt op'>&lt;</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='Uploader constant id'>Uploader</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
      <span class='include identifier id'>include</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='RMagick constant id'>RMagick</span>
    <span class='end end kw'>end</span>
</pre>
<p>
The RMagick module gives you a few methods, like
<tt>CarrierWave::RMagick#crop_resized</tt> which manipulate the image file in some
way. You can set a <tt>process</tt> callback, which will call that method
any time a file is uploaded.
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='AvatarUploader constant id'>AvatarUploader</span> <span class='lt op'>&lt;</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='Uploader constant id'>Uploader</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
      <span class='include identifier id'>include</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='RMagick constant id'>RMagick</span>

      <span class='process identifier id'>process</span> <span class='symbol val'>:crop_resized</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='integer val'>200</span><span class='comma token'>,</span> <span class='integer val'>200</span><span class='rbrack token'>]</span>
      <span class='process identifier id'>process</span> <span class='symbol val'>:convert</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'png'</span>

      <span class='def def kw'>def</span> <span class='filename identifier id'>filename</span>
        <span class='super super kw'>super</span> <span class='plus op'>+</span> <span class='string val'>'.png'</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
</pre>
<p>
Check out the manipulate! method, which makes it easy for you to write your
own manipulation methods.
</p>
<h2>Using ImageScience</h2>
<p>
ImageScience works the same way as RMagick.
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='AvatarUploader constant id'>AvatarUploader</span> <span class='lt op'>&lt;</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='Uploader constant id'>Uploader</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
      <span class='include identifier id'>include</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='ImageScience constant id'>ImageScience</span>

      <span class='process identifier id'>process</span> <span class='symbol val'>:crop_resized</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='integer val'>200</span><span class='comma token'>,</span> <span class='integer val'>200</span><span class='rbrack token'>]</span>
    <span class='end end kw'>end</span>
</pre>
<h2>Migrating</h2>
<p>
If you are using Paperclip, you can use the provided compatibility module:
</p>
<pre class="code">
    <span class='class class kw'>class</span> <span class='AvatarUploader constant id'>AvatarUploader</span> <span class='lt op'>&lt;</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='Uploader constant id'>Uploader</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
      <span class='include identifier id'>include</span> <span class='CarrierWave constant id'>CarrierWave</span><span class='colon2 op'>::</span><span class='Compatibility constant id'>Compatibility</span><span class='colon2 op'>::</span><span class='Paperclip constant id'>Paperclip</span>
    <span class='end end kw'>end</span>
</pre>
<p>
See the documentation for <tt>Paperclip::Compatibility::Paperclip</tt> for more
detaills.
</p>
<p>
Be sure to use mount_on to specify the correct column:
</p>
<pre class="code">
    <span class='mount_uploader identifier id'>mount_uploader</span> <span class='symbol val'>:avatar</span><span class='comma token'>,</span> <span class='AvatarUploader constant id'>AvatarUploader</span><span class='comma token'>,</span> <span class='symbol val'>:mount_on</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:avatar_file_name</span>
</pre>
<p>
Unfortunately AttachmentFoo differs too much in philosophy for there to be
a sensible compatibility mode. Patches for migrating from other solutions
will be happily accepted.
</p>
<h2>Documentation</h2>
<p>
Full rdoc documentation is {available at
Rubyforge}[http://carrierwave.rubyforge.org/].
</p>
<h2>Read the source</h2>
<p>
CarrierWave is still young, but most of it is pretty well documented. It is
also extensively specced, and there are cucumber features for some common
use cases. Just dig in and look at the source for more in-depth explanation
of what things are doing.
</p>

</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> ©2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>