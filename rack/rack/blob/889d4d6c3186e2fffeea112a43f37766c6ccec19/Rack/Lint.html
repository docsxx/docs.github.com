<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>rack's rack - Class: Rack::Lint - GitHub Documentation</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="">

<link rel="search" type="application/opensearchdescription+xml" href="http://github.com/opensearch.xml" title="GitHub">
<link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub">
<link href="http://assets0.github.com/stylesheets/bundle.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://github.com/feeds/rack/commits/rack/master" rel="alternate" title="Recent Commits to rack:master" type="application/atom+xml">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://assets3.github.com/javascripts/bundle.js"></script>              
<script src="../app.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="http://docs.github.com/javascripts/md5.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/repos.js"></script>
<script type="text/javascript" src="http://docs.github.com/javascripts/commits.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    if (typeof skipHeaders != 'undefined') return;
    
    GitHubRepo.init("rack", "rack", function(){ 
      GitHubRepo.links = " <a id='namespaces_button' rel='rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19' href='#'><img class='button' src='http://docs.github.com/namespaces_button.png' alt='Modules and Classes'/></a> ";
      GitHubRepo.links += " <a id='methods_button' rel='rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19' href='#'><img class='button' src='http://docs.github.com/methods_button.png' alt='Methods'/></a> ";
      $("#repo").html(GitHubRepo.content());
      $('#namespaces_button').click(function(){
        var url="/"+$(this).attr('rel')+"/namespaces/";
        $.gitbox(url);
        return false;
      });    
      $('#methods_button').click(function(){
        var url="/"+$(this).attr('rel')+"/methods/";
        $.gitbox(url);
        return false;
      });        
    });
    GitHubCommit.init("rack", "rack", "889d4d6c3186e2fffeea112a43f37766c6ccec19", function(){ 
      $("#commit").html(GitHubCommit.content());
    });
  });
</script>

    <link rel="stylesheet" href="../style.css" type="text/css" charset="utf-8" />
  </head>
  <body>    
    
    
    
        <div id="main" style="padding-bottom:8em;">
      <div id="header">
        <div class="site">
          <div class="logo">
            <a href="http://github.com/"><img src="http://github.com/images/modules/header/logov3.png" alt="github"></a>
          </div>          
          <div class="topsearch">
            <form action="http://github.com/search" id="top_search_form" method="get">
              <input class="search" name="q" type="search"> <input value="Search" type="submit">
            </form>
            <div class="links">
              <a href="http://github.com/repositories">Browse</a> | <a href="http://github.com/guides">Guides</a> | <a href="http://github.com/search">Advanced</a>
            </div>
          </div>
          <div class="actions">
            <a href="http://github.com">Home</a>
            <a href="http://github.com/plans"><b><u>Pricing and Signup</u></b></a>
            <a href="http://docs.github.com/">Documentation</a>
            <a href="https://github.com/login">Login</a>
          </div>                  
        </div>
      </div>    
                                                  
      <div id="repo_menu">
        <div class="site">
          <ul>          
            <li class=""><a href="http://github.com/rack/rack/tree/">Source</a></li>
            <li class=""><a href="http://github.com/rack/rack/commits/">Commits</a></li>            
            <li class=""><a href="http://github.com/rack/rack/network">Network</a></li>            
            <li class=""><a href="http://github.com/rack/rack/issues">Issues</a></li>
            <li class=""><a href="http://wiki.github.com/rack/rack">Wiki</a></li>
            <li class=""><a href="http://github.com/rack/rack/graphs">Graphs</a></li>                    
            <li class="active"><a href="/rack/rack">Documentation</a></li>
          </ul>
        </div>
      </div>

      <div id="repo_sub_menu">
        <div class="site">
          <div class="joiner"></div>      
        </div>
      </div>

      <div class="site">  
        <div id="repos">
          <div id="repo" class="repo public">
            <div class="title">
              <div class="path">
                <a href="http://github.com/rack">rack</a> / <b><a href="http://github.com/rack/rack/tree">rack</a></b>        
                <a id="namespaces_button" rel="rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19" href="#"><img class="button" src="http://docs.github.com/namespaces_button.png" alt="Modules and Classes"/></a>
                <a id="methods_button" rel="rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19" href="#"><img class="button" src="http://docs.github.com/methods_button.png" alt="Methods"/></a>
              </div>
            </div>            
          </div>
          <div id="commit">
          </div> 
          <br/>                                       
          <div id="content">
            <div class="wikistyle">
  <div class="section class Rack_Lint">
  <h1>Class: Rack::Lint</h1>
  <div class="section mixins">
  <h2>Included Modules</h2>
  <p><a title="Rack::Lint::Assertion" href="Lint/Assertion.html">Rack::Lint::Assertion</a></p>
</div><div class="section docstring">
  <p>
Rack::Lint validates your application and the requests and responses
according to the Rack spec.
</p>

</div><div class="section constants">
  
</div><div class="section constructor">
<h2>Constructor</h2>
  <div id="initialize-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>initialize</span><span class='args'>(app)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 8</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L8">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">8
9
10</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='app identifier id'>app</span><span class='rparen token'>)</span>
  <span class='@app ivar id'>@app</span> <span class='assign token'>=</span> <span class='app identifier id'>app</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
</div>  <div class="section visibilitygroup">
      <div class="section methodsummary">
    <h2>Public Instance Method Summary</h2>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#_call-instance_method">#_call</span><span class='args'>(env)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#call-instance_method">#call</span><span class='args'>(env = nil)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
This specification aims to formalize the Rack protocol.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#check_content_length-instance_method">#check_content_length</span><span class='args'>(status, headers, env)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h3>The Content-Length.</h3>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#check_content_type-instance_method">#check_content_type</span><span class='args'>(status, headers)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h3>The Content-Type.</h3>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#check_env-instance_method">#check_env</span><span class='args'>(env)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h2>The Environment.</h2>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#check_error-instance_method">#check_error</span><span class='args'>(error)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h3>The Error Stream.</h3>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#check_headers-instance_method">#check_headers</span><span class='args'>(header)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h3>The Headers.</h3>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#check_input-instance_method">#check_input</span><span class='args'>(input)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h3>The Input Stream.</h3>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#check_status-instance_method">#check_status</span><span class='args'>(status)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h2>The Response</h2>
<h3>The Status.</h3>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#close-instance_method">#close</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        
        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href="#each-instance_method">#each</span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <h3>The Body.</h3>

        
      </td>
    </tr>
  
</table><div class="included">
  
  <div>
    <h2>Public Instance Methods Included from <a title="Rack::Lint::Assertion" href="Lint/Assertion.html">Rack::Lint::Assertion</a></h2>
    <p><span class='name'><a title="assert" href="Lint/Assertion.html#assert-instance_method">assert</a></span></p>
  </div>
  
</div>
<div class="clear"></div>
  </div>
<div class="section methoddetails">
  <h2>Public Instance Method Details</h2>
  
    <div class="method">
      <div class="method_header">
  <h3>_call</h3>
</div><div id="_call-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>_call</span><span class='args'>(env)</span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 38</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L38">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='_call identifier id'>_call</span><span class='lparen token'>(</span><span class='env identifier id'>env</span><span class='rparen token'>)</span>
  <span class='comment val'>## It takes exactly one argument, the *environment*</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;No env given&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='env identifier id'>env</span> <span class='rbrace token'>}</span>
  <span class='check_env identifier id'>check_env</span> <span class='env identifier id'>env</span>

  <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>'rack.input'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='InputWrapper constant id'>InputWrapper</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>'rack.input'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>'rack.errors'</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='ErrorWrapper constant id'>ErrorWrapper</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>'rack.errors'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>

  <span class='comment val'>## and returns an Array of exactly three values:</span>
  <span class='status identifier id'>status</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='comma token'>,</span> <span class='@body ivar id'>@body</span> <span class='assign token'>=</span> <span class='@app ivar id'>@app</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='env identifier id'>env</span><span class='rparen token'>)</span>
  <span class='comment val'>## The *status*,</span>
  <span class='check_status identifier id'>check_status</span> <span class='status identifier id'>status</span>
  <span class='comment val'>## the *headers*,</span>
  <span class='check_headers identifier id'>check_headers</span> <span class='headers identifier id'>headers</span>
  <span class='comment val'>## and the *body*.</span>
  <span class='check_content_type identifier id'>check_content_type</span> <span class='status identifier id'>status</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span>
  <span class='check_content_length identifier id'>check_content_length</span> <span class='status identifier id'>status</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='comma token'>,</span> <span class='env identifier id'>env</span>
  <span class='lbrack token'>[</span><span class='status identifier id'>status</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>call</h3>
</div><div id="call-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>call</span><span class='args'>(env = nil)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
This specification aims to formalize the Rack protocol. You can (and
should) use Rack::Lint to enforce it.
</p>
<p>
When you develop middleware, be sure to add a Lint before and after to
catch all mistakes.
</p>
<h1>Rack applications</h1>
<p>
A Rack application is an Ruby object (not a class) that responds to
<tt>call</tt>.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 34</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L34">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">34
35
36</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='env identifier id'>env</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='dup identifier id'>dup</span><span class='dot token'>.</span><span class='_call identifier id'>_call</span><span class='lparen token'>(</span><span class='env identifier id'>env</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>check_content_length</h3>
</div><div id="check_content_length-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>check_content_length</span><span class='args'>(status, headers, env)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h3>The Content-Length</h3>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 455</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L455">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='check_content_length identifier id'>check_content_length</span><span class='lparen token'>(</span><span class='status identifier id'>status</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='comma token'>,</span> <span class='env identifier id'>env</span><span class='rparen token'>)</span>
  <span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span> <span class='eq op'>==</span> <span class='string val'>'content-length'</span>
      <span class='comment val'>## There must not be a &lt;tt&gt;Content-Length&lt;/tt&gt; header when the</span>
      <span class='comment val'>## +Status+ is 1xx, 204 or 304.</span>
      <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Content-Length header found in #{status} response, not allowed&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
        <span class='not not kw'>not</span> <span class='Rack constant id'>Rack</span><span class='colon2 op'>::</span><span class='Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='STATUS_WITH_NO_ENTITY_BODY constant id'>STATUS_WITH_NO_ENTITY_BODY</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
      <span class='rbrace token'>}</span>

      <span class='bytes identifier id'>bytes</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
      <span class='string_body identifier id'>string_body</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>

      <span class='if if kw'>if</span> <span class='@body ivar id'>@body</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:to_ary</span><span class='rparen token'>)</span>
        <span class='@body ivar id'>@body</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='part identifier id'>part</span><span class='bitor op'>|</span>
          <span class='unless unless kw'>unless</span> <span class='part identifier id'>part</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='String constant id'>String</span><span class='rparen token'>)</span>
            <span class='string_body identifier id'>string_body</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
            <span class='break break kw'>break</span>
          <span class='end end kw'>end</span>

          <span class='bytes identifier id'>bytes</span> <span class='opasgn op'>+=</span> <span class='Rack constant id'>Rack</span><span class='colon2 op'>::</span><span class='Utils constant id'>Utils</span><span class='dot token'>.</span><span class='bytesize identifier id'>bytesize</span><span class='lparen token'>(</span><span class='part identifier id'>part</span><span class='rparen token'>)</span>
        <span class='rbrace token'>}</span>

        <span class='if if kw'>if</span> <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;REQUEST_METHOD&quot;</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;HEAD&quot;</span>
          <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;Response body was given for HEAD request, but should be empty&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
            <span class='bytes identifier id'>bytes</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
          <span class='rbrace token'>}</span>
        <span class='else else kw'>else</span>
          <span class='if if kw'>if</span> <span class='string_body identifier id'>string_body</span>
            <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Content-Length header was #{value}, but should be #{bytes}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
              <span class='value identifier id'>value</span> <span class='eq op'>==</span> <span class='bytes identifier id'>bytes</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
            <span class='rbrace token'>}</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>

      <span class='return return kw'>return</span>
    <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>check_content_type</h3>
</div><div id="check_content_type-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>check_content_type</span><span class='args'>(status, headers)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h3>The Content-Type</h3>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 437</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L437">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='check_content_type identifier id'>check_content_type</span><span class='lparen token'>(</span><span class='status identifier id'>status</span><span class='comma token'>,</span> <span class='headers identifier id'>headers</span><span class='rparen token'>)</span>
  <span class='headers identifier id'>headers</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='comment val'>## There must be a &lt;tt&gt;Content-Type&lt;/tt&gt;, except when the</span>
    <span class='comment val'>## +Status+ is 1xx, 204 or 304, in which case there must be none</span>
    <span class='comment val'>## given.</span>
    <span class='if if kw'>if</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span> <span class='eq op'>==</span> <span class='string val'>&quot;content-type&quot;</span>
      <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Content-Type header found in #{status} response, not allowed&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
        <span class='not not kw'>not</span> <span class='Rack constant id'>Rack</span><span class='colon2 op'>::</span><span class='Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='STATUS_WITH_NO_ENTITY_BODY constant id'>STATUS_WITH_NO_ENTITY_BODY</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
      <span class='rbrace token'>}</span>
      <span class='return return kw'>return</span>
    <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;No Content-Type header found&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='Rack constant id'>Rack</span><span class='colon2 op'>::</span><span class='Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='STATUS_WITH_NO_ENTITY_BODY constant id'>STATUS_WITH_NO_ENTITY_BODY</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>check_env</h3>
</div><div id="check_env-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>check_env</span><span class='args'>(env)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h2>The Environment</h2>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 59</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L59">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='check_env identifier id'>check_env</span><span class='lparen token'>(</span><span class='env identifier id'>env</span><span class='rparen token'>)</span>
  <span class='comment val'>## The environment must be an true instance of Hash (no</span>
  <span class='comment val'>## subclassing allowed) that includes CGI-like headers.</span>
  <span class='comment val'>## The application is free to modify the environment.</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;env #{env.inspect} is not a Hash, but #{env.class}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='env identifier id'>env</span><span class='dot token'>.</span><span class='instance_of? fid id'>instance_of?</span> <span class='Hash constant id'>Hash</span>
  <span class='rbrace token'>}</span>

  <span class='comment val'>##</span>
  <span class='comment val'>## The environment is required to include these variables</span>
  <span class='comment val'>## (adopted from PEP333), except when they'd be empty, but see</span>
  <span class='comment val'>## below.</span>

  <span class='comment val'>## &lt;tt&gt;REQUEST_METHOD&lt;/tt&gt;:: The HTTP request method, such as</span>
  <span class='comment val'>##                           &quot;GET&quot; or &quot;POST&quot;. This cannot ever</span>
  <span class='comment val'>##                           be an empty string, and so is</span>
  <span class='comment val'>##                           always required.</span>

  <span class='comment val'>## &lt;tt&gt;SCRIPT_NAME&lt;/tt&gt;:: The initial portion of the request</span>
  <span class='comment val'>##                        URL's &quot;path&quot; that corresponds to the</span>
  <span class='comment val'>##                        application object, so that the</span>
  <span class='comment val'>##                        application knows its virtual</span>
  <span class='comment val'>##                        &quot;location&quot;. This may be an empty</span>
  <span class='comment val'>##                        string, if the application corresponds</span>
  <span class='comment val'>##                        to the &quot;root&quot; of the server.</span>

  <span class='comment val'>## &lt;tt&gt;PATH_INFO&lt;/tt&gt;:: The remainder of the request URL's</span>
  <span class='comment val'>##                      &quot;path&quot;, designating the virtual</span>
  <span class='comment val'>##                      &quot;location&quot; of the request's target</span>
  <span class='comment val'>##                      within the application. This may be an</span>
  <span class='comment val'>##                      empty string, if the request URL targets</span>
  <span class='comment val'>##                      the application root and does not have a</span>
  <span class='comment val'>##                      trailing slash. This value may be</span>
  <span class='comment val'>##                      percent-encoded when I originating from</span>
  <span class='comment val'>##                      a URL.</span>

  <span class='comment val'>## &lt;tt&gt;QUERY_STRING&lt;/tt&gt;:: The portion of the request URL that</span>
  <span class='comment val'>##                         follows the &lt;tt&gt;?&lt;/tt&gt;, if any. May be</span>
  <span class='comment val'>##                         empty, but is always required!</span>

  <span class='comment val'>## &lt;tt&gt;SERVER_NAME&lt;/tt&gt;, &lt;tt&gt;SERVER_PORT&lt;/tt&gt;:: When combined with &lt;tt&gt;SCRIPT_NAME&lt;/tt&gt; and &lt;tt&gt;PATH_INFO&lt;/tt&gt;, these variables can be used to complete the URL. Note, however, that &lt;tt&gt;HTTP_HOST&lt;/tt&gt;, if present, should be used in preference to &lt;tt&gt;SERVER_NAME&lt;/tt&gt; for reconstructing the request URL.  &lt;tt&gt;SERVER_NAME&lt;/tt&gt; and &lt;tt&gt;SERVER_PORT&lt;/tt&gt; can never be empty strings, and so are always required.</span>

  <span class='comment val'>## &lt;tt&gt;HTTP_&lt;/tt&gt; Variables:: Variables corresponding to the</span>
  <span class='comment val'>##                            client-supplied HTTP request</span>
  <span class='comment val'>##                            headers (i.e., variables whose</span>
  <span class='comment val'>##                            names begin with &lt;tt&gt;HTTP_&lt;/tt&gt;). The</span>
  <span class='comment val'>##                            presence or absence of these</span>
  <span class='comment val'>##                            variables should correspond with</span>
  <span class='comment val'>##                            the presence or absence of the</span>
  <span class='comment val'>##                            appropriate HTTP header in the</span>
  <span class='comment val'>##                            request.</span>

  <span class='comment val'>## In addition to this, the Rack environment must include these</span>
  <span class='comment val'>## Rack-specific variables:</span>

  <span class='comment val'>## &lt;tt&gt;rack.version&lt;/tt&gt;:: The Array [1,0], representing this version of Rack.</span>
  <span class='comment val'>## &lt;tt&gt;rack.url_scheme&lt;/tt&gt;:: +http+ or +https+, depending on the request URL.</span>
  <span class='comment val'>## &lt;tt&gt;rack.input&lt;/tt&gt;:: See below, the input stream.</span>
  <span class='comment val'>## &lt;tt&gt;rack.errors&lt;/tt&gt;:: See below, the error stream.</span>
  <span class='comment val'>## &lt;tt&gt;rack.multithread&lt;/tt&gt;:: true if the application object may be simultaneously invoked by another thread in the same process, false otherwise.</span>
  <span class='comment val'>## &lt;tt&gt;rack.multiprocess&lt;/tt&gt;:: true if an equivalent application object may be simultaneously invoked by another process, false otherwise.</span>
  <span class='comment val'>## &lt;tt&gt;rack.run_once&lt;/tt&gt;:: true if the server expects (but does not guarantee!) that the application will only be invoked this one time during the life of its containing process. Normally, this will only be true for a server based on CGI (or something similar).</span>
  <span class='comment val'>##</span>

  <span class='comment val'>## Additional environment specifications have approved to</span>
  <span class='comment val'>## standardized middleware APIs.  None of these are required to</span>
  <span class='comment val'>## be implemented by the server.</span>

  <span class='comment val'>## &lt;tt&gt;rack.session&lt;/tt&gt;:: A hash like interface for storing request session data.</span>
  <span class='comment val'>##                         The store must implement:</span>
  <span class='if if kw'>if</span> <span class='session identifier id'>session</span> <span class='assign token'>=</span> <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>'rack.session'</span><span class='rbrack token'>]</span>
    <span class='comment val'>##                         store(key, value)         (aliased as []=);</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;session #{session.inspect} must respond to store and []=&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='session identifier id'>session</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:store</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='session identifier id'>session</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:[]=</span><span class='rparen token'>)</span>
    <span class='rbrace token'>}</span>

    <span class='comment val'>##                         fetch(key, default = nil) (aliased as []);</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;session #{session.inspect} must respond to fetch and []&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='session identifier id'>session</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:fetch</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='session identifier id'>session</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:[]</span><span class='rparen token'>)</span>
    <span class='rbrace token'>}</span>

    <span class='comment val'>##                         delete(key);</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;session #{session.inspect} must respond to delete&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='session identifier id'>session</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:delete</span><span class='rparen token'>)</span>
    <span class='rbrace token'>}</span>

    <span class='comment val'>##                         clear;</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;session #{session.inspect} must respond to clear&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='session identifier id'>session</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:clear</span><span class='rparen token'>)</span>
    <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>

  <span class='comment val'>## The server or the application can store their own data in the</span>
  <span class='comment val'>## environment, too.  The keys must contain at least one dot,</span>
  <span class='comment val'>## and should be prefixed uniquely.  The prefix &lt;tt&gt;rack.&lt;/tt&gt;</span>
  <span class='comment val'>## is reserved for use with the Rack core distribution and other</span>
  <span class='comment val'>## accepted specifications and must not be used otherwise.</span>
  <span class='comment val'>##</span>

  <span class='dstring node'>%w[REQUEST_METHOD SERVER_NAME SERVER_PORT
     QUERY_STRING
     rack.version rack.input rack.errors
     rack.multithread rack.multiprocess rack.run_once]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='header identifier id'>header</span><span class='bitor op'>|</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;env missing required key #{header}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='env identifier id'>env</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='header identifier id'>header</span> <span class='rbrace token'>}</span>
  <span class='rbrace token'>}</span>

  <span class='comment val'>## The environment must not contain the keys</span>
  <span class='comment val'>## &lt;tt&gt;HTTP_CONTENT_TYPE&lt;/tt&gt; or &lt;tt&gt;HTTP_CONTENT_LENGTH&lt;/tt&gt;</span>
  <span class='comment val'>## (use the versions without &lt;tt&gt;HTTP_&lt;/tt&gt;).</span>
  <span class='dstring node'>%w[HTTP_CONTENT_TYPE HTTP_CONTENT_LENGTH]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='header identifier id'>header</span><span class='bitor op'>|</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;env contains #{header}, must use #{header[5,-1]}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='not not kw'>not</span> <span class='env identifier id'>env</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='header identifier id'>header</span>
    <span class='rbrace token'>}</span>
  <span class='rbrace token'>}</span>

  <span class='comment val'>## The CGI keys (named without a period) must have String values.</span>
  <span class='env identifier id'>env</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='next next kw'>next</span>  <span class='if if_mod kw'>if</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='string val'>&quot;.&quot;</span>   <span class='comment val'># Skip extensions</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;env variable #{key} has non-string value #{value.inspect}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='instance_of? fid id'>instance_of?</span> <span class='String constant id'>String</span>
    <span class='rbrace token'>}</span>
  <span class='rbrace token'>}</span>

  <span class='comment val'>##</span>
  <span class='comment val'>## There are the following restrictions:</span>

  <span class='comment val'>## * &lt;tt&gt;rack.version&lt;/tt&gt; must be an array of Integers.</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;rack.version must be an Array, was #{env[&quot;rack.version&quot;].class}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;rack.version&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='instance_of? fid id'>instance_of?</span> <span class='Array constant id'>Array</span>
  <span class='rbrace token'>}</span>
  <span class='comment val'>## * &lt;tt&gt;rack.url_scheme&lt;/tt&gt; must either be +http+ or +https+.</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;rack.url_scheme unknown: #{env[&quot;rack.url_scheme&quot;].inspect}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='dstring node'>%w[http https]</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;rack.url_scheme&quot;</span><span class='rbrack token'>]</span>
  <span class='rbrace token'>}</span>

  <span class='comment val'>## * There must be a valid input stream in &lt;tt&gt;rack.input&lt;/tt&gt;.</span>
  <span class='check_input identifier id'>check_input</span> <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;rack.input&quot;</span><span class='rbrack token'>]</span>
  <span class='comment val'>## * There must be a valid error stream in &lt;tt&gt;rack.errors&lt;/tt&gt;.</span>
  <span class='check_error identifier id'>check_error</span> <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;rack.errors&quot;</span><span class='rbrack token'>]</span>

  <span class='comment val'>## * The &lt;tt&gt;REQUEST_METHOD&lt;/tt&gt; must be a valid token.</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;REQUEST_METHOD unknown: #{env[&quot;REQUEST_METHOD&quot;]}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;REQUEST_METHOD&quot;</span><span class='rbrack token'>]</span> <span class='match op'>=~</span> <span class='regexp val'>/\A[0-9A-Za-z!\#$%&amp;'*+.^_`|~-]+\z/</span>
  <span class='rbrace token'>}</span>

  <span class='comment val'>## * The &lt;tt&gt;SCRIPT_NAME&lt;/tt&gt;, if non-empty, must start with &lt;tt&gt;/&lt;/tt&gt;</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;SCRIPT_NAME must start with /&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='notop op'>!</span><span class='env identifier id'>env</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>&quot;SCRIPT_NAME&quot;</span><span class='rparen token'>)</span> <span class='orop op'>||</span>
    <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;SCRIPT_NAME&quot;</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;&quot;</span> <span class='orop op'>||</span>
    <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;SCRIPT_NAME&quot;</span><span class='rbrack token'>]</span> <span class='match op'>=~</span> <span class='regexp val'>/\A\//</span>
  <span class='rbrace token'>}</span>
  <span class='comment val'>## * The &lt;tt&gt;PATH_INFO&lt;/tt&gt;, if non-empty, must start with &lt;tt&gt;/&lt;/tt&gt;</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;PATH_INFO must start with /&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='notop op'>!</span><span class='env identifier id'>env</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>&quot;PATH_INFO&quot;</span><span class='rparen token'>)</span> <span class='orop op'>||</span>
    <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;PATH_INFO&quot;</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;&quot;</span> <span class='orop op'>||</span>
    <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;PATH_INFO&quot;</span><span class='rbrack token'>]</span> <span class='match op'>=~</span> <span class='regexp val'>/\A\//</span>
  <span class='rbrace token'>}</span>
  <span class='comment val'>## * The &lt;tt&gt;CONTENT_LENGTH&lt;/tt&gt;, if given, must consist of digits only.</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Invalid CONTENT_LENGTH: #{env[&quot;CONTENT_LENGTH&quot;]}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='notop op'>!</span><span class='env identifier id'>env</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>&quot;CONTENT_LENGTH&quot;</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;CONTENT_LENGTH&quot;</span><span class='rbrack token'>]</span> <span class='match op'>=~</span> <span class='regexp val'>/\A\d+\z/</span>
  <span class='rbrace token'>}</span>

  <span class='comment val'>## * One of &lt;tt&gt;SCRIPT_NAME&lt;/tt&gt; or &lt;tt&gt;PATH_INFO&lt;/tt&gt; must be</span>
  <span class='comment val'>##   set.  &lt;tt&gt;PATH_INFO&lt;/tt&gt; should be &lt;tt&gt;/&lt;/tt&gt; if</span>
  <span class='comment val'>##   &lt;tt&gt;SCRIPT_NAME&lt;/tt&gt; is empty.</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;One of SCRIPT_NAME or PATH_INFO must be set (make PATH_INFO '/' if SCRIPT_NAME is empty)&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;SCRIPT_NAME&quot;</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;PATH_INFO&quot;</span><span class='rbrack token'>]</span>
  <span class='rbrace token'>}</span>
  <span class='comment val'>##   &lt;tt&gt;SCRIPT_NAME&lt;/tt&gt; never should be &lt;tt&gt;/&lt;/tt&gt;, but instead be empty.</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;SCRIPT_NAME cannot be '/', make it '' and PATH_INFO '/'&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>&quot;SCRIPT_NAME&quot;</span><span class='rbrack token'>]</span> <span class='neq op'>!=</span> <span class='string val'>&quot;/&quot;</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>check_error</h3>
</div><div id="check_error-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>check_error</span><span class='args'>(error)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h3>The Error Stream</h3>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 353</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L353">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">353
354
355
356
357
358
359
360</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='check_error identifier id'>check_error</span><span class='lparen token'>(</span><span class='error identifier id'>error</span><span class='rparen token'>)</span>
  <span class='comment val'>## The error stream must respond to +puts+, +write+ and +flush+.</span>
  <span class='lbrack token'>[</span><span class='symbol val'>:puts</span><span class='comma token'>,</span> <span class='symbol val'>:write</span><span class='comma token'>,</span> <span class='symbol val'>:flush</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='method identifier id'>method</span><span class='bitor op'>|</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;rack.error #{error} does not respond to ##{method}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='error identifier id'>error</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='method identifier id'>method</span>
    <span class='rbrace token'>}</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>check_headers</h3>
</div><div id="check_headers-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>check_headers</span><span class='args'>(header)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h3>The Headers</h3>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 402</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L402">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='check_headers identifier id'>check_headers</span><span class='lparen token'>(</span><span class='header identifier id'>header</span><span class='rparen token'>)</span>
  <span class='comment val'>## The header must respond to +each+, and yield values of key and value.</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;headers object should respond to #each, but doesn't (got #{header.class} as headers)&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
     <span class='header identifier id'>header</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='symbol val'>:each</span>
  <span class='rbrace token'>}</span>
  <span class='header identifier id'>header</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='comment val'>## The header keys must be Strings.</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;header key must be a string, was #{key.class}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='instance_of? fid id'>instance_of?</span> <span class='String constant id'>String</span>
    <span class='rbrace token'>}</span>
    <span class='comment val'>## The header must not contain a +Status+ key,</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;header must not contain Status&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span> <span class='neq op'>!=</span> <span class='string val'>&quot;status&quot;</span> <span class='rbrace token'>}</span>
    <span class='comment val'>## contain keys with &lt;tt&gt;:&lt;/tt&gt; or newlines in their name,</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;header names must not contain : or \\n&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='key identifier id'>key</span> <span class='nmatch op'>!~</span> <span class='regexp val'>/[:\n]/</span> <span class='rbrace token'>}</span>
    <span class='comment val'>## contain keys names that end in &lt;tt&gt;-&lt;/tt&gt; or &lt;tt&gt;_&lt;/tt&gt;,</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;header names must not end in - or _&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='key identifier id'>key</span> <span class='nmatch op'>!~</span> <span class='regexp val'>/[-_]\z/</span> <span class='rbrace token'>}</span>
    <span class='comment val'>## but only contain keys that consist of</span>
    <span class='comment val'>## letters, digits, &lt;tt&gt;_&lt;/tt&gt; or &lt;tt&gt;-&lt;/tt&gt; and start with a letter.</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;invalid header name: #{key}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='key identifier id'>key</span> <span class='match op'>=~</span> <span class='regexp val'>/\A[a-zA-Z][a-zA-Z0-9_-]*\z/</span> <span class='rbrace token'>}</span>

    <span class='comment val'>## The values of the header must be Strings,</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;a header value must be a String, but the value of &quot;</span> <span class='plus op'>+</span>
      <span class='dstring node'>&quot;'#{key}' is a #{value.class}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span> <span class='String constant id'>String</span> <span class='rbrace token'>}</span>
    <span class='comment val'>## consisting of lines (for multiple header values, e.g. multiple</span>
    <span class='comment val'>## &lt;tt&gt;Set-Cookie&lt;/tt&gt; values) seperated by &quot;\n&quot;.</span>
    <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>&quot;\n&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='item identifier id'>item</span><span class='bitor op'>|</span>
      <span class='comment val'>## The lines must not contain characters below 037.</span>
      <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;invalid header value #{key}: #{item.inspect}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
        <span class='item identifier id'>item</span> <span class='nmatch op'>!~</span> <span class='regexp val'>/[\000-\037]/</span>
      <span class='rbrace token'>}</span>
    <span class='rbrace token'>}</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>check_input</h3>
</div><div id="check_input-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>check_input</span><span class='args'>(input)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h3>The Input Stream</h3>
<p>
The input stream is an IO-like object which contains the raw HTTP POST
data.
</p>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 237</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L237">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='check_input identifier id'>check_input</span><span class='lparen token'>(</span><span class='input identifier id'>input</span><span class='rparen token'>)</span>
  <span class='comment val'>## When applicable, its external encoding must be &quot;ASCII-8BIT&quot; and it</span>
  <span class='comment val'>## must be opened in binary mode, for Ruby 1.9 compatibility.</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;rack.input #{input} does not have ASCII-8BIT as its external encoding&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='input identifier id'>input</span><span class='dot token'>.</span><span class='external_encoding identifier id'>external_encoding</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='eq op'>==</span> <span class='string val'>&quot;ASCII-8BIT&quot;</span>
  <span class='rbrace token'>}</span> <span class='if if_mod kw'>if</span> <span class='input identifier id'>input</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:external_encoding</span><span class='rparen token'>)</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;rack.input #{input} is not opened in binary mode&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
    <span class='input identifier id'>input</span><span class='dot token'>.</span><span class='binmode? fid id'>binmode?</span>
  <span class='rbrace token'>}</span> <span class='if if_mod kw'>if</span> <span class='input identifier id'>input</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:binmode?</span><span class='rparen token'>)</span>
  
  <span class='comment val'>## The input stream must respond to +gets+, +each+, +read+ and +rewind+.</span>
  <span class='lbrack token'>[</span><span class='symbol val'>:gets</span><span class='comma token'>,</span> <span class='symbol val'>:each</span><span class='comma token'>,</span> <span class='symbol val'>:read</span><span class='comma token'>,</span> <span class='symbol val'>:rewind</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='method identifier id'>method</span><span class='bitor op'>|</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;rack.input #{input} does not respond to ##{method}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='input identifier id'>input</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span> <span class='method identifier id'>method</span>
    <span class='rbrace token'>}</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>check_status</h3>
</div><div id="check_status-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>check_status</span><span class='args'>(status)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h2>The Response</h2>
<h3>The Status</h3>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 395</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L395">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">395
396
397
398
399</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='check_status identifier id'>check_status</span><span class='lparen token'>(</span><span class='status identifier id'>status</span><span class='rparen token'>)</span>
  <span class='comment val'>## This is an HTTP status. When parsed as integer (+to_i+), it must be</span>
  <span class='comment val'>## greater than or equal to 100.</span>
  <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;Status must be &gt;=100 seen as integer&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='status identifier id'>status</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span> <span class='geq op'>&gt;=</span> <span class='integer val'>100</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>close</h3>
</div><div id="close-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>close</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 532</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L532">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">532
533
534
535</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='close identifier id'>close</span>
  <span class='@closed ivar id'>@closed</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='@body ivar id'>@body</span><span class='dot token'>.</span><span class='close identifier id'>close</span>  <span class='if if_mod kw'>if</span> <span class='@body ivar id'>@body</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:close</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>each</h3>
</div><div id="each-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>each</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <h3>The Body</h3>

</div></div>
<div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="files" style="display:none">
    <div class="file">
      <div class="meta">
        <div class="info">
          <span>File 'lib/rack/lint.rb', line 496</span>
        </div>
        <div class="actions">      
          <a id="raw-url" href="http://github.com/rack/rack/blob/889d4d6c3186e2fffeea112a43f37766c6ccec19/lib/rack/lint.rb#L496">raw</a>      
        </div>
      </div>
            
      <div class="data syntax">    
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr>
              <td>            
                <pre class="line_numbers">496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530</pre>
              </td>
              <td width="100%">                    
                <div class="highlight"><pre class="code"><span class='def def kw'>def</span> <span class='each identifier id'>each</span>
  <span class='@closed ivar id'>@closed</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='comment val'>## The Body must respond to +each+</span>
  <span class='@body ivar id'>@body</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='part identifier id'>part</span><span class='bitor op'>|</span>
    <span class='comment val'>## and must only yield String values.</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Body yielded non-string value #{part.inspect}&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='part identifier id'>part</span><span class='dot token'>.</span><span class='instance_of? fid id'>instance_of?</span> <span class='String constant id'>String</span>
    <span class='rbrace token'>}</span>
    <span class='yield yield kw'>yield</span> <span class='part identifier id'>part</span>
  <span class='rbrace token'>}</span>
  <span class='comment val'>##</span>
  <span class='comment val'>## The Body itself should not be an instance of String, as this will</span>
  <span class='comment val'>## break in Ruby 1.9.</span>
  <span class='comment val'>##</span>
  <span class='comment val'>## If the Body responds to +close+, it will be called after iteration.</span>
  <span class='comment val'># XXX howto: assert(&quot;Body has not been closed&quot;) { @closed }</span>


  <span class='comment val'>##</span>
  <span class='comment val'>## If the Body responds to +to_path+, it must return a String</span>
  <span class='comment val'>## identifying the location of a file whose contents are identical</span>
  <span class='comment val'>## to that produced by calling +each+; this may be used by the</span>
  <span class='comment val'>## server as an alternative, possibly more efficient way to</span>
  <span class='comment val'>## transport the response.</span>

  <span class='if if kw'>if</span> <span class='@body ivar id'>@body</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='symbol val'>:to_path</span><span class='rparen token'>)</span>
    <span class='assert identifier id'>assert</span><span class='lparen token'>(</span><span class='string val'>&quot;The file identified by body.to_path does not exist&quot;</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span>
      <span class='colon3 op'>::</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span> <span class='@body ivar id'>@body</span><span class='dot token'>.</span><span class='to_path identifier id'>to_path</span>
    <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>

  <span class='comment val'>##</span>
  <span class='comment val'>## The Body commonly is an Array of Strings, the application</span>
  <span class='comment val'>## instance itself, or a File-like object.</span>
<span class='end end kw'>end</span>
</pre></div>          
              </td>
            </tr>
          </tbody>
        </table>    
      </div>
    </div>  
  </div>
</div>
<div>
</div>
    </div>
  
</div>
  </div>

</div>
</div>
          </div>
        </div>
      </div>                    
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">Shirts</a> |
            <a href="http://github.com/blog">Blog</a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://groups.google.com/group/github/">Google Group</a> |
            <a href="http://develop.github.com/">API</a> |
            <a href="http://twitter.com/github">Status</a>
          </div>
          <div class="company">
            <span id="_rrt" title="0.64509s from xc88-s00039">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> 2009 | <a href="http://github.com/site/terms">Terms of Service</a> | <a href="http://github.com/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com/"><img src="http://github.com/images/modules/footer/engine_yard_logo.png" alt="Engine Yard"></a>
          <div>
            Hosting provided by our<br> partners at Engine Yard
          </div>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display: none;">
      This feature is coming soon.  Sit tight!
    </div>

    <div id="facebox" style="display: none;">       
      <div class="popup">         
        <table>           
          <tbody>             
            <tr>               
              <td class="tl"></td>
              <td class="b"></td>
              <td class="tr"></td>             
            </tr>             
          <tr>               
            <td class="b"></td>               
            <td class="body">                 
              <div class="content"></div>                 
              <div class="footer">                   
                <a href="#" class="close"><img src="http://github.com/facebox/closelabel.gif" title="close" class="close_image"></a>                 
              </div>               
            </td>               
            <td class="b"></td>             
          </tr>             
          <tr>               
            <td class="bl"></td>
            <td class="b"></td>
            <td class="br"></td>             
          </tr>           
        </tbody>         
      </table>       
    </div>     


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-8689483-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
</html>